---
# Ansible playbook to configure hosts
playbook: "default"

# Cluster to group all the resources
cluster:
  name: "EC2Cluster"

# Defaults sections with information related with Packet
defaults:
#  provision:
#    driver: ec2
#    instancetype: t2.nano
#    ec2_access: "***********************************"
#    ec2_secret: "***********************************"
#    region_name: us-east-1

# Hosts to be deployed in Packet and created in OpenNebula
hosts:
#  - reserved_cpu: "100"
#    im_mad: "kvm"
#    vm_mad: "kvm"
#    provision:
#      hostname: "centos-host"
#      ami: "ami-66a7871c"

#  - reserved_cpu: "100"
#    im_mad: "kvm"
#    vm_mad: "kvm"
#    provision:
#      hostname: "ubuntu-host"
#      ami: "ami-759bc50a"

# Datastores to be created in OpenNebula
datastores:
  - name: "<%= @name %>-image"
    ds_mad: "fs"
    tm_mad: "ssh"

  - name: "<%= @name %>-system"
    type: "system_ds"
    tm_mad: "ssh"

# Network to be created in OpenNebula
networks:
  - name: "<%= @name %>-nat"
    vn_mad: "dummy"
    bridge: "br0"
    dns: "8.8.8.8 8.8.4.4"
    gateway: "192.168.150.1"
    description: "Host-only networking with NAT"
    ar:
      - ip: "192.168.150.2"
        size: "253"
        type: "IP4"

  - name: "<%= @name %>-private"
    vn_mad: "dummy"
    bridge: "vxbr100"
    mtu: "1450"
    description: "Private networking"
    ar:
      - ip: "192.168.160.2"
        size: "253"
        type: "IP4"
