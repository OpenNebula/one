function Websock(){"use strict";this._websocket=null,this._rQ=[],this._rQi=0,this._rQmax=1e4,this._sQ=[],this._mode="base64",this.maxBufferedAmount=200,this._eventHandlers={message:function(){},open:function(){},close:function(){},error:function(){}}}function DES(t){"use strict";function e(t){var e,a,n,s,i,r,o,l,c,d,u=[],p=[],h=[];for(a=0,n=56;56>a;++a,n-=8)n+=-5>n?65:-3>n?31:-1>n?63:27===n?35:0,s=7&n,u[a]=0!==(t[n>>>3]&1<<s)?1:0;for(e=0;16>e;++e){for(s=e<<1,i=s+1,h[s]=h[i]=0,r=28;59>r;r+=28)for(a=r-28;r>a;++a)n=a+g[e],p[a]=r>n?u[n]:u[n-28];for(a=0;24>a;++a)0!==p[v[a]]&&(h[s]|=1<<23-a),0!==p[v[a+24]]&&(h[i]|=1<<23-a)}for(e=0,c=0,d=0;16>e;++e)o=h[c++],l=h[c++],w[d]=(16515072&o)<<6,w[d]|=(4032&o)<<10,w[d]|=(16515072&l)>>>10,w[d]|=(4032&l)>>>6,++d,w[d]=(258048&o)<<12,w[d]|=(63&o)<<16,w[d]|=(258048&l)>>>4,w[d]|=63&l,++d}function a(t){var e,a,n,s,i=0,r=t.slice(),o=0;for(a=r[i++]<<24|r[i++]<<16|r[i++]<<8|r[i++],n=r[i++]<<24|r[i++]<<16|r[i++]<<8|r[i++],s=252645135&(a>>>4^n),n^=s,a^=s<<4,s=65535&(a>>>16^n),n^=s,a^=s<<16,s=858993459&(n>>>2^a),a^=s,n^=s<<2,s=16711935&(n>>>8^a),a^=s,n^=s<<8,n=n<<1|n>>>31&1,s=2863311530&(a^n),a^=s,n^=s,a=a<<1|a>>>31&1,i=0;8>i;++i)s=n<<28|n>>>4,s^=w[o++],e=_[63&s],e|=f[s>>>8&63],e|=p[s>>>16&63],e|=d[s>>>24&63],s=n^w[o++],e|=b[63&s],e|=m[s>>>8&63],e|=h[s>>>16&63],e|=u[s>>>24&63],a^=e,s=a<<28|a>>>4,s^=w[o++],e=_[63&s],e|=f[s>>>8&63],e|=p[s>>>16&63],e|=d[s>>>24&63],s=a^w[o++],e|=b[63&s],e|=m[s>>>8&63],e|=h[s>>>16&63],e|=u[s>>>24&63],n^=e;for(n=n<<31|n>>>1,s=2863311530&(a^n),a^=s,n^=s,a=a<<31|a>>>1,s=16711935&(a>>>8^n),n^=s,a^=s<<8,s=858993459&(a>>>2^n),n^=s,a^=s<<2,s=65535&(n>>>16^a),a^=s,n^=s<<16,s=252645135&(n>>>4^a),a^=s,n^=s<<4,s=[n,a],i=0;8>i;i++)r[i]=(s[i>>>2]>>>8*(3-i%4))%256,r[i]<0&&(r[i]+=256);return r}function n(t){return a(t.slice(0,8)).concat(a(t.slice(8,16)))}var s,i,r,o,l,c,d,u,p,h,f,m,_,b,v=[13,16,10,23,0,4,2,27,14,5,20,9,22,18,11,3,25,7,15,6,26,19,12,1,40,51,30,36,46,54,29,39,50,44,32,47,43,48,38,55,33,52,45,41,49,35,28,31],g=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],y=0,w=[];return s=65536,i=1<<24,r=s|i,o=4,l=1024,c=o|l,d=[r|l,y|y,s|y,r|c,r|o,s|c,y|o,s|y,y|l,r|l,r|c,y|l,i|c,r|o,i|y,y|o,y|c,i|l,i|l,s|l,s|l,r|y,r|y,i|c,s|o,i|o,i|o,s|o,y|y,y|c,s|c,i|y,s|y,r|c,y|o,r|y,r|l,i|y,i|y,y|l,r|o,s|y,s|l,i|o,y|l,y|o,i|c,s|c,r|c,s|o,r|y,i|c,i|o,y|c,s|c,r|l,y|c,i|l,i|l,y|y,s|o,s|l,y|y,r|o],s=1<<20,i=1<<31,r=s|i,o=32,l=32768,c=o|l,u=[r|c,i|l,y|l,s|c,s|y,y|o,r|o,i|c,i|o,r|c,r|l,i|y,i|l,s|y,y|o,r|o,s|l,s|o,i|c,y|y,i|y,y|l,s|c,r|y,s|o,i|o,y|y,s|l,y|c,r|l,r|y,y|c,y|y,s|c,r|o,s|y,i|c,r|y,r|l,y|l,r|y,i|l,y|o,r|c,s|c,y|o,y|l,i|y,y|c,r|l,s|y,i|o,s|o,i|c,i|o,s|o,s|l,y|y,i|l,y|c,i|y,r|o,r|c,s|l],s=1<<17,i=1<<27,r=s|i,o=8,l=512,c=o|l,p=[y|c,r|l,y|y,r|o,i|l,y|y,s|c,i|l,s|o,i|o,i|o,s|y,r|c,s|o,r|y,y|c,i|y,y|o,r|l,y|l,s|l,r|y,r|o,s|c,i|c,s|l,s|y,i|c,y|o,r|c,y|l,i|y,r|l,i|y,s|o,y|c,s|y,r|l,i|l,y|y,y|l,s|o,r|c,i|l,i|o,y|l,y|y,r|o,i|c,s|y,i|y,r|c,y|o,s|c,s|l,i|o,r|y,i|c,y|c,r|y,s|c,y|o,r|o,s|l],s=8192,i=1<<23,r=s|i,o=1,l=128,c=o|l,h=[r|o,s|c,s|c,y|l,r|l,i|c,i|o,s|o,y|y,r|y,r|y,r|c,y|c,y|y,i|l,i|o,y|o,s|y,i|y,r|o,y|l,i|y,s|o,s|l,i|c,y|o,s|l,i|l,s|y,r|l,r|c,y|c,i|l,i|o,r|y,r|c,y|c,y|y,y|y,r|y,s|l,i|l,i|c,y|o,r|o,s|c,s|c,y|l,r|c,y|c,y|o,s|y,i|o,s|o,r|l,i|c,s|o,s|l,i|y,r|o,y|l,i|y,s|y,r|l],s=1<<25,i=1<<30,r=s|i,o=256,l=1<<19,c=o|l,f=[y|o,s|c,s|l,r|o,y|l,y|o,i|y,s|l,i|c,y|l,s|o,i|c,r|o,r|l,y|c,i|y,s|y,i|l,i|l,y|y,i|o,r|c,r|c,s|o,r|l,i|o,y|y,r|y,s|c,s|y,r|y,y|c,y|l,r|o,y|o,s|y,i|y,s|l,r|o,i|c,s|o,i|y,r|l,s|c,i|c,y|o,s|y,r|l,r|c,y|c,r|y,r|c,s|l,y|y,i|l,r|y,y|c,s|o,i|o,y|l,y|y,i|l,s|c,i|o],s=1<<22,i=1<<29,r=s|i,o=16,l=16384,c=o|l,m=[i|o,r|y,y|l,r|c,r|y,y|o,r|c,s|y,i|l,s|c,s|y,i|o,s|o,i|l,i|y,y|c,y|y,s|o,i|c,y|l,s|l,i|c,y|o,r|o,r|o,y|y,s|c,r|l,y|c,s|l,r|l,i|y,i|l,y|o,r|o,s|l,r|c,s|y,y|c,i|o,s|y,i|l,i|y,y|c,i|o,r|c,s|l,r|y,s|c,r|l,y|y,r|o,y|o,y|l,r|y,s|c,y|l,s|o,i|c,y|y,r|l,i|y,s|o,i|c],s=1<<21,i=1<<26,r=s|i,o=2,l=2048,c=o|l,_=[s|y,r|o,i|c,y|y,y|l,i|c,s|c,r|l,r|c,s|y,y|y,i|o,y|o,i|y,r|o,y|c,i|l,s|c,s|o,i|l,i|o,r|y,r|l,s|o,r|y,y|l,y|c,r|c,s|l,y|o,i|y,s|l,i|y,s|l,s|y,i|c,i|c,r|o,r|o,y|o,s|o,i|y,i|l,s|y,r|l,y|c,s|c,r|l,y|c,i|o,r|c,r|y,s|l,y|y,y|o,r|c,y|y,s|c,r|y,y|l,i|o,i|l,y|l,s|o],s=1<<18,i=1<<28,r=s|i,o=64,l=4096,c=o|l,b=[i|c,y|l,s|y,r|c,i|y,i|c,y|o,i|y,s|o,r|y,r|c,s|l,r|l,s|c,y|l,y|o,r|y,i|o,i|l,y|c,s|l,s|o,r|o,r|l,y|c,y|y,y|y,r|o,i|o,i|l,s|c,s|y,s|c,s|y,r|l,y|l,y|o,r|o,y|l,s|c,i|l,y|o,i|o,r|y,r|o,i|y,s|y,i|c,y|y,r|c,s|o,i|o,r|y,i|l,i|c,y|y,r|c,s|l,s|l,y|c,y|c,s|o,i|y,r|l],e(t),{encrypt:n}}function KeyEventDecoder(t,e){"use strict";function a(t){for(var a=0;a<t.length;++a)e(t[a])}function n(a,n){var s={type:n},i=kbdUtil.getKey(a);i&&(s.keyId=i);var r=kbdUtil.getKeysym(a),o=t.hasShortcutModifier()||!!t.activeCharModifier();r&&("keydown"!==n||kbdUtil.nonCharacterKey(a)||o)&&(s.keysym=r);var l=16===a.keyCode||"Shift"===a.key,c=!l&&("keydown"!==n||t.hasShortcutModifier()||!!kbdUtil.nonCharacterKey(a)),d="keydown"===n&&t.activeCharModifier()&&!kbdUtil.nonCharacterKey(a),u=t.activeCharModifier();if(u&&r){for(var p=!1,h=0;h<u.length;++h)u[h]===r.keysym&&(p=!0);"keypress"!==n||p||(s.escape=t.activeCharModifier())}return d&&e({type:"stall"}),e(s),c}return{keydown:function(e){return a(t.keydown(e)),n(e,"keydown")},keypress:function(t){return n(t,"keypress")},keyup:function(e){return a(t.keyup(e)),n(e,"keyup")},syncModifiers:function(e){a(t.syncAny(e))},releaseAll:function(){e({type:"releaseall"})}}}function VerifyCharModifier(t){"use strict";function e(){if(!n)for(var s=function(){clearTimeout(n),n=null,e()};0!==a.length;){var i=a[0];switch(a=a.splice(1),i.type){case"stall":return void(n=setTimeout(s,5));case"keydown":0!==a.length&&"keypress"===a[0].type&&(!a[0].escape||i.keysym&&i.keysym.keysym===a[0].keysym.keysym||(i.escape=a[0].escape),i.keysym=a[0].keysym,a=a.splice(1))}"stall"!==i.type&&t(i)}}var a=[],n=null;return function(t){a.push(t),e()}}function TrackKeyState(t){"use strict";var e=[];return function(a){var n=0!==e.length?e[e.length-1]:null;switch(a.type){case"keydown":n&&a.keyId&&n.keyId===a.keyId||(n={keyId:a.keyId,keysyms:{}},e.push(n)),a.keysym&&(n.keysyms[a.keysym.keysym]=a.keysym,n.ignoreKeyPress=!0,t(a));break;case"keypress":n||(n={keyId:a.keyId,keysyms:{}},e.push(n)),a.keysym||console.log("keypress with no keysym:",a),a.keysym&&!n.ignoreKeyPress&&(n.keysyms[a.keysym.keysym]=a.keysym,a.type="keydown",t(a));break;case"keyup":if(0===e.length)return;for(var s=null,i=0;i!==e.length;++i)if(e[i].keyId===a.keyId){s=i;break}null===s&&(s=e.length-1);var r=e.splice(s,1)[0],o=function(){function t(){}return function(e){return t.prototype=e,new t}}();for(var l in r.keysyms){var c=o(a);c.keysym=r.keysyms[l],t(c)}break;case"releaseall":for(var i=0;i<e.length;++i)for(var l in e[i].keysyms){var d=e[i].keysyms[l];t({keyId:0,keysym:d,type:"keyup"})}e=[]}}}function EscapeModifiers(t){"use strict";return function(e){if("keydown"!==e.type||void 0===e.escape)return void t(e);for(var a=0;a<e.escape.length;++a)t({type:"keyup",keyId:0,keysym:keysyms.lookup(e.escape[a])});t(e);for(var a=0;a<e.escape.length;++a)t({type:"keydown",keyId:0,keysym:keysyms.lookup(e.escape[a])})}}function JSUnzip(){this.getInt=function(t,e){switch(e){case 4:return(255&this.data.charCodeAt(t+3))<<24|(255&this.data.charCodeAt(t+2))<<16|(255&this.data.charCodeAt(t+1))<<8|255&this.data.charCodeAt(t+0);case 2:return(255&this.data.charCodeAt(t+1))<<8|255&this.data.charCodeAt(t+0);default:return 255&this.data.charCodeAt(t)}},this.getDOSDate=function(t,e){var a=31&t,n=(t>>5&15)-1,s=1980+(t>>9&127),i=2*(31&e),r=e>>5&63;return hour=e>>11&31,new Date(s,n,a,hour,r,i)},this.open=function(t){if(this.data=t,this.files=[],this.data.length<22)return{status:!1,error:"Invalid data"};for(var e=this.data.length-22;e>=0&&101010256!=this.getInt(e,4);)--e;if(0>e)return{status:!1,error:"Invalid data"};if(0!=this.getInt(e+4,2)||0!=this.getInt(e+6,2))return{status:!1,error:"No multidisk support"};var a=this.getInt(e+8,2),n=this.getInt(e+16,4),s=this.getInt(e+20,2);this.comment=this.data.slice(e+22,e+22+s);for(var i=n,r=0;a>r;++r){if(33639248!=this.getInt(i+0,4))return{status:!1,error:"Invalid data"};if(this.getInt(i+6,2)>20)return{status:!1,error:"Unsupported version"};if(1&this.getInt(i+8,2))return{status:!1,error:"Encryption not implemented"};var o=this.getInt(i+10,2);if(0!=o&&8!=o)return{status:!1,error:"Unsupported compression method"};var l=this.getInt(i+12,2),c=this.getInt(i+14,2),d=this.getDOSDate(c,l),u=(this.getInt(i+16,4),this.getInt(i+20,4)),p=this.getInt(i+24,4),h=this.getInt(i+28,2),f=this.getInt(i+30,2),m=this.getInt(i+32,2),_=this.getInt(i+42,4),b=this.data.slice(i+46,i+46+h),v=this.data.slice(i+46+h+f,i+46+h+f+m);if(67324752!=this.getInt(_+0,4))return{status:!1,error:"Invalid data"};var g=this.getInt(_+26,2),y=this.getInt(_+28,2),w=_+30+g+y;this.files[b]={fileComment:v,compressionMethod:o,compressedSize:u,uncompressedSize:p,localFileContent:w,lastModifiedDate:d},i+=46+h+f+m}return{status:!0}},this.read=function(t){var e=this.files[t];if(e){if(8==e.compressionMethod){tinf||(tinf=new TINF,tinf.init());var a=tinf.uncompress(this.data,e.localFileContent);return a.status==tinf.OK?{status:!0,data:a.data}:{status:!1,error:a.error}}return{status:!0,data:this.data.slice(e.localFileContent,e.localFileContent+e.uncompressedSize)}}return{status:!1,error:"File '"+t+"' doesn't exist in zip"}}}function TINF(){function t(t,e,a,n,s){for(var i=0;24>e;)a|=(255&t[n++])<<e,e+=8;return i=a&65535>>16-s,a>>=s,e-=s,[e,a,n,i]}this.OK=0,this.DATA_ERROR=-3,this.WINDOW_SIZE=32768,this.TREE=function(){this.table=new Array(16),this.trans=new Array(288)},this.DATA=function(t){this.source="",this.sourceIndex=0,this.tag=0,this.bitcount=0,this.dest=[],this.history=[],this.ltree=new t.TREE,this.dtree=new t.TREE},this.sltree=new this.TREE,this.sdtree=new this.TREE,this.length_bits=new Array(30),this.length_base=new Array(30),this.dist_bits=new Array(30),this.dist_base=new Array(30),this.clcidx=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],this.build_bits_base=function(t,e,a,n){var s,i;for(s=0;a>s;++s)t[s]=0;for(s=0;30-a>s;++s)t[s+a]=Math.floor(s/a);for(i=n,s=0;30>s;++s)e[s]=i,i+=1<<t[s]},this.build_fixed_trees=function(t,e){var a;for(a=0;7>a;++a)t.table[a]=0;for(t.table[7]=24,t.table[8]=152,t.table[9]=112,a=0;24>a;++a)t.trans[a]=256+a;for(a=0;144>a;++a)t.trans[24+a]=a;for(a=0;8>a;++a)t.trans[168+a]=280+a;for(a=0;112>a;++a)t.trans[176+a]=144+a;for(a=0;5>a;++a)e.table[a]=0;for(e.table[5]=32,a=0;32>a;++a)e.trans[a]=a},this.build_tree=function(t,e,a,n){var s,i,r=new Array(16);for(s=0;16>s;++s)t.table[s]=0;for(s=0;n>s;++s)t.table[e[a+s]]++;for(t.table[0]=0,i=0,s=0;16>s;++s)r[s]=i,i+=t.table[s];for(s=0;n>s;++s)e[a+s]&&(t.trans[r[e[a+s]]++]=s)},this.getbit=function(t){var e;return t.bitcount--||(t.tag=255&t.source[t.sourceIndex++],t.bitcount=7),e=1&t.tag,t.tag>>=1,e},this.read_bits=function(e,a,n){if(!a)return n;var s=t(e.source,e.bitcount,e.tag,e.sourceIndex,a);return e.bitcount=s[0],e.tag=s[1],e.sourceIndex=s[2],s[3]+n},this.decode_symbol=function(t,e){for(;t.bitcount<16;)t.tag=t.tag|(255&t.source[t.sourceIndex++])<<t.bitcount,t.bitcount+=8;var a=0,n=0,s=0;do n=2*n+((t.tag&1<<s)>>s),++s,a+=e.table[s],n-=e.table[s];while(n>=0);return t.tag>>=s,t.bitcount-=s,e.trans[a+n]},this.decode_trees=function(t,e,a){var n,s,i,r,o,l,c=new this.TREE,d=new Array(320);for(n=this.read_bits(t,5,257),s=this.read_bits(t,5,1),i=this.read_bits(t,4,4),r=0;19>r;++r)d[r]=0;for(r=0;i>r;++r){var u=this.read_bits(t,3,0);d[this.clcidx[r]]=u}for(this.build_tree(c,d,0,19),o=0;n+s>o;){var p=this.decode_symbol(t,c);switch(p){case 16:var h=d[o-1];for(l=this.read_bits(t,2,3);l;--l)d[o++]=h;break;case 17:for(l=this.read_bits(t,3,3);l;--l)d[o++]=0;break;case 18:for(l=this.read_bits(t,7,11);l;--l)d[o++]=0;break;default:d[o++]=p}}this.build_tree(e,d,0,n),this.build_tree(a,d,n,s)},this.inflate_block_data=function(t,e,a){for(var n=t.dest,s=n.length;;){var i=this.decode_symbol(t,e);if(256==i)return this.OK;if(256>i)n[s++]=i,t.history.push(i);else{var r,o,l,c;if(i-=257,r=this.read_bits(t,this.length_bits[i],this.length_base[i]),o=this.decode_symbol(t,a),l=t.history.length-this.read_bits(t,this.dist_bits[o],this.dist_base[o]),0>l)throw"Invalid zlib offset "+l;for(c=l;l+r>c;++c)n[s++]=t.history[c],t.history.push(t.history[c])}}},this.inflate_uncompressed_block=function(t){var e,a,n;if(t.bitcount>7){var s=Math.floor(t.bitcount/8);t.sourceIndex-=s,t.bitcount=0,t.tag=0}if(e=t.source[t.sourceIndex+1],e=256*e+t.source[t.sourceIndex],a=t.source[t.sourceIndex+3],a=256*a+t.source[t.sourceIndex+2],e!=(65535&~a))return this.DATA_ERROR;for(t.sourceIndex+=4,n=e;n;--n)t.history.push(t.source[t.sourceIndex]),t.dest[t.dest.length]=t.source[t.sourceIndex++];return t.bitcount=0,this.OK},this.inflate_fixed_block=function(t){return this.inflate_block_data(t,this.sltree,this.sdtree)},this.inflate_dynamic_block=function(t){return this.decode_trees(t,t.ltree,t.dtree),this.inflate_block_data(t,t.ltree,t.dtree)},this.init=function(){this.build_fixed_trees(this.sltree,this.sdtree),this.build_bits_base(this.length_bits,this.length_base,4,3),this.build_bits_base(this.dist_bits,this.dist_base,2,1),this.length_bits[28]=0,this.length_base[28]=258,this.reset()},this.reset=function(){this.d=new this.DATA(this),delete this.header},this.uncompress=function(t,e){var a,n=this.d;n.source=t,n.sourceIndex=e,n.bitcount=0,n.dest=[],"undefined"==typeof this.header&&(this.header=this.read_bits(n,16,0));var s=0;do{var i,r;switch(a=this.getbit(n),i=this.read_bits(n,2,0)){case 0:r=this.inflate_uncompressed_block(n);break;case 1:r=this.inflate_fixed_block(n);break;case 2:r=this.inflate_dynamic_block(n);break;default:return{status:this.DATA_ERROR}}if(r!=this.OK)return{status:this.DATA_ERROR};s++}while(!a&&n.sourceIndex<n.source.length);return n.history=n.history.slice(-this.WINDOW_SIZE),{status:this.OK,data:n.dest}}}function SpiceConn(t){if(void 0===t||void 0===t.uri||!t.uri)throw new Error("You must specify a uri");if(this.ws=new WebSocket(t.uri,"binary"),!this.ws.binaryType)throw new Error("WebSocket doesn't support binaryType.  Try a different browser.");if(this.connection_id=void 0!==t.connection_id?t.connection_id:0,this.type=void 0!==t.type?t.type:SPICE_CHANNEL_MAIN,this.chan_id=void 0!==t.chan_id?t.chan_id:0,void 0!==t.parent&&(this.parent=t.parent,this.message_id=t.parent.message_id,this.password=t.parent.password),void 0!==t.screen_id&&(this.screen_id=t.screen_id),void 0!==t.dump_id&&(this.dump_id=t.dump_id),void 0!==t.message_id&&(this.message_id=t.message_id),void 0!==t.password&&(this.password=t.password),void 0!==t.onerror&&(this.onerror=t.onerror),void 0!==t.onsuccess&&(this.onsuccess=t.onsuccess),void 0!==t.onagent&&(this.onagent=t.onagent),this.state="connecting",this.ws.parent=this,this.wire_reader=new SpiceWireReader(this,this.process_inbound),this.messages_sent=0,this.warnings=[],this.ws.addEventListener("open",function(){DEBUG>0&&console.log(">> WebSockets.onopen"),DEBUG>0&&console.log("id "+this.parent.connection_id+"; type "+this.parent.type),this.parent.send_hdr(),this.parent.wire_reader.request(SpiceLinkHeader.prototype.buffer_size()),this.parent.state="start"}),this.ws.addEventListener("error",function(t){"url"in t.target&&this.parent.log_err("WebSocket error: Can't connect to websocket on URL: "+t.target.url),this.parent.report_error(t)}),this.ws.addEventListener("close",function(t){if(DEBUG>0&&console.log(">> WebSockets.onclose"),DEBUG>0&&console.log("id "+this.parent.connection_id+"; type "+this.parent.type),DEBUG>0&&console.log(t),"closing"!=this.parent.state&&"error"!=this.parent.state&&void 0!==this.parent.onerror){var t;t=new Error("connecting"==this.parent.state?"Connection refused.":"start"==this.parent.state||"link"==this.parent.state?"Unexpected protocol mismatch.":"ticket"==this.parent.state?"Bad password.":"Unexpected close while "+this.parent.state),this.parent.onerror(t),this.parent.log_err(t.toString())}}),2==this.ws.readyState||3==this.ws.readyState)throw new Error("Unable to connect to "+t.uri);this.timeout=window.setTimeout(spiceconn_timeout,SPICE_CONNECT_TIMEOUT,this)}function spiceconn_timeout(t){SpiceConn.prototype.handle_timeout.call(t)}function SpiceArrayBufferSlice(t,e){t=t||0,e=e||this.byteLength,0>e&&(e=this.byteLength+e),0>t&&(t=this.byteLength+t),0>t&&(t=0),0>e&&(e=0),e>this.byteLength&&(e=this.byteLength),t>e&&(t=e);var a,n=new ArrayBuffer(e-t),s=new Uint8Array(this,t,e-t),i=new Uint8Array(n);for(a=0;e-t>a;a++)i[a]=s[a];return n}function combine_array_buffers(t,e){var a,n=new Uint8Array(t),s=new Uint8Array(e),i=new ArrayBuffer(t.byteLength+e.byteLength),r=new Uint8Array(i),o=0;for(a=0;a<n.length;a++)r[o++]=n[a];for(a=0;a<s.length;a++)r[o++]=s[a];return i}function hexdump_buffer(t){for(var e=new Uint8Array(t),a="",n="",s=0,i=0;i<e.length;i++){var r=Number(e[i]).toString(16);if(1==r.length&&(a+="0"),a+=r+" ",n+=10==e[i]||13==e[i]||8==e[i]?".":String.fromCharCode(e[i]),i%16==15||i==e.length-1){for(;i%16!=15;)a+="   ",i++;0==s&&console.log(a+" | "+n),"00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 "==a?1==s?(console.log("."),s++):0==s&&s++:s=0,a=n=""}}}function get_scancode(t){return void 0===common_scanmap[t]?-1!=navigator.userAgent.indexOf("Firefox")?firefox_scanmap[t]:DOM_scanmap[t]:common_scanmap[t]}function keycode_to_start_scan(t){var e=get_scancode(t);return void 0===e?(alert("no map for "+t),0):256>e?e:224|e-256<<8}function keycode_to_end_scan(t){var e=get_scancode(t);return void 0===e?0:256>e?128|e:32992|e-256<<8}function rfc2083_make_crc_table(){var t,e,a;for(e=0;256>e;e++){for(t=e,a=0;8>a;a++)1&t?t=(3988292384^t>>>1)>>>0&4294967295:t>>>=1;rfc2083_crc_table[e]=t}rfc2083_crc_table_computed=1}function rfc2083_update_crc(t,e,a,n){var s,i=t;for(rfc2083_crc_table_computed||rfc2083_make_crc_table(),s=0;n>s;s++)i=rfc2083_crc_table[255&(i^e[a+s])]^i>>>8;return i}function rfc2083_crc(t,e,a){return 4294967295^rfc2083_update_crc(4294967295,t,e,a)}function crc32(t,e,a){var n=new Uint8Array(t);return rfc2083_crc(n,e,a)}function PngIHDR(t,e){this.width=t,this.height=e,this.depth=8,this.type=6,this.compression=0,this.filter=0,this.interlace=0}function adler(){this.s1=1,this.s2=0}function PngIDAT(t,e,a){if(a.byteLength>65535)throw new Error("Cannot handle more than 64K");this.data=a,this.width=t,this.height=e}function PngIEND(){}function create_rgba_png(t,e,a){var n,s=new PngIHDR(t,e),i=new PngIDAT(t,e,a),r=new PngIEND,o=new ArrayBuffer(s.buffer_size()+i.buffer_size()+r.buffer_size()),l=s.to_buffer(o);l=i.to_buffer(o,l),l=r.to_buffer(o,l);var c=new Uint8Array(o),d="";for(n=0;l>n;n++)d+="%",c[n]<16&&(d+="0"),d+=c[n].toString(16);return"%89PNG%0D%0A%1A%0A"+d}function lz_rgb32_decompress(t,e,a,n,s){var r,o=e,l=0;for(r=t[o++];4*l<a.length;r=t[o++]){var c=l,d=r>>5,u=(31&r)<<8;if(r>=32){var p;if(d--,6==d)do p=t[o++],d+=p;while(255==p);if(p=t[o++],u+=p,255==p&&u-p==7936&&(u=t[o++]<<8,u+=t[o++],u+=8191),d+=1,n==LZ_IMAGE_TYPE_RGBA&&(d+=2),u+=1,c-=u,c==l-1)for(var h=c;d;--d){if(n==LZ_IMAGE_TYPE_RGBA)a[4*l+3]=a[4*h+3];else for(i=0;4>i;i++)a[4*l+i]=a[4*h+i];l++}else for(;d;--d){if(n==LZ_IMAGE_TYPE_RGBA)a[4*l+3]=a[4*c+3];else for(i=0;4>i;i++)a[4*l+i]=a[4*c+i];l++,c++}}else for(r++,n==LZ_IMAGE_TYPE_RGBA?a[4*l+3]=t[o++]:(a[4*l+0]=t[o+2],a[4*l+1]=t[o+1],a[4*l+2]=t[o+0],s&&(a[4*l+3]=255),o+=3),l++,--r;r;r--)n==LZ_IMAGE_TYPE_RGBA?a[4*l+3]=t[o++]:(a[4*l+0]=t[o+2],a[4*l+1]=t[o+1],a[4*l+2]=t[o+0],s&&(a[4*l+3]=255),o+=3),l++}return o-1}function convert_spice_lz_to_web(t,e){var a;if(e.type===LZ_IMAGE_TYPE_RGB32||e.type===LZ_IMAGE_TYPE_RGBA){var n=new Uint8Array(e.data),s=t.createImageData(e.width,e.height);a=lz_rgb32_decompress(n,0,s.data,LZ_IMAGE_TYPE_RGB32,e.type!=LZ_IMAGE_TYPE_RGBA),e.type==LZ_IMAGE_TYPE_RGBA&&lz_rgb32_decompress(n,a,s.data,LZ_IMAGE_TYPE_RGBA,!1)}else{if(e.type!==LZ_IMAGE_TYPE_XXXA)return void 0;var n=new Uint8Array(e.data),s=t.createImageData(e.width,e.height);lz_rgb32_decompress(n,0,s.data,LZ_IMAGE_TYPE_RGBA,!1)}return s}function ceil_log_2(t){if(1===t)return 0;var e=1;for(t-=1;t>>>=1;)e++;return e}function family_init(t,e,a){var n;for(n=0;e>n;n++){var s,i;s=a-e,s>bppmask[e-n]&&(s=bppmask[e-n]),i=bppmask[e]+1-(s<<n),t.nGRcodewords[n]=s<<n,t.notGRcwlen[n]=s+ceil_log_2(i),t.notGRprefixmask[n]=bppmask[32-s]>>>0,t.notGRsuffixlen[n]=ceil_log_2(i)}var r,o=bppmask[e],l=o>>>1;for(r=0;o>=r;r++)t.xlatU2L[r]=l>=r?r<<1:(o-r<<1)+1;for(r=0;o>=r;r++)t.xlatL2U[r]=1&r?o-(r>>>1):r>>>1}function quic_image_bpc(t){switch(t){case QUIC_IMAGE_TYPE_GRAY:return 8;case QUIC_IMAGE_TYPE_RGB16:return 5;case QUIC_IMAGE_TYPE_RGB24:return 8;case QUIC_IMAGE_TYPE_RGB32:return 8;case QUIC_IMAGE_TYPE_RGBA:return 8;case QUIC_IMAGE_TYPE_INVALID:default:return console.log("quic: bad image type\n"),0}}function cnt_l_zeroes(t){return 4286578688&t?lzeroes[t>>>24]:4294934528&t?8+lzeroes[t>>>16&255]:4294967168&t?16+lzeroes[t>>>8&255]:24+lzeroes[255&t]}function golomb_decoding_8bpc(t,e){var a,n;if(0>e||e>family_8bpc.notGRprefixmask[t]){var s=cnt_l_zeroes(e);n=s+1+t,a=s<<t|e>>32-n&bppmask[t]}else n=family_8bpc.notGRcwlen[t],a=family_8bpc.nGRcodewords[t]+(e>>32-n&bppmask[family_8bpc.notGRsuffixlen[t]]);return{codewordlen:n,rc:a}}function golomb_code_len_8bpc(t,e){return t<family_8bpc.nGRcodewords[e]?(t>>>e)+1+e:family_8bpc.notGRcwlen[e]}function QuicModel(t){var e,a=0;switch(this.levels=1<<t,this.n_buckets_ptrs=0,evol){case 1:this.repfirst=3,this.firstsize=1,this.repnext=2,this.mulsize=2;break;case 3:this.repfirst=1,this.firstsize=1,this.repnext=1,this.mulsize=2;break;case 5:this.repfirst=1,this.firstsize=1,this.repnext=1,this.mulsize=4;break;case 0:case 2:case 4:console.log("quic: findmodelparams(): evol value obsolete!!!\n");default:console.log("quic: findmodelparams(): evol out of range!!!\n")}this.n_buckets=0;var n=this.repfirst+1,s=this.firstsize;do e=this.n_buckets?a+1:0,--n||(n=this.repnext,s*=this.mulsize),a=e+s-1,a+s>=this.levels&&(a=this.levels-1),this.n_buckets_ptrs||(this.n_buckets_ptrs=this.levels),this.n_buckets++;while(a<this.levels-1)}function QuicBucket(){this.counters=[0,0,0,0,0,0,0,0]}function QuicFamilyStat(){this.buckets_ptrs=[],this.buckets_buf=[]}function QuicChannel(t,e){return this.state=new CommonState,this.family_stat_8bpc=new QuicFamilyStat,this.family_stat_5bpc=new QuicFamilyStat,this.correlate_row={zero:0,row:[]},this.model_8bpc=t,this.model_5bpc=e,this.buckets_ptrs=[],this.family_stat_8bpc.fill_model_structures(this.model_8bpc)?(this.family_stat_5bpc.fill_model_structures(this.model_5bpc),void 0):void 0}function CommonState(){}function QuicEncoder(){this.rgb_state=new CommonState,this.model_8bpc=new QuicModel(8),this.model_5bpc=new QuicModel(5),this.channels=[];var t;for(t=0;4>t;t++)if(this.channels[t]=new QuicChannel(this.model_8bpc,this.model_5bpc),!this.channels[t])return void console.log("quic: failed to create channel")}function SpiceQuic(){}function convert_spice_quic_to_web(t,e){var a,n=t.createImageData(e.width,e.height);for(a=0;a<n.width*n.height*4;a+=4)n.data[a+0]=e.outptr[a+2],n.data[a+1]=e.outptr[a+1],n.data[a+2]=e.outptr[a+0],n.data[a+3]=e.type!==QUIC_IMAGE_TYPE_RGBA?255:255-e.outptr[a+3];return n}function convert_spice_bitmap_to_web(t,e){var a,n,s,i=new Uint8Array(e.data);if(e.format!=SPICE_BITMAP_FMT_32BIT&&e.format!=SPICE_BITMAP_FMT_RGBA)return void 0;for(a=t.createImageData(e.x,e.y),n=0;n<e.y*e.stride;)for(s=0;s<e.x;s++,n+=4)a.data[n+0]=i[n+2],a.data[n+1]=i[n+1],a.data[n+2]=i[n+0],a.data[n+3]=e.format==SPICE_BITMAP_FMT_32BIT?255:i[n];return a}function SpiceDataView(t,e,a){this.u8=void 0!==e?void 0!==a?new Uint8Array(t,e,a):new Uint8Array(t,e):new Uint8Array(t)}function SpiceChannelId(){}function SpiceRect(){}function SpiceClipRects(){}function SpiceClip(){}function SpiceImageDescriptor(){}function SpicePalette(){}function SpiceBitmap(){}function SpiceImage(){}function SpiceQMask(){}function SpicePattern(){}function SpiceBrush(){}function SpiceFill(){}function SpiceCopy(){}function SpicePoint16(){}function SpicePoint(){}function SpiceCursorHeader(){}function SpiceCursor(){}function SpiceSurface(){}function SpiceLinkHeader(t,e){this.magic=SPICE_MAGIC,this.major_version=SPICE_VERSION_MAJOR,this.minor_version=SPICE_VERSION_MINOR,this.size=0,void 0!==t&&this.from_buffer(t,e)}function SpiceLinkMess(t,e){this.connection_id=0,this.channel_type=0,this.channel_id=0,this.common_caps=[],this.channel_caps=[],void 0!==t&&this.from_buffer(t,e)}function SpiceLinkReply(t,e){this.error=0,this.pub_key=void 0,this.common_caps=[],this.channel_caps=[],void 0!==t&&this.from_buffer(t,e)}function SpiceLinkAuthTicket(){this.auth_mechanism=0,this.encrypted_data=void 0}function SpiceLinkAuthReply(t,e){this.auth_code=0,void 0!==t&&this.from_buffer(t,e)}function SpiceMiniData(t,e){this.type=0,this.size=0,this.data=void 0,void 0!==t&&this.from_buffer(t,e)}function SpiceMsgChannels(t,e){this.num_of_channels=0,this.channels=[],void 0!==t&&this.from_buffer(t,e)}function SpiceMsgMainInit(t,e){this.from_buffer(t,e)}function SpiceMsgMainMouseMode(t,e){this.from_buffer(t,e)}function SpiceMsgMainAgentData(t,e){this.from_buffer(t,e)}function SpiceMsgMainAgentTokens(t,e){this.from_buffer(t,e)}function SpiceMsgSetAck(t,e){this.from_buffer(t,e)}function SpiceMsgcAckSync(t){this.generation=t.generation}function SpiceMsgcMainMouseModeRequest(t){this.mode=t}function SpiceMsgcMainAgentStart(t){this.num_tokens=t}function SpiceMsgcMainAgentData(t,e){this.protocol=VD_AGENT_PROTOCOL,this.type=t,this.opaque=0,this.size=e.buffer_size(),this.data=e}function VDAgentAnnounceCapabilities(t,e){e?(this.request=t,this.caps=e):this.from_buffer(t)}function VDAgentMonitorsConfig(t,e,a,n,s,i){this.num_mon=1,this.flags=t,this.width=e,this.height=a,this.depth=n,this.x=s,this.y=i}function VDAgentFileXferStatusMessage(t,e){e?(this.id=t,this.result=e):this.from_buffer(t)}function VDAgentFileXferStartMessage(t,e,a){this.id=t,this.string="[vdagent-file-xfer]\nname="+e+"\nsize="+a+"\n"}function VDAgentFileXferDataMessage(t,e,a){this.id=t,this.size=e,this.data=a}function SpiceMsgNotify(t,e){this.from_buffer(t,e)}function SpiceMsgcDisplayInit(){this.pixmap_cache_id=1,this.glz_dictionary_id=0,this.pixmap_cache_size=10485760,this.glz_dictionary_window_size=0}function SpiceMsgDisplayBase(){}function SpiceMsgDisplayDrawCopy(t,e){this.from_buffer(t,e)}function SpiceMsgDisplayDrawFill(t,e){this.from_buffer(t,e)}function SpiceMsgDisplayCopyBits(t,e){this.from_buffer(t,e)}function SpiceMsgSurfaceCreate(t,e){this.from_buffer(t,e)}function SpiceMsgSurfaceDestroy(t,e){this.from_buffer(t,e)}function SpiceMsgInputsInit(t,e){this.from_buffer(t,e)}function SpiceMsgInputsKeyModifiers(t,e){this.from_buffer(t,e)}function SpiceMsgCursorInit(t,e){this.from_buffer(t,e)}function SpiceMsgPlaybackData(t,e){this.from_buffer(t,e)}function SpiceMsgPlaybackMode(t,e){this.from_buffer(t,e)}function SpiceMsgPlaybackStart(t,e){this.from_buffer(t,e)}function SpiceMsgCursorSet(t,e){this.from_buffer(t,e)}function SpiceMsgcMousePosition(t,e){if(this.display_id=0,this.buttons_state=t.buttons_state,e){var a=document.body.scrollTop||document.documentElement.scrollTop,n=document.body.scrollLeft||document.documentElement.scrollLeft;this.x=e.clientX-t.display.surfaces[t.display.primary_surface].canvas.offsetLeft+n,this.y=e.clientY-t.display.surfaces[t.display.primary_surface].canvas.offsetTop+a,t.mousex=this.x,t.mousey=this.y}else this.x=this.y=this.buttons_state=0}function SpiceMsgcMouseMotion(t,e){this.display_id=0,this.buttons_state=t.buttons_state,e?(this.x=e.clientX-t.display.surfaces[t.display.primary_surface].canvas.offsetLeft,this.y=e.clientY-t.display.surfaces[t.display.primary_surface].canvas.offsetTop,void 0!==t.mousex&&(this.x-=t.mousex,this.y-=t.mousey),t.mousex=e.clientX-t.display.surfaces[t.display.primary_surface].canvas.offsetLeft,t.mousey=e.clientY-t.display.surfaces[t.display.primary_surface].canvas.offsetTop):this.x=this.y=this.buttons_state=0}function SpiceMsgcMousePress(t,e){e?(this.button=e.button+1,this.buttons_state=1<<e.button,t.buttons_state=this.buttons_state):(this.button=SPICE_MOUSE_BUTTON_LEFT,this.buttons_state=SPICE_MOUSE_BUTTON_MASK_LEFT)}function SpiceMsgcMouseRelease(t,e){e?(this.button=e.button+1,this.buttons_state=0,t.buttons_state=this.buttons_state):(this.button=SPICE_MOUSE_BUTTON_LEFT,this.buttons_state=0)}function SpiceMsgcKeyDown(t){this.code=t?keycode_to_start_scan(t.keyCode):0}function SpiceMsgcKeyUp(t){this.code=t?keycode_to_end_scan(t.keyCode):0}function SpiceMsgDisplayStreamCreate(t,e){this.from_buffer(t,e)}function SpiceStreamDataHeader(){}function SpiceMsgDisplayStreamData(t,e){this.from_buffer(t,e)}function SpiceMsgDisplayStreamClip(t,e){this.from_buffer(t,e)}function SpiceMsgDisplayStreamDestroy(t,e){this.from_buffer(t,e)}function SpiceMsgDisplayInvalList(t,e){this.count=0,this.resources=[],this.from_buffer(t,e)}function SpiceWireReader(t,e){this.sc=t,this.callback=e,this.needed=0,this.buffers=[],this.sc.ws.wire_reader=this,this.sc.ws.binaryType="arraybuffer",this.sc.ws.addEventListener("message",wire_blob_catcher)}function wire_blob_catcher(t){DEBUG>1&&console.log(">> WebSockets.onmessage"),DEBUG>1&&console.log("id "+this.wire_reader.sc.connection_id+"; type "+this.wire_reader.sc.type),SpiceWireReader.prototype.inbound.call(this.wire_reader,t.data)}function putImageDataWithAlpha(t,e,a,n){var s=document.createElement("canvas"),i=s.getContext("2d");s.setAttribute("width",e.width),s.setAttribute("height",e.height),i.putImageData(e,0,0),t.drawImage(s,a,n,e.width,e.height)}function stripAlpha(t){var e;for(e=0;e<t.width*t.height*4;e+=4)t.data[e+3]=255}function SpiceDisplayConn(){SpiceConn.apply(this,arguments)}function handle_mouseover(){this.focus()}function handle_mouseout(){this.sc&&this.sc.cursor&&this.sc.cursor.spice_simulated_cursor&&(this.sc.cursor.spice_simulated_cursor.style.display="none"),this.blur()}function handle_draw_jpeg_onload(){var t,e=null;if(void 0===this.o.sc.surfaces[this.o.base.surface_id]?(DEBUG>2&&this.o.sc.log_info("Discarding jpeg; presumed lost surface "+this.o.base.surface_id),e=document.createElement("canvas"),e.setAttribute("width",this.o.base.box.right),e.setAttribute("height",this.o.base.box.bottom),t=e.getContext("2d")):t=this.o.sc.surfaces[this.o.base.surface_id].canvas.context,this.alpha_img){var a=document.createElement("canvas"),n=a.getContext("2d");a.setAttribute("width",this.alpha_img.width),a.setAttribute("height",this.alpha_img.height),n.putImageData(this.alpha_img,0,0),n.globalCompositeOperation="source-in",n.drawImage(this,0,0),t.drawImage(a,this.o.base.box.left,this.o.base.box.top),this.o.descriptor&&this.o.descriptor.flags&SPICE_IMAGE_FLAGS_CACHE_ME&&("cache"in this.o.sc||(this.o.sc.cache={}),this.o.sc.cache[this.o.descriptor.id]=n.getImageData(0,0,this.alpha_img.width,this.alpha_img.height))}else t.drawImage(this,this.o.base.box.left,this.o.base.box.top),this.src=null,this.o.descriptor&&this.o.descriptor.flags&SPICE_IMAGE_FLAGS_CACHE_ME&&("cache"in this.o.sc||(this.o.sc.cache={}),this.o.sc.cache[this.o.descriptor.id]=t.getImageData(this.o.base.box.left,this.o.base.box.top,this.o.base.box.right-this.o.base.box.left,this.o.base.box.bottom-this.o.base.box.top));if(null==e){if(DUMP_DRAWS&&this.o.sc.parent.dump_id){var s=document.createElement("canvas");s.setAttribute("id",this.o.tag+"."+this.o.sc.surfaces[this.o.base.surface_id].draw_count+"."+this.o.base.surface_id+"@"+this.o.base.box.left+"x"+this.o.base.box.top),s.getContext("2d").drawImage(this,0,0),document.getElementById(this.o.sc.parent.dump_id).appendChild(s)}this.o.sc.surfaces[this.o.base.surface_id].draw_count++}}function SpiceInputsConn(){SpiceConn.apply(this,arguments),this.mousex=void 0,this.mousey=void 0,this.button_state=0,this.waiting_for_ack=0}function handle_mousemove(t){var e,a=new SpiceMiniData;this.sc.mouse_mode==SPICE_MOUSE_MODE_CLIENT?(e=new SpiceMsgcMousePosition(this.sc,t),a.build_msg(SPICE_MSGC_INPUTS_MOUSE_POSITION,e)):(e=new SpiceMsgcMouseMotion(this.sc,t),a.build_msg(SPICE_MSGC_INPUTS_MOUSE_MOTION,e)),this.sc&&this.sc.inputs&&"ready"===this.sc.inputs.state&&(this.sc.inputs.waiting_for_ack<2*SPICE_INPUT_MOTION_ACK_BUNCH?(this.sc.inputs.send_msg(a),this.sc.inputs.waiting_for_ack++):DEBUG>0&&this.sc.log_info("Discarding mouse motion")),this.sc&&this.sc.cursor&&this.sc.cursor.spice_simulated_cursor&&(this.sc.cursor.spice_simulated_cursor.style.display="block",this.sc.cursor.spice_simulated_cursor.style.left=t.pageX-this.sc.cursor.spice_simulated_cursor.spice_hot_x+"px",this.sc.cursor.spice_simulated_cursor.style.top=t.pageY-this.sc.cursor.spice_simulated_cursor.spice_hot_y+"px",t.preventDefault())
}function handle_mousedown(t){var e=new SpiceMsgcMousePress(this.sc,t),a=new SpiceMiniData;a.build_msg(SPICE_MSGC_INPUTS_MOUSE_PRESS,e),this.sc&&this.sc.inputs&&"ready"===this.sc.inputs.state&&this.sc.inputs.send_msg(a),t.preventDefault()}function handle_contextmenu(t){return t.preventDefault(),!1}function handle_mouseup(t){var e=new SpiceMsgcMouseRelease(this.sc,t),a=new SpiceMiniData;a.build_msg(SPICE_MSGC_INPUTS_MOUSE_RELEASE,e),this.sc&&this.sc.inputs&&"ready"===this.sc.inputs.state&&this.sc.inputs.send_msg(a),t.preventDefault()}function handle_mousewheel(t){var e=new SpiceMsgcMousePress,a=new SpiceMsgcMouseRelease;e.button=a.button=t.deltaY<0?SPICE_MOUSE_BUTTON_UP:SPICE_MOUSE_BUTTON_DOWN,e.buttons_state=0,a.buttons_state=0;var n=new SpiceMiniData;n.build_msg(SPICE_MSGC_INPUTS_MOUSE_PRESS,e),this.sc&&this.sc.inputs&&"ready"===this.sc.inputs.state&&this.sc.inputs.send_msg(n),n.build_msg(SPICE_MSGC_INPUTS_MOUSE_RELEASE,a),this.sc&&this.sc.inputs&&"ready"===this.sc.inputs.state&&this.sc.inputs.send_msg(n),t.preventDefault()}function handle_keydown(t){var e=new SpiceMsgcKeyDown(t),a=new SpiceMiniData;check_and_update_modifiers(t,e.code,this.sc),a.build_msg(SPICE_MSGC_INPUTS_KEY_DOWN,e),this.sc&&this.sc.inputs&&"ready"===this.sc.inputs.state&&this.sc.inputs.send_msg(a),t.preventDefault()}function handle_keyup(t){var e=new SpiceMsgcKeyUp(t),a=new SpiceMiniData;check_and_update_modifiers(t,e.code,this.sc),a.build_msg(SPICE_MSGC_INPUTS_KEY_UP,e),this.sc&&this.sc.inputs&&"ready"===this.sc.inputs.state&&this.sc.inputs.send_msg(a),t.preventDefault()}function sendCtrlAltDel(){if(sc&&sc.inputs&&"ready"===sc.inputs.state){var t=new SpiceMsgcKeyDown,e=new SpiceMiniData;update_modifier(!0,KEY_LCtrl,sc),update_modifier(!0,KEY_Alt,sc),t.code=KEY_KP_Decimal,e.build_msg(SPICE_MSGC_INPUTS_KEY_DOWN,t),sc.inputs.send_msg(e),e.build_msg(SPICE_MSGC_INPUTS_KEY_UP,t),sc.inputs.send_msg(e),0==Ctrl_state&&update_modifier(!1,KEY_LCtrl,sc),0==Alt_state&&update_modifier(!1,KEY_Alt,sc)}}function update_modifier(t,e,a){var n=new SpiceMiniData;if(t){var s=new SpiceMsgcKeyDown;s.code=e,n.build_msg(SPICE_MSGC_INPUTS_KEY_DOWN,s)}else{var s=new SpiceMsgcKeyUp;s.code=128|e,n.build_msg(SPICE_MSGC_INPUTS_KEY_UP,s)}a.inputs.send_msg(n)}function check_and_update_modifiers(t,e,a){-1===Shift_state&&(Shift_state=t.shiftKey,Ctrl_state=t.ctrlKey,Alt_state=t.altKey,Meta_state=t.metaKey),e===KEY_ShiftL?Shift_state=!0:e===KEY_Alt?Alt_state=!0:e===KEY_LCtrl?Ctrl_state=!0:57525===e?Meta_state=!0:e===(128|KEY_ShiftL)?Shift_state=!1:e===(128|KEY_Alt)?Alt_state=!1:e===(128|KEY_LCtrl)?Ctrl_state=!1:57525===e&&(Meta_state=!1),a&&a.inputs&&"ready"===a.inputs.state&&(Shift_state!=t.shiftKey&&(console.log("Shift state out of sync"),update_modifier(t.shiftKey,KEY_ShiftL,a),Shift_state=t.shiftKey),Alt_state!=t.altKey&&(console.log("Alt state out of sync"),update_modifier(t.altKey,KEY_Alt,a),Alt_state=t.altKey),Ctrl_state!=t.ctrlKey&&(console.log("Ctrl state out of sync"),update_modifier(t.ctrlKey,KEY_LCtrl,a),Ctrl_state=t.ctrlKey),Meta_state!=t.metaKey&&(console.log("Meta state out of sync"),update_modifier(t.metaKey,57525,a),Meta_state=t.metaKey))}function EBML_write_u1_data_len(t,e,a){var n=128|t;return e.setUint8(a,n),a+1}function EBML_write_u8_value(t,e,a,n){return n=EBML_write_array(t,a,n),n=EBML_write_u1_data_len(1,a,n),a.setUint8(n,e),n+1}function EBML_write_u32_value(t,e,a,n){return n=EBML_write_array(t,a,n),n=EBML_write_u1_data_len(4,a,n),a.setUint32(n,e),n+4}function EBML_write_u16_value(t,e,a,n){return n=EBML_write_array(t,a,n),n=EBML_write_u1_data_len(2,a,n),a.setUint16(n,e),n+2}function EBML_write_float_value(t,e,a,n){return n=EBML_write_array(t,a,n),n=EBML_write_u1_data_len(4,a,n),a.setFloat32(n,e),n+4}function EBML_write_u64_data_len(t,e,a){e.setUint8(a++,1),e.setUint8(a++,0),e.setUint8(a++,0),e.setUint8(a++,0);for(var n=4294967295&t,s=24;s>=0;s-=8)e.setUint8(a++,n>>s);return a}function EBML_write_array(t,e,a){for(var n=0;n<t.length;n++)e.setUint8(a+n,t[n]);return a+t.length}function EBML_write_string(t,e,a){for(var n=0;n<t.length;n++)e.setUint8(a+n,t.charCodeAt(n));return a+t.length}function EBML_write_data(t,e,a,n){return n=EBML_write_array(t,a,n),n=e.length<127?EBML_write_u1_data_len(e.length,a,n):EBML_write_u64_data_len(e.length,a,n),n="string"==typeof e?EBML_write_string(e,a,n):EBML_write_array(e,a,n)}function EBMLHeader(){this.id=EBML_HEADER,this.Version=1,this.ReadVersion=1,this.MaxIDLength=4,this.MaxSizeLength=8,this.DocType="webm",this.DocTypeVersion=2,this.DocTypeReadVersion=2}function webm_Segment(){this.id=WEBM_SEGMENT_HEADER}function webm_SegmentInformation(){this.id=WEBM_SEGMENT_INFORMATION,this.timecode_scale=1e6,this.muxing_app="spice",this.writing_app="spice-html5"}function webm_Audio(t){this.id=WEBM_AUDIO,this.sampling_frequency=t,this.channels=OPUS_CHANNELS}function webm_Seek(t,e){this.id=WEBM_SEEK,this.pos=e,this.seekid=t}function webm_SeekHead(t,e){this.id=WEBM_SEEK_HEAD,this.info=new webm_Seek(WEBM_SEGMENT_INFORMATION,t),this.track=new webm_Seek(WEBM_TRACKS,e)}function webm_TrackEntry(){this.id=WEBM_TRACK_ENTRY,this.number=1,this.uid=1,this.type=2,this.flag_enabled=1,this.flag_default=1,this.flag_forced=1,this.flag_lacing=0,this.min_cache=0,this.max_block_addition_id=0,this.codec_decode_all=0,this.seek_pre_roll=0,this.codec_delay=8e7,this.codec_id="A_OPUS",this.audio=new webm_Audio(OPUS_FREQUENCY),this.codec_private=[79,112,117,115,72,101,97,100,1,OPUS_CHANNELS,0,15,128,187,0,0,0,0,0]}function webm_Tracks(t){this.id=WEBM_TRACKS,this.track_entry=t}function webm_Cluster(t,e){this.id=WEBM_CLUSTER,this.timecode=t,this.data=e}function webm_SimpleBlock(t,e,a){this.id=WEBM_SIMPLE_BLOCK,this.timecode=t,this.data=e,this.keyframe=a}function webm_Header(){this.ebml=new EBMLHeader,this.segment=new webm_Segment,this.seek_head=new webm_SeekHead(0,0),this.seek_head.info.pos=this.segment.buffer_size()+this.seek_head.buffer_size(),this.info=new webm_SegmentInformation,this.seek_head.track.pos=this.seek_head.info.pos+this.info.buffer_size(),this.track_entry=new webm_TrackEntry,this.tracks=new webm_Tracks(this.track_entry)}function SpicePlaybackConn(){SpiceConn.apply(this,arguments),this.queue=new Array,this.append_okay=!1,this.start_time=0,this.skip_until=0,this.gap_time=0}function handle_source_open(){var t=this.spiceconn;if(!t.source_buffer){if(t.source_buffer=this.addSourceBuffer(SPICE_PLAYBACK_CODEC),!t.source_buffer)return void t.log_err("Codec "+SPICE_PLAYBACK_CODEC+" not available.");t.source_buffer.spiceconn=t,t.source_buffer.mode="segments"}}function handle_source_ended(){var t=this.spiceconn;t.log_err("Audio source unexpectedly ended.")}function handle_source_closed(){var t=this.spiceconn;t.log_err("Audio source unexpectedly closed.")}function handle_append_buffer_done(){var t=this.spiceconn;if(t.queue.length>0){var e=t.queue.shift();playback_append_buffer(t,e)}else t.append_okay=!0}function handle_sourcebuffer_error(t){var e=this.spiceconn;e.log_err("source_buffer error "+t.message)}function playback_append_buffer(t,e){try{t.source_buffer.appendBuffer(e),t.append_okay=!1}catch(a){t.log_err("Error invoking appendBuffer: "+a.message)}}function SpiceCursorConn(){SpiceConn.apply(this,arguments)}function BigInteger(t,e,a){null!=t&&("number"==typeof t?this.fromNumber(t,e,a):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function nbi(){return new BigInteger(null)}function am1(t,e,a,n,s,i){for(;--i>=0;){var r=e*this[t++]+a[n]+s;s=Math.floor(r/67108864),a[n++]=67108863&r}return s}function am2(t,e,a,n,s,i){for(var r=32767&e,o=e>>15;--i>=0;){var l=32767&this[t],c=this[t++]>>15,d=o*l+c*r;l=r*l+((32767&d)<<15)+a[n]+(1073741823&s),s=(l>>>30)+(d>>>15)+o*c+(s>>>30),a[n++]=1073741823&l}return s}function am3(t,e,a,n,s,i){for(var r=16383&e,o=e>>14;--i>=0;){var l=16383&this[t],c=this[t++]>>14,d=o*l+c*r;l=r*l+((16383&d)<<14)+a[n]+s,s=(l>>28)+(d>>14)+o*c,a[n++]=268435455&l}return s}function int2char(t){return BI_RM.charAt(t)}function intAt(t,e){var a=BI_RC[t.charCodeAt(e)];return null==a?-1:a}function bnpCopyTo(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function bnpFromInt(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+DV:this.t=0}function nbv(t){var e=nbi();return e.fromInt(t),e}function bnpFromString(t,e){var a;if(16==e)a=4;else if(8==e)a=3;else if(256==e)a=8;else if(2==e)a=1;else if(32==e)a=5;else{if(4!=e)return void this.fromRadix(t,e);a=2}this.t=0,this.s=0;for(var n=t.length,s=!1,i=0;--n>=0;){var r=8==a?255&t[n]:intAt(t,n);0>r?"-"==t.charAt(n)&&(s=!0):(s=!1,0==i?this[this.t++]=r:i+a>this.DB?(this[this.t-1]|=(r&(1<<this.DB-i)-1)<<i,this[this.t++]=r>>this.DB-i):this[this.t-1]|=r<<i,i+=a,i>=this.DB&&(i-=this.DB))}8==a&&0!=(128&t[0])&&(this.s=-1,i>0&&(this[this.t-1]|=(1<<this.DB-i)-1<<i)),this.clamp(),s&&BigInteger.ZERO.subTo(this,this)}function bnpClamp(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function bnToString(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var a,n=(1<<e)-1,s=!1,i="",r=this.t,o=this.DB-r*this.DB%e;if(r-->0)for(o<this.DB&&(a=this[r]>>o)>0&&(s=!0,i=int2char(a));r>=0;)e>o?(a=(this[r]&(1<<o)-1)<<e-o,a|=this[--r]>>(o+=this.DB-e)):(a=this[r]>>(o-=e)&n,0>=o&&(o+=this.DB,--r)),a>0&&(s=!0),s&&(i+=int2char(a));return s?i:"0"}function bnNegate(){var t=nbi();return BigInteger.ZERO.subTo(this,t),t}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(t){var e=this.s-t.s;if(0!=e)return e;var a=this.t;if(e=a-t.t,0!=e)return e;for(;--a>=0;)if(0!=(e=this[a]-t[a]))return e;return 0}function nbits(t){var e,a=1;return 0!=(e=t>>>16)&&(t=e,a+=16),0!=(e=t>>8)&&(t=e,a+=8),0!=(e=t>>4)&&(t=e,a+=4),0!=(e=t>>2)&&(t=e,a+=2),0!=(e=t>>1)&&(t=e,a+=1),a}function bnBitLength(){return this.t<=0?0:this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(t,e){var a;for(a=this.t-1;a>=0;--a)e[a+t]=this[a];for(a=t-1;a>=0;--a)e[a]=0;e.t=this.t+t,e.s=this.s}function bnpDRShiftTo(t,e){for(var a=t;a<this.t;++a)e[a-t]=this[a];e.t=Math.max(this.t-t,0),e.s=this.s}function bnpLShiftTo(t,e){var a,n=t%this.DB,s=this.DB-n,i=(1<<s)-1,r=Math.floor(t/this.DB),o=this.s<<n&this.DM;for(a=this.t-1;a>=0;--a)e[a+r+1]=this[a]>>s|o,o=(this[a]&i)<<n;for(a=r-1;a>=0;--a)e[a]=0;e[r]=o,e.t=this.t+r+1,e.s=this.s,e.clamp()}function bnpRShiftTo(t,e){e.s=this.s;var a=Math.floor(t/this.DB);if(a>=this.t)return void(e.t=0);var n=t%this.DB,s=this.DB-n,i=(1<<n)-1;e[0]=this[a]>>n;for(var r=a+1;r<this.t;++r)e[r-a-1]|=(this[r]&i)<<s,e[r-a]=this[r]>>n;n>0&&(e[this.t-a-1]|=(this.s&i)<<s),e.t=this.t-a,e.clamp()}function bnpSubTo(t,e){for(var a=0,n=0,s=Math.min(t.t,this.t);s>a;)n+=this[a]-t[a],e[a++]=n&this.DM,n>>=this.DB;if(t.t<this.t){for(n-=t.s;a<this.t;)n+=this[a],e[a++]=n&this.DM,n>>=this.DB;n+=this.s}else{for(n+=this.s;a<t.t;)n-=t[a],e[a++]=n&this.DM,n>>=this.DB;n-=t.s}e.s=0>n?-1:0,-1>n?e[a++]=this.DV+n:n>0&&(e[a++]=n),e.t=a,e.clamp()}function bnpMultiplyTo(t,e){var a=this.abs(),n=t.abs(),s=a.t;for(e.t=s+n.t;--s>=0;)e[s]=0;for(s=0;s<n.t;++s)e[s+a.t]=a.am(0,n[s],e,s,0,a.t);e.s=0,e.clamp(),this.s!=t.s&&BigInteger.ZERO.subTo(e,e)}function bnpSquareTo(t){for(var e=this.abs(),a=t.t=2*e.t;--a>=0;)t[a]=0;for(a=0;a<e.t-1;++a){var n=e.am(a,e[a],t,2*a,0,1);(t[a+e.t]+=e.am(a+1,2*e[a],t,2*a+1,n,e.t-a-1))>=e.DV&&(t[a+e.t]-=e.DV,t[a+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(a,e[a],t,2*a,0,1)),t.s=0,t.clamp()}function bnpDivRemTo(t,e,a){var n=t.abs();if(!(n.t<=0)){var s=this.abs();if(s.t<n.t)return null!=e&&e.fromInt(0),void(null!=a&&this.copyTo(a));null==a&&(a=nbi());var i=nbi(),r=this.s,o=t.s,l=this.DB-nbits(n[n.t-1]);l>0?(n.lShiftTo(l,i),s.lShiftTo(l,a)):(n.copyTo(i),s.copyTo(a));var c=i.t,d=i[c-1];if(0!=d){var u=d*(1<<this.F1)+(c>1?i[c-2]>>this.F2:0),p=this.FV/u,h=(1<<this.F1)/u,f=1<<this.F2,m=a.t,_=m-c,b=null==e?nbi():e;for(i.dlShiftTo(_,b),a.compareTo(b)>=0&&(a[a.t++]=1,a.subTo(b,a)),BigInteger.ONE.dlShiftTo(c,b),b.subTo(i,i);i.t<c;)i[i.t++]=0;for(;--_>=0;){var v=a[--m]==d?this.DM:Math.floor(a[m]*p+(a[m-1]+f)*h);if((a[m]+=i.am(0,v,a,_,0,c))<v)for(i.dlShiftTo(_,b),a.subTo(b,a);a[m]<--v;)a.subTo(b,a)}null!=e&&(a.drShiftTo(c,e),r!=o&&BigInteger.ZERO.subTo(e,e)),a.t=c,a.clamp(),l>0&&a.rShiftTo(l,a),0>r&&BigInteger.ZERO.subTo(a,a)}}}function bnMod(t){var e=nbi();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(BigInteger.ZERO)>0&&t.subTo(e,e),e}function Classic(t){this.m=t}function cConvert(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function cRevert(t){return t}function cReduce(t){t.divRemTo(this.m,null,t)}function cMulTo(t,e,a){t.multiplyTo(e,a),this.reduce(a)}function cSqrTo(t,e){t.squareTo(e),this.reduce(e)}function bnpInvDigit(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function Montgomery(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function montConvert(t){var e=nbi();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(BigInteger.ZERO)>0&&this.m.subTo(e,e),e}function montRevert(t){var e=nbi();return t.copyTo(e),this.reduce(e),e}function montReduce(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var a=32767&t[e],n=a*this.mpl+((a*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(a=e+this.m.t,t[a]+=this.m.am(0,n,t,e,0,this.m.t);t[a]>=t.DV;)t[a]-=t.DV,t[++a]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function montSqrTo(t,e){t.squareTo(e),this.reduce(e)}function montMulTo(t,e,a){t.multiplyTo(e,a),this.reduce(a)}function bnpIsEven(){return 0==(this.t>0?1&this[0]:this.s)}function bnpExp(t,e){if(t>4294967295||1>t)return BigInteger.ONE;var a=nbi(),n=nbi(),s=e.convert(this),i=nbits(t)-1;for(s.copyTo(a);--i>=0;)if(e.sqrTo(a,n),(t&1<<i)>0)e.mulTo(n,s,a);else{var r=a;a=n,n=r}return e.revert(a)}function bnModPowInt(t,e){var a;return a=256>t||e.isEven()?new Classic(e):new Montgomery(e),this.exp(t,a)}function parseBigInt(t,e){return new BigInteger(t,e)}function linebrk(t,e){for(var a="",n=0;n+e<t.length;)a+=t.substring(n,n+e)+"\n",n+=e;return a+t.substring(n,t.length)}function byte2Hex(t){return 16>t?"0"+t.toString(16):t.toString(16)}function pkcs1pad2(t,e){if(e<t.length+11)return alert("Message too long for RSA"),null;for(var a=new Array,n=t.length-1;n>=0&&e>0;){var s=t.charCodeAt(n--);128>s?a[--e]=s:s>127&&2048>s?(a[--e]=63&s|128,a[--e]=s>>6|192):(a[--e]=63&s|128,a[--e]=s>>6&63|128,a[--e]=s>>12|224)}a[--e]=0;for(var i=new SecureRandom,r=new Array;e>2;){for(r[0]=0;0==r[0];)i.nextBytes(r);a[--e]=r[0]}return a[--e]=2,a[--e]=0,new BigInteger(a)}function RSAKey(){this.n=null,this.e=0,this.d=null,this.p=null,this.q=null,this.dmp1=null,this.dmq1=null,this.coeff=null}function RSASetPublic(t,e){null!=t&&null!=e&&t.length>0&&e.length>0?(this.n=parseBigInt(t,16),this.e=parseInt(e,16)):alert("Invalid RSA public key")}function RSADoPublic(t){return t.modPowInt(this.e,this.n)}function RSAEncrypt(t){var e=pkcs1pad2(t,this.n.bitLength()+7>>3);if(null==e)return null;var a=this.doPublic(e);if(null==a)return null;var n=a.toString(16);return 0==(1&n.length)?n:"0"+n}function Arcfour(){this.i=0,this.j=0,this.S=new Array}function ARC4init(t){var e,a,n;for(e=0;256>e;++e)this.S[e]=e;for(a=0,e=0;256>e;++e)a=a+this.S[e]+t[e%t.length]&255,n=this.S[e],this.S[e]=this.S[a],this.S[a]=n;this.i=0,this.j=0}function ARC4next(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]}function prng_newstate(){return new Arcfour}function rng_seed_int(t){rng_pool[rng_pptr++]^=255&t,rng_pool[rng_pptr++]^=t>>8&255,rng_pool[rng_pptr++]^=t>>16&255,rng_pool[rng_pptr++]^=t>>24&255,rng_pptr>=rng_psize&&(rng_pptr-=rng_psize)}function rng_seed_time(){rng_seed_int((new Date).getTime())}function rng_get_byte(){if(null==rng_state){for(rng_seed_time(),rng_state=prng_newstate(),rng_state.init(rng_pool),rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}function rng_get_bytes(t){var e;for(e=0;e<t.length;++e)t[e]=rng_get_byte()}function SecureRandom(){}function hex_sha1(t){return rstr2hex(rstr_sha1(str2rstr_utf8(t)))}function b64_sha1(t){return rstr2b64(rstr_sha1(str2rstr_utf8(t)))}function any_sha1(t,e){return rstr2any(rstr_sha1(str2rstr_utf8(t)),e)}function hex_hmac_sha1(t,e){return rstr2hex(rstr_hmac_sha1(str2rstr_utf8(t),str2rstr_utf8(e)))}function b64_hmac_sha1(t,e){return rstr2b64(rstr_hmac_sha1(str2rstr_utf8(t),str2rstr_utf8(e)))}function any_hmac_sha1(t,e,a){return rstr2any(rstr_hmac_sha1(str2rstr_utf8(t),str2rstr_utf8(e)),a)}function sha1_vm_test(){return"a9993e364706816aba3e25717850c26c9cd0d89d"==hex_sha1("abc").toLowerCase()}function rstr_sha1(t){return binb2rstr(binb_sha1(rstr2binb(t),8*t.length))}function rstr_hmac_sha1(t,e){var a=rstr2binb(t);a.length>16&&(a=binb_sha1(a,8*t.length));for(var n=Array(16),s=Array(16),i=0;16>i;i++)n[i]=909522486^a[i],s[i]=1549556828^a[i];var r=binb_sha1(n.concat(rstr2binb(e)),512+8*e.length);return binb2rstr(binb_sha1(s.concat(r),672))}function rstr2hex(t){try{}catch(e){hexcase=0}for(var a,n=hexcase?"0123456789ABCDEF":"0123456789abcdef",s="",i=0;i<t.length;i++)a=t.charCodeAt(i),s+=n.charAt(a>>>4&15)+n.charAt(15&a);return s}function rstr2b64(t){try{}catch(e){b64pad=""}for(var a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",s=t.length,i=0;s>i;i+=3)for(var r=t.charCodeAt(i)<<16|(s>i+1?t.charCodeAt(i+1)<<8:0)|(s>i+2?t.charCodeAt(i+2):0),o=0;4>o;o++)n+=8*i+6*o>8*t.length?b64pad:a.charAt(r>>>6*(3-o)&63);return n}function rstr2any(t,e){var a,n,s,i,r=e.length,o=Array(),l=Array(Math.ceil(t.length/2));for(a=0;a<l.length;a++)l[a]=t.charCodeAt(2*a)<<8|t.charCodeAt(2*a+1);for(;l.length>0;){for(i=Array(),s=0,a=0;a<l.length;a++)s=(s<<16)+l[a],n=Math.floor(s/r),s-=n*r,(i.length>0||n>0)&&(i[i.length]=n);o[o.length]=s,l=i}var c="";for(a=o.length-1;a>=0;a--)c+=e.charAt(o[a]);var d=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2)));for(a=c.length;d>a;a++)c=e[0]+c;return c}function str2rstr_utf8(t){for(var e,a,n="",s=-1;++s<t.length;)e=t.charCodeAt(s),a=s+1<t.length?t.charCodeAt(s+1):0,e>=55296&&56319>=e&&a>=56320&&57343>=a&&(e=65536+((1023&e)<<10)+(1023&a),s++),127>=e?n+=String.fromCharCode(e):2047>=e?n+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?n+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(n+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return n}function str2rstr_utf16le(t){for(var e="",a=0;a<t.length;a++)e+=String.fromCharCode(255&t.charCodeAt(a),t.charCodeAt(a)>>>8&255);return e}function str2rstr_utf16be(t){for(var e="",a=0;a<t.length;a++)e+=String.fromCharCode(t.charCodeAt(a)>>>8&255,255&t.charCodeAt(a));return e}function rstr2binb(t){for(var e=Array(t.length>>2),a=0;a<e.length;a++)e[a]=0;for(var a=0;a<8*t.length;a+=8)e[a>>5]|=(255&t.charCodeAt(a/8))<<24-a%32;return e}function binb2rstr(t){for(var e="",a=0;a<32*t.length;a+=8)e+=String.fromCharCode(t[a>>5]>>>24-a%32&255);return e}function binb_sha1(t,e){t[e>>5]|=128<<24-e%32,t[(e+64>>9<<4)+15]=e;for(var a=Array(80),n=1732584193,s=-271733879,i=-1732584194,r=271733878,o=-1009589776,l=0;l<t.length;l+=16){for(var c=n,d=s,u=i,p=r,h=o,f=0;80>f;f++){a[f]=16>f?t[l+f]:bit_rol(a[f-3]^a[f-8]^a[f-14]^a[f-16],1);var m=safe_add(safe_add(bit_rol(n,5),sha1_ft(f,s,i,r)),safe_add(safe_add(o,a[f]),sha1_kt(f)));o=r,r=i,i=bit_rol(s,30),s=n,n=m}n=safe_add(n,c),s=safe_add(s,d),i=safe_add(i,u),r=safe_add(r,p),o=safe_add(o,h)}return Array(n,s,i,r,o)}function sha1_ft(t,e,a,n){return 20>t?e&a|~e&n:40>t?e^a^n:60>t?e&a|e&n|a&n:e^a^n}function sha1_kt(t){return 20>t?1518500249:40>t?1859775393:60>t?-1894007588:-899497514}function safe_add(t,e){var a=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(a>>16);return n<<16|65535&a}function bit_rol(t,e){return t<<e|t>>>32-e}function MGF1(t,e){var a,n,s;for(a=0,s=0;s<t.length;a++){var i=new String;for(n=0;n<e.length;n++)i+=String.fromCharCode(e[n]);i+=String.fromCharCode(a>>24&255),i+=String.fromCharCode(a>>16&255),i+=String.fromCharCode(a>>8&255),i+=String.fromCharCode(255&a);var r=rstr_sha1(i);for(n=0;n<r.length&&s<t.length;n++,s++)t[s]=r.charCodeAt(n)}}function RSA_padding_add_PKCS1_OAEP(t,e,a){var n=new Array(SHA_DIGEST_LENGTH),s=new SecureRandom;s.nextBytes(n);var i,r=t-1-n.length,o=new Array(r),l=r-e.length-1;if(void 0===a&&(a=""),SHA_DIGEST_LENGTH>l)return console.log("Error - data too large for key size."),null;for(i=0;l>i;i++)o[i]=0;var c=rstr_sha1(a);for(i=0;i<c.length;i++)o[i]=c.charCodeAt(i);for(o[l]=1,i=0;i<e.length;i++)o[i+l+1]=e.charCodeAt(i);var d=new Array(r);if(MGF1(d,n)<0)return null;for(i=0;i<d.length;i++)o[i]^=d[i];var u=Array(SHA_DIGEST_LENGTH);if(MGF1(u,o)<0)return null;for(i=0;i<u.length;i++)n[i]^=u[i];var p=new String;for(p+=String.fromCharCode(0),i=0;i<n.length;i++)p+=String.fromCharCode(n[i]);for(i=0;i<o.length;i++)p+=String.fromCharCode(o[i]);return p}function asn_get_length(t,e){var a=t[e++];if(a>128){if(129!=a)return console.log("Error:  we lazily don't support keys bigger than 255 bytes.  It'd be easy to fix."),null;a=t[e++]}return[e,a]}function find_sequence(t,e){var a;return e=e||0,48!=t[e++]?(console.log("Error:  public key should start with a sequence flag."),null):(a=asn_get_length(t,e),a?a:null)}function create_rsa_from_mb(t,e){var a,n,s,i,r,o=new Uint8Array(t);if(n=find_sequence(o,e),!n)return null;if(e=n[0],n=find_sequence(o,e),!n)return null;if(e=n[0]+n[1],3!=o[e++])return console.log("Error: expecting bit string next."),null;if(a=asn_get_length(o,e),!a)return null;if(e=a[0],0!=o[e]&&48!=o[e+1])return console.log("Error: unexpected values in bit string."),null;if(n=find_sequence(o,e+1),!n)return null;if(e=n[0],2!=o[e++])return console.log("Error: expecting integer n next."),null;if(a=asn_get_length(o,e),!a)return null;for(e=a[0],s=new Array(a[1]),i=0;i<a[1];i++)s[i]=o[e+i];if(r=new RSAKey,r.n=new BigInteger(s),e+=a[1],2!=o[e++])return console.log("Error: expecting integer e next."),null;if(a=asn_get_length(o,e),!a)return null;for(e=a[0],r.e=o[e++],i=1;i<a[1];i++)r.e<<=8,r.e|=o[e++];return r}function rsa_encrypt(t,e){var a,n=[],s=RSA_padding_add_PKCS1_OAEP(t.n.bitLength()+7>>3,e);if(!s)return null;var i=new Array(s.length);for(a=0;a<s.length;a++)i[a]=s.charCodeAt(a);var r=new BigInteger(i),o=t.doPublic(r),l=o.toString(16);for(0!=(1&l.length)&&(l="0"+l),a=0;a<l.length;a+=2)n[a/2]=parseInt(l.substring(a,a+2),16);return n}function resize_helper(t){var e=document.getElementById(t.screen_id).clientWidth,a=document.getElementById(t.screen_id).clientHeight,n=document.getElementById(t.message_id),s=window.innerHeight-n.offsetHeight-n.offsetTop-20;a+=s,a%8>0&&(a+=8-a%8),e%8>0&&(e+=8-e%8),t.resize_window(0,e,a,32,0,0),t.spice_resize_timer=void 0}function handle_resize(){var t=window.spice_connection;t&&t.spice_resize_timer&&(window.clearTimeout(t.spice_resize_timer),t.spice_resize_timer=void 0),t.spice_resize_timer=window.setTimeout(resize_helper,200,t)}function SpiceFileXferTask(t,e){this.id=t,this.file=e}function handle_file_dragover(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}function handle_file_drop(t){var e=window.spice_connection,a=t.dataTransfer.files;t.stopPropagation(),t.preventDefault();for(var n=a.length-1;n>=0;n--)a[n].type,e.file_xfer_start(a[n])}function SpiceMainConn(){if("undefined"==typeof WebSocket)throw new Error("WebSocket unavailable.  You need to use a different browser.");SpiceConn.apply(this,arguments),this.agent_msg_queue=[],this.file_xfer_tasks={},this.file_xfer_task_id=0,this.file_xfer_read_queue=[]}!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function a(t){var e=t.length,a=J.type(t);return"function"===a||J.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===a||0===e||"number"==typeof e&&e>0&&e-1 in t}function n(t,e,a){if(J.isFunction(e))return J.grep(t,function(t,n){return!!e.call(t,n,t)!==a});if(e.nodeType)return J.grep(t,function(t){return t===e!==a});if("string"==typeof e){if(oe.test(e))return J.filter(e,t,a);e=J.filter(e,t)}return J.grep(t,function(t){return K.call(e,t)>=0!==a})}function s(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function i(t){var e=fe[t]={};return J.each(t.match(he)||[],function(t,a){e[a]=!0}),e}function r(){Q.removeEventListener("DOMContentLoaded",r,!1),t.removeEventListener("load",r,!1),J.ready()}function o(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=J.expando+o.uid++}function l(t,e,a){var n;if(void 0===a&&1===t.nodeType)if(n="data-"+e.replace(ye,"-$1").toLowerCase(),a=t.getAttribute(n),"string"==typeof a){try{a="true"===a?!0:"false"===a?!1:"null"===a?null:+a+""===a?+a:ge.test(a)?J.parseJSON(a):a}catch(s){}ve.set(t,e,a)}else a=void 0;return a}function c(){return!0}function d(){return!1}function u(){try{return Q.activeElement}catch(t){}}function p(t,e){return J.nodeName(t,"table")&&J.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function h(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function f(t){var e=Le.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function m(t,e){for(var a=0,n=t.length;n>a;a++)be.set(t[a],"globalEval",!e||be.get(e[a],"globalEval"))}function _(t,e){var a,n,s,i,r,o,l,c;if(1===e.nodeType){if(be.hasData(t)&&(i=be.access(t),r=be.set(e,i),c=i.events)){delete r.handle,r.events={};for(s in c)for(a=0,n=c[s].length;n>a;a++)J.event.add(e,s,c[s][a])}ve.hasData(t)&&(o=ve.access(t),l=J.extend({},o),ve.set(e,l))}}function b(t,e){var a=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&J.nodeName(t,e)?J.merge([t],a):a}function v(t,e){var a=e.nodeName.toLowerCase();"input"===a&&Se.test(t.type)?e.checked=t.checked:("input"===a||"textarea"===a)&&(e.defaultValue=t.defaultValue)}function g(e,a){var n,s=J(a.createElement(e)).appendTo(a.body),i=t.getDefaultComputedStyle&&(n=t.getDefaultComputedStyle(s[0]))?n.display:J.css(s[0],"display");return s.detach(),i}function y(t){var e=Q,a=qe[t];return a||(a=g(t,e),"none"!==a&&a||(Fe=(Fe||J("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Fe[0].contentDocument,e.write(),e.close(),a=g(t,e),Fe.detach()),qe[t]=a),a}function w(t,e,a){var n,s,i,r,o=t.style;return a=a||Ge(t),a&&(r=a.getPropertyValue(e)||a[e]),a&&(""!==r||J.contains(t.ownerDocument,t)||(r=J.style(t,e)),Ve.test(r)&&ze.test(e)&&(n=o.width,s=o.minWidth,i=o.maxWidth,o.minWidth=o.maxWidth=o.width=r,r=a.width,o.width=n,o.minWidth=s,o.maxWidth=i)),void 0!==r?r+"":r}function T(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function E(t,e){if(e in t)return e;for(var a=e[0].toUpperCase()+e.slice(1),n=e,s=We.length;s--;)if(e=We[s]+a,e in t)return e;return n}function S(t,e,a){var n=He.exec(e);return n?Math.max(0,n[1]-(a||0))+(n[2]||"px"):e}function I(t,e,a,n,s){for(var i=a===(n?"border":"content")?4:"width"===e?1:0,r=0;4>i;i+=2)"margin"===a&&(r+=J.css(t,a+Te[i],!0,s)),n?("content"===a&&(r-=J.css(t,"padding"+Te[i],!0,s)),"margin"!==a&&(r-=J.css(t,"border"+Te[i]+"Width",!0,s))):(r+=J.css(t,"padding"+Te[i],!0,s),"padding"!==a&&(r+=J.css(t,"border"+Te[i]+"Width",!0,s)));return r}function x(t,e,a){var n=!0,s="width"===e?t.offsetWidth:t.offsetHeight,i=Ge(t),r="border-box"===J.css(t,"boxSizing",!1,i);if(0>=s||null==s){if(s=w(t,e,i),(0>s||null==s)&&(s=t.style[e]),Ve.test(s))return s;n=r&&(X.boxSizingReliable()||s===t.style[e]),s=parseFloat(s)||0}return s+I(t,e,a||(r?"border":"content"),n,i)+"px"}function A(t,e){for(var a,n,s,i=[],r=0,o=t.length;o>r;r++)n=t[r],n.style&&(i[r]=be.get(n,"olddisplay"),a=n.style.display,e?(i[r]||"none"!==a||(n.style.display=""),""===n.style.display&&Ee(n)&&(i[r]=be.access(n,"olddisplay",y(n.nodeName)))):(s=Ee(n),"none"===a&&s||be.set(n,"olddisplay",s?a:J.css(n,"display"))));for(r=0;o>r;r++)n=t[r],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?i[r]||"":"none"));return t}function M(t,e,a,n,s){return new M.prototype.init(t,e,a,n,s)}function k(){return setTimeout(function(){Xe=void 0}),Xe=J.now()}function D(t,e){var a,n=0,s={height:t};for(e=e?1:0;4>n;n+=2-e)a=Te[n],s["margin"+a]=s["padding"+a]=t;return e&&(s.opacity=s.width=t),s}function C(t,e,a){for(var n,s=(aa[e]||[]).concat(aa["*"]),i=0,r=s.length;r>i;i++)if(n=s[i].call(a,e,t))return n}function P(t,e,a){var n,s,i,r,o,l,c,d,u=this,p={},h=t.style,f=t.nodeType&&Ee(t),m=be.get(t,"fxshow");a.queue||(o=J._queueHooks(t,"fx"),null==o.unqueued&&(o.unqueued=0,l=o.empty.fire,o.empty.fire=function(){o.unqueued||l()}),o.unqueued++,u.always(function(){u.always(function(){o.unqueued--,J.queue(t,"fx").length||o.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(a.overflow=[h.overflow,h.overflowX,h.overflowY],c=J.css(t,"display"),d="none"===c?be.get(t,"olddisplay")||y(t.nodeName):c,"inline"===d&&"none"===J.css(t,"float")&&(h.display="inline-block")),a.overflow&&(h.overflow="hidden",u.always(function(){h.overflow=a.overflow[0],h.overflowX=a.overflow[1],h.overflowY=a.overflow[2]}));for(n in e)if(s=e[n],Ze.exec(s)){if(delete e[n],i=i||"toggle"===s,s===(f?"hide":"show")){if("show"!==s||!m||void 0===m[n])continue;f=!0}p[n]=m&&m[n]||J.style(t,n)}else c=void 0;if(J.isEmptyObject(p))"inline"===("none"===c?y(t.nodeName):c)&&(h.display=c);else{m?"hidden"in m&&(f=m.hidden):m=be.access(t,"fxshow",{}),i&&(m.hidden=!f),f?J(t).show():u.done(function(){J(t).hide()}),u.done(function(){var e;be.remove(t,"fxshow");for(e in p)J.style(t,e,p[e])});for(n in p)r=C(f?m[n]:0,n,u),n in m||(m[n]=r.start,f&&(r.end=r.start,r.start="width"===n||"height"===n?1:0))}}function $(t,e){var a,n,s,i,r;for(a in t)if(n=J.camelCase(a),s=e[n],i=t[a],J.isArray(i)&&(s=i[1],i=t[a]=i[0]),a!==n&&(t[n]=i,delete t[a]),r=J.cssHooks[n],r&&"expand"in r){i=r.expand(i),delete t[n];for(a in i)a in t||(t[a]=i[a],e[a]=s)}else e[n]=s}function O(t,e,a){var n,s,i=0,r=ea.length,o=J.Deferred().always(function(){delete l.elem}),l=function(){if(s)return!1;for(var e=Xe||k(),a=Math.max(0,c.startTime+c.duration-e),n=a/c.duration||0,i=1-n,r=0,l=c.tweens.length;l>r;r++)c.tweens[r].run(i);return o.notifyWith(t,[c,i,a]),1>i&&l?a:(o.resolveWith(t,[c]),!1)},c=o.promise({elem:t,props:J.extend({},e),opts:J.extend(!0,{specialEasing:{}},a),originalProperties:e,originalOptions:a,startTime:Xe||k(),duration:a.duration,tweens:[],createTween:function(e,a){var n=J.Tween(t,c.opts,e,a,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var a=0,n=e?c.tweens.length:0;if(s)return this;for(s=!0;n>a;a++)c.tweens[a].run(1);return e?o.resolveWith(t,[c,e]):o.rejectWith(t,[c,e]),this}}),d=c.props;for($(d,c.opts.specialEasing);r>i;i++)if(n=ea[i].call(c,t,d,c.opts))return n;return J.map(d,C,c),J.isFunction(c.opts.start)&&c.opts.start.call(t,c),J.fx.timer(J.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function R(t){return function(e,a){"string"!=typeof e&&(a=e,e="*");var n,s=0,i=e.toLowerCase().match(he)||[];if(J.isFunction(a))for(;n=i[s++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(a)):(t[n]=t[n]||[]).push(a)}}function L(t,e,a,n){function s(o){var l;return i[o]=!0,J.each(t[o]||[],function(t,o){var c=o(e,a,n);return"string"!=typeof c||r||i[c]?r?!(l=c):void 0:(e.dataTypes.unshift(c),s(c),!1)}),l}var i={},r=t===ga;return s(e.dataTypes[0])||!i["*"]&&s("*")}function N(t,e){var a,n,s=J.ajaxSettings.flatOptions||{};for(a in e)void 0!==e[a]&&((s[a]?t:n||(n={}))[a]=e[a]);return n&&J.extend(!0,t,n),t}function U(t,e,a){for(var n,s,i,r,o=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));
if(n)for(s in o)if(o[s]&&o[s].test(n)){l.unshift(s);break}if(l[0]in a)i=l[0];else{for(s in a){if(!l[0]||t.converters[s+" "+l[0]]){i=s;break}r||(r=s)}i=i||r}return i?(i!==l[0]&&l.unshift(i),a[i]):void 0}function F(t,e,a,n){var s,i,r,o,l,c={},d=t.dataTypes.slice();if(d[1])for(r in t.converters)c[r.toLowerCase()]=t.converters[r];for(i=d.shift();i;)if(t.responseFields[i]&&(a[t.responseFields[i]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=i,i=d.shift())if("*"===i)i=l;else if("*"!==l&&l!==i){if(r=c[l+" "+i]||c["* "+i],!r)for(s in c)if(o=s.split(" "),o[1]===i&&(r=c[l+" "+o[0]]||c["* "+o[0]])){r===!0?r=c[s]:c[s]!==!0&&(i=o[0],d.unshift(o[1]));break}if(r!==!0)if(r&&t["throws"])e=r(e);else try{e=r(e)}catch(u){return{state:"parsererror",error:r?u:"No conversion from "+l+" to "+i}}}return{state:"success",data:e}}function q(t,e,a,n){var s;if(J.isArray(e))J.each(e,function(e,s){a||Sa.test(t)?n(t,s):q(t+"["+("object"==typeof s?e:"")+"]",s,a,n)});else if(a||"object"!==J.type(e))n(t,e);else for(s in e)q(t+"["+s+"]",e[s],a,n)}function z(t){return J.isWindow(t)?t:9===t.nodeType&&t.defaultView}var V=[],G=V.slice,B=V.concat,H=V.push,K=V.indexOf,j={},Y=j.toString,W=j.hasOwnProperty,X={},Q=t.document,Z="2.1.3",J=function(t,e){return new J.fn.init(t,e)},te=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ee=/^-ms-/,ae=/-([\da-z])/gi,ne=function(t,e){return e.toUpperCase()};J.fn=J.prototype={jquery:Z,constructor:J,selector:"",length:0,toArray:function(){return G.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:G.call(this)},pushStack:function(t){var e=J.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return J.each(this,t,e)},map:function(t){return this.pushStack(J.map(this,function(e,a){return t.call(e,a,e)}))},slice:function(){return this.pushStack(G.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,a=+t+(0>t?e:0);return this.pushStack(a>=0&&e>a?[this[a]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:H,sort:V.sort,splice:V.splice},J.extend=J.fn.extend=function(){var t,e,a,n,s,i,r=arguments[0]||{},o=1,l=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[o]||{},o++),"object"==typeof r||J.isFunction(r)||(r={}),o===l&&(r=this,o--);l>o;o++)if(null!=(t=arguments[o]))for(e in t)a=r[e],n=t[e],r!==n&&(c&&n&&(J.isPlainObject(n)||(s=J.isArray(n)))?(s?(s=!1,i=a&&J.isArray(a)?a:[]):i=a&&J.isPlainObject(a)?a:{},r[e]=J.extend(c,i,n)):void 0!==n&&(r[e]=n));return r},J.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===J.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!J.isArray(t)&&t-parseFloat(t)+1>=0},isPlainObject:function(t){return"object"!==J.type(t)||t.nodeType||J.isWindow(t)?!1:t.constructor&&!W.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?j[Y.call(t)]||"object":typeof t},globalEval:function(t){var e,a=eval;t=J.trim(t),t&&(1===t.indexOf("use strict")?(e=Q.createElement("script"),e.text=t,Q.head.appendChild(e).parentNode.removeChild(e)):a(t))},camelCase:function(t){return t.replace(ee,"ms-").replace(ae,ne)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var s,i=0,r=t.length,o=a(t);if(n){if(o)for(;r>i&&(s=e.apply(t[i],n),s!==!1);i++);else for(i in t)if(s=e.apply(t[i],n),s===!1)break}else if(o)for(;r>i&&(s=e.call(t[i],i,t[i]),s!==!1);i++);else for(i in t)if(s=e.call(t[i],i,t[i]),s===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(te,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(a(Object(t))?J.merge(n,"string"==typeof t?[t]:t):H.call(n,t)),n},inArray:function(t,e,a){return null==e?-1:K.call(e,t,a)},merge:function(t,e){for(var a=+e.length,n=0,s=t.length;a>n;n++)t[s++]=e[n];return t.length=s,t},grep:function(t,e,a){for(var n,s=[],i=0,r=t.length,o=!a;r>i;i++)n=!e(t[i],i),n!==o&&s.push(t[i]);return s},map:function(t,e,n){var s,i=0,r=t.length,o=a(t),l=[];if(o)for(;r>i;i++)s=e(t[i],i,n),null!=s&&l.push(s);else for(i in t)s=e(t[i],i,n),null!=s&&l.push(s);return B.apply([],l)},guid:1,proxy:function(t,e){var a,n,s;return"string"==typeof e&&(a=t[e],e=t,t=a),J.isFunction(t)?(n=G.call(arguments,2),s=function(){return t.apply(e||this,n.concat(G.call(arguments)))},s.guid=t.guid=t.guid||J.guid++,s):void 0},now:Date.now,support:X}),J.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){j["[object "+e+"]"]=e.toLowerCase()});var se=function(t){function e(t,e,a,n){var s,i,r,o,l,c,u,h,f,m;if((e?e.ownerDocument||e:q)!==P&&C(e),e=e||P,a=a||[],o=e.nodeType,"string"!=typeof t||!t||1!==o&&9!==o&&11!==o)return a;if(!n&&O){if(11!==o&&(s=ve.exec(t)))if(r=s[1]){if(9===o){if(i=e.getElementById(r),!i||!i.parentNode)return a;if(i.id===r)return a.push(i),a}else if(e.ownerDocument&&(i=e.ownerDocument.getElementById(r))&&U(e,i)&&i.id===r)return a.push(i),a}else{if(s[2])return Z.apply(a,e.getElementsByTagName(t)),a;if((r=s[3])&&w.getElementsByClassName)return Z.apply(a,e.getElementsByClassName(r)),a}if(w.qsa&&(!R||!R.test(t))){if(h=u=F,f=e,m=1!==o&&t,1===o&&"object"!==e.nodeName.toLowerCase()){for(c=I(t),(u=e.getAttribute("id"))?h=u.replace(ye,"\\$&"):e.setAttribute("id",h),h="[id='"+h+"'] ",l=c.length;l--;)c[l]=h+p(c[l]);f=ge.test(t)&&d(e.parentNode)||e,m=c.join(",")}if(m)try{return Z.apply(a,f.querySelectorAll(m)),a}catch(_){}finally{u||e.removeAttribute("id")}}}return A(t.replace(le,"$1"),e,a,n)}function a(){function t(a,n){return e.push(a+" ")>T.cacheLength&&delete t[e.shift()],t[a+" "]=n}var e=[];return t}function n(t){return t[F]=!0,t}function s(t){var e=P.createElement("div");try{return!!t(e)}catch(a){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function i(t,e){for(var a=t.split("|"),n=t.length;n--;)T.attrHandle[a[n]]=e}function r(t,e){var a=e&&t,n=a&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||j)-(~t.sourceIndex||j);if(n)return n;if(a)for(;a=a.nextSibling;)if(a===e)return-1;return t?1:-1}function o(t){return function(e){var a=e.nodeName.toLowerCase();return"input"===a&&e.type===t}}function l(t){return function(e){var a=e.nodeName.toLowerCase();return("input"===a||"button"===a)&&e.type===t}}function c(t){return n(function(e){return e=+e,n(function(a,n){for(var s,i=t([],a.length,e),r=i.length;r--;)a[s=i[r]]&&(a[s]=!(n[s]=a[s]))})})}function d(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function u(){}function p(t){for(var e=0,a=t.length,n="";a>e;e++)n+=t[e].value;return n}function h(t,e,a){var n=e.dir,s=a&&"parentNode"===n,i=V++;return e.first?function(e,a,i){for(;e=e[n];)if(1===e.nodeType||s)return t(e,a,i)}:function(e,a,r){var o,l,c=[z,i];if(r){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,a,r))return!0}else for(;e=e[n];)if(1===e.nodeType||s){if(l=e[F]||(e[F]={}),(o=l[n])&&o[0]===z&&o[1]===i)return c[2]=o[2];if(l[n]=c,c[2]=t(e,a,r))return!0}}}function f(t){return t.length>1?function(e,a,n){for(var s=t.length;s--;)if(!t[s](e,a,n))return!1;return!0}:t[0]}function m(t,a,n){for(var s=0,i=a.length;i>s;s++)e(t,a[s],n);return n}function _(t,e,a,n,s){for(var i,r=[],o=0,l=t.length,c=null!=e;l>o;o++)(i=t[o])&&(!a||a(i,n,s))&&(r.push(i),c&&e.push(o));return r}function b(t,e,a,s,i,r){return s&&!s[F]&&(s=b(s)),i&&!i[F]&&(i=b(i,r)),n(function(n,r,o,l){var c,d,u,p=[],h=[],f=r.length,b=n||m(e||"*",o.nodeType?[o]:o,[]),v=!t||!n&&e?b:_(b,p,t,o,l),g=a?i||(n?t:f||s)?[]:r:v;if(a&&a(v,g,o,l),s)for(c=_(g,h),s(c,[],o,l),d=c.length;d--;)(u=c[d])&&(g[h[d]]=!(v[h[d]]=u));if(n){if(i||t){if(i){for(c=[],d=g.length;d--;)(u=g[d])&&c.push(v[d]=u);i(null,g=[],c,l)}for(d=g.length;d--;)(u=g[d])&&(c=i?te(n,u):p[d])>-1&&(n[c]=!(r[c]=u))}}else g=_(g===r?g.splice(f,g.length):g),i?i(null,r,g,l):Z.apply(r,g)})}function v(t){for(var e,a,n,s=t.length,i=T.relative[t[0].type],r=i||T.relative[" "],o=i?1:0,l=h(function(t){return t===e},r,!0),c=h(function(t){return te(e,t)>-1},r,!0),d=[function(t,a,n){var s=!i&&(n||a!==M)||((e=a).nodeType?l(t,a,n):c(t,a,n));return e=null,s}];s>o;o++)if(a=T.relative[t[o].type])d=[h(f(d),a)];else{if(a=T.filter[t[o].type].apply(null,t[o].matches),a[F]){for(n=++o;s>n&&!T.relative[t[n].type];n++);return b(o>1&&f(d),o>1&&p(t.slice(0,o-1).concat({value:" "===t[o-2].type?"*":""})).replace(le,"$1"),a,n>o&&v(t.slice(o,n)),s>n&&v(t=t.slice(n)),s>n&&p(t))}d.push(a)}return f(d)}function g(t,a){var s=a.length>0,i=t.length>0,r=function(n,r,o,l,c){var d,u,p,h=0,f="0",m=n&&[],b=[],v=M,g=n||i&&T.find.TAG("*",c),y=z+=null==v?1:Math.random()||.1,w=g.length;for(c&&(M=r!==P&&r);f!==w&&null!=(d=g[f]);f++){if(i&&d){for(u=0;p=t[u++];)if(p(d,r,o)){l.push(d);break}c&&(z=y)}s&&((d=!p&&d)&&h--,n&&m.push(d))}if(h+=f,s&&f!==h){for(u=0;p=a[u++];)p(m,b,r,o);if(n){if(h>0)for(;f--;)m[f]||b[f]||(b[f]=X.call(l));b=_(b)}Z.apply(l,b),c&&!n&&b.length>0&&h+a.length>1&&e.uniqueSort(l)}return c&&(z=y,M=v),m};return s?n(r):r}var y,w,T,E,S,I,x,A,M,k,D,C,P,$,O,R,L,N,U,F="sizzle"+1*new Date,q=t.document,z=0,V=0,G=a(),B=a(),H=a(),K=function(t,e){return t===e&&(D=!0),0},j=1<<31,Y={}.hasOwnProperty,W=[],X=W.pop,Q=W.push,Z=W.push,J=W.slice,te=function(t,e){for(var a=0,n=t.length;n>a;a++)if(t[a]===e)return a;return-1},ee="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ae="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",se=ne.replace("w","w#"),ie="\\["+ae+"*("+ne+")(?:"+ae+"*([*^$|!~]?=)"+ae+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+se+"))|)"+ae+"*\\]",re=":("+ne+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",oe=new RegExp(ae+"+","g"),le=new RegExp("^"+ae+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ae+"+$","g"),ce=new RegExp("^"+ae+"*,"+ae+"*"),de=new RegExp("^"+ae+"*([>+~]|"+ae+")"+ae+"*"),ue=new RegExp("="+ae+"*([^\\]'\"]*?)"+ae+"*\\]","g"),pe=new RegExp(re),he=new RegExp("^"+se+"$"),fe={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),TAG:new RegExp("^("+ne.replace("w","w*")+")"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+re),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ae+"*(even|odd|(([+-]|)(\\d*)n|)"+ae+"*(?:([+-]|)"+ae+"*(\\d+)|))"+ae+"*\\)|)","i"),bool:new RegExp("^(?:"+ee+")$","i"),needsContext:new RegExp("^"+ae+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ae+"*((?:-\\d)?\\d*)"+ae+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,_e=/^h\d$/i,be=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ge=/[+~]/,ye=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ae+"?|("+ae+")|.)","ig"),Te=function(t,e,a){var n="0x"+e-65536;return n!==n||a?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)},Ee=function(){C()};try{Z.apply(W=J.call(q.childNodes),q.childNodes),W[q.childNodes.length].nodeType}catch(Se){Z={apply:W.length?function(t,e){Q.apply(t,J.call(e))}:function(t,e){for(var a=t.length,n=0;t[a++]=e[n++];);t.length=a-1}}}w=e.support={},S=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},C=e.setDocument=function(t){var e,a,n=t?t.ownerDocument||t:q;return n!==P&&9===n.nodeType&&n.documentElement?(P=n,$=n.documentElement,a=n.defaultView,a&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",Ee,!1):a.attachEvent&&a.attachEvent("onunload",Ee)),O=!S(n),w.attributes=s(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=s(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=be.test(n.getElementsByClassName),w.getById=s(function(t){return $.appendChild(t).id=F,!n.getElementsByName||!n.getElementsByName(F).length}),w.getById?(T.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&O){var a=e.getElementById(t);return a&&a.parentNode?[a]:[]}},T.filter.ID=function(t){var e=t.replace(we,Te);return function(t){return t.getAttribute("id")===e}}):(delete T.find.ID,T.filter.ID=function(t){var e=t.replace(we,Te);return function(t){var a="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return a&&a.value===e}}),T.find.TAG=w.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):w.qsa?e.querySelectorAll(t):void 0}:function(t,e){var a,n=[],s=0,i=e.getElementsByTagName(t);if("*"===t){for(;a=i[s++];)1===a.nodeType&&n.push(a);return n}return i},T.find.CLASS=w.getElementsByClassName&&function(t,e){return O?e.getElementsByClassName(t):void 0},L=[],R=[],(w.qsa=be.test(n.querySelectorAll))&&(s(function(t){$.appendChild(t).innerHTML="<a id='"+F+"'></a><select id='"+F+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&R.push("[*^$]="+ae+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||R.push("\\["+ae+"*(?:value|"+ee+")"),t.querySelectorAll("[id~="+F+"-]").length||R.push("~="),t.querySelectorAll(":checked").length||R.push(":checked"),t.querySelectorAll("a#"+F+"+*").length||R.push(".#.+[+~]")}),s(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&R.push("name"+ae+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),R.push(",.*:")})),(w.matchesSelector=be.test(N=$.matches||$.webkitMatchesSelector||$.mozMatchesSelector||$.oMatchesSelector||$.msMatchesSelector))&&s(function(t){w.disconnectedMatch=N.call(t,"div"),N.call(t,"[s!='']:x"),L.push("!=",re)}),R=R.length&&new RegExp(R.join("|")),L=L.length&&new RegExp(L.join("|")),e=be.test($.compareDocumentPosition),U=e||be.test($.contains)?function(t,e){var a=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(a.contains?a.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},K=e?function(t,e){if(t===e)return D=!0,0;var a=!t.compareDocumentPosition-!e.compareDocumentPosition;return a?a:(a=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&a||!w.sortDetached&&e.compareDocumentPosition(t)===a?t===n||t.ownerDocument===q&&U(q,t)?-1:e===n||e.ownerDocument===q&&U(q,e)?1:k?te(k,t)-te(k,e):0:4&a?-1:1)}:function(t,e){if(t===e)return D=!0,0;var a,s=0,i=t.parentNode,o=e.parentNode,l=[t],c=[e];if(!i||!o)return t===n?-1:e===n?1:i?-1:o?1:k?te(k,t)-te(k,e):0;if(i===o)return r(t,e);for(a=t;a=a.parentNode;)l.unshift(a);for(a=e;a=a.parentNode;)c.unshift(a);for(;l[s]===c[s];)s++;return s?r(l[s],c[s]):l[s]===q?-1:c[s]===q?1:0},n):P},e.matches=function(t,a){return e(t,null,null,a)},e.matchesSelector=function(t,a){if((t.ownerDocument||t)!==P&&C(t),a=a.replace(ue,"='$1']"),!(!w.matchesSelector||!O||L&&L.test(a)||R&&R.test(a)))try{var n=N.call(t,a);if(n||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(s){}return e(a,P,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==P&&C(t),U(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==P&&C(t);var a=T.attrHandle[e.toLowerCase()],n=a&&Y.call(T.attrHandle,e.toLowerCase())?a(t,e,!O):void 0;return void 0!==n?n:w.attributes||!O?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,a=[],n=0,s=0;if(D=!w.detectDuplicates,k=!w.sortStable&&t.slice(0),t.sort(K),D){for(;e=t[s++];)e===t[s]&&(n=a.push(s));for(;n--;)t.splice(a[n],1)}return k=null,t},E=e.getText=function(t){var e,a="",n=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)a+=E(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[n++];)a+=E(e);return a},T=e.selectors={cacheLength:50,createPseudo:n,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(we,Te),t[3]=(t[3]||t[4]||t[5]||"").replace(we,Te),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,a=!t[6]&&t[2];return fe.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":a&&pe.test(a)&&(e=I(a,!0))&&(e=a.indexOf(")",a.length-e)-a.length)&&(t[0]=t[0].slice(0,e),t[2]=a.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(we,Te).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=G[t+" "];return e||(e=new RegExp("(^|"+ae+")"+t+"("+ae+"|$)"))&&G(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,a,n){return function(s){var i=e.attr(s,t);return null==i?"!="===a:a?(i+="","="===a?i===n:"!="===a?i!==n:"^="===a?n&&0===i.indexOf(n):"*="===a?n&&i.indexOf(n)>-1:"$="===a?n&&i.slice(-n.length)===n:"~="===a?(" "+i.replace(oe," ")+" ").indexOf(n)>-1:"|="===a?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,a,n,s){var i="nth"!==t.slice(0,3),r="last"!==t.slice(-4),o="of-type"===e;return 1===n&&0===s?function(t){return!!t.parentNode}:function(e,a,l){var c,d,u,p,h,f,m=i!==r?"nextSibling":"previousSibling",_=e.parentNode,b=o&&e.nodeName.toLowerCase(),v=!l&&!o;if(_){if(i){for(;m;){for(u=e;u=u[m];)if(o?u.nodeName.toLowerCase()===b:1===u.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[r?_.firstChild:_.lastChild],r&&v){for(d=_[F]||(_[F]={}),c=d[t]||[],h=c[0]===z&&c[1],p=c[0]===z&&c[2],u=h&&_.childNodes[h];u=++h&&u&&u[m]||(p=h=0)||f.pop();)if(1===u.nodeType&&++p&&u===e){d[t]=[z,h,p];break}}else if(v&&(c=(e[F]||(e[F]={}))[t])&&c[0]===z)p=c[1];else for(;(u=++h&&u&&u[m]||(p=h=0)||f.pop())&&((o?u.nodeName.toLowerCase()!==b:1!==u.nodeType)||!++p||(v&&((u[F]||(u[F]={}))[t]=[z,p]),u!==e)););return p-=s,p===n||p%n===0&&p/n>=0}}},PSEUDO:function(t,a){var s,i=T.pseudos[t]||T.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return i[F]?i(a):i.length>1?(s=[t,t,"",a],T.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,s=i(t,a),r=s.length;r--;)n=te(t,s[r]),t[n]=!(e[n]=s[r])}):function(t){return i(t,0,s)}):i}},pseudos:{not:n(function(t){var e=[],a=[],s=x(t.replace(le,"$1"));return s[F]?n(function(t,e,a,n){for(var i,r=s(t,null,n,[]),o=t.length;o--;)(i=r[o])&&(t[o]=!(e[o]=i))}):function(t,n,i){return e[0]=t,s(e,null,i,a),e[0]=null,!a.pop()}}),has:n(function(t){return function(a){return e(t,a).length>0}}),contains:n(function(t){return t=t.replace(we,Te),function(e){return(e.textContent||e.innerText||E(e)).indexOf(t)>-1}}),lang:n(function(t){return he.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(we,Te).toLowerCase(),function(e){var a;do if(a=O?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return a=a.toLowerCase(),a===t||0===a.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var a=t.location&&t.location.hash;return a&&a.slice(1)===e.id},root:function(t){return t===$},focus:function(t){return t===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!T.pseudos.empty(t)},header:function(t){return _e.test(t.nodeName)},input:function(t){return me.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,a){return[0>a?a+e:a]}),even:c(function(t,e){for(var a=0;e>a;a+=2)t.push(a);return t}),odd:c(function(t,e){for(var a=1;e>a;a+=2)t.push(a);return t}),lt:c(function(t,e,a){for(var n=0>a?a+e:a;--n>=0;)t.push(n);return t}),gt:c(function(t,e,a){for(var n=0>a?a+e:a;++n<e;)t.push(n);return t})}},T.pseudos.nth=T.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[y]=o(y);for(y in{submit:!0,reset:!0})T.pseudos[y]=l(y);return u.prototype=T.filters=T.pseudos,T.setFilters=new u,I=e.tokenize=function(t,a){var n,s,i,r,o,l,c,d=B[t+" "];if(d)return a?0:d.slice(0);for(o=t,l=[],c=T.preFilter;o;){(!n||(s=ce.exec(o)))&&(s&&(o=o.slice(s[0].length)||o),l.push(i=[])),n=!1,(s=de.exec(o))&&(n=s.shift(),i.push({value:n,type:s[0].replace(le," ")}),o=o.slice(n.length));for(r in T.filter)!(s=fe[r].exec(o))||c[r]&&!(s=c[r](s))||(n=s.shift(),i.push({value:n,type:r,matches:s}),o=o.slice(n.length));if(!n)break}return a?o.length:o?e.error(t):B(t,l).slice(0)},x=e.compile=function(t,e){var a,n=[],s=[],i=H[t+" "];if(!i){for(e||(e=I(t)),a=e.length;a--;)i=v(e[a]),i[F]?n.push(i):s.push(i);i=H(t,g(s,n)),i.selector=t}return i},A=e.select=function(t,e,a,n){var s,i,r,o,l,c="function"==typeof t&&t,u=!n&&I(t=c.selector||t);if(a=a||[],1===u.length){if(i=u[0]=u[0].slice(0),i.length>2&&"ID"===(r=i[0]).type&&w.getById&&9===e.nodeType&&O&&T.relative[i[1].type]){if(e=(T.find.ID(r.matches[0].replace(we,Te),e)||[])[0],!e)return a;c&&(e=e.parentNode),t=t.slice(i.shift().value.length)}for(s=fe.needsContext.test(t)?0:i.length;s--&&(r=i[s],!T.relative[o=r.type]);)if((l=T.find[o])&&(n=l(r.matches[0].replace(we,Te),ge.test(i[0].type)&&d(e.parentNode)||e))){if(i.splice(s,1),t=n.length&&p(i),!t)return Z.apply(a,n),a;break}}return(c||x(t,u))(n,e,!O,a,ge.test(t)&&d(e.parentNode)||e),a},w.sortStable=F.split("").sort(K).join("")===F,w.detectDuplicates=!!D,C(),w.sortDetached=s(function(t){return 1&t.compareDocumentPosition(P.createElement("div"))}),s(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||i("type|href|height|width",function(t,e,a){return a?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&s(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||i("value",function(t,e,a){return a||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),s(function(t){return null==t.getAttribute("disabled")})||i(ee,function(t,e,a){var n;return a?void 0:t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);J.find=se,J.expr=se.selectors,J.expr[":"]=J.expr.pseudos,J.unique=se.uniqueSort,J.text=se.getText,J.isXMLDoc=se.isXML,J.contains=se.contains;var ie=J.expr.match.needsContext,re=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,oe=/^.[^:#\[\.,]*$/;J.filter=function(t,e,a){var n=e[0];return a&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?J.find.matchesSelector(n,t)?[n]:[]:J.find.matches(t,J.grep(e,function(t){return 1===t.nodeType}))},J.fn.extend({find:function(t){var e,a=this.length,n=[],s=this;if("string"!=typeof t)return this.pushStack(J(t).filter(function(){for(e=0;a>e;e++)if(J.contains(s[e],this))return!0}));for(e=0;a>e;e++)J.find(t,s[e],n);return n=this.pushStack(a>1?J.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&ie.test(t)?J(t):t||[],!1).length}});var le,ce=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,de=J.fn.init=function(t,e){var a,n;if(!t)return this;if("string"==typeof t){if(a="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:ce.exec(t),!a||!a[1]&&e)return!e||e.jquery?(e||le).find(t):this.constructor(e).find(t);if(a[1]){if(e=e instanceof J?e[0]:e,J.merge(this,J.parseHTML(a[1],e&&e.nodeType?e.ownerDocument||e:Q,!0)),re.test(a[1])&&J.isPlainObject(e))for(a in e)J.isFunction(this[a])?this[a](e[a]):this.attr(a,e[a]);return this}return n=Q.getElementById(a[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=Q,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):J.isFunction(t)?"undefined"!=typeof le.ready?le.ready(t):t(J):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),J.makeArray(t,this))};de.prototype=J.fn,le=J(Q);var ue=/^(?:parents|prev(?:Until|All))/,pe={children:!0,contents:!0,next:!0,prev:!0};J.extend({dir:function(t,e,a){for(var n=[],s=void 0!==a;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(s&&J(t).is(a))break;n.push(t)}return n},sibling:function(t,e){for(var a=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&a.push(t);return a}}),J.fn.extend({has:function(t){var e=J(t,this),a=e.length;return this.filter(function(){for(var t=0;a>t;t++)if(J.contains(this,e[t]))return!0})},closest:function(t,e){for(var a,n=0,s=this.length,i=[],r=ie.test(t)||"string"!=typeof t?J(t,e||this.context):0;s>n;n++)for(a=this[n];a&&a!==e;a=a.parentNode)if(a.nodeType<11&&(r?r.index(a)>-1:1===a.nodeType&&J.find.matchesSelector(a,t))){i.push(a);break}return this.pushStack(i.length>1?J.unique(i):i)},index:function(t){return t?"string"==typeof t?K.call(J(t),this[0]):K.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(J.unique(J.merge(this.get(),J(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),J.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return J.dir(t,"parentNode")},parentsUntil:function(t,e,a){return J.dir(t,"parentNode",a)},next:function(t){return s(t,"nextSibling")},prev:function(t){return s(t,"previousSibling")},nextAll:function(t){return J.dir(t,"nextSibling")},prevAll:function(t){return J.dir(t,"previousSibling")},nextUntil:function(t,e,a){return J.dir(t,"nextSibling",a)},prevUntil:function(t,e,a){return J.dir(t,"previousSibling",a)},siblings:function(t){return J.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return J.sibling(t.firstChild)},contents:function(t){return t.contentDocument||J.merge([],t.childNodes)}},function(t,e){J.fn[t]=function(a,n){var s=J.map(this,e,a);return"Until"!==t.slice(-5)&&(n=a),n&&"string"==typeof n&&(s=J.filter(n,s)),this.length>1&&(pe[t]||J.unique(s),ue.test(t)&&s.reverse()),this.pushStack(s)}});var he=/\S+/g,fe={};J.Callbacks=function(t){t="string"==typeof t?fe[t]||i(t):J.extend({},t);var e,a,n,s,r,o,l=[],c=!t.once&&[],d=function(i){for(e=t.memory&&i,a=!0,o=s||0,s=0,r=l.length,n=!0;l&&r>o;o++)if(l[o].apply(i[0],i[1])===!1&&t.stopOnFalse){e=!1;break}n=!1,l&&(c?c.length&&d(c.shift()):e?l=[]:u.disable())},u={add:function(){if(l){var a=l.length;!function i(e){J.each(e,function(e,a){var n=J.type(a);"function"===n?t.unique&&u.has(a)||l.push(a):a&&a.length&&"string"!==n&&i(a)})}(arguments),n?r=l.length:e&&(s=a,d(e))}return this},remove:function(){return l&&J.each(arguments,function(t,e){for(var a;(a=J.inArray(e,l,a))>-1;)l.splice(a,1),n&&(r>=a&&r--,o>=a&&o--)}),this},has:function(t){return t?J.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],r=0,this},disable:function(){return l=c=e=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,e||u.disable(),this},locked:function(){return!c},fireWith:function(t,e){return!l||a&&!c||(e=e||[],e=[t,e.slice?e.slice():e],n?c.push(e):d(e)),this},fire:function(){return u.fireWith(this,arguments),this},fired:function(){return!!a}};return u},J.extend({Deferred:function(t){var e=[["resolve","done",J.Callbacks("once memory"),"resolved"],["reject","fail",J.Callbacks("once memory"),"rejected"],["notify","progress",J.Callbacks("memory")]],a="pending",n={state:function(){return a},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var t=arguments;return J.Deferred(function(a){J.each(e,function(e,i){var r=J.isFunction(t[e])&&t[e];s[i[1]](function(){var t=r&&r.apply(this,arguments);t&&J.isFunction(t.promise)?t.promise().done(a.resolve).fail(a.reject).progress(a.notify):a[i[0]+"With"](this===n?a.promise():this,r?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?J.extend(t,n):n}},s={};return n.pipe=n.then,J.each(e,function(t,i){var r=i[2],o=i[3];n[i[1]]=r.add,o&&r.add(function(){a=o},e[1^t][2].disable,e[2][2].lock),s[i[0]]=function(){return s[i[0]+"With"](this===s?n:this,arguments),this},s[i[0]+"With"]=r.fireWith}),n.promise(s),t&&t.call(s,s),s},when:function(t){var e,a,n,s=0,i=G.call(arguments),r=i.length,o=1!==r||t&&J.isFunction(t.promise)?r:0,l=1===o?t:J.Deferred(),c=function(t,a,n){return function(s){a[t]=this,n[t]=arguments.length>1?G.call(arguments):s,n===e?l.notifyWith(a,n):--o||l.resolveWith(a,n)}};if(r>1)for(e=new Array(r),a=new Array(r),n=new Array(r);r>s;s++)i[s]&&J.isFunction(i[s].promise)?i[s].promise().done(c(s,n,i)).fail(l.reject).progress(c(s,a,e)):--o;return o||l.resolveWith(n,i),l.promise()}});var me;J.fn.ready=function(t){return J.ready.promise().done(t),this},J.extend({isReady:!1,readyWait:1,holdReady:function(t){t?J.readyWait++:J.ready(!0)},ready:function(t){(t===!0?--J.readyWait:J.isReady)||(J.isReady=!0,t!==!0&&--J.readyWait>0||(me.resolveWith(Q,[J]),J.fn.triggerHandler&&(J(Q).triggerHandler("ready"),J(Q).off("ready"))))}}),J.ready.promise=function(e){return me||(me=J.Deferred(),"complete"===Q.readyState?setTimeout(J.ready):(Q.addEventListener("DOMContentLoaded",r,!1),t.addEventListener("load",r,!1))),me.promise(e)},J.ready.promise();var _e=J.access=function(t,e,a,n,s,i,r){var o=0,l=t.length,c=null==a;if("object"===J.type(a)){s=!0;for(o in a)J.access(t,e,o,a[o],!0,i,r)}else if(void 0!==n&&(s=!0,J.isFunction(n)||(r=!0),c&&(r?(e.call(t,n),e=null):(c=e,e=function(t,e,a){return c.call(J(t),a)})),e))for(;l>o;o++)e(t[o],a,r?n:n.call(t[o],o,e(t[o],a)));return s?t:c?e.call(t):l?e(t[0],a):i};J.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},o.uid=1,o.accepts=J.acceptData,o.prototype={key:function(t){if(!o.accepts(t))return 0;var e={},a=t[this.expando];if(!a){a=o.uid++;try{e[this.expando]={value:a},Object.defineProperties(t,e)}catch(n){e[this.expando]=a,J.extend(t,e)}}return this.cache[a]||(this.cache[a]={}),a},set:function(t,e,a){var n,s=this.key(t),i=this.cache[s];if("string"==typeof e)i[e]=a;else if(J.isEmptyObject(i))J.extend(this.cache[s],e);else for(n in e)i[n]=e[n];return i},get:function(t,e){var a=this.cache[this.key(t)];return void 0===e?a:a[e]},access:function(t,e,a){var n;return void 0===e||e&&"string"==typeof e&&void 0===a?(n=this.get(t,e),void 0!==n?n:this.get(t,J.camelCase(e))):(this.set(t,e,a),void 0!==a?a:e)},remove:function(t,e){var a,n,s,i=this.key(t),r=this.cache[i];if(void 0===e)this.cache[i]={};else{J.isArray(e)?n=e.concat(e.map(J.camelCase)):(s=J.camelCase(e),e in r?n=[e,s]:(n=s,n=n in r?[n]:n.match(he)||[])),a=n.length;for(;a--;)delete r[n[a]]}},hasData:function(t){return!J.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var be=new o,ve=new o,ge=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ye=/([A-Z])/g;J.extend({hasData:function(t){return ve.hasData(t)||be.hasData(t)},data:function(t,e,a){return ve.access(t,e,a)},removeData:function(t,e){ve.remove(t,e)},_data:function(t,e,a){return be.access(t,e,a)},_removeData:function(t,e){be.remove(t,e)}}),J.fn.extend({data:function(t,e){var a,n,s,i=this[0],r=i&&i.attributes;if(void 0===t){if(this.length&&(s=ve.get(i),1===i.nodeType&&!be.get(i,"hasDataAttrs"))){for(a=r.length;a--;)r[a]&&(n=r[a].name,0===n.indexOf("data-")&&(n=J.camelCase(n.slice(5)),l(i,n,s[n])));
be.set(i,"hasDataAttrs",!0)}return s}return"object"==typeof t?this.each(function(){ve.set(this,t)}):_e(this,function(e){var a,n=J.camelCase(t);if(i&&void 0===e){if(a=ve.get(i,t),void 0!==a)return a;if(a=ve.get(i,n),void 0!==a)return a;if(a=l(i,n,void 0),void 0!==a)return a}else this.each(function(){var a=ve.get(this,n);ve.set(this,n,e),-1!==t.indexOf("-")&&void 0!==a&&ve.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){ve.remove(this,t)})}}),J.extend({queue:function(t,e,a){var n;return t?(e=(e||"fx")+"queue",n=be.get(t,e),a&&(!n||J.isArray(a)?n=be.access(t,e,J.makeArray(a)):n.push(a)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var a=J.queue(t,e),n=a.length,s=a.shift(),i=J._queueHooks(t,e),r=function(){J.dequeue(t,e)};"inprogress"===s&&(s=a.shift(),n--),s&&("fx"===e&&a.unshift("inprogress"),delete i.stop,s.call(t,r,i)),!n&&i&&i.empty.fire()},_queueHooks:function(t,e){var a=e+"queueHooks";return be.get(t,a)||be.access(t,a,{empty:J.Callbacks("once memory").add(function(){be.remove(t,[e+"queue",a])})})}}),J.fn.extend({queue:function(t,e){var a=2;return"string"!=typeof t&&(e=t,t="fx",a--),arguments.length<a?J.queue(this[0],t):void 0===e?this:this.each(function(){var a=J.queue(this,t,e);J._queueHooks(this,t),"fx"===t&&"inprogress"!==a[0]&&J.dequeue(this,t)})},dequeue:function(t){return this.each(function(){J.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var a,n=1,s=J.Deferred(),i=this,r=this.length,o=function(){--n||s.resolveWith(i,[i])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)a=be.get(i[r],t+"queueHooks"),a&&a.empty&&(n++,a.empty.add(o));return o(),s.promise(e)}});var we=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Te=["Top","Right","Bottom","Left"],Ee=function(t,e){return t=e||t,"none"===J.css(t,"display")||!J.contains(t.ownerDocument,t)},Se=/^(?:checkbox|radio)$/i;!function(){var t=Q.createDocumentFragment(),e=t.appendChild(Q.createElement("div")),a=Q.createElement("input");a.setAttribute("type","radio"),a.setAttribute("checked","checked"),a.setAttribute("name","t"),e.appendChild(a),X.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",X.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Ie="undefined";X.focusinBubbles="onfocusin"in t;var xe=/^key/,Ae=/^(?:mouse|pointer|contextmenu)|click/,Me=/^(?:focusinfocus|focusoutblur)$/,ke=/^([^.]*)(?:\.(.+)|)$/;J.event={global:{},add:function(t,e,a,n,s){var i,r,o,l,c,d,u,p,h,f,m,_=be.get(t);if(_)for(a.handler&&(i=a,a=i.handler,s=i.selector),a.guid||(a.guid=J.guid++),(l=_.events)||(l=_.events={}),(r=_.handle)||(r=_.handle=function(e){return typeof J!==Ie&&J.event.triggered!==e.type?J.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(he)||[""],c=e.length;c--;)o=ke.exec(e[c])||[],h=m=o[1],f=(o[2]||"").split(".").sort(),h&&(u=J.event.special[h]||{},h=(s?u.delegateType:u.bindType)||h,u=J.event.special[h]||{},d=J.extend({type:h,origType:m,data:n,handler:a,guid:a.guid,selector:s,needsContext:s&&J.expr.match.needsContext.test(s),namespace:f.join(".")},i),(p=l[h])||(p=l[h]=[],p.delegateCount=0,u.setup&&u.setup.call(t,n,f,r)!==!1||t.addEventListener&&t.addEventListener(h,r,!1)),u.add&&(u.add.call(t,d),d.handler.guid||(d.handler.guid=a.guid)),s?p.splice(p.delegateCount++,0,d):p.push(d),J.event.global[h]=!0)},remove:function(t,e,a,n,s){var i,r,o,l,c,d,u,p,h,f,m,_=be.hasData(t)&&be.get(t);if(_&&(l=_.events)){for(e=(e||"").match(he)||[""],c=e.length;c--;)if(o=ke.exec(e[c])||[],h=m=o[1],f=(o[2]||"").split(".").sort(),h){for(u=J.event.special[h]||{},h=(n?u.delegateType:u.bindType)||h,p=l[h]||[],o=o[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=i=p.length;i--;)d=p[i],!s&&m!==d.origType||a&&a.guid!==d.guid||o&&!o.test(d.namespace)||n&&n!==d.selector&&("**"!==n||!d.selector)||(p.splice(i,1),d.selector&&p.delegateCount--,u.remove&&u.remove.call(t,d));r&&!p.length&&(u.teardown&&u.teardown.call(t,f,_.handle)!==!1||J.removeEvent(t,h,_.handle),delete l[h])}else for(h in l)J.event.remove(t,h+e[c],a,n,!0);J.isEmptyObject(l)&&(delete _.handle,be.remove(t,"events"))}},trigger:function(e,a,n,s){var i,r,o,l,c,d,u,p=[n||Q],h=W.call(e,"type")?e.type:e,f=W.call(e,"namespace")?e.namespace.split("."):[];if(r=o=n=n||Q,3!==n.nodeType&&8!==n.nodeType&&!Me.test(h+J.event.triggered)&&(h.indexOf(".")>=0&&(f=h.split("."),h=f.shift(),f.sort()),c=h.indexOf(":")<0&&"on"+h,e=e[J.expando]?e:new J.Event(h,"object"==typeof e&&e),e.isTrigger=s?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),a=null==a?[e]:J.makeArray(a,[e]),u=J.event.special[h]||{},s||!u.trigger||u.trigger.apply(n,a)!==!1)){if(!s&&!u.noBubble&&!J.isWindow(n)){for(l=u.delegateType||h,Me.test(l+h)||(r=r.parentNode);r;r=r.parentNode)p.push(r),o=r;o===(n.ownerDocument||Q)&&p.push(o.defaultView||o.parentWindow||t)}for(i=0;(r=p[i++])&&!e.isPropagationStopped();)e.type=i>1?l:u.bindType||h,d=(be.get(r,"events")||{})[e.type]&&be.get(r,"handle"),d&&d.apply(r,a),d=c&&r[c],d&&d.apply&&J.acceptData(r)&&(e.result=d.apply(r,a),e.result===!1&&e.preventDefault());return e.type=h,s||e.isDefaultPrevented()||u._default&&u._default.apply(p.pop(),a)!==!1||!J.acceptData(n)||c&&J.isFunction(n[h])&&!J.isWindow(n)&&(o=n[c],o&&(n[c]=null),J.event.triggered=h,n[h](),J.event.triggered=void 0,o&&(n[c]=o)),e.result}},dispatch:function(t){t=J.event.fix(t);var e,a,n,s,i,r=[],o=G.call(arguments),l=(be.get(this,"events")||{})[t.type]||[],c=J.event.special[t.type]||{};if(o[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(r=J.event.handlers.call(this,t,l),e=0;(s=r[e++])&&!t.isPropagationStopped();)for(t.currentTarget=s.elem,a=0;(i=s.handlers[a++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(i.namespace))&&(t.handleObj=i,t.data=i.data,n=((J.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,o),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var a,n,s,i,r=[],o=e.delegateCount,l=t.target;if(o&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==t.type){for(n=[],a=0;o>a;a++)i=e[a],s=i.selector+" ",void 0===n[s]&&(n[s]=i.needsContext?J(s,this).index(l)>=0:J.find(s,this,null,[l]).length),n[s]&&n.push(i);n.length&&r.push({elem:l,handlers:n})}return o<e.length&&r.push({elem:this,handlers:e.slice(o)}),r},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var a,n,s,i=e.button;return null==t.pageX&&null!=e.clientX&&(a=t.target.ownerDocument||Q,n=a.documentElement,s=a.body,t.pageX=e.clientX+(n&&n.scrollLeft||s&&s.scrollLeft||0)-(n&&n.clientLeft||s&&s.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||s&&s.scrollTop||0)-(n&&n.clientTop||s&&s.clientTop||0)),t.which||void 0===i||(t.which=1&i?1:2&i?3:4&i?2:0),t}},fix:function(t){if(t[J.expando])return t;var e,a,n,s=t.type,i=t,r=this.fixHooks[s];for(r||(this.fixHooks[s]=r=Ae.test(s)?this.mouseHooks:xe.test(s)?this.keyHooks:{}),n=r.props?this.props.concat(r.props):this.props,t=new J.Event(i),e=n.length;e--;)a=n[e],t[a]=i[a];return t.target||(t.target=Q),3===t.target.nodeType&&(t.target=t.target.parentNode),r.filter?r.filter(t,i):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==u()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===u()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&J.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return J.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,a,n){var s=J.extend(new J.Event,a,{type:t,isSimulated:!0,originalEvent:{}});n?J.event.trigger(s,null,e):J.event.dispatch.call(e,s),s.isDefaultPrevented()&&a.preventDefault()}},J.removeEvent=function(t,e,a){t.removeEventListener&&t.removeEventListener(e,a,!1)},J.Event=function(t,e){return this instanceof J.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?c:d):this.type=t,e&&J.extend(this,e),this.timeStamp=t&&t.timeStamp||J.now(),void(this[J.expando]=!0)):new J.Event(t,e)},J.Event.prototype={isDefaultPrevented:d,isPropagationStopped:d,isImmediatePropagationStopped:d,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=c,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=c,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=c,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},J.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){J.event.special[t]={delegateType:e,bindType:e,handle:function(t){var a,n=this,s=t.relatedTarget,i=t.handleObj;return(!s||s!==n&&!J.contains(n,s))&&(t.type=i.origType,a=i.handler.apply(this,arguments),t.type=e),a}}}),X.focusinBubbles||J.each({focus:"focusin",blur:"focusout"},function(t,e){var a=function(t){J.event.simulate(e,t.target,J.event.fix(t),!0)};J.event.special[e]={setup:function(){var n=this.ownerDocument||this,s=be.access(n,e);s||n.addEventListener(t,a,!0),be.access(n,e,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this,s=be.access(n,e)-1;s?be.access(n,e,s):(n.removeEventListener(t,a,!0),be.remove(n,e))}}}),J.fn.extend({on:function(t,e,a,n,s){var i,r;if("object"==typeof t){"string"!=typeof e&&(a=a||e,e=void 0);for(r in t)this.on(r,e,a,t[r],s);return this}if(null==a&&null==n?(n=e,a=e=void 0):null==n&&("string"==typeof e?(n=a,a=void 0):(n=a,a=e,e=void 0)),n===!1)n=d;else if(!n)return this;return 1===s&&(i=n,n=function(t){return J().off(t),i.apply(this,arguments)},n.guid=i.guid||(i.guid=J.guid++)),this.each(function(){J.event.add(this,t,n,a,e)})},one:function(t,e,a,n){return this.on(t,e,a,n,1)},off:function(t,e,a){var n,s;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,J(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return(e===!1||"function"==typeof e)&&(a=e,e=void 0),a===!1&&(a=d),this.each(function(){J.event.remove(this,t,a,e)})},trigger:function(t,e){return this.each(function(){J.event.trigger(t,e,this)})},triggerHandler:function(t,e){var a=this[0];return a?J.event.trigger(t,e,a,!0):void 0}});var De=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ce=/<([\w:]+)/,Pe=/<|&#?\w+;/,$e=/<(?:script|style|link)/i,Oe=/checked\s*(?:[^=]|=\s*.checked.)/i,Re=/^$|\/(?:java|ecma)script/i,Le=/^true\/(.*)/,Ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ue={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ue.optgroup=Ue.option,Ue.tbody=Ue.tfoot=Ue.colgroup=Ue.caption=Ue.thead,Ue.th=Ue.td,J.extend({clone:function(t,e,a){var n,s,i,r,o=t.cloneNode(!0),l=J.contains(t.ownerDocument,t);if(!(X.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||J.isXMLDoc(t)))for(r=b(o),i=b(t),n=0,s=i.length;s>n;n++)v(i[n],r[n]);if(e)if(a)for(i=i||b(t),r=r||b(o),n=0,s=i.length;s>n;n++)_(i[n],r[n]);else _(t,o);return r=b(o,"script"),r.length>0&&m(r,!l&&b(t,"script")),o},buildFragment:function(t,e,a,n){for(var s,i,r,o,l,c,d=e.createDocumentFragment(),u=[],p=0,h=t.length;h>p;p++)if(s=t[p],s||0===s)if("object"===J.type(s))J.merge(u,s.nodeType?[s]:s);else if(Pe.test(s)){for(i=i||d.appendChild(e.createElement("div")),r=(Ce.exec(s)||["",""])[1].toLowerCase(),o=Ue[r]||Ue._default,i.innerHTML=o[1]+s.replace(De,"<$1></$2>")+o[2],c=o[0];c--;)i=i.lastChild;J.merge(u,i.childNodes),i=d.firstChild,i.textContent=""}else u.push(e.createTextNode(s));for(d.textContent="",p=0;s=u[p++];)if((!n||-1===J.inArray(s,n))&&(l=J.contains(s.ownerDocument,s),i=b(d.appendChild(s),"script"),l&&m(i),a))for(c=0;s=i[c++];)Re.test(s.type||"")&&a.push(s);return d},cleanData:function(t){for(var e,a,n,s,i=J.event.special,r=0;void 0!==(a=t[r]);r++){if(J.acceptData(a)&&(s=a[be.expando],s&&(e=be.cache[s]))){if(e.events)for(n in e.events)i[n]?J.event.remove(a,n):J.removeEvent(a,n,e.handle);be.cache[s]&&delete be.cache[s]}delete ve.cache[a[ve.expando]]}}}),J.fn.extend({text:function(t){return _e(this,function(t){return void 0===t?J.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=p(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=p(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var a,n=t?J.filter(t,this):this,s=0;null!=(a=n[s]);s++)e||1!==a.nodeType||J.cleanData(b(a)),a.parentNode&&(e&&J.contains(a.ownerDocument,a)&&m(b(a,"script")),a.parentNode.removeChild(a));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(J.cleanData(b(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return J.clone(this,t,e)})},html:function(t){return _e(this,function(t){var e=this[0]||{},a=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!$e.test(t)&&!Ue[(Ce.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(De,"<$1></$2>");try{for(;n>a;a++)e=this[a]||{},1===e.nodeType&&(J.cleanData(b(e,!1)),e.innerHTML=t);e=0}catch(s){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,J.cleanData(b(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=B.apply([],t);var a,n,s,i,r,o,l=0,c=this.length,d=this,u=c-1,p=t[0],m=J.isFunction(p);if(m||c>1&&"string"==typeof p&&!X.checkClone&&Oe.test(p))return this.each(function(a){var n=d.eq(a);m&&(t[0]=p.call(this,a,n.html())),n.domManip(t,e)});if(c&&(a=J.buildFragment(t,this[0].ownerDocument,!1,this),n=a.firstChild,1===a.childNodes.length&&(a=n),n)){for(s=J.map(b(a,"script"),h),i=s.length;c>l;l++)r=a,l!==u&&(r=J.clone(r,!0,!0),i&&J.merge(s,b(r,"script"))),e.call(this[l],r,l);if(i)for(o=s[s.length-1].ownerDocument,J.map(s,f),l=0;i>l;l++)r=s[l],Re.test(r.type||"")&&!be.access(r,"globalEval")&&J.contains(o,r)&&(r.src?J._evalUrl&&J._evalUrl(r.src):J.globalEval(r.textContent.replace(Ne,"")))}return this}}),J.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){J.fn[t]=function(t){for(var a,n=[],s=J(t),i=s.length-1,r=0;i>=r;r++)a=r===i?this:this.clone(!0),J(s[r])[e](a),H.apply(n,a.get());return this.pushStack(n)}});var Fe,qe={},ze=/^margin/,Ve=new RegExp("^("+we+")(?!px)[a-z%]+$","i"),Ge=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)};!function(){function e(){r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r.innerHTML="",s.appendChild(i);var e=t.getComputedStyle(r,null);a="1%"!==e.top,n="4px"===e.width,s.removeChild(i)}var a,n,s=Q.documentElement,i=Q.createElement("div"),r=Q.createElement("div");r.style&&(r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",X.clearCloneStyle="content-box"===r.style.backgroundClip,i.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",i.appendChild(r),t.getComputedStyle&&J.extend(X,{pixelPosition:function(){return e(),a},boxSizingReliable:function(){return null==n&&e(),n},reliableMarginRight:function(){var e,a=r.appendChild(Q.createElement("div"));return a.style.cssText=r.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",a.style.marginRight=a.style.width="0",r.style.width="1px",s.appendChild(i),e=!parseFloat(t.getComputedStyle(a,null).marginRight),s.removeChild(i),r.removeChild(a),e}}))}(),J.swap=function(t,e,a,n){var s,i,r={};for(i in e)r[i]=t.style[i],t.style[i]=e[i];s=a.apply(t,n||[]);for(i in e)t.style[i]=r[i];return s};var Be=/^(none|table(?!-c[ea]).+)/,He=new RegExp("^("+we+")(.*)$","i"),Ke=new RegExp("^([+-])=("+we+")","i"),je={position:"absolute",visibility:"hidden",display:"block"},Ye={letterSpacing:"0",fontWeight:"400"},We=["Webkit","O","Moz","ms"];J.extend({cssHooks:{opacity:{get:function(t,e){if(e){var a=w(t,"opacity");return""===a?"1":a}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,a,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,i,r,o=J.camelCase(e),l=t.style;return e=J.cssProps[o]||(J.cssProps[o]=E(l,o)),r=J.cssHooks[e]||J.cssHooks[o],void 0===a?r&&"get"in r&&void 0!==(s=r.get(t,!1,n))?s:l[e]:(i=typeof a,"string"===i&&(s=Ke.exec(a))&&(a=(s[1]+1)*s[2]+parseFloat(J.css(t,e)),i="number"),void(null!=a&&a===a&&("number"!==i||J.cssNumber[o]||(a+="px"),X.clearCloneStyle||""!==a||0!==e.indexOf("background")||(l[e]="inherit"),r&&"set"in r&&void 0===(a=r.set(t,a,n))||(l[e]=a))))}},css:function(t,e,a,n){var s,i,r,o=J.camelCase(e);return e=J.cssProps[o]||(J.cssProps[o]=E(t.style,o)),r=J.cssHooks[e]||J.cssHooks[o],r&&"get"in r&&(s=r.get(t,!0,a)),void 0===s&&(s=w(t,e,n)),"normal"===s&&e in Ye&&(s=Ye[e]),""===a||a?(i=parseFloat(s),a===!0||J.isNumeric(i)?i||0:s):s}}),J.each(["height","width"],function(t,e){J.cssHooks[e]={get:function(t,a,n){return a?Be.test(J.css(t,"display"))&&0===t.offsetWidth?J.swap(t,je,function(){return x(t,e,n)}):x(t,e,n):void 0},set:function(t,a,n){var s=n&&Ge(t);return S(t,a,n?I(t,e,n,"border-box"===J.css(t,"boxSizing",!1,s),s):0)}}}),J.cssHooks.marginRight=T(X.reliableMarginRight,function(t,e){return e?J.swap(t,{display:"inline-block"},w,[t,"marginRight"]):void 0}),J.each({margin:"",padding:"",border:"Width"},function(t,e){J.cssHooks[t+e]={expand:function(a){for(var n=0,s={},i="string"==typeof a?a.split(" "):[a];4>n;n++)s[t+Te[n]+e]=i[n]||i[n-2]||i[0];return s}},ze.test(t)||(J.cssHooks[t+e].set=S)}),J.fn.extend({css:function(t,e){return _e(this,function(t,e,a){var n,s,i={},r=0;if(J.isArray(e)){for(n=Ge(t),s=e.length;s>r;r++)i[e[r]]=J.css(t,e[r],!1,n);return i}return void 0!==a?J.style(t,e,a):J.css(t,e)},t,e,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ee(this)?J(this).show():J(this).hide()})}}),J.Tween=M,M.prototype={constructor:M,init:function(t,e,a,n,s,i){this.elem=t,this.prop=a,this.easing=s||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=i||(J.cssNumber[a]?"":"px")},cur:function(){var t=M.propHooks[this.prop];return t&&t.get?t.get(this):M.propHooks._default.get(this)},run:function(t){var e,a=M.propHooks[this.prop];return this.pos=e=this.options.duration?J.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),a&&a.set?a.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=J.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){J.fx.step[t.prop]?J.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[J.cssProps[t.prop]]||J.cssHooks[t.prop])?J.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},J.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},J.fx=M.prototype.init,J.fx.step={};var Xe,Qe,Ze=/^(?:toggle|show|hide)$/,Je=new RegExp("^(?:([+-])=|)("+we+")([a-z%]*)$","i"),ta=/queueHooks$/,ea=[P],aa={"*":[function(t,e){var a=this.createTween(t,e),n=a.cur(),s=Je.exec(e),i=s&&s[3]||(J.cssNumber[t]?"":"px"),r=(J.cssNumber[t]||"px"!==i&&+n)&&Je.exec(J.css(a.elem,t)),o=1,l=20;if(r&&r[3]!==i){i=i||r[3],s=s||[],r=+n||1;do o=o||".5",r/=o,J.style(a.elem,t,r+i);while(o!==(o=a.cur()/n)&&1!==o&&--l)}return s&&(r=a.start=+r||+n||0,a.unit=i,a.end=s[1]?r+(s[1]+1)*s[2]:+s[2]),a}]};J.Animation=J.extend(O,{tweener:function(t,e){J.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var a,n=0,s=t.length;s>n;n++)a=t[n],aa[a]=aa[a]||[],aa[a].unshift(e)},prefilter:function(t,e){e?ea.unshift(t):ea.push(t)}}),J.speed=function(t,e,a){var n=t&&"object"==typeof t?J.extend({},t):{complete:a||!a&&e||J.isFunction(t)&&t,duration:t,easing:a&&e||e&&!J.isFunction(e)&&e};return n.duration=J.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in J.fx.speeds?J.fx.speeds[n.duration]:J.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){J.isFunction(n.old)&&n.old.call(this),n.queue&&J.dequeue(this,n.queue)},n},J.fn.extend({fadeTo:function(t,e,a,n){return this.filter(Ee).css("opacity",0).show().end().animate({opacity:e},t,a,n)},animate:function(t,e,a,n){var s=J.isEmptyObject(t),i=J.speed(e,a,n),r=function(){var e=O(this,J.extend({},t),i);(s||be.get(this,"finish"))&&e.stop(!0)};return r.finish=r,s||i.queue===!1?this.each(r):this.queue(i.queue,r)},stop:function(t,e,a){var n=function(t){var e=t.stop;delete t.stop,e(a)};return"string"!=typeof t&&(a=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,s=null!=t&&t+"queueHooks",i=J.timers,r=be.get(this);if(s)r[s]&&r[s].stop&&n(r[s]);else for(s in r)r[s]&&r[s].stop&&ta.test(s)&&n(r[s]);for(s=i.length;s--;)i[s].elem!==this||null!=t&&i[s].queue!==t||(i[s].anim.stop(a),e=!1,i.splice(s,1));(e||!a)&&J.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,a=be.get(this),n=a[t+"queue"],s=a[t+"queueHooks"],i=J.timers,r=n?n.length:0;for(a.finish=!0,J.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===t&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;r>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete a.finish})}}),J.each(["toggle","show","hide"],function(t,e){var a=J.fn[e];J.fn[e]=function(t,n,s){return null==t||"boolean"==typeof t?a.apply(this,arguments):this.animate(D(e,!0),t,n,s)}}),J.each({slideDown:D("show"),slideUp:D("hide"),slideToggle:D("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){J.fn[t]=function(t,a,n){return this.animate(e,t,a,n)}}),J.timers=[],J.fx.tick=function(){var t,e=0,a=J.timers;for(Xe=J.now();e<a.length;e++)t=a[e],t()||a[e]!==t||a.splice(e--,1);a.length||J.fx.stop(),Xe=void 0},J.fx.timer=function(t){J.timers.push(t),t()?J.fx.start():J.timers.pop()},J.fx.interval=13,J.fx.start=function(){Qe||(Qe=setInterval(J.fx.tick,J.fx.interval))},J.fx.stop=function(){clearInterval(Qe),Qe=null},J.fx.speeds={slow:600,fast:200,_default:400},J.fn.delay=function(t,e){return t=J.fx?J.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,a){var n=setTimeout(e,t);a.stop=function(){clearTimeout(n)}})},function(){var t=Q.createElement("input"),e=Q.createElement("select"),a=e.appendChild(Q.createElement("option"));t.type="checkbox",X.checkOn=""!==t.value,X.optSelected=a.selected,e.disabled=!0,X.optDisabled=!a.disabled,t=Q.createElement("input"),t.value="t",t.type="radio",X.radioValue="t"===t.value}();var na,sa,ia=J.expr.attrHandle;J.fn.extend({attr:function(t,e){return _e(this,J.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){J.removeAttr(this,t)})}}),J.extend({attr:function(t,e,a){var n,s,i=t.nodeType;return t&&3!==i&&8!==i&&2!==i?typeof t.getAttribute===Ie?J.prop(t,e,a):(1===i&&J.isXMLDoc(t)||(e=e.toLowerCase(),n=J.attrHooks[e]||(J.expr.match.bool.test(e)?sa:na)),void 0===a?n&&"get"in n&&null!==(s=n.get(t,e))?s:(s=J.find.attr(t,e),null==s?void 0:s):null!==a?n&&"set"in n&&void 0!==(s=n.set(t,a,e))?s:(t.setAttribute(e,a+""),a):void J.removeAttr(t,e)):void 0},removeAttr:function(t,e){var a,n,s=0,i=e&&e.match(he);if(i&&1===t.nodeType)for(;a=i[s++];)n=J.propFix[a]||a,J.expr.match.bool.test(a)&&(t[n]=!1),t.removeAttribute(a)},attrHooks:{type:{set:function(t,e){if(!X.radioValue&&"radio"===e&&J.nodeName(t,"input")){var a=t.value;return t.setAttribute("type",e),a&&(t.value=a),e}}}}}),sa={set:function(t,e,a){return e===!1?J.removeAttr(t,a):t.setAttribute(a,a),a}},J.each(J.expr.match.bool.source.match(/\w+/g),function(t,e){var a=ia[e]||J.find.attr;ia[e]=function(t,e,n){var s,i;return n||(i=ia[e],ia[e]=s,s=null!=a(t,e,n)?e.toLowerCase():null,ia[e]=i),s}});var ra=/^(?:input|select|textarea|button)$/i;J.fn.extend({prop:function(t,e){return _e(this,J.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[J.propFix[t]||t]})}}),J.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,a){var n,s,i,r=t.nodeType;return t&&3!==r&&8!==r&&2!==r?(i=1!==r||!J.isXMLDoc(t),i&&(e=J.propFix[e]||e,s=J.propHooks[e]),void 0!==a?s&&"set"in s&&void 0!==(n=s.set(t,a,e))?n:t[e]=a:s&&"get"in s&&null!==(n=s.get(t,e))?n:t[e]):void 0},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||ra.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),X.optSelected||(J.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),J.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){J.propFix[this.toLowerCase()]=this});var oa=/[\t\r\n\f]/g;J.fn.extend({addClass:function(t){var e,a,n,s,i,r,o="string"==typeof t&&t,l=0,c=this.length;if(J.isFunction(t))return this.each(function(e){J(this).addClass(t.call(this,e,this.className))});if(o)for(e=(t||"").match(he)||[];c>l;l++)if(a=this[l],n=1===a.nodeType&&(a.className?(" "+a.className+" ").replace(oa," "):" ")){for(i=0;s=e[i++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");r=J.trim(n),a.className!==r&&(a.className=r)}return this},removeClass:function(t){var e,a,n,s,i,r,o=0===arguments.length||"string"==typeof t&&t,l=0,c=this.length;if(J.isFunction(t))return this.each(function(e){J(this).removeClass(t.call(this,e,this.className))});if(o)for(e=(t||"").match(he)||[];c>l;l++)if(a=this[l],n=1===a.nodeType&&(a.className?(" "+a.className+" ").replace(oa," "):"")){for(i=0;s=e[i++];)for(;n.indexOf(" "+s+" ")>=0;)n=n.replace(" "+s+" "," ");r=t?J.trim(n):"",a.className!==r&&(a.className=r)}return this},toggleClass:function(t,e){var a=typeof t;return"boolean"==typeof e&&"string"===a?e?this.addClass(t):this.removeClass(t):this.each(J.isFunction(t)?function(a){J(this).toggleClass(t.call(this,a,this.className,e),e)}:function(){if("string"===a)for(var e,n=0,s=J(this),i=t.match(he)||[];e=i[n++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else(a===Ie||"boolean"===a)&&(this.className&&be.set(this,"__className__",this.className),this.className=this.className||t===!1?"":be.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",a=0,n=this.length;n>a;a++)if(1===this[a].nodeType&&(" "+this[a].className+" ").replace(oa," ").indexOf(e)>=0)return!0;return!1}});var la=/\r/g;J.fn.extend({val:function(t){var e,a,n,s=this[0];return arguments.length?(n=J.isFunction(t),this.each(function(a){var s;1===this.nodeType&&(s=n?t.call(this,a,J(this).val()):t,null==s?s="":"number"==typeof s?s+="":J.isArray(s)&&(s=J.map(s,function(t){return null==t?"":t+""})),e=J.valHooks[this.type]||J.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))})):s?(e=J.valHooks[s.type]||J.valHooks[s.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(a=e.get(s,"value"))?a:(a=s.value,"string"==typeof a?a.replace(la,""):null==a?"":a)):void 0}}),J.extend({valHooks:{option:{get:function(t){var e=J.find.attr(t,"value");return null!=e?e:J.trim(J.text(t))}},select:{get:function(t){for(var e,a,n=t.options,s=t.selectedIndex,i="select-one"===t.type||0>s,r=i?null:[],o=i?s+1:n.length,l=0>s?o:i?s:0;o>l;l++)if(a=n[l],!(!a.selected&&l!==s||(X.optDisabled?a.disabled:null!==a.getAttribute("disabled"))||a.parentNode.disabled&&J.nodeName(a.parentNode,"optgroup"))){if(e=J(a).val(),i)return e;r.push(e)}return r},set:function(t,e){for(var a,n,s=t.options,i=J.makeArray(e),r=s.length;r--;)n=s[r],(n.selected=J.inArray(n.value,i)>=0)&&(a=!0);return a||(t.selectedIndex=-1),i}}}}),J.each(["radio","checkbox"],function(){J.valHooks[this]={set:function(t,e){return J.isArray(e)?t.checked=J.inArray(J(t).val(),e)>=0:void 0}},X.checkOn||(J.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),J.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){J.fn[e]=function(t,a){return arguments.length>0?this.on(e,null,t,a):this.trigger(e)}}),J.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,a){return this.on(t,null,e,a)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,a,n){return this.on(e,t,a,n)},undelegate:function(t,e,a){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",a)}});var ca=J.now(),da=/\?/;J.parseJSON=function(t){return JSON.parse(t+"")},J.parseXML=function(t){var e,a;if(!t||"string"!=typeof t)return null;try{a=new DOMParser,e=a.parseFromString(t,"text/xml")}catch(n){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&J.error("Invalid XML: "+t),e};var ua=/#.*$/,pa=/([?&])_=[^&]*/,ha=/^(.*?):[ \t]*([^\r\n]*)$/gm,fa=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ma=/^(?:GET|HEAD)$/,_a=/^\/\//,ba=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,va={},ga={},ya="*/".concat("*"),wa=t.location.href,Ta=ba.exec(wa.toLowerCase())||[];J.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:wa,type:"GET",isLocal:fa.test(Ta[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ya,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":J.parseJSON,"text xml":J.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?N(N(t,J.ajaxSettings),e):N(J.ajaxSettings,t)},ajaxPrefilter:R(va),ajaxTransport:R(ga),ajax:function(t,e){function a(t,e,a,r){var l,d,b,v,y,T=e;
2!==g&&(g=2,o&&clearTimeout(o),n=void 0,i=r||"",w.readyState=t>0?4:0,l=t>=200&&300>t||304===t,a&&(v=U(u,w,a)),v=F(u,v,w,l),l?(u.ifModified&&(y=w.getResponseHeader("Last-Modified"),y&&(J.lastModified[s]=y),y=w.getResponseHeader("etag"),y&&(J.etag[s]=y)),204===t||"HEAD"===u.type?T="nocontent":304===t?T="notmodified":(T=v.state,d=v.data,b=v.error,l=!b)):(b=T,(t||!T)&&(T="error",0>t&&(t=0))),w.status=t,w.statusText=(e||T)+"",l?f.resolveWith(p,[d,T,w]):f.rejectWith(p,[w,T,b]),w.statusCode(_),_=void 0,c&&h.trigger(l?"ajaxSuccess":"ajaxError",[w,u,l?d:b]),m.fireWith(p,[w,T]),c&&(h.trigger("ajaxComplete",[w,u]),--J.active||J.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,s,i,r,o,l,c,d,u=J.ajaxSetup({},e),p=u.context||u,h=u.context&&(p.nodeType||p.jquery)?J(p):J.event,f=J.Deferred(),m=J.Callbacks("once memory"),_=u.statusCode||{},b={},v={},g=0,y="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===g){if(!r)for(r={};e=ha.exec(i);)r[e[1].toLowerCase()]=e[2];e=r[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===g?i:null},setRequestHeader:function(t,e){var a=t.toLowerCase();return g||(t=v[a]=v[a]||t,b[t]=e),this},overrideMimeType:function(t){return g||(u.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>g)for(e in t)_[e]=[_[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||y;return n&&n.abort(e),a(0,e),this}};if(f.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,u.url=((t||u.url||wa)+"").replace(ua,"").replace(_a,Ta[1]+"//"),u.type=e.method||e.type||u.method||u.type,u.dataTypes=J.trim(u.dataType||"*").toLowerCase().match(he)||[""],null==u.crossDomain&&(l=ba.exec(u.url.toLowerCase()),u.crossDomain=!(!l||l[1]===Ta[1]&&l[2]===Ta[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(Ta[3]||("http:"===Ta[1]?"80":"443")))),u.data&&u.processData&&"string"!=typeof u.data&&(u.data=J.param(u.data,u.traditional)),L(va,u,e,w),2===g)return w;c=J.event&&u.global,c&&0===J.active++&&J.event.trigger("ajaxStart"),u.type=u.type.toUpperCase(),u.hasContent=!ma.test(u.type),s=u.url,u.hasContent||(u.data&&(s=u.url+=(da.test(s)?"&":"?")+u.data,delete u.data),u.cache===!1&&(u.url=pa.test(s)?s.replace(pa,"$1_="+ca++):s+(da.test(s)?"&":"?")+"_="+ca++)),u.ifModified&&(J.lastModified[s]&&w.setRequestHeader("If-Modified-Since",J.lastModified[s]),J.etag[s]&&w.setRequestHeader("If-None-Match",J.etag[s])),(u.data&&u.hasContent&&u.contentType!==!1||e.contentType)&&w.setRequestHeader("Content-Type",u.contentType),w.setRequestHeader("Accept",u.dataTypes[0]&&u.accepts[u.dataTypes[0]]?u.accepts[u.dataTypes[0]]+("*"!==u.dataTypes[0]?", "+ya+"; q=0.01":""):u.accepts["*"]);for(d in u.headers)w.setRequestHeader(d,u.headers[d]);if(u.beforeSend&&(u.beforeSend.call(p,w,u)===!1||2===g))return w.abort();y="abort";for(d in{success:1,error:1,complete:1})w[d](u[d]);if(n=L(ga,u,e,w)){w.readyState=1,c&&h.trigger("ajaxSend",[w,u]),u.async&&u.timeout>0&&(o=setTimeout(function(){w.abort("timeout")},u.timeout));try{g=1,n.send(b,a)}catch(T){if(!(2>g))throw T;a(-1,T)}}else a(-1,"No Transport");return w},getJSON:function(t,e,a){return J.get(t,e,a,"json")},getScript:function(t,e){return J.get(t,void 0,e,"script")}}),J.each(["get","post"],function(t,e){J[e]=function(t,a,n,s){return J.isFunction(a)&&(s=s||n,n=a,a=void 0),J.ajax({url:t,type:e,dataType:s,data:a,success:n})}}),J._evalUrl=function(t){return J.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},J.fn.extend({wrapAll:function(t){var e;return J.isFunction(t)?this.each(function(e){J(this).wrapAll(t.call(this,e))}):(this[0]&&(e=J(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(J.isFunction(t)?function(e){J(this).wrapInner(t.call(this,e))}:function(){var e=J(this),a=e.contents();a.length?a.wrapAll(t):e.append(t)})},wrap:function(t){var e=J.isFunction(t);return this.each(function(a){J(this).wrapAll(e?t.call(this,a):t)})},unwrap:function(){return this.parent().each(function(){J.nodeName(this,"body")||J(this).replaceWith(this.childNodes)}).end()}}),J.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},J.expr.filters.visible=function(t){return!J.expr.filters.hidden(t)};var Ea=/%20/g,Sa=/\[\]$/,Ia=/\r?\n/g,xa=/^(?:submit|button|image|reset|file)$/i,Aa=/^(?:input|select|textarea|keygen)/i;J.param=function(t,e){var a,n=[],s=function(t,e){e=J.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=J.ajaxSettings&&J.ajaxSettings.traditional),J.isArray(t)||t.jquery&&!J.isPlainObject(t))J.each(t,function(){s(this.name,this.value)});else for(a in t)q(a,t[a],e,s);return n.join("&").replace(Ea,"+")},J.fn.extend({serialize:function(){return J.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=J.prop(this,"elements");return t?J.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!J(this).is(":disabled")&&Aa.test(this.nodeName)&&!xa.test(t)&&(this.checked||!Se.test(t))}).map(function(t,e){var a=J(this).val();return null==a?null:J.isArray(a)?J.map(a,function(t){return{name:e.name,value:t.replace(Ia,"\r\n")}}):{name:e.name,value:a.replace(Ia,"\r\n")}}).get()}}),J.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var Ma=0,ka={},Da={0:200,1223:204},Ca=J.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in ka)ka[t]()}),X.cors=!!Ca&&"withCredentials"in Ca,X.ajax=Ca=!!Ca,J.ajaxTransport(function(t){var e;return X.cors||Ca&&!t.crossDomain?{send:function(a,n){var s,i=t.xhr(),r=++Ma;if(i.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)i[s]=t.xhrFields[s];t.mimeType&&i.overrideMimeType&&i.overrideMimeType(t.mimeType),t.crossDomain||a["X-Requested-With"]||(a["X-Requested-With"]="XMLHttpRequest");for(s in a)i.setRequestHeader(s,a[s]);e=function(t){return function(){e&&(delete ka[r],e=i.onload=i.onerror=null,"abort"===t?i.abort():"error"===t?n(i.status,i.statusText):n(Da[i.status]||i.status,i.statusText,"string"==typeof i.responseText?{text:i.responseText}:void 0,i.getAllResponseHeaders()))}},i.onload=e(),i.onerror=e("error"),e=ka[r]=e("abort");try{i.send(t.hasContent&&t.data||null)}catch(o){if(e)throw o}},abort:function(){e&&e()}}:void 0}),J.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return J.globalEval(t),t}}}),J.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),J.ajaxTransport("script",function(t){if(t.crossDomain){var e,a;return{send:function(n,s){e=J("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",a=function(t){e.remove(),a=null,t&&s("error"===t.type?404:200,t.type)}),Q.head.appendChild(e[0])},abort:function(){a&&a()}}}});var Pa=[],$a=/(=)\?(?=&|$)|\?\?/;J.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Pa.pop()||J.expando+"_"+ca++;return this[t]=!0,t}}),J.ajaxPrefilter("json jsonp",function(e,a,n){var s,i,r,o=e.jsonp!==!1&&($a.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&$a.test(e.data)&&"data");return o||"jsonp"===e.dataTypes[0]?(s=e.jsonpCallback=J.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,o?e[o]=e[o].replace($a,"$1"+s):e.jsonp!==!1&&(e.url+=(da.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return r||J.error(s+" was not called"),r[0]},e.dataTypes[0]="json",i=t[s],t[s]=function(){r=arguments},n.always(function(){t[s]=i,e[s]&&(e.jsonpCallback=a.jsonpCallback,Pa.push(s)),r&&J.isFunction(i)&&i(r[0]),r=i=void 0}),"script"):void 0}),J.parseHTML=function(t,e,a){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(a=e,e=!1),e=e||Q;var n=re.exec(t),s=!a&&[];return n?[e.createElement(n[1])]:(n=J.buildFragment([t],e,s),s&&s.length&&J(s).remove(),J.merge([],n.childNodes))};var Oa=J.fn.load;J.fn.load=function(t,e,a){if("string"!=typeof t&&Oa)return Oa.apply(this,arguments);var n,s,i,r=this,o=t.indexOf(" ");return o>=0&&(n=J.trim(t.slice(o)),t=t.slice(0,o)),J.isFunction(e)?(a=e,e=void 0):e&&"object"==typeof e&&(s="POST"),r.length>0&&J.ajax({url:t,type:s,dataType:"html",data:e}).done(function(t){i=arguments,r.html(n?J("<div>").append(J.parseHTML(t)).find(n):t)}).complete(a&&function(t,e){r.each(a,i||[t.responseText,e,t])}),this},J.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){J.fn[e]=function(t){return this.on(e,t)}}),J.expr.filters.animated=function(t){return J.grep(J.timers,function(e){return t===e.elem}).length};var Ra=t.document.documentElement;J.offset={setOffset:function(t,e,a){var n,s,i,r,o,l,c,d=J.css(t,"position"),u=J(t),p={};"static"===d&&(t.style.position="relative"),o=u.offset(),i=J.css(t,"top"),l=J.css(t,"left"),c=("absolute"===d||"fixed"===d)&&(i+l).indexOf("auto")>-1,c?(n=u.position(),r=n.top,s=n.left):(r=parseFloat(i)||0,s=parseFloat(l)||0),J.isFunction(e)&&(e=e.call(t,a,o)),null!=e.top&&(p.top=e.top-o.top+r),null!=e.left&&(p.left=e.left-o.left+s),"using"in e?e.using.call(t,p):u.css(p)}},J.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){J.offset.setOffset(this,t,e)});var e,a,n=this[0],s={top:0,left:0},i=n&&n.ownerDocument;return i?(e=i.documentElement,J.contains(e,n)?(typeof n.getBoundingClientRect!==Ie&&(s=n.getBoundingClientRect()),a=z(i),{top:s.top+a.pageYOffset-e.clientTop,left:s.left+a.pageXOffset-e.clientLeft}):s):void 0},position:function(){if(this[0]){var t,e,a=this[0],n={top:0,left:0};return"fixed"===J.css(a,"position")?e=a.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),J.nodeName(t[0],"html")||(n=t.offset()),n.top+=J.css(t[0],"borderTopWidth",!0),n.left+=J.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-J.css(a,"marginTop",!0),left:e.left-n.left-J.css(a,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Ra;t&&!J.nodeName(t,"html")&&"static"===J.css(t,"position");)t=t.offsetParent;return t||Ra})}}),J.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,a){var n="pageYOffset"===a;J.fn[e]=function(s){return _e(this,function(e,s,i){var r=z(e);return void 0===i?r?r[a]:e[s]:void(r?r.scrollTo(n?t.pageXOffset:i,n?i:t.pageYOffset):e[s]=i)},e,s,arguments.length,null)}}),J.each(["top","left"],function(t,e){J.cssHooks[e]=T(X.pixelPosition,function(t,a){return a?(a=w(t,e),Ve.test(a)?J(t).position()[e]+"px":a):void 0})}),J.each({Height:"height",Width:"width"},function(t,e){J.each({padding:"inner"+t,content:e,"":"outer"+t},function(a,n){J.fn[n]=function(n,s){var i=arguments.length&&(a||"boolean"!=typeof n),r=a||(n===!0||s===!0?"margin":"border");return _e(this,function(e,a,n){var s;return J.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===n?J.css(e,a,r):J.style(e,a,n,r)},e,i?n:void 0,i,null)}})}),J.fn.size=function(){return this.length},J.fn.andSelf=J.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return J});var La=t.jQuery,Na=t.$;return J.noConflict=function(e){return t.$===J&&(t.$=Na),e&&t.jQuery===J&&(t.jQuery=La),J},typeof e===Ie&&(t.jQuery=t.$=J),J}),define("tabs/dashboard-tab/tabId",["require"],function(){return"dashboard-tab"}),define("tabs/settings-tab/tabId",["require"],function(){return"settings-tab"}),define("tabs/provision-tab/tabId",["require"],function(){return"provision-tab"}),window.Modernizr=function(t,e,a){function n(t){g.cssText=t}function s(t,e){return n(E.join(t+";")+(e||""))}function i(t,e){return typeof t===e}function r(t,e){return!!~(""+t).indexOf(e)}function o(t,e){for(var n in t){var s=t[n];if(!r(s,"-")&&g[s]!==a)return"pfx"==e?s:!0}return!1}function l(t,e,n){for(var s in t){var r=e[t[s]];if(r!==a)return n===!1?t[s]:i(r,"function")?r.bind(n||e):r}return!1}function c(t,e,a){var n=t.charAt(0).toUpperCase()+t.slice(1),s=(t+" "+I.join(n+" ")+n).split(" ");return i(e,"string")||i(e,"undefined")?o(s,e):(s=(t+" "+x.join(n+" ")+n).split(" "),l(s,e,a))}function d(){f.input=function(a){for(var n=0,s=a.length;s>n;n++)D[a[n]]=!!(a[n]in y);return D.list&&(D.list=!(!e.createElement("datalist")||!t.HTMLDataListElement)),D}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),f.inputtypes=function(t){for(var n,s,i,r=0,o=t.length;o>r;r++)y.setAttribute("type",s=t[r]),n="text"!==y.type,n&&(y.value=w,y.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(s)&&y.style.WebkitAppearance!==a?(_.appendChild(y),i=e.defaultView,n=i.getComputedStyle&&"textfield"!==i.getComputedStyle(y,null).WebkitAppearance&&0!==y.offsetHeight,_.removeChild(y)):/^(search|tel)$/.test(s)||(n=/^(url|email)$/.test(s)?y.checkValidity&&y.checkValidity()===!1:y.value!=w)),k[t[r]]=!!n;return k}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var u,p,h="2.8.3",f={},m=!0,_=e.documentElement,b="modernizr",v=e.createElement(b),g=v.style,y=e.createElement("input"),w=":)",T={}.toString,E=" -webkit- -moz- -o- -ms- ".split(" "),S="Webkit Moz O ms",I=S.split(" "),x=S.toLowerCase().split(" "),A={svg:"http://www.w3.org/2000/svg"},M={},k={},D={},C=[],P=C.slice,$=function(t,a,n,s){var i,r,o,l,c=e.createElement("div"),d=e.body,u=d||e.createElement("body");if(parseInt(n,10))for(;n--;)o=e.createElement("div"),o.id=s?s[n]:b+(n+1),c.appendChild(o);return i=["&#173;",'<style id="s',b,'">',t,"</style>"].join(""),c.id=b,(d?c:u).innerHTML+=i,u.appendChild(c),d||(u.style.background="",u.style.overflow="hidden",l=_.style.overflow,_.style.overflow="hidden",_.appendChild(u)),r=a(c,t),d?c.parentNode.removeChild(c):(u.parentNode.removeChild(u),_.style.overflow=l),!!r},O=function(e){var a=t.matchMedia||t.msMatchMedia;if(a)return a(e)&&a(e).matches||!1;var n;return $("@media "+e+" { #"+b+" { position: absolute; } }",function(e){n="absolute"==(t.getComputedStyle?getComputedStyle(e,null):e.currentStyle).position}),n},R=function(){function t(t,s){s=s||e.createElement(n[t]||"div"),t="on"+t;var r=t in s;return r||(s.setAttribute||(s=e.createElement("div")),s.setAttribute&&s.removeAttribute&&(s.setAttribute(t,""),r=i(s[t],"function"),i(s[t],"undefined")||(s[t]=a),s.removeAttribute(t))),s=null,r}var n={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t}(),L={}.hasOwnProperty;p=i(L,"undefined")||i(L.call,"undefined")?function(t,e){return e in t&&i(t.constructor.prototype[e],"undefined")}:function(t,e){return L.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var a=P.call(arguments,1),n=function(){if(this instanceof n){var s=function(){};s.prototype=e.prototype;var i=new s,r=e.apply(i,a.concat(P.call(arguments)));return Object(r)===r?r:i}return e.apply(t,a.concat(P.call(arguments)))};return n}),M.flexbox=function(){return c("flexWrap")},M.flexboxlegacy=function(){return c("boxDirection")},M.canvas=function(){var t=e.createElement("canvas");return!(!t.getContext||!t.getContext("2d"))},M.canvastext=function(){return!(!f.canvas||!i(e.createElement("canvas").getContext("2d").fillText,"function"))},M.webgl=function(){return!!t.WebGLRenderingContext},M.touch=function(){var a;return"ontouchstart"in t||t.DocumentTouch&&e instanceof DocumentTouch?a=!0:$(["@media (",E.join("touch-enabled),("),b,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(t){a=9===t.offsetTop}),a},M.geolocation=function(){return"geolocation"in navigator},M.postmessage=function(){return!!t.postMessage},M.websqldatabase=function(){return!!t.openDatabase},M.indexedDB=function(){return!!c("indexedDB",t)},M.hashchange=function(){return R("hashchange",t)&&(e.documentMode===a||e.documentMode>7)},M.history=function(){return!(!t.history||!history.pushState)},M.draganddrop=function(){var t=e.createElement("div");return"draggable"in t||"ondragstart"in t&&"ondrop"in t},M.websockets=function(){return"WebSocket"in t||"MozWebSocket"in t},M.rgba=function(){return n("background-color:rgba(150,255,150,.5)"),r(g.backgroundColor,"rgba")},M.hsla=function(){return n("background-color:hsla(120,40%,100%,.5)"),r(g.backgroundColor,"rgba")||r(g.backgroundColor,"hsla")},M.multiplebgs=function(){return n("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(g.background)},M.backgroundsize=function(){return c("backgroundSize")},M.borderimage=function(){return c("borderImage")},M.borderradius=function(){return c("borderRadius")},M.boxshadow=function(){return c("boxShadow")},M.textshadow=function(){return""===e.createElement("div").style.textShadow},M.opacity=function(){return s("opacity:.55"),/^0.55$/.test(g.opacity)},M.cssanimations=function(){return c("animationName")},M.csscolumns=function(){return c("columnCount")},M.cssgradients=function(){var t="background-image:",e="gradient(linear,left top,right bottom,from(#9f9),to(white));",a="linear-gradient(left top,#9f9, white);";return n((t+"-webkit- ".split(" ").join(e+t)+E.join(a+t)).slice(0,-t.length)),r(g.backgroundImage,"gradient")},M.cssreflections=function(){return c("boxReflect")},M.csstransforms=function(){return!!c("transform")},M.csstransforms3d=function(){var t=!!c("perspective");return t&&"webkitPerspective"in _.style&&$("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(e){t=9===e.offsetLeft&&3===e.offsetHeight}),t},M.csstransitions=function(){return c("transition")},M.fontface=function(){var t;return $('@font-face {font-family:"font";src:url("https://")}',function(a,n){var s=e.getElementById("smodernizr"),i=s.sheet||s.styleSheet,r=i?i.cssRules&&i.cssRules[0]?i.cssRules[0].cssText:i.cssText||"":"";t=/src/i.test(r)&&0===r.indexOf(n.split(" ")[0])}),t},M.generatedcontent=function(){var t;return $(["#",b,"{font:0/0 a}#",b,':after{content:"',w,'";visibility:hidden;font:3px/1 a}'].join(""),function(e){t=e.offsetHeight>=3}),t},M.video=function(){var t=e.createElement("video"),a=!1;try{(a=!!t.canPlayType)&&(a=new Boolean(a),a.ogg=t.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),a.h264=t.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),a.webm=t.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(n){}return a},M.audio=function(){var t=e.createElement("audio"),a=!1;try{(a=!!t.canPlayType)&&(a=new Boolean(a),a.ogg=t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),a.mp3=t.canPlayType("audio/mpeg;").replace(/^no$/,""),a.wav=t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),a.m4a=(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(n){}return a},M.localstorage=function(){try{return localStorage.setItem(b,b),localStorage.removeItem(b),!0}catch(t){return!1}},M.sessionstorage=function(){try{return sessionStorage.setItem(b,b),sessionStorage.removeItem(b),!0}catch(t){return!1}},M.webworkers=function(){return!!t.Worker},M.applicationcache=function(){return!!t.applicationCache},M.svg=function(){return!!e.createElementNS&&!!e.createElementNS(A.svg,"svg").createSVGRect},M.inlinesvg=function(){var t=e.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==A.svg},M.smil=function(){return!!e.createElementNS&&/SVGAnimate/.test(T.call(e.createElementNS(A.svg,"animate")))},M.svgclippaths=function(){return!!e.createElementNS&&/SVGClipPath/.test(T.call(e.createElementNS(A.svg,"clipPath")))};for(var N in M)p(M,N)&&(u=N.toLowerCase(),f[u]=M[N](),C.push((f[u]?"":"no-")+u));return f.input||d(),f.addTest=function(t,e){if("object"==typeof t)for(var n in t)p(t,n)&&f.addTest(n,t[n]);else{if(t=t.toLowerCase(),f[t]!==a)return f;e="function"==typeof e?e():e,"undefined"!=typeof m&&m&&(_.className+=" "+(e?"":"no-")+t),f[t]=e}return f},n(""),v=y=null,function(t,e){function a(t,e){var a=t.createElement("p"),n=t.getElementsByTagName("head")[0]||t.documentElement;return a.innerHTML="x<style>"+e+"</style>",n.insertBefore(a.lastChild,n.firstChild)}function n(){var t=v.elements;return"string"==typeof t?t.split(" "):t}function s(t){var e=b[t[m]];return e||(e={},_++,t[m]=_,b[_]=e),e}function i(t,a,n){if(a||(a=e),d)return a.createElement(t);n||(n=s(a));var i;return i=n.cache[t]?n.cache[t].cloneNode():f.test(t)?(n.cache[t]=n.createElem(t)).cloneNode():n.createElem(t),!i.canHaveChildren||h.test(t)||i.tagUrn?i:n.frag.appendChild(i)}function r(t,a){if(t||(t=e),d)return t.createDocumentFragment();a=a||s(t);for(var i=a.frag.cloneNode(),r=0,o=n(),l=o.length;l>r;r++)i.createElement(o[r]);return i}function o(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(a){return v.shivMethods?i(a,t,e):e.createElem(a)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+n().join().replace(/[\w\-]+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(v,e.frag)}function l(t){t||(t=e);var n=s(t);return!v.shivCSS||c||n.hasCSS||(n.hasCSS=!!a(t,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),d||o(t,n),t}var c,d,u="3.7.0",p=t.html5||{},h=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,m="_html5shiv",_=0,b={};!function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",c="hidden"in t,d=1==t.childNodes.length||function(){e.createElement("a");var t=e.createDocumentFragment();return"undefined"==typeof t.cloneNode||"undefined"==typeof t.createDocumentFragment||"undefined"==typeof t.createElement}()}catch(a){c=!0,d=!0}}();var v={elements:p.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:u,shivCSS:p.shivCSS!==!1,supportsUnknownElements:d,shivMethods:p.shivMethods!==!1,type:"default",shivDocument:l,createElement:i,createDocumentFragment:r};t.html5=v,l(e)}(this,e),f._version=h,f._prefixes=E,f._domPrefixes=x,f._cssomPrefixes=I,f.mq=O,f.hasEvent=R,f.testProp=function(t){return o([t])},f.testAllProps=c,f.testStyles=$,f.prefixed=function(t,e,a){return e?c(t,e,a):c(t,"pfx")},_.className=_.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(m?" js "+C.join(" "):""),f}(this,this.document),define("modernizr",function(t){return function(){var e;return e||t.Modernizr}}(this)),function(t,e,a,n){"use strict";function s(t){return("string"==typeof t||t instanceof String)&&(t=t.replace(/^['\\/"]+|(;\s?})+|['\\/"]+$/g,"")),t}var i=function(e){for(var a=e.length,n=t("head");a--;)0===n.has("."+e[a]).length&&n.append('<meta class="'+e[a]+'" />')};i(["foundation-mq-small","foundation-mq-small-only","foundation-mq-medium","foundation-mq-medium-only","foundation-mq-large","foundation-mq-large-only","foundation-mq-xlarge","foundation-mq-xlarge-only","foundation-mq-xxlarge","foundation-data-attribute-namespace"]),t(function(){"undefined"!=typeof FastClick&&"undefined"!=typeof a.body&&FastClick.attach(a.body)});var r=function(e,n){if("string"==typeof e){if(n){var s;if(n.jquery){if(s=n[0],!s)return n}else s=n;return t(s.querySelectorAll(e))}return t(a.querySelectorAll(e))}return t(e,n)},o=function(t){var e=[];return t||e.push("data"),this.namespace.length>0&&e.push(this.namespace),e.push(this.name),e.join("-")},l=function(t){for(var e=t.split("-"),a=e.length,n=[];a--;)0!==a?n.push(e[a]):this.namespace.length>0?n.push(this.namespace,e[a]):n.push(e[a]);return n.reverse().join("-")},c=function(e,a){var n=this,s=function(){var s=r(this),i=!s.data(n.attr_name(!0)+"-init");s.data(n.attr_name(!0)+"-init",t.extend({},n.settings,a||e,n.data_options(s))),i&&n.events(this)};return r(this.scope).is("["+this.attr_name()+"]")?s.call(this.scope):r("["+this.attr_name()+"]",this.scope).each(s),"string"==typeof e?this[e].call(this,a):void 0},d=function(t,e){function a(){e(t[0])}function n(){if(this.one("load",a),/MSIE (\d+\.\d+);/.test(navigator.userAgent)){var t=this.attr("src"),e=t.match(/\?/)?"&":"?";e+="random="+(new Date).getTime(),this.attr("src",t+e)}}return t.attr("src")?void(t[0].complete||4===t[0].readyState?a():n.call(t)):void a()};e.matchMedia=e.matchMedia||function(t){var e,a=t.documentElement,n=a.firstElementChild||a.firstChild,s=t.createElement("body"),i=t.createElement("div");return i.id="mq-test-1",i.style.cssText="position:absolute;top:-100em",s.style.background="none",s.appendChild(i),function(t){return i.innerHTML='&shy;<style media="'+t+'"> #mq-test-1 { width: 42px; }</style>',a.insertBefore(s,n),e=42===i.offsetWidth,a.removeChild(s),{matches:e,media:t}}}(a),function(t){function a(){n&&(r(a),l&&t.fx.tick())}for(var n,s=0,i=["webkit","moz"],r=e.requestAnimationFrame,o=e.cancelAnimationFrame,l="undefined"!=typeof t.fx;s<i.length&&!r;s++)r=e[i[s]+"RequestAnimationFrame"],o=o||e[i[s]+"CancelAnimationFrame"]||e[i[s]+"CancelRequestAnimationFrame"];r?(e.requestAnimationFrame=r,e.cancelAnimationFrame=o,l&&(t.fx.timer=function(e){e()&&t.timers.push(e)&&!n&&(n=!0,a())},t.fx.stop=function(){n=!1})):(e.requestAnimationFrame=function(t){var a=(new Date).getTime(),n=Math.max(0,16-(a-s)),i=e.setTimeout(function(){t(a+n)},n);return s=a+n,i},e.cancelAnimationFrame=function(t){clearTimeout(t)})}(t),e.Foundation={name:"Foundation",version:"5.5.1",media_queries:{small:r(".foundation-mq-small").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"small-only":r(".foundation-mq-small-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),medium:r(".foundation-mq-medium").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"medium-only":r(".foundation-mq-medium-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),large:r(".foundation-mq-large").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"large-only":r(".foundation-mq-large-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xlarge:r(".foundation-mq-xlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),"xlarge-only":r(".foundation-mq-xlarge-only").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,""),xxlarge:r(".foundation-mq-xxlarge").css("font-family").replace(/^[\/\\'"]+|(;\s?})+|[\/\\'"]+$/g,"")},stylesheet:t("<style></style>").appendTo("head")[0].sheet,global:{namespace:n},init:function(t,a,n,s,i){var o=[t,n,s,i],l=[];if(this.rtl=/rtl/i.test(r("html").attr("dir")),this.scope=t||this.scope,this.set_namespace(),a&&"string"==typeof a&&!/reflow/i.test(a))this.libs.hasOwnProperty(a)&&l.push(this.init_lib(a,o));else for(var c in this.libs)l.push(this.init_lib(c,a));return r(e).load(function(){r(e).trigger("resize.fndtn.clearing").trigger("resize.fndtn.dropdown").trigger("resize.fndtn.equalizer").trigger("resize.fndtn.interchange").trigger("resize.fndtn.joyride").trigger("resize.fndtn.magellan").trigger("resize.fndtn.topbar").trigger("resize.fndtn.slider")}),t},init_lib:function(e,a){return this.libs.hasOwnProperty(e)?(this.patch(this.libs[e]),a&&a.hasOwnProperty(e)?("undefined"!=typeof this.libs[e].settings?t.extend(!0,this.libs[e].settings,a[e]):"undefined"!=typeof this.libs[e].defaults&&t.extend(!0,this.libs[e].defaults,a[e]),this.libs[e].init.apply(this.libs[e],[this.scope,a[e]])):(a=a instanceof Array?a:new Array(a),this.libs[e].init.apply(this.libs[e],a))):function(){}},patch:function(t){t.scope=this.scope,t.namespace=this.global.namespace,t.rtl=this.rtl,t.data_options=this.utils.data_options,t.attr_name=o,t.add_namespace=l,t.bindings=c,t.S=this.utils.S},inherit:function(t,e){for(var a=e.split(" "),n=a.length;n--;)this.utils.hasOwnProperty(a[n])&&(t[a[n]]=this.utils[a[n]])},set_namespace:function(){var e=this.global.namespace===n?t(".foundation-data-attribute-namespace").css("font-family"):this.global.namespace;this.global.namespace=e===n||/false/i.test(e)?"":e},libs:{},utils:{S:r,throttle:function(t,e){var a=null;return function(){var n=this,s=arguments;null==a&&(a=setTimeout(function(){t.apply(n,s),a=null},e))}},debounce:function(t,e,a){var n,s;return function(){var i=this,r=arguments,o=function(){n=null,a||(s=t.apply(i,r))},l=a&&!n;return clearTimeout(n),n=setTimeout(o,e),l&&(s=t.apply(i,r)),s}},data_options:function(e,a){function n(t){return!isNaN(t-0)&&null!==t&&""!==t&&t!==!1&&t!==!0}function s(e){return"string"==typeof e?t.trim(e):e}a=a||"options";var i,r,o,l={},c=function(t){var e=Foundation.global.namespace;return t.data(e.length>0?e+"-"+a:a)},d=c(e);if("object"==typeof d)return d;for(o=(d||":").split(";"),i=o.length;i--;)r=o[i].split(":"),r=[r[0],r.slice(1).join(":")],/true/i.test(r[1])&&(r[1]=!0),/false/i.test(r[1])&&(r[1]=!1),n(r[1])&&(r[1]=-1===r[1].indexOf(".")?parseInt(r[1],10):parseFloat(r[1])),2===r.length&&r[0].length>0&&(l[s(r[0])]=s(r[1]));return l},register_media:function(e,a){Foundation.media_queries[e]===n&&(t("head").append('<meta class="'+a+'"/>'),Foundation.media_queries[e]=s(t("."+a).css("font-family")))},add_custom_rule:function(t,e){if(e===n&&Foundation.stylesheet)Foundation.stylesheet.insertRule(t,Foundation.stylesheet.cssRules.length);else{var a=Foundation.media_queries[e];a!==n&&Foundation.stylesheet.insertRule("@media "+Foundation.media_queries[e]+"{ "+t+" }")}},image_loaded:function(t,e){var a=this,n=t.length;0===n&&e(t),t.each(function(){d(a.S(this),function(){n-=1,0===n&&e(t)})})},random_str:function(){return this.fidx||(this.fidx=0),this.prefix=this.prefix||[this.name||"F",(+new Date).toString(36)].join("-"),this.prefix+(this.fidx++).toString(36)},match:function(t){return e.matchMedia(t).matches},is_small_up:function(){return this.match(Foundation.media_queries.small)},is_medium_up:function(){return this.match(Foundation.media_queries.medium)},is_large_up:function(){return this.match(Foundation.media_queries.large)},is_xlarge_up:function(){return this.match(Foundation.media_queries.xlarge)},is_xxlarge_up:function(){return this.match(Foundation.media_queries.xxlarge)},is_small_only:function(){return!(this.is_medium_up()||this.is_large_up()||this.is_xlarge_up()||this.is_xxlarge_up())},is_medium_only:function(){return this.is_medium_up()&&!this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_large_only:function(){return this.is_medium_up()&&this.is_large_up()&&!this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&!this.is_xxlarge_up()},is_xxlarge_only:function(){return this.is_medium_up()&&this.is_large_up()&&this.is_xlarge_up()&&this.is_xxlarge_up()}}},t.fn.foundation=function(){var t=Array.prototype.slice.call(arguments,0);return this.each(function(){return Foundation.init.apply(Foundation,[this].concat(t)),this})}}(jQuery,window,window.document),define("foundation.core",["jquery","modernizr"],function(t){return function(){var e;return e||t.Foundation}}(this)),function(t,e,a,n){"use strict";function s(t){var e=/fade/i.test(t),a=/pop/i.test(t);return{animate:e||a,pop:a,fade:e}}Foundation.libs.reveal={name:"reveal",version:"5.5.1",locked:!1,settings:{animation:"fadeAndPop",animation_speed:250,close_on_background_click:!0,close_on_esc:!0,dismiss_modal_class:"close-reveal-modal",multiple_opened:!1,bg_class:"reveal-modal-bg",root_element:"body",open:function(){},opened:function(){},close:function(){},closed:function(){},bg:t(".reveal-modal-bg"),css:{open:{opacity:0,visibility:"visible",display:"block"},close:{opacity:1,visibility:"hidden",display:"none"}}},init:function(e,a,n){t.extend(!0,this.settings,a,n),this.bindings(a,n)
},events:function(){var t=this,e=t.S;return e(this.scope).off(".reveal").on("click.fndtn.reveal","["+this.add_namespace("data-reveal-id")+"]:not([disabled])",function(a){if(a.preventDefault(),!t.locked){var n=e(this),s=n.data(t.data_attr("reveal-ajax"));if(t.locked=!0,"undefined"==typeof s)t.open.call(t,n);else{var i=s===!0?n.attr("href"):s;t.open.call(t,n,{url:i})}}}),e(a).on("click.fndtn.reveal",this.close_targets(),function(a){if(a.preventDefault(),!t.locked){var n=e("["+t.attr_name()+"].open").data(t.attr_name(!0)+"-init")||t.settings,s=e(a.target)[0]===e("."+n.bg_class)[0];if(s){if(!n.close_on_background_click)return;a.stopPropagation()}t.locked=!0,t.close.call(t,s?e("["+t.attr_name()+"].open"):e(this).closest("["+t.attr_name()+"]"))}}),e("["+t.attr_name()+"]",this.scope).length>0?e(this.scope).on("open.fndtn.reveal",this.settings.open).on("opened.fndtn.reveal",this.settings.opened).on("opened.fndtn.reveal",this.open_video).on("close.fndtn.reveal",this.settings.close).on("closed.fndtn.reveal",this.settings.closed).on("closed.fndtn.reveal",this.close_video):e(this.scope).on("open.fndtn.reveal","["+t.attr_name()+"]",this.settings.open).on("opened.fndtn.reveal","["+t.attr_name()+"]",this.settings.opened).on("opened.fndtn.reveal","["+t.attr_name()+"]",this.open_video).on("close.fndtn.reveal","["+t.attr_name()+"]",this.settings.close).on("closed.fndtn.reveal","["+t.attr_name()+"]",this.settings.closed).on("closed.fndtn.reveal","["+t.attr_name()+"]",this.close_video),!0},key_up_on:function(){var t=this;return t.S("body").off("keyup.fndtn.reveal").on("keyup.fndtn.reveal",function(e){var a=t.S("["+t.attr_name()+"].open"),n=a.data(t.attr_name(!0)+"-init")||t.settings;n&&27===e.which&&n.close_on_esc&&!t.locked&&t.close.call(t,a)}),!0},key_up_off:function(){return this.S("body").off("keyup.fndtn.reveal"),!0},open:function(a,n){var s,i=this;a?"undefined"!=typeof a.selector?s=i.S("#"+a.data(i.data_attr("reveal-id"))).first():(s=i.S(this.scope),n=a):s=i.S(this.scope);var r=s.data(i.attr_name(!0)+"-init");if(r=r||this.settings,s.hasClass("open")&&a.attr("data-reveal-id")==s.attr("id"))return i.close(s);if(!s.hasClass("open")){var o=i.S("["+i.attr_name()+"].open");if("undefined"==typeof s.data("css-top")&&s.data("css-top",parseInt(s.css("top"),10)).data("offset",this.cache_offset(s)),this.key_up_on(s),s.on("open.fndtn.reveal").trigger("open.fndtn.reveal"),o.length<1&&this.toggle_bg(s,!0),"string"==typeof n&&(n={url:n}),"undefined"!=typeof n&&n.url){var l="undefined"!=typeof n.success?n.success:null;t.extend(n,{success:function(e,a,n){if(t.isFunction(l)){var c=l(e,a,n);"string"==typeof c&&(e=c)}s.html(e),i.S(s).foundation("section","reflow"),i.S(s).children().foundation(),o.length>0&&(r.multiple_opened?this.to_back(o):this.hide(o,r.css.close)),i.show(s,r.css.open)}}),t.ajax(n)}else o.length>0&&(r.multiple_opened?this.to_back(o):this.hide(o,r.css.close)),this.show(s,r.css.open)}i.S(e).trigger("resize")},close:function(e){var e=e&&e.length?e:this.S(this.scope),a=this.S("["+this.attr_name()+"].open"),n=e.data(this.attr_name(!0)+"-init")||this.settings;a.length>0&&(this.locked=!0,this.key_up_off(e),e.trigger("close").trigger("close.fndtn.reveal"),(n.multiple_opened&&1===a.length||!n.multiple_opened||e.length>1)&&(this.toggle_bg(e,!1),this.to_front(e)),n.multiple_opened?(this.hide(e,n.css.close,n),this.to_front(t(t.makeArray(a).reverse()[1]))):this.hide(a,n.css.close,n))},close_targets:function(){var t="."+this.settings.dismiss_modal_class;return this.settings.close_on_background_click?t+", ."+this.settings.bg_class:t},toggle_bg:function(e,a){0===this.S("."+this.settings.bg_class).length&&(this.settings.bg=t("<div />",{"class":this.settings.bg_class}).appendTo("body").hide());var s=this.settings.bg.filter(":visible").length>0;a!=s&&((a==n?s:!a)?this.hide(this.settings.bg):this.show(this.settings.bg))},show:function(a,n){if(n){var i=a.data(this.attr_name(!0)+"-init")||this.settings,r=i.root_element;if(0===a.parent(r).length){var o=a.wrap('<div style="display: none;" />').parent();a.on("closed.fndtn.reveal.wrapped",function(){a.detach().appendTo(o),a.unwrap().unbind("closed.fndtn.reveal.wrapped")}),a.detach().appendTo(r)}var l=s(i.animation);if(l.animate||(this.locked=!1),l.pop){n.top=t(e).scrollTop()-a.data("offset")+"px";var c={top:t(e).scrollTop()+a.data("css-top")+"px",opacity:1};return setTimeout(function(){return a.css(n).animate(c,i.animation_speed,"linear",function(){this.locked=!1,a.trigger("opened").trigger("opened.fndtn.reveal")}.bind(this)).addClass("open")}.bind(this),i.animation_speed/2)}if(l.fade){n.top=t(e).scrollTop()+a.data("css-top")+"px";var c={opacity:1};return setTimeout(function(){return a.css(n).animate(c,i.animation_speed,"linear",function(){this.locked=!1,a.trigger("opened").trigger("opened.fndtn.reveal")}.bind(this)).addClass("open")}.bind(this),i.animation_speed/2)}return a.css(n).show().css({opacity:1}).addClass("open").trigger("opened").trigger("opened.fndtn.reveal")}var i=this.settings;return s(i.animation).fade?a.fadeIn(i.animation_speed/2):(this.locked=!1,a.show())},to_back:function(t){t.addClass("toback")},to_front:function(t){t.removeClass("toback")},hide:function(a,n){if(n){var i=a.data(this.attr_name(!0)+"-init");i=i||this.settings;var r=s(i.animation);if(r.animate||(this.locked=!1),r.pop){var o={top:-t(e).scrollTop()-a.data("offset")+"px",opacity:0};return setTimeout(function(){return a.animate(o,i.animation_speed,"linear",function(){this.locked=!1,a.css(n).trigger("closed").trigger("closed.fndtn.reveal")}.bind(this)).removeClass("open")}.bind(this),i.animation_speed/2)}if(r.fade){var o={opacity:0};return setTimeout(function(){return a.animate(o,i.animation_speed,"linear",function(){this.locked=!1,a.css(n).trigger("closed").trigger("closed.fndtn.reveal")}.bind(this)).removeClass("open")}.bind(this),i.animation_speed/2)}return a.hide().css(n).removeClass("open").trigger("closed").trigger("closed.fndtn.reveal")}var i=this.settings;return s(i.animation).fade?a.fadeOut(i.animation_speed/2):a.hide()},close_video:function(e){var a=t(".flex-video",e.target),n=t("iframe",a);n.length>0&&(n.attr("data-src",n[0].src),n.attr("src",n.attr("src")),a.hide())},open_video:function(e){var a=t(".flex-video",e.target),s=a.find("iframe");if(s.length>0){var i=s.attr("data-src");if("string"==typeof i)s[0].src=s.attr("data-src");else{var r=s[0].src;s[0].src=n,s[0].src=r}a.show()}},data_attr:function(t){return this.namespace.length>0?this.namespace+"-"+t:t},cache_offset:function(t){var e=t.show().height()+parseInt(t.css("top"),10);return t.hide(),e},off:function(){t(this.scope).off(".fndtn.reveal")},reflow:function(){}}}(jQuery,window,window.document),define("foundation.reveal",["foundation.core"],function(){}),function(t,e,a,n){"use strict";Foundation.libs.tab={name:"tab",version:"5.5.1",settings:{active_class:"active",callback:function(){},deep_linking:!1,scroll_to_content:!0,is_hover:!1},default_tab_hashes:[],init:function(t,a,n){var s=this,i=this.S;this.bindings(a,n),s.entry_location=e.location.href,this.handle_location_hash_change(),i("["+this.attr_name()+"] > .active > a",this.scope).each(function(){s.default_tab_hashes.push(this.hash)})},events:function(){var t=this,a=this.S,n=function(e){var n=a(this).closest("["+t.attr_name()+"]").data(t.attr_name(!0)+"-init");(!n.is_hover||Modernizr.touch)&&(e.preventDefault(),e.stopPropagation(),t.toggle_active_tab(a(this).parent()))};a(this.scope).off(".tab").on("focus.fndtn.tab","["+this.attr_name()+"] > * > a",n).on("click.fndtn.tab","["+this.attr_name()+"] > * > a",n).on("mouseenter.fndtn.tab","["+this.attr_name()+"] > * > a",function(){var e=a(this).closest("["+t.attr_name()+"]").data(t.attr_name(!0)+"-init");e.is_hover&&t.toggle_active_tab(a(this).parent())}),a(e).on("hashchange.fndtn.tab",function(e){e.preventDefault(),t.handle_location_hash_change()})},handle_location_hash_change:function(){var e=this,a=this.S;a("["+this.attr_name()+"]",this.scope).each(function(){var s=a(this).data(e.attr_name(!0)+"-init");if(s.deep_linking){var i;if(i=s.scroll_to_content?e.scope.location.hash:e.scope.location.hash.replace("fndtn-",""),""!=i){var r=a(i);if(r.hasClass("content")&&r.parent().hasClass("tabs-content"))e.toggle_active_tab(t("["+e.attr_name()+"] > * > a[href="+i+"]").parent());else{var o=r.closest(".content").attr("id");o!=n&&e.toggle_active_tab(t("["+e.attr_name()+"] > * > a[href=#"+o+"]").parent(),i)}}else for(var l=0;l<e.default_tab_hashes.length;l++)e.toggle_active_tab(t("["+e.attr_name()+"] > * > a[href="+e.default_tab_hashes[l]+"]").parent())}})},toggle_active_tab:function(s,i){var r=this,o=r.S,l=s.closest("["+this.attr_name()+"]"),c=s.find("a"),d=s.children("a").first(),u="#"+d.attr("href").split("#")[1],p=o(u),h=s.siblings(),f=l.data(this.attr_name(!0)+"-init"),m=function(e){var n,s=t(this),i=t(this).parents("li").prev().children('[role="tab"]'),r=t(this).parents("li").next().children('[role="tab"]');switch(e.keyCode){case 37:n=i;break;case 39:n=r;break;default:n=!1}n.length&&(s.attr({tabindex:"-1","aria-selected":null}),n.attr({tabindex:"0","aria-selected":!0}).focus()),t('[role="tabpanel"]').attr("aria-hidden","true"),t("#"+t(a.activeElement).attr("href").substring(1)).attr("aria-hidden",null)},_=function(t){var a=e.location.href===r.entry_location,n=f.scroll_to_content?r.default_tab_hashes[0]:a?e.location.hash:"fndtn-"+r.default_tab_hashes[0].replace("#","");a&&t===n||(e.location.hash=t)};o(this).data(this.data_attr("tab-content"))&&(u="#"+o(this).data(this.data_attr("tab-content")).split("#")[1],p=o(u)),f.deep_linking&&(f.scroll_to_content?(_(i||u),i==n||i==u?s.parent()[0].scrollIntoView():o(u)[0].scrollIntoView()):_(i!=n?"fndtn-"+i.replace("#",""):"fndtn-"+u.replace("#",""))),s.addClass(f.active_class).triggerHandler("opened"),c.attr({"aria-selected":"true",tabindex:0}),h.removeClass(f.active_class),h.find("a").attr({"aria-selected":"false",tabindex:-1}),p.siblings().removeClass(f.active_class).attr({"aria-hidden":"true",tabindex:-1}),p.addClass(f.active_class).attr("aria-hidden","false").removeAttr("tabindex"),f.callback(s),p.triggerHandler("toggled",[s]),l.triggerHandler("toggled",[p]),c.off("keydown").on("keydown",m)},data_attr:function(t){return this.namespace.length>0?this.namespace+"-"+t:t},off:function(){},reflow:function(){}}}(jQuery,window,window.document),define("foundation.tab",["foundation.core"],function(){}),function(t,e,a){"use strict";Foundation.libs.dropdown={name:"dropdown",version:"5.5.1",settings:{active_class:"open",disabled_class:"disabled",mega_class:"mega",align:"bottom",is_hover:!1,hover_timeout:150,opened:function(){},closed:function(){}},init:function(e,a,n){Foundation.inherit(this,"throttle"),t.extend(!0,this.settings,a,n),this.bindings(a,n)},events:function(){var n=this,s=n.S;s(this.scope).off(".dropdown").on("click.fndtn.dropdown","["+this.attr_name()+"]",function(e){var a=s(this).data(n.attr_name(!0)+"-init")||n.settings;(!a.is_hover||Modernizr.touch)&&(e.preventDefault(),s(this).parent("[data-reveal-id]")&&e.stopPropagation(),n.toggle(t(this)))}).on("mouseenter.fndtn.dropdown","["+this.attr_name()+"], ["+this.attr_name()+"-content]",function(t){var e,a,i=s(this);clearTimeout(n.timeout),i.data(n.data_attr())?(e=s("#"+i.data(n.data_attr())),a=i):(e=i,a=s("["+n.attr_name()+'="'+e.attr("id")+'"]'));var r=a.data(n.attr_name(!0)+"-init")||n.settings;s(t.currentTarget).data(n.data_attr())&&r.is_hover&&n.closeall.call(n),r.is_hover&&n.open.apply(n,[e,a])}).on("mouseleave.fndtn.dropdown","["+this.attr_name()+"], ["+this.attr_name()+"-content]",function(){var t,e=s(this);if(e.data(n.data_attr()))t=e.data(n.data_attr(!0)+"-init")||n.settings;else var a=s("["+n.attr_name()+'="'+s(this).attr("id")+'"]'),t=a.data(n.attr_name(!0)+"-init")||n.settings;n.timeout=setTimeout(function(){e.data(n.data_attr())?t.is_hover&&n.close.call(n,s("#"+e.data(n.data_attr()))):t.is_hover&&n.close.call(n,e)}.bind(this),t.hover_timeout)}).on("click.fndtn.dropdown",function(e){var i=s(e.target).closest("["+n.attr_name()+"-content]"),r=i.find("a");return r.length>0&&"false"!==i.attr("aria-autoclose")&&n.close.call(n,s("["+n.attr_name()+"-content]")),e.target!==a&&!t.contains(a.documentElement,e.target)||s(e.target).closest("["+n.attr_name()+"]").length>0?void 0:!s(e.target).data("revealId")&&i.length>0&&(s(e.target).is("["+n.attr_name()+"-content]")||t.contains(i.first()[0],e.target))?void e.stopPropagation():void n.close.call(n,s("["+n.attr_name()+"-content]"))}).on("opened.fndtn.dropdown","["+n.attr_name()+"-content]",function(){n.settings.opened.call(this)}).on("closed.fndtn.dropdown","["+n.attr_name()+"-content]",function(){n.settings.closed.call(this)}),s(e).off(".dropdown").on("resize.fndtn.dropdown",n.throttle(function(){n.resize.call(n)},50)),this.resize()},close:function(e){var a=this;e.each(function(){var n=t("["+a.attr_name()+"="+e[0].id+"]")||t("aria-controls="+e[0].id+"]");n.attr("aria-expanded","false"),a.S(this).hasClass(a.settings.active_class)&&(a.S(this).css(Foundation.rtl?"right":"left","-99999px").attr("aria-hidden","true").removeClass(a.settings.active_class).prev("["+a.attr_name()+"]").removeClass(a.settings.active_class).removeData("target"),a.S(this).trigger("closed").trigger("closed.fndtn.dropdown",[e]))}),e.removeClass("f-open-"+this.attr_name(!0))},closeall:function(){var e=this;t.each(e.S(".f-open-"+this.attr_name(!0)),function(){e.close.call(e,e.S(this))})},open:function(t,e){this.css(t.addClass(this.settings.active_class),e),t.prev("["+this.attr_name()+"]").addClass(this.settings.active_class),t.data("target",e.get(0)).trigger("opened").trigger("opened.fndtn.dropdown",[t,e]),t.attr("aria-hidden","false"),e.attr("aria-expanded","true"),t.focus(),t.addClass("f-open-"+this.attr_name(!0))},data_attr:function(){return this.namespace.length>0?this.namespace+"-"+this.name:this.name},toggle:function(t){if(!t.hasClass(this.settings.disabled_class)){var e=this.S("#"+t.data(this.data_attr()));0!==e.length&&(this.close.call(this,this.S("["+this.attr_name()+"-content]").not(e)),e.hasClass(this.settings.active_class)?(this.close.call(this,e),e.data("target")!==t.get(0)&&this.open.call(this,e,t)):this.open.call(this,e,t))}},resize:function(){var e=this.S("["+this.attr_name()+"-content].open"),a=t(e.data("target"));e.length&&a.length&&this.css(e,a)},css:function(t,e){var a=Math.max((e.width()-t.width())/2,8),n=e.data(this.attr_name(!0)+"-init")||this.settings;if(this.clear_idx(),this.small()){var s=this.dirs.bottom.call(t,e,n);t.attr("style","").removeClass("drop-left drop-right drop-top").css({position:"absolute",width:"95%","max-width":"none",top:s.top}),t.css(Foundation.rtl?"right":"left",a)}else this.style(t,e,n);return t},style:function(e,a,n){var s=t.extend({position:"absolute"},this.dirs[n.align].call(e,a,n));e.attr("style","").css(s)},dirs:{_base:function(t){var n=this.offsetParent(),s=n.offset(),i=t.offset();i.top-=s.top,i.left-=s.left,i.missRight=!1,i.missTop=!1,i.missLeft=!1,i.leftRightFlag=!1;var r;r=a.getElementsByClassName("row")[0]?a.getElementsByClassName("row")[0].clientWidth:e.outerWidth;var o=(e.outerWidth-r)/2,l=r;return this.hasClass("mega")||(t.offset().top<=this.outerHeight()&&(i.missTop=!0,l=e.outerWidth-o,i.leftRightFlag=!0),t.offset().left+this.outerWidth()>t.offset().left+o&&t.offset().left-o>this.outerWidth()&&(i.missRight=!0,i.missLeft=!1),t.offset().left-this.outerWidth()<=0&&(i.missLeft=!0,i.missRight=!1)),i},top:function(t,e){var a=Foundation.libs.dropdown,n=a.dirs._base.call(this,t);return this.addClass("drop-top"),1==n.missTop&&(n.top=n.top+t.outerHeight()+this.outerHeight(),this.removeClass("drop-top")),1==n.missRight&&(n.left=n.left-this.outerWidth()+t.outerWidth()),(t.outerWidth()<this.outerWidth()||a.small()||this.hasClass(e.mega_menu))&&a.adjust_pip(this,t,e,n),Foundation.rtl?{left:n.left-this.outerWidth()+t.outerWidth(),top:n.top-this.outerHeight()}:{left:n.left,top:n.top-this.outerHeight()}},bottom:function(t,e){var a=Foundation.libs.dropdown,n=a.dirs._base.call(this,t);return 1==n.missRight&&(n.left=n.left-this.outerWidth()+t.outerWidth()),(t.outerWidth()<this.outerWidth()||a.small()||this.hasClass(e.mega_menu))&&a.adjust_pip(this,t,e,n),a.rtl?{left:n.left-this.outerWidth()+t.outerWidth(),top:n.top+t.outerHeight()}:{left:n.left,top:n.top+t.outerHeight()}},left:function(t){var e=Foundation.libs.dropdown.dirs._base.call(this,t);return this.addClass("drop-left"),1==e.missLeft&&(e.left=e.left+this.outerWidth(),e.top=e.top+t.outerHeight(),this.removeClass("drop-left")),{left:e.left-this.outerWidth(),top:e.top}},right:function(t,e){var a=Foundation.libs.dropdown.dirs._base.call(this,t);this.addClass("drop-right"),1==a.missRight?(a.left=a.left-this.outerWidth(),a.top=a.top+t.outerHeight(),this.removeClass("drop-right")):a.triggeredRight=!0;var n=Foundation.libs.dropdown;return(t.outerWidth()<this.outerWidth()||n.small()||this.hasClass(e.mega_menu))&&n.adjust_pip(this,t,e,a),{left:a.left+t.outerWidth(),top:a.top}}},adjust_pip:function(t,e,a,n){var s=Foundation.stylesheet,i=8;t.hasClass(a.mega_class)?i=n.left+e.outerWidth()/2-8:this.small()&&(i+=n.left-8),this.rule_idx=s.cssRules.length;var r=".f-dropdown.open:before",o=".f-dropdown.open:after",l="left: "+i+"px;",c="left: "+(i-1)+"px;";1==n.missRight&&(i=t.outerWidth()-23,r=".f-dropdown.open:before",o=".f-dropdown.open:after",l="left: "+i+"px;",c="left: "+(i-1)+"px;"),1==n.triggeredRight&&(r=".f-dropdown.open:before",o=".f-dropdown.open:after",l="left:-12px;",c="left:-14px;"),s.insertRule?(s.insertRule([r,"{",l,"}"].join(" "),this.rule_idx),s.insertRule([o,"{",c,"}"].join(" "),this.rule_idx+1)):(s.addRule(r,l,this.rule_idx),s.addRule(o,c,this.rule_idx+1))},clear_idx:function(){var t=Foundation.stylesheet;"undefined"!=typeof this.rule_idx&&(t.deleteRule(this.rule_idx),t.deleteRule(this.rule_idx),delete this.rule_idx)},small:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},off:function(){this.S(this.scope).off(".fndtn.dropdown"),this.S("html, body").off(".fndtn.dropdown"),this.S(e).off(".fndtn.dropdown"),this.S("[data-dropdown-content]").off(".fndtn.dropdown")},reflow:function(){}}}(jQuery,window,window.document),define("foundation.dropdown",["foundation.core"],function(){}),define("sunstone-config",["require","jquery"],function(t){t("jquery");var e=$.extend(!0,{},config),a={isTabEnabled:function(t){var a=e.view.enabled_tabs[t];return a},isTabActionEnabled:function(t,a,n){var s=!1,i=e.view.tabs[t];return void 0!=i&&(s=n?i.panel_tabs_actions[n][a]:i.actions[a]),s},isTabPanelEnabled:function(t,a){if(e.view.tabs[t]){var n=e.view.tabs[t].panel_tabs[a];return n}return!1},isFeatureEnabled:function(t){return e.view.features&&e.view.features[t]?!0:!1},tabTableColumns:function(t){if(!e.view.tabs[t])return[];var a=e.view.tabs[t].table_columns;return a?a:[]},isTemplateCreationTabEnabled:function(t){if(e.view.tabs["templates-tab"]){var a=e.view.tabs["templates-tab"].template_creation_tabs[t];return a}return!1},dashboardWidgets:function(t){if(!e.view.tabs["dashboard-tab"])return[];var a=e.view.tabs["dashboard-tab"][t];return a?a:[]},tableOrder:function(){return e.user_config.table_order},provision:{dashboard:{isEnabled:function(t){if(e.view.tabs["provision-tab"]){var a=e.view.tabs["provision-tab"].dashboard[t];return a}return!1}},create_vm:{isEnabled:function(t){return e.view.tabs["provision-tab"]&&e.view.tabs["provision-tab"].create_vm?e.view.tabs["provision-tab"].create_vm[t]:!1}},logo:e.view.provision_logo||"images/one_small_logo.png"},autoRefresh:e.view.autorefresh,tableOrder:e.user_config.table_order,vncProxyPort:e.system_config.vnc_proxy_port,vncWSS:e.user_config.vnc_wss};return a}),define("utils/locale",["require"],function(){function t(t){var e;return(null==e||""==e)&&(e=t),e}var e='<option value="en_US">English (en_US)</option>    <option value="ca">Catalan (ca)</option>    <option value="cs_CZ">Czech (cs_CZ)</option>    <option value="nl_NL">Dutch (nl_NL)</option>    <option value="da">Danish (da)</option>    <option value="fr_FR">French (fr_FR)</option>    <option value="de">German (de)</option>    <option value="el_GR">Greek (el_GR)</option>    <option value="it_IT">Italian (it_IT)</option>    <option value="ja">Japanese (ja)</option>    <option value="lt_LT">Lithuanian (lt_LT)</option>    <option value="fa_IR">Persian (fa_IR)</option>    <option value="pl">Polish (pl)</option>    <option value="pt_BR">Portuguese (pt_BR)</option>    <option value="pt_PT">Portuguese (pt_PT)</option>    <option value="ru_RU">Russian (ru_RU)</option>    <option value="zh_CN">Simplified Chinese (zh_CN)</option>    <option value="sk_SK">Slovak (sk_SK)</option>    <option value="es_ES">Spanish (es_ES)</option>    <option value="zh_TW">Traditional Chinese (zh_TW)</option>',a=new Array(t("January"),t("February"),t("March"),t("April"),t("May"),t("June"),t("July"),t("August"),t("September"),t("October"),t("November"),t("December"));return{tr:t,months:a,language_options:e}}),!function(t){t.jGrowl=function(e,a){0===t("#jGrowl").length&&t('<div id="jGrowl"></div>').addClass(a&&a.position?a.position:t.jGrowl.defaults.position).appendTo(a&&a.appendTo?a.appendTo:t.jGrowl.defaults.appendTo),t("#jGrowl").jGrowl(e,a)},t.fn.jGrowl=function(e,a){if(void 0===a&&t.isPlainObject(e)&&(a=e,e=a.message),t.isFunction(this.each)){var n=arguments;return this.each(function(){void 0===t(this).data("jGrowl.instance")&&(t(this).data("jGrowl.instance",t.extend(new t.fn.jGrowl,{notifications:[],element:null,interval:null})),t(this).data("jGrowl.instance").startup(this)),t.isFunction(t(this).data("jGrowl.instance")[e])?t(this).data("jGrowl.instance")[e].apply(t(this).data("jGrowl.instance"),t.makeArray(n).slice(1)):t(this).data("jGrowl.instance").create(e,a)})}},t.extend(t.fn.jGrowl.prototype,{defaults:{pool:0,header:"",group:"",sticky:!1,position:"top-right",appendTo:"body",glue:"after",theme:"default",themeState:"highlight",corners:"10px",check:250,life:3e3,closeDuration:"normal",openDuration:"normal",easing:"swing",closer:!0,closeTemplate:"&times;",closerTemplate:"<div>[ close all ]</div>",log:function(){},beforeOpen:function(){},afterOpen:function(){},open:function(){},beforeClose:function(){},close:function(){},click:function(){},animateOpen:{opacity:"show"},animateClose:{opacity:"hide"}},notifications:[],element:null,interval:null,create:function(e,a){var n=t.extend({},this.defaults,a);"undefined"!=typeof n.speed&&(n.openDuration=n.speed,n.closeDuration=n.speed),this.notifications.push({message:e,options:n}),n.log.apply(this.element,[this.element,e,n])},render:function(e){var a=this,n=e.message,s=e.options;s.themeState=""===s.themeState?"":"ui-state-"+s.themeState;var i=t("<div/>").addClass("jGrowl-notification alert "+s.themeState+" ui-corner-all"+(void 0!==s.group&&""!==s.group?" "+s.group:"")).append(t("<button/>").addClass("jGrowl-close").html(s.closeTemplate)).append(t("<div/>").addClass("jGrowl-header").html(s.header)).append(t("<div/>").addClass("jGrowl-message").html(n)).data("jGrowl",s).addClass(s.theme).children(".jGrowl-close").bind("click.jGrowl",function(){return t(this).parent().trigger("jGrowl.beforeClose"),!1}).parent();t(i).bind("mouseover.jGrowl",function(){t(".jGrowl-notification",a.element).data("jGrowl.pause",!0)}).bind("mouseout.jGrowl",function(){t(".jGrowl-notification",a.element).data("jGrowl.pause",!1)}).bind("jGrowl.beforeOpen",function(){s.beforeOpen.apply(i,[i,n,s,a.element])!==!1&&t(this).trigger("jGrowl.open")}).bind("jGrowl.open",function(){s.open.apply(i,[i,n,s,a.element])!==!1&&("after"==s.glue?t(".jGrowl-notification:last",a.element).after(i):t(".jGrowl-notification:first",a.element).before(i),t(this).animate(s.animateOpen,s.openDuration,s.easing,function(){t.support.opacity===!1&&this.style.removeAttribute("filter"),null!==t(this).data("jGrowl")&&"undefined"!=typeof t(this).data("jGrowl")&&(t(this).data("jGrowl").created=new Date),t(this).trigger("jGrowl.afterOpen")}))}).bind("jGrowl.afterOpen",function(){s.afterOpen.apply(i,[i,n,s,a.element])}).bind("click",function(){s.click.apply(i,[i.message,s,a.element])}).bind("jGrowl.beforeClose",function(){s.beforeClose.apply(i,[i,n,s,a.element])!==!1&&t(this).trigger("jGrowl.close")}).bind("jGrowl.close",function(){t(this).data("jGrowl.pause",!0),t(this).animate(s.animateClose,s.closeDuration,s.easing,function(){t.isFunction(s.close)?s.close.apply(i,[i,n,s,a.element])!==!1&&t(this).remove():t(this).remove()})}).trigger("jGrowl.beforeOpen"),""!==s.corners&&void 0!==t.fn.corner&&t(i).corner(s.corners),t(".jGrowl-notification:parent",a.element).length>1&&0===t(".jGrowl-closer",a.element).length&&this.defaults.closer!==!1&&t(this.defaults.closerTemplate).addClass("jGrowl-closer "+this.defaults.themeState+" ui-corner-all").addClass(this.defaults.theme).appendTo(a.element).animate(this.defaults.animateOpen,this.defaults.speed,this.defaults.easing).bind("click.jGrowl",function(){t(this).siblings().trigger("jGrowl.beforeClose"),t.isFunction(a.defaults.closer)&&a.defaults.closer.apply(t(this).parent()[0],[t(this).parent()[0]])})},update:function(){t(this.element).find(".jGrowl-notification:parent").each(function(){void 0!==t(this).data("jGrowl")&&void 0!==t(this).data("jGrowl").created&&t(this).data("jGrowl").created.getTime()+parseInt(t(this).data("jGrowl").life,10)<(new Date).getTime()&&t(this).data("jGrowl").sticky!==!0&&(void 0===t(this).data("jGrowl.pause")||t(this).data("jGrowl.pause")!==!0)&&t(this).trigger("jGrowl.beforeClose")}),this.notifications.length>0&&(0===this.defaults.pool||t(this.element).find(".jGrowl-notification:parent").length<this.defaults.pool)&&this.render(this.notifications.shift()),t(this.element).find(".jGrowl-notification:parent").length<2&&t(this.element).find(".jGrowl-closer").animate(this.defaults.animateClose,this.defaults.speed,this.defaults.easing,function(){t(this).remove()})},startup:function(e){this.element=t(e).addClass("jGrowl").append('<div class="jGrowl-notification"></div>'),this.interval=setInterval(function(){t(e).data("jGrowl.instance").update()},parseInt(this.defaults.check,10))},shutdown:function(){t(this.element).removeClass("jGrowl").find(".jGrowl-notification").trigger("jGrowl.close").parent().empty(),clearInterval(this.interval)},close:function(){t(this.element).find(".jGrowl-notification").each(function(){t(this).trigger("jGrowl.beforeClose")})}}),t.jGrowl.defaults=t.fn.jGrowl.prototype.defaults}(jQuery),define("jgrowl",["jquery"],function(){}),define("utils/notifier",["require","jgrowl","utils/locale"],function(require){require("jgrowl");var Locale=require("utils/locale"),_notifySubmit=function(t,e,a){var n=t.replace(/OpenNebula\./,"").replace(/\./," "),s="";s+=!e||"object"==typeof e&&e.constructor!=Array?n:n+": "+e,a&&a.constructor!=Object&&(s+=" >> "+a),$.jGrowl(s,{theme:"jGrowl-notify-submit",position:"bottom-right"})},_notifyError=function(t){$.jGrowl(t,{theme:"jGrowl-notify-error",position:"bottom-right",sticky:!0})},_notifyMessage=function(t){$.jGrowl(t,{theme:"jGrowl-notify-submit",position:"bottom-right"})},_notifyCustom=function(t,e,a){e=(t?t:"")+e,$.jGrowl(e,{theme:"jGrowl-notify-submit",position:"bottom-right",sticky:a})},_onError=function(request,error_json,container){var method,action,object,id,reason,m,message=error_json.error.message;if("401"==error_json.error.http_status)return window.location.href="login",!1;if(!message)return _notifyError(Locale.tr("Cannot contact server: is it running and reachable?")),!1;if("404"==error_json.error.http_status)return _notifyError(message),!1;if(container)return container.show(),!1;if(message.match(/^Network is unreachable .+$/))return _notifyError(Locale.tr("Network is unreachable: is OpenNebula running?")),!1;var get_error=/^\[(\w+)\] Error getting ([\w ]+) \[(\d+)\]\.$/,auth_error=/^\[(\w+)\] User \[(\d+)\] not authorized to perform action on ([\w ]+).$/;if((m=message.match(get_error))?(method=m[1],action="Show",object=m[2],id=m[3]):(m=message.match(auth_error))&&(method=m[1],object=m[3],reason=Locale.tr("Unauthorized")),m){var rows,i,value;for(rows=["method","action","object","id","reason"],message="",i=0;i<rows.length;i++)key=rows[i],value=eval(key),value&&(message+='<tr><td class="key_error">'+key+"</td><td>"+value+"</td></tr>");message="<table>"+message+"</table>"}return _notifyError(message),!0};return{notifySubmit:_notifySubmit,notifyError:_notifyError,notifyMessage:_notifyMessage,notifyCustom:_notifyCustom,onError:_onError}}),define("utils/dialogs/confirm/dialogId",["require"],function(){return"confirmDialog"}),define("utils/dialogs/confirm-with-select/dialogId",["require"],function(){return"confirmWithSelectDialog"}),function(t,e){"function"==typeof define&&define.amd?define("hbs/handlebars",[],e):"object"==typeof exports?module.exports=e():t.Handlebars=t.Handlebars||e()}(this,function(){var t=function(){"use strict";function t(t){this.string=t}var e;return t.prototype.toString=function(){return""+this.string},e=t}(),e=function(t){"use strict";function e(t){return l[t]}function a(t){for(var e=1;e<arguments.length;e++)for(var a in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],a)&&(t[a]=arguments[e][a]);return t}function n(t){return t instanceof o?t.toString():null==t?"":t?(t=""+t,d.test(t)?t.replace(c,e):t):t+""}function s(t){return t||0===t?h(t)&&0===t.length?!0:!1:!0}function i(t,e){return(t?t+".":"")+e}var r={},o=t,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/[&<>"'`]/g,d=/[&<>"'`]/;r.extend=a;var u=Object.prototype.toString;r.toString=u;var p=function(t){return"function"==typeof t};p(/x/)&&(p=function(t){return"function"==typeof t&&"[object Function]"===u.call(t)});var p;r.isFunction=p;var h=Array.isArray||function(t){return t&&"object"==typeof t?"[object Array]"===u.call(t):!1};return r.isArray=h,r.escapeExpression=n,r.isEmpty=s,r.appendContextPath=i,r}(t),a=function(){"use strict";function t(t,e){var n;e&&e.firstLine&&(n=e.firstLine,t+=" - "+n+":"+e.firstColumn);for(var s=Error.prototype.constructor.call(this,t),i=0;i<a.length;i++)this[a[i]]=s[a[i]];n&&(this.lineNumber=n,this.column=e.firstColumn)}var e,a=["description","fileName","lineNumber","message","name","number","stack"];return t.prototype=new Error,e=t}(),n=function(t,e){"use strict";function a(t,e){this.helpers=t||{},this.partials=e||{},n(this)}function n(t){t.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new r("Missing helper: '"+arguments[arguments.length-1].name+"'")}),t.registerHelper("blockHelperMissing",function(e,a){var n=a.inverse,s=a.fn;if(e===!0)return s(this);if(e===!1||null==e)return n(this);if(d(e))return e.length>0?(a.ids&&(a.ids=[a.name]),t.helpers.each(e,a)):n(this);if(a.data&&a.ids){var r=_(a.data);r.contextPath=i.appendContextPath(a.data.contextPath,a.name),a={data:r}}return s(e,a)}),t.registerHelper("each",function(t,e){if(!e)throw new r("Must pass iterator to #each");var a,n,s=e.fn,o=e.inverse,l=0,c="";if(e.data&&e.ids&&(n=i.appendContextPath(e.data.contextPath,e.ids[0])+"."),u(t)&&(t=t.call(this)),e.data&&(a=_(e.data)),t&&"object"==typeof t)if(d(t))for(var p=t.length;p>l;l++)a&&(a.index=l,a.first=0===l,a.last=l===t.length-1,n&&(a.contextPath=n+l)),c+=s(t[l],{data:a});else for(var h in t)t.hasOwnProperty(h)&&(a&&(a.key=h,a.index=l,a.first=0===l,n&&(a.contextPath=n+h)),c+=s(t[h],{data:a}),l++);return 0===l&&(c=o(this)),c}),t.registerHelper("if",function(t,e){return u(t)&&(t=t.call(this)),!e.hash.includeZero&&!t||i.isEmpty(t)?e.inverse(this):e.fn(this)}),t.registerHelper("unless",function(e,a){return t.helpers["if"].call(this,e,{fn:a.inverse,inverse:a.fn,hash:a.hash})}),t.registerHelper("with",function(t,e){u(t)&&(t=t.call(this));var a=e.fn;if(i.isEmpty(t))return e.inverse(this);if(e.data&&e.ids){var n=_(e.data);n.contextPath=i.appendContextPath(e.data.contextPath,e.ids[0]),e={data:n}}return a(t,e)}),t.registerHelper("log",function(e,a){var n=a.data&&null!=a.data.level?parseInt(a.data.level,10):1;t.log(n,e)}),t.registerHelper("lookup",function(t,e){return t&&t[e]
})}var s={},i=t,r=e,o="2.0.0";s.VERSION=o;var l=6;s.COMPILER_REVISION=l;var c={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};s.REVISION_CHANGES=c;var d=i.isArray,u=i.isFunction,p=i.toString,h="[object Object]";s.HandlebarsEnvironment=a,a.prototype={constructor:a,logger:f,log:m,registerHelper:function(t,e){if(p.call(t)===h){if(e)throw new r("Arg not supported with multiple helpers");i.extend(this.helpers,t)}else this.helpers[t]=e},unregisterHelper:function(t){delete this.helpers[t]},registerPartial:function(t,e){p.call(t)===h?i.extend(this.partials,t):this.partials[t]=e},unregisterPartial:function(t){delete this.partials[t]}};var f={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(t,e){if(f.level<=t){var a=f.methodMap[t];"undefined"!=typeof console&&console[a]&&console[a].call(console,e)}}};s.logger=f;var m=f.log;s.log=m;var _=function(t){var e=i.extend({},t);return e._parent=t,e};return s.createFrame=_,s}(e,a),s=function(t,e,a){"use strict";function n(t){var e=t&&t[0]||1,a=p;if(e!==a){if(a>e){var n=h[a],s=h[e];throw new u("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+n+") or downgrade your runtime to an older version ("+s+").")}throw new u("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+t[1]+").")}}function s(t,e){if(!e)throw new u("No environment passed to template");if(!t||!t.main)throw new u("Unknown template object: "+typeof t);e.VM.checkRevision(t.compiler);var a=function(a,n,s,i,r,o,l,c,p){r&&(i=d.extend({},i,r));var h=e.VM.invokePartial.call(this,a,s,i,o,l,c,p);if(null==h&&e.compile){var f={helpers:o,partials:l,data:c,depths:p};l[s]=e.compile(a,{data:void 0!==c,compat:t.compat},e),h=l[s](i,f)}if(null!=h){if(n){for(var m=h.split("\n"),_=0,b=m.length;b>_&&(m[_]||_+1!==b);_++)m[_]=n+m[_];h=m.join("\n")}return h}throw new u("The partial "+s+" could not be compiled when running in runtime-only mode")},n={lookup:function(t,e){for(var a=t.length,n=0;a>n;n++)if(t[n]&&null!=t[n][e])return t[n][e]},lambda:function(t,e){return"function"==typeof t?t.call(e):t},escapeExpression:d.escapeExpression,invokePartial:a,fn:function(e){return t[e]},programs:[],program:function(t,e,a){var n=this.programs[t],s=this.fn(t);return e||a?n=i(this,t,s,e,a):n||(n=this.programs[t]=i(this,t,s)),n},data:function(t,e){for(;t&&e--;)t=t._parent;return t},merge:function(t,e){var a=t||e;return t&&e&&t!==e&&(a=d.extend({},e,t)),a},noop:e.VM.noop,compilerInfo:t.compiler},s=function(e,a){a=a||{};var i=a.data;s._setup(a),!a.partial&&t.useData&&(i=l(e,i));var r;return t.useDepths&&(r=a.depths?[e].concat(a.depths):[e]),t.main.call(n,e,n.helpers,n.partials,i,r)};return s.isTop=!0,s._setup=function(a){a.partial?(n.helpers=a.helpers,n.partials=a.partials):(n.helpers=n.merge(a.helpers,e.helpers),t.usePartial&&(n.partials=n.merge(a.partials,e.partials)))},s._child=function(e,a,s){if(t.useDepths&&!s)throw new u("must pass parent depths");return i(n,e,t[e],a,s)},s}function i(t,e,a,n,s){var i=function(e,i){return i=i||{},a.call(t,e,t.helpers,t.partials,i.data||n,s&&[e].concat(s))};return i.program=e,i.depth=s?s.length:0,i}function r(t,e,a,n,s,i,r){var o={partial:!0,helpers:n,partials:s,data:i,depths:r};if(void 0===t)throw new u("The partial "+e+" could not be found");return t instanceof Function?t(a,o):void 0}function o(){return""}function l(t,e){return e&&"root"in e||(e=e?f(e):{},e.root=t),e}var c={},d=t,u=e,p=a.COMPILER_REVISION,h=a.REVISION_CHANGES,f=a.createFrame;return c.checkRevision=n,c.template=s,c.program=i,c.invokePartial=r,c.noop=o,c}(e,a,n),i=function(t,e,a,n,s){"use strict";var i,r=t,o=e,l=a,c=n,d=s,u=function(){var t=new r.HandlebarsEnvironment;return c.extend(t,r),t.SafeString=o,t.Exception=l,t.Utils=c,t.escapeExpression=c.escapeExpression,t.VM=d,t.template=function(e){return d.template(e,t)},t},p=u();return p.create=u,p["default"]=p,i=p}(n,t,a,e,s),r=function(t){"use strict";function e(t){t=t||{},this.firstLine=t.first_line,this.firstColumn=t.first_column,this.lastColumn=t.last_column,this.lastLine=t.last_line}var a,n=t,s={ProgramNode:function(t,a,n){e.call(this,n),this.type="program",this.statements=t,this.strip=a},MustacheNode:function(t,a,n,i,r){if(e.call(this,r),this.type="mustache",this.strip=i,null!=n&&n.charAt){var o=n.charAt(3)||n.charAt(2);this.escaped="{"!==o&&"&"!==o}else this.escaped=!!n;this.sexpr=t instanceof s.SexprNode?t:new s.SexprNode(t,a),this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(t,a,n){e.call(this,n),this.type="sexpr",this.hash=a;var s=this.id=t[0],i=this.params=t.slice(1);this.isHelper=!(!i.length&&!a),this.eligibleHelper=this.isHelper||s.isSimple},PartialNode:function(t,a,n,s,i){e.call(this,i),this.type="partial",this.partialName=t,this.context=a,this.hash=n,this.strip=s,this.strip.inlineStandalone=!0},BlockNode:function(t,a,n,s,i){e.call(this,i),this.type="block",this.mustache=t,this.program=a,this.inverse=n,this.strip=s,n&&!a&&(this.isInverse=!0)},RawBlockNode:function(t,a,i,r){if(e.call(this,r),t.sexpr.id.original!==i)throw new n(t.sexpr.id.original+" doesn't match "+i,this);a=new s.ContentNode(a,r),this.type="block",this.mustache=t,this.program=new s.ProgramNode([a],{},r)},ContentNode:function(t,a){e.call(this,a),this.type="content",this.original=this.string=t},HashNode:function(t,a){e.call(this,a),this.type="hash",this.pairs=t},IdNode:function(t,a){e.call(this,a),this.type="ID";for(var s="",i=[],r=0,o="",l=0,c=t.length;c>l;l++){var d=t[l].part;if(s+=(t[l].separator||"")+d,".."===d||"."===d||"this"===d){if(i.length>0)throw new n("Invalid path: "+s,this);".."===d?(r++,o+="../"):this.isScoped=!0}else i.push(d)}this.original=s,this.parts=i,this.string=i.join("."),this.depth=r,this.idName=o+this.string,this.isSimple=1===t.length&&!this.isScoped&&0===r,this.stringModeValue=this.string},PartialNameNode:function(t,a){e.call(this,a),this.type="PARTIAL_NAME",this.name=t.original},DataNode:function(t,a){e.call(this,a),this.type="DATA",this.id=t,this.stringModeValue=t.stringModeValue,this.idName="@"+t.stringModeValue},StringNode:function(t,a){e.call(this,a),this.type="STRING",this.original=this.string=this.stringModeValue=t},NumberNode:function(t,a){e.call(this,a),this.type="NUMBER",this.original=this.number=t,this.stringModeValue=Number(t)},BooleanNode:function(t,a){e.call(this,a),this.type="BOOLEAN",this.bool=t,this.stringModeValue="true"===t},CommentNode:function(t,a){e.call(this,a),this.type="comment",this.comment=t,this.strip={inlineStandalone:!0}}};return a=s}(a),o=function(){"use strict";var t,e=function(){function t(){this.yy={}}var e={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,CONTENT:12,COMMENT:13,openRawBlock:14,END_RAW_BLOCK:15,OPEN_RAW_BLOCK:16,sexpr:17,CLOSE_RAW_BLOCK:18,openBlock:19,block_option0:20,closeBlock:21,openInverse:22,block_option1:23,OPEN_BLOCK:24,CLOSE:25,OPEN_INVERSE:26,inverseAndProgram:27,INVERSE:28,OPEN_ENDBLOCK:29,path:30,OPEN:31,OPEN_UNESCAPED:32,CLOSE_UNESCAPED:33,OPEN_PARTIAL:34,partialName:35,param:36,partial_option0:37,partial_option1:38,sexpr_repetition0:39,sexpr_option0:40,dataName:41,STRING:42,NUMBER:43,BOOLEAN:44,OPEN_SEXPR:45,CLOSE_SEXPR:46,hash:47,hash_repetition_plus0:48,hashSegment:49,ID:50,EQUALS:51,DATA:52,pathSegments:53,SEP:54,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",12:"CONTENT",13:"COMMENT",15:"END_RAW_BLOCK",16:"OPEN_RAW_BLOCK",18:"CLOSE_RAW_BLOCK",24:"OPEN_BLOCK",25:"CLOSE",26:"OPEN_INVERSE",28:"INVERSE",29:"OPEN_ENDBLOCK",31:"OPEN",32:"OPEN_UNESCAPED",33:"CLOSE_UNESCAPED",34:"OPEN_PARTIAL",42:"STRING",43:"NUMBER",44:"BOOLEAN",45:"OPEN_SEXPR",46:"CLOSE_SEXPR",50:"ID",51:"EQUALS",52:"DATA",54:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[10,3],[14,3],[9,4],[9,4],[19,3],[22,3],[27,2],[21,3],[8,3],[8,3],[11,5],[11,4],[17,3],[17,1],[36,1],[36,1],[36,1],[36,1],[36,1],[36,3],[47,1],[49,3],[35,1],[35,1],[35,1],[41,2],[30,1],[53,3],[53,1],[6,0],[6,2],[20,0],[20,1],[23,0],[23,1],[37,0],[37,1],[38,0],[38,1],[39,0],[39,2],[40,0],[40,1],[48,1],[48,2]],performAction:function(t,e,a,n,s,i){var r=i.length-1;switch(s){case 1:return n.prepareProgram(i[r-1].statements,!0),i[r-1];case 2:this.$=new n.ProgramNode(n.prepareProgram(i[r]),{},this._$);break;case 3:this.$=i[r];break;case 4:this.$=i[r];break;case 5:this.$=i[r];break;case 6:this.$=i[r];break;case 7:this.$=new n.ContentNode(i[r],this._$);break;case 8:this.$=new n.CommentNode(i[r],this._$);break;case 9:this.$=new n.RawBlockNode(i[r-2],i[r-1],i[r],this._$);break;case 10:this.$=new n.MustacheNode(i[r-1],null,"","",this._$);break;case 11:this.$=n.prepareBlock(i[r-3],i[r-2],i[r-1],i[r],!1,this._$);break;case 12:this.$=n.prepareBlock(i[r-3],i[r-2],i[r-1],i[r],!0,this._$);break;case 13:this.$=new n.MustacheNode(i[r-1],null,i[r-2],n.stripFlags(i[r-2],i[r]),this._$);break;case 14:this.$=new n.MustacheNode(i[r-1],null,i[r-2],n.stripFlags(i[r-2],i[r]),this._$);break;case 15:this.$={strip:n.stripFlags(i[r-1],i[r-1]),program:i[r]};break;case 16:this.$={path:i[r-1],strip:n.stripFlags(i[r-2],i[r])};break;case 17:this.$=new n.MustacheNode(i[r-1],null,i[r-2],n.stripFlags(i[r-2],i[r]),this._$);break;case 18:this.$=new n.MustacheNode(i[r-1],null,i[r-2],n.stripFlags(i[r-2],i[r]),this._$);break;case 19:this.$=new n.PartialNode(i[r-3],i[r-2],i[r-1],n.stripFlags(i[r-4],i[r]),this._$);break;case 20:this.$=new n.PartialNode(i[r-2],void 0,i[r-1],n.stripFlags(i[r-3],i[r]),this._$);break;case 21:this.$=new n.SexprNode([i[r-2]].concat(i[r-1]),i[r],this._$);break;case 22:this.$=new n.SexprNode([i[r]],null,this._$);break;case 23:this.$=i[r];break;case 24:this.$=new n.StringNode(i[r],this._$);break;case 25:this.$=new n.NumberNode(i[r],this._$);break;case 26:this.$=new n.BooleanNode(i[r],this._$);break;case 27:this.$=i[r];break;case 28:i[r-1].isHelper=!0,this.$=i[r-1];break;case 29:this.$=new n.HashNode(i[r],this._$);break;case 30:this.$=[i[r-2],i[r]];break;case 31:this.$=new n.PartialNameNode(i[r],this._$);break;case 32:this.$=new n.PartialNameNode(new n.StringNode(i[r],this._$),this._$);break;case 33:this.$=new n.PartialNameNode(new n.NumberNode(i[r],this._$));break;case 34:this.$=new n.DataNode(i[r],this._$);break;case 35:this.$=new n.IdNode(i[r],this._$);break;case 36:i[r-2].push({part:i[r],separator:i[r-1]}),this.$=i[r-2];break;case 37:this.$=[{part:i[r]}];break;case 38:this.$=[];break;case 39:i[r-1].push(i[r]);break;case 48:this.$=[];break;case 49:i[r-1].push(i[r]);break;case 52:this.$=[i[r]];break;case 53:i[r-1].push(i[r])}},table:[{3:1,4:2,5:[2,38],6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],31:[2,38],32:[2,38],34:[2,38]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:[1,10],13:[1,11],14:16,16:[1,20],19:14,22:15,24:[1,18],26:[1,19],28:[2,2],29:[2,2],31:[1,12],32:[1,13],34:[1,17]},{1:[2,1]},{5:[2,39],12:[2,39],13:[2,39],16:[2,39],24:[2,39],26:[2,39],28:[2,39],29:[2,39],31:[2,39],32:[2,39],34:[2,39]},{5:[2,3],12:[2,3],13:[2,3],16:[2,3],24:[2,3],26:[2,3],28:[2,3],29:[2,3],31:[2,3],32:[2,3],34:[2,3]},{5:[2,4],12:[2,4],13:[2,4],16:[2,4],24:[2,4],26:[2,4],28:[2,4],29:[2,4],31:[2,4],32:[2,4],34:[2,4]},{5:[2,5],12:[2,5],13:[2,5],16:[2,5],24:[2,5],26:[2,5],28:[2,5],29:[2,5],31:[2,5],32:[2,5],34:[2,5]},{5:[2,6],12:[2,6],13:[2,6],16:[2,6],24:[2,6],26:[2,6],28:[2,6],29:[2,6],31:[2,6],32:[2,6],34:[2,6]},{5:[2,7],12:[2,7],13:[2,7],16:[2,7],24:[2,7],26:[2,7],28:[2,7],29:[2,7],31:[2,7],32:[2,7],34:[2,7]},{5:[2,8],12:[2,8],13:[2,8],16:[2,8],24:[2,8],26:[2,8],28:[2,8],29:[2,8],31:[2,8],32:[2,8],34:[2,8]},{17:21,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:27,30:22,41:23,50:[1,26],52:[1,25],53:24},{4:28,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{4:29,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{12:[1,30]},{30:32,35:31,42:[1,33],43:[1,34],50:[1,26],53:24},{17:35,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:36,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:37,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[1,38]},{18:[2,48],25:[2,48],33:[2,48],39:39,42:[2,48],43:[2,48],44:[2,48],45:[2,48],46:[2,48],50:[2,48],52:[2,48]},{18:[2,22],25:[2,22],33:[2,22],46:[2,22]},{18:[2,35],25:[2,35],33:[2,35],42:[2,35],43:[2,35],44:[2,35],45:[2,35],46:[2,35],50:[2,35],52:[2,35],54:[1,40]},{30:41,50:[1,26],53:24},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],52:[2,37],54:[2,37]},{33:[1,42]},{20:43,27:44,28:[1,45],29:[2,40]},{23:46,27:47,28:[1,45],29:[2,42]},{15:[1,48]},{25:[2,46],30:51,36:49,38:50,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],47:57,48:58,49:60,50:[1,59],52:[1,25],53:24},{25:[2,31],42:[2,31],43:[2,31],44:[2,31],45:[2,31],50:[2,31],52:[2,31]},{25:[2,32],42:[2,32],43:[2,32],44:[2,32],45:[2,32],50:[2,32],52:[2,32]},{25:[2,33],42:[2,33],43:[2,33],44:[2,33],45:[2,33],50:[2,33],52:[2,33]},{25:[1,61]},{25:[1,62]},{18:[1,63]},{5:[2,17],12:[2,17],13:[2,17],16:[2,17],24:[2,17],26:[2,17],28:[2,17],29:[2,17],31:[2,17],32:[2,17],34:[2,17]},{18:[2,50],25:[2,50],30:51,33:[2,50],36:65,40:64,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],46:[2,50],47:66,48:58,49:60,50:[1,59],52:[1,25],53:24},{50:[1,67]},{18:[2,34],25:[2,34],33:[2,34],42:[2,34],43:[2,34],44:[2,34],45:[2,34],46:[2,34],50:[2,34],52:[2,34]},{5:[2,18],12:[2,18],13:[2,18],16:[2,18],24:[2,18],26:[2,18],28:[2,18],29:[2,18],31:[2,18],32:[2,18],34:[2,18]},{21:68,29:[1,69]},{29:[2,41]},{4:70,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{21:71,29:[1,69]},{29:[2,43]},{5:[2,9],12:[2,9],13:[2,9],16:[2,9],24:[2,9],26:[2,9],28:[2,9],29:[2,9],31:[2,9],32:[2,9],34:[2,9]},{25:[2,44],37:72,47:73,48:58,49:60,50:[1,74]},{25:[1,75]},{18:[2,23],25:[2,23],33:[2,23],42:[2,23],43:[2,23],44:[2,23],45:[2,23],46:[2,23],50:[2,23],52:[2,23]},{18:[2,24],25:[2,24],33:[2,24],42:[2,24],43:[2,24],44:[2,24],45:[2,24],46:[2,24],50:[2,24],52:[2,24]},{18:[2,25],25:[2,25],33:[2,25],42:[2,25],43:[2,25],44:[2,25],45:[2,25],46:[2,25],50:[2,25],52:[2,25]},{18:[2,26],25:[2,26],33:[2,26],42:[2,26],43:[2,26],44:[2,26],45:[2,26],46:[2,26],50:[2,26],52:[2,26]},{18:[2,27],25:[2,27],33:[2,27],42:[2,27],43:[2,27],44:[2,27],45:[2,27],46:[2,27],50:[2,27],52:[2,27]},{17:76,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[2,47]},{18:[2,29],25:[2,29],33:[2,29],46:[2,29],49:77,50:[1,74]},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],51:[1,78],52:[2,37],54:[2,37]},{18:[2,52],25:[2,52],33:[2,52],46:[2,52],50:[2,52]},{12:[2,13],13:[2,13],16:[2,13],24:[2,13],26:[2,13],28:[2,13],29:[2,13],31:[2,13],32:[2,13],34:[2,13]},{12:[2,14],13:[2,14],16:[2,14],24:[2,14],26:[2,14],28:[2,14],29:[2,14],31:[2,14],32:[2,14],34:[2,14]},{12:[2,10]},{18:[2,21],25:[2,21],33:[2,21],46:[2,21]},{18:[2,49],25:[2,49],33:[2,49],42:[2,49],43:[2,49],44:[2,49],45:[2,49],46:[2,49],50:[2,49],52:[2,49]},{18:[2,51],25:[2,51],33:[2,51],46:[2,51]},{18:[2,36],25:[2,36],33:[2,36],42:[2,36],43:[2,36],44:[2,36],45:[2,36],46:[2,36],50:[2,36],52:[2,36],54:[2,36]},{5:[2,11],12:[2,11],13:[2,11],16:[2,11],24:[2,11],26:[2,11],28:[2,11],29:[2,11],31:[2,11],32:[2,11],34:[2,11]},{30:79,50:[1,26],53:24},{29:[2,15]},{5:[2,12],12:[2,12],13:[2,12],16:[2,12],24:[2,12],26:[2,12],28:[2,12],29:[2,12],31:[2,12],32:[2,12],34:[2,12]},{25:[1,80]},{25:[2,45]},{51:[1,78]},{5:[2,20],12:[2,20],13:[2,20],16:[2,20],24:[2,20],26:[2,20],28:[2,20],29:[2,20],31:[2,20],32:[2,20],34:[2,20]},{46:[1,81]},{18:[2,53],25:[2,53],33:[2,53],46:[2,53],50:[2,53]},{30:51,36:82,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],50:[1,26],52:[1,25],53:24},{25:[1,83]},{5:[2,19],12:[2,19],13:[2,19],16:[2,19],24:[2,19],26:[2,19],28:[2,19],29:[2,19],31:[2,19],32:[2,19],34:[2,19]},{18:[2,28],25:[2,28],33:[2,28],42:[2,28],43:[2,28],44:[2,28],45:[2,28],46:[2,28],50:[2,28],52:[2,28]},{18:[2,30],25:[2,30],33:[2,30],46:[2,30],50:[2,30]},{5:[2,16],12:[2,16],13:[2,16],16:[2,16],24:[2,16],26:[2,16],28:[2,16],29:[2,16],31:[2,16],32:[2,16],34:[2,16]}],defaultActions:{4:[2,1],44:[2,41],47:[2,43],57:[2,47],63:[2,10],70:[2,15],73:[2,45]},parseError:function(t){throw new Error(t)},parse:function(t){function e(){var t;return t=a.lexer.lex()||1,"number"!=typeof t&&(t=a.symbols_[t]||t),t}var a=this,n=[0],s=[null],i=[],r=this.table,o="",l=0,c=0,d=0;this.lexer.setInput(t),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var u=this.lexer.yylloc;i.push(u);var p=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var h,f,m,_,b,v,g,y,w,T={};;){if(m=n[n.length-1],this.defaultActions[m]?_=this.defaultActions[m]:((null===h||"undefined"==typeof h)&&(h=e()),_=r[m]&&r[m][h]),"undefined"==typeof _||!_.length||!_[0]){var E="";if(!d){w=[];for(v in r[m])this.terminals_[v]&&v>2&&w.push("'"+this.terminals_[v]+"'");E=this.lexer.showPosition?"Parse error on line "+(l+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+w.join(", ")+", got '"+(this.terminals_[h]||h)+"'":"Parse error on line "+(l+1)+": Unexpected "+(1==h?"end of input":"'"+(this.terminals_[h]||h)+"'"),this.parseError(E,{text:this.lexer.match,token:this.terminals_[h]||h,line:this.lexer.yylineno,loc:u,expected:w})}}if(_[0]instanceof Array&&_.length>1)throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+h);switch(_[0]){case 1:n.push(h),s.push(this.lexer.yytext),i.push(this.lexer.yylloc),n.push(_[1]),h=null,f?(h=f,f=null):(c=this.lexer.yyleng,o=this.lexer.yytext,l=this.lexer.yylineno,u=this.lexer.yylloc,d>0&&d--);break;case 2:if(g=this.productions_[_[1]][1],T.$=s[s.length-g],T._$={first_line:i[i.length-(g||1)].first_line,last_line:i[i.length-1].last_line,first_column:i[i.length-(g||1)].first_column,last_column:i[i.length-1].last_column},p&&(T._$.range=[i[i.length-(g||1)].range[0],i[i.length-1].range[1]]),b=this.performAction.call(T,o,c,l,this.yy,_[1],s,i),"undefined"!=typeof b)return b;g&&(n=n.slice(0,-1*g*2),s=s.slice(0,-1*g),i=i.slice(0,-1*g)),n.push(this.productions_[_[1]][0]),s.push(T.$),i.push(T._$),y=r[n[n.length-2]][n[n.length-1]],n.push(y);break;case 3:return!0}}return!0}},a=function(){var t={EOF:1,parseError:function(t,e){if(!this.yy.parser)throw new Error(t);this.yy.parser.parseError(t,e)},setInput:function(t){return this._input=t,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var t=this._input[0];this.yytext+=t,this.yyleng++,this.offset++,this.match+=t,this.matched+=t;var e=t.match(/(?:\r\n?|\n).*/g);return e?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),t},unput:function(t){var e=t.length,a=t.split(/(?:\r\n?|\n)/g);this._input=t+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-e-1),this.offset-=e;var n=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),a.length-1&&(this.yylineno-=a.length-1);var s=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:a?(a.length===n.length?this.yylloc.first_column:0)+n[n.length-a.length].length-a[0].length:this.yylloc.first_column-e},this.options.ranges&&(this.yylloc.range=[s[0],s[0]+this.yyleng-e]),this},more:function(){return this._more=!0,this},less:function(t){this.unput(this.match.slice(t))},pastInput:function(){var t=this.matched.substr(0,this.matched.length-this.match.length);return(t.length>20?"...":"")+t.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var t=this.match;return t.length<20&&(t+=this._input.substr(0,20-t.length)),(t.substr(0,20)+(t.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var t=this.pastInput(),e=new Array(t.length+1).join("-");return t+this.upcomingInput()+"\n"+e+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var t,e,a,n,s;this._more||(this.yytext="",this.match="");for(var i=this._currentRules(),r=0;r<i.length&&(a=this._input.match(this.rules[i[r]]),!a||e&&!(a[0].length>e[0].length)||(e=a,n=r,this.options.flex));r++);return e?(s=e[0].match(/(?:\r\n?|\n).*/g),s&&(this.yylineno+=s.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:s?s[s.length-1].length-s[s.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],t=this.performAction.call(this,this.yy,this,i[n],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),t?t:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var t=this.next();return"undefined"!=typeof t?t:this.lex()},begin:function(t){this.conditionStack.push(t)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(t){this.begin(t)}};return t.options={},t.performAction=function(t,e,a,n){function s(t,a){return e.yytext=e.yytext.substr(t,e.yyleng-a)}switch(a){case 0:if("\\\\"===e.yytext.slice(-2)?(s(0,1),this.begin("mu")):"\\"===e.yytext.slice(-1)?(s(0,1),this.begin("emu")):this.begin("mu"),e.yytext)return 12;break;case 1:return 12;case 2:return this.popState(),12;case 3:return e.yytext=e.yytext.substr(5,e.yyleng-9),this.popState(),15;case 4:return 12;case 5:return s(0,4),this.popState(),13;case 6:return 45;case 7:return 46;case 8:return 16;case 9:return this.popState(),this.begin("raw"),18;case 10:return 34;case 11:return 24;case 12:return 29;case 13:return this.popState(),28;case 14:return this.popState(),28;case 15:return 26;case 16:return 26;case 17:return 32;case 18:return 31;case 19:this.popState(),this.begin("com");break;case 20:return s(3,5),this.popState(),13;case 21:return 31;case 22:return 51;case 23:return 50;case 24:return 50;case 25:return 54;case 26:break;case 27:return this.popState(),33;case 28:return this.popState(),25;case 29:return e.yytext=s(1,2).replace(/\\"/g,'"'),42;case 30:return e.yytext=s(1,2).replace(/\\'/g,"'"),42;case 31:return 52;case 32:return 44;case 33:return 44;case 34:return 43;case 35:return 50;case 36:return e.yytext=s(1,2),50;case 37:return"INVALID";case 38:return 5}},t.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],t.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,38],inclusive:!0}},t}();return e.lexer=a,t.prototype=e,e.Parser=t,new t}();return t=e}(),l=function(t){"use strict";function e(t,e){return{left:"~"===t.charAt(2),right:"~"===e.charAt(e.length-3)}}function a(t,e,a,n,l,d){if(t.sexpr.id.original!==n.path.original)throw new c(t.sexpr.id.original+" doesn't match "+n.path.original,t);var u=a&&a.program,p={left:t.strip.left,right:n.strip.right,openStandalone:i(e.statements),closeStandalone:s((u||e).statements)};if(t.strip.right&&r(e.statements,null,!0),u){var h=a.strip;h.left&&o(e.statements,null,!0),h.right&&r(u.statements,null,!0),n.strip.left&&o(u.statements,null,!0),s(e.statements)&&i(u.statements)&&(o(e.statements),r(u.statements))}else n.strip.left&&o(e.statements,null,!0);return l?new this.BlockNode(t,u,e,p,d):new this.BlockNode(t,e,u,p,d)}function n(t,e){for(var a=0,n=t.length;n>a;a++){var l=t[a],c=l.strip;if(c){var d=s(t,a,e,"partial"===l.type),u=i(t,a,e),p=c.openStandalone&&d,h=c.closeStandalone&&u,f=c.inlineStandalone&&d&&u;c.right&&r(t,a,!0),c.left&&o(t,a,!0),f&&(r(t,a),o(t,a)&&"partial"===l.type&&(l.indent=/([ \t]+$)/.exec(t[a-1].original)?RegExp.$1:"")),p&&(r((l.program||l.inverse).statements),o(t,a)),h&&(r(t,a),o((l.inverse||l.program).statements))}}return t}function s(t,e,a){void 0===e&&(e=t.length);var n=t[e-1],s=t[e-2];return n?"content"===n.type?(s||!a?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(n.original):void 0:a}function i(t,e,a){void 0===e&&(e=-1);var n=t[e+1],s=t[e+2];return n?"content"===n.type?(s||!a?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(n.original):void 0:a}function r(t,e,a){var n=t[null==e?0:e+1];if(n&&"content"===n.type&&(a||!n.rightStripped)){var s=n.string;n.string=n.string.replace(a?/^\s+/:/^[ \t]*\r?\n?/,""),n.rightStripped=n.string!==s}}function o(t,e,a){var n=t[null==e?t.length-1:e-1];if(n&&"content"===n.type&&(a||!n.leftStripped)){var s=n.string;return n.string=n.string.replace(a?/\s+$/:/[ \t]+$/,""),n.leftStripped=n.string!==s,n.leftStripped}}var l={},c=t;return l.stripFlags=e,l.prepareBlock=a,l.prepareProgram=n,l}(a),c=function(t,e,a,n){"use strict";function s(t){return t.constructor===o.ProgramNode?t:(r.yy=d,r.parse(t))}var i={},r=t,o=e,l=a,c=n.extend;i.parser=r;var d={};return c(d,l,o),i.parse=s,i}(o,r,l,e),d=function(t,e){"use strict";function a(){}function n(t,e,a){if(null==t||"string"!=typeof t&&t.constructor!==a.AST.ProgramNode)throw new o("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+t);e=e||{},"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var n=a.parse(t),s=(new a.Compiler).compile(n,e);return(new a.JavaScriptCompiler).compile(s,e)}function s(t,e,a){function n(){var n=a.parse(t),s=(new a.Compiler).compile(n,e),i=(new a.JavaScriptCompiler).compile(s,e,void 0,!0);return a.template(i)}if(null==t||"string"!=typeof t&&t.constructor!==a.AST.ProgramNode)throw new o("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+t);e=e||{},"data"in e||(e.data=!0),e.compat&&(e.useDepths=!0);var s,i=function(t,e){return s||(s=n()),s.call(this,t,e)};return i._setup=function(t){return s||(s=n()),s._setup(t)},i._child=function(t,e,a){return s||(s=n()),s._child(t,e,a)},i}function i(t,e){if(t===e)return!0;if(l(t)&&l(e)&&t.length===e.length){for(var a=0;a<t.length;a++)if(!i(t[a],e[a]))return!1;return!0}}var r={},o=t,l=e.isArray,c=[].slice;return r.Compiler=a,a.prototype={compiler:a,equals:function(t){var e=this.opcodes.length;if(t.opcodes.length!==e)return!1;for(var a=0;e>a;a++){var n=this.opcodes[a],s=t.opcodes[a];if(n.opcode!==s.opcode||!i(n.args,s.args))return!1}for(e=this.children.length,a=0;e>a;a++)if(!this.children[a].equals(t.children[a]))return!1;return!0},guid:0,compile:function(t,e){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=e,this.stringParams=e.stringParams,this.trackIds=e.trackIds;var a=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},a)for(var n in a)this.options.knownHelpers[n]=a[n];return this.accept(t)},accept:function(t){return this[t.type](t)},program:function(t){for(var e=t.statements,a=0,n=e.length;n>a;a++)this.accept(e[a]);return this.isSimple=1===n,this.depths.list=this.depths.list.sort(function(t,e){return t-e}),this},compileProgram:function(t){var e,a=(new this.compiler).compile(t,this.options),n=this.guid++;this.usePartial=this.usePartial||a.usePartial,this.children[n]=a;for(var s=0,i=a.depths.list.length;i>s;s++)e=a.depths.list[s],2>e||this.addDepth(e-1);return n},block:function(t){var e=t.mustache,a=t.program,n=t.inverse;a&&(a=this.compileProgram(a)),n&&(n=this.compileProgram(n));var s=e.sexpr,i=this.classifySexpr(s);"helper"===i?this.helperSexpr(s,a,n):"simple"===i?(this.simpleSexpr(s),this.opcode("pushProgram",a),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("blockValue",s.id.original)):(this.ambiguousSexpr(s,a,n),this.opcode("pushProgram",a),this.opcode("pushProgram",n),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(t){var e,a,n=t.pairs;for(this.opcode("pushHash"),e=0,a=n.length;a>e;e++)this.pushParam(n[e][1]);for(;e--;)this.opcode("assignToHash",n[e][0]);this.opcode("popHash")},partial:function(t){var e=t.partialName;this.usePartial=!0,t.hash?this.accept(t.hash):this.opcode("push","undefined"),t.context?this.accept(t.context):(this.opcode("getContext",0),this.opcode("pushContext")),this.opcode("invokePartial",e.name,t.indent||""),this.opcode("append")},content:function(t){t.string&&this.opcode("appendContent",t.string)},mustache:function(t){this.sexpr(t.sexpr),this.opcode(t.escaped&&!this.options.noEscape?"appendEscaped":"append")},ambiguousSexpr:function(t,e,a){var n=t.id,s=n.parts[0],i=null!=e||null!=a;this.opcode("getContext",n.depth),this.opcode("pushProgram",e),this.opcode("pushProgram",a),this.ID(n),this.opcode("invokeAmbiguous",s,i)},simpleSexpr:function(t){var e=t.id;"DATA"===e.type?this.DATA(e):e.parts.length?this.ID(e):(this.addDepth(e.depth),this.opcode("getContext",e.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(t,e,a){var n=this.setupFullMustacheParams(t,e,a),s=t.id,i=s.parts[0];if(this.options.knownHelpers[i])this.opcode("invokeKnownHelper",n.length,i);else{if(this.options.knownHelpersOnly)throw new o("You specified knownHelpersOnly, but used the unknown helper "+i,t);s.falsy=!0,this.ID(s),this.opcode("invokeHelper",n.length,s.original,s.isSimple)}},sexpr:function(t){var e=this.classifySexpr(t);"simple"===e?this.simpleSexpr(t):"helper"===e?this.helperSexpr(t):this.ambiguousSexpr(t)},ID:function(t){this.addDepth(t.depth),this.opcode("getContext",t.depth);var e=t.parts[0];e?this.opcode("lookupOnContext",t.parts,t.falsy,t.isScoped):this.opcode("pushContext")},DATA:function(t){this.options.data=!0,this.opcode("lookupData",t.id.depth,t.id.parts)},STRING:function(t){this.opcode("pushString",t.string)},NUMBER:function(t){this.opcode("pushLiteral",t.number)},BOOLEAN:function(t){this.opcode("pushLiteral",t.bool)},comment:function(){},opcode:function(t){this.opcodes.push({opcode:t,args:c.call(arguments,1)})},addDepth:function(t){0!==t&&(this.depths[t]||(this.depths[t]=!0,this.depths.list.push(t)))},classifySexpr:function(t){var e=t.isHelper,a=t.eligibleHelper,n=this.options;if(a&&!e){var s=t.id.parts[0];n.knownHelpers[s]?e=!0:n.knownHelpersOnly&&(a=!1)}return e?"helper":a?"ambiguous":"simple"},pushParams:function(t){for(var e=0,a=t.length;a>e;e++)this.pushParam(t[e])},pushParam:function(t){this.stringParams?(t.depth&&this.addDepth(t.depth),this.opcode("getContext",t.depth||0),this.opcode("pushStringParam",t.stringModeValue,t.type),"sexpr"===t.type&&this.sexpr(t)):(this.trackIds&&this.opcode("pushId",t.type,t.idName||t.stringModeValue),this.accept(t))
},setupFullMustacheParams:function(t,e,a){var n=t.params;return this.pushParams(n),this.opcode("pushProgram",e),this.opcode("pushProgram",a),t.hash?this.hash(t.hash):this.opcode("emptyHash"),n}},r.precompile=n,r.compile=s,r}(a,e),u=function(t,e){"use strict";function a(t){this.value=t}function n(){}var s,i=t.COMPILER_REVISION,r=t.REVISION_CHANGES,o=e;n.prototype={nameLookup:function(t,e){return n.isValidJavaScriptVariableName(e)?t+"."+e:t+"['"+e+"']"},depthedLookup:function(t){return this.aliases.lookup="this.lookup",'lookup(depths, "'+t+'")'},compilerInfo:function(){var t=i,e=r[t];return[t,e]},appendToBuffer:function(t){return this.environment.isSimple?"return "+t+";":{appendToBuffer:!0,content:t,toString:function(){return"buffer += "+t+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(t,e,a,n){this.environment=t,this.options=e,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!n,this.name=this.environment.name,this.isChild=!!a,this.context=a||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(t,e),this.useDepths=this.useDepths||t.depths.list.length||this.options.compat;var s,i,r,l=t.opcodes;for(i=0,r=l.length;r>i;i++)s=l[i],this[s.opcode].apply(this,s.args);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new o("Compile completed with content left on stack");var c=this.createFunctionContext(n);if(this.isChild)return c;var d={compiler:this.compilerInfo(),main:c},u=this.context.programs;for(i=0,r=u.length;r>i;i++)u[i]&&(d[i]=u[i]);return this.environment.usePartial&&(d.usePartial=!0),this.options.data&&(d.useData=!0),this.useDepths&&(d.useDepths=!0),this.options.compat&&(d.compat=!0),n||(d.compiler=JSON.stringify(d.compiler),d=this.objectLiteral(d)),d},preamble:function(){this.lastContext=0,this.source=[]},createFunctionContext:function(t){var e="",a=this.stackVars.concat(this.registers.list);a.length>0&&(e+=", "+a.join(", "));for(var n in this.aliases)this.aliases.hasOwnProperty(n)&&(e+=", "+n+"="+this.aliases[n]);var s=["depth0","helpers","partials","data"];this.useDepths&&s.push("depths");var i=this.mergeSource(e);return t?(s.push(i),Function.apply(this,s)):"function("+s.join(",")+") {\n  "+i+"}"},mergeSource:function(t){for(var e,a,n="",s=!this.forceBuffer,i=0,r=this.source.length;r>i;i++){var o=this.source[i];o.appendToBuffer?e=e?e+"\n    + "+o.content:o.content:(e&&(n?n+="buffer += "+e+";\n  ":(a=!0,n=e+";\n  "),e=void 0),n+=o+"\n  ",this.environment.isSimple||(s=!1))}return s?(e||!n)&&(n+="return "+(e||'""')+";\n"):(t+=", buffer = "+(a?"":this.initializeBuffer()),n+=e?"return buffer + "+e+";\n":"return buffer;\n"),t&&(n="var "+t.substring(2)+(a?"":";\n  ")+n),n},blockValue:function(t){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var e=[this.contextName(0)];this.setupParams(t,0,e);var a=this.popStack();e.splice(1,0,a),this.push("blockHelperMissing.call("+e.join(", ")+")")},ambiguousBlockValue:function(){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var t=[this.contextName(0)];this.setupParams("",0,t,!0),this.flushInline();var e=this.topStack();t.splice(1,0,e),this.pushSource("if (!"+this.lastHelper+") { "+e+" = blockHelperMissing.call("+t.join(", ")+"); }")},appendContent:function(t){this.pendingContent&&(t=this.pendingContent+t),this.pendingContent=t},append:function(){this.flushInline();var t=this.popStack();this.pushSource("if ("+t+" != null) { "+this.appendToBuffer(t)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(t){this.lastContext=t},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(t,e,a){var n=0,s=t.length;for(a||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(t[n++]));s>n;n++)this.replaceStack(function(a){var s=this.nameLookup(a,t[n],"context");return e?" && "+s:" != null ? "+s+" : "+a})},lookupData:function(t,e){this.pushStackLiteral(t?"this.data(data, "+t+")":"data");for(var a=e.length,n=0;a>n;n++)this.replaceStack(function(t){return" && "+this.nameLookup(t,e[n],"data")})},resolvePossibleLambda:function(){this.aliases.lambda="this.lambda",this.push("lambda("+this.popStack()+", "+this.contextName(0)+")")},pushStringParam:function(t,e){this.pushContext(),this.pushString(e),"sexpr"!==e&&("string"==typeof t?this.pushString(t):this.pushStackLiteral(t))},emptyHash:function(){this.pushStackLiteral("{}"),this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var t=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push("{"+t.ids.join(",")+"}"),this.stringParams&&(this.push("{"+t.contexts.join(",")+"}"),this.push("{"+t.types.join(",")+"}")),this.push("{\n    "+t.values.join(",\n    ")+"\n  }")},pushString:function(t){this.pushStackLiteral(this.quotedString(t))},push:function(t){return this.inlineStack.push(t),t},pushLiteral:function(t){this.pushStackLiteral(t)},pushProgram:function(t){this.pushStackLiteral(null!=t?this.programExpression(t):null)},invokeHelper:function(t,e,a){this.aliases.helperMissing="helpers.helperMissing";var n=this.popStack(),s=this.setupHelper(t,e),i=(a?s.name+" || ":"")+n+" || helperMissing";this.push("(("+i+").call("+s.callParams+"))")},invokeKnownHelper:function(t,e){var a=this.setupHelper(t,e);this.push(a.name+".call("+a.callParams+")")},invokeAmbiguous:function(t,e){this.aliases.functionType='"function"',this.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var a=this.popStack();this.emptyHash();var n=this.setupHelper(0,t,e),s=this.lastHelper=this.nameLookup("helpers",t,"helper");this.push("((helper = (helper = "+s+" || "+a+") != null ? helper : helperMissing"+(n.paramsInit?"),("+n.paramsInit:"")+"),(typeof helper === functionType ? helper.call("+n.callParams+") : helper))")},invokePartial:function(t,e){var a=[this.nameLookup("partials",t,"partial"),"'"+e+"'","'"+t+"'",this.popStack(),this.popStack(),"helpers","partials"];this.options.data?a.push("data"):this.options.compat&&a.push("undefined"),this.options.compat&&a.push("depths"),this.push("this.invokePartial("+a.join(", ")+")")},assignToHash:function(t){var e,a,n,s=this.popStack();this.trackIds&&(n=this.popStack()),this.stringParams&&(a=this.popStack(),e=this.popStack());var i=this.hash;e&&i.contexts.push("'"+t+"': "+e),a&&i.types.push("'"+t+"': "+a),n&&i.ids.push("'"+t+"': "+n),i.values.push("'"+t+"': ("+s+")")},pushId:function(t,e){"ID"===t||"DATA"===t?this.pushString(e):this.pushStackLiteral("sexpr"===t?"true":"null")},compiler:n,compileChildren:function(t,e){for(var a,n,s=t.children,i=0,r=s.length;r>i;i++){a=s[i],n=new this.compiler;var o=this.matchExistingProgram(a);null==o?(this.context.programs.push(""),o=this.context.programs.length,a.index=o,a.name="program"+o,this.context.programs[o]=n.compile(a,e,this.context,!this.precompile),this.context.environments[o]=a,this.useDepths=this.useDepths||n.useDepths):(a.index=o,a.name="program"+o)}},matchExistingProgram:function(t){for(var e=0,a=this.context.environments.length;a>e;e++){var n=this.context.environments[e];if(n&&n.equals(t))return e}},programExpression:function(t){var e=this.environment.children[t],a=(e.depths.list,this.useDepths),n=[e.index,"data"];return a&&n.push("depths"),"this.program("+n.join(", ")+")"},useRegister:function(t){this.registers[t]||(this.registers[t]=!0,this.registers.list.push(t))},pushStackLiteral:function(t){return this.push(new a(t))},pushSource:function(t){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),t&&this.source.push(t)},pushStack:function(t){this.flushInline();var e=this.incrStack();return this.pushSource(e+" = "+t+";"),this.compileStack.push(e),e},replaceStack:function(t){{var e,n,s,i="";this.isInline()}if(!this.isInline())throw new o("replaceStack on non-inline");var r=this.popStack(!0);if(r instanceof a)i=e=r.value,s=!0;else{n=!this.stackSlot;var l=n?this.incrStack():this.topStackName();i="("+this.push(l)+" = "+r+")",e=this.topStack()}var c=t.call(this,e);s||this.popStack(),n&&this.stackSlot--,this.push("("+i+c+")")},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var t=this.inlineStack;if(t.length){this.inlineStack=[];for(var e=0,n=t.length;n>e;e++){var s=t[e];s instanceof a?this.compileStack.push(s):this.pushStack(s)}}},isInline:function(){return this.inlineStack.length},popStack:function(t){var e=this.isInline(),n=(e?this.inlineStack:this.compileStack).pop();if(!t&&n instanceof a)return n.value;if(!e){if(!this.stackSlot)throw new o("Invalid stack pop");this.stackSlot--}return n},topStack:function(){var t=this.isInline()?this.inlineStack:this.compileStack,e=t[t.length-1];return e instanceof a?e.value:e},contextName:function(t){return this.useDepths&&t?"depths["+t+"]":"depth"+t},quotedString:function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(t){var e=[];for(var a in t)t.hasOwnProperty(a)&&e.push(this.quotedString(a)+":"+t[a]);return"{"+e.join(",")+"}"},setupHelper:function(t,e,a){var n=[],s=this.setupParams(e,t,n,a),i=this.nameLookup("helpers",e,"helper");return{params:n,paramsInit:s,name:i,callParams:[this.contextName(0)].concat(n).join(", ")}},setupOptions:function(t,e,a){var n,s,i,r={},o=[],l=[],c=[];r.name=this.quotedString(t),r.hash=this.popStack(),this.trackIds&&(r.hashIds=this.popStack()),this.stringParams&&(r.hashTypes=this.popStack(),r.hashContexts=this.popStack()),s=this.popStack(),i=this.popStack(),(i||s)&&(i||(i="this.noop"),s||(s="this.noop"),r.fn=i,r.inverse=s);for(var d=e;d--;)n=this.popStack(),a[d]=n,this.trackIds&&(c[d]=this.popStack()),this.stringParams&&(l[d]=this.popStack(),o[d]=this.popStack());return this.trackIds&&(r.ids="["+c.join(",")+"]"),this.stringParams&&(r.types="["+l.join(",")+"]",r.contexts="["+o.join(",")+"]"),this.options.data&&(r.data="data"),r},setupParams:function(t,e,a,n){var s=this.objectLiteral(this.setupOptions(t,e,a));return n?(this.useRegister("options"),a.push("options"),"options="+s):(a.push(s),"")}};for(var l="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),c=n.RESERVED_WORDS={},d=0,u=l.length;u>d;d++)c[l[d]]=!0;return n.isValidJavaScriptVariableName=function(t){return!n.RESERVED_WORDS[t]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(t)},s=n}(n,a),p=function(t,e,a,n,s){"use strict";var i,r=t,o=e,l=a.parser,c=a.parse,d=n.Compiler,u=n.compile,p=n.precompile,h=s,f=r.create,m=function(){var t=f();return t.compile=function(e,a){return u(e,a,t)},t.precompile=function(e,a){return p(e,a,t)},t.AST=o,t.Compiler=d,t.JavaScriptCompiler=h,t.Parser=l,t.parse=c,t};return r=m(),r.create=m,r["default"]=r,i=r}(i,r,c,d,u);return p}),define("hbs/underscore",[],function(){function t(e,a,n){if(e===a)return 0!==e||1/e==1/a;if(null==e||null==a)return e===a;if(e._chain&&(e=e._wrapped),a._chain&&(a=a._wrapped),e.isEqual&&w.isFunction(e.isEqual))return e.isEqual(a);if(a.isEqual&&w.isFunction(a.isEqual))return a.isEqual(e);var s=o.call(e);if(s!=o.call(a))return!1;switch(s){case"[object String]":return e==String(a);case"[object Number]":return e!=+e?a!=+a:0==e?1/e==1/a:e==+a;case"[object Date]":case"[object Boolean]":return+e==+a;case"[object RegExp]":return e.source==a.source&&e.global==a.global&&e.multiline==a.multiline&&e.ignoreCase==a.ignoreCase}if("object"!=typeof e||"object"!=typeof a)return!1;for(var i=n.length;i--;)if(n[i]==e)return!0;n.push(e);var r=0,l=!0;if("[object Array]"==s){if(r=e.length,l=r==a.length)for(;r--&&(l=r in e==r in a&&t(e[r],a[r],n)););}else{if("constructor"in e!="constructor"in a||e.constructor!=a.constructor)return!1;for(var c in e)if(w.has(e,c)&&(r++,!(l=w.has(a,c)&&t(e[c],a[c],n))))break;if(l){for(c in a)if(w.has(a,c)&&!r--)break;l=!r}}return n.pop(),l}var e={},a=Array.prototype,n=Object.prototype,s=Function.prototype,i=a.slice,r=a.unshift,o=n.toString,l=n.hasOwnProperty,c=a.forEach,d=a.map,u=a.reduce,p=a.reduceRight,h=a.filter,f=a.every,m=a.some,_=a.indexOf,b=a.lastIndexOf,v=Array.isArray,g=Object.keys,y=s.bind,w=function(t){return new P(t)};w.VERSION="1.3.3";var T=w.each=w.forEach=function(t,a,n){if(null!=t)if(c&&t.forEach===c)t.forEach(a,n);else if(t.length===+t.length){for(var s=0,i=t.length;i>s;s++)if(s in t&&a.call(n,t[s],s,t)===e)return}else for(var r in t)if(w.has(t,r)&&a.call(n,t[r],r,t)===e)return};w.map=w.collect=function(t,e,a){var n=[];return null==t?n:d&&t.map===d?t.map(e,a):(T(t,function(t,s,i){n[n.length]=e.call(a,t,s,i)}),t.length===+t.length&&(n.length=t.length),n)},w.reduce=w.foldl=w.inject=function(t,e,a,n){var s=arguments.length>2;if(null==t&&(t=[]),u&&t.reduce===u)return n&&(e=w.bind(e,n)),s?t.reduce(e,a):t.reduce(e);if(T(t,function(t,i,r){s?a=e.call(n,a,t,i,r):(a=t,s=!0)}),!s)throw new TypeError("Reduce of empty array with no initial value");return a},w.reduceRight=w.foldr=function(t,e,a,n){var s=arguments.length>2;if(null==t&&(t=[]),p&&t.reduceRight===p)return n&&(e=w.bind(e,n)),s?t.reduceRight(e,a):t.reduceRight(e);var i=w.toArray(t).reverse();return n&&!s&&(e=w.bind(e,n)),s?w.reduce(i,e,a,n):w.reduce(i,e)},w.find=w.detect=function(t,e,a){var n;return E(t,function(t,s,i){return e.call(a,t,s,i)?(n=t,!0):void 0}),n},w.filter=w.select=function(t,e,a){var n=[];return null==t?n:h&&t.filter===h?t.filter(e,a):(T(t,function(t,s,i){e.call(a,t,s,i)&&(n[n.length]=t)}),n)},w.reject=function(t,e,a){var n=[];return null==t?n:(T(t,function(t,s,i){e.call(a,t,s,i)||(n[n.length]=t)}),n)},w.every=w.all=function(t,a,n){var s=!0;return null==t?s:f&&t.every===f?t.every(a,n):(T(t,function(t,i,r){return(s=s&&a.call(n,t,i,r))?void 0:e}),!!s)};var E=w.some=w.any=function(t,a,n){a||(a=w.identity);var s=!1;return null==t?s:m&&t.some===m?t.some(a,n):(T(t,function(t,i,r){return s||(s=a.call(n,t,i,r))?e:void 0}),!!s)};w.include=w.contains=function(t,e){var a=!1;return null==t?a:_&&t.indexOf===_?-1!=t.indexOf(e):a=E(t,function(t){return t===e})},w.invoke=function(t,e){var a=i.call(arguments,2);return w.map(t,function(t){return(w.isFunction(e)?e||t:t[e]).apply(t,a)})},w.pluck=function(t,e){return w.map(t,function(t){return t[e]})},w.max=function(t,e,a){if(!e&&w.isArray(t)&&t[0]===+t[0])return Math.max.apply(Math,t);if(!e&&w.isEmpty(t))return-1/0;var n={computed:-1/0};return T(t,function(t,s,i){var r=e?e.call(a,t,s,i):t;r>=n.computed&&(n={value:t,computed:r})}),n.value},w.min=function(t,e,a){if(!e&&w.isArray(t)&&t[0]===+t[0])return Math.min.apply(Math,t);if(!e&&w.isEmpty(t))return 1/0;var n={computed:1/0};return T(t,function(t,s,i){var r=e?e.call(a,t,s,i):t;r<n.computed&&(n={value:t,computed:r})}),n.value},w.shuffle=function(t){var e,a=[];return T(t,function(t,n){e=Math.floor(Math.random()*(n+1)),a[n]=a[e],a[e]=t}),a},w.sortBy=function(t,e,a){var n=w.isFunction(e)?e:function(t){return t[e]};return w.pluck(w.map(t,function(t,e,s){return{value:t,criteria:n.call(a,t,e,s)}}).sort(function(t,e){var a=t.criteria,n=e.criteria;return void 0===a?1:void 0===n?-1:n>a?-1:a>n?1:0}),"value")},w.groupBy=function(t,e){var a={},n=w.isFunction(e)?e:function(t){return t[e]};return T(t,function(t,e){var s=n(t,e);(a[s]||(a[s]=[])).push(t)}),a},w.sortedIndex=function(t,e,a){a||(a=w.identity);for(var n=0,s=t.length;s>n;){var i=n+s>>1;a(t[i])<a(e)?n=i+1:s=i}return n},w.toArray=function(t){return t?w.isArray(t)?i.call(t):w.isArguments(t)?i.call(t):t.toArray&&w.isFunction(t.toArray)?t.toArray():w.values(t):[]},w.size=function(t){return w.isArray(t)?t.length:w.keys(t).length},w.first=w.head=w.take=function(t,e,a){return null==e||a?t[0]:i.call(t,0,e)},w.initial=function(t,e,a){return i.call(t,0,t.length-(null==e||a?1:e))},w.last=function(t,e,a){return null==e||a?t[t.length-1]:i.call(t,Math.max(t.length-e,0))},w.rest=w.tail=function(t,e,a){return i.call(t,null==e||a?1:e)},w.compact=function(t){return w.filter(t,function(t){return!!t})},w.flatten=function(t,e){return w.reduce(t,function(t,a){return w.isArray(a)?t.concat(e?a:w.flatten(a)):(t[t.length]=a,t)},[])},w.without=function(t){return w.difference(t,i.call(arguments,1))},w.uniq=w.unique=function(t,e,a){var n=a?w.map(t,a):t,s=[];return t.length<3&&(e=!0),w.reduce(n,function(a,n,i){return(e?w.last(a)===n&&a.length:w.include(a,n))||(a.push(n),s.push(t[i])),a},[]),s},w.union=function(){return w.uniq(w.flatten(arguments,!0))},w.intersection=w.intersect=function(t){var e=i.call(arguments,1);return w.filter(w.uniq(t),function(t){return w.every(e,function(e){return w.indexOf(e,t)>=0})})},w.difference=function(t){var e=w.flatten(i.call(arguments,1),!0);return w.filter(t,function(t){return!w.include(e,t)})},w.zip=function(){for(var t=i.call(arguments),e=w.max(w.pluck(t,"length")),a=new Array(e),n=0;e>n;n++)a[n]=w.pluck(t,""+n);return a},w.indexOf=function(t,e,a){if(null==t)return-1;var n,s;if(a)return n=w.sortedIndex(t,e),t[n]===e?n:-1;if(_&&t.indexOf===_)return t.indexOf(e);for(n=0,s=t.length;s>n;n++)if(n in t&&t[n]===e)return n;return-1},w.lastIndexOf=function(t,e){if(null==t)return-1;if(b&&t.lastIndexOf===b)return t.lastIndexOf(e);for(var a=t.length;a--;)if(a in t&&t[a]===e)return a;return-1},w.range=function(t,e,a){arguments.length<=1&&(e=t||0,t=0),a=arguments[2]||1;for(var n=Math.max(Math.ceil((e-t)/a),0),s=0,i=new Array(n);n>s;)i[s++]=t,t+=a;return i};var S=function(){};w.bind=function(t,e){var a,n;if(t.bind===y&&y)return y.apply(t,i.call(arguments,1));if(!w.isFunction(t))throw new TypeError;return n=i.call(arguments,2),a=function(){if(!(this instanceof a))return t.apply(e,n.concat(i.call(arguments)));S.prototype=t.prototype;var s=new S,r=t.apply(s,n.concat(i.call(arguments)));return Object(r)===r?r:s}},w.bindAll=function(t){var e=i.call(arguments,1);return 0==e.length&&(e=w.functions(t)),T(e,function(e){t[e]=w.bind(t[e],t)}),t},w.memoize=function(t,e){var a={};return e||(e=w.identity),function(){var n=e.apply(this,arguments);return w.has(a,n)?a[n]:a[n]=t.apply(this,arguments)}},w.delay=function(t,e){var a=i.call(arguments,2);return setTimeout(function(){return t.apply(null,a)},e)},w.defer=function(t){return w.delay.apply(w,[t,1].concat(i.call(arguments,1)))},w.throttle=function(t,e){var a,n,s,i,r,o,l=w.debounce(function(){r=i=!1},e);return function(){a=this,n=arguments;var c=function(){s=null,r&&t.apply(a,n),l()};return s||(s=setTimeout(c,e)),i?r=!0:o=t.apply(a,n),l(),i=!0,o}},w.debounce=function(t,e,a){var n;return function(){var s=this,i=arguments,r=function(){n=null,a||t.apply(s,i)};a&&!n&&t.apply(s,i),clearTimeout(n),n=setTimeout(r,e)}},w.once=function(t){var e,a=!1;return function(){return a?e:(a=!0,e=t.apply(this,arguments))}},w.wrap=function(t,e){return function(){var a=[t].concat(i.call(arguments,0));return e.apply(this,a)}},w.compose=function(){var t=arguments;return function(){for(var e=arguments,a=t.length-1;a>=0;a--)e=[t[a].apply(this,e)];return e[0]}},w.after=function(t,e){return 0>=t?e():function(){return--t<1?e.apply(this,arguments):void 0}},w.keys=g||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var a in t)w.has(t,a)&&(e[e.length]=a);return e},w.values=function(t){return w.map(t,w.identity)},w.functions=w.methods=function(t){var e=[];for(var a in t)w.isFunction(t[a])&&e.push(a);return e.sort()},w.extend=function(t){return T(i.call(arguments,1),function(e){for(var a in e)t[a]=e[a]}),t},w.pick=function(t){var e={};return T(w.flatten(i.call(arguments,1)),function(a){a in t&&(e[a]=t[a])}),e},w.defaults=function(t){return T(i.call(arguments,1),function(e){for(var a in e)null==t[a]&&(t[a]=e[a])}),t},w.clone=function(t){return w.isObject(t)?w.isArray(t)?t.slice():w.extend({},t):t},w.tap=function(t,e){return e(t),t},w.isEqual=function(e,a){return t(e,a,[])},w.isEmpty=function(t){if(null==t)return!0;if(w.isArray(t)||w.isString(t))return 0===t.length;for(var e in t)if(w.has(t,e))return!1;return!0},w.isElement=function(t){return!(!t||1!=t.nodeType)},w.isArray=v||function(t){return"[object Array]"==o.call(t)},w.isObject=function(t){return t===Object(t)},w.isArguments=function(t){return"[object Arguments]"==o.call(t)},w.isArguments(arguments)||(w.isArguments=function(t){return!(!t||!w.has(t,"callee"))}),w.isFunction=function(t){return"[object Function]"==o.call(t)},w.isString=function(t){return"[object String]"==o.call(t)},w.isNumber=function(t){return"[object Number]"==o.call(t)},w.isFinite=function(t){return w.isNumber(t)&&isFinite(t)},w.isNaN=function(t){return t!==t},w.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==o.call(t)},w.isDate=function(t){return"[object Date]"==o.call(t)},w.isRegExp=function(t){return"[object RegExp]"==o.call(t)},w.isNull=function(t){return null===t},w.isUndefined=function(t){return void 0===t},w.has=function(t,e){return l.call(t,e)},w.noConflict=function(){return root._=previousUnderscore,this},w.identity=function(t){return t},w.times=function(t,e,a){for(var n=0;t>n;n++)e.call(a,n)},w.escape=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},w.result=function(t,e){if(null==t)return null;var a=t[e];return w.isFunction(a)?a.call(t):a},w.mixin=function(t){T(w.functions(t),function(e){O(e,w[e]=t[e])})};var I=0;w.uniqueId=function(t){var e=I++;return t?t+e:e},w.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var x=/.^/,A={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var M in A)A[A[M]]=M;var k=/\\|'|\r|\n|\t|\u2028|\u2029/g,D=/\\(\\|'|r|n|t|u2028|u2029)/g,C=function(t){return t.replace(D,function(t,e){return A[e]})};w.template=function(t,e,a){a=w.defaults(a||{},w.templateSettings);var n="__p+='"+t.replace(k,function(t){return"\\"+A[t]}).replace(a.escape||x,function(t,e){return"'+\n_.escape("+C(e)+")+\n'"}).replace(a.interpolate||x,function(t,e){return"'+\n("+C(e)+")+\n'"}).replace(a.evaluate||x,function(t,e){return"';\n"+C(e)+"\n;__p+='"})+"';\n";a.variable||(n="with(obj||{}){\n"+n+"}\n"),n="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+n+"return __p;\n";var s=new Function(a.variable||"obj","_",n);if(e)return s(e,w);var i=function(t){return s.call(this,t,w)};return i.source="function("+(a.variable||"obj")+"){\n"+n+"}",i},w.chain=function(t){return w(t).chain()};var P=function(t){this._wrapped=t};w.prototype=P.prototype;var $=function(t,e){return e?w(t).chain():t},O=function(t,e){P.prototype[t]=function(){var t=i.call(arguments);return r.call(t,this._wrapped),$(e.apply(w,t),this._chain)}};return w.mixin(w),T(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=a[t];P.prototype[t]=function(){var a=this._wrapped;e.apply(a,arguments);var n=a.length;return"shift"!=t&&"splice"!=t||0!==n||delete a[0],$(a,this._chain)}}),T(["concat","join","slice"],function(t){var e=a[t];P.prototype[t]=function(){return $(e.apply(this._wrapped,arguments),this._chain)}}),P.prototype.chain=function(){return this._chain=!0,this},P.prototype.value=function(){return this._wrapped},w}),define("hbs/i18nprecompile",["hbs/handlebars","hbs/underscore"],function(t,e){function a(n,s,i){return i=i||{},s=s||{},n&&"program"===n.type&&n.statements&&(e(n.statements).forEach(function(e,r){var o="<!-- i18n error -->";if("mustache"===e.type&&e.id&&"$"===e.id.original){if(e.params.length&&e.params[0].string){var l=e.params[0].string;o=s[l]||(i.originalKeyFallback?l:o)}n.statements[r]=new t.AST.ContentNode(o)}else e.program&&(e.program=a(e.program,s,i))}),n.inverse&&a(n.inverse,s,i)),n}return function(e,n,s){var i,r;return s=s||{},"data"in s||(s.data=!0),s.compat&&(s.useDepths=!0),i=t.parse(e),n!==!1&&(i=a(i,n,s)),r=(new t.Compiler).compile(i,s),(new t.JavaScriptCompiler).compile(r,s)}}),function(window){var JSON=window.JSON||{};!function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var a,n,s,i,r,o=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,r=[],"[object Array]"===Object.prototype.toString.apply(l)){for(i=l.length,a=0;i>a;a+=1)r[a]=str(a,l)||"null";return s=0===r.length?"[]":gap?"[\n"+gap+r.join(",\n"+gap)+"\n"+o+"]":"["+r.join(",")+"]",gap=o,s}if(rep&&"object"==typeof rep)for(i=rep.length,a=0;i>a;a+=1)"string"==typeof rep[a]&&(n=rep[a],s=str(n,l),s&&r.push(quote(n)+(gap?": ":":")+s));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(s=str(n,l),s&&r.push(quote(n)+(gap?": ":":")+s));return s=0===r.length?"{}":gap?"{\n"+gap+r.join(",\n"+gap)+"\n"+o+"}":"{"+r.join(",")+"}",gap=o,s}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,a){var n;if(gap="",indent="","number"==typeof a)for(n=0;a>n;n+=1)indent+=" ";else"string"==typeof a&&(indent=a);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var a,n,s=t[e];if(s&&"object"==typeof s)for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(n=walk(s,a),void 0!==n?s[a]=n:delete s[a]);return reviver.call(t,e,s)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),define("hbs/json2",[],function(){return JSON})}.call(this,this),define("hbs",["hbs/handlebars","hbs/underscore","hbs/i18nprecompile","hbs/json2"],function(t,e,a,n){var s,i,r=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=function(){throw new Error("Environment unsupported.")},l=[],c="w+",d="hbs",u="@hbs",p="/styles/",h="/demo-build/styles/",f="templates/helpers/",m="templates/i18n/",_="screen.build.css",b="onHbsRead";t.registerHelper("$",function(){}),"undefined"!=typeof window&&window.navigator&&window.document&&!window.navigator.userAgent.match(/Node.js/)?(i=function(){var t,e,a;if("undefined"!=typeof XMLHttpRequest)return arguments[0]===!0?new XDomainRequest:new XMLHttpRequest;for(e=0;3>e;e++){a=r[e];try{t=new ActiveXObject(a)}catch(n){}if(t){r=[a];break}}if(!t)throw new Error("getXhr(): XMLHttpRequest not available");return t},getIEVersion=function(){var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent,a=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=a.exec(e)&&(t=parseFloat(RegExp.$1))}return t},o=function(t,e){var a=!1;if(0!=t.indexOf("http"))a=!1;else{var n="https"===t.substr(0,5)?8:7,s="https"===window.location.href.substr(0,5)?8:7,r=t.substr(n).split("/").shift(),o=getIEVersion();a=r!=window.location.href.substr(s).split("/").shift()&&o>=7}if(a){var l=i(!0);l.open("GET",t),l.onload=function(){e(l.responseText,t)},l.onprogress=function(){},l.ontimeout=function(){},l.onerror=function(){},setTimeout(function(){l.send()},0)}else{var c=i();c.open("GET",t,!0),c.onreadystatechange=function(){4===c.readyState&&e(c.responseText,t)},c.send(null)}}):"undefined"!=typeof process&&process.versions&&process.versions.node?(s=require.nodeRequire("fs"),o=function(t,e){var a=s.readFileSync(t,"utf8")||"";a=a.replace(/^\uFEFF/,""),e(a,t)}):"undefined"!=typeof java&&"undefined"!=typeof java.io&&(o=function(t,e){for(var a,n=new java.io.FileInputStream(t),s=new java.io.InputStreamReader(n,"UTF-8"),i=new java.io.BufferedReader(s),r="";null!==(a=i.readLine());)r+=new String(a)+"\n";i.close(),e(r,t)});var v,g={},y=function(t,e){g[t]?e(g[t]):o(t,function(t,a){g[a]=t,e.call(this,t)})},w=[],T={},E=[];return{get:function(){return t},write:function(t,e,a){if(e+u in l){var n=l[e+u];a.asModule(t+"!"+e,n)}},version:"2.0.0",load:function(s,i,r,g){function S(t,a){return e(t).forEach(function(t){t&&t.type&&"partial"===t.type&&a.push(t.partialName.name),t&&t.program&&t.program.statements&&S(t.program.statements,a),t&&t.inverse&&t.inverse.statements&&S(t.inverse.statements,a)}),a}function I(t){var a=[];return t&&t.statements&&(a=S(t.statements,[])),e.unique(a)}function x(t){var e,a,s;if(t&&t.statements&&(e=t.statements[0],e&&"comment"===e.type))try{return a=e.comment.replace(new RegExp("^[\\s]+|[\\s]+$","g"),""),s=n.parse(a),a}catch(i){return n.stringify({description:a})}return"{}"}function A(t){if(!t)return[];var e,a=[t[0]],n=t[0];for(e=1;e<t.length;++e)t.hasOwnProperty(e)&&(n+="."+t[e],a.push(n));return a}function M(a,n,s,i){s=s?s+".":"";var r="";return e(a).forEach(function(a){var o,l,c;if(a&&a.type&&"mustache"===a.type){if(!a.params||!a.params.length){o=A(a.id.parts);for(l in o)o[l]&&(r=o[l]||r,n.push(s+o[l]));n.push(s+a.id.string)}var d=["this",".","..","./..","../..","../../.."];a.params&&"undefined"==typeof t.helpers[a.id.string]&&(e(a.params).forEach(function(l){(e(d).contains(l.original)||l instanceof t.AST.StringNode||l instanceof t.AST.NumberNode||l instanceof t.AST.BooleanNode||l instanceof t.AST.DataNode||l instanceof t.AST.SexprNode)&&(i.push(a.id.string),"undefined"!=typeof a.params&&e(a.params).forEach(function(t){"sexpr"===t.type&&t.isHelper===!0&&i.push(t.id.string)}),null!=a.hash&&"undefined"!=typeof a.hash&&"undefined"!=typeof a.hash.pairs&&e(a.hash.pairs).forEach(function(t){var e=(t[0],t[1]);"sexpr"===e.type&&e.isHelper===!0&&i.push(e.id.string)})),o=A(l.parts);for(var c in o)o[c]&&(r=o[c]||r,i.push(a.id.string),n.push(s+o[c]))}),null!=a.hash&&"undefined"!=typeof a.hash&&"undefined"!=typeof a.hash.pairs&&e(a.hash.pairs).forEach(function(e){var n=e[1];(n instanceof t.AST.StringNode||n instanceof t.AST.NumberNode||n instanceof t.AST.BooleanNode||n instanceof t.AST.IdNode)&&i.push(a.id.string)}))}a&&a.mustache&&M([a.mustache],n,s+r,i),a&&a.program&&a.program.statements&&(c=M([a.mustache],[],"",i)[0]||"",a.inverse&&a.inverse.statements&&M(a.inverse.statements,n,s+r+(c?s+r?"."+c:c:""),i),M(a.program.statements,n,s+r+(c?s+r?"."+c:c:""),i))
}),n}function k(t){var a=[],n=[];t&&t.statements&&(a=M(t.statements,[],void 0,n));var s=["helperMissing","blockHelperMissing","each","if","unless","with","log","lookup"];return{vars:e(a).chain().unique().map(function(t){return""===t?".":t.length&&"."===t[t.length-1]?t.substr(0,t.length-1)+"[]":t}).value(),helpers:e(n).chain().unique().map(function(t){return e(s).contains(t)?void 0:t}).compact().value()}}function D(t){for(var e=t.split("/"),a=0;a<e.length;a++)".."===e[a]?(delete e[a-1],delete e[a]):"."===e[a]&&delete e[a];return e.join("/").replace(/\/\/+/g,"/")}function C(d){o(L,function(o,u){var m,g,y,S,A,M=v.isBuild&&v[b]?v[b]:function(t,e,a){return a},C=t.parse(M(s,u,o)),L=I(C),N=x(C),U=k(C),F=U.vars,q=U.helpers||[],z="",V="",G="",B=[],H=s.substr(0,s.lastIndexOf("/")+1);if(require.config.hbs=require.config.hbs||{},require.config.hbs._partials=require.config.hbs._partials||{},"{}"!==N)try{y=n.parse(N)}catch(K){console.log("couldn't parse meta for %s",u)}for(var j in L)if(L.hasOwnProperty(j)&&"string"==typeof L[j]){var u,Y=L[j];u=D(Y.match(/^(\.|\/)+/)?H+Y:R+Y),require.config.hbs._partials[u]=require.config.hbs._partials[u]||[],require.config.hbs._partials[u].references=require.config.hbs._partials[u].references||[],require.config.hbs._partials[u].references.push(Y),require.config.hbs._loadedDeps=require.config.hbs._loadedDeps||{},B[j]="hbs!"+u}if(m=B.join("', '"),q=q.concat(y&&y.helpers?y.helpers:[]),g=O?"":function(){var t,e=[],a=v.hbs&&v.hbs.helperPathCallback?v.hbs.helperPathCallback:function(t){return(v.hbs&&v.hbs.helperDirectory?v.hbs.helperDirectory:f)+t};for(t=0;t<q.length;t++)e[t]="'"+a(q[t],u)+"'";return e}().join(","),g&&(g=","+g),y)try{y.styles&&(w=e.union(w,y.styles),require.isBrowser&&!v.isBuild?(S=document.head||document.getElementsByTagName("head")[0],e(y.styles).forEach(function(t){T[t]||(A=document.createElement("link"),A.href=v.baseUrl+p+t+".css",A.media="all",A.rel="stylesheet",A.type="text/css",S.appendChild(A),T[t]=A)})):v.isBuild&&!function(){var t=require.nodeRequire("fs"),a=e(y.styles).map(function(t){return T[t]?"":(T[t]=!0,"@import url("+t+".css);\n")}).join("\n");t.open(__dirname+h+_,c,"0666",function(e,n){t.writeSync(n,a,null,encoding="utf8"),t.close(n)}),c="a"}())}catch(K){console.log("error injecting styles")}v.isBuild||v.serverRender||(z="<!-- START - "+s+" -->",V="<!-- END - "+s+" -->",G="t.meta = "+N+";\nt.helpers = "+n.stringify(q)+";\nt.deps = "+n.stringify(B)+";\nt.vars = "+n.stringify(F)+";\n");var W=$?!1:e.extend(d,v.localeMapping),X=v.hbs||{},Q=e.extend(X.compileOptions||{},{originalKeyFallback:X.originalKeyFallback}),Z=a(o,W,Q),J="'hbs!"+s+"',";m&&(m=", '"+m+"'");var te=[];require.config.hbs._partials[s]&&(te=require.config.hbs._partials[s].references),o="/* START_TEMPLATE */\ndefine("+J+"['hbs','hbs/handlebars'"+m+g+"], function( hbs, Handlebars ){ \nvar t = Handlebars.template("+Z+");\nHandlebars.registerPartial('"+s+"', t);\n";for(var j=0;j<te.length;j++)o+="Handlebars.registerPartial('"+te[j]+"', t);\n";o+=G+"return t;\n});\n/* END_TEMPLATE */\n",v.isBuild&&(l[P]=o),v.isBuild||(o+="\r\n//# sourceURL="+u),v.isBuild?(r.fromText(s,o),i([s],function(t){r(t)})):require(B,function(){r.fromText(o),i([s],function(t){r(t)})}),v.removeCombined&&u&&E.push(u)})}v=v||g;var P=s+u;v.hbs=v.hbs||{};var $=!(1==v.hbs.i18n),O=0==v.hbs.helpers,R="";v.hbs.partialsUrl&&(R=v.hbs.partialsUrl,R.match(/\/$/)||(R+="/")),v.hbs.fetchText&&(o=v.hbs.fetchText);var L,N=v.hbs&&v.hbs.templateExtension===!1;if(L=i.toUrl(N?s:s+"."+(v.hbs&&v.hbs.templateExtension?v.hbs.templateExtension:d)),$)C(!1);else{var U=(v.hbs&&v.hbs.i18nDirectory?v.hbs.i18nDirectory:m)+(v.locale||"en_us")+".json";try{y(i.toUrl(U),function(t){C(n.parse(t))})}catch(F){if(v.hbs)throw F;console.warn("hbs: Error reading "+U+", disabling i18n. Ignore this if you're using jam, otherwise check your i18n configuration.\n"),v.hbs={i18n:!1,helpers:!0},C(!1)}}},onLayerEnd:function(){v.removeCombined&&s&&E.forEach(function(t){s.existsSync(t)&&s.unlinkSync(t)})}}}),define("hbs!sunstone/tab",["hbs","hbs/handlebars"],function(t,e){var a=e.template({1:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l='  <div class="row header-row">\n    <div class="large-12 columns">\n      <h3 class="subheader header-title only-right-list" style="border-bottom: 1px solid #efefef; padding-bottom: 10px;">\n        <span class="header-resource" style="border-bottom: 2px solid #0098c3; padding: 0px 50px 10px 0px;">';return i=null!=(i=e.listHeader||(null!=t?t.listHeader:t))?i:o,s=typeof i===r?i.call(t,{name:"listHeader",hash:{},data:n}):i,null!=s&&(l+=s),l+='</span>\n      </h3>\n      <h3 class="subheader header-title only-right-info" style="border-bottom: 1px solid #efefef; padding-bottom: 10px;" hidden>\n        <span class="header-resource" style="border-bottom: 2px solid #0098c3; padding: 0px 50px 10px 0px;">',i=null!=(i=e.infoHeader||(null!=t?t.infoHeader:t))?i:o,s=typeof i===r?i.call(t,{name:"infoHeader",hash:{},data:n}):i,null!=s&&(l+=s),l+'</span>\n        &emsp;\n        <span class="resource-id"></span>\n        &emsp;\n        <span class="resource-info-header"></span>\n      </h3>\n      <h3 class="subheader header-title only-right-form" style="border-bottom: 1px solid #efefef; padding-bottom: 10px;" hidden>\n        <span class="right-form-title" style="border-bottom: 2px solid #0098c3; padding: 0px 50px 10px 0px;"></span>\n      </h3>\n    </div>\n  </div>\n'},3:function(t,e,a,n){var s,i='  <div class="row actions_row">\n    <div class="small-12 large-12 columns">\n      <div class="action_blocks"></div>\n      <div class="small-3 large-3 columns only-right-list" style="margin-top: 2px">\n';return s=e["if"].call(t,null!=(s=null!=t?t.dataTable:t)?s.searchInputHTML:s,{name:"if",hash:{},fn:this.program(4,n),inverse:this.noop,data:n}),null!=s&&(i+=s),i+"      </div>\n    </div>\n  </div>\n"},4:function(t){var e,a=this.lambda,n="          ";return e=a(null!=(e=null!=t?t.dataTable:t)?e.searchInputHTML:e,t),null!=e&&(n+=e),n+"\n"},6:function(t){var e,a=this.lambda,n='    <div class="row">\n      <div class="large-12 columns">';return e=a(null!=(e=null!=t?t.dataTable:t)?e.dataTableHTML:e,t),null!=e&&(n+=e),n+"</div>\n    </div>\n"},8:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l="    ";return i=null!=(i=e.content||(null!=t?t.content:t))?i:o,s=typeof i===r?i.call(t,{name:"content",hash:{},data:n}):i,null!=s&&(l+=s),l+"\n"},10:function(t,e,a,n){var s,i='    <div class="row header-info">\n      <div class="large-12 columns text-center totals-info">\n        <h3 class="subheader">\n';return s=e["if"].call(t,null!=t?t.subheader:t,{name:"if",hash:{},fn:this.program(11,n),inverse:this.noop,data:n}),null!=s&&(i+=s),i+"        </h3>\n      </div>\n    </div>\n"},11:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l="            ";return i=null!=(i=e.subheader||(null!=t?t.subheader:t))?i:o,s=typeof i===r?i.call(t,{name:"subheader",hash:{},data:n}):i,null!=s&&(l+=s),l+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<div id="'+l((i=null!=(i=e.tabName||(null!=t?t.tabName:t))?i:o,typeof i===r?i.call(t,{name:"tabName",hash:{},data:n}):i))+'" class="tab" style="display:none;">\n';return s=e["if"].call(t,null!=t?t.listHeader:t,{name:"if",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+="\n",s=e["if"].call(t,null!=t?t.buttons:t,{name:"if",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+='  <div class="right-list">\n',s=e["if"].call(t,null!=(s=null!=t?t.dataTable:t)?s.dataTableHTML:s,{name:"if",hash:{},fn:this.program(6,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+="\n",s=e["if"].call(t,null!=t?t.content:t,{name:"if",hash:{},fn:this.program(8,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+="\n",s=e["if"].call(t,null!=t?t.subheader:t,{name:"if",hash:{},fn:this.program(10,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+'  </div>\n\n  <div class="right-info" hidden></div>\n\n  <div class="large-12 small-12 right-form" hidden>\n    <div class="loadingForm">\n      <br>\n      <br>\n      <span class="fa-stack fa-5x" style="color: #dfdfdf"> <i class="fa fa-cloud fa-stack-2x"/><i class="fa  fa-spinner fa-spin fa-stack-1x fa-inverse"/>\n      </span>\n      <br>\n      <br>\n    </div>\n    <div class="contentForm">\n    </div>\n  </div>\n</div>'},useData:!0});return e.registerPartial("sunstone/tab",a),a}),define("templates/helpers/tr",["require","hbs/handlebars","utils/locale"],function(t){var e=t("hbs/handlebars"),a=t("utils/locale"),n=function(t){return a.tr(t)};return e.registerHelper("tr",n),n}),define("hbs!sunstone/buttons",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({1:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'    <span id="'+o((s=null!=(s=e.customId||(null!=t?t.customId:t))?s:r,typeof s===i?s.call(t,{name:"customId",hash:{},data:n}):s))+'back_button" class="only-right-info only-right-form">\n      <a class="button small radius" href="back"> <i class="fa fa-arrow-left"></i>\n        &emsp;&emsp; <i class="fa fa-list"></i>\n      </a>\n    </span>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<div class="text-center">\n  <span class="left">\n\n    <span id="'+l((i=null!=(i=e.customId||(null!=t?t.customId:t))?i:o,typeof i===r?i.call(t,{name:"customId",hash:{},data:n}):i))+'refresh_buttons" class="only-right-info only-right-list"></span>\n';return s=e.unless.call(t,null!=t?t.customContext:t,{name:"unless",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+'    <span id="'+l((i=null!=(i=e.customId||(null!=t?t.customId:t))?i:o,typeof i===r?i.call(t,{name:"customId",hash:{},data:n}):i))+'create_buttons" class="only-right-list"></span>\n  </span>\n\n  <span class="right" style="margin-left: 20px">\n    <a href=\'#\' data-dropdown=\''+l((i=null!=(i=e.customId||(null!=t?t.customId:t))?i:o,typeof i===r?i.call(t,{name:"customId",hash:{},data:n}):i))+"user_buttons' class='only-right-info only-right-list top_button small  secondary button dropdown radius'>\n      <i class='fa fa-user'/></a>\n    <ul id='"+l((i=null!=(i=e.customId||(null!=t?t.customId:t))?i:o,typeof i===r?i.call(t,{name:"customId",hash:{},data:n}):i))+"user_buttons' class='only-right-info only-right-list f-dropdown' data-dropdown-content></ul>\n\n    <a href='#' data-dropdown='"+l((i=null!=(i=e.customId||(null!=t?t.customId:t))?i:o,typeof i===r?i.call(t,{name:"customId",hash:{},data:n}):i))+"vmsdelete_buttons' class='only-right-info only-right-list top_button small  button alert dropdown radius'>\n      <i class='fa fa-trash-o'/></a>\n    <ul id='"+l((i=null!=(i=e.customId||(null!=t?t.customId:t))?i:o,typeof i===r?i.call(t,{name:"customId",hash:{},data:n}):i))+"vmsdelete_buttons' class='only-right-info only-right-list f-dropdown' data-dropdown-content></ul>\n\n    <span id='"+l((i=null!=(i=e.customId||(null!=t?t.customId:t))?i:o,typeof i===r?i.call(t,{name:"customId",hash:{},data:n}):i))+"delete_buttons' class='only-right-info only-right-list'></span>\n  </span>\n\n  <span class=\"right\">\n    <span id=\""+l((i=null!=(i=e.customId||(null!=t?t.customId:t))?i:o,typeof i===r?i.call(t,{name:"customId",hash:{},data:n}):i))+"vmsplay_buttons\"></span>\n\n    <a href='#' data-dropdown='"+l((i=null!=(i=e.customId||(null!=t?t.customId:t))?i:o,typeof i===r?i.call(t,{name:"customId",hash:{},data:n}):i))+"vmspause_buttons' class='only-right-info only-right-list top_button small  button secondary dropdown radius'>\n      <i class='fa fa-pause'/>\n    </a>\n    <ul id='"+l((i=null!=(i=e.customId||(null!=t?t.customId:t))?i:o,typeof i===r?i.call(t,{name:"customId",hash:{},data:n}):i))+"vmspause_buttons' class='only-right-info only-right-list f-dropdown' data-dropdown-content></ul>\n\n    <a href='#' data-dropdown='"+l((i=null!=(i=e.customId||(null!=t?t.customId:t))?i:o,typeof i===r?i.call(t,{name:"customId",hash:{},data:n}):i))+"vmsstop_buttons' class='only-right-info only-right-list top_button small  button secondary dropdown radius'>\n      <i class='fa fa-stop'/>\n    </a>\n    <ul id='"+l((i=null!=(i=e.customId||(null!=t?t.customId:t))?i:o,typeof i===r?i.call(t,{name:"customId",hash:{},data:n}):i))+"vmsstop_buttons' class='only-right-info only-right-list f-dropdown' data-dropdown-content></ul>\n\n    <a href='#' data-dropdown='"+l((i=null!=(i=e.customId||(null!=t?t.customId:t))?i:o,typeof i===r?i.call(t,{name:"customId",hash:{},data:n}):i))+"vmsrepeat_buttons' class='only-right-info only-right-list top_button small  button secondary dropdown radius'>\n      <i class='fa fa-repeat'/>\n    </a>\n    <ul id='"+l((i=null!=(i=e.customId||(null!=t?t.customId:t))?i:o,typeof i===r?i.call(t,{name:"customId",hash:{},data:n}):i))+"vmsrepeat_buttons' class='only-right-info only-right-list f-dropdown' data-dropdown-content></ul>\n\n    <a href='#' data-dropdown='"+l((i=null!=(i=e.customId||(null!=t?t.customId:t))?i:o,typeof i===r?i.call(t,{name:"customId",hash:{},data:n}):i))+"vmsplanification_buttons' class='only-right-info only-right-list top_button small  button secondary dropdown radius'>\n      <i class='fa fa-th-list'/>\n    </a>\n    <ul id='"+l((i=null!=(i=e.customId||(null!=t?t.customId:t))?i:o,typeof i===r?i.call(t,{name:"customId",hash:{},data:n}):i))+"vmsplanification_buttons' class='only-right-info only-right-list f-dropdown' data-dropdown-content></ul>\n\n    <span id=\""+l((i=null!=(i=e.customId||(null!=t?t.customId:t))?i:o,typeof i===r?i.call(t,{name:"customId",hash:{},data:n}):i))+"main_buttons\" class=\"only-right-info only-right-list\"></span>\n\n    <a href='#' data-dropdown='"+l((i=null!=(i=e.customId||(null!=t?t.customId:t))?i:o,typeof i===r?i.call(t,{name:"customId",hash:{},data:n}):i))+"more_buttons' class='only-right-info only-right-list top_button small  button secondary dropdown radius'>\n      <i class='fa fa-ellipsis-v'/>\n    </a>\n    <ul id='"+l((i=null!=(i=e.customId||(null!=t?t.customId:t))?i:o,typeof i===r?i.call(t,{name:"customId",hash:{},data:n}):i))+"more_buttons' class='only-right-info only-right-list f-dropdown' data-dropdown-content></ul>\n  </span>\n\n  <span id='"+l((i=null!=(i=e.customId||(null!=t?t.customId:t))?i:o,typeof i===r?i.call(t,{name:"customId",hash:{},data:n}):i))+"form_buttons' class='only-right-form' style='display: none'>\n    <span id=\""+l((i=null!=(i=e.customId||(null!=t?t.customId:t))?i:o,typeof i===r?i.call(t,{name:"customId",hash:{},data:n}):i))+'reset_button" class="left" style="margin-left: 10px;">\n      <a class="button small secondary radius reset_button" href="submit">'+l((e.tr||t&&t.tr||o).call(t,"Reset",{name:"tr",hash:{},data:n}))+'</a>\n    </span>\n    <span id="'+l((i=null!=(i=e.customId||(null!=t?t.customId:t))?i:o,typeof i===r?i.call(t,{name:"customId",hash:{},data:n}):i))+'submit_button" class="left" style="margin-left: 10px;">\n      <a class="button small success radius submit_button" href="submit">'+l((e.tr||t&&t.tr||o).call(t,"Create",{name:"tr",hash:{},data:n}))+'</a>\n    </span>\n    <dl class="tabs right wizard_tabs" data-tab style="margin-left: 10px;">\n      <dd id="wizard_mode" class="active">\n        <a style="padding: 0.3rem 1rem;" href="#wizardForms">'+l((e.tr||t&&t.tr||o).call(t,"Wizard",{name:"tr",hash:{},data:n}))+'</a>\n      </dd>\n      <dd id="advanced_mode">\n        <a style="padding: 0.3rem 1rem;" id="advanced_mode_a" href="#advancedForms">'+l((e.tr||t&&t.tr||o).call(t,"Advanced",{name:"tr",hash:{},data:n}))+'</a>\n      </dd>\n    </dl>\n  </span>\n</div>\n"'},useData:!0});return e.registerPartial("sunstone/buttons",a),a}),define("hbs!sunstone/panels",["hbs","hbs/handlebars"],function(t,e){var a=e.template({1:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c="    <dd ";return s=e["if"].call(t,null!=t?t.active:t,{name:"if",hash:{},fn:this.program(2,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+='>\n      <a href="#'+l((i=null!=(i=e.panelName||(null!=t?t.panelName:t))?i:o,typeof i===r?i.call(t,{name:"panelName",hash:{},data:n}):i))+'">\n',s=e["if"].call(t,null!=t?t.icon:t,{name:"if",hash:{},fn:this.program(4,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+"        "+l((i=null!=(i=e.title||(null!=t?t.title:t))?i:o,typeof i===r?i.call(t,{name:"title",hash:{},data:n}):i))+"\n      </a>\n    </dd>\n"},2:function(){return'class="active"'},4:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'          <i class="fa '+o((s=null!=(s=e.icon||(null!=t?t.icon:t))?s:r,typeof s===i?s.call(t,{name:"icon",hash:{},data:n}):s))+'"></i>\n          <br>\n'},6:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='    <div id="'+l((i=null!=(i=e.panelName||(null!=t?t.panelName:t))?i:o,typeof i===r?i.call(t,{name:"panelName",hash:{},data:n}):i))+'" class="content ';return s=e["if"].call(t,null!=t?t.active:t,{name:"if",hash:{},fn:this.program(7,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+='">\n      ',i=null!=(i=e.html||(null!=t?t.html:t))?i:o,s=typeof i===r?i.call(t,{name:"html",hash:{},data:n}):i,null!=s&&(c+=s),c+"\n    </div>\n"},7:function(){return"active"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<div id="'+l((i=null!=(i=e.containerId||(null!=t?t.containerId:t))?i:o,typeof i===r?i.call(t,{name:"containerId",hash:{},data:n}):i))+'" class="bordered-tabs">\n  <dl class="tabs right-info-tabs text-center" data-tab>\n';return s=e.each.call(t,null!=t?t.panels:t,{name:"each",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+="  </dl>\n  <div class='tabs-content'>\n",s=e.each.call(t,null!=t?t.panels:t,{name:"each",hash:{},fn:this.program(6,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+"  </div>\n</div>"},useData:!0});return e.registerPartial("sunstone/panels",a),a}),define("sunstone",["require","jquery","foundation.reveal","foundation.tab","foundation.dropdown","sunstone-config","utils/locale","utils/notifier","utils/dialogs/confirm/dialogId","utils/dialogs/confirm-with-select/dialogId","hbs!sunstone/tab","hbs!./sunstone/buttons","hbs!./sunstone/panels"],function(t){function e(t,e,n,i){var o=$("#"+t);s(t),r(t),setTimeout(function(){var s=h.tabs[t],r=s.formPanelInstances[e],l=$("#"+t+" div[form-panel-id="+e+"]");if(!r){l=$('<div class="tabs-content tabs-contentForm" form-panel-id="'+e+'">          <div class="content active" id="wizardForms"></div>          <div class="content" id="advancedForms"></div>        </div>').appendTo($(".contentForm",o));var c=s.formPanels[e];if(!c)return console.log("Form Panel not defined"),!1;r=new c,s.formPanelInstances[e]=r,r.insert(l)}r.setAction(l,n),s.activeFormPanel=r,r.htmlAdvanced?$(".wizard_tabs",o).show():$(".wizard_tabs",o).hide(),r.resetButton()?$(".reset_button",o).show():$(".reset_button",o).hide(),r.onShow(l),i&&i(r,l),a(t)},13)}function a(t){var e=$("#"+t);$(".loadingForm",e).hide(),$(".tabs-contentForm",e).hide();var a=h.tabs[t].activeFormPanel;a&&($(".right-form-title",e).text(a.title()),$(".submit_button",e).text(a.buttonText()),$("div[form-panel-id="+a.formPanelId+"]",e).show())}function n(t){var e=$("#"+t);$("a[href=back]",e).trigger("click")}function s(t){var e=$("#"+t);$(".right-list",e).hide(),$(".right-info",e).hide(),$(".right-form",e).show(),$(".only-right-list",e).hide(),$(".only-right-info",e).hide(),$(".only-right-form",e).show(),$(".right-form-title",e).text(l.tr("Loading...")),$(".submit_button",e).text(l.tr("Loading...")),$(".tabs-contentForm",e).hide(),$(".loadingForm",e).show()}function i(t){var e=$("#"+t);$(".submit_button",e).attr("disabled","disabled").on("click.disable",function(){return!1})}function r(t){var e=$("#"+t);$(".submit_button",e).removeAttr("disabled").off("click.disable")}t("jquery"),t("foundation.reveal"),t("foundation.tab"),t("foundation.dropdown");var o=t("sunstone-config"),l=t("utils/locale"),c=t("utils/notifier"),d=1e4,u=t("utils/dialogs/confirm/dialogId"),p=t("utils/dialogs/confirm-with-select/dialogId"),h={actions:{},dialogs:{},dialogInstances:{},tabs:{}},f=function(t){var e=t.tabId;if(o.isTabEnabled(e)){h.tabs[e]=t;var a=t.actions;a&&m(a);var n=t.panels;n&&b(e,n);var s=t.dialogs;s&&_(s);var i=t.formPanels;i&&v(e,i)}},m=function(t){return $.each(t,function(t,e){h.actions[t]=e}),!1},_=function(t){return $.each(t,function(t,e){h.dialogs[e.DIALOG_ID]=e}),!1},b=function(t,e){var a={};return $.each(e,function(t,e){a[e.PANEL_ID]=e}),h.tabs[t].panels=a,!1},v=function(t,e){var a={};return $.each(e,function(t,e){a[e.FORM_PANEL_ID]=e}),h.tabs[t].formPanels=a,h.tabs[t].formPanelInstances={},!1},g=function(){for(tabName in h.tabs)w(tabName),T(tabName),y(tabName);S()},y=function(t){h.tabs[t].dataTable&&h.tabs[t].dataTable.initialize()},w=function(e){var a=h.tabs[e],n=a.condition,s=a.tabClass?a.tabClass:"topTab",i=a.parentTab?a.parentTab:"";if(!n||n()){if(a.no_content===!0)s+=" tab_with_no_content";else{a.tabName=e;var r=t("hbs!sunstone/tab");$("div.right-content").append(r(a))}var o='<li id="li_'+e+'" class="'+s+" "+i+'"><a href="#">'+a.title+"</a></li>";if($("div#menu ul#navigation").append(o),i.length){var l=$("div#menu ul#navigation #li_"+i);l.length&&($("div#menu li#li_"+e).hide(),$("div#menu li#li_"+i+" span").css("display","inline-block"))}if(a.forms&&$.each(a.forms,function(t,a){z.addFormPanel(e,t,a)}),a.setup){var c=$("div#"+e,$("div.right-content"));a.setup(c)}}},T=function(e,a,n,s){var i,r,l=n?n:h.tabs[e].buttons,c="";s?(r=s.attr("id"),i=s):(r=e,i=$("div#"+e,$("div.right-content")));var d=$("div.action_blocks",i);if(d.length){var u=t("hbs!./sunstone/buttons"),p=$(u({customId:r,customContext:s}));for(buttonName in l)if(c="",button=l[buttonName],0!=o.isTabActionEnabled(e,buttonName,a)){var f=button.type+"_button",m=[f];switch(button.type){case"select":break;case"image":m.push("action_button");break;case"create_dialog":m.push("action_button"),m.push("top_button");break;default:m.push("top_button")}button.alwaysActive&&m.push("alwaysActive"),button.custom_classes&&m.push(button.custom_classes);var _,b;switch(button.layout){case"create":_=$("#"+r+"create_buttons",p),icon=button.icon?button.icon:'<i class="fa fa-plus"/>',b=button.text?icon+" "+button.text:icon,m.push("success","button","small","radius"),c='<button class="'+m.join(" ")+'" href="'+buttonName+'">'+b+"</button>";break;case"refresh":_=$("#"+r+"refresh_buttons",p),b='<span class="fa-stack"><i class="fa fa-refresh fa-stack-lg" style="font-size: 1.5em"></i></span>',m.push("white_button","refresh","secondary","button","small","radius"),c='<a class="'+m.join(" ")+'" href="'+buttonName+'" style="padding-left: 5px">'+b+"</a>";break;case"top":_=$("#"+r+"refresh_buttons",p),b='<span class="fa-stack"><i class="fa fa-refresh fa-stack-2x" style="color: #dfdfdf"></i><i class="fa fa-play fa-stack-1x"></i></span>',m.push("white_button","toggle_top_button","only-right-list","secondary","button","small","radius"),c='<a class="'+m.join(" ")+'" style="padding-left:0px; margin-right: 20px">'+b+"</a>";break;case"main":_=$("#"+r+"main_buttons",p),b=button.text,m.push("secondary","button","small","radius"),c='<button class="'+m.join(" ")+'" href="'+buttonName+'">'+b+"</button>";break;case"vmsplay_buttons":_=$("#"+r+"vmsplay_buttons",p),b=button.text,m.push("secondary","button","small","radius"),c='<button class="'+m.join(" ")+'" href="'+buttonName+'">'+b+"</button>";break;case"vmspause_buttons":_=$("#"+r+"vmspause_buttons",p),b=button.text,c='<li><a class="'+m.join(" ")+'" href="'+buttonName+'">'+b+"</a></li>";break;case"vmsstop_buttons":_=$("#"+r+"vmsstop_buttons",p),b=button.text,c='<li><a class="'+m.join(" ")+'" href="'+buttonName+'">'+b+"</a></li>";break;case"vmsrepeat_buttons":_=$("#"+r+"vmsrepeat_buttons",p),b=button.text,c='<li><a class="'+m.join(" ")+'" href="'+buttonName+'">'+b+"</a></li>";break;case"vmsdelete_buttons":_=$("#"+r+"vmsdelete_buttons",p),b=button.text,c='<li><a class="'+m.join(" ")+'" href="'+buttonName+'">'+b+"</a></li>";break;case"vmsplanification_buttons":_=$("#"+r+"vmsplanification_buttons",p),b=button.text,c='<li><a class="'+m.join(" ")+'" href="'+buttonName+'">'+b+"</a></li>";break;case"more_select":_=$("#"+r+"more_buttons",p),b=button.text,c='<li><a class="'+m.join(" ")+'" href="'+buttonName+'">'+b+"</a></li>";break;case"user_select":_=$("#"+r+"user_buttons",p),b=button.text,c='<li><a class="'+m.join(" ")+'" href="'+buttonName+'">'+b+"</a></li>";break;case"del":_=$("#"+r+"delete_buttons",p),b='<i class=" fa fa-trash-o"/> ',m.push("alert","button","small","radius"),c='<button class="'+m.join(" ")+'" href="'+buttonName+'">'+b+"</button>";break;default:_=$("#"+r+"main_buttons",p),b=button.text,m.push("secondary","button","small","radius"),c='<button class="'+m.join(" ")+'" href="'+buttonName+'">'+b+"</button>"}_.append(c)}d.append(p),0==$("#"+r+"more_buttons li",d).length&&$("a[data-dropdown="+r+"more_buttons]",d).remove(),0==$("#"+r+"user_buttons li",d).length&&$("a[data-dropdown="+r+"user_buttons]",d).remove(),0==$("#"+r+"vmsplanification_buttons li",d).length&&$("a[data-dropdown="+r+"vmsplanification_buttons]",d).remove(),0==$("#"+r+"vmsdelete_buttons li",d).length&&$("a[data-dropdown="+r+"vmsdelete_buttons]",d).remove(),0==$("#"+r+"vmsstop_buttons li",d).length&&$("a[data-dropdown="+r+"vmsstop_buttons]",d).remove(),0==$("#"+r+"vmspause_buttons li",d).length&&$("a[data-dropdown="+r+"vmspause_buttons]",d).remove(),0==$("#"+r+"vmsrepeat_buttons li",d).length&&$("a[data-dropdown="+r+"vmsrepeat_buttons]",d).remove(),0==$("#"+r+"user_buttons li",d).length&&$("a[data-dropdown="+r+"user_buttons]",d).remove(),$(".top_button, .list_button",d).attr("disabled",!1),$(".top_button, .list_button",d).attr("disabled",!0),$(".create_dialog_button",d).attr("disabled",!1),$(".alwaysActive",d).attr("disabled",!1),$("#"+r+"reset_button",d).on("click",function(){return P(e),!1}),$("#"+r+"submit_button",d).on("click",function(){return C(e),!1}),$(document).foundation()}},E=function(){$(document).on("click",".action_button",function(){var t=0,e=$(this).val();$.isEmptyObject(e)&&(e=$(this).attr("href"));var a=h.actions[e];if(!a)return c.notifyError("Action "+e+" not defined."),!1;switch(a.type){case"multiple":var n=($(this).parents(".tab"),a.elements());t=D(e,n);break;default:t=D(e)}return t||$(this).hasClass("refresh")||q(u).hide(),!1}),$(document).on("click",".confirm_button",function(){var t=q(u);return $("#"+u).data("buttonAction",$(this).attr("href")),$("#"+u).data("buttonTab",$(this).parents(".tab").attr("id")),t.show(),!1}),$(document).on("click",".confirm_with_select_button",function(){var t=q(p);return $("#"+p).data("buttonAction",$(this).attr("href")),$("#"+p).data("buttonTab",$(this).parents(".tab").attr("id")),t.show(),!1}),$(document).foundation("reflow","dropdown"),$(document).on("click","a[href='back']",function(t){$(".navigation-active-li a",$("#navigation")).click(),t.preventDefault()})},S=function(){var t=$(".left-content ul li.topTab"),e=$(".left-content ul li.subTab");e.on("click",function(){if($(this).hasClass("topTab"))return!1;var t=$(this).attr("id").substring(3);return A(t),!1}),t.on("click",function(){var t=$(this).attr("id").substring(3);if($(this).hasClass("tab_with_no_content")){var e=$("div#menu li."+t);return e.fadeToggle("fast"),!1}return A(t),!1}),E()},I=function(t){var e=$("#"+t);$(".tab").hide(),e.show(),$(".right-info",e).hide(),$(".right-form",e).hide(),$(".right-list",e).show(),$(".only-right-info",e).hide(),$(".only-right-form",e).hide(),$(".only-right-list",e).show()},x=function(t){var e=$("#"+t);$(".tab").hide(),e.show(),$(".right-list",e).hide(),$(".right-form",e).hide(),$(".right-info",e).show(),$(".only-right-list",e).hide(),$(".only-right-form",e).hide(),$(".only-right-info",e).show()},A=function(t){if(!h.tabs[t])return!1;0==t.indexOf("#")&&(t=t.substring(1)),$("#navigation li").removeClass("navigation-active-li"),$("#navigation li#li_"+t).addClass("navigation-active-li");$("#"+t);I(t);var e=h.tabs[t].dataTable;e&&e.recountCheckboxes();var a=h.tabs[t].resource;a&&z.runAction(a+".refresh")},M=function(t,e,a){A(t);var n=$("#"+t);$(".resource-id",n).html(a),$(".resource-info-header",n).text("");var s='<div style="margin-top: 20px; text-align: center; width: 100%"><img src="images/pbar.gif" alt="loading..." /></div>';$(".right-info",n).html(s),x(t),z.runAction(e,a),$(".top_button, .list_button",n).attr("disabled",!1)},k=function(e,a,n,s){var s=s||$(".right-info",$("#"+e)),i=e+"-panels",r=$("dd.active a",$("#"+i));if(r)var l=r.attr("href");var c=h.tabs[e].panels,d=!1,u=[],p=[];$.each(c,function(t,s){if(o.isTabPanelEnabled(n||e,t)){l?l=="#"+t&&(d=!0):(l="#"+t,d=!0);try{var i=new s(a,n);p.push(i),u.push({panelName:t,icon:i.icon,title:i.title,html:i.html(),active:d})}catch(r){console.log(r)}d=!1}});var f=t("hbs!./sunstone/panels"),m=f({containerId:i,panels:u});s.html(m),$.each(p,function(t,e){e.setup(s),e.onShow&&(s.off("click",'[href="#'+e.panelId+'"]'),s.on("click",'[href="#'+e.panelId+'"]',function(){e.onShow(s)}))}),s.foundation("reflow","tab"),$("[href="+l+"]",s).trigger("click")},D=function(t,e,a){var n=h.actions;if(!n[t])return c.notifyError("Action "+t+" not defined"),1;var s=n[t],i=s.notify,r=s.condition;if(r&&!r())return i&&c.notifyError("This action cannot be run"),1;var o=s.call,l=s.callback,d=s.error;switch(s.type){case"create":case"register":o({data:e,success:l,error:d});break;case"single":o(a?{data:{id:e,extra_param:a},success:l,error:d}:{data:{id:e},success:l,error:d});break;case"list":o({success:l,error:d,options:e});break;case"monitor_global":o({timeout:!0,success:l,error:d,data:{monitor:e}});break;case"monitor":case"monitor_single":o({timeout:!0,success:l,error:d,data:{id:e,monitor:a}});break;case"multiple":$.each(e,function(){o(a?{data:{id:this,extra_param:a},success:l,error:d}:{data:{id:this},success:l,error:d})});break;default:e&&a?o(e,a):e?o(e):o()}return i&&c.notifySubmit(t,e,a),0},C=function(t){var e=$("#"+t);s(t),setTimeout(function(){var a=h.tabs[t].activeFormPanel;$("#wizardForms.active",e).length>0?$("#"+a.formPanelId+"Wizard").submit():$("#advancedForms.active",e).length>0&&$("#"+a.formPanelId+"Advanced").submit()},13)},P=function(t,e){s(t),r(t),setTimeout(function(){var n;if(n=e?h.tabs[t].formPanelInstances[e]:h.tabs[t].activeFormPanel){var s=$("#"+t+" div[form-panel-id="+n.formPanelId+"]");e=n.formPanelId,n.reset(s),n.onShow(s)}a(t)},13)},O=function(t,e){var a=null,n=h.tabs[t].buttons;return a=n[e],!a&&n.action_list&&(a=n.action_list.actions[e]),a},R=function(t){return $(".right-info",t).is(":visible")},L=function(t){return $(".right-list",t).is(":visible")},N=function(t){return $(".resource-id",t).text()},U=function(t){return h.actions[t]},F=function(t){return h.tabs[t]?h.tabs[t].dataTable:void 0},q=function(t){var e=h.dialogInstances[t];if(void 0==e){var a=h.dialogs[t],e=new a;e.insert(),h.dialogInstances[t]=e}return e},z={addMainTab:f,addDialogs:_,insertTabs:g,insertPanels:k,showTab:A,showElement:M,showFormPanel:e,resetFormPanel:P,hideFormPanel:n,hideFormPanelLoading:a,disableFormPanelSubmit:i,enableFormPanelSubmit:r,rightInfoVisible:R,rightListVisible:L,rightInfoResourceId:N,runAction:D,getAction:U,getButton:O,getDataTable:F,getDialog:q,insertButtonsInTab:T,TOP_INTERVAL:d};return z}),define("opennebula/helper",["require"],function(){var t={action:function(t,e){return obj={action:{perform:t}},e&&(obj.action.params=e),obj},request:function(t,e,a){var n={request:{resource:t,method:e}};return a&&("array"!=typeof a&&(a=[a]),n.request.data=a),n},pool:function(t,e){var a,n=t+"_POOL",s=t;if("undefined"==typeof n)return Error("Incorrect Pool");var r=[];if(a=e[n]?e[n][s]:null,null==a)return r;if(a.length){for(i=0;i<a.length;i++)r[i]={},r[i][s]=a[i];return r}return r[0]={},r[0][s]=a,r},pool_hash_processing:function(t,e,a){var n;if("undefined"==typeof t)return Error("Incorrect Pool");var s={};if(n=a[t]?a[t][e]:null,null==n)return s;
if(n.length){for(i=0;i<n.length;i++){var r={};r[e]=n[i],s[r[e].ID]=r}return s}var r={};return r[e]=n,s[r[e].ID]=r,s},pool_name_processing:function(t,e,a){var n;if("undefined"==typeof t)return Error("Incorrect Pool");var s={};if(n=a[t]?a[t][e]:null,null==n)return s;if(n.length){for(i=0;i<n.length;i++){var r=n[i];s[r.ID]=r.NAME}return s}var r=n;return s[r.ID]=r.NAME,s}};return t}),define("opennebula/error",["require"],function(){var t=function(t){var e={};if(t.responseText)try{e=JSON.parse(t.responseText)}catch(a){e.error={message:"It appears there was a server exception. Please check server's log."}}else e.error={};return e.error.http_status=t.status,e};return t}),define("opennebula/action",["require","./helper","./error"],function(t){var e=t("./helper"),a=t("./error"),n={},s={},i={},r={},o=6e4,l=function(t){n[t]=null},c=function(t,n,s,i,r){var o,c,d=t.success,u=t.error,p=t.data.id;i?(o=e.action(s,i),c=e.request(n,s,[p,i])):(o=e.action(s),c=e.request(n,s,p));var h=r?r:n.toLowerCase(),f=t.cache_name?t.cache_name:n;$.ajax({url:h+"/"+p+"/action",type:"POST",contentType:"application/json; charset=utf-8",data:JSON.stringify(o),success:function(){return l(f),d?d(c):null},error:function(t){return u?u(c,a(t)):null}})},d={create:function(t,n,s){var i=t.success,r=t.error,o=t.data,c=e.request(n,"create",o),d=s?s:n.toLowerCase(),u=t.cache_name?t.cache_name:n;$.ajax({url:d,type:"POST",dataType:"json",data:JSON.stringify(o),contentType:"application/json; charset=utf-8",success:function(t){return l(u),i?i(c,t):null},error:function(t){return r?r(c,a(t)):null}})},del:function(t,n,s){var i=t.success,r=t.error,o=t.data.id,c=e.request(n,"delete",o),d=s?s:n.toLowerCase(),u=t.cache_name?t.cache_name:n;$.ajax({url:d+"/"+o,type:"DELETE",success:function(){return l(u),i?i(c):null},error:function(t){return r?r(c,a(t)):null}})},list:function(t,c,d,u){var p=t.success,h=t.error,f=t.timeout||!1,m=e.request(c,"list"),_=d?d:c.toLowerCase(),b=t.cache_name?t.cache_name:c,v=t.options,g=!1;return v&&(g=v.force),g&&l(b),!g&&n[b]&&n[b].timestamp+o>(new Date).getTime()?p?p(m,n[b].data):null:(i[b]||(i[b]=[]),i[b].push({success:p,error:h}),void(s[b]||(s[b]=!0,$.ajax({url:_,type:"GET",data:{timeout:f},dataType:"json",success:function(t){var a;a=u?u(t):e.pool(c,t),r[b]=e.pool_name_processing(c+"_POOL",c,t),n[b]={timestamp:(new Date).getTime(),data:a},s[b]=!1;for(var o=0;o<i[b].length;o++){var l=i[b][o].success;l&&l(m,a,t)}i[b]=[]},error:function(t){s[b]=!1;for(var e=0;e<i[b].length;e++){var n=i[b][e].error;n&&n(m,a(t))}i[b]=[]}}))))},list_in_zone:function(t,n,s){var i=t.success,r=t.error,o=t.timeout||!1,l=e.request(n,"list"),c=s?s:n.toLowerCase();$.ajax({url:c,type:"GET",data:{timeout:o,zone_id:t.data.zone_id},dataType:"json",success:function(t){var a=e.pool(n,t);return i?i(l,a):null},error:function(t){return r?r(l,a(t)):null}})},show:function(t,n,s,i){var r=t.success,o=t.error,l=t.data.id,c=s?e.request(n,s,l):e.request(n,"show",l),d=i?i:n.toLowerCase(),u=d+"/"+l;u=s?u+"/"+s:u,$.ajax({url:u,type:"GET",dataType:"json",success:function(t){return r?r(c,t):null},error:function(t){return o?o(c,a(t)):null}})},chown:function(t,e,a){var n=t.data.extra_param,s={owner_id:n,group_id:"-1"};c(t,e,"chown",s,a)},chgrp:function(t,e,a){var n=t.data.extra_param,s={owner_id:"-1",group_id:n};c(t,e,"chown",s,a)},simple_action:c,monitor:function(t,n,s,i){var r=t.success,o=t.error,l=t.data,c="monitor",d=e.request(n,c,l),u=i?i:n.toLowerCase();u=s?u+"/monitor":u+"/"+t.data.id+"/monitor",$.ajax({url:u,type:"GET",data:l.monitor,dataType:"json",success:function(t){return r?r(d,t):null},error:function(t){return o?o(d,a(t)):null}})},accounting:function(t,n,s){var i=t.success,r=t.error,o=t.data,l="accounting",c=e.request(n,l,o),d=s?s:n.toLowerCase()+"/accounting";$.ajax({url:d,type:"GET",data:o,dataType:"json",success:function(t){return i?i(c,t):null},error:function(t){return r?r(c,a(t)):null}})},showback:function(t,n,s){var i=t.success,r=t.error,o=t.data,l="showback",c=e.request(n,l,o),d=s?s:n.toLowerCase()+"/showback";$.ajax({url:d,type:"GET",data:o,dataType:"json",success:function(t){return i?i(c,t):null},error:function(t){return r?r(c,a(t)):null}})},getName:function(t,e){if(void 0!=r[e]){var a=r[e][t];if(void 0!=a)return a}return""+t},clear_cache:l};return d}),define("opennebula/auth",["require","./helper","./error"],function(t){var e=t("./helper"),a=t("./error"),n="AUTH",s={login:function(t){var s=t.success,i=t.error,r=t.data.username,o=t.data.password,l=t.remember,c=e.request(n,"login");$.ajax({url:"login",type:"POST",data:{remember:l},beforeSend:function(t){var e=r+":"+o,a="Basic ";"function"==typeof btoa?a+=btoa(unescape(encodeURIComponent(e))):(e=CryptoJS.enc.Utf8.parse(e),a+=CryptoJS.enc.Base64.stringify(e)),t.setRequestHeader("Authorization",a)},success:function(t){return s?s(c,t):null},error:function(t){return i?i(c,a(t)):null}})},logout:function(t){var s=t.success,i=t.error,r=e.request(n,"logout");$.ajax({url:"logout",type:"POST",success:function(t){return s?s(r,t):null},error:function(t){return i?i(r,a(t)):null}})}};return s}),define("opennebula/acl",["require","./action"],function(t){var e=t("./action"),a="ACL",n={resource:a,create:function(t){e.create(t,a)},del:function(t){e.del(t,a)},list:function(t){e.list(t,a)}};return n}),define("opennebula/cluster",["require","./action"],function(t){var e=t("./action"),a="CLUSTER",n={resource:a,create:function(t){e.create(t,a)},del:function(t){e.del(t,a)},list:function(t){e.list(t,a)},list_in_zone:function(t){e.list_in_zone(t,a)},show:function(t){e.show(t,a)},addhost:function(t){var n={host_id:t.data.extra_param};e.simple_action(t,a,"addhost",n)},delhost:function(t){var n={host_id:t.data.extra_param};e.simple_action(t,a,"delhost",n)},adddatastore:function(t){var n={ds_id:t.data.extra_param};e.simple_action(t,a,"adddatastore",n)},deldatastore:function(t){var n={ds_id:t.data.extra_param};e.simple_action(t,a,"deldatastore",n)},addvnet:function(t){var n={vnet_id:t.data.extra_param};e.simple_action(t,a,"addvnet",n)},delvnet:function(t){var n={vnet_id:t.data.extra_param};e.simple_action(t,a,"delvnet",n)},fetch_template:function(t){e.show(t,a,"template")},update:function(t){var n={template_raw:t.data.extra_param};e.simple_action(t,a,"update",n)},rename:function(t){var n=t.data.extra_param;e.simple_action(t,a,"rename",n)},getName:function(t){return e.getName(t,a)}};return n}),define("opennebula/datastore",["require","./action"],function(t){var e=t("./action"),a="DATASTORE",n=["ON","OFF"],s={resource:a,stateStr:function(t){return n[t]},create:function(t){e.create(t,a)},del:function(t){e.del(t,a)},list:function(t){e.list(t,a)},list_in_zone:function(t){e.list_in_zone(t,a)},show:function(t){e.show(t,a)},chown:function(t){e.chown(t,a)},chgrp:function(t){e.chgrp(t,a)},chmod:function(t){var n=t.data.extra_param;e.simple_action(t,a,"chmod",n)},update:function(t){var n={template_raw:t.data.extra_param};e.simple_action(t,a,"update",n)},fetch_template:function(t){e.show(t,a,"template")},rename:function(t){var n=t.data.extra_param;e.simple_action(t,a,"rename",n)},enable:function(t){e.simple_action(t,a,"enable")},disable:function(t){e.simple_action(t,a,"disable")},getName:function(t){return e.getName(t,a)}};return s}),define("utils/quotas/quota-limits",["require"],function(){var t="-1",e="-2";return{QUOTA_LIMIT_DEFAULT:t,QUOTA_LIMIT_UNLIMITED:e}}),define("utils/quotas/quota-defaults",["require","./quota-limits"],function(t){function e(t){o=t}function a(t){l=t}function n(){return o}function s(){return l}function i(t){return"User"==t?n():s()}function r(t){$.isEmptyObject(t.VM_QUOTA)&&(t.VM_QUOTA={VM:{VMS:d,MEMORY:d,CPU:d,VOLATILE_SIZE:d}});var e=[];$.isArray(t.DATASTORE_QUOTA.DATASTORE)?e=t.DATASTORE_QUOTA.DATASTORE:t.DATASTORE_QUOTA.DATASTORE&&(e=[t.DATASTORE_QUOTA.DATASTORE]),delete t.DATASTORE_QUOTA,t.DATASTORE_QUOTA={};for(var a=0;a<e.length;a++)t.DATASTORE_QUOTA[e[a].ID]=e[a];var n=[];$.isArray(t.IMAGE_QUOTA.IMAGE)?n=t.IMAGE_QUOTA.IMAGE:t.IMAGE_QUOTA.IMAGE&&(n=[t.IMAGE_QUOTA.IMAGE]),delete t.IMAGE_QUOTA,t.IMAGE_QUOTA={};for(var a=0;a<n.length;a++)t.IMAGE_QUOTA[n[a].ID]=n[a];var s=[];$.isArray(t.NETWORK_QUOTA.NETWORK)?s=t.NETWORK_QUOTA.NETWORK:t.NETWORK_QUOTA.NETWORK&&(s=[t.NETWORK_QUOTA.NETWORK]),delete t.NETWORK_QUOTA,t.NETWORK_QUOTA={};for(var a=0;a<s.length;a++)t.NETWORK_QUOTA[s[a].ID]=s[a];return t}var o={VM_QUOTA:{VM:{CPU:d,MEMORY:d,VMS:d,VOLATILE_SIZE:d}},DATASTORE_QUOTA:{},IMAGE_QUOTA:{},NETWORK_QUOTA:{}},l={VM_QUOTA:{VM:{CPU:d,MEMORY:d,VMS:d,VOLATILE_SIZE:d}},DATASTORE_QUOTA:{},IMAGE_QUOTA:{},NETWORK_QUOTA:{}},c=t("./quota-limits"),d=(c.QUOTA_LIMIT_DEFAULT,c.QUOTA_LIMIT_UNLIMITED);return{setDefaultUserQuotas:e,getDefaultUserQuotas:n,setDefaultGroupQuotas:a,getDefaultGroupQuotas:s,getDefaultQuotas:i,default_quotas:r}}),define("opennebula/group",["require","utils/quotas/quota-defaults","./action","./helper","./error"],function(t){var e=t("utils/quotas/quota-defaults"),a=t("./action"),n=t("./helper"),s=(t("./error"),"GROUP"),i={resource:s,create:function(t){a.create(t,s)},del:function(t){a.del(t,s)},list:function(t){a.list(t,s,null,function(t){var a=n.pool(s,t);e.setDefaultGroupQuotas(e.default_quotas(t.GROUP_POOL.DEFAULT_GROUP_QUOTAS));var i=n.pool_hash_processing("GROUP_POOL","QUOTAS",t);return $.each(a,function(){var t=i[this[s].ID];void 0!=t&&(this[s].VM_QUOTA=t.QUOTAS.VM_QUOTA)}),a})},update:function(t){var e={template_raw:t.data.extra_param};a.simple_action(t,s,"update",e)},set_quota:function(t){var e={quotas:t.data.extra_param};a.simple_action(t,s,"set_quota",e)},show:function(t){var n=t.success;t.success=function(t,a){return e.setDefaultGroupQuotas(e.default_quotas(a.GROUP.DEFAULT_GROUP_QUOTAS)),n?n(t,a):null},a.show(t,s)},accounting:function(t){a.monitor(t,s,!1)},add_admin:function(t){var e=t.data.extra_param;a.simple_action(t,s,"add_admin",e)},del_admin:function(t){var e=t.data.extra_param;a.simple_action(t,s,"del_admin",e)},getName:function(t){return a.getName(t,s)}};return i}),define("opennebula/host",["require","./action"],function(t){var e=t("./action"),a="HOST",n=["INIT","MONITORING_MONITORED","MONITORED","ERROR","DISABLED","MONITORING_ERROR","MONITORING_INIT","MONITORING_DISABLED"],s=["INIT","UPDATE","ON","ERROR","OFF","RETRY","INIT","OFF"],i={resource:a,stateStr:function(t){return n[t]},simpleStateStr:function(t){return s[t]},create:function(t){e.create(t,a)},del:function(t){e.del(t,a)},list:function(t){e.list(t,a)},list_in_zone:function(t){e.list_in_zone(t,a)},show:function(t){e.show(t,a)},update:function(t){var n={template_raw:t.data.extra_param};e.simple_action(t,a,"update",n)},fetch_template:function(t){e.show(t,a,"template")},enable:function(t){e.simple_action(t,a,"enable")},disable:function(t){e.simple_action(t,a,"disable")},monitor:function(t){e.monitor(t,a,!1)},pool_monitor:function(t){e.monitor(t,a,!0)},rename:function(t){var n=t.data.extra_param;e.simple_action(t,a,"rename",n)},getName:function(t){return e.getName(t,a)}};return i}),define("opennebula/image",["require","./action"],function(t){var e=t("./action"),a="IMAGE",n=["INIT","READY","USED","DISABLED","LOCKED","ERROR","CLONE","DELETE","USED_PERS"],s=["OS","CDROM","DATABLOCK","KERNEL","RAMDISK","CONTEXT"],i={resource:a,stateStr:function(t){return n[t]},typeStr:function(t){return s[t]},create:function(t){e.create(t,a)},del:function(t){e.del(t,a)},list:function(t){e.list(t,a)},show:function(t){e.show(t,a)},chown:function(t){e.chown(t,a)},chgrp:function(t){e.chgrp(t,a)},chmod:function(t){var n=t.data.extra_param;e.simple_action(t,a,"chmod",n)},update:function(t){var n={template_raw:t.data.extra_param};e.simple_action(t,a,"update",n)},fetch_template:function(t){e.show(t,a,"template")},enable:function(t){e.simple_action(t,a,"enable")},disable:function(t){e.simple_action(t,a,"disable")},persistent:function(t){e.simple_action(t,a,"persistent")},nonpersistent:function(t){e.simple_action(t,a,"nonpersistent")},chtype:function(t){var n={type:t.data.extra_param};e.simple_action(t,a,"chtype",n)},clone:function(t){var n=t.data.extra_param?t.data.extra_param:{};e.simple_action(t,a,"clone",n)},rename:function(t){var n=t.data.extra_param;e.simple_action(t,a,"rename",n)},getName:function(t){return e.getName(t,a)}};return i}),define("opennebula/marketplace",["require","./action","./error","./helper","utils/notifier","utils/locale"],function(t){var e=t("./action"),a=t("./error"),n=t("./helper"),s=t("utils/notifier"),i=t("utils/locale"),r="MARKETPLACE",o={resource:r,show:function(t){t.error=function(){return s.notifyError(i.tr("Cannot connect to OpenNebula Marketplace"))},e.show(t,r)},list:function(t){var e=t.success,s=t.error,i=t.timeout||!1,r=n.request("MARKETPLACE","list");$.ajax({url:"marketplace",type:"GET",data:{timeout:i},dataType:"json",success:function(t){return $(".marketplace_error_message").hide(),e?e(r,t):null},error:function(t){return $(".marketplace_error_message").show(),s?s(r,a(t)):null}})}};return o}),define("opennebula/network",["require","./action"],function(t){var e=t("./action"),a="VNET",n={resource:a,create:function(t){e.create(t,a)},del:function(t){e.del(t,a)},list:function(t){e.list(t,a)},list_in_zone:function(t){e.list_in_zone(t,a)},show:function(t){e.show(t,a)},chown:function(t){e.chown(t,a)},chgrp:function(t){e.chgrp(t,a)},chmod:function(t){var n=t.data.extra_param;e.simple_action(t,a,"chmod",n)},publish:function(t){e.simple_action(t,a,"publish")},unpublish:function(t){e.simple_action(t,a,"unpublish")},hold:function(t){var n=t.data.extra_param;e.simple_action(t,a,"hold",n)},release:function(t){var n=t.data.extra_param;e.simple_action(t,a,"release",n)},add_ar:function(t){var n={ar_template:t.data.extra_param};e.simple_action(t,a,"add_ar",n)},rm_ar:function(t){var n=t.data.extra_param;e.simple_action(t,a,"rm_ar",n)},update_ar:function(t){var n={ar_template:t.data.extra_param};e.simple_action(t,a,"update_ar",n)},reserve:function(t){var n=t.data.extra_param;e.simple_action(t,a,"reserve",n)},update:function(t){var n={template_raw:t.data.extra_param};e.simple_action(t,a,"update",n)},fetch_template:function(t){e.show(t,a,"template")},rename:function(t){var n=t.data.extra_param;e.simple_action(t,a,"rename",n)},getName:function(t){return e.getName(t,a)}};return n}),define("tabs/oneflow-services-tab/tabId",["require"],function(){return"oneflow-services"}),define("tabs/oneflow-services-tab/panels/roles/panelId",["require"],function(){return"service_roles_tab"}),define("opennebula/role",["require","./action","./error","./helper","utils/locale","tabs/oneflow-services-tab/tabId","tabs/oneflow-services-tab/panels/roles/panelId"],function(t){function e(){var t=$("#"+l+" #"+c),e={period:$("#batch_action_period",t).val(),number:$("#batch_action_number",t).val()};return e}var a=t("./action"),n=t("./error"),s=t("./helper"),i=t("utils/locale"),r="DOCUMENT",o="service",l=t("tabs/oneflow-services-tab/tabId"),c=t("tabs/oneflow-services-tab/panels/roles/panelId"),d={resource:r,state:function(t){t=t?t:0;var e=[i.tr("PENDING"),i.tr("DEPLOYING"),i.tr("RUNNING"),i.tr("UNDEPLOYING"),i.tr("WARNING"),i.tr("DONE"),i.tr("FAILED_UNDEPLOYING"),i.tr("FAILED_DEPLOYING"),i.tr("SCALING"),i.tr("FAILED_SCALING"),i.tr("COOLDOWN")][t];return e?e:t},hold:function(t){a.simple_action(t,r,"hold",e(),o)},release:function(t){a.simple_action(t,r,"release",e(),o)},suspend:function(t){a.simple_action(t,r,"suspend",e(),o)},resume:function(t){a.simple_action(t,r,"resume",e(),o)},stop:function(t){a.simple_action(t,r,"stop",e(),o)},boot:function(t){a.simple_action(t,r,"boot",e(),o)},delete_recreate:function(t){a.simple_action(t,r,"delete-recreate",e(),o)},reboot:function(t){a.simple_action(t,r,"reboot",e(),o)},reboot_hard:function(t){a.simple_action(t,r,"reboot-hard",e(),o)},poweroff:function(t){a.simple_action(t,r,"poweroff",e(),o)},poweroff_hard:function(t){a.simple_action(t,r,"poweroff-hard",e(),o)},undeploy:function(t){a.simple_action(t,r,"undeploy",e(),o)},undeploy_hard:function(t){a.simple_action(t,r,"undeploy-hard",e(),o)},snapshot_create:function(t){a.simple_action(t,r,"snapshot-create",e(),o)},shutdown:function(t){a.simple_action(t,r,"shutdown",e(),o)},cancel:function(t){a.simple_action(t,r,"shutdown-hard",e(),o)},del:function(t){a.simple_action(t,r,"delete",e(),o)},recover:function(t){a.simple_action(t,r,"recover",null,o)},update:function(t){var e=s.request(r,"update",t.data.id);$.ajax({url:o+"/"+t.data.id,type:"PUT",dataType:"json",contentType:"application/json; charset=utf-8",data:JSON.stringify(t.data.extra_param),success:function(a){return t.success?t.success(e,a):null},error:function(a){return t.error?t.error(e,n(a)):null}})}};return d}),define("opennebula/securitygroup",["require","./action"],function(t){var e=t("./action"),a="SECURITY_GROUP",n={resource:"SECURITY_GROUP",create:function(t){e.create(t,a)},del:function(t){e.del(t,a)},list:function(t){e.list(t,a)},show:function(t){e.show(t,a)},chown:function(t){e.chown(t,a)},chgrp:function(t){e.chgrp(t,a)},chmod:function(t){var n=t.data.extra_param;e.simple_action(t,a,"chmod",n)},update:function(t){var n={template_raw:t.data.extra_param};e.simple_action(t,a,"update",n)},fetch_template:function(t){e.show(t,a,"template")},clone:function(t){var n=t.data.extra_param?t.data.extra_param:"",s={name:n};e.simple_action(t,a,"clone",s)},rename:function(t){var n=t.data.extra_param;e.simple_action(t,a,"rename",n)},getName:function(t){return e.getName(t,a)}};return n}),define("opennebula/service",["require","./action","utils/locale"],function(t){var e=t("./action"),a=t("utils/locale"),n="DOCUMENT",s="service",i="SERVICE",r={resource:n,del:function(t){t.cache_name=i,e.del(t,n,s)},list:function(t){t.cache_name=i,e.list(t,n,s)},show:function(t){t.cache_name=i,e.show(t,n,!1,s)},chown:function(t){t.cache_name=i,e.chown(t,n,s)},chgrp:function(t){t.cache_name=i,e.chgrp(t,n,s)},chmod:function(t){t.cache_name=i;var a=t.data.extra_param;e.simple_action(t,n,"chmod",a,s)},shutdown:function(t){t.cache_name=i,e.simple_action(t,n,"shutdown",null,s)},recover:function(t){t.cache_name=i,e.simple_action(t,n,"recover",null,s)},state:function(t){var e=[a.tr("PENDING"),a.tr("DEPLOYING"),a.tr("RUNNING"),a.tr("UNDEPLOYING"),a.tr("WARNING"),a.tr("DONE"),a.tr("FAILED_UNDEPLOYING"),a.tr("FAILED_DEPLOYING"),a.tr("SCALING"),a.tr("FAILED_SCALING"),a.tr("COOLDOWN")][t];return e?e:t},getName:function(t){return e.getName(t,i)}};return r}),define("opennebula/servicetemplate",["require","./action"],function(t){var e=t("./action"),a="DOCUMENT",n="service_template",s="SERVICE_TEMPLATE",i={resource:a,create:function(t){t.cache_name=s,e.create(t,a,n)},instantiate:function(t){t.cache_name=s;var i=t.data.extra_param;e.simple_action(t,a,"instantiate",i,n)},update:function(t){t.cache_name=s;var i={template_json:t.data.extra_param};e.simple_action(t,a,"update",i,n)},del:function(t){t.cache_name=s,e.del(t,a,n)},list:function(t){t.cache_name=s,e.list(t,a,n)},show:function(t){t.cache_name=s,e.show(t,a,!1,n)},chown:function(t){t.cache_name=s,e.chown(t,a,n)},chgrp:function(t){t.cache_name=s,e.chgrp(t,a,n)},chmod:function(t){t.cache_name=s;var i=t.data.extra_param;e.simple_action(t,a,"chmod",i,n)},getName:function(t){return e.getName(t,s)}};return i}),define("opennebula/support",["require","./action"],function(t){var e=t("./action"),a="REQUEST",n="support/request",s="REQUEST",i={resource:a,create:function(t){e.create(t,a,n)},update:function(t){e.simple_action(t,a,"update",t.data.extra_param,n)},list:function(t){t.cache_name=s,e.clear_cache(t.cache_name),e.list(t,a,n)},show:function(t){e.show(t,a,!1,n)}};return i}),define("opennebula/template",["require","./action"],function(t){var e=t("./action"),a="VMTEMPLATE",n={resource:a,create:function(t){e.create(t,a)},del:function(t){e.del(t,a)},list:function(t){e.list(t,a)},show:function(t){e.show(t,a)},chown:function(t){e.chown(t,a)},chgrp:function(t){e.chgrp(t,a)},chmod:function(t){var n=t.data.extra_param;e.simple_action(t,a,"chmod",n)},update:function(t){var n=t.data.extra_param;e.simple_action(t,a,"update",n)},fetch_template:function(t){e.show(t,a,"template")},publish:function(t){e.simple_action(t,a,"publish")},unpublish:function(t){e.simple_action(t,a,"unpublish")},instantiate:function(t){var n=t.data.extra_param?t.data.extra_param:{};e.simple_action(t,a,"instantiate",n)},clone:function(t){var n=t.data.extra_param?t.data.extra_param:"",s={name:n};e.simple_action(t,a,"clone",s)},rename:function(t){var n=t.data.extra_param;e.simple_action(t,a,"rename",n)},getName:function(t){return e.getName(t,a)}};return n}),define("opennebula/user",["require","utils/quotas/quota-defaults","./action","./helper","./error"],function(t){var e=t("utils/quotas/quota-defaults"),a=t("./action"),n=t("./helper"),s=(t("./error"),"USER"),i={resource:s,create:function(t){a.create(t,s)},del:function(t){a.del(t,s)},list:function(t){a.list(t,s,null,function(t){var a=n.pool(s,t);e.setDefaultUserQuotas(e.default_quotas(t.USER_POOL.DEFAULT_USER_QUOTAS));var i=n.pool_hash_processing("USER_POOL","QUOTAS",t);return $.each(a,function(){var t=i[this[s].ID];void 0!=t&&(this[s].VM_QUOTA=t.QUOTAS.VM_QUOTA)}),a})},show:function(t){var n=t.success;t.success=function(t,a){return e.setDefaultUserQuotas(e.default_quotas(a.USER.DEFAULT_USER_QUOTAS)),n?n(t,a):null},a.show(t,s)},passwd:function(t){var e={password:t.data.extra_param};a.simple_action(t,s,"passwd",e)},chgrp:function(t){var e={group_id:t.data.extra_param};a.simple_action(t,s,"chgrp",e)},chauth:function(t){var e={auth_driver:t.data.extra_param};a.simple_action(t,s,"chauth",e)},update:function(t){var e={template_raw:t.data.extra_param};a.simple_action(t,s,"update",e)},fetch_template:function(t){a.show(t,s,"template")},accounting:function(t){a.monitor(t,s,!1)},set_quota:function(t){var e={quotas:t.data.extra_param};a.simple_action(t,s,"set_quota",e)},addgroup:function(t){var e={group_id:t.data.extra_param};a.simple_action(t,s,"addgroup",e)},delgroup:function(t){var e={group_id:t.data.extra_param};a.simple_action(t,s,"delgroup",e)},getName:function(t){return a.getName(t,s)}};return i}),define("opennebula/vdc",["require","./action"],function(t){var e=t("./action"),a="VDC",n={resource:a,create:function(t){e.create(t,a)},del:function(t){e.del(t,a)},list:function(t){e.list(t,a)},show:function(t){e.show(t,a)},update:function(t){var n={template_raw:t.data.extra_param};e.simple_action(t,a,"update",n)},fetch_template:function(t){e.show(t,a,"template")},rename:function(t){var n=t.data.extra_param;e.simple_action(t,a,"rename",n)},add_group:function(t){var n=t.data.extra_param;e.simple_action(t,a,"add_group",n)},del_group:function(t){var n=t.data.extra_param;e.simple_action(t,a,"del_group",n)},add_cluster:function(t){var n=t.data.extra_param;e.simple_action(t,a,"add_cluster",n)},del_cluster:function(t){var n=t.data.extra_param;e.simple_action(t,a,"del_cluster",n)},add_host:function(t){var n=t.data.extra_param;e.simple_action(t,a,"add_host",n)},del_host:function(t){var n=t.data.extra_param;e.simple_action(t,a,"del_host",n)},add_datastore:function(t){var n=t.data.extra_param;e.simple_action(t,a,"add_datastore",n)},del_datastore:function(t){var n=t.data.extra_param;e.simple_action(t,a,"del_datastore",n)},add_vnet:function(t){var n=t.data.extra_param;e.simple_action(t,a,"add_vnet",n)},del_vnet:function(t){var n=t.data.extra_param;e.simple_action(t,a,"del_vnet",n)},getName:function(t){return e.getName(t,a)}};return n}),define("opennebula/vm",["require","./action","./helper","./error"],function(t){function e(t){if(t.HISTORY_RECORDS&&t.HISTORY_RECORDS.HISTORY){var e=t.HISTORY_RECORDS.HISTORY;return e.constructor==Array?e[e.length-1]:e}return null}function a(t){var a=e(t);return a?-1==$.inArray(a.VMMMAD,["vcenter","ec2","az","sl"]):!1}function n(t){var a=e(t);return a?-1==$.inArray(a.VMMMAD,["ec2","az","sl"]):!1}function s(t){var e,a=t.TEMPLATE,n={};return $.each(b,function(t,s){e=a[s],e&&(n[s]=e)}),n}function i(t){var e,a=t.TEMPLATE,n={};return $.each(v,function(t,s){e=a[s],e&&(n[s]=e)}),n}function r(t,e){var e=e||"<br>",a=t.TEMPLATE.NIC,n=[];void 0!=a&&($.isArray(a)||(a=[a]),$.each(a,function(t,e){e.IP&&n.push(e.IP),e.IP6_GLOBAL&&n.push(e.IP6_GLOBAL),e.IP6_ULA&&n.push(e.IP6_ULA)}));var s,i=t.TEMPLATE;return $.each(b,function(t,e){s=i[e],s&&-1==$.inArray(s,n)&&n.push(s)}),n.length>0?n.join(e):"--"}function o(t){var e=t.TEMPLATE.GRAPHICS,a=parseInt(t.LCM_STATE);return e&&e.TYPE&&"vnc"==e.TYPE.toLowerCase()&&-1!=$.inArray(a,_)}function l(t){var e=t.TEMPLATE.GRAPHICS,a=parseInt(t.LCM_STATE);return e&&e.TYPE&&"spice"==e.TYPE.toLowerCase()&&-1!=$.inArray(a,_)}var c=t("./action"),d=t("./helper"),u=t("./error"),p="VM",h=["INIT","PENDING","HOLD","ACTIVE","STOPPED","SUSPENDED","DONE","FAILED","POWEROFF","UNDEPLOYED"],f=["LCM_INIT","PROLOG","BOOT","RUNNING","MIGRATE","SAVE_STOP","SAVE_SUSPEND","SAVE_MIGRATE","PROLOG_MIGRATE","PROLOG_RESUME","EPILOG_STOP","EPILOG","SHUTDOWN","CANCEL","FAILURE","CLEANUP_RESUBMIT","UNKNOWN","HOTPLUG","SHUTDOWN_POWEROFF","BOOT_UNKNOWN","BOOT_POWEROFF","BOOT_SUSPENDED","BOOT_STOPPED","CLEANUP_DELETE","HOTPLUG_SNAPSHOT","HOTPLUG_NIC","HOTPLUG_SAVEAS","HOTPLUG_SAVEAS_POWEROFF","HOTPLUG_SAVEAS_SUSPENDED","SHUTDOWN_UNDEPLOY","EPILOG_UNDEPLOY","PROLOG_UNDEPLOY","BOOT_UNDEPLOY","HOTPLUG_PROLOG_POWEROFF","HOTPLUG_EPILOG_POWEROFF","BOOT_MIGRATE","BOOT_FAILURE","BOOT_MIGRATE_FAILURE","PROLOG_MIGRATE_FAILURE","PROLOG_FAILURE","EPILOG_FAILURE","EPILOG_STOP_FAILURE","EPILOG_UNDEPLOY_FAILURE","PROLOG_MIGRATE_POWEROFF","PROLOG_MIGRATE_POWEROFF_FAILURE","PROLOG_MIGRATE_SUSPEND","PROLOG_MIGRATE_SUSPEND_FAILURE","BOOT_UNDEPLOY_FAILURE","BOOT_STOPPED_FAILURE","PROLOG_RESUME_FAILURE","PROLOG_UNDEPLOY_FAILURE"],m=["LCM_INIT","PROLOG","BOOT","RUNNING","MIGRATE","SAVE","SAVE","SAVE","MIGRATE","PROLOG","EPILOG","EPILOG","SHUTDOWN","SHUTDOWN","FAILURE","CLEANUP","UNKNOWN","HOTPLUG","SHUTDOWN","BOOT","BOOT","BOOT","BOOT","CLEANUP","SNAPSHOT","HOTPLUG","HOTPLUG","HOTPLUG","HOTPLUG","SHUTDOWN","EPILOG","PROLOG","BOOT","HOTPLUG","HOTPLUG","BOOT","FAILURE","FAILURE","FAILURE","FAILURE","FAILURE","FAILURE","FAILURE","MIGRATE","FAILURE","MIGRATE","FAILURE","FAILURE","FAILURE","FAILURE","FAILURE"],_=[3,4,12,13,16,17,18,24,25,26,27,28,29],b=["GUEST_IP","AWS_IP_ADDRESS","AZ_IPADDRESS","SL_PRIMARYIPADDRESS"],v=["GUEST_IP","AWS_IP_ADDRESS","AWS_DNS_NAME","AWS_PRIVATE_IP_ADDRESS","AWS_PRIVATE_DNS_NAME","AWS_SECURITY_GROUPS","AZ_IPADDRESS","SL_PRIMARYIPADDRESS"],g=["NONE","ERROR","USER"],y=["none","migrate","live-migrate","shutdown","shutdown-hard","undeploy","undeploy-hard","hold","release","stop","suspend","resume","boot","delete","delete-recreate","reboot","reboot-hard","resched","unresched","poweroff","poweroff-hard","disk-attach","disk-detach","nic-attach","nic-detach"],w={resource:p,state:{INIT:0,PENDING:1,HOLD:2,ACTIVE:3,STOPPED:4,SUSPENDED:5,DONE:6,FAILED:7,POWEROFF:8,UNDEPLOYED:9},lcm_state:{LCM_INIT:0,PROLOG:1,BOOT:2,RUNNING:3,MIGRATE:4,SAVE_STOP:5,SAVE_SUSPEND:6,SAVE_MIGRATE:7,PROLOG_MIGRATE:8,PROLOG_RESUME:9,EPILOG_STOP:10,EPILOG:11,SHUTDOWN:12,CANCEL:13,FAILURE:14,CLEANUP_RESUBMIT:15,UNKNOWN:16,HOTPLUG:17,SHUTDOWN_POWEROFF:18,BOOT_UNKNOWN:19,BOOT_POWEROFF:20,BOOT_SUSPENDED:21,BOOT_STOPPED:22,CLEANUP_DELETE:23,HOTPLUG_SNAPSHOT:24,HOTPLUG_NIC:25,HOTPLUG_SAVEAS:26,HOTPLUG_SAVEAS_POWEROFF:27,HOTPLUG_SAVEAS_SUSPENDED:28,SHUTDOWN_UNDEPLOY:29,EPILOG_UNDEPLOY:30,PROLOG_UNDEPLOY:31,BOOT_UNDEPLOY:32,HOTPLUG_PROLOG_POWEROFF:33,HOTPLUG_EPILOG_POWEROFF:34,BOOT_MIGRATE:35,BOOT_FAILURE:36,BOOT_MIGRATE_FAILURE:37,PROLOG_MIGRATE_FAILURE:38,PROLOG_FAILURE:39,EPILOG_FAILURE:40,EPILOG_STOP_FAILURE:41,EPILOG_UNDEPLOY_FAILURE:42,PROLOG_MIGRATE_POWEROFF:43,PROLOG_MIGRATE_POWEROFF_FAILURE:44,PROLOG_MIGRATE_SUSPEND:45,PROLOG_MIGRATE_SUSPEND_FAILURE:46,BOOT_UNDEPLOY_FAILURE:47,BOOT_STOPPED_FAILURE:48,PROLOG_RESUME_FAILURE:49,PROLOG_UNDEPLOY_FAILURE:50},create:function(t){c.create(t,p)},del:function(t){c.del(t,p)},list:function(t){c.list(t,p)},show:function(t){c.show(t,p)},chown:function(t){c.chown(t,p)},chgrp:function(t){c.chgrp(t,p)},chmod:function(t){var e=t.data.extra_param;c.simple_action(t,p,"chmod",e)},shutdown:function(t){c.simple_action(t,p,"shutdown")},hold:function(t){c.simple_action(t,p,"hold")},release:function(t){c.simple_action(t,p,"release")},stop:function(t){c.simple_action(t,p,"stop")},cancel:function(t){c.simple_action(t,p,"cancel")},suspend:function(t){c.simple_action(t,p,"suspend")},resume:function(t){c.simple_action(t,p,"resume")},resubmit:function(t){c.simple_action(t,p,"resubmit")},poweroff:function(t){var e={hard:!1};c.simple_action(t,p,"poweroff",e)},poweroff_hard:function(t){var e={hard:!0};c.simple_action(t,p,"poweroff",e)},undeploy:function(t){var e={hard:!1};c.simple_action(t,p,"undeploy",e)},undeploy_hard:function(t){var e={hard:!0};c.simple_action(t,p,"undeploy",e)},reboot:function(t){c.simple_action(t,p,"reboot")},reset:function(t){c.simple_action(t,p,"reset")},log:function(t){c.show(t,p,"log")},deploy:function(t){var e=t.data.extra_param;c.simple_action(t,p,"deploy",e)},livemigrate:function(t){var e=t.data.extra_param;c.simple_action(t,p,"livemigrate",e)},migrate:function(t){var e=t.data.extra_param;c.simple_action(t,p,"migrate",e)},saveas:function(t){var e=t.data.extra_param;c.simple_action(t,p,"saveas",e)},disk_snapshot_cancel:function(t){var e={disk_id:t.data.extra_param};c.simple_action(t,p,"disk_snapshot_cancel",e)},snapshot_create:function(t){var e=t.data.extra_param;c.simple_action(t,p,"snapshot_create",e)},snapshot_revert:function(t){var e=t.data.extra_param;c.simple_action(t,p,"snapshot_revert",e)},snapshot_delete:function(t){var e=t.data.extra_param;c.simple_action(t,p,"snapshot_delete",e)},vnc:function(t,e){var a=t.success,n=t.error,s=t.data.id,i=p,r=e,o=(d.action(r),d.request(i,r,s));$.ajax({url:"vm/"+s+"/startvnc",type:"POST",dataType:"json",success:function(t){return a?a(o,t):null},error:function(t){return n?n(o,u(t)):null}})},update:function(t){var e={template_raw:t.data.extra_param};c.simple_action(t,p,"update",e)},monitor:function(t){c.monitor(t,p,!1)},pool_monitor:function(t){c.monitor(t,p,!0)},resize:function(t){var e=t.data.extra_param;c.simple_action(t,p,"resize",e)},attachdisk:function(t){var e={disk_template:t.data.extra_param};c.simple_action(t,p,"attachdisk",e)},detachdisk:function(t){var e={disk_id:t.data.extra_param};c.simple_action(t,p,"detachdisk",e)},attachnic:function(t){var e={nic_template:t.data.extra_param};c.simple_action(t,p,"attachnic",e)},detachnic:function(t){var e={nic_id:t.data.extra_param};c.simple_action(t,p,"detachnic",e)},rename:function(t){var e=t.data.extra_param;c.simple_action(t,p,"rename",e)},resched:function(t){c.simple_action(t,p,"resched")},unresched:function(t){c.simple_action(t,p,"unresched")},recover:function(t){var e={result:t.data.extra_param};c.simple_action(t,p,"recover",e)},accounting:function(t){c.accounting(t,p)},showback:function(t){c.showback(t,p)},save_as_template:function(t){var e=t.data.extra_param;c.simple_action(t,p,"save_as_template",e)},stateStr:function(t){return h[t]},lcmStateStr:function(t){return f[t]},shortLcmStateStr:function(t){return m[t]},hostnameStr:function(t){var a=h[t.STATE],n="--";if("ACTIVE"==a||"SUSPENDED"==a||"POWEROFF"==a){var s=e(t);s&&(n=s.HOSTNAME)}return n},migrateActionStr:function(t){return y[t]},migrateReasonStr:function(t){return g[t]},ipsStr:r,retrieveExternalIPs:s,retrieveExternalNetworkAttrs:i,isNICGraphsSupported:a,isNICAttachSupported:n,isVNCSupported:o,isSPICESupported:l,getName:function(t){return c.getName(t,p)}};return w}),define("opennebula/zone",["require","./action"],function(t){var e=t("./action"),a="ZONE",n={resource:a,create:function(t){e.create(t,a)},del:function(t){e.del(t,a)},list:function(t){e.list(t,a)},show:function(t){e.show(t,a)},update:function(t){var n={template_raw:t.data.extra_param};e.simple_action(t,a,"update",n)},fetch_template:function(t){e.show(t,a,"template")},rename:function(t){var n=t.data.extra_param;e.simple_action(t,a,"rename",n)},getName:function(t){return e.getName(t,a)}};return n}),define("opennebula",["require","jquery","./opennebula/helper","./opennebula/action","./opennebula/auth","./opennebula/error","./opennebula/acl","./opennebula/cluster","./opennebula/datastore","./opennebula/group","./opennebula/host","./opennebula/image","./opennebula/marketplace","./opennebula/network","./opennebula/role","./opennebula/securitygroup","./opennebula/service","./opennebula/servicetemplate","./opennebula/support","./opennebula/template","./opennebula/user","./opennebula/vdc","./opennebula/vm","./opennebula/zone"],function(t){t("jquery");
var e=t("./opennebula/helper"),a=t("./opennebula/action"),n=t("./opennebula/auth"),s=t("./opennebula/error"),i=t("./opennebula/acl"),r=t("./opennebula/cluster"),o=t("./opennebula/datastore"),l=t("./opennebula/group"),c=t("./opennebula/host"),d=t("./opennebula/image"),u=t("./opennebula/marketplace"),p=t("./opennebula/network"),h=t("./opennebula/role"),f=t("./opennebula/securitygroup"),m=t("./opennebula/service"),_=t("./opennebula/servicetemplate"),b=t("./opennebula/support"),v=t("./opennebula/template"),g=t("./opennebula/user"),y=t("./opennebula/vdc"),w=t("./opennebula/vm"),T=t("./opennebula/zone");"undefined"!=typeof csrftoken&&$.ajaxPrefilter(function(t,e){var a=e.data;"string"==typeof a?(a=JSON.parse(a),a.csrftoken=csrftoken,t.data=JSON.stringify(a)):(a=a||{},a.csrftoken=csrftoken,t.data=$.param(a))}),$.ajaxSetup({converters:{"text json":function(t){return jQuery.parseJSON(jQuery("<div/>").text(t).html())}}});var E={Helper:e,Action:a,Auth:n,Error:s,Acl:i,Cluster:r,Datastore:o,Group:l,Host:c,Image:d,File:d,Marketplace:u,Network:p,Role:h,SecurityGroup:f,Service:m,ServiceTemplate:_,Support:b,Template:v,User:g,Vdc:y,VM:w,Zone:T};return E}),function(t){"use strict";Foundation.libs.accordion={name:"accordion",version:"5.5.1",settings:{content_class:"content",active_class:"active",multi_expand:!1,toggleable:!0,callback:function(){}},init:function(t,e,a){this.bindings(e,a)},events:function(){var e=this,a=this.S;a(this.scope).off(".fndtn.accordion").on("click.fndtn.accordion","["+this.attr_name()+"] > .accordion-navigation > a",function(n){var s=a(this).closest("["+e.attr_name()+"]"),i=e.attr_name()+"="+s.attr(e.attr_name()),r=s.data(e.attr_name(!0)+"-init")||e.settings,o=a("#"+this.href.split("#")[1]),l=t("> .accordion-navigation",s),c=l.children("."+r.content_class),d=c.filter("."+r.active_class);return n.preventDefault(),s.attr(e.attr_name())&&(c=c.add("["+i+"] dd > ."+r.content_class),l=l.add("["+i+"] .accordion-navigation")),r.toggleable&&o.is(d)?(o.parent(".accordion-navigation").toggleClass(r.active_class,!1),o.toggleClass(r.active_class,!1),r.callback(o),o.triggerHandler("toggled",[s]),void s.triggerHandler("toggled",[o])):(r.multi_expand||(c.removeClass(r.active_class),l.removeClass(r.active_class)),o.addClass(r.active_class).parent().addClass(r.active_class),r.callback(o),o.triggerHandler("toggled",[s]),void s.triggerHandler("toggled",[o]))})},off:function(){},reflow:function(){}}}(jQuery,window,window.document),define("foundation.accordion",["foundation.core"],function(){}),function(t,e,a){var n=function(n){function s(t){var e,a,i={};n.each(t,function(n){(e=n.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(e[1]+" ")&&(a=n.replace(e[0],e[2].toLowerCase()),i[a]=n,"o"===e[1]&&s(t[n]))}),t._hungarianMap=i}function i(t,e,r){t._hungarianMap||s(t);var o;n.each(e,function(s){o=t._hungarianMap[s],o===a||!r&&e[o]!==a||("o"===o.charAt(0)?(e[o]||(e[o]={}),n.extend(!0,e[o],e[s]),i(t[o],e[o],r)):e[o]=e[s])})}function r(t){var e=Ke.defaults.oLanguage,a=t.sZeroRecords;!t.sEmptyTable&&a&&"No data available in table"===e.sEmptyTable&&Re(t,t,"sZeroRecords","sEmptyTable"),!t.sLoadingRecords&&a&&"Loading..."===e.sLoadingRecords&&Re(t,t,"sZeroRecords","sLoadingRecords"),t.sInfoThousands&&(t.sThousands=t.sInfoThousands),(t=t.sDecimal)&&Be(t)}function o(t){if(fa(t,"ordering","bSort"),fa(t,"orderMulti","bSortMulti"),fa(t,"orderClasses","bSortClasses"),fa(t,"orderCellsTop","bSortCellsTop"),fa(t,"order","aaSorting"),fa(t,"orderFixed","aaSortingFixed"),fa(t,"paging","bPaginate"),fa(t,"pagingType","sPaginationType"),fa(t,"pageLength","iDisplayLength"),fa(t,"searching","bFilter"),t=t.aoSearchCols)for(var e=0,a=t.length;a>e;e++)t[e]&&i(Ke.models.oSearch,t[e])}function l(t){fa(t,"orderable","bSortable"),fa(t,"orderData","aDataSort"),fa(t,"orderSequence","asSorting"),fa(t,"orderDataType","sortDataType")}function c(t){var t=t.oBrowser,e=n("<div/>").css({position:"absolute",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(n("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(n('<div class="test"/>').css({width:"100%",height:10}))).appendTo("body"),a=e.find(".test");t.bScrollOversize=100===a[0].offsetWidth,t.bScrollbarLeft=1!==a.offset().left,e.remove()}function d(t,e,n,s,i,r){var o,l=!1;for(n!==a&&(o=n,l=!0);s!==i;)t.hasOwnProperty(s)&&(o=l?e(o,t[s],s,t):t[s],l=!0,s+=r);return o}function u(t,a){var s=Ke.defaults.column,i=t.aoColumns.length,s=n.extend({},Ke.models.oColumn,s,{nTh:a?a:e.createElement("th"),sTitle:s.sTitle?s.sTitle:a?a.innerHTML:"",aDataSort:s.aDataSort?s.aDataSort:[i],mData:s.mData?s.mData:i,idx:i});t.aoColumns.push(s),s=t.aoPreSearchCols,s[i]=n.extend({},Ke.models.oSearch,s[i]),p(t,i,null)}function p(t,e,s){var e=t.aoColumns[e],r=t.oClasses,o=n(e.nTh);if(!e.sWidthOrig){e.sWidthOrig=o.attr("width")||null;var c=(o.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);c&&(e.sWidthOrig=c[1])}s!==a&&null!==s&&(l(s),i(Ke.defaults.column,s),s.mDataProp!==a&&!s.mData&&(s.mData=s.mDataProp),s.sType&&(e._sManualType=s.sType),s.className&&!s.sClass&&(s.sClass=s.className),n.extend(e,s),Re(e,s,"sWidth","sWidthOrig"),"number"==typeof s.iDataSort&&(e.aDataSort=[s.iDataSort]),Re(e,s,"aDataSort"));var d=e.mData,u=I(d),p=e.mRender?I(e.mRender):null,s=function(t){return"string"==typeof t&&-1!==t.indexOf("@")};e._bAttrSrc=n.isPlainObject(d)&&(s(d.sort)||s(d.type)||s(d.filter)),e.fnGetData=function(t,e,n){var s=u(t,e,a,n);return p&&e?p(s,e,t,n):s},e.fnSetData=function(t,e,a){return x(d)(t,e,a)},"number"!=typeof d&&(t._rowReadObject=!0),t.oFeatures.bSort||(e.bSortable=!1,o.addClass(r.sSortableNone)),t=-1!==n.inArray("asc",e.asSorting),s=-1!==n.inArray("desc",e.asSorting),e.bSortable&&(t||s)?t&&!s?(e.sSortingClass=r.sSortableAsc,e.sSortingClassJUI=r.sSortJUIAscAllowed):!t&&s?(e.sSortingClass=r.sSortableDesc,e.sSortingClassJUI=r.sSortJUIDescAllowed):(e.sSortingClass=r.sSortable,e.sSortingClassJUI=r.sSortJUI):(e.sSortingClass=r.sSortableNone,e.sSortingClassJUI="")}function h(t){if(!1!==t.oFeatures.bAutoWidth){var e=t.aoColumns;_e(t);for(var a=0,n=e.length;n>a;a++)e[a].nTh.style.width=e[a].sWidth}e=t.oScroll,(""!==e.sY||""!==e.sX)&&fe(t),Fe(t,null,"column-sizing",[t])}function f(t,e){var a=b(t,"bVisible");return"number"==typeof a[e]?a[e]:null}function m(t,e){var a=b(t,"bVisible"),a=n.inArray(e,a);return-1!==a?a:null}function _(t){return b(t,"bVisible").length}function b(t,e){var a=[];return n.map(t.aoColumns,function(t,n){t[e]&&a.push(n)}),a}function v(t){var e,n,s,i,r,o,l,c,d,u=t.aoColumns,p=t.aoData,h=Ke.ext.type.detect;for(e=0,n=u.length;n>e;e++)if(l=u[e],d=[],!l.sType&&l._sManualType)l.sType=l._sManualType;else if(!l.sType){for(s=0,i=h.length;i>s;s++){for(r=0,o=p.length;o>r&&(d[r]===a&&(d[r]=T(t,r,e,"type")),c=h[s](d[r],t),c||s===h.length-1)&&"html"!==c;r++);if(c){l.sType=c;break}}l.sType||(l.sType="string")}}function g(t,e,s,i){var r,o,l,c,d,p,h=t.aoColumns;if(e)for(r=e.length-1;r>=0;r--){p=e[r];var f=p.targets!==a?p.targets:p.aTargets;for(n.isArray(f)||(f=[f]),o=0,l=f.length;l>o;o++)if("number"==typeof f[o]&&0<=f[o]){for(;h.length<=f[o];)u(t);i(f[o],p)}else if("number"==typeof f[o]&&0>f[o])i(h.length+f[o],p);else if("string"==typeof f[o])for(c=0,d=h.length;d>c;c++)("_all"==f[o]||n(h[c].nTh).hasClass(f[o]))&&i(c,p)}if(s)for(r=0,t=s.length;t>r;r++)i(r,s[r])}function y(t,e,a,s){var i=t.aoData.length,r=n.extend(!0,{},Ke.models.oRow,{src:a?"dom":"data"});r._aData=e,t.aoData.push(r);for(var e=t.aoColumns,r=0,o=e.length;o>r;r++)a&&E(t,i,r,T(t,i,r)),e[r].sType=null;return t.aiDisplayMaster.push(i),(a||!t.oFeatures.bDeferRender)&&P(t,i,a,s),i}function w(t,e){var a;return e instanceof n||(e=n(e)),e.map(function(e,n){return a=C(t,n),y(t,a.data,n,a.cells)})}function T(t,e,n,s){var i=t.iDraw,r=t.aoColumns[n],o=t.aoData[e]._aData,l=r.sDefaultContent,n=r.fnGetData(o,s,{settings:t,row:e,col:n});if(n===a)return t.iDrawError!=i&&null===l&&(Oe(t,0,"Requested unknown parameter "+("function"==typeof r.mData?"{function}":"'"+r.mData+"'")+" for row "+e,4),t.iDrawError=i),l;if(n!==o&&null!==n||null===l){if("function"==typeof n)return n.call(o)}else n=l;return null===n&&"display"==s?"":n}function E(t,e,a,n){t.aoColumns[a].fnSetData(t.aoData[e]._aData,n,{settings:t,row:e,col:a})}function S(t){return n.map(t.match(/(\\.|[^\.])+/g),function(t){return t.replace(/\\./g,".")})}function I(t){if(n.isPlainObject(t)){var e={};return n.each(t,function(t,a){a&&(e[t]=I(a))}),function(t,n,s,i){var r=e[n]||e._;return r!==a?r(t,n,s,i):t}}if(null===t)return function(t){return t};if("function"==typeof t)return function(e,a,n,s){return t(e,a,n,s)};if("string"==typeof t&&(-1!==t.indexOf(".")||-1!==t.indexOf("[")||-1!==t.indexOf("("))){var s=function(t,e,n){var i,r;if(""!==n){r=S(n);for(var o=0,l=r.length;l>o;o++){if(n=r[o].match(ma),i=r[o].match(_a),n){for(r[o]=r[o].replace(ma,""),""!==r[o]&&(t=t[r[o]]),i=[],r.splice(0,o+1),r=r.join("."),o=0,l=t.length;l>o;o++)i.push(s(t[o],e,r));t=n[0].substring(1,n[0].length-1),t=""===t?i:i.join(t);break}if(i)r[o]=r[o].replace(_a,""),t=t[r[o]]();else{if(null===t||t[r[o]]===a)return a;t=t[r[o]]}}}return t};return function(e,a){return s(e,a,t)}}return function(e){return e[t]}}function x(t){if(n.isPlainObject(t))return x(t._);if(null===t)return function(){};if("function"==typeof t)return function(e,a,n){t(e,"set",a,n)};if("string"==typeof t&&(-1!==t.indexOf(".")||-1!==t.indexOf("[")||-1!==t.indexOf("("))){var e=function(t,n,s){var i,s=S(s);i=s[s.length-1];for(var r,o,l=0,c=s.length-1;c>l;l++){if(r=s[l].match(ma),o=s[l].match(_a),r){for(s[l]=s[l].replace(ma,""),t[s[l]]=[],i=s.slice(),i.splice(0,l+1),r=i.join("."),o=0,c=n.length;c>o;o++)i={},e(i,n[o],r),t[s[l]].push(i);return}o&&(s[l]=s[l].replace(_a,""),t=t[s[l]](n)),(null===t[s[l]]||t[s[l]]===a)&&(t[s[l]]={}),t=t[s[l]]}i.match(_a)?t[i.replace(_a,"")](n):t[i.replace(ma,"")]=n};return function(a,n){return e(a,n,t)}}return function(e,a){e[t]=a}}function A(t){return ca(t.aoData,"_aData")}function M(t){t.aoData.length=0,t.aiDisplayMaster.length=0,t.aiDisplay.length=0}function k(t,e,n){for(var s=-1,i=0,r=t.length;r>i;i++)t[i]==e?s=i:t[i]>e&&t[i]--;-1!=s&&n===a&&t.splice(s,1)}function D(t,e,n,s){var i,r=t.aoData[e],o=function(a,n){for(;a.childNodes.length;)a.removeChild(a.firstChild);a.innerHTML=T(t,e,n,"display")};if("dom"!==n&&(n&&"auto"!==n||"dom"!==r.src)){var l=r.anCells;if(l)if(s!==a)o(l[s],s);else for(n=0,i=l.length;i>n;n++)o(l[n],n)}else r._aData=C(t,r,s,s===a?a:r._aData).data;if(r._aSortData=null,r._aFilterData=null,o=t.aoColumns,s!==a)o[s].sType=null;else{for(n=0,i=o.length;i>n;n++)o[n].sType=null;$(r)}}function C(t,e,s,i){var r,o,l=[],c=e.firstChild,d=0,u=t.aoColumns,p=t._rowReadObject,i=i||p?{}:[],h=function(t,e){if("string"==typeof t){var a=t.indexOf("@");-1!==a&&(a=t.substring(a+1),x(t)(i,e.getAttribute(a)))}},t=function(t){(s===a||s===d)&&(r=u[d],o=n.trim(t.innerHTML),r&&r._bAttrSrc?(x(r.mData._)(i,o),h(r.mData.sort,t),h(r.mData.type,t),h(r.mData.filter,t)):p?(r._setter||(r._setter=x(r.mData)),r._setter(i,o)):i[d]=o),d++};if(c)for(;c;)e=c.nodeName.toUpperCase(),("TD"==e||"TH"==e)&&(t(c),l.push(c)),c=c.nextSibling;else for(l=e.anCells,c=0,e=l.length;e>c;c++)t(l[c]);return{data:i,cells:l}}function P(t,a,n,s){var i,r,o,l,c,d=t.aoData[a],u=d._aData,p=[];if(null===d.nTr){for(i=n||e.createElement("tr"),d.nTr=i,d.anCells=p,i._DT_RowIndex=a,$(d),l=0,c=t.aoColumns.length;c>l;l++)o=t.aoColumns[l],r=n?s[l]:e.createElement(o.sCellType),p.push(r),(!n||o.mRender||o.mData!==l)&&(r.innerHTML=T(t,a,l,"display")),o.sClass&&(r.className+=" "+o.sClass),o.bVisible&&!n?i.appendChild(r):!o.bVisible&&n&&r.parentNode.removeChild(r),o.fnCreatedCell&&o.fnCreatedCell.call(t.oInstance,r,T(t,a,l),u,a,l);Fe(t,"aoRowCreatedCallback",null,[i,u,a])}d.nTr.setAttribute("role","row")}function $(t){var e=t.nTr,a=t._aData;if(e){if(a.DT_RowId&&(e.id=a.DT_RowId),a.DT_RowClass){var s=a.DT_RowClass.split(" ");t.__rowc=t.__rowc?ha(t.__rowc.concat(s)):s,n(e).removeClass(t.__rowc.join(" ")).addClass(a.DT_RowClass)}a.DT_RowData&&n(e).data(a.DT_RowData)}}function O(t){var e,a,s,i,r,o=t.nTHead,l=t.nTFoot,c=0===n("th, td",o).length,d=t.oClasses,u=t.aoColumns;for(c&&(i=n("<tr/>").appendTo(o)),e=0,a=u.length;a>e;e++)r=u[e],s=n(r.nTh).addClass(r.sClass),c&&s.appendTo(i),t.oFeatures.bSort&&(s.addClass(r.sSortingClass),!1!==r.bSortable&&(s.attr("tabindex",t.iTabIndex).attr("aria-controls",t.sTableId),Me(t,r.nTh,e))),r.sTitle!=s.html()&&s.html(r.sTitle),ze(t,"header")(t,s,r,d);if(c&&F(t.aoHeader,o),n(o).find(">tr").attr("role","row"),n(o).find(">tr>th, >tr>td").addClass(d.sHeaderTH),n(l).find(">tr>th, >tr>td").addClass(d.sFooterTH),null!==l)for(t=t.aoFooter[0],e=0,a=t.length;a>e;e++)r=u[e],r.nTf=t[e].cell,r.sClass&&n(r.nTf).addClass(r.sClass)}function R(t,e,s){var i,r,o,l,c=[],d=[],u=t.aoColumns.length;if(e){for(s===a&&(s=!1),i=0,r=e.length;r>i;i++){for(c[i]=e[i].slice(),c[i].nTr=e[i].nTr,o=u-1;o>=0;o--)!t.aoColumns[o].bVisible&&!s&&c[i].splice(o,1);d.push([])}for(i=0,r=c.length;r>i;i++){if(t=c[i].nTr)for(;o=t.firstChild;)t.removeChild(o);for(o=0,e=c[i].length;e>o;o++)if(l=u=1,d[i][o]===a){for(t.appendChild(c[i][o].cell),d[i][o]=1;c[i+u]!==a&&c[i][o].cell==c[i+u][o].cell;)d[i+u][o]=1,u++;for(;c[i][o+l]!==a&&c[i][o].cell==c[i][o+l].cell;){for(s=0;u>s;s++)d[i+s][o+l]=1;l++}n(c[i][o].cell).attr("rowspan",u).attr("colspan",l)}}}}function L(t){var e=Fe(t,"aoPreDrawCallback","preDraw",[t]);if(-1!==n.inArray(!1,e))pe(t,!1);else{var e=[],s=0,i=t.asStripeClasses,r=i.length,o=t.oLanguage,l=t.iInitDisplayStart,c="ssp"==Ve(t),d=t.aiDisplay;t.bDrawing=!0,l!==a&&-1!==l&&(t._iDisplayStart=c?l:l>=t.fnRecordsDisplay()?0:l,t.iInitDisplayStart=-1);var l=t._iDisplayStart,u=t.fnDisplayEnd();if(t.bDeferLoading)t.bDeferLoading=!1,t.iDraw++,pe(t,!1);else if(c){if(!t.bDestroying&&!V(t))return}else t.iDraw++;if(0!==d.length)for(o=c?t.aoData.length:u,c=c?0:l;o>c;c++){var p=d[c],h=t.aoData[p];if(null===h.nTr&&P(t,p),p=h.nTr,0!==r){var f=i[s%r];h._sRowStripe!=f&&(n(p).removeClass(h._sRowStripe).addClass(f),h._sRowStripe=f)}Fe(t,"aoRowCallback",null,[p,h._aData,s,c]),e.push(p),s++}else s=o.sZeroRecords,1==t.iDraw&&"ajax"==Ve(t)?s=o.sLoadingRecords:o.sEmptyTable&&0===t.fnRecordsTotal()&&(s=o.sEmptyTable),e[0]=n("<tr/>",{"class":r?i[0]:""}).append(n("<td />",{valign:"top",colSpan:_(t),"class":t.oClasses.sRowEmpty}).html(s))[0];Fe(t,"aoHeaderCallback","header",[n(t.nTHead).children("tr")[0],A(t),l,u,d]),Fe(t,"aoFooterCallback","footer",[n(t.nTFoot).children("tr")[0],A(t),l,u,d]),i=n(t.nTBody),i.children().detach(),i.append(n(e)),Fe(t,"aoDrawCallback","draw",[t]),t.bSorted=!1,t.bFiltered=!1,t.bDrawing=!1}}function N(t,e){var a=t.oFeatures,n=a.bFilter;a.bSort&&Ie(t),n?j(t,t.oPreviousSearch):t.aiDisplay=t.aiDisplayMaster.slice(),!0!==e&&(t._iDisplayStart=0),t._drawHold=e,L(t),t._drawHold=!1}function U(t){var e=t.oClasses,a=n(t.nTable),a=n("<div/>").insertBefore(a),s=t.oFeatures,i=n("<div/>",{id:t.sTableId+"_wrapper","class":e.sWrapper+(t.nTFoot?"":" "+e.sNoFooter)});t.nHolding=a[0],t.nTableWrapper=i[0],t.nTableReinsertBefore=t.nTable.nextSibling;for(var r,o,l,c,d,u,p=t.sDom.split(""),h=0;h<p.length;h++){if(r=null,o=p[h],"<"==o){if(l=n("<div/>")[0],c=p[h+1],"'"==c||'"'==c){for(d="",u=2;p[h+u]!=c;)d+=p[h+u],u++;"H"==d?d=e.sJUIHeader:"F"==d&&(d=e.sJUIFooter),-1!=d.indexOf(".")?(c=d.split("."),l.id=c[0].substr(1,c[0].length-1),l.className=c[1]):"#"==d.charAt(0)?l.id=d.substr(1,d.length-1):l.className=d,h+=u}i.append(l),i=n(l)}else if(">"==o)i=i.parent();else if("l"==o&&s.bPaginate&&s.bLengthChange)r=le(t);else if("f"==o&&s.bFilter)r=K(t);else if("r"==o&&s.bProcessing)r=ue(t);else if("t"==o)r=he(t);else if("i"==o&&s.bInfo)r=ae(t);else if("p"==o&&s.bPaginate)r=ce(t);else if(0!==Ke.ext.feature.length)for(l=Ke.ext.feature,u=0,c=l.length;c>u;u++)if(o==l[u].cFeature){r=l[u].fnInit(t);break}r&&(l=t.aanFeatures,l[o]||(l[o]=[]),l[o].push(r),i.append(r))}a.replaceWith(i)}function F(t,e){var a,s,i,r,o,l,c,d,u,p,h=n(e).children("tr");for(t.splice(0,t.length),i=0,l=h.length;l>i;i++)t.push([]);for(i=0,l=h.length;l>i;i++)for(a=h[i],s=a.firstChild;s;){if("TD"==s.nodeName.toUpperCase()||"TH"==s.nodeName.toUpperCase()){for(d=1*s.getAttribute("colspan"),u=1*s.getAttribute("rowspan"),d=d&&0!==d&&1!==d?d:1,u=u&&0!==u&&1!==u?u:1,r=0,o=t[i];o[r];)r++;for(c=r,p=1===d?!0:!1,o=0;d>o;o++)for(r=0;u>r;r++)t[i+r][c+o]={cell:s,unique:p},t[i+r].nTr=a}s=s.nextSibling}}function q(t,e,a){var n=[];a||(a=t.aoHeader,e&&(a=[],F(a,e)));for(var e=0,s=a.length;s>e;e++)for(var i=0,r=a[e].length;r>i;i++)!a[e][i].unique||n[i]&&t.bSortCellsTop||(n[i]=a[e][i].cell);return n}function z(t,e,a){if(Fe(t,"aoServerParams","serverParams",[e]),e&&n.isArray(e)){var s={},i=/(.*?)\[\]$/;n.each(e,function(t,e){var a=e.name.match(i);a?(a=a[0],s[a]||(s[a]=[]),s[a].push(e.value)):s[e.name]=e.value}),e=s}var r,o=t.ajax,l=t.oInstance;if(n.isPlainObject(o)&&o.data){r=o.data;var c=n.isFunction(r)?r(e):r,e=n.isFunction(r)&&c?c:n.extend(!0,e,c);delete o.data}c={data:e,success:function(e){var n=e.error||e.sError;n&&t.oApi._fnLog(t,0,n),t.json=e,Fe(t,null,"xhr",[t,e]),a(e)},dataType:"json",cache:!1,type:t.sServerMethod,error:function(e,a){var n=t.oApi._fnLog;"parsererror"==a?n(t,0,"Invalid JSON response",1):4===e.readyState&&n(t,0,"Ajax error",7),pe(t,!1)}},t.oAjaxData=e,Fe(t,null,"preXhr",[t,e]),t.fnServerData?t.fnServerData.call(l,t.sAjaxSource,n.map(e,function(t,e){return{name:e,value:t}}),a,t):t.sAjaxSource||"string"==typeof o?t.jqXHR=n.ajax(n.extend(c,{url:o||t.sAjaxSource})):n.isFunction(o)?t.jqXHR=o.call(l,e,a,t):(t.jqXHR=n.ajax(n.extend(c,o)),o.data=r)}function V(t){return t.bAjaxDataGet?(t.iDraw++,pe(t,!0),z(t,G(t),function(e){B(t,e)}),!1):!0}function G(t){var e,a,s,i,r=t.aoColumns,o=r.length,l=t.oFeatures,c=t.oPreviousSearch,d=t.aoPreSearchCols,u=[],p=Se(t);e=t._iDisplayStart,a=!1!==l.bPaginate?t._iDisplayLength:-1;var h=function(t,e){u.push({name:t,value:e})};h("sEcho",t.iDraw),h("iColumns",o),h("sColumns",ca(r,"sName").join(",")),h("iDisplayStart",e),h("iDisplayLength",a);var f={draw:t.iDraw,columns:[],order:[],start:e,length:a,search:{value:c.sSearch,regex:c.bRegex}};for(e=0;o>e;e++)s=r[e],i=d[e],a="function"==typeof s.mData?"function":s.mData,f.columns.push({data:a,name:s.sName,searchable:s.bSearchable,orderable:s.bSortable,search:{value:i.sSearch,regex:i.bRegex}}),h("mDataProp_"+e,a),l.bFilter&&(h("sSearch_"+e,i.sSearch),h("bRegex_"+e,i.bRegex),h("bSearchable_"+e,s.bSearchable)),l.bSort&&h("bSortable_"+e,s.bSortable);return l.bFilter&&(h("sSearch",c.sSearch),h("bRegex",c.bRegex)),l.bSort&&(n.each(p,function(t,e){f.order.push({column:e.col,dir:e.dir}),h("iSortCol_"+t,e.col),h("sSortDir_"+t,e.dir)}),h("iSortingCols",p.length)),r=Ke.ext.legacy.ajax,null===r?t.sAjaxSource?u:f:r?u:f}function B(t,e){var n=e.sEcho!==a?e.sEcho:e.draw,s=e.iTotalRecords!==a?e.iTotalRecords:e.recordsTotal,i=e.iTotalDisplayRecords!==a?e.iTotalDisplayRecords:e.recordsFiltered;if(n){if(1*n<t.iDraw)return;t.iDraw=1*n}for(M(t),t._iRecordsTotal=parseInt(s,10),t._iRecordsDisplay=parseInt(i,10),n=H(t,e),s=0,i=n.length;i>s;s++)y(t,n[s]);t.aiDisplay=t.aiDisplayMaster.slice(),t.bAjaxDataGet=!1,L(t),t._bInitComplete||re(t,e),t.bAjaxDataGet=!0,pe(t,!1)}function H(t,e){var s=n.isPlainObject(t.ajax)&&t.ajax.dataSrc!==a?t.ajax.dataSrc:t.sAjaxDataProp;return"data"===s?e.aaData||e[s]:""!==s?I(s)(e):e}function K(t){var a=t.oClasses,s=t.sTableId,i=t.oLanguage,r=t.oPreviousSearch,o=t.aanFeatures,l='<input type="search" class="'+a.sFilterInput+'"/>',c=i.sSearch,c=c.match(/_INPUT_/)?c.replace("_INPUT_",l):c+l,a=n("<div/>",{id:o.f?null:s+"_filter","class":a.sFilter}).append(n("<label/>").append(c)),o=function(){var e=this.value?this.value:"";e!=r.sSearch&&(j(t,{sSearch:e,bRegex:r.bRegex,bSmart:r.bSmart,bCaseInsensitive:r.bCaseInsensitive}),t._iDisplayStart=0,L(t))},l=null!==t.searchDelay?t.searchDelay:"ssp"===Ve(t)?400:0,d=n("input",a).val(r.sSearch).attr("placeholder",i.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT",l?be(o,l):o).bind("keypress.DT",function(t){return 13==t.keyCode?!1:void 0}).attr("aria-controls",s);return n(t.nTable).on("search.dt.DT",function(a,n){if(t===n)try{d[0]!==e.activeElement&&d.val(r.sSearch)}catch(s){}}),a[0]}function j(t,e,n){var s=t.oPreviousSearch,i=t.aoPreSearchCols,r=function(t){s.sSearch=t.sSearch,s.bRegex=t.bRegex,s.bSmart=t.bSmart,s.bCaseInsensitive=t.bCaseInsensitive};if(v(t),"ssp"!=Ve(t)){for(X(t,e.sSearch,n,e.bEscapeRegex!==a?!e.bEscapeRegex:e.bRegex,e.bSmart,e.bCaseInsensitive),r(e),e=0;e<i.length;e++)W(t,i[e].sSearch,e,i[e].bEscapeRegex!==a?!i[e].bEscapeRegex:i[e].bRegex,i[e].bSmart,i[e].bCaseInsensitive);Y(t)}else r(e);t.bFiltered=!0,Fe(t,null,"search",[t])}function Y(t){for(var e,a,n=Ke.ext.search,s=t.aiDisplay,i=0,r=n.length;r>i;i++){for(var o=[],l=0,c=s.length;c>l;l++)a=s[l],e=t.aoData[a],n[i](t,e._aFilterData,a,e._aData,l)&&o.push(a);s.length=0,s.push.apply(s,o)}}function W(t,e,a,n,s,i){if(""!==e)for(var r=t.aiDisplay,n=Q(e,n,s,i),s=r.length-1;s>=0;s--)e=t.aoData[r[s]]._aFilterData[a],n.test(e)||r.splice(s,1)}function X(t,e,a,n,s,i){var r,n=Q(e,n,s,i),s=t.oPreviousSearch.sSearch,i=t.aiDisplayMaster;if(0!==Ke.ext.search.length&&(a=!0),r=J(t),0>=e.length)t.aiDisplay=i.slice();else for((r||a||s.length>e.length||0!==e.indexOf(s)||t.bSorted)&&(t.aiDisplay=i.slice()),e=t.aiDisplay,a=e.length-1;a>=0;a--)n.test(t.aoData[e[a]]._sFilterRow)||e.splice(a,1)}function Q(t,e,a,s){return t=e?t:Z(t),a&&(t="^(?=.*?"+n.map(t.match(/"[^"]+"|[^ ]+/g)||"",function(t){if('"'===t.charAt(0))var e=t.match(/^"(.*)"$/),t=e?e[1]:t;return t.replace('"',"")}).join(")(?=.*?")+").*$"),RegExp(t,s?"i":"")}function Z(t){return t.replace(aa,"\\$1")}function J(t){var e,a,n,s,i,r,o,l,c=t.aoColumns,d=Ke.ext.type.search;for(e=!1,a=0,s=t.aoData.length;s>a;a++)if(l=t.aoData[a],!l._aFilterData){for(r=[],n=0,i=c.length;i>n;n++)e=c[n],e.bSearchable?(o=T(t,a,n,"filter"),d[e.sType]&&(o=d[e.sType](o)),null===o&&(o=""),"string"!=typeof o&&o.toString&&(o=o.toString())):o="",o.indexOf&&-1!==o.indexOf("&")&&(ba.innerHTML=o,o=va?ba.textContent:ba.innerText),o.replace&&(o=o.replace(/[\r\n]/g,"")),r.push(o);l._aFilterData=r,l._sFilterRow=r.join("  "),e=!0}return e}function te(t){return{search:t.sSearch,smart:t.bSmart,regex:t.bRegex,caseInsensitive:t.bCaseInsensitive}}function ee(t){return{sSearch:t.search,bSmart:t.smart,bRegex:t.regex,bCaseInsensitive:t.caseInsensitive}}function ae(t){var e=t.sTableId,a=t.aanFeatures.i,s=n("<div/>",{"class":t.oClasses.sInfo,id:a?null:e+"_info"});return a||(t.aoDrawCallback.push({fn:ne,sName:"information"}),s.attr("role","status").attr("aria-live","polite"),n(t.nTable).attr("aria-describedby",e+"_info")),s[0]}function ne(t){var e=t.aanFeatures.i;if(0!==e.length){var a=t.oLanguage,s=t._iDisplayStart+1,i=t.fnDisplayEnd(),r=t.fnRecordsTotal(),o=t.fnRecordsDisplay(),l=o?a.sInfo:a.sInfoEmpty;o!==r&&(l+=" "+a.sInfoFiltered),l+=a.sInfoPostFix,l=se(t,l),a=a.fnInfoCallback,null!==a&&(l=a.call(t.oInstance,t,s,i,r,o,l)),n(e).html(l)}}function se(t,e){var a=t.fnFormatNumber,n=t._iDisplayStart+1,s=t._iDisplayLength,i=t.fnRecordsDisplay(),r=-1===s;return e.replace(/_START_/g,a.call(t,n)).replace(/_END_/g,a.call(t,t.fnDisplayEnd())).replace(/_MAX_/g,a.call(t,t.fnRecordsTotal())).replace(/_TOTAL_/g,a.call(t,i)).replace(/_PAGE_/g,a.call(t,r?1:Math.ceil(n/s))).replace(/_PAGES_/g,a.call(t,r?1:Math.ceil(i/s)))}function ie(t){var e,a,n,s=t.iInitDisplayStart,i=t.aoColumns;if(a=t.oFeatures,t.bInitialised){for(U(t),O(t),R(t,t.aoHeader),R(t,t.aoFooter),pe(t,!0),a.bAutoWidth&&_e(t),e=0,a=i.length;a>e;e++)n=i[e],n.sWidth&&(n.nTh.style.width=Te(n.sWidth));N(t),i=Ve(t),"ssp"!=i&&("ajax"==i?z(t,[],function(a){var n=H(t,a);for(e=0;e<n.length;e++)y(t,n[e]);t.iInitDisplayStart=s,N(t),pe(t,!1),re(t,a)},t):(pe(t,!1),re(t)))}else setTimeout(function(){ie(t)},200)}function re(t,e){t._bInitComplete=!0,e&&h(t),Fe(t,"aoInitComplete","init",[t,e])}function oe(t,e){var a=parseInt(e,10);t._iDisplayLength=a,qe(t),Fe(t,null,"length",[t,a])}function le(t){for(var e=t.oClasses,a=t.sTableId,s=t.aLengthMenu,i=n.isArray(s[0]),r=i?s[0]:s,s=i?s[1]:s,i=n("<select/>",{name:a+"_length","aria-controls":a,"class":e.sLengthSelect}),o=0,l=r.length;l>o;o++)i[0][o]=new Option(s[o],r[o]);var c=n("<div><label/></div>").addClass(e.sLength);return t.aanFeatures.l||(c[0].id=a+"_length"),c.children().append(t.oLanguage.sLengthMenu.replace("_MENU_",i[0].outerHTML)),n("select",c).val(t._iDisplayLength).bind("change.DT",function(){oe(t,n(this).val()),L(t)}),n(t.nTable).bind("length.dt.DT",function(e,a,s){t===a&&n("select",c).val(s)}),c[0]}function ce(t){var e=t.sPaginationType,a=Ke.ext.pager[e],s="function"==typeof a,i=function(t){L(t)},e=n("<div/>").addClass(t.oClasses.sPaging+e)[0],r=t.aanFeatures;return s||a.fnInit(t,e,i),r.p||(e.id=t.sTableId+"_paginate",t.aoDrawCallback.push({fn:function(t){if(s){var e,n=t._iDisplayStart,o=t._iDisplayLength,l=t.fnRecordsDisplay(),c=-1===o,n=c?0:Math.ceil(n/o),o=c?1:Math.ceil(l/o),l=a(n,o),c=0;for(e=r.p.length;e>c;c++)ze(t,"pageButton")(t,r.p[c],c,l,n,o)}else a.fnUpdate(t,i)},sName:"pagination"})),e}function de(t,e,a){var n=t._iDisplayStart,s=t._iDisplayLength,i=t.fnRecordsDisplay();return 0===i||-1===s?n=0:"number"==typeof e?(n=e*s,n>i&&(n=0)):"first"==e?n=0:"previous"==e?(n=s>=0?n-s:0,0>n&&(n=0)):"next"==e?i>n+s&&(n+=s):"last"==e?n=Math.floor((i-1)/s)*s:Oe(t,0,"Unknown paging action: "+e,5),e=t._iDisplayStart!==n,t._iDisplayStart=n,e&&(Fe(t,null,"page",[t]),a&&L(t)),e}function ue(t){return n("<div/>",{id:t.aanFeatures.r?null:t.sTableId+"_processing","class":t.oClasses.sProcessing}).html(t.oLanguage.sProcessing).insertBefore(t.nTable)[0]}function pe(t,e){t.oFeatures.bProcessing&&n(t.aanFeatures.r).css("display",e?"block":"none"),Fe(t,null,"processing",[t,e])}function he(t){var e=n(t.nTable);e.attr("role","grid");var a=t.oScroll;if(""===a.sX&&""===a.sY)return t.nTable;var s=a.sX,i=a.sY,r=t.oClasses,o=e.children("caption"),l=o.length?o[0]._captionSide:null,c=n(e[0].cloneNode(!1)),d=n(e[0].cloneNode(!1)),u=e.children("tfoot");a.sX&&"100%"===e.attr("width")&&e.removeAttr("width"),u.length||(u=null),a=n("<div/>",{"class":r.sScrollWrapper}).append(n("<div/>",{"class":r.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:s?s?Te(s):null:"100%"}).append(n("<div/>",{"class":r.sScrollHeadInner}).css({"box-sizing":"content-box",width:a.sXInner||"100%"}).append(c.removeAttr("id").css("margin-left",0).append("top"===l?o:null).append(e.children("thead"))))).append(n("<div/>",{"class":r.sScrollBody}).css({overflow:"auto",height:i?Te(i):null,width:s?Te(s):null}).append(e)),u&&a.append(n("<div/>",{"class":r.sScrollFoot}).css({overflow:"hidden",border:0,width:s?s?Te(s):null:"100%"}).append(n("<div/>",{"class":r.sScrollFootInner}).append(d.removeAttr("id").css("margin-left",0).append("bottom"===l?o:null).append(e.children("tfoot")))));var e=a.children(),p=e[0],r=e[1],h=u?e[2]:null;return s&&n(r).scroll(function(){var t=this.scrollLeft;p.scrollLeft=t,u&&(h.scrollLeft=t)}),t.nScrollHead=p,t.nScrollBody=r,t.nScrollFoot=h,t.aoDrawCallback.push({fn:fe,sName:"scrolling"}),a[0]}function fe(t){var e,a,s,i,r,o,l=t.oScroll,c=l.sX,d=l.sXInner,u=l.sY,p=l.iBarWidth,h=n(t.nScrollHead),m=h[0].style,_=h.children("div"),b=_[0].style,v=_.children("table"),_=t.nScrollBody,g=n(_),y=_.style,w=n(t.nScrollFoot).children("div"),T=w.children("table"),E=n(t.nTHead),S=n(t.nTable),I=S[0],x=I.style,A=t.nTFoot?n(t.nTFoot):null,M=t.oBrowser,k=M.bScrollOversize,D=[],C=[],P=[],$=function(t){t=t.style,t.paddingTop="0",t.paddingBottom="0",t.borderTopWidth="0",t.borderBottomWidth="0",t.height=0};S.children("thead, tfoot").remove(),r=E.clone().prependTo(S),e=E.find("tr"),s=r.find("tr"),r.find("th, td").removeAttr("tabindex"),A&&(i=A.clone().prependTo(S),a=A.find("tr"),i=i.find("tr")),c||(y.width="100%",h[0].style.width="100%"),n.each(q(t,r),function(e,a){o=f(t,e),a.style.width=t.aoColumns[o].sWidth}),A&&me(function(t){t.style.width=""},i),l.bCollapse&&""!==u&&(y.height=g[0].offsetHeight+E[0].offsetHeight+"px"),h=S.outerWidth(),""===c?(x.width="100%",k&&(S.find("tbody").height()>_.offsetHeight||"scroll"==g.css("overflow-y"))&&(x.width=Te(S.outerWidth()-p))):""!==d?x.width=Te(d):h==g.width()&&g.height()<S.height()?(x.width=Te(h-p),S.outerWidth()>h-p&&(x.width=Te(h))):x.width=Te(h),h=S.outerWidth(),me($,s),me(function(t){P.push(t.innerHTML),D.push(Te(n(t).css("width")))},s),me(function(t,e){t.style.width=D[e]},e),n(s).height(0),A&&(me($,i),me(function(t){C.push(Te(n(t).css("width")))},i),me(function(t,e){t.style.width=C[e]},a),n(i).height(0)),me(function(t,e){t.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+P[e]+"</div>",t.style.width=D[e]},s),A&&me(function(t,e){t.innerHTML="",t.style.width=C[e]},i),S.outerWidth()<h?(a=_.scrollHeight>_.offsetHeight||"scroll"==g.css("overflow-y")?h+p:h,k&&(_.scrollHeight>_.offsetHeight||"scroll"==g.css("overflow-y"))&&(x.width=Te(a-p)),(""===c||""!==d)&&Oe(t,1,"Possible column misalignment",6)):a="100%",y.width=Te(a),m.width=Te(a),A&&(t.nScrollFoot.style.width=Te(a)),!u&&k&&(y.height=Te(I.offsetHeight+p)),u&&l.bCollapse&&(y.height=Te(u),l=c&&I.offsetWidth>_.offsetWidth?p:0,I.offsetHeight<_.offsetHeight&&(y.height=Te(I.offsetHeight+l))),l=S.outerWidth(),v[0].style.width=Te(l),b.width=Te(l),v=S.height()>_.clientHeight||"scroll"==g.css("overflow-y"),M="padding"+(M.bScrollbarLeft?"Left":"Right"),b[M]=v?p+"px":"0px",A&&(T[0].style.width=Te(l),w[0].style.width=Te(l),w[0].style[M]=v?p+"px":"0px"),g.scroll(),!t.bSorted&&!t.bFiltered||t._drawHold||(_.scrollTop=0)}function me(t,e,a){for(var n,s,i=0,r=0,o=e.length;o>r;){for(n=e[r].firstChild,s=a?a[r].firstChild:null;n;)1===n.nodeType&&(a?t(n,s,i):t(n,i),i++),n=n.nextSibling,s=a?s.nextSibling:null;r++}}function _e(e){var a,s,i=e.nTable,r=e.aoColumns,o=e.oScroll,l=o.sY,c=o.sX,d=o.sXInner,u=r.length,o=b(e,"bVisible"),p=n("th",e.nTHead),f=i.getAttribute("width"),m=i.parentNode,v=!1;for(a=0;a<o.length;a++)s=r[o[a]],null!==s.sWidth&&(s.sWidth=ve(s.sWidthOrig,m),v=!0);if(v||c||l||u!=_(e)||u!=p.length){u=n(i).clone().empty().css("visibility","hidden").removeAttr("id").append(n(e.nTHead).clone(!1)).append(n(e.nTFoot).clone(!1)).append(n("<tbody><tr/></tbody>")),u.find("tfoot th, tfoot td").css("width","");var g=u.find("tbody tr"),p=q(e,u.find("thead")[0]);for(a=0;a<o.length;a++)s=r[o[a]],p[a].style.width=null!==s.sWidthOrig&&""!==s.sWidthOrig?Te(s.sWidthOrig):"";if(e.aoData.length)for(a=0;a<o.length;a++)v=o[a],s=r[v],n(ye(e,v)).clone(!1).append(s.sContentPadding).appendTo(g);if(u.appendTo(m),c&&d?u.width(d):c?(u.css("width","auto"),u.width()<m.offsetWidth&&u.width(m.offsetWidth)):l?u.width(m.offsetWidth):f&&u.width(f),ge(e,u[0]),c){for(a=d=0;a<o.length;a++)s=r[o[a]],l=n(p[a]).outerWidth(),d+=null===s.sWidthOrig?l:parseInt(s.sWidth,10)+l-n(p[a]).width();u.width(Te(d)),i.style.width=Te(d)}for(a=0;a<o.length;a++)s=r[o[a]],(l=n(p[a]).width())&&(s.sWidth=Te(l));i.style.width=Te(u.css("width")),u.remove()}else for(a=0;u>a;a++)r[a].sWidth=Te(p.eq(a).width());f&&(i.style.width=Te(f)),!f&&!c||e._reszEvt||(n(t).bind("resize.DT-"+e.sInstance,be(function(){h(e)})),e._reszEvt=!0)}function be(t,e){var n,s,i=e!==a?e:200;return function(){var e=this,r=+new Date,o=arguments;n&&n+i>r?(clearTimeout(s),s=setTimeout(function(){n=a,t.apply(e,o)},i)):n?(n=r,t.apply(e,o)):n=r}}function ve(t,a){if(!t)return 0;var s=n("<div/>").css("width",Te(t)).appendTo(a||e.body),i=s[0].offsetWidth;return s.remove(),i}function ge(t,e){var a=t.oScroll;(a.sX||a.sY)&&(a=a.sX?0:a.iBarWidth,e.style.width=Te(n(e).outerWidth()-a))}function ye(t,e){var a=we(t,e);if(0>a)return null;var s=t.aoData[a];return s.nTr?s.anCells[e]:n("<td/>").html(T(t,a,e,"display"))[0]}function we(t,e){for(var a,n=-1,s=-1,i=0,r=t.aoData.length;r>i;i++)a=T(t,i,e,"display")+"",a=a.replace(ga,""),a.length>n&&(n=a.length,s=i);return s}function Te(t){return null===t?"0px":"number"==typeof t?0>t?"0px":t+"px":t.match(/\d$/)?t+"px":t}function Ee(){if(!Ke.__scrollbarWidth){var t=n("<p/>").css({width:"100%",height:200,padding:0})[0],e=n("<div/>").css({position:"absolute",top:0,left:0,width:200,height:150,padding:0,overflow:"hidden",visibility:"hidden"}).append(t).appendTo("body"),a=t.offsetWidth;
e.css("overflow","scroll"),t=t.offsetWidth,a===t&&(t=e[0].clientWidth),e.remove(),Ke.__scrollbarWidth=a-t}return Ke.__scrollbarWidth}function Se(t){var e,s,i,r,o,l,c=[],d=t.aoColumns;e=t.aaSortingFixed,s=n.isPlainObject(e);var u=[];for(i=function(t){t.length&&!n.isArray(t[0])?u.push(t):u.push.apply(u,t)},n.isArray(e)&&i(e),s&&e.pre&&i(e.pre),i(t.aaSorting),s&&e.post&&i(e.post),t=0;t<u.length;t++)for(l=u[t][0],i=d[l].aDataSort,e=0,s=i.length;s>e;e++)r=i[e],o=d[r].sType||"string",u[t]._idx===a&&(u[t]._idx=n.inArray(u[t][1],d[r].asSorting)),c.push({src:l,col:r,dir:u[t][1],index:u[t]._idx,type:o,formatter:Ke.ext.type.order[o+"-pre"]});return c}function Ie(t){var e,a,n,s,i=[],r=Ke.ext.type.order,o=t.aoData,l=0,c=t.aiDisplayMaster;for(v(t),s=Se(t),e=0,a=s.length;a>e;e++)n=s[e],n.formatter&&l++,De(t,n.col);if("ssp"!=Ve(t)&&0!==s.length){for(e=0,a=c.length;a>e;e++)i[c[e]]=e;c.sort(l===s.length?function(t,e){var a,n,r,l,c=s.length,d=o[t]._aSortData,u=o[e]._aSortData;for(r=0;c>r;r++)if(l=s[r],a=d[l.col],n=u[l.col],a=n>a?-1:a>n?1:0,0!==a)return"asc"===l.dir?a:-a;return a=i[t],n=i[e],n>a?-1:a>n?1:0}:function(t,e){var a,n,l,c,d=s.length,u=o[t]._aSortData,p=o[e]._aSortData;for(l=0;d>l;l++)if(c=s[l],a=u[c.col],n=p[c.col],c=r[c.type+"-"+c.dir]||r["string-"+c.dir],a=c(a,n),0!==a)return a;return a=i[t],n=i[e],n>a?-1:a>n?1:0})}t.bSorted=!0}function xe(t){for(var e,a,n=t.aoColumns,s=Se(t),t=t.oLanguage.oAria,i=0,r=n.length;r>i;i++){a=n[i];var o=a.asSorting;e=a.sTitle.replace(/<.*?>/g,"");var l=a.nTh;l.removeAttribute("aria-sort"),a.bSortable&&(0<s.length&&s[0].col==i?(l.setAttribute("aria-sort","asc"==s[0].dir?"ascending":"descending"),a=o[s[0].index+1]||o[0]):a=o[0],e+="asc"===a?t.sSortAscending:t.sSortDescending),l.setAttribute("aria-label",e)}}function Ae(t,e,s,i){var r=t.aaSorting,o=t.aoColumns[e].asSorting,l=function(t,e){var s=t._idx;return s===a&&(s=n.inArray(t[1],o)),s+1<o.length?s+1:e?null:0};"number"==typeof r[0]&&(r=t.aaSorting=[r]),s&&t.oFeatures.bSortMulti?(s=n.inArray(e,ca(r,"0")),-1!==s?(e=l(r[s],!0),null===e?r.splice(s,1):(r[s][1]=o[e],r[s]._idx=e)):(r.push([e,o[0],0]),r[r.length-1]._idx=0)):r.length&&r[0][0]==e?(e=l(r[0]),r.length=1,r[0][1]=o[e],r[0]._idx=e):(r.length=0,r.push([e,o[0]]),r[0]._idx=0),N(t),"function"==typeof i&&i(t)}function Me(t,e,a,n){var s=t.aoColumns[a];Ne(e,{},function(e){!1!==s.bSortable&&(t.oFeatures.bProcessing?(pe(t,!0),setTimeout(function(){Ae(t,a,e.shiftKey,n),"ssp"!==Ve(t)&&pe(t,!1)},0)):Ae(t,a,e.shiftKey,n))})}function ke(t){var e,a,s=t.aLastSort,i=t.oClasses.sSortColumn,r=Se(t),o=t.oFeatures;if(o.bSort&&o.bSortClasses){for(o=0,e=s.length;e>o;o++)a=s[o].src,n(ca(t.aoData,"anCells",a)).removeClass(i+(2>o?o+1:3));for(o=0,e=r.length;e>o;o++)a=r[o].src,n(ca(t.aoData,"anCells",a)).addClass(i+(2>o?o+1:3))}t.aLastSort=r}function De(t,e){var a,n=t.aoColumns[e],s=Ke.ext.order[n.sSortDataType];s&&(a=s.call(t.oInstance,t,e,m(t,e)));for(var i,r=Ke.ext.type.order[n.sType+"-pre"],o=0,l=t.aoData.length;l>o;o++)n=t.aoData[o],n._aSortData||(n._aSortData=[]),(!n._aSortData[e]||s)&&(i=s?a[o]:T(t,o,e,"sort"),n._aSortData[e]=r?r(i):i)}function Ce(t){if(t.oFeatures.bStateSave&&!t.bDestroying){var e={time:+new Date,start:t._iDisplayStart,length:t._iDisplayLength,order:n.extend(!0,[],t.aaSorting),search:te(t.oPreviousSearch),columns:n.map(t.aoColumns,function(e,a){return{visible:e.bVisible,search:te(t.aoPreSearchCols[a])}})};Fe(t,"aoStateSaveParams","stateSaveParams",[t,e]),t.oSavedState=e,t.fnStateSaveCallback.call(t.oInstance,t,e)}}function Pe(t){var e,a,s=t.aoColumns;if(t.oFeatures.bStateSave){var i=t.fnStateLoadCallback.call(t.oInstance,t);if(i&&i.time&&(e=Fe(t,"aoStateLoadParams","stateLoadParams",[t,i]),-1===n.inArray(!1,e)&&(e=t.iStateDuration,!(e>0&&i.time<+new Date-1e3*e)&&s.length===i.columns.length))){for(t.oLoadedState=n.extend(!0,{},i),t._iDisplayStart=i.start,t.iInitDisplayStart=i.start,t._iDisplayLength=i.length,t.aaSorting=[],n.each(i.order,function(e,a){t.aaSorting.push(a[0]>=s.length?[0,a[1]]:a)}),n.extend(t.oPreviousSearch,ee(i.search)),e=0,a=i.columns.length;a>e;e++){var r=i.columns[e];s[e].bVisible=r.visible,n.extend(t.aoPreSearchCols[e],ee(r.search))}Fe(t,"aoStateLoaded","stateLoaded",[t,i])}}}function $e(t){var e=Ke.settings,t=n.inArray(t,ca(e,"nTable"));return-1!==t?e[t]:null}function Oe(e,a,n,s){if(n="DataTables warning: "+(null!==e?"table id="+e.sTableId+" - ":"")+n,s&&(n+=". For more information about this error, please see http://datatables.net/tn/"+s),a)t.console&&console.log&&console.log(n);else{if(e=Ke.ext,"alert"!=(e.sErrMode||e.errMode))throw Error(n);alert(n)}}function Re(t,e,s,i){n.isArray(s)?n.each(s,function(a,s){n.isArray(s)?Re(t,e,s[0],s[1]):Re(t,e,s)}):(i===a&&(i=s),e[s]!==a&&(t[i]=e[s]))}function Le(t,e,a){var s,i;for(i in e)e.hasOwnProperty(i)&&(s=e[i],n.isPlainObject(s)?(n.isPlainObject(t[i])||(t[i]={}),n.extend(!0,t[i],s)):t[i]=a&&"data"!==i&&"aaData"!==i&&n.isArray(s)?s.slice():s);return t}function Ne(t,e,a){n(t).bind("click.DT",e,function(e){t.blur(),a(e)}).bind("keypress.DT",e,function(t){13===t.which&&(t.preventDefault(),a(t))}).bind("selectstart.DT",function(){return!1})}function Ue(t,e,a,n){a&&t[e].push({fn:a,sName:n})}function Fe(t,e,a,s){var i=[];return e&&(i=n.map(t[e].slice().reverse(),function(e){return e.fn.apply(t.oInstance,s)})),null!==a&&n(t.nTable).trigger(a+".dt",s),i}function qe(t){var e=t._iDisplayStart,a=t.fnDisplayEnd(),n=t._iDisplayLength;e>=a&&(e=a-n),e-=e%n,(-1===n||0>e)&&(e=0),t._iDisplayStart=e}function ze(t,e){var a=t.renderer,s=Ke.ext.renderer[e];return n.isPlainObject(a)&&a[e]?s[a[e]]||s._:"string"==typeof a?s[a]||s._:s._}function Ve(t){return t.oFeatures.bServerSide?"ssp":t.ajax||t.sAjaxSource?"ajax":"dom"}function Ge(t,e){var a=[],a=La.numbers_length,n=Math.floor(a/2);return a>=e?a=ua(0,e):n>=t?(a=ua(0,a-2),a.push("ellipsis"),a.push(e-1)):(t>=e-1-n?a=ua(e-(a-2),e):(a=ua(t-1,t+2),a.push("ellipsis"),a.push(e-1)),a.splice(0,0,"ellipsis"),a.splice(0,0,0)),a.DT_el="span",a}function Be(t){n.each({num:function(e){return Na(e,t)},"num-fmt":function(e){return Na(e,t,na)},"html-num":function(e){return Na(e,t,Je)},"html-num-fmt":function(e){return Na(e,t,Je,na)}},function(e,a){je.type.order[e+t+"-pre"]=a,e.match(/^html\-/)&&(je.type.search[e+t]=je.type.search.html)})}function He(t){return function(){var e=[$e(this[Ke.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return Ke.ext.internal[t].apply(this,e)}}var Ke,je,Ye,We,Xe,Qe={},Ze=/[\r\n]/g,Je=/<.*?>/g,ta=/^[\w\+\-]/,ea=/[\w\+\-]$/,aa=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),na=/[',$\u00a3\u20ac\u00a5%\u2009\u202F]/g,sa=function(t){return t&&!0!==t&&"-"!==t?!1:!0},ia=function(t){var e=parseInt(t,10);return!isNaN(e)&&isFinite(t)?e:null},ra=function(t,e){return Qe[e]||(Qe[e]=RegExp(Z(e),"g")),"string"==typeof t&&"."!==e?t.replace(/\./g,"").replace(Qe[e],"."):t},oa=function(t,e,a){var n="string"==typeof t;return e&&n&&(t=ra(t,e)),a&&n&&(t=t.replace(na,"")),sa(t)||!isNaN(parseFloat(t))&&isFinite(t)},la=function(t,e,a){return sa(t)?!0:(sa(t)||"string"==typeof t)&&oa(t.replace(Je,""),e,a)?!0:null},ca=function(t,e,n){var s=[],i=0,r=t.length;if(n!==a)for(;r>i;i++)t[i]&&t[i][e]&&s.push(t[i][e][n]);else for(;r>i;i++)t[i]&&s.push(t[i][e]);return s},da=function(t,e,n,s){var i=[],r=0,o=e.length;if(s!==a)for(;o>r;r++)t[e[r]][n]&&i.push(t[e[r]][n][s]);else for(;o>r;r++)i.push(t[e[r]][n]);return i},ua=function(t,e){var n,s=[];e===a?(e=0,n=t):(n=e,e=t);for(var i=e;n>i;i++)s.push(i);return s},pa=function(t){for(var e=[],a=0,n=t.length;n>a;a++)t[a]&&e.push(t[a]);return e},ha=function(t){var e,a,n,s=[],i=t.length,r=0;a=0;t:for(;i>a;a++){for(e=t[a],n=0;r>n;n++)if(s[n]===e)continue t;s.push(e),r++}return s},fa=function(t,e,n){t[e]!==a&&(t[n]=t[e])},ma=/\[.*?\]$/,_a=/\(\)$/,ba=n("<div>")[0],va=ba.textContent!==a,ga=/<.*?>/g;Ke=function(t){this.$=function(t,e){return this.api(!0).$(t,e)},this._=function(t,e){return this.api(!0).rows(t,e).data()},this.api=function(t){return new Ye(t?$e(this[je.iApiIndex]):this)},this.fnAddData=function(t,e){var s=this.api(!0),i=n.isArray(t)&&(n.isArray(t[0])||n.isPlainObject(t[0]))?s.rows.add(t):s.row.add(t);return(e===a||e)&&s.draw(),i.flatten().toArray()},this.fnAdjustColumnSizing=function(t){var e=this.api(!0).columns.adjust(),n=e.settings()[0],s=n.oScroll;t===a||t?e.draw(!1):(""!==s.sX||""!==s.sY)&&fe(n)},this.fnClearTable=function(t){var e=this.api(!0).clear();(t===a||t)&&e.draw()},this.fnClose=function(t){this.api(!0).row(t).child.hide()},this.fnDeleteRow=function(t,e,n){var s=this.api(!0),t=s.rows(t),i=t.settings()[0],r=i.aoData[t[0][0]];return t.remove(),e&&e.call(this,i,r),(n===a||n)&&s.draw(),r},this.fnDestroy=function(t){this.api(!0).destroy(t)},this.fnDraw=function(t){this.api(!0).draw(!t)},this.fnFilter=function(t,e,n,s,i,r){i=this.api(!0),null===e||e===a?i.search(t,n,s,r):i.column(e).search(t,n,s,r),i.draw()},this.fnGetData=function(t,e){var n=this.api(!0);if(t!==a){var s=t.nodeName?t.nodeName.toLowerCase():"";return e!==a||"td"==s||"th"==s?n.cell(t,e).data():n.row(t).data()||null}return n.data().toArray()},this.fnGetNodes=function(t){var e=this.api(!0);return t!==a?e.row(t).node():e.rows().nodes().flatten().toArray()},this.fnGetPosition=function(t){var e=this.api(!0),a=t.nodeName.toUpperCase();return"TR"==a?e.row(t).index():"TD"==a||"TH"==a?(t=e.cell(t).index(),[t.row,t.columnVisible,t.column]):null},this.fnIsOpen=function(t){return this.api(!0).row(t).child.isShown()},this.fnOpen=function(t,e,a){return this.api(!0).row(t).child(e,a).show().child()[0]},this.fnPageChange=function(t,e){var n=this.api(!0).page(t);(e===a||e)&&n.draw(!1)},this.fnSetColumnVis=function(t,e,n){t=this.api(!0).column(t).visible(e),(n===a||n)&&t.columns.adjust().draw()},this.fnSettings=function(){return $e(this[je.iApiIndex])},this.fnSort=function(t){this.api(!0).order(t).draw()},this.fnSortListener=function(t,e,a){this.api(!0).order.listener(t,e,a)},this.fnUpdate=function(t,e,n,s,i){var r=this.api(!0);return n===a||null===n?r.row(e).data(t):r.cell(e,n).data(t),(i===a||i)&&r.columns.adjust(),(s===a||s)&&r.draw(),0},this.fnVersionCheck=je.fnVersionCheck;var e=this,s=t===a,d=this.length;s&&(t={}),this.oApi=this.internal=je.internal;for(var h in Ke.ext.internal)h&&(this[h]=He(h));return this.each(function(){var h,f={},f=d>1?Le(f,t,!0):t,m=0,_=this.getAttribute("id"),b=!1,v=Ke.defaults;if("table"!=this.nodeName.toLowerCase())Oe(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{o(v),l(v.column),i(v,v,!0),i(v.column,v.column,!0),i(v,f);var T=Ke.settings,m=0;for(h=T.length;h>m;m++){if(T[m].nTable==this){if(h=f.bRetrieve!==a?f.bRetrieve:v.bRetrieve,s||h)return T[m].oInstance;if(f.bDestroy!==a?f.bDestroy:v.bDestroy){T[m].oInstance.fnDestroy();break}return void Oe(T[m],0,"Cannot reinitialise DataTable",3)}if(T[m].sTableId==this.id){T.splice(m,1);break}}(null===_||""===_)&&(this.id=_="DataTables_Table_"+Ke.ext._unique++);var E=n.extend(!0,{},Ke.models.oSettings,{nTable:this,oApi:e.internal,oInit:f,sDestroyWidth:n(this)[0].style.width,sInstance:_,sTableId:_});T.push(E),E.oInstance=1===e.length?e:n(this).dataTable(),o(f),f.oLanguage&&r(f.oLanguage),f.aLengthMenu&&!f.iDisplayLength&&(f.iDisplayLength=n.isArray(f.aLengthMenu[0])?f.aLengthMenu[0][0]:f.aLengthMenu[0]),f=Le(n.extend(!0,{},v),f),Re(E.oFeatures,f,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" ")),Re(E,f,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]),Re(E.oScroll,f,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),Re(E.oLanguage,f,"fnInfoCallback"),Ue(E,"aoDrawCallback",f.fnDrawCallback,"user"),Ue(E,"aoServerParams",f.fnServerParams,"user"),Ue(E,"aoStateSaveParams",f.fnStateSaveParams,"user"),Ue(E,"aoStateLoadParams",f.fnStateLoadParams,"user"),Ue(E,"aoStateLoaded",f.fnStateLoaded,"user"),Ue(E,"aoRowCallback",f.fnRowCallback,"user"),Ue(E,"aoRowCreatedCallback",f.fnCreatedRow,"user"),Ue(E,"aoHeaderCallback",f.fnHeaderCallback,"user"),Ue(E,"aoFooterCallback",f.fnFooterCallback,"user"),Ue(E,"aoInitComplete",f.fnInitComplete,"user"),Ue(E,"aoPreDrawCallback",f.fnPreDrawCallback,"user"),_=E.oClasses,f.bJQueryUI?(n.extend(_,Ke.ext.oJUIClasses,f.oClasses),f.sDom===v.sDom&&"lfrtip"===v.sDom&&(E.sDom='<"H"lfr>t<"F"ip>'),E.renderer?n.isPlainObject(E.renderer)&&!E.renderer.header&&(E.renderer.header="jqueryui"):E.renderer="jqueryui"):n.extend(_,Ke.ext.classes,f.oClasses),n(this).addClass(_.sTable),(""!==E.oScroll.sX||""!==E.oScroll.sY)&&(E.oScroll.iBarWidth=Ee()),!0===E.oScroll.sX&&(E.oScroll.sX="100%"),E.iInitDisplayStart===a&&(E.iInitDisplayStart=f.iDisplayStart,E._iDisplayStart=f.iDisplayStart),null!==f.iDeferLoading&&(E.bDeferLoading=!0,m=n.isArray(f.iDeferLoading),E._iRecordsDisplay=m?f.iDeferLoading[0]:f.iDeferLoading,E._iRecordsTotal=m?f.iDeferLoading[1]:f.iDeferLoading);var S=E.oLanguage;n.extend(!0,S,f.oLanguage),""!==S.sUrl&&(n.ajax({dataType:"json",url:S.sUrl,success:function(t){r(t),i(v.oLanguage,t),n.extend(!0,S,t),ie(E)},error:function(){ie(E)}}),b=!0),null===f.asStripeClasses&&(E.asStripeClasses=[_.sStripeOdd,_.sStripeEven]);var m=E.asStripeClasses,I=n("tbody tr:eq(0)",this);-1!==n.inArray(!0,n.map(m,function(t){return I.hasClass(t)}))&&(n("tbody tr",this).removeClass(m.join(" ")),E.asDestroyStripes=m.slice());var x,T=[],m=this.getElementsByTagName("thead");if(0!==m.length&&(F(E.aoHeader,m[0]),T=q(E)),null===f.aoColumns)for(x=[],m=0,h=T.length;h>m;m++)x.push(null);else x=f.aoColumns;for(m=0,h=x.length;h>m;m++)u(E,T?T[m]:null);if(g(E,f.aoColumnDefs,x,function(t,e){p(E,t,e)}),I.length){var A=function(t,e){return t.getAttribute("data-"+e)?e:null};n.each(C(E,I[0]).cells,function(t,e){var n=E.aoColumns[t];if(n.mData===t){var s=A(e,"sort")||A(e,"order"),i=A(e,"filter")||A(e,"search");(null!==s||null!==i)&&(n.mData={_:t+".display",sort:null!==s?t+".@data-"+s:a,type:null!==s?t+".@data-"+s:a,filter:null!==i?t+".@data-"+i:a},p(E,t))}})}var M=E.oFeatures;if(f.bStateSave&&(M.bStateSave=!0,Pe(E,f),Ue(E,"aoDrawCallback",Ce,"state_save")),f.aaSorting===a)for(T=E.aaSorting,m=0,h=T.length;h>m;m++)T[m][1]=E.aoColumns[m].asSorting[0];if(ke(E),M.bSort&&Ue(E,"aoDrawCallback",function(){if(E.bSorted){var t=Se(E),e={};n.each(t,function(t,a){e[a.src]=a.dir}),Fe(E,null,"order",[E,t,e]),xe(E)}}),Ue(E,"aoDrawCallback",function(){(E.bSorted||"ssp"===Ve(E)||M.bDeferRender)&&ke(E)},"sc"),c(E),m=n(this).children("caption").each(function(){this._captionSide=n(this).css("caption-side")}),h=n(this).children("thead"),0===h.length&&(h=n("<thead/>").appendTo(this)),E.nTHead=h[0],h=n(this).children("tbody"),0===h.length&&(h=n("<tbody/>").appendTo(this)),E.nTBody=h[0],h=n(this).children("tfoot"),0===h.length&&0<m.length&&(""!==E.oScroll.sX||""!==E.oScroll.sY)&&(h=n("<tfoot/>").appendTo(this)),0===h.length||0===h.children().length?n(this).addClass(_.sNoFooter):0<h.length&&(E.nTFoot=h[0],F(E.aoFooter,E.nTFoot)),f.aaData)for(m=0;m<f.aaData.length;m++)y(E,f.aaData[m]);else(E.bDeferLoading||"dom"==Ve(E))&&w(E,n(E.nTBody).children("tr"));E.aiDisplay=E.aiDisplayMaster.slice(),E.bInitialised=!0,!1===b&&ie(E)}}),e=null,this};var ya=[],wa=Array.prototype,Ta=function(t){var e,a,s=Ke.settings,i=n.map(s,function(t){return t.nTable});return t?t.nTable&&t.oApi?[t]:t.nodeName&&"table"===t.nodeName.toLowerCase()?(e=n.inArray(t,i),-1!==e?[s[e]]:null):t&&"function"==typeof t.settings?t.settings().toArray():("string"==typeof t?a=n(t):t instanceof n&&(a=t),a?a.map(function(){return e=n.inArray(this,i),-1!==e?s[e]:null}).toArray():void 0):[]};Ye=function(t,e){if(!this instanceof Ye)throw"DT API must be constructed as a new object";var a=[],s=function(t){(t=Ta(t))&&a.push.apply(a,t)};if(n.isArray(t))for(var i=0,r=t.length;r>i;i++)s(t[i]);else s(t);this.context=ha(a),e&&this.push.apply(this,e.toArray?e.toArray():e),this.selector={rows:null,cols:null,opts:null},Ye.extend(this,this,ya)},Ke.Api=Ye,Ye.prototype={concat:wa.concat,context:[],each:function(t){for(var e=0,a=this.length;a>e;e++)t.call(this,this[e],e,this);return this},eq:function(t){var e=this.context;return e.length>t?new Ye(e[t],this[t]):null},filter:function(t){var e=[];if(wa.filter)e=wa.filter.call(this,t,this);else for(var a=0,n=this.length;n>a;a++)t.call(this,this[a],a,this)&&e.push(this[a]);return new Ye(this.context,e)},flatten:function(){var t=[];return new Ye(this.context,t.concat.apply(t,this.toArray()))},join:wa.join,indexOf:wa.indexOf||function(t,e){for(var a=e||0,n=this.length;n>a;a++)if(this[a]===t)return a;return-1},iterator:function(t,e,n,s){var i,r,o,l,c,d,u,p=[],h=this.context,f=this.selector;for("string"==typeof t&&(s=n,n=e,e=t,t=!1),r=0,o=h.length;o>r;r++){var m=new Ye(h[r]);if("table"===e)i=n.call(m,h[r],r),i!==a&&p.push(i);else if("columns"===e||"rows"===e)i=n.call(m,h[r],this[r],r),i!==a&&p.push(i);else if("column"===e||"column-rows"===e||"row"===e||"cell"===e)for(u=this[r],"column-rows"===e&&(d=Aa(h[r],f.opts)),l=0,c=u.length;c>l;l++)i=u[l],i="cell"===e?n.call(m,h[r],i.row,i.column,r,l):n.call(m,h[r],i,r,l,d),i!==a&&p.push(i)}return p.length||s?(t=new Ye(h,t?p.concat.apply([],p):p),e=t.selector,e.rows=f.rows,e.cols=f.cols,e.opts=f.opts,t):this},lastIndexOf:wa.lastIndexOf||function(){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(t){var e=[];if(wa.map)e=wa.map.call(this,t,this);else for(var a=0,n=this.length;n>a;a++)e.push(t.call(this,this[a],a));return new Ye(this.context,e)},pluck:function(t){return this.map(function(e){return e[t]})},pop:wa.pop,push:wa.push,reduce:wa.reduce||function(t,e){return d(this,t,e,0,this.length,1)},reduceRight:wa.reduceRight||function(t,e){return d(this,t,e,this.length-1,-1,-1)},reverse:wa.reverse,selector:null,shift:wa.shift,sort:wa.sort,splice:wa.splice,toArray:function(){return wa.slice.call(this)},to$:function(){return n(this)},toJQuery:function(){return n(this)},unique:function(){return new Ye(this.context,ha(this))},unshift:wa.unshift},Ye.extend=function(t,e,a){if(e&&(e instanceof Ye||e.__dt_wrapper)){var s,i,r,o=function(t,e,a){return function(){var n=e.apply(t,arguments);return Ye.extend(n,n,a.methodExt),n}};for(s=0,i=a.length;i>s;s++)r=a[s],e[r.name]="function"==typeof r.val?o(t,r.val,r):n.isPlainObject(r.val)?{}:r.val,e[r.name].__dt_wrapper=!0,Ye.extend(t,e[r.name],r.propExt)}},Ye.register=We=function(t,e){if(n.isArray(t))for(var a=0,s=t.length;s>a;a++)Ye.register(t[a],e);else for(var i,r,o=t.split("."),l=ya,a=0,s=o.length;s>a;a++){i=(r=-1!==o[a].indexOf("()"))?o[a].replace("()",""):o[a];var c;t:{c=0;for(var d=l.length;d>c;c++)if(l[c].name===i){c=l[c];break t}c=null}c||(c={name:i,val:{},methodExt:[],propExt:[]},l.push(c)),a===s-1?c.val=e:l=r?c.methodExt:c.propExt}},Ye.registerPlural=Xe=function(t,e,s){Ye.register(t,s),Ye.register(e,function(){var t=s.apply(this,arguments);return t===this?this:t instanceof Ye?t.length?n.isArray(t[0])?new Ye(t.context,t[0]):t[0]:a:t})},We("tables()",function(t){var e;if(t){e=Ye;var a=this.context;if("number"==typeof t)t=[a[t]];else var s=n.map(a,function(t){return t.nTable}),t=n(s).filter(t).map(function(){var t=n.inArray(this,s);return a[t]}).toArray();e=new e(t)}else e=this;return e}),We("table()",function(t){var t=this.tables(t),e=t.context;return e.length?new Ye(e[0]):t}),Xe("tables().nodes()","table().node()",function(){return this.iterator("table",function(t){return t.nTable},1)}),Xe("tables().body()","table().body()",function(){return this.iterator("table",function(t){return t.nTBody},1)}),Xe("tables().header()","table().header()",function(){return this.iterator("table",function(t){return t.nTHead},1)}),Xe("tables().footer()","table().footer()",function(){return this.iterator("table",function(t){return t.nTFoot},1)}),Xe("tables().containers()","table().container()",function(){return this.iterator("table",function(t){return t.nTableWrapper},1)}),We("draw()",function(t){return this.iterator("table",function(e){N(e,!1===t)})}),We("page()",function(t){return t===a?this.page.info().page:this.iterator("table",function(e){de(e,t)})}),We("page.info()",function(){if(0===this.context.length)return a;var t=this.context[0],e=t._iDisplayStart,n=t._iDisplayLength,s=t.fnRecordsDisplay(),i=-1===n;return{page:i?0:Math.floor(e/n),pages:i?1:Math.ceil(s/n),start:e,end:t.fnDisplayEnd(),length:n,recordsTotal:t.fnRecordsTotal(),recordsDisplay:s}}),We("page.len()",function(t){return t===a?0!==this.context.length?this.context[0]._iDisplayLength:a:this.iterator("table",function(e){oe(e,t)})});var Ea=function(t,e,a){if("ssp"==Ve(t)?N(t,e):(pe(t,!0),z(t,[],function(a){M(t);for(var a=H(t,a),n=0,s=a.length;s>n;n++)y(t,a[n]);N(t,e),pe(t,!1)})),a){var n=new Ye(t);n.one("draw",function(){a(n.ajax.json())})}};We("ajax.json()",function(){var t=this.context;return 0<t.length?t[0].json:void 0}),We("ajax.params()",function(){var t=this.context;return 0<t.length?t[0].oAjaxData:void 0}),We("ajax.reload()",function(t,e){return this.iterator("table",function(a){Ea(a,!1===e,t)})}),We("ajax.url()",function(t){var e=this.context;return t===a?0===e.length?a:(e=e[0],e.ajax?n.isPlainObject(e.ajax)?e.ajax.url:e.ajax:e.sAjaxSource):this.iterator("table",function(e){n.isPlainObject(e.ajax)?e.ajax.url=t:e.ajax=t})}),We("ajax.url().load()",function(t,e){return this.iterator("table",function(a){Ea(a,!1===e,t)})});var Sa=function(t,e){var s,i,r,o,l,c,d=[];for(s=typeof t,t&&"string"!==s&&"function"!==s&&t.length!==a||(t=[t]),r=0,o=t.length;o>r;r++)for(i=t[r]&&t[r].split?t[r].split(","):[t[r]],l=0,c=i.length;c>l;l++)(s=e("string"==typeof i[l]?n.trim(i[l]):i[l]))&&s.length&&d.push.apply(d,s);return d},Ia=function(t){return t||(t={}),t.filter&&!t.search&&(t.search=t.filter),{search:t.search||"none",order:t.order||"current",page:t.page||"all"}},xa=function(t){for(var e=0,a=t.length;a>e;e++)if(0<t[e].length)return t[0]=t[e],t.length=1,t.context=[t.context[e]],t;return t.length=0,t},Aa=function(t,e){var a,s,i,r=[],o=t.aiDisplay;a=t.aiDisplayMaster;var l=e.search;if(s=e.order,i=e.page,"ssp"==Ve(t))return"removed"===l?[]:ua(0,a.length);if("current"==i)for(a=t._iDisplayStart,s=t.fnDisplayEnd();s>a;a++)r.push(o[a]);else if("current"==s||"applied"==s)r="none"==l?a.slice():"applied"==l?o.slice():n.map(a,function(t){return-1===n.inArray(t,o)?t:null});else if("index"==s||"original"==s)for(a=0,s=t.aoData.length;s>a;a++)"none"==l?r.push(a):(i=n.inArray(a,o),(-1===i&&"removed"==l||i>=0&&"applied"==l)&&r.push(a));return r};We("rows()",function(t,e){t===a?t="":n.isPlainObject(t)&&(e=t,t="");var e=Ia(e),s=this.iterator("table",function(a){var s=e;return Sa(t,function(t){var e=ia(t);if(null!==e&&!s)return[e];var i=Aa(a,s);return null!==e&&-1!==n.inArray(e,i)?[e]:t?"function"==typeof t?n.map(i,function(e){var n=a.aoData[e];return t(e,n._aData,n.nTr)?e:null}):(e=pa(da(a.aoData,i,"nTr")),t.nodeName&&-1!==n.inArray(t,e)?[t._DT_RowIndex]:n(e).filter(t).map(function(){return this._DT_RowIndex}).toArray()):i})},1);return s.selector.rows=t,s.selector.opts=e,s}),We("rows().nodes()",function(){return this.iterator("row",function(t,e){return t.aoData[e].nTr||a},1)}),We("rows().data()",function(){return this.iterator(!0,"rows",function(t,e){return da(t.aoData,e,"_aData")},1)}),Xe("rows().cache()","row().cache()",function(t){return this.iterator("row",function(e,a){var n=e.aoData[a];return"search"===t?n._aFilterData:n._aSortData},1)}),Xe("rows().invalidate()","row().invalidate()",function(t){return this.iterator("row",function(e,a){D(e,a,t)})}),Xe("rows().indexes()","row().index()",function(){return this.iterator("row",function(t,e){return e},1)}),Xe("rows().remove()","row().remove()",function(){var t=this;return this.iterator("row",function(e,a,s){var i=e.aoData;i.splice(a,1);for(var r=0,o=i.length;o>r;r++)null!==i[r].nTr&&(i[r].nTr._DT_RowIndex=r);n.inArray(a,e.aiDisplay),k(e.aiDisplayMaster,a),k(e.aiDisplay,a),k(t[s],a,!1),qe(e)})}),We("rows.add()",function(t){var e=this.iterator("table",function(e){var a,n,s,i=[];for(n=0,s=t.length;s>n;n++)a=t[n],i.push(a.nodeName&&"TR"===a.nodeName.toUpperCase()?w(e,a)[0]:y(e,a));return i},1),a=this.rows(-1);return a.pop(),a.push.apply(a,e.toArray()),a}),We("row()",function(t,e){return xa(this.rows(t,e))}),We("row().data()",function(t){var e=this.context;return t===a?e.length&&this.length?e[0].aoData[this[0]]._aData:a:(e[0].aoData[this[0]]._aData=t,D(e[0],this[0],"data"),this)}),We("row().node()",function(){var t=this.context;return t.length&&this.length?t[0].aoData[this[0]].nTr||null:null}),We("row.add()",function(t){t instanceof n&&t.length&&(t=t[0]);var e=this.iterator("table",function(e){return t.nodeName&&"TR"===t.nodeName.toUpperCase()?w(e,t)[0]:y(e,t)});return this.row(e[0])});var Ma=function(t,e){var n=t.context;n.length&&(n=n[0].aoData[e!==a?e:t[0]],n._details&&(n._details.remove(),n._detailsShow=a,n._details=a))},ka=function(t,e){var a=t.context;if(a.length&&t.length){var n=a[0].aoData[t[0]];if(n._details){(n._detailsShow=e)?n._details.insertAfter(n.nTr):n._details.detach();var s=a[0],i=new Ye(s),r=s.aoData;i.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details"),0<ca(r,"_details").length&&(i.on("draw.dt.DT_details",function(t,e){s===e&&i.rows({page:"current"}).eq(0).each(function(t){t=r[t],t._detailsShow&&t._details.insertAfter(t.nTr)})}),i.on("column-visibility.dt.DT_details",function(t,e){if(s===e)for(var a,n=_(e),i=0,o=r.length;o>i;i++)a=r[i],a._details&&a._details.children("td[colspan]").attr("colspan",n)}),i.on("destroy.dt.DT_details",function(t,e){if(s===e)for(var a=0,n=r.length;n>a;a++)r[a]._details&&Ma(i,a)}))}}};We("row().child()",function(t,e){var s=this.context;if(t===a)return s.length&&this.length?s[0].aoData[this[0]]._details:a;if(!0===t)this.child.show();else if(!1===t)Ma(this);else if(s.length&&this.length){var i=s[0],s=s[0].aoData[this[0]],r=[],o=function(t,e){if(t.nodeName&&"tr"===t.nodeName.toLowerCase())r.push(t);else{var a=n("<tr><td/></tr>").addClass(e);n("td",a).addClass(e).html(t)[0].colSpan=_(i),r.push(a[0])}};if(n.isArray(t)||t instanceof n)for(var l=0,c=t.length;c>l;l++)o(t[l],e);else o(t,e);s._details&&s._details.remove(),s._details=n(r),s._detailsShow&&s._details.insertAfter(s.nTr)}return this}),We(["row().child.show()","row().child().show()"],function(){return ka(this,!0),this}),We(["row().child.hide()","row().child().hide()"],function(){return ka(this,!1),this}),We(["row().child.remove()","row().child().remove()"],function(){return Ma(this),this}),We("row().child.isShown()",function(){var t=this.context;return t.length&&this.length?t[0].aoData[this[0]]._detailsShow||!1:!1});var Da=/^(.+):(name|visIdx|visible)$/,Ca=function(t,e,a,n,s){for(var a=[],n=0,i=s.length;i>n;n++)a.push(T(t,s[n],e));return a};We("columns()",function(t,e){t===a?t="":n.isPlainObject(t)&&(e=t,t="");var e=Ia(e),s=this.iterator("table",function(a){var s=t,i=e,r=a.aoColumns,o=ca(r,"sName"),l=ca(r,"nTh");return Sa(s,function(t){var e=ia(t);if(""===t)return ua(r.length);if(null!==e)return[e>=0?e:r.length+e];if("function"==typeof t){var s=Aa(a,i);return n.map(r,function(e,n){return t(n,Ca(a,n,0,0,s),l[n])?n:null})}var c="string"==typeof t?t.match(Da):"";if(!c)return n(l).filter(t).map(function(){return n.inArray(this,l)}).toArray();switch(c[2]){case"visIdx":case"visible":if(e=parseInt(c[1],10),0>e){var d=n.map(r,function(t,e){return t.bVisible?e:null});return[d[d.length+e]]}return[f(a,e)];case"name":return n.map(o,function(t,e){return t===c[1]?e:null})}})},1);return s.selector.cols=t,s.selector.opts=e,s}),Xe("columns().header()","column().header()",function(){return this.iterator("column",function(t,e){return t.aoColumns[e].nTh},1)}),Xe("columns().footer()","column().footer()",function(){return this.iterator("column",function(t,e){return t.aoColumns[e].nTf},1)}),Xe("columns().data()","column().data()",function(){return this.iterator("column-rows",Ca,1)}),Xe("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(t,e){return t.aoColumns[e].mData},1)}),Xe("columns().cache()","column().cache()",function(t){return this.iterator("column-rows",function(e,a,n,s,i){return da(e.aoData,i,"search"===t?"_aFilterData":"_aSortData",a)},1)}),Xe("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(t,e,a,n,s){return da(t.aoData,s,"anCells",e)},1)}),Xe("columns().visible()","column().visible()",function(t,e){return this.iterator("column",function(s,i){if(t===a)return s.aoColumns[i].bVisible;var r,o,l,c=s.aoColumns,d=c[i],u=s.aoData;if(t!==a&&d.bVisible!==t){if(t){var p=n.inArray(!0,ca(c,"bVisible"),i+1);for(r=0,o=u.length;o>r;r++)l=u[r].nTr,c=u[r].anCells,l&&l.insertBefore(c[i],c[p]||null)}else n(ca(s.aoData,"anCells",i)).detach();d.bVisible=t,R(s,s.aoHeader),R(s,s.aoFooter),(e===a||e)&&(h(s),(s.oScroll.sX||s.oScroll.sY)&&fe(s)),Fe(s,null,"column-visibility",[s,i,t]),Ce(s)}})}),Xe("columns().indexes()","column().index()",function(t){return this.iterator("column",function(e,a){return"visible"===t?m(e,a):a},1)}),We("columns.adjust()",function(){return this.iterator("table",function(t){h(t)},1)}),We("column.index()",function(t,e){if(0!==this.context.length){var a=this.context[0];if("fromVisible"===t||"toData"===t)return f(a,e);if("fromData"===t||"toVisible"===t)return m(a,e)}}),We("column()",function(t,e){return xa(this.columns(t,e))}),We("cells()",function(t,e,s){if(n.isPlainObject(t)&&(typeof t.row!==a?(s=e,e=null):(s=t,t=null)),n.isPlainObject(e)&&(s=e,e=null),null===e||e===a)return this.iterator("table",function(e){var i,r,o,l,c,d,u,p=t,h=Ia(s),f=e.aoData,m=Aa(e,h),h=pa(da(f,m,"anCells")),_=n([].concat.apply([],h)),b=e.aoColumns.length;return Sa(p,function(t){var s="function"==typeof t;if(null===t||t===a||s){for(r=[],o=0,l=m.length;l>o;o++)for(i=m[o],c=0;b>c;c++)d={row:i,column:c},s?(u=e.aoData[i],t(d,T(e,i,c),u.anCells[c])&&r.push(d)):r.push(d);return r}return n.isPlainObject(t)?[t]:_.filter(t).map(function(t,e){return i=e.parentNode._DT_RowIndex,{row:i,column:n.inArray(e,f[i].anCells)}}).toArray()})});var i,r,o,l,c,d=this.columns(e,s),u=this.rows(t,s),p=this.iterator("table",function(t,e){for(i=[],r=0,o=u[e].length;o>r;r++)for(l=0,c=d[e].length;c>l;l++)i.push({row:u[e][r],column:d[e][l]});return i},1);return n.extend(p.selector,{cols:e,rows:t,opts:s}),p}),Xe("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(t,e,n){return(t=t.aoData[e].anCells)?t[n]:a},1)}),We("cells().data()",function(){return this.iterator("cell",function(t,e,a){return T(t,e,a)},1)}),Xe("cells().cache()","cell().cache()",function(t){return t="search"===t?"_aFilterData":"_aSortData",this.iterator("cell",function(e,a,n){return e.aoData[a][t][n]},1)}),Xe("cells().render()","cell().render()",function(t){return this.iterator("cell",function(e,a,n){return T(e,a,n,t)},1)}),Xe("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(t,e,a){return{row:e,column:a,columnVisible:m(t,a)}},1)}),Xe("cells().invalidate()","cell().invalidate()",function(t){return this.iterator("cell",function(e,a,n){D(e,a,t,n)})}),We("cell()",function(t,e,a){return xa(this.cells(t,e,a))}),We("cell().data()",function(t){var e=this.context,n=this[0];return t===a?e.length&&n.length?T(e[0],n[0].row,n[0].column):a:(E(e[0],n[0].row,n[0].column,t),D(e[0],n[0].row,"data",n[0].column),this)}),We("order()",function(t,e){var s=this.context;return t===a?0!==s.length?s[0].aaSorting:a:("number"==typeof t?t=[[t,e]]:n.isArray(t[0])||(t=Array.prototype.slice.call(arguments)),this.iterator("table",function(e){e.aaSorting=t.slice()}))}),We("order.listener()",function(t,e,a){return this.iterator("table",function(n){Me(n,t,e,a)})}),We(["columns().order()","column().order()"],function(t){var e=this;
return this.iterator("table",function(a,s){var i=[];n.each(e[s],function(e,a){i.push([a,t])}),a.aaSorting=i})}),We("search()",function(t,e,s,i){var r=this.context;return t===a?0!==r.length?r[0].oPreviousSearch.sSearch:a:this.iterator("table",function(a){a.oFeatures.bFilter&&j(a,n.extend({},a.oPreviousSearch,{sSearch:t+"",bRegex:null===e?!1:e,bSmart:null===s?!0:s,bCaseInsensitive:null===i?!0:i}),1)})}),Xe("columns().search()","column().search()",function(t,e,s,i){return this.iterator("column",function(r,o){var l=r.aoPreSearchCols;return t===a?l[o].sSearch:void(r.oFeatures.bFilter&&(n.extend(l[o],{sSearch:t+"",bRegex:null===e?!1:e,bSmart:null===s?!0:s,bCaseInsensitive:null===i?!0:i}),j(r,r.oPreviousSearch,1)))})}),We("state()",function(){return this.context.length?this.context[0].oSavedState:null}),We("state.clear()",function(){return this.iterator("table",function(t){t.fnStateSaveCallback.call(t.oInstance,t,{})})}),We("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),We("state.save()",function(){return this.iterator("table",function(t){Ce(t)})}),Ke.versionCheck=Ke.fnVersionCheck=function(t){for(var e,a,n=Ke.version.split("."),t=t.split("."),s=0,i=t.length;i>s;s++)if(e=parseInt(n[s],10)||0,a=parseInt(t[s],10)||0,e!==a)return e>a;return!0},Ke.isDataTable=Ke.fnIsDataTable=function(t){var e=n(t).get(0),a=!1;return n.each(Ke.settings,function(t,n){(n.nTable===e||n.nScrollHead===e||n.nScrollFoot===e)&&(a=!0)}),a},Ke.tables=Ke.fnTables=function(t){return n.map(Ke.settings,function(e){return!t||t&&n(e.nTable).is(":visible")?e.nTable:void 0})},Ke.util={throttle:be,escapeRegex:Z},Ke.camelToHungarian=i,We("$()",function(t,e){var a=this.rows(e).nodes(),a=n(a);return n([].concat(a.filter(t).toArray(),a.find(t).toArray()))}),n.each(["on","one","off"],function(t,e){We(e+"()",function(){var t=Array.prototype.slice.call(arguments);t[0].match(/\.dt\b/)||(t[0]+=".dt");var a=n(this.tables().nodes());return a[e].apply(a,t),this})}),We("clear()",function(){return this.iterator("table",function(t){M(t)})}),We("settings()",function(){return new Ye(this.context,this.context)}),We("data()",function(){return this.iterator("table",function(t){return ca(t.aoData,"_aData")}).flatten()}),We("destroy()",function(e){return e=e||!1,this.iterator("table",function(a){var s,i=a.nTableWrapper.parentNode,r=a.oClasses,o=a.nTable,l=a.nTBody,c=a.nTHead,d=a.nTFoot,u=n(o),l=n(l),p=n(a.nTableWrapper),h=n.map(a.aoData,function(t){return t.nTr});a.bDestroying=!0,Fe(a,"aoDestroyCallback","destroy",[a]),e||new Ye(a).columns().visible(!0),p.unbind(".DT").find(":not(tbody *)").unbind(".DT"),n(t).unbind(".DT-"+a.sInstance),o!=c.parentNode&&(u.children("thead").detach(),u.append(c)),d&&o!=d.parentNode&&(u.children("tfoot").detach(),u.append(d)),u.detach(),p.detach(),a.aaSorting=[],a.aaSortingFixed=[],ke(a),n(h).removeClass(a.asStripeClasses.join(" ")),n("th, td",c).removeClass(r.sSortable+" "+r.sSortableAsc+" "+r.sSortableDesc+" "+r.sSortableNone),a.bJUI&&(n("th span."+r.sSortIcon+", td span."+r.sSortIcon,c).detach(),n("th, td",c).each(function(){var t=n("div."+r.sSortJUIWrapper,this);n(this).append(t.contents()),t.detach()})),!e&&i&&i.insertBefore(o,a.nTableReinsertBefore),l.children().detach(),l.append(h),u.css("width",a.sDestroyWidth).removeClass(r.sTable),(s=a.asDestroyStripes.length)&&l.children().each(function(t){n(this).addClass(a.asDestroyStripes[t%s])}),i=n.inArray(a,Ke.settings),-1!==i&&Ke.settings.splice(i,1)})}),Ke.version="1.10.4",Ke.settings=[],Ke.models={},Ke.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},Ke.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null},Ke.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},Ke.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(t){try{return JSON.parse((-1===t.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+t.sInstance+"_"+location.pathname))}catch(e){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(t,e){try{(-1===t.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+t.sInstance+"_"+location.pathname,JSON.stringify(e))}catch(a){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:n.extend({},Ke.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null},s(Ke.defaults),Ke.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},s(Ke.defaults.column),Ke.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:a,oAjaxData:a,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==Ve(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==Ve(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var t=this._iDisplayLength,e=this._iDisplayStart,a=e+t,n=this.aiDisplay.length,s=this.oFeatures,i=s.bPaginate;return s.bServerSide?!1===i||-1===t?e+n:Math.min(e+t,this._iRecordsDisplay):!i||a>n||-1===t?n:a},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{}},Ke.ext=je={classes:{},errMode:"alert",feature:[],search:[],internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:Ke.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:Ke.version},n.extend(je,{afnFiltering:je.search,aTypes:je.type.detect,ofnSearch:je.type.search,oSort:je.type.order,afnSortData:je.order,aoFeatures:je.feature,oApi:je.internal,oStdClasses:je.classes,oPagination:je.pager}),n.extend(Ke.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var Pa="",Pa="",$a=Pa+"ui-state-default",Oa=Pa+"css_right ui-icon ui-icon-",Ra=Pa+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";n.extend(Ke.ext.oJUIClasses,Ke.ext.classes,{sPageButton:"fg-button ui-button "+$a,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:$a+" sorting_asc",sSortDesc:$a+" sorting_desc",sSortable:$a+" sorting",sSortableAsc:$a+" sorting_asc_disabled",sSortableDesc:$a+" sorting_desc_disabled",sSortableNone:$a+" sorting_disabled",sSortJUIAsc:Oa+"triangle-1-n",sSortJUIDesc:Oa+"triangle-1-s",sSortJUI:Oa+"carat-2-n-s",sSortJUIAscAllowed:Oa+"carat-1-n",sSortJUIDescAllowed:Oa+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+$a,sScrollFoot:"dataTables_scrollFoot "+$a,sHeaderTH:$a,sFooterTH:$a,sJUIHeader:Ra+" ui-corner-tl ui-corner-tr",sJUIFooter:Ra+" ui-corner-bl ui-corner-br"});var La=Ke.ext.pager;n.extend(La,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},simple_numbers:function(t,e){return["previous",Ge(t,e),"next"]},full_numbers:function(t,e){return["first","previous",Ge(t,e),"next","last"]},_numbers:Ge,numbers_length:7}),n.extend(!0,Ke.ext.renderer,{pageButton:{_:function(t,a,s,i,r,o){var l,c,d=t.oClasses,u=t.oLanguage.oPaginate,p=0,h=function(e,a){var i,f,m,_,b=function(e){de(t,e.data.action,!0)};for(i=0,f=a.length;f>i;i++)if(_=a[i],n.isArray(_))m=n("<"+(_.DT_el||"div")+"/>").appendTo(e),h(m,_);else{switch(c=l="",_){case"ellipsis":e.append("<span>&hellip;</span>");break;case"first":l=u.sFirst,c=_+(r>0?"":" "+d.sPageButtonDisabled);break;case"previous":l=u.sPrevious,c=_+(r>0?"":" "+d.sPageButtonDisabled);break;case"next":l=u.sNext,c=_+(o-1>r?"":" "+d.sPageButtonDisabled);break;case"last":l=u.sLast,c=_+(o-1>r?"":" "+d.sPageButtonDisabled);break;default:l=_+1,c=r===_?d.sPageButtonActive:""}l&&(m=n("<a>",{"class":d.sPageButton+" "+c,"aria-controls":t.sTableId,"data-dt-idx":p,tabindex:t.iTabIndex,id:0===s&&"string"==typeof _?t.sTableId+"_"+_:null}).html(l).appendTo(e),Ne(m,{action:_},b),p++)}};try{var f=n(e.activeElement).data("dt-idx");h(n(a).empty(),i),null!==f&&n(a).find("[data-dt-idx="+f+"]").focus()}catch(m){}}}}),n.extend(Ke.ext.type.detect,[function(t,e){var a=e.oLanguage.sDecimal;return oa(t,a)?"num"+a:null},function(t){if(!(!t||t instanceof Date||ta.test(t)&&ea.test(t)))return null;var e=Date.parse(t);return null!==e&&!isNaN(e)||sa(t)?"date":null},function(t,e){var a=e.oLanguage.sDecimal;return oa(t,a,!0)?"num-fmt"+a:null},function(t,e){var a=e.oLanguage.sDecimal;return la(t,a)?"html-num"+a:null},function(t,e){var a=e.oLanguage.sDecimal;return la(t,a,!0)?"html-num-fmt"+a:null},function(t){return sa(t)||"string"==typeof t&&-1!==t.indexOf("<")?"html":null}]),n.extend(Ke.ext.type.search,{html:function(t){return sa(t)?t:"string"==typeof t?t.replace(Ze," ").replace(Je,""):""},string:function(t){return sa(t)?t:"string"==typeof t?t.replace(Ze," "):t}});var Na=function(t,e,a,n){return 0===t||t&&"-"!==t?(e&&(t=ra(t,e)),t.replace&&(a&&(t=t.replace(a,"")),n&&(t=t.replace(n,""))),1*t):-1/0};return n.extend(je.type.order,{"date-pre":function(t){return Date.parse(t)||0},"html-pre":function(t){return sa(t)?"":t.replace?t.replace(/<.*?>/g,"").toLowerCase():t+""},"string-pre":function(t){return sa(t)?"":"string"==typeof t?t.toLowerCase():t.toString?t.toString():""},"string-asc":function(t,e){return e>t?-1:t>e?1:0},"string-desc":function(t,e){return e>t?1:t>e?-1:0}}),Be(""),n.extend(!0,Ke.ext.renderer,{header:{_:function(t,e,a,s){n(t.nTable).on("order.dt.DT",function(n,i,r,o){t===i&&(n=a.idx,e.removeClass(a.sSortingClass+" "+s.sSortAsc+" "+s.sSortDesc).addClass("asc"==o[n]?s.sSortAsc:"desc"==o[n]?s.sSortDesc:a.sSortingClass))})},jqueryui:function(t,e,a,s){n("<div/>").addClass(s.sSortJUIWrapper).append(e.contents()).append(n("<span/>").addClass(s.sSortIcon+" "+a.sSortingClassJUI)).appendTo(e),n(t.nTable).on("order.dt.DT",function(n,i,r,o){t===i&&(n=a.idx,e.removeClass(s.sSortAsc+" "+s.sSortDesc).addClass("asc"==o[n]?s.sSortAsc:"desc"==o[n]?s.sSortDesc:a.sSortingClass),e.find("span."+s.sSortIcon).removeClass(s.sSortJUIAsc+" "+s.sSortJUIDesc+" "+s.sSortJUI+" "+s.sSortJUIAscAllowed+" "+s.sSortJUIDescAllowed).addClass("asc"==o[n]?s.sSortJUIAsc:"desc"==o[n]?s.sSortJUIDesc:a.sSortingClassJUI))})}}}),Ke.render={number:function(t,e,a,n){return{display:function(s){var i=0>s?"-":"",s=Math.abs(parseFloat(s)),r=parseInt(s,10),s=a?e+(s-r).toFixed(a).substring(2):"";return i+(n||"")+r.toString().replace(/\B(?=(\d{3})+(?!\d))/g,t)+s}}}},n.extend(Ke.ext.internal,{_fnExternApiFunc:He,_fnBuildAjax:z,_fnAjaxUpdate:V,_fnAjaxParameters:G,_fnAjaxUpdateDraw:B,_fnAjaxDataSrc:H,_fnAddColumn:u,_fnColumnOptions:p,_fnAdjustColumnSizing:h,_fnVisibleToColumnIndex:f,_fnColumnIndexToVisible:m,_fnVisbleColumns:_,_fnGetColumns:b,_fnColumnTypes:v,_fnApplyColumnDefs:g,_fnHungarianMap:s,_fnCamelToHungarian:i,_fnLanguageCompat:r,_fnBrowserDetect:c,_fnAddData:y,_fnAddTr:w,_fnNodeToDataIndex:function(t,e){return e._DT_RowIndex!==a?e._DT_RowIndex:null},_fnNodeToColumnIndex:function(t,e,a){return n.inArray(a,t.aoData[e].anCells)},_fnGetCellData:T,_fnSetCellData:E,_fnSplitObjNotation:S,_fnGetObjectDataFn:I,_fnSetObjectDataFn:x,_fnGetDataMaster:A,_fnClearTable:M,_fnDeleteIndex:k,_fnInvalidate:D,_fnGetRowElements:C,_fnCreateTr:P,_fnBuildHead:O,_fnDrawHead:R,_fnDraw:L,_fnReDraw:N,_fnAddOptionsHtml:U,_fnDetectHeader:F,_fnGetUniqueThs:q,_fnFeatureHtmlFilter:K,_fnFilterComplete:j,_fnFilterCustom:Y,_fnFilterColumn:W,_fnFilter:X,_fnFilterCreateSearch:Q,_fnEscapeRegex:Z,_fnFilterData:J,_fnFeatureHtmlInfo:ae,_fnUpdateInfo:ne,_fnInfoMacros:se,_fnInitialise:ie,_fnInitComplete:re,_fnLengthChange:oe,_fnFeatureHtmlLength:le,_fnFeatureHtmlPaginate:ce,_fnPageChange:de,_fnFeatureHtmlProcessing:ue,_fnProcessingDisplay:pe,_fnFeatureHtmlTable:he,_fnScrollDraw:fe,_fnApplyToChildren:me,_fnCalculateColumnWidths:_e,_fnThrottle:be,_fnConvertToWidth:ve,_fnScrollingWidthAdjust:ge,_fnGetWidestNode:ye,_fnGetMaxLenString:we,_fnStringToCss:Te,_fnScrollBarWidth:Ee,_fnSortFlatten:Se,_fnSort:Ie,_fnSortAria:xe,_fnSortListener:Ae,_fnSortAttachListener:Me,_fnSortingClasses:ke,_fnSortData:De,_fnSaveState:Ce,_fnLoadState:Pe,_fnSettingsFromNode:$e,_fnLog:Oe,_fnMap:Re,_fnBindAction:Ne,_fnCallbackReg:Ue,_fnCallbackFire:Fe,_fnLengthOverflow:qe,_fnRenderer:ze,_fnDataSource:Ve,_fnRowAttributes:$,_fnCalculateEnd:function(){}}),n.fn.dataTable=Ke,n.fn.dataTableSettings=Ke.settings,n.fn.dataTableExt=Ke.ext,n.fn.DataTable=function(t){return n(this).dataTable(t).api()},n.each(Ke,function(t,e){n.fn.DataTable[t]=e}),n.fn.dataTable};"function"==typeof define&&define.amd?define("datatables",["jquery"],n):"object"==typeof exports?n(require("jquery")):jQuery&&!jQuery.fn.dataTable&&n(jQuery)}(window,document),function(){var t=function(t,e){t.extend(e.ext.classes,{sWrapper:"dataTables_wrapper dt-foundation"}),t.extend(!0,e.defaults,{dom:"<'row'<'small-6 columns'l><'small-6 columns'f>r>t<'row'<'small-6 columns'i><'small-6 columns'p>>",renderer:"foundation"}),e.ext.renderer.pageButton.foundation=function(a,n,s,i,r,o){var l,c,d=new e.Api(a),u=a.oClasses,p=a.oLanguage.oPaginate,h=function(e,n){var i,f,m,_,b=function(t){t.preventDefault(),"ellipsis"!==t.data.action&&d.page(t.data.action).draw(!1)};for(i=0,f=n.length;f>i;i++)if(_=n[i],t.isArray(_))h(e,_);else{switch(c=l="",_){case"ellipsis":l="&hellip;",c="unavailable";break;case"first":l=p.sFirst,c=_+(r>0?"":" unavailable");break;case"previous":l=p.sPrevious,c=_+(r>0?"":" unavailable");break;case"next":l=p.sNext,c=_+(o-1>r?"":" unavailable");break;case"last":l=p.sLast,c=_+(o-1>r?"":" unavailable");break;default:l=_+1,c=r===_?"current":""}l&&(m=t("<li>",{"class":u.sPageButton+" "+c,"aria-controls":a.sTableId,tabindex:a.iTabIndex,id:0===s&&"string"==typeof _?a.sTableId+"_"+_:null}).append(t("<a>",{href:"#"}).html(l)).appendTo(e),a.oApi._fnBindAction(m,{action:_},b))}};h(t(n).empty().html('<ul class="pagination"/>').children("ul"),i)},e.TableTools&&(t.extend(!0,e.TableTools.classes,{container:"DTTT button-group",buttons:{normal:"button",disabled:"disabled"},collection:{container:"DTTT_dropdown dropdown-menu",buttons:{normal:"",disabled:"disabled"}},select:{row:"active"}}),t.extend(!0,e.TableTools.DEFAULTS.oTags,{collection:{container:"ul",button:"li",liner:"a"}}))};"function"==typeof define&&define.amd?define("foundation-datatables",["jquery","datatables"],t):"object"==typeof exports?t(require("jquery"),require("datatables")):jQuery&&t(jQuery,jQuery.fn.dataTable)}(window,document),define("utils/resource-select",["require","utils/notifier","utils/locale","opennebula/cluster","opennebula/user","opennebula/group"],function(t){var e=t("utils/notifier"),a=t("utils/locale");t("opennebula/cluster"),t("opennebula/user"),t("opennebula/group");var n=function(n,s,i,r,o,l,c,d,u,p){var h=t("opennebula/"+i.toLowerCase());$(n,s).html('<i class="fa fa-spinner fa-spin"></i>'),h.list({timeout:!0,success:function(t,e){var f='<select class="resource_list_select">';o&&(f+='<option class="empty_value" value="">'+a.tr("Please select")+"</option>"),"Cluster"==i&&(l||(l=""),l+='<option value="-1">Default (none)</option>'),l&&(f+=l),c||(c=[]);var m=h.resource;$.each(e,function(){for(var t=this[m].ID,e=this[m].NAME,a=!0,n=0;n<c.length;n++)if(this[m][c[n]]==d[n]){a=!1;break}a&&(f+='<option elem_id="'+t+'" value="'+t+'">',p||(f+=t+": "),f+=e+"</option>")}),f+="</select>",$(n,s).html(f),r&&($(n+" .resource_list_select",s).val(r),u&&$(n+" .resource_list_select",s).change())},error:e.onError})};return{insert:n}}),define("utils/progress-bar",["require"],function(){var t=function(t,e,a,n){return percentage=0,e>0?(percentage=Math.floor(t/e*100),percentage>100&&(percentage=100)):0==e&&t>0&&(percentage=100),a=a||t+" / "+(e>=0?e:"-"),n?{percentage:percentage,str:a}:(html='<span class="progress-text right" style="font-size: 12px">'+a+'</span><br><div class="progress radius" style="height: 10px; margin-bottom:0px"><span class="meter" style="width: '+percentage+'%"></div>',html)};return{html:t}}),define("utils/humanize",["require","utils/locale"],function(t){function e(t,e,a){"undefined"==typeof t&&(t=0);for(var n=["","K","M","G","T"],s=e?0:1;t>=1024&&4>s;)t/=1024,s++;t=Math.round(10*t)/10,t-Math.round(t)==0&&(t=Math.round(t)),void 0==a&&(a="B");var i=t+n[s]+a;return i}function a(t){return e(t,!0)}function n(t){return e(t)}function s(t){"undefined"==typeof t&&(t=0);for(var e=["MB","GB","TB"],a=0;t>=1024&&2>a;)t/=1024,a++;t=Math.round(10*t)/10,t-Math.round(t)==0&&(t=Math.round(t));var n=t+e[a];return n}function i(t){var e=Math.floor(t/86400);t-=86400*e;var a=Math.floor(t/3600)%24;t-=3600*a;var n=Math.floor(t/60)%60;t-=60*n;var s="";return e>0&&(s+=e+"d "),a>0&&(s+=a+"h "),s+=n+"m "}function r(t,e){for(var a=""+t;a.length<e;)a="0"+a;return a}function o(t){var e=new Date;e.setTime(1e3*t);var a=r(e.getSeconds(),2),n=r(e.getHours(),2),s=r(e.getMinutes(),2),i=r(e.getDate(),2),o=r(e.getMonth()+1,2),l=e.getFullYear();return n+":"+s+":"+a+" "+i+"/"+o+"/"+l}function l(t,e){var a=new Date;a.setTime(1e3*t);{var n=(r(a.getSeconds(),2),r(a.getHours(),2)),s=r(a.getMinutes(),2),i=r(a.getDate(),2),o=r(a.getMonth()+1,2);a.getFullYear()}return e?i+"/"+o:n+":"+s}function c(t,e,a,n,s){var i="";if(!t)return"Not defined";e||(e=10),a||(a="bold"),n||(n="1px solid #efefef"),s||(s=6);var r=null;if(t.constructor==Array)for(r=0;r<t.length;++r)i+=d(r,t[r],e,a,n,s);else for(r in t)i+=d(r,t[r],e,a,n,s);return i}function d(t,e,a,n,s,i){var r="";return"object"==typeof e?(r+='<tr>        <td class="key_td" style=            "padding-left:'+a+"px;             font-weight:"+n+";             border-bottom:"+s+";             padding-top:"+i+"px;             padding-bottom:"+i+'px;">'+t+'</td>        <td class="value_td" style=            "border-bottom:'+s+";             padding-top:"+i+"px;             padding-bottom:"+i+'px">        </td>      </tr>',r+=c(e,a+25,"normal","0",1)):r+='<tr>        <td class="key_td" style="            padding-left:'+a+"px;            font-weight:"+n+";            border-bottom:"+s+";            padding-top:"+i+"px;            padding-bottom:"+i+'px">'+t+'</td>        <td class="value_td" style="            border-bottom:'+s+";            padding-top:"+i+"px;            padding-bottom:"+i+'px">'+e+"</td>      </tr>",r}function u(t){function e(t){return 1e3>t?t+1900:t}var a,n,s=Math.round((new Date).getTime()/1e3)-t,i=new Date(1e3*t);return 60>s?s+"s ago":3600>s?(a=Math.floor(s/60),a+"m ago"):86400>s?(n=Math.floor(s/60/60),n+"h ago"):s>86400?i.getYear()!==(new Date).getYear()?i.getDay()+" "+p.months[i.getMonth()].substr(0,3)+" "+e(i.getYear()):i.getDay()+" "+p.months[i.getMonth()].substr(0,3):s}var p=t("utils/locale");return{size:e,sizeFromB:a,sizeFromKB:n,sizeFromMB:s,prettyDuration:i,prettyTime:o,prettyTimeAxis:l,prettyPrintJSON:c,prettyTimeAgo:u}}),define("utils/quotas/quota-widgets",["require","utils/progress-bar","utils/humanize","utils/locale","sunstone","utils/resource-select","./quota-limits","utils/quotas/quota-defaults"],function(t){function e(t){return $.isEmptyObject(t.VM_QUOTA)&&$.isEmptyObject(t.DATASTORE_QUOTA)&&$.isEmptyObject(t.IMAGE_QUOTA)&&$.isEmptyObject(t.NETWORK_QUOTA)}function a(t){$.isEmptyObject(t.VM_QUOTA)&&0!=t.ID&&(t.VM_QUOTA={VM:{VMS:z,VMS_USED:0,CPU:z,CPU_USED:0,MEMORY:z,MEMORY_USED:0,VOLATILE_SIZE:z,VOLATILE_SIZE_USED:0}})}function n(t,e){var a=$.isEmptyObject(t.VM_QUOTA),n="";n+=a?'<fieldset style="display: none" class="editable_quota">':"<fieldset>";var s;return s=a?y(0,z,e.VM_QUOTA.VM.VMS,{quota_name:"VM_VMS"}):y(t.VM_QUOTA.VM.VMS_USED,t.VM_QUOTA.VM.VMS,e.VM_QUOTA.VM.VMS,{quota_name:"VM_VMS"}),n+="<legend>"+L.tr("VMs")+"</legend>        <div>"+s+"</div>        <br>      </fieldset>"}function s(t,e){var a=$.isEmptyObject(t.VM_QUOTA),n="";n+=a?'<fieldset style="display: none" class="editable_quota">':"<fieldset>";var s;return s=a?y(0,z,e.VM_QUOTA.VM.CPU,{is_float:!0,quota_name:"VM_CPU"}):y(t.VM_QUOTA.VM.CPU_USED,t.VM_QUOTA.VM.CPU,e.VM_QUOTA.VM.CPU,{is_float:!0,quota_name:"VM_CPU"}),n+="<legend>"+L.tr("CPU")+"</legend>        <div>"+s+"</div>        <br>        </fieldset>"}function i(t,e){var a=$.isEmptyObject(t.VM_QUOTA),n="";n+=a?'<fieldset style="display: none" class="editable_quota">':"<fieldset>";var s;return s=a?y(0,z,e.VM_QUOTA.VM.MEMORY,{mb:!0,quota_name:"VM_MEMORY"}):y(t.VM_QUOTA.VM.MEMORY_USED,t.VM_QUOTA.VM.MEMORY,e.VM_QUOTA.VM.MEMORY,{mb:!0,quota_name:"VM_MEMORY"}),n+="<legend>"+L.tr("Memory")+"</legend>        <div>"+s+"</div>        <br>        </fieldset>"}function r(t,e){var a=$.isEmptyObject(t.VM_QUOTA),n="";n+=a?'<fieldset style="display: none" class="editable_quota">':"<fieldset>";var s;return s=a?y(0,z,e.VM_QUOTA.VM.VOLATILE_SIZE,{mb:!0,quota_name:"VM_VOLATILE_SIZE"}):y(t.VM_QUOTA.VM.VOLATILE_SIZE_USED,t.VM_QUOTA.VM.VOLATILE_SIZE,e.VM_QUOTA.VM.VOLATILE_SIZE,{mb:!0,quota_name:"VM_VOLATILE_SIZE"}),n+="<legend>"+L.tr("Volatile disks")+"</legend>        <div>"+s+"</div>        <br>        </fieldset>"}function o(t,e){var a=$.isEmptyObject(t.IMAGE_QUOTA),n="";n+=a?'<fieldset style="padding: 5px 15px; display: none" class="editable_quota">':'<fieldset style="padding: 5px 15px">',n+="<legend>"+L.tr("Image")+'</legend>          <table class="quota_table extended_table image_quota_table">          <thead>              <tr>                  <th style="width:16%">'+L.tr("ID")+'</th>                  <th style="width:84%">'+L.tr("Running VMs")+"</th>              </tr>          </thead>          <tbody>";var s=[];a||($.isArray(t.IMAGE_QUOTA.IMAGE)?s=t.IMAGE_QUOTA.IMAGE:t.IMAGE_QUOTA.IMAGE.ID&&(s=[t.IMAGE_QUOTA.IMAGE]));for(var i=0;i<s.length;i++){var r=e.IMAGE_QUOTA[s[i].ID];void 0==r&&(r={RVMS:V});var o=y(s[i].RVMS_USED,s[i].RVMS,r.RVMS,{quota_name:"IMAGE_RVMS"});n+='<tr class="image_quota_tr" quota_id="'+s[i].ID+'">          <td>'+s[i].ID+"</td>          <td>"+o+"</td>        </tr>"}return n+='</tbody>              <tfoot>                  <tr class="editable_quota" style="display: none">                      <td colspan="2">                          <a type="button"                             class="button small radius small-12"                             id="image_add_quota_btn"><i class="fa fa-plus"></i>                            '+L.tr("Add a new quota")+"                          </a>                      </td>                  </tr>              </tfoot>          </table>      </fieldset>"}function l(t,e){t.off("click","#image_add_quota_btn"),t.on("click","#image_add_quota_btn",function(){return $(".image_quota_table tbody",t).append('<tr class="image_quota_tr" quota_id="-1">          <td class="image_select" colspan="2"></td>          <td class="rvms_bar"></td>        </tr>'),U.insert("td.image_select",$(".image_quota_table tbody tr",t).last(),"Image",null,!0),$(".image_quota_table tbody tr",t).last().off("change",".resource_list_select"),$(".image_quota_table tbody tr",t).last().on("change",".resource_list_select",function(){$(this).parents("td").attr("colspan","1");var t=$(this).val(),a=$(this).parents("tr");a.attr("quota_id",t);var n=e.IMAGE_QUOTA[t];void 0==n&&(n={RVMS:V});var s=y(0,z,n.RVMS,{quota_name:"IMAGE_RVMS"});$("td.rvms_bar",a).html(s),$(".editable_quota",a).show(),$(".non_editable_quota",a).hide(),$.each($("input",a),function(){m(this)})}),!1})}function c(t,e){var a=$.isEmptyObject(t.DATASTORE_QUOTA),n="";n+=a?'<fieldset style="padding: 5px 15px; display: none" class="editable_quota">':'<fieldset style="padding: 5px 15px">',n+="<legend>"+L.tr("Datastore")+'</legend>        <table class="quota_table extended_table ds_quota_table">          <thead>              <tr>                <th style="width:16%">'+L.tr("ID")+'</th>                <th style="width:42%">'+L.tr("Images")+'</th>                <th style="width:42%">'+L.tr("Size")+"</th>              </tr>          </thead>          <tbody>";var s=[];a||($.isArray(t.DATASTORE_QUOTA.DATASTORE)?s=t.DATASTORE_QUOTA.DATASTORE:t.DATASTORE_QUOTA.DATASTORE.ID&&(s=[t.DATASTORE_QUOTA.DATASTORE]));for(var i=0;i<s.length;i++){var r=e.DATASTORE_QUOTA[s[i].ID];void 0==r&&(r={IMAGES:V,SIZE:V});var o=y(s[i].IMAGES_USED,s[i].IMAGES,r.IMAGES,{quota_name:"DS_IMAGES"}),l=y(s[i].SIZE_USED,s[i].SIZE,r.SIZE,{mb:!0,quota_name:"DS_SIZE"});n+='<tr class="ds_quota_tr" quota_id="'+s[i].ID+'">        <td>'+s[i].ID+"</td>        <td>"+o+"</td>        <td>"+l+"</td>      </tr>"}return n+='</tbody>            <tfoot>                <tr class="editable_quota" style="display: none">                    <td colspan="3">                        <a type="button"                           class="button small radius small-12"                           id="ds_add_quota_btn"><i class="fa fa-plus"></i>                          '+L.tr("Add a new quota")+'                        </a>                    </td>                </tr>            </tfoot>        </table>        <div class="">        </div>    </fieldset>'}function d(t,e){return t.off("click","#ds_add_quota_btn"),t.on("click","#ds_add_quota_btn",function(){return $(".ds_quota_table tbody",t).append('<tr class="ds_quota_tr" quota_id="-1">          <td class="ds_select" colspan="3"></td>          <td class="img_bar"></td>          <td class="size_bar"></td>        </tr>'),U.insert("td.ds_select",$(".ds_quota_table tbody tr",t).last(),"Datastore",null,!0),$(".ds_quota_table tbody tr",t).last().off("change",".resource_list_select"),$(".ds_quota_table tbody tr",t).last().on("change",".resource_list_select",function(){$(this).parents("td").attr("colspan","1");var t=$(this).val(),a=$(this).parents("tr");a.attr("quota_id",t);var n=e.DATASTORE_QUOTA[t];void 0==n&&(n={IMAGES:V,SIZE:V});var s=y(0,z,n.IMAGES,{quota_name:"DS_IMAGES"}),i=y(0,z,n.SIZE,{mb:!0,quota_name:"DS_SIZE"});$("td.img_bar",a).html(s),$("td.size_bar",a).html(i),$(".editable_quota",a).show(),$(".non_editable_quota",a).hide(),$.each($("input",a),function(){m(this)})}),!1}),!1}function u(t,e){var a=$.isEmptyObject(t.NETWORK_QUOTA),n="";n+=a?'<fieldset style="padding: 5px 15px; display: none" class="editable_quota">':'<fieldset style="padding: 5px 15px">',n+="<legend>"+L.tr("Network")+'</legend>        <table class="quota_table extended_table network_quota_table">            <thead>                <tr>                    <th style="width:16%">'+L.tr("ID")+'</th>                    <th style="width:84%">'+L.tr("Leases")+"</th>                </tr>            </thead>            <tbody>";var s=[];a||($.isArray(t.NETWORK_QUOTA.NETWORK)?s=t.NETWORK_QUOTA.NETWORK:t.NETWORK_QUOTA.NETWORK.ID&&(s=[t.NETWORK_QUOTA.NETWORK]));for(var i=0;i<s.length;i++){var r=e.NETWORK_QUOTA[s[i].ID];void 0==r&&(r={LEASES:V});var o=y(s[i].LEASES_USED,s[i].LEASES,r.LEASES,{quota_name:"NETWORK_LEASES"});n+='<tr class="network_quota_tr" quota_id="'+s[i].ID+'">          <td>'+s[i].ID+"</td>          <td>"+o+"</td>        </tr>"}return n+='</tbody>            <tfoot>              <tr class="editable_quota" style="display: none">                <td colspan="2">                  <a type="button"                     class="button small radius small-12"                     id="network_add_quota_btn"><i class="fa fa-plus"></i>                    '+L.tr("Add a new quota")+"                  </a>                </td>              </tr>            </tfoot>          </table>        </fieldset>"}function p(t,e){return t.off("click","#network_add_quota_btn"),t.on("click","#network_add_quota_btn",function(){return $(".network_quota_table tbody",t).append('<tr class="network_quota_tr" quota_id="-1">              <td class="network_select" colspan="2"></td>              <td class="leases_bar"></td>          </tr>'),U.insert("td.network_select",$(".network_quota_table tbody tr",t).last(),"Network",null,!0),$(".network_quota_table tbody tr",t).last().off("change",".resource_list_select"),$(".network_quota_table tbody tr",t).last().on("change",".resource_list_select",function(){$(this).parents("td").attr("colspan","1");
var t=$(this).val(),a=$(this).parents("tr");a.attr("quota_id",t);var n=e.NETWORK_QUOTA[t];void 0==n&&(n={LEASES:V});var s=y(0,z,n.LEASES,{quota_name:"NETWORK_LEASES"});$("td.leases_bar",a).html(s),$(".editable_quota",a).show(),$(".non_editable_quota",a).hide(),$.each($("input",a),function(){m(this)})}),!1}),!1}function h(t,l,d){a(t);var p,h=n(t,l),f=s(t,l),m=i(t,l),_=r(t,l),b=o(t,l),v=u(t,l),g=c(t,l);return p='<div class="quotas">',d&&(p+='<div class="row">          <div class="large-12 columns">            <span class="right">              <button class="button secondary small radius" id="edit_quotas_button">                <span class="fa fa-pencil-square-o"></span> '+L.tr("Edit")+'              </button>              <button class="button alert small radius" id="cancel_quotas_button" style="display: none">                '+L.tr("Cancel")+'              </button>              <button class="button success small radius" id="submit_quotas_button" style="display: none">                '+L.tr("Apply")+"              </button>            </span>          </div>        </div>"),e(t)&&(p+='<div class="row non_editable_quota">          <div class="large-8 large-centered columns">            <div class="text-center">              <span class="fa-stack fa-5x" style="color: #dfdfdf">                <i class="fa fa-cloud fa-stack-2x"></i>                <i class="fa fa-align-left fa-stack-1x fa-inverse"></i>              </span>              <br>              <p style="font-size: 18px; color: #999">                '+L.tr("There are no quotas defined")+"              </p>            </div>          </div>        </div>"),p+='<div class="row">          <div class="large-6 columns">'+h+'</div>          <div class="large-6 columns">'+f+'</div>        </div>        <div class="row">          <div class="large-6 columns">'+m+'</div>          <div class="large-6 columns">'+_+'</div>        </div>        <br><br>        <div class="row">          <div class="large-6 columns">'+b+'</div>          <div class="large-6 columns right">'+v+'</div>        </div>        <br><br>        <div class="row">          <div class="large-12 columns">'+g+"</div>        </div>      </div>"}function f(t){switch(t.attr("quota_mode")){case"edit":return t.val();case"default":return z;case"unlimited":return V}}function m(t){switch($(t).val()){case z:$(t).parents(".quotabar_container").find(".quotabar_default_btn").click();break;case V:$(t).parents(".quotabar_container").find(".quotabar_unlimited_btn").click()}}function _(t){return $("#edit_quotas_button",t).hide(),$("#cancel_quotas_button",t).show(),$("#submit_quotas_button",t).show(),$.each($("div.quotabar_container input",t),function(){m(this)}),$(".editable_quota",t).show(),$(".non_editable_quota",t).hide(),!1}function b(t,e){e.off("click",".quotabar_edit_btn"),e.on("click",".quotabar_edit_btn",function(){var t=$(this).parents(".quotabar_container").find("input");return"edit"!=t.attr("quota_mode")&&(t.attr("quota_mode","edit"),t.attr("disabled",!1),t.val(t.attr("quota_limit")>=0?t.attr("quota_limit"):"0")),!1}),e.off("click",".quotabar_default_btn"),e.on("click",".quotabar_default_btn",function(){var t=$(this).parents(".quotabar_container").find("input"),e=t.attr("quota_default");return e==V&&(e=""),t.val(L.tr("Default")+" ("+e+")"),t.attr("quota_mode","default"),t.attr("disabled","disabled"),!1}),e.off("click",".quotabar_unlimited_btn"),e.on("click",".quotabar_unlimited_btn",function(){var t=$(this).parents(".quotabar_container").find("input");return t.val(L.tr("Unlimited")),t.attr("quota_mode","unlimited"),t.attr("disabled","disabled"),!1})}function v(t){var e={};return e.VM={CPU:f($("div[quota_name=VM_CPU] input",t)),MEMORY:f($("div[quota_name=VM_MEMORY] input",t)),VMS:f($("div[quota_name=VM_VMS] input",t)),VOLATILE_SIZE:f($("div[quota_name=VM_VOLATILE_SIZE] input",t))},$.each($("tr.image_quota_tr",t),function(){"-1"!=$(this).attr("quota_id")&&(void 0==e.IMAGE&&(e.IMAGE=[]),e.IMAGE.push({ID:$(this).attr("quota_id"),RVMS:f($("div[quota_name=IMAGE_RVMS] input",this))}))}),$.each($("tr.network_quota_tr",t),function(){"-1"!=$(this).attr("quota_id")&&(void 0==e.NETWORK&&(e.NETWORK=[]),e.NETWORK.push({ID:$(this).attr("quota_id"),LEASES:f($("div[quota_name=NETWORK_LEASES] input",this))}))}),$.each($("tr.ds_quota_tr",t),function(){"-1"!=$(this).attr("quota_id")&&(void 0==e.DATASTORE&&(e.DATASTORE=[]),e.DATASTORE.push({ID:$(this).attr("quota_id"),IMAGES:f($("div[quota_name=DS_IMAGES] input",this)),SIZE:f($("div[quota_name=DS_SIZE] input",this))}))}),e}function g(t,e,a,n){if(a){e.off("click","#edit_quotas_button"),e.on("click","#edit_quotas_button",function(){return _(e)}),e.off("click","#cancel_quotas_button"),e.on("click","#cancel_quotas_button",function(){return N.runAction(n+".show",t.ID),!1}),e.off("click","#submit_quotas_button"),e.on("click","#submit_quotas_button",function(){var a=v(e);return N.runAction(n+".set_quota",[t.ID],a),!1}),b(t,e);var s=q.getDefaultQuotas(n);l(e,s),p(e,s),d(e,s)}}function y(t,e,a,n){n||(n={}),n.quota_name||(n.quota_name="");var s;n.is_float?(t=parseFloat(t,10),s=k(e,a)):(t=parseInt(t,10),s=M(e,a)),percentage=0,s>0?(percentage=Math.floor(t/s*100),percentage>100&&(percentage=100)):0==s&&t>0&&(percentage=100);var i;return i=n.mb?R.size(1024*t)+" / "+(s>=0?R.size(1024*s):"-"):t+" / "+(s>=0?s:"-"),html='<div class="quotabar_container" quota_name="'+n.quota_name+'">        <div class="row collapse editable_quota" style="font-size: 12px; display: none">          <div class="small-2 columns">            <label style="font-size: 12px; margin: 0px" class="inline right">'+t+" /&nbsp;</label>          </div>",html+=n.mb?'<div class="small-4 columns">':'<div class="small-5 columns">',html+='<input type="text" style="font-size: 12px; margin: 0px" quota_mode="edit" quota_limit="'+e+'" quota_default="'+a+'" value="'+e+'"/>          </div>',n.mb&&(html+='<div class="small-1 columns">            <span style="font-size: 12px; height: 2.0625rem !important; line-height: 2.0625rem !important;" class="postfix">MB</span>          </div>'),html+='<div class="small-5 columns">            <ul class="button-group">              <li><a style="font-size: 1em; margin: 0px" class="button tiny secondary quotabar_edit_btn"><span class="fa fa-pencil"></span></a></li>              <li><a style="font-size: 1em; margin: 0px" class="button tiny secondary quotabar_default_btn"><span class="fa fa-file-o"></span></a></li>              <li><a style="font-size: 1em; margin: 0px" class="button tiny secondary quotabar_unlimited_btn"><strong>&infin;</strong></a></li>            </ul>          </div>        </div>        <div class="row collapse non_editable_quota">          <div class="large-12 columns">            <div class="progress-text right" style="font-size: 12px">              '+i+'            </div>            <br>            <div class="progress radius" style="height: 10px; margin-bottom:0px">              <span class="meter" style="width: '+percentage+'%" />            </div>          </div>        </div>      </div>',html}function w(t,e,a,n){var s=parseInt(t,10),i=M(e,a);return S(s,i,null,n)}function T(t,e,a,n){var s=parseInt(t,10),i=M(e,a);return info_str=R.size(1024*s)+" / "+(i>=0?R.size(1024*i):"-"),S(s,i,info_str,n)}function E(t,e,a,n){var s=parseFloat(t,10),i=k(e,a);return S(s,i,null,n)}function S(t,e,a,n){return percentage=0,e>0?(percentage=Math.floor(t/e*100),percentage>100&&(percentage=100)):0==e&&t>0&&(percentage=100),a=a||t+" / "+(e>=0?e:"-"),n?{percentage:percentage,str:a}:(html='<span class="progress-text right" style="font-size: 12px">'+a+'</span><br><div class="progress radius" style="height: 10px; margin-bottom:0px"><span class="meter" style="width: '+percentage+'%"></div>',html)}function I(t,e,a){var n=parseInt(t,10),s=M(e,a);return O.html(n,s,null)}function x(t,e,a){var n=parseInt(t,10),s=M(e,a);return info_str=R.size(1024*n)+" / "+(s>=0?R.size(1024*s):"-"),O.html(n,s,info_str)}function A(t,e,a){var n=parseFloat(t,10),s=k(e,a);return O.html(n,s,null)}function M(t,e){return i_limit=parseInt(t,10),i_default_limit=parseInt(e,10),t==z&&(i_limit=i_default_limit),isNaN(i_limit)&&(i_limit=0),i_limit}function k(t,e){return f_limit=parseFloat(t,10),f_default_limit=parseFloat(e,10),f_limit==parseFloat(z,10)&&(f_limit=f_default_limit),isNaN(f_limit)&&(f_limit=0),f_limit}function D(){return'<div class="row">        <div class="large-12 columns">          <dl class="tabs right-info-tabs text-center" data-tab>               <dd class="active"><a href="#vm_quota"><i class="fa fa-cloud"></i><br>'+L.tr("VM")+'</a></dd>               <dd><a href="#datastore_quota"><i class="fa fa-folder-open"></i><br>'+L.tr("Datastore")+'</a></dd>               <dd><a href="#image_quota"><i class="fa fa-upload"></i><br>'+L.tr("Image")+'</a></dd>               <dd><a href="#network_quota"><i class="fa fa-globe"></i><br>'+L.tr("VNet")+'</a></dd>          </dl>        </div>      </div>      <div class="row">        <div class="tabs-content">          <div id="vm_quota" class="content active">          </div>          <div id="datastore_quota" class="content">          </div>          <div id="image_quota" class="content">          </div>          <div id="network_quota" class="content">          </div>        </div>      </div>'}function C(t){$("form",t).submit(function(){var e=v(t),a=$("div.form_buttons button",this).val(),n=N.getAction(a).elements();return N.runAction(a,n,e),!1})}function P(t,e,a){var h=n(t,e),f=s(t,e),m=i(t,e),v=r(t,e),g=o(t,e),y=u(t,e),w=c(t,e);$("#vm_quota",a).html('<div class="large-6 columns">'+h+'</div>        <div class="large-6 columns">'+f+'</div>        <div class="large-6 columns">'+m+'</div>        <div class="large-6 columns">'+v+"</div>"),$("#datastore_quota",a).html('<div class="large-12 columns">'+w+"</div>"),$("#image_quota",a).html('<div class="large-12 columns">'+g+"</div>"),$("#network_quota",a).html('<div class="large-12 columns">'+y+"</div>"),b(t,a),l(a,e),p(a,e),d(a,e),_(a),a.foundation()}var O=t("utils/progress-bar"),R=t("utils/humanize"),L=t("utils/locale"),N=t("sunstone"),U=t("utils/resource-select"),F=t("./quota-limits"),q=t("utils/quotas/quota-defaults"),z=F.QUOTA_LIMIT_DEFAULT,V=F.QUOTA_LIMIT_UNLIMITED;return{initEmptyQuotas:a,quotaBar:I,quotaBarMB:x,quotaBarFloat:A,initQuotasPanel:h,setupQuotasPanel:g,dialogHTML:D,setupQuotasDialog:C,populateQuotasDialog:P,quotaFloatInfo:E,quotaMBInfo:T,quotaInfo:w}}),define("templates/helpers/advancedSection",["require","hbs/handlebars"],function(t){var e=t("hbs/handlebars"),a=0,n=function(t,n){a+=1;var s="advanced_section_"+a;return new e.SafeString('<div class="accordion_advanced"><a href="#'+s+'" class="accordion_advanced_toggle"><i class="fa fa-fw fa-chevron-down"/><i class="fa fa-fw fa-chevron-up"/>'+t+'</a><div id="'+s+'" class="content hidden">'+n.fn(this)+"</div></div>")};return e.registerHelper("advancedSection",n),n}),define("hbs!utils/accounting/html",["hbs","hbs/handlebars","templates/helpers/tr","templates/helpers/advancedSection"],function(t,e){var a=e.template({1:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'    <div class="row acct_table">\n      <div class="large-12 columns graph_legend">\n        <h3 class="subheader"><small>'+i((e.tr||t&&t.tr||s).call(t,"CPU hours",{name:"tr",hash:{},data:n}))+'</small></h3>\n      </div>\n      <div class="large-12 columns" style="overflow:auto">\n        <table id="acct_cpu_datatable" class="datatable twelve">\n          <thead>\n            <tr>\n              <th>'+i((e.tr||t&&t.tr||s).call(t,"Date",{name:"tr",hash:{},data:n}))+'</th>\n            </tr>\n          </thead>\n          <tbody id="tbody_acct_cpu_datatable">\n          </tbody>\n        </table>\n      </div>\n    </div>\n    <div class="row acct_table">\n      <div class="large-12 columns graph_legend">\n        <h3 class="subheader"><small>'+i((e.tr||t&&t.tr||s).call(t,"Memory GB hours",{name:"tr",hash:{},data:n}))+'</small></h3>\n      </div>\n      <div class="large-12 columns" style="overflow:auto">\n        <table id="acct_mem_datatable" class="datatable twelve">\n          <thead>\n            <tr>\n              <th>'+i((e.tr||t&&t.tr||s).call(t,"Date",{name:"tr",hash:{},data:n}))+'</th>\n            </tr>\n          </thead>\n          <tbody id="tbody_acct_mem_datatable">\n          </tbody>\n        </table>\n      </div>\n    </div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o='<div class="row">\n  <div id="acct_start_time_container" class="left columns">\n    <label for="acct_start_time">'+r((e.tr||t&&t.tr||i).call(t,"Start time",{name:"tr",hash:{},data:n}))+'</label>\n    <input id="acct_start_time" type="date" placeholder="2013-06-30"/>\n  </div>\n  <div id="acct_end_time_container" class="left columns">\n    <label for="acct_end_time">'+r((e.tr||t&&t.tr||i).call(t,"End time",{name:"tr",hash:{},data:n}))+'</label>\n    <input id="acct_end_time" type="date" placeholder="2013-12-30"/>\n  </div>\n  <div id="acct_group_by_container" class="left columns">\n    <label for="acct_group_by">'+r((e.tr||t&&t.tr||i).call(t,"Group by",{name:"tr",hash:{},data:n}))+'</label>\n    <select id="acct_group_by" name="acct_group_by">\n      <option value="user">'+r((e.tr||t&&t.tr||i).call(t,"User",{name:"tr",hash:{},data:n}))+'</option>\n      <option value="group">'+r((e.tr||t&&t.tr||i).call(t,"Group",{name:"tr",hash:{},data:n}))+'</option>\n      <option value="vm">'+r((e.tr||t&&t.tr||i).call(t,"VM",{name:"tr",hash:{},data:n}))+'</option>\n    </select>\n  </div>\n  <div id="acct_owner_container" class="left columns">\n    <label for="acct_owner">'+r((e.tr||t&&t.tr||i).call(t,"Filter",{name:"tr",hash:{},data:n}))+'</label>\n    <div class="row">\n      <div class="large-5 columns">\n        <select id="acct_owner" name="acct_owner">\n          <option value="acct_owner_all">'+r((e.tr||t&&t.tr||i).call(t,"All",{name:"tr",hash:{},data:n}))+'</option>\n          <option value="acct_owner_group">'+r((e.tr||t&&t.tr||i).call(t,"Group",{name:"tr",hash:{},data:n}))+'</option>\n          <option value="acct_owner_user">'+r((e.tr||t&&t.tr||i).call(t,"User",{name:"tr",hash:{},data:n}))+'</option>\n        </select>\n      </div>\n      <div class="large-7 columns">\n        <div id="acct_owner_select"/>\n      </div>\n    </div>\n  </div>\n  <div id="acct_button_container" class="left columns" style="margin-top: 15px">\n    <button class="button radius success large-12" id="acct_submit" type="button">\n      '+r((e.tr||t&&t.tr||i).call(t,"Get Accounting",{name:"tr",hash:{},data:n}))+'\n    </button>\n  </div>\n</div>\n<br>\n<div id="acct_placeholder">\n  <div class="row">\n    <div class="large-8 large-centered columns">\n      <div class="text-center">\n        <span class="fa-stack fa-5x" style="color: #dfdfdf">\n          <i class="fa fa-cloud fa-stack-2x"></i>\n          <i class="fa fa-bar-chart-o fa-stack-1x fa-inverse"></i>\n        </span>\n        <div id="acct_no_data" class="hidden">\n          <br>\n          <p style="font-size: 18px; color: #999">\n            '+r((e.tr||t&&t.tr||i).call(t,"There are no accounting records",{name:"tr",hash:{},data:n}))+'\n          </p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<div id="acct_content" class="hidden">\n  <div class="row">\n    <div class="large-12 columns graph_legend">\n      <h3 class="subheader"><small>'+r((e.tr||t&&t.tr||i).call(t,"CPU hours",{name:"tr",hash:{},data:n}))+'</small></h3>\n    </div>\n    <div class="large-12 columns">\n      <div class="large-12 columns centered graph" id="acct_cpu_graph" style="height: 200px;">\n      </div>\n    </div>\n  </div>\n  <div class="row">\n    <div class="large-12 columns graph_legend">\n      <h3 class="subheader"><small>'+r((e.tr||t&&t.tr||i).call(t,"Memory GB hours",{name:"tr",hash:{},data:n}))+'</small></h3>\n    </div>\n    <div class="large-12 columns">\n      <div class="large-12 columns centered graph" id="acct_mem_graph" style="height: 200px;">\n      </div>\n    </div>\n  </div>\n  <br>\n';return s=(e.advancedSection||t&&t.advancedSection||i).call(t,(e.tr||t&&t.tr||i).call(t,"Accounting Tables",{name:"tr",hash:{},data:n}),{name:"advancedSection",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(o+=s),o+"</div>"},useData:!0});return e.registerPartial("utils/accounting/html",a),a}),function(t){t.color={},t.color.make=function(e,a,n,s){var i={};return i.r=e||0,i.g=a||0,i.b=n||0,i.a=null!=s?s:1,i.add=function(t,e){for(var a=0;a<t.length;++a)i[t.charAt(a)]+=e;return i.normalize()},i.scale=function(t,e){for(var a=0;a<t.length;++a)i[t.charAt(a)]*=e;return i.normalize()},i.toString=function(){return i.a>=1?"rgb("+[i.r,i.g,i.b].join(",")+")":"rgba("+[i.r,i.g,i.b,i.a].join(",")+")"},i.normalize=function(){function t(t,e,a){return t>e?t:e>a?a:e}return i.r=t(0,parseInt(i.r),255),i.g=t(0,parseInt(i.g),255),i.b=t(0,parseInt(i.b),255),i.a=t(0,i.a,1),i},i.clone=function(){return t.color.make(i.r,i.b,i.g,i.a)},i.normalize()},t.color.extract=function(e,a){var n;do{if(n=e.css(a).toLowerCase(),""!=n&&"transparent"!=n)break;e=e.parent()}while(e.length&&!t.nodeName(e.get(0),"body"));return"rgba(0, 0, 0, 0)"==n&&(n="transparent"),t.color.parse(n)},t.color.parse=function(a){var n,s=t.color.make;if(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(a))return s(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10));if(n=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(a))return s(parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),parseFloat(n[4]));if(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(a))return s(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]));if(n=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(a))return s(2.55*parseFloat(n[1]),2.55*parseFloat(n[2]),2.55*parseFloat(n[3]),parseFloat(n[4]));if(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))return s(parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16));if(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(a))return s(parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16));var i=t.trim(a).toLowerCase();return"transparent"==i?s(255,255,255,0):(n=e[i]||[0,0,0],s(n[0],n[1],n[2]))};var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(t){function e(e,a){var n=a.children("."+e)[0];if(null==n&&(n=document.createElement("canvas"),n.className=e,t(n).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(a),!n.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");n=window.G_vmlCanvasManager.initElement(n)}this.element=n;var s=this.context=n.getContext("2d"),i=window.devicePixelRatio||1,r=s.webkitBackingStorePixelRatio||s.mozBackingStorePixelRatio||s.msBackingStorePixelRatio||s.oBackingStorePixelRatio||s.backingStorePixelRatio||1;this.pixelRatio=i/r,this.resize(a.width(),a.height()),this.textContainer=null,this.text={},this._textCache={}}function a(a,s,i,r){function o(t,e){e=[_e].concat(e);for(var a=0;a<t.length;++a)t[a].apply(this,e)}function l(){for(var a={Canvas:e},n=0;n<r.length;++n){var s=r[n];s.init(_e,a),s.options&&t.extend(!0,se,s.options)}}function c(e){t.extend(!0,se,e),e&&e.colors&&(se.colors=e.colors),null==se.xaxis.color&&(se.xaxis.color=t.color.parse(se.grid.color).scale("a",.22).toString()),null==se.yaxis.color&&(se.yaxis.color=t.color.parse(se.grid.color).scale("a",.22).toString()),null==se.xaxis.tickColor&&(se.xaxis.tickColor=se.grid.tickColor||se.xaxis.color),null==se.yaxis.tickColor&&(se.yaxis.tickColor=se.grid.tickColor||se.yaxis.color),null==se.grid.borderColor&&(se.grid.borderColor=se.grid.color),null==se.grid.tickColor&&(se.grid.tickColor=t.color.parse(se.grid.color).scale("a",.22).toString());var n,s,i,r=a.css("font-size"),l=r?+r.replace("px",""):13,c={style:a.css("font-style"),size:Math.round(.8*l),variant:a.css("font-variant"),weight:a.css("font-weight"),family:a.css("font-family")};for(i=se.xaxes.length||1,n=0;i>n;++n)s=se.xaxes[n],s&&!s.tickColor&&(s.tickColor=s.color),s=t.extend(!0,{},se.xaxis,s),se.xaxes[n]=s,s.font&&(s.font=t.extend({},c,s.font),s.font.color||(s.font.color=s.color),s.font.lineHeight||(s.font.lineHeight=Math.round(1.15*s.font.size)));for(i=se.yaxes.length||1,n=0;i>n;++n)s=se.yaxes[n],s&&!s.tickColor&&(s.tickColor=s.color),s=t.extend(!0,{},se.yaxis,s),se.yaxes[n]=s,s.font&&(s.font=t.extend({},c,s.font),s.font.color||(s.font.color=s.color),s.font.lineHeight||(s.font.lineHeight=Math.round(1.15*s.font.size)));for(se.xaxis.noTicks&&null==se.xaxis.ticks&&(se.xaxis.ticks=se.xaxis.noTicks),se.yaxis.noTicks&&null==se.yaxis.ticks&&(se.yaxis.ticks=se.yaxis.noTicks),se.x2axis&&(se.xaxes[1]=t.extend(!0,{},se.xaxis,se.x2axis),se.xaxes[1].position="top",null==se.x2axis.min&&(se.xaxes[1].min=null),null==se.x2axis.max&&(se.xaxes[1].max=null)),se.y2axis&&(se.yaxes[1]=t.extend(!0,{},se.yaxis,se.y2axis),se.yaxes[1].position="right",null==se.y2axis.min&&(se.yaxes[1].min=null),null==se.y2axis.max&&(se.yaxes[1].max=null)),se.grid.coloredAreas&&(se.grid.markings=se.grid.coloredAreas),se.grid.coloredAreasColor&&(se.grid.markingsColor=se.grid.coloredAreasColor),se.lines&&t.extend(!0,se.series.lines,se.lines),se.points&&t.extend(!0,se.series.points,se.points),se.bars&&t.extend(!0,se.series.bars,se.bars),null!=se.shadowSize&&(se.series.shadowSize=se.shadowSize),null!=se.highlightColor&&(se.series.highlightColor=se.highlightColor),n=0;n<se.xaxes.length;++n)_(de,n+1).options=se.xaxes[n];for(n=0;n<se.yaxes.length;++n)_(ue,n+1).options=se.yaxes[n];for(var d in me)se.hooks[d]&&se.hooks[d].length&&(me[d]=me[d].concat(se.hooks[d]));o(me.processOptions,[se])}function d(t){ne=u(t),b(),v()}function u(e){for(var a=[],n=0;n<e.length;++n){var s=t.extend(!0,{},se.series);null!=e[n].data?(s.data=e[n].data,delete e[n].data,t.extend(!0,s,e[n]),e[n].data=s.data):s.data=e[n],a.push(s)}return a}function p(t,e){var a=t[e+"axis"];return"object"==typeof a&&(a=a.n),"number"!=typeof a&&(a=1),a}function h(){return t.grep(de.concat(ue),function(t){return t})}function f(t){var e,a,n={};for(e=0;e<de.length;++e)a=de[e],a&&a.used&&(n["x"+a.n]=a.c2p(t.left));for(e=0;e<ue.length;++e)a=ue[e],a&&a.used&&(n["y"+a.n]=a.c2p(t.top));return void 0!==n.x1&&(n.x=n.x1),void 0!==n.y1&&(n.y=n.y1),n}function m(t){var e,a,n,s={};for(e=0;e<de.length;++e)if(a=de[e],a&&a.used&&(n="x"+a.n,null==t[n]&&1==a.n&&(n="x"),null!=t[n])){s.left=a.p2c(t[n]);break}for(e=0;e<ue.length;++e)if(a=ue[e],a&&a.used&&(n="y"+a.n,null==t[n]&&1==a.n&&(n="y"),null!=t[n])){s.top=a.p2c(t[n]);break}return s}function _(e,a){return e[a-1]||(e[a-1]={n:a,direction:e==de?"x":"y",options:t.extend(!0,{},e==de?se.xaxis:se.yaxis)}),e[a-1]}function b(){var e,a=ne.length,n=-1;for(e=0;e<ne.length;++e){var s=ne[e].color;null!=s&&(a--,"number"==typeof s&&s>n&&(n=s))}n>=a&&(a=n+1);var i,r=[],o=se.colors,l=o.length,c=0;for(e=0;a>e;e++)i=t.color.parse(o[e%l]||"#666"),e%l==0&&e&&(c=c>=0?.5>c?-c-.2:0:-c),r[e]=i.scale("rgb",1+c);var d,u=0;for(e=0;e<ne.length;++e){if(d=ne[e],null==d.color?(d.color=r[u].toString(),++u):"number"==typeof d.color&&(d.color=r[d.color].toString()),null==d.lines.show){var h,f=!0;for(h in d)if(d[h]&&d[h].show){f=!1;break}f&&(d.lines.show=!0)}null==d.lines.zero&&(d.lines.zero=!!d.lines.fill),d.xaxis=_(de,p(d,"x")),d.yaxis=_(ue,p(d,"y"))}}function v(){function e(t,e,a){e<t.datamin&&e!=-v&&(t.datamin=e),a>t.datamax&&a!=v&&(t.datamax=a)}var a,n,s,i,r,l,c,d,u,p,f,m,_=Number.POSITIVE_INFINITY,b=Number.NEGATIVE_INFINITY,v=Number.MAX_VALUE;for(t.each(h(),function(t,e){e.datamin=_,e.datamax=b,e.used=!1}),a=0;a<ne.length;++a)r=ne[a],r.datapoints={points:[]},o(me.processRawData,[r,r.data,r.datapoints]);for(a=0;a<ne.length;++a){if(r=ne[a],f=r.data,m=r.datapoints.format,!m){if(m=[],m.push({x:!0,number:!0,required:!0}),m.push({y:!0,number:!0,required:!0}),r.bars.show||r.lines.show&&r.lines.fill){var g=!!(r.bars.show&&r.bars.zero||r.lines.show&&r.lines.zero);m.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:g}),r.bars.horizontal&&(delete m[m.length-1].y,m[m.length-1].x=!0)}r.datapoints.format=m}if(null==r.datapoints.pointsize){r.datapoints.pointsize=m.length,c=r.datapoints.pointsize,l=r.datapoints.points;var y=r.lines.show&&r.lines.steps;for(r.xaxis.used=r.yaxis.used=!0,n=s=0;n<f.length;++n,s+=c){p=f[n];var w=null==p;if(!w)for(i=0;c>i;++i)d=p[i],u=m[i],u&&(u.number&&null!=d&&(d=+d,isNaN(d)?d=null:1/0==d?d=v:d==-1/0&&(d=-v)),null==d&&(u.required&&(w=!0),null!=u.defaultValue&&(d=u.defaultValue))),l[s+i]=d;if(w)for(i=0;c>i;++i)d=l[s+i],null!=d&&(u=m[i],u.autoscale!==!1&&(u.x&&e(r.xaxis,d,d),u.y&&e(r.yaxis,d,d))),l[s+i]=null;else if(y&&s>0&&null!=l[s-c]&&l[s-c]!=l[s]&&l[s-c+1]!=l[s+1]){for(i=0;c>i;++i)l[s+c+i]=l[s+i];l[s+1]=l[s-c+1],s+=c}}}}for(a=0;a<ne.length;++a)r=ne[a],o(me.processDatapoints,[r,r.datapoints]);for(a=0;a<ne.length;++a){r=ne[a],l=r.datapoints.points,c=r.datapoints.pointsize,m=r.datapoints.format;var T=_,E=_,S=b,I=b;for(n=0;n<l.length;n+=c)if(null!=l[n])for(i=0;c>i;++i)d=l[n+i],u=m[i],u&&u.autoscale!==!1&&d!=v&&d!=-v&&(u.x&&(T>d&&(T=d),d>S&&(S=d)),u.y&&(E>d&&(E=d),d>I&&(I=d)));if(r.bars.show){var x;switch(r.bars.align){case"left":x=0;break;case"right":x=-r.bars.barWidth;break;default:x=-r.bars.barWidth/2}r.bars.horizontal?(E+=x,I+=x+r.bars.barWidth):(T+=x,S+=x+r.bars.barWidth)}e(r.xaxis,T,S),e(r.yaxis,E,I)}t.each(h(),function(t,e){e.datamin==_&&(e.datamin=null),e.datamax==b&&(e.datamax=null)})}function g(){a.css("padding",0).children().filter(function(){return!t(this).hasClass("flot-overlay")&&!t(this).hasClass("flot-base")}).remove(),"static"==a.css("position")&&a.css("position","relative"),ie=new e("flot-base",a),re=new e("flot-overlay",a),le=ie.context,ce=re.context,oe=t(re.element).unbind();var n=a.data("plot");n&&(n.shutdown(),re.clear()),a.data("plot",_e)}function y(){se.grid.hoverable&&(oe.mousemove(H),oe.bind("mouseleave",K)),se.grid.clickable&&oe.click(j),o(me.bindEvents,[oe])}function w(){ve&&clearTimeout(ve),oe.unbind("mousemove",H),oe.unbind("mouseleave",K),oe.unbind("click",j),o(me.shutdown,[oe])}function T(t){function e(t){return t}var a,n,s=t.options.transform||e,i=t.options.inverseTransform;"x"==t.direction?(a=t.scale=he/Math.abs(s(t.max)-s(t.min)),n=Math.min(s(t.max),s(t.min))):(a=t.scale=fe/Math.abs(s(t.max)-s(t.min)),a=-a,n=Math.max(s(t.max),s(t.min))),t.p2c=s==e?function(t){return(t-n)*a}:function(t){return(s(t)-n)*a},t.c2p=i?function(t){return i(n+t/a)}:function(t){return n+t/a}}function E(t){for(var e=t.options,a=t.ticks||[],n=e.labelWidth||0,s=e.labelHeight||0,i=n||("x"==t.direction?Math.floor(ie.width/(a.length||1)):null),r=t.direction+"Axis "+t.direction+t.n+"Axis",o="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+r,l=e.font||"flot-tick-label tickLabel",c=0;c<a.length;++c){var d=a[c];if(d.label){var u=ie.getTextInfo(o,d.label,l,null,i);n=Math.max(n,u.width),s=Math.max(s,u.height)}}t.labelWidth=e.labelWidth||n,t.labelHeight=e.labelHeight||s}function S(e){var a=e.labelWidth,n=e.labelHeight,s=e.options.position,i="x"===e.direction,r=e.options.tickLength,o=se.grid.axisMargin,l=se.grid.labelMargin,c=!0,d=!0,u=!0,p=!1;t.each(i?de:ue,function(t,a){a&&(a.show||a.reserveSpace)&&(a===e?p=!0:a.options.position===s&&(p?d=!1:c=!1),p||(u=!1))}),d&&(o=0),null==r&&(r=u?"full":5),isNaN(+r)||(l+=+r),i?(n+=l,"bottom"==s?(pe.bottom+=n+o,e.box={top:ie.height-pe.bottom,height:n}):(e.box={top:pe.top+o,height:n},pe.top+=n+o)):(a+=l,"left"==s?(e.box={left:pe.left+o,width:a},pe.left+=a+o):(pe.right+=a+o,e.box={left:ie.width-pe.right,width:a})),e.position=s,e.tickLength=r,e.box.padding=l,e.innermost=c}function I(t){"x"==t.direction?(t.box.left=pe.left-t.labelWidth/2,t.box.width=ie.width-pe.left-pe.right+t.labelWidth):(t.box.top=pe.top-t.labelHeight/2,t.box.height=ie.height-pe.bottom-pe.top+t.labelHeight)}function x(){var e,a=se.grid.minBorderMargin;if(null==a)for(a=0,e=0;e<ne.length;++e)a=Math.max(a,2*(ne[e].points.radius+ne[e].points.lineWidth/2));var n={left:a,right:a,top:a,bottom:a};t.each(h(),function(t,e){e.reserveSpace&&e.ticks&&e.ticks.length&&("x"===e.direction?(n.left=Math.max(n.left,e.labelWidth/2),n.right=Math.max(n.right,e.labelWidth/2)):(n.bottom=Math.max(n.bottom,e.labelHeight/2),n.top=Math.max(n.top,e.labelHeight/2)))}),pe.left=Math.ceil(Math.max(n.left,pe.left)),pe.right=Math.ceil(Math.max(n.right,pe.right)),pe.top=Math.ceil(Math.max(n.top,pe.top)),pe.bottom=Math.ceil(Math.max(n.bottom,pe.bottom))}function A(){var e,a=h(),n=se.grid.show;for(var s in pe){var i=se.grid.margin||0;pe[s]="number"==typeof i?i:i[s]||0}o(me.processOffset,[pe]);for(var s in pe)pe[s]+="object"==typeof se.grid.borderWidth?n?se.grid.borderWidth[s]:0:n?se.grid.borderWidth:0;if(t.each(a,function(t,e){var a=e.options;e.show=null==a.show?e.used:a.show,e.reserveSpace=null==a.reserveSpace?e.show:a.reserveSpace,M(e)}),n){var r=t.grep(a,function(t){return t.show||t.reserveSpace});for(t.each(r,function(t,e){k(e),D(e),C(e,e.ticks),E(e)}),e=r.length-1;e>=0;--e)S(r[e]);x(),t.each(r,function(t,e){I(e)})}he=ie.width-pe.left-pe.right,fe=ie.height-pe.bottom-pe.top,t.each(a,function(t,e){T(e)}),n&&L(),G()}function M(t){var e=t.options,a=+(null!=e.min?e.min:t.datamin),n=+(null!=e.max?e.max:t.datamax),s=n-a;if(0==s){var i=0==n?1:.01;null==e.min&&(a-=i),(null==e.max||null!=e.min)&&(n+=i)}else{var r=e.autoscaleMargin;null!=r&&(null==e.min&&(a-=s*r,0>a&&null!=t.datamin&&t.datamin>=0&&(a=0)),null==e.max&&(n+=s*r,n>0&&null!=t.datamax&&t.datamax<=0&&(n=0)))}t.min=a,t.max=n}function k(e){var a,s=e.options;a="number"==typeof s.ticks&&s.ticks>0?s.ticks:.3*Math.sqrt("x"==e.direction?ie.width:ie.height);var i=(e.max-e.min)/a,r=-Math.floor(Math.log(i)/Math.LN10),o=s.tickDecimals;null!=o&&r>o&&(r=o);var l,c=Math.pow(10,-r),d=i/c;if(1.5>d?l=1:3>d?(l=2,d>2.25&&(null==o||o>=r+1)&&(l=2.5,++r)):l=7.5>d?5:10,l*=c,null!=s.minTickSize&&l<s.minTickSize&&(l=s.minTickSize),e.delta=i,e.tickDecimals=Math.max(0,null!=o?o:r),e.tickSize=s.tickSize||l,"time"==s.mode&&!e.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(e.tickGenerator||(e.tickGenerator=function(t){var e,a=[],s=n(t.min,t.tickSize),i=0,r=Number.NaN;do e=r,r=s+i*t.tickSize,a.push(r),++i;while(r<t.max&&r!=e);return a},e.tickFormatter=function(t,e){var a=e.tickDecimals?Math.pow(10,e.tickDecimals):1,n=""+Math.round(t*a)/a;if(null!=e.tickDecimals){var s=n.indexOf("."),i=-1==s?0:n.length-s-1;if(i<e.tickDecimals)return(i?n:n+".")+(""+a).substr(1,e.tickDecimals-i)}return n}),t.isFunction(s.tickFormatter)&&(e.tickFormatter=function(t,e){return""+s.tickFormatter(t,e)}),null!=s.alignTicksWithAxis){var u=("x"==e.direction?de:ue)[s.alignTicksWithAxis-1];if(u&&u.used&&u!=e){var p=e.tickGenerator(e);if(p.length>0&&(null==s.min&&(e.min=Math.min(e.min,p[0])),null==s.max&&p.length>1&&(e.max=Math.max(e.max,p[p.length-1]))),e.tickGenerator=function(t){var e,a,n=[];for(a=0;a<u.ticks.length;++a)e=(u.ticks[a].v-u.min)/(u.max-u.min),e=t.min+e*(t.max-t.min),n.push(e);
return n},!e.mode&&null==s.tickDecimals){var h=Math.max(0,-Math.floor(Math.log(e.delta)/Math.LN10)+1),f=e.tickGenerator(e);f.length>1&&/\..*0$/.test((f[1]-f[0]).toFixed(h))||(e.tickDecimals=h)}}}}function D(e){var a=e.options.ticks,n=[];null==a||"number"==typeof a&&a>0?n=e.tickGenerator(e):a&&(n=t.isFunction(a)?a(e):a);var s,i;for(e.ticks=[],s=0;s<n.length;++s){var r=null,o=n[s];"object"==typeof o?(i=+o[0],o.length>1&&(r=o[1])):i=+o,null==r&&(r=e.tickFormatter(i,e)),isNaN(i)||e.ticks.push({v:i,label:r})}}function C(t,e){t.options.autoscaleMargin&&e.length>0&&(null==t.options.min&&(t.min=Math.min(t.min,e[0].v)),null==t.options.max&&e.length>1&&(t.max=Math.max(t.max,e[e.length-1].v)))}function P(){ie.clear(),o(me.drawBackground,[le]);var t=se.grid;t.show&&t.backgroundColor&&O(),t.show&&!t.aboveData&&R();for(var e=0;e<ne.length;++e)o(me.drawSeries,[le,ne[e]]),N(ne[e]);o(me.draw,[le]),t.show&&t.aboveData&&R(),ie.render(),W()}function $(t,e){for(var a,n,s,i,r=h(),o=0;o<r.length;++o)if(a=r[o],a.direction==e&&(i=e+a.n+"axis",t[i]||1!=a.n||(i=e+"axis"),t[i])){n=t[i].from,s=t[i].to;break}if(t[i]||(a="x"==e?de[0]:ue[0],n=t[e+"1"],s=t[e+"2"]),null!=n&&null!=s&&n>s){var l=n;n=s,s=l}return{from:n,to:s,axis:a}}function O(){le.save(),le.translate(pe.left,pe.top),le.fillStyle=ae(se.grid.backgroundColor,fe,0,"rgba(255, 255, 255, 0)"),le.fillRect(0,0,he,fe),le.restore()}function R(){var e,a,n,s;le.save(),le.translate(pe.left,pe.top);var i=se.grid.markings;if(i)for(t.isFunction(i)&&(a=_e.getAxes(),a.xmin=a.xaxis.min,a.xmax=a.xaxis.max,a.ymin=a.yaxis.min,a.ymax=a.yaxis.max,i=i(a)),e=0;e<i.length;++e){var r=i[e],o=$(r,"x"),l=$(r,"y");if(null==o.from&&(o.from=o.axis.min),null==o.to&&(o.to=o.axis.max),null==l.from&&(l.from=l.axis.min),null==l.to&&(l.to=l.axis.max),!(o.to<o.axis.min||o.from>o.axis.max||l.to<l.axis.min||l.from>l.axis.max)){o.from=Math.max(o.from,o.axis.min),o.to=Math.min(o.to,o.axis.max),l.from=Math.max(l.from,l.axis.min),l.to=Math.min(l.to,l.axis.max);var c=o.from===o.to,d=l.from===l.to;if(!c||!d)if(o.from=Math.floor(o.axis.p2c(o.from)),o.to=Math.floor(o.axis.p2c(o.to)),l.from=Math.floor(l.axis.p2c(l.from)),l.to=Math.floor(l.axis.p2c(l.to)),c||d){var u=r.lineWidth||se.grid.markingsLineWidth,p=u%2?.5:0;le.beginPath(),le.strokeStyle=r.color||se.grid.markingsColor,le.lineWidth=u,c?(le.moveTo(o.to+p,l.from),le.lineTo(o.to+p,l.to)):(le.moveTo(o.from,l.to+p),le.lineTo(o.to,l.to+p)),le.stroke()}else le.fillStyle=r.color||se.grid.markingsColor,le.fillRect(o.from,l.to,o.to-o.from,l.from-l.to)}}a=h(),n=se.grid.borderWidth;for(var f=0;f<a.length;++f){var m,_,b,v,g=a[f],y=g.box,w=g.tickLength;if(g.show&&0!=g.ticks.length){for(le.lineWidth=1,"x"==g.direction?(m=0,_="full"==w?"top"==g.position?0:fe:y.top-pe.top+("top"==g.position?y.height:0)):(_=0,m="full"==w?"left"==g.position?0:he:y.left-pe.left+("left"==g.position?y.width:0)),g.innermost||(le.strokeStyle=g.options.color,le.beginPath(),b=v=0,"x"==g.direction?b=he+1:v=fe+1,1==le.lineWidth&&("x"==g.direction?_=Math.floor(_)+.5:m=Math.floor(m)+.5),le.moveTo(m,_),le.lineTo(m+b,_+v),le.stroke()),le.strokeStyle=g.options.tickColor,le.beginPath(),e=0;e<g.ticks.length;++e){var T=g.ticks[e].v;b=v=0,isNaN(T)||T<g.min||T>g.max||"full"==w&&("object"==typeof n&&n[g.position]>0||n>0)&&(T==g.min||T==g.max)||("x"==g.direction?(m=g.p2c(T),v="full"==w?-fe:w,"top"==g.position&&(v=-v)):(_=g.p2c(T),b="full"==w?-he:w,"left"==g.position&&(b=-b)),1==le.lineWidth&&("x"==g.direction?m=Math.floor(m)+.5:_=Math.floor(_)+.5),le.moveTo(m,_),le.lineTo(m+b,_+v))}le.stroke()}}n&&(s=se.grid.borderColor,"object"==typeof n||"object"==typeof s?("object"!=typeof n&&(n={top:n,right:n,bottom:n,left:n}),"object"!=typeof s&&(s={top:s,right:s,bottom:s,left:s}),n.top>0&&(le.strokeStyle=s.top,le.lineWidth=n.top,le.beginPath(),le.moveTo(0-n.left,0-n.top/2),le.lineTo(he,0-n.top/2),le.stroke()),n.right>0&&(le.strokeStyle=s.right,le.lineWidth=n.right,le.beginPath(),le.moveTo(he+n.right/2,0-n.top),le.lineTo(he+n.right/2,fe),le.stroke()),n.bottom>0&&(le.strokeStyle=s.bottom,le.lineWidth=n.bottom,le.beginPath(),le.moveTo(he+n.right,fe+n.bottom/2),le.lineTo(0,fe+n.bottom/2),le.stroke()),n.left>0&&(le.strokeStyle=s.left,le.lineWidth=n.left,le.beginPath(),le.moveTo(0-n.left/2,fe+n.bottom),le.lineTo(0-n.left/2,0),le.stroke())):(le.lineWidth=n,le.strokeStyle=se.grid.borderColor,le.strokeRect(-n/2,-n/2,he+n,fe+n))),le.restore()}function L(){t.each(h(),function(t,e){var a,n,s,i,r,o=e.box,l=e.direction+"Axis "+e.direction+e.n+"Axis",c="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+l,d=e.options.font||"flot-tick-label tickLabel";if(ie.removeText(c),e.show&&0!=e.ticks.length)for(var u=0;u<e.ticks.length;++u)a=e.ticks[u],!a.label||a.v<e.min||a.v>e.max||("x"==e.direction?(i="center",n=pe.left+e.p2c(a.v),"bottom"==e.position?s=o.top+o.padding:(s=o.top+o.height-o.padding,r="bottom")):(r="middle",s=pe.top+e.p2c(a.v),"left"==e.position?(n=o.left+o.width-o.padding,i="right"):n=o.left+o.padding),ie.addText(c,n,s,a.label,d,null,null,i,r))})}function N(t){t.lines.show&&U(t),t.bars.show&&z(t),t.points.show&&F(t)}function U(t){function e(t,e,a,n,s){var i=t.points,r=t.pointsize,o=null,l=null;le.beginPath();for(var c=r;c<i.length;c+=r){var d=i[c-r],u=i[c-r+1],p=i[c],h=i[c+1];if(null!=d&&null!=p){if(h>=u&&u<s.min){if(h<s.min)continue;d=(s.min-u)/(h-u)*(p-d)+d,u=s.min}else if(u>=h&&h<s.min){if(u<s.min)continue;p=(s.min-u)/(h-u)*(p-d)+d,h=s.min}if(u>=h&&u>s.max){if(h>s.max)continue;d=(s.max-u)/(h-u)*(p-d)+d,u=s.max}else if(h>=u&&h>s.max){if(u>s.max)continue;p=(s.max-u)/(h-u)*(p-d)+d,h=s.max}if(p>=d&&d<n.min){if(p<n.min)continue;u=(n.min-d)/(p-d)*(h-u)+u,d=n.min}else if(d>=p&&p<n.min){if(d<n.min)continue;h=(n.min-d)/(p-d)*(h-u)+u,p=n.min}if(d>=p&&d>n.max){if(p>n.max)continue;u=(n.max-d)/(p-d)*(h-u)+u,d=n.max}else if(p>=d&&p>n.max){if(d>n.max)continue;h=(n.max-d)/(p-d)*(h-u)+u,p=n.max}(d!=o||u!=l)&&le.moveTo(n.p2c(d)+e,s.p2c(u)+a),o=p,l=h,le.lineTo(n.p2c(p)+e,s.p2c(h)+a)}}le.stroke()}function a(t,e,a){for(var n=t.points,s=t.pointsize,i=Math.min(Math.max(0,a.min),a.max),r=0,o=!1,l=1,c=0,d=0;;){if(s>0&&r>n.length+s)break;r+=s;var u=n[r-s],p=n[r-s+l],h=n[r],f=n[r+l];if(o){if(s>0&&null!=u&&null==h){d=r,s=-s,l=2;continue}if(0>s&&r==c+s){le.fill(),o=!1,s=-s,l=1,r=c=d+s;continue}}if(null!=u&&null!=h){if(h>=u&&u<e.min){if(h<e.min)continue;p=(e.min-u)/(h-u)*(f-p)+p,u=e.min}else if(u>=h&&h<e.min){if(u<e.min)continue;f=(e.min-u)/(h-u)*(f-p)+p,h=e.min}if(u>=h&&u>e.max){if(h>e.max)continue;p=(e.max-u)/(h-u)*(f-p)+p,u=e.max}else if(h>=u&&h>e.max){if(u>e.max)continue;f=(e.max-u)/(h-u)*(f-p)+p,h=e.max}if(o||(le.beginPath(),le.moveTo(e.p2c(u),a.p2c(i)),o=!0),p>=a.max&&f>=a.max)le.lineTo(e.p2c(u),a.p2c(a.max)),le.lineTo(e.p2c(h),a.p2c(a.max));else if(p<=a.min&&f<=a.min)le.lineTo(e.p2c(u),a.p2c(a.min)),le.lineTo(e.p2c(h),a.p2c(a.min));else{var m=u,_=h;f>=p&&p<a.min&&f>=a.min?(u=(a.min-p)/(f-p)*(h-u)+u,p=a.min):p>=f&&f<a.min&&p>=a.min&&(h=(a.min-p)/(f-p)*(h-u)+u,f=a.min),p>=f&&p>a.max&&f<=a.max?(u=(a.max-p)/(f-p)*(h-u)+u,p=a.max):f>=p&&f>a.max&&p<=a.max&&(h=(a.max-p)/(f-p)*(h-u)+u,f=a.max),u!=m&&le.lineTo(e.p2c(m),a.p2c(p)),le.lineTo(e.p2c(u),a.p2c(p)),le.lineTo(e.p2c(h),a.p2c(f)),h!=_&&(le.lineTo(e.p2c(h),a.p2c(f)),le.lineTo(e.p2c(_),a.p2c(f)))}}}}le.save(),le.translate(pe.left,pe.top),le.lineJoin="round";var n=t.lines.lineWidth,s=t.shadowSize;if(n>0&&s>0){le.lineWidth=s,le.strokeStyle="rgba(0,0,0,0.1)";var i=Math.PI/18;e(t.datapoints,Math.sin(i)*(n/2+s/2),Math.cos(i)*(n/2+s/2),t.xaxis,t.yaxis),le.lineWidth=s/2,e(t.datapoints,Math.sin(i)*(n/2+s/4),Math.cos(i)*(n/2+s/4),t.xaxis,t.yaxis)}le.lineWidth=n,le.strokeStyle=t.color;var r=V(t.lines,t.color,0,fe);r&&(le.fillStyle=r,a(t.datapoints,t.xaxis,t.yaxis)),n>0&&e(t.datapoints,0,0,t.xaxis,t.yaxis),le.restore()}function F(t){function e(t,e,a,n,s,i,r,o){for(var l=t.points,c=t.pointsize,d=0;d<l.length;d+=c){var u=l[d],p=l[d+1];null==u||u<i.min||u>i.max||p<r.min||p>r.max||(le.beginPath(),u=i.p2c(u),p=r.p2c(p)+n,"circle"==o?le.arc(u,p,e,0,s?Math.PI:2*Math.PI,!1):o(le,u,p,e,s),le.closePath(),a&&(le.fillStyle=a,le.fill()),le.stroke())}}le.save(),le.translate(pe.left,pe.top);var a=t.points.lineWidth,n=t.shadowSize,s=t.points.radius,i=t.points.symbol;if(0==a&&(a=1e-4),a>0&&n>0){var r=n/2;le.lineWidth=r,le.strokeStyle="rgba(0,0,0,0.1)",e(t.datapoints,s,null,r+r/2,!0,t.xaxis,t.yaxis,i),le.strokeStyle="rgba(0,0,0,0.2)",e(t.datapoints,s,null,r/2,!0,t.xaxis,t.yaxis,i)}le.lineWidth=a,le.strokeStyle=t.color,e(t.datapoints,s,V(t.points,t.color),0,!1,t.xaxis,t.yaxis,i),le.restore()}function q(t,e,a,n,s,i,r,o,l,c,d){var u,p,h,f,m,_,b,v,g;c?(v=_=b=!0,m=!1,u=a,p=t,f=e+n,h=e+s,u>p&&(g=p,p=u,u=g,m=!0,_=!1)):(m=_=b=!0,v=!1,u=t+n,p=t+s,h=a,f=e,h>f&&(g=f,f=h,h=g,v=!0,b=!1)),p<r.min||u>r.max||f<o.min||h>o.max||(u<r.min&&(u=r.min,m=!1),p>r.max&&(p=r.max,_=!1),h<o.min&&(h=o.min,v=!1),f>o.max&&(f=o.max,b=!1),u=r.p2c(u),h=o.p2c(h),p=r.p2c(p),f=o.p2c(f),i&&(l.fillStyle=i(h,f),l.fillRect(u,f,p-u,h-f)),d>0&&(m||_||b||v)&&(l.beginPath(),l.moveTo(u,h),m?l.lineTo(u,f):l.moveTo(u,f),b?l.lineTo(p,f):l.moveTo(p,f),_?l.lineTo(p,h):l.moveTo(p,h),v?l.lineTo(u,h):l.moveTo(u,h),l.stroke()))}function z(t){function e(e,a,n,s,i,r){for(var o=e.points,l=e.pointsize,c=0;c<o.length;c+=l)null!=o[c]&&q(o[c],o[c+1],o[c+2],a,n,s,i,r,le,t.bars.horizontal,t.bars.lineWidth)}le.save(),le.translate(pe.left,pe.top),le.lineWidth=t.bars.lineWidth,le.strokeStyle=t.color;var a;switch(t.bars.align){case"left":a=0;break;case"right":a=-t.bars.barWidth;break;default:a=-t.bars.barWidth/2}var n=t.bars.fill?function(e,a){return V(t.bars,t.color,e,a)}:null;e(t.datapoints,a,a+t.bars.barWidth,n,t.xaxis,t.yaxis),le.restore()}function V(e,a,n,s){var i=e.fill;if(!i)return null;if(e.fillColor)return ae(e.fillColor,n,s,a);var r=t.color.parse(a);return r.a="number"==typeof i?i:.4,r.normalize(),r.toString()}function G(){if(null!=se.legend.container?t(se.legend.container).html(""):a.find(".legend").remove(),se.legend.show){for(var e,n,s=[],i=[],r=!1,o=se.legend.labelFormatter,l=0;l<ne.length;++l)e=ne[l],e.label&&(n=o?o(e.label,e):e.label,n&&i.push({label:n,color:e.color}));if(se.legend.sorted)if(t.isFunction(se.legend.sorted))i.sort(se.legend.sorted);else if("reverse"==se.legend.sorted)i.reverse();else{var c="descending"!=se.legend.sorted;i.sort(function(t,e){return t.label==e.label?0:t.label<e.label!=c?1:-1})}for(var l=0;l<i.length;++l){var d=i[l];l%se.legend.noColumns==0&&(r&&s.push("</tr>"),s.push("<tr>"),r=!0),s.push('<td class="legendColorBox"><div style="border:1px solid '+se.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+d.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+d.label+"</td>")}if(r&&s.push("</tr>"),0!=s.length){var u='<table style="font-size:smaller;color:'+se.grid.color+'">'+s.join("")+"</table>";if(null!=se.legend.container)t(se.legend.container).html(u);else{var p="",h=se.legend.position,f=se.legend.margin;null==f[0]&&(f=[f,f]),"n"==h.charAt(0)?p+="top:"+(f[1]+pe.top)+"px;":"s"==h.charAt(0)&&(p+="bottom:"+(f[1]+pe.bottom)+"px;"),"e"==h.charAt(1)?p+="right:"+(f[0]+pe.right)+"px;":"w"==h.charAt(1)&&(p+="left:"+(f[0]+pe.left)+"px;");var m=t('<div class="legend">'+u.replace('style="','style="position:absolute;'+p+";")+"</div>").appendTo(a);if(0!=se.legend.backgroundOpacity){var _=se.legend.backgroundColor;null==_&&(_=se.grid.backgroundColor,_=_&&"string"==typeof _?t.color.parse(_):t.color.extract(m,"background-color"),_.a=1,_=_.toString());var b=m.children();t('<div style="position:absolute;width:'+b.width()+"px;height:"+b.height()+"px;"+p+"background-color:"+_+';"> </div>').prependTo(m).css("opacity",se.legend.backgroundOpacity)}}}}}function B(t,e,a){var n,s,i,r=se.grid.mouseActiveRadius,o=r*r+1,l=null;for(n=ne.length-1;n>=0;--n)if(a(ne[n])){var c=ne[n],d=c.xaxis,u=c.yaxis,p=c.datapoints.points,h=d.c2p(t),f=u.c2p(e),m=r/d.scale,_=r/u.scale;if(i=c.datapoints.pointsize,d.options.inverseTransform&&(m=Number.MAX_VALUE),u.options.inverseTransform&&(_=Number.MAX_VALUE),c.lines.show||c.points.show)for(s=0;s<p.length;s+=i){var b=p[s],v=p[s+1];if(null!=b&&!(b-h>m||-m>b-h||v-f>_||-_>v-f)){var g=Math.abs(d.p2c(b)-t),y=Math.abs(u.p2c(v)-e),w=g*g+y*y;o>w&&(o=w,l=[n,s/i])}}if(c.bars.show&&!l){var T,E;switch(c.bars.align){case"left":T=0;break;case"right":T=-c.bars.barWidth;break;default:T=-c.bars.barWidth/2}for(E=T+c.bars.barWidth,s=0;s<p.length;s+=i){var b=p[s],v=p[s+1],S=p[s+2];null!=b&&(ne[n].bars.horizontal?h<=Math.max(S,b)&&h>=Math.min(S,b)&&f>=v+T&&v+E>=f:h>=b+T&&b+E>=h&&f>=Math.min(S,v)&&f<=Math.max(S,v))&&(l=[n,s/i])}}}return l?(n=l[0],s=l[1],i=ne[n].datapoints.pointsize,{datapoint:ne[n].datapoints.points.slice(s*i,(s+1)*i),dataIndex:s,series:ne[n],seriesIndex:n}):null}function H(t){se.grid.hoverable&&Y("plothover",t,function(t){return 0!=t.hoverable})}function K(t){se.grid.hoverable&&Y("plothover",t,function(){return!1})}function j(t){Y("plotclick",t,function(t){return 0!=t.clickable})}function Y(t,e,n){var s=oe.offset(),i=e.pageX-s.left-pe.left,r=e.pageY-s.top-pe.top,o=f({left:i,top:r});o.pageX=e.pageX,o.pageY=e.pageY;var l=B(i,r,n);if(l&&(l.pageX=parseInt(l.series.xaxis.p2c(l.datapoint[0])+s.left+pe.left,10),l.pageY=parseInt(l.series.yaxis.p2c(l.datapoint[1])+s.top+pe.top,10)),se.grid.autoHighlight){for(var c=0;c<be.length;++c){var d=be[c];d.auto!=t||l&&d.series==l.series&&d.point[0]==l.datapoint[0]&&d.point[1]==l.datapoint[1]||Z(d.series,d.point)}l&&Q(l.series,l.datapoint,t)}a.trigger(t,[o,l])}function W(){var t=se.interaction.redrawOverlayInterval;return-1==t?void X():void(ve||(ve=setTimeout(X,t)))}function X(){ve=null,ce.save(),re.clear(),ce.translate(pe.left,pe.top);var t,e;for(t=0;t<be.length;++t)e=be[t],e.series.bars.show?ee(e.series,e.point):te(e.series,e.point);ce.restore(),o(me.drawOverlay,[ce])}function Q(t,e,a){if("number"==typeof t&&(t=ne[t]),"number"==typeof e){var n=t.datapoints.pointsize;e=t.datapoints.points.slice(n*e,n*(e+1))}var s=J(t,e);-1==s?(be.push({series:t,point:e,auto:a}),W()):a||(be[s].auto=!1)}function Z(t,e){if(null==t&&null==e)return be=[],void W();if("number"==typeof t&&(t=ne[t]),"number"==typeof e){var a=t.datapoints.pointsize;e=t.datapoints.points.slice(a*e,a*(e+1))}var n=J(t,e);-1!=n&&(be.splice(n,1),W())}function J(t,e){for(var a=0;a<be.length;++a){var n=be[a];if(n.series==t&&n.point[0]==e[0]&&n.point[1]==e[1])return a}return-1}function te(e,a){var n=a[0],s=a[1],i=e.xaxis,r=e.yaxis,o="string"==typeof e.highlightColor?e.highlightColor:t.color.parse(e.color).scale("a",.5).toString();if(!(n<i.min||n>i.max||s<r.min||s>r.max)){var l=e.points.radius+e.points.lineWidth/2;ce.lineWidth=l,ce.strokeStyle=o;var c=1.5*l;n=i.p2c(n),s=r.p2c(s),ce.beginPath(),"circle"==e.points.symbol?ce.arc(n,s,c,0,2*Math.PI,!1):e.points.symbol(ce,n,s,c,!1),ce.closePath(),ce.stroke()}}function ee(e,a){var n,s="string"==typeof e.highlightColor?e.highlightColor:t.color.parse(e.color).scale("a",.5).toString(),i=s;switch(e.bars.align){case"left":n=0;break;case"right":n=-e.bars.barWidth;break;default:n=-e.bars.barWidth/2}ce.lineWidth=e.bars.lineWidth,ce.strokeStyle=s,q(a[0],a[1],a[2]||0,n,n+e.bars.barWidth,function(){return i},e.xaxis,e.yaxis,ce,e.bars.horizontal,e.bars.lineWidth)}function ae(e,a,n,s){if("string"==typeof e)return e;for(var i=le.createLinearGradient(0,n,0,a),r=0,o=e.colors.length;o>r;++r){var l=e.colors[r];if("string"!=typeof l){var c=t.color.parse(s);null!=l.brightness&&(c=c.scale("rgb",l.brightness)),null!=l.opacity&&(c.a*=l.opacity),l=c.toString()}i.addColorStop(r/(o-1),l)}return i}var ne=[],se={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},ie=null,re=null,oe=null,le=null,ce=null,de=[],ue=[],pe={left:0,right:0,top:0,bottom:0},he=0,fe=0,me={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},_e=this;_e.setData=d,_e.setupGrid=A,_e.draw=P,_e.getPlaceholder=function(){return a},_e.getCanvas=function(){return ie.element},_e.getPlotOffset=function(){return pe},_e.width=function(){return he},_e.height=function(){return fe},_e.offset=function(){var t=oe.offset();return t.left+=pe.left,t.top+=pe.top,t},_e.getData=function(){return ne},_e.getAxes=function(){var e={};return t.each(de.concat(ue),function(t,a){a&&(e[a.direction+(1!=a.n?a.n:"")+"axis"]=a)}),e},_e.getXAxes=function(){return de},_e.getYAxes=function(){return ue},_e.c2p=f,_e.p2c=m,_e.getOptions=function(){return se},_e.highlight=Q,_e.unhighlight=Z,_e.triggerRedrawOverlay=W,_e.pointOffset=function(t){return{left:parseInt(de[p(t,"x")-1].p2c(+t.x)+pe.left,10),top:parseInt(ue[p(t,"y")-1].p2c(+t.y)+pe.top,10)}},_e.shutdown=w,_e.destroy=function(){w(),a.removeData("plot").empty(),ne=[],se=null,ie=null,re=null,oe=null,le=null,ce=null,de=[],ue=[],me=null,be=[],_e=null},_e.resize=function(){var t=a.width(),e=a.height();ie.resize(t,e),re.resize(t,e)},_e.hooks=me,l(_e),c(i),g(),d(s),A(),P(),y();var be=[],ve=null}function n(t,e){return e*Math.floor(t/e)}var s=Object.prototype.hasOwnProperty;t.fn.detach||(t.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})}),e.prototype.resize=function(t,e){if(0>=t||0>=e)throw new Error("Invalid dimensions for plot, width = "+t+", height = "+e);var a=this.element,n=this.context,s=this.pixelRatio;this.width!=t&&(a.width=t*s,a.style.width=t+"px",this.width=t),this.height!=e&&(a.height=e*s,a.style.height=e+"px",this.height=e),n.restore(),n.save(),n.scale(s,s)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var t=this._textCache;for(var e in t)if(s.call(t,e)){var a=this.getTextLayer(e),n=t[e];a.hide();for(var i in n)if(s.call(n,i)){var r=n[i];for(var o in r)if(s.call(r,o)){for(var l,c=r[o].positions,d=0;l=c[d];d++)l.active?l.rendered||(a.append(l.element),l.rendered=!0):(c.splice(d--,1),l.rendered&&l.element.detach());0==c.length&&delete r[o]}}a.show()}},e.prototype.getTextLayer=function(e){var a=this.text[e];return null==a&&(null==this.textContainer&&(this.textContainer=t("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),a=this.text[e]=t("<div></div>").addClass(e).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),a},e.prototype.getTextInfo=function(e,a,n,s,i){var r,o,l,c;if(a=""+a,r="object"==typeof n?n.style+" "+n.variant+" "+n.weight+" "+n.size+"px/"+n.lineHeight+"px "+n.family:n,o=this._textCache[e],null==o&&(o=this._textCache[e]={}),l=o[r],null==l&&(l=o[r]={}),c=l[a],null==c){var d=t("<div></div>").html(a).css({position:"absolute","max-width":i,top:-9999}).appendTo(this.getTextLayer(e));"object"==typeof n?d.css({font:r,color:n.color}):"string"==typeof n&&d.addClass(n),c=l[a]={width:d.outerWidth(!0),height:d.outerHeight(!0),element:d,positions:[]},d.detach()}return c},e.prototype.addText=function(t,e,a,n,s,i,r,o,l){var c=this.getTextInfo(t,n,s,i,r),d=c.positions;"center"==o?e-=c.width/2:"right"==o&&(e-=c.width),"middle"==l?a-=c.height/2:"bottom"==l&&(a-=c.height);for(var u,p=0;u=d[p];p++)if(u.x==e&&u.y==a)return void(u.active=!0);u={active:!0,rendered:!1,element:d.length?c.element.clone():c.element,x:e,y:a},d.push(u),u.element.css({top:Math.round(a),left:Math.round(e),"text-align":o})},e.prototype.removeText=function(t,e,a,n,i,r){if(null==n){var o=this._textCache[t];if(null!=o)for(var l in o)if(s.call(o,l)){var c=o[l];for(var d in c)if(s.call(c,d))for(var u,p=c[d].positions,h=0;u=p[h];h++)u.active=!1}}else for(var u,p=this.getTextInfo(t,n,i,r).positions,h=0;u=p[h];h++)u.x==e&&u.y==a&&(u.active=!1)},t.plot=function(e,n,s){var i=new a(t(e),n,s,t.plot.plugins);return i},t.plot.version="0.8.3",t.plot.plugins=[],t.fn.plot=function(e,a){return this.each(function(){t.plot(this,e,a)})}}(jQuery),define("flot",["jquery"],function(){}),function(t){function e(t){function e(t,e){for(var a=null,n=0;n<e.length&&t!=e[n];++n)e[n].stack==t.stack&&(a=e[n]);return a}function a(t,a,n){if(null!=a.stack&&a.stack!==!1){var s=e(a,t.getData());if(s){for(var i,r,o,l,c,d,u,p,h=n.pointsize,f=n.points,m=s.datapoints.pointsize,_=s.datapoints.points,b=[],v=a.lines.show,g=a.bars.horizontal,y=h>2&&(g?n.format[2].x:n.format[2].y),w=v&&a.lines.steps,T=!0,E=g?1:0,S=g?0:1,I=0,x=0;;){if(I>=f.length)break;if(u=b.length,null==f[I]){for(p=0;h>p;++p)b.push(f[I+p]);I+=h}else if(x>=_.length){if(!v)for(p=0;h>p;++p)b.push(f[I+p]);I+=h}else if(null==_[x]){for(p=0;h>p;++p)b.push(null);T=!0,x+=m}else{if(i=f[I+E],r=f[I+S],l=_[x+E],c=_[x+S],d=0,i==l){for(p=0;h>p;++p)b.push(f[I+p]);b[u+S]+=c,d=c,I+=h,x+=m}else if(i>l){if(v&&I>0&&null!=f[I-h]){for(o=r+(f[I-h+S]-r)*(l-i)/(f[I-h+E]-i),b.push(l),b.push(o+c),p=2;h>p;++p)b.push(f[I+p]);d=c}x+=m}else{if(T&&v){I+=h;continue}for(p=0;h>p;++p)b.push(f[I+p]);v&&x>0&&null!=_[x-m]&&(d=c+(_[x-m+S]-c)*(i-l)/(_[x-m+E]-l)),b[u+S]+=d,I+=h}T=!1,u!=b.length&&y&&(b[u+2]+=d)}if(w&&u!=b.length&&u>0&&null!=b[u]&&b[u]!=b[u-h]&&b[u+1]!=b[u-h+1]){for(p=0;h>p;++p)b[u+h+p]=b[u+p];b[u+1]=b[u-h+1]}}n.points=b}}}t.hooks.processDatapoints.push(a)}var a={series:{stack:null}};t.plot.plugins.push({init:e,options:a,name:"stack",version:"1.2"})}(jQuery),define("flot.stack",["flot"],function(){}),function(t,e,a){"$:nomunge";function n(a){o===!0&&(o=a||1);for(var l=i.length-1;l>=0;l--){var p=t(i[l]);if(p[0]==e||p.is(":visible")){var h=p.width(),f=p.height(),m=p.data(d);!m||h===m.w&&f===m.h||(p.trigger(c,[m.w=h,m.h=f]),o=a||!0)}else m=p.data(d),m.w=0,m.h=0}null!==s&&(o&&(null==a||1e3>a-o)?s=e.requestAnimationFrame(n):(s=setTimeout(n,r[u]),o=!1))}var s,i=[],r=t.resize=t.extend(t.resize,{}),o=!1,l="setTimeout",c="resize",d=c+"-special-event",u="pendingDelay",p="activeDelay",h="throttleWindow";r[u]=200,r[p]=20,r[h]=!0,t.event.special[c]={setup:function(){if(!r[h]&&this[l])return!1;var e=t(this);i.push(this),e.data(d,{w:e.width(),h:e.height()}),1===i.length&&(s=a,n())},teardown:function(){if(!r[h]&&this[l])return!1;for(var e=t(this),a=i.length-1;a>=0;a--)if(i[a]==this){i.splice(a,1);break}e.removeData(d),i.length||(o?cancelAnimationFrame(s):clearTimeout(s),s=null)},add:function(e){function n(e,n,i){var r=t(this),o=r.data(d)||{};o.w=n!==a?n:r.width(),o.h=i!==a?i:r.height(),s.apply(this,arguments)}if(!r[h]&&this[l])return!1;var s;return t.isFunction(e)?(s=e,n):(s=e.handler,void(e.handler=n))}},e.requestAnimationFrame||(e.requestAnimationFrame=function(){return e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){return e.setTimeout(function(){t((new Date).getTime())},r[p])}}()),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(){return e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.oCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||clearTimeout}())}(jQuery,this),function(t){function e(t){function e(){var e=t.getPlaceholder();0!=e.width()&&0!=e.height()&&(t.resize(),t.setupGrid(),t.draw())}function a(t){t.getPlaceholder().resize(e)}function n(t){t.getPlaceholder().unbind("resize",e)}t.hooks.bindEvents.push(a),t.hooks.shutdown.push(n)}var a={};t.plot.plugins.push({init:e,options:a,name:"resize",version:"1.0"})}(jQuery),define("flot.resize",["flot"],function(){}),!function(t){var e={tooltip:!1,tooltipOpts:{id:"flotTip",content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,monthNames:null,dayNames:null,shifts:{x:10,y:20},defaultTheme:!0,lines:{track:!1,threshold:.05},onHover:function(){},$compat:!1}},a=function(t){this.tipPosition={x:0,y:0},this.init(t)};a.prototype.init=function(e){function a(t){var a={};a.x=t.pageX,a.y=t.pageY,e.setTooltipPosition(a)}function n(a,n,i){var r=function(t,e,a,n){return Math.sqrt((a-t)*(a-t)+(n-e)*(n-e))},o=function(t,e,a,n,s,i,o){if(!o||(o=function(t,e,a,n,s,i){if("undefined"!=typeof a)return{x:a,y:e};if("undefined"!=typeof n)return{x:t,y:n};var r,o=-1/((i-n)/(s-a));return{x:r=(s*(t*o-e+n)+a*(t*-o+e-i))/(o*(s-a)+n-i),y:o*r-o*t+e}}(t,e,a,n,s,i),o.x>=Math.min(a,s)&&o.x<=Math.max(a,s)&&o.y>=Math.min(n,i)&&o.y<=Math.max(n,i))){var l=n-i,c=s-a,d=a*i-n*s;return Math.abs(l*t+c*e+d)/Math.sqrt(l*l+c*c)}var u=r(t,e,a,n),p=r(t,e,s,i);return u>p?p:u};if(i)e.showTooltip(i,n);else if(s.plotOptions.series.lines.show&&s.tooltipOptions.lines.track===!0){var l={distance:-1};t.each(e.getData(),function(t,a){for(var i=0,c=-1,d=1;d<a.data.length;d++)a.data[d-1][0]<=n.x&&a.data[d][0]>=n.x&&(i=d-1,c=d);if(-1===c)return void e.hideTooltip();var u={x:a.data[i][0],y:a.data[i][1]},p={x:a.data[c][0],y:a.data[c][1]},h=o(n.x,n.y,u.x,u.y,p.x,p.y,!1);if(h<s.tooltipOptions.lines.threshold){var f=r(u.x,u.y,n.x,n.y)<r(n.x,n.y,p.x,p.y)?i:c,m=(a.datapoints.pointsize,[n.x,u.y+(p.y-u.y)*((n.x-u.x)/(p.x-u.x))]),_={datapoint:m,dataIndex:f,series:a,seriesIndex:t};(-1===l.distance||h<l.distance)&&(l={distance:h,item:_})}}),-1!==l.distance?e.showTooltip(l.item,n):e.hideTooltip()}else e.hideTooltip()}var s=this,i=t.plot.plugins.length;if(this.plotPlugins=[],i)for(var r=0;i>r;r++)this.plotPlugins.push(t.plot.plugins[r].name);e.hooks.bindEvents.push(function(e,i){s.plotOptions=e.getOptions(),s.plotOptions.tooltip!==!1&&"undefined"!=typeof s.plotOptions.tooltip&&(s.tooltipOptions=s.plotOptions.tooltipOpts,s.tooltipOptions.$compat?(s.wfunc="width",s.hfunc="height"):(s.wfunc="innerWidth",s.hfunc="innerHeight"),s.getDomElement(),t(e.getPlaceholder()).bind("plothover",n),t(i).bind("mousemove",a))}),e.hooks.shutdown.push(function(e,s){t(e.getPlaceholder()).unbind("plothover",n),t(s).unbind("mousemove",a)}),e.setTooltipPosition=function(e){var a=s.getDomElement(),n=a.outerWidth()+s.tooltipOptions.shifts.x,i=a.outerHeight()+s.tooltipOptions.shifts.y;e.x-t(window).scrollLeft()>t(window)[s.wfunc]()-n&&(e.x-=n),e.y-t(window).scrollTop()>t(window)[s.hfunc]()-i&&(e.y-=i),s.tipPosition.x=e.x,s.tipPosition.y=e.y},e.showTooltip=function(t,a){var n=s.getDomElement(),i=s.stringFormat(s.tooltipOptions.content,t);n.html(i),e.setTooltipPosition({x:a.pageX,y:a.pageY}),n.css({left:s.tipPosition.x+s.tooltipOptions.shifts.x,top:s.tipPosition.y+s.tooltipOptions.shifts.y}).show(),"function"==typeof s.tooltipOptions.onHover&&s.tooltipOptions.onHover(t,n)},e.hideTooltip=function(){s.getDomElement().hide().html("")}},a.prototype.getDomElement=function(){var e=t("#"+this.tooltipOptions.id);return 0===e.length&&(e=t("<div />").attr("id",this.tooltipOptions.id),e.appendTo("body").hide().css({position:"absolute"}),this.tooltipOptions.defaultTheme&&e.css({background:"#fff","z-index":"1040",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111",display:"none","white-space":"nowrap"})),e},a.prototype.stringFormat=function(t,e){var a,n,s,i,r=/%p\.{0,1}(\d{0,})/,o=/%s/,l=/%lx/,c=/%ly/,d=/%x\.{0,1}(\d{0,})/,u=/%y\.{0,1}(\d{0,})/,p="%x",h="%y",f="%ct";if("undefined"!=typeof e.series.threshold?(a=e.datapoint[0],n=e.datapoint[1],s=e.datapoint[2]):"undefined"!=typeof e.series.lines&&e.series.lines.steps?(a=e.series.datapoints.points[2*e.dataIndex],n=e.series.datapoints.points[2*e.dataIndex+1],s=""):(a=e.series.data[e.dataIndex][0],n=e.series.data[e.dataIndex][1],s=e.series.data[e.dataIndex][2]),null===e.series.label&&e.series.originSeries&&(e.series.label=e.series.originSeries.label),"function"==typeof t&&(t=t(e.series.label,a,n,e)),"undefined"!=typeof e.series.percent?i=e.series.percent:"undefined"!=typeof e.series.percents&&(i=e.series.percents[e.dataIndex]),"number"==typeof i&&(t=this.adjustValPrecision(r,t,i)),t="undefined"!=typeof e.series.label?t.replace(o,e.series.label):t.replace(o,""),t=this.hasAxisLabel("xaxis",e)?t.replace(l,e.series.xaxis.options.axisLabel):t.replace(l,""),t=this.hasAxisLabel("yaxis",e)?t.replace(c,e.series.yaxis.options.axisLabel):t.replace(c,""),this.isTimeMode("xaxis",e)&&this.isXDateFormat(e)&&(t=t.replace(d,this.timestampToDate(a,this.tooltipOptions.xDateFormat,e.series.xaxis.options))),this.isTimeMode("yaxis",e)&&this.isYDateFormat(e)&&(t=t.replace(u,this.timestampToDate(n,this.tooltipOptions.yDateFormat,e.series.yaxis.options))),"number"==typeof a&&(t=this.adjustValPrecision(d,t,a)),"number"==typeof n&&(t=this.adjustValPrecision(u,t,n)),"undefined"!=typeof e.series.xaxis.ticks){var m;m=this.hasRotatedXAxisTicks(e)?"rotatedTicks":"ticks";var _=e.dataIndex+e.seriesIndex;if(e.series.xaxis[m].length>_&&!this.isTimeMode("xaxis",e)){var b=this.isCategoriesMode("xaxis",e)?e.series.xaxis[m][_].label:e.series.xaxis[m][_].v;b===a&&(t=t.replace(d,e.series.xaxis[m][_].label))}}if("undefined"!=typeof e.series.yaxis.ticks)for(var v in e.series.yaxis.ticks)if(e.series.yaxis.ticks.hasOwnProperty(v)){var g=this.isCategoriesMode("yaxis",e)?e.series.yaxis.ticks[v].label:e.series.yaxis.ticks[v].v;g===n&&(t=t.replace(u,e.series.yaxis.ticks[v].label))}return"undefined"!=typeof e.series.xaxis.tickFormatter&&(t=t.replace(p,e.series.xaxis.tickFormatter(a,e.series.xaxis).replace(/\$/g,"$$"))),"undefined"!=typeof e.series.yaxis.tickFormatter&&(t=t.replace(h,e.series.yaxis.tickFormatter(n,e.series.yaxis).replace(/\$/g,"$$"))),s&&(t=t.replace(f,s)),t},a.prototype.isTimeMode=function(t,e){return"undefined"!=typeof e.series[t].options.mode&&"time"===e.series[t].options.mode},a.prototype.isXDateFormat=function(){return"undefined"!=typeof this.tooltipOptions.xDateFormat&&null!==this.tooltipOptions.xDateFormat},a.prototype.isYDateFormat=function(){return"undefined"!=typeof this.tooltipOptions.yDateFormat&&null!==this.tooltipOptions.yDateFormat},a.prototype.isCategoriesMode=function(t,e){return"undefined"!=typeof e.series[t].options.mode&&"categories"===e.series[t].options.mode},a.prototype.timestampToDate=function(e,a,n){var s=t.plot.dateGenerator(e,n);return t.plot.formatDate(s,a,this.tooltipOptions.monthNames,this.tooltipOptions.dayNames)},a.prototype.adjustValPrecision=function(t,e,a){var n,s=e.match(t);return null!==s&&""!==RegExp.$1&&(n=RegExp.$1,a=a.toFixed(n),e=e.replace(t,a)),e},a.prototype.hasAxisLabel=function(e,a){return-1!==t.inArray(this.plotPlugins,"axisLabels")&&"undefined"!=typeof a.series[e].options.axisLabel&&a.series[e].options.axisLabel.length>0},a.prototype.hasRotatedXAxisTicks=function(e){return-1!==t.inArray(this.plotPlugins,"tickRotor")&&"undefined"!=typeof e.series.xaxis.rotatedTicks};var n=function(t){new a(t)};t.plot.plugins.push({init:n,options:e,name:"tooltip",version:"0.8.4"})}(jQuery),define("flot.tooltip",["flot"],function(){}),function(t){function e(t,e){return e*Math.floor(t/e)}function a(t,e,a,n){if("function"==typeof t.strftime)return t.strftime(e);var s=function(t,e){return t=""+t,e=""+(null==e?"0":e),1==t.length?e+t:t},i=[],r=!1,o=t.getHours(),l=12>o;null==a&&(a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]),null==n&&(n=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]);var c;c=o>12?o-12:0==o?12:o;for(var d=0;d<e.length;++d){var u=e.charAt(d);if(r){switch(u){case"a":u=""+n[t.getDay()];
break;case"b":u=""+a[t.getMonth()];break;case"d":u=s(t.getDate());break;case"e":u=s(t.getDate()," ");break;case"h":case"H":u=s(o);break;case"I":u=s(c);break;case"l":u=s(c," ");break;case"m":u=s(t.getMonth()+1);break;case"M":u=s(t.getMinutes());break;case"q":u=""+(Math.floor(t.getMonth()/3)+1);break;case"S":u=s(t.getSeconds());break;case"y":u=s(t.getFullYear()%100);break;case"Y":u=""+t.getFullYear();break;case"p":u=l?"am":"pm";break;case"P":u=l?"AM":"PM";break;case"w":u=""+t.getDay()}i.push(u),r=!1}else"%"==u?r=!0:i.push(u)}return i.join("")}function n(t){function e(t,e,a,n){t[e]=function(){return a[n].apply(a,arguments)}}var a={date:t};void 0!=t.strftime&&e(a,"strftime",t,"strftime"),e(a,"getTime",t,"getTime"),e(a,"setTime",t,"setTime");for(var n=["Date","Day","FullYear","Hours","Milliseconds","Minutes","Month","Seconds"],s=0;s<n.length;s++)e(a,"get"+n[s],t,"getUTC"+n[s]),e(a,"set"+n[s],t,"setUTC"+n[s]);return a}function s(t,e){if("browser"==e.timezone)return new Date(t);if(e.timezone&&"utc"!=e.timezone){if("undefined"!=typeof timezoneJS&&"undefined"!=typeof timezoneJS.Date){var a=new timezoneJS.Date;return a.setTimezone(e.timezone),a.setTime(t),a}return n(new Date(t))}return n(new Date(t))}function i(n){n.hooks.processOptions.push(function(n){t.each(n.getAxes(),function(t,n){var i=n.options;"time"==i.mode&&(n.tickGenerator=function(t){var a=[],n=s(t.min,i),r=0,l=i.tickSize&&"quarter"===i.tickSize[1]||i.minTickSize&&"quarter"===i.minTickSize[1]?d:c;null!=i.minTickSize&&(r="number"==typeof i.tickSize?i.tickSize:i.minTickSize[0]*o[i.minTickSize[1]]);for(var u=0;u<l.length-1&&!(t.delta<(l[u][0]*o[l[u][1]]+l[u+1][0]*o[l[u+1][1]])/2&&l[u][0]*o[l[u][1]]>=r);++u);var p=l[u][0],h=l[u][1];if("year"==h){if(null!=i.minTickSize&&"year"==i.minTickSize[1])p=Math.floor(i.minTickSize[0]);else{var f=Math.pow(10,Math.floor(Math.log(t.delta/o.year)/Math.LN10)),m=t.delta/o.year/f;p=1.5>m?1:3>m?2:7.5>m?5:10,p*=f}1>p&&(p=1)}t.tickSize=i.tickSize||[p,h];var _=t.tickSize[0];h=t.tickSize[1];var b=_*o[h];"second"==h?n.setSeconds(e(n.getSeconds(),_)):"minute"==h?n.setMinutes(e(n.getMinutes(),_)):"hour"==h?n.setHours(e(n.getHours(),_)):"month"==h?n.setMonth(e(n.getMonth(),_)):"quarter"==h?n.setMonth(3*e(n.getMonth()/3,_)):"year"==h&&n.setFullYear(e(n.getFullYear(),_)),n.setMilliseconds(0),b>=o.minute&&n.setSeconds(0),b>=o.hour&&n.setMinutes(0),b>=o.day&&n.setHours(0),b>=4*o.day&&n.setDate(1),b>=2*o.month&&n.setMonth(e(n.getMonth(),3)),b>=2*o.quarter&&n.setMonth(e(n.getMonth(),6)),b>=o.year&&n.setMonth(0);var v,g=0,y=Number.NaN;do if(v=y,y=n.getTime(),a.push(y),"month"==h||"quarter"==h)if(1>_){n.setDate(1);var w=n.getTime();n.setMonth(n.getMonth()+("quarter"==h?3:1));var T=n.getTime();n.setTime(y+g*o.hour+(T-w)*_),g=n.getHours(),n.setHours(0)}else n.setMonth(n.getMonth()+_*("quarter"==h?3:1));else"year"==h?n.setFullYear(n.getFullYear()+_):n.setTime(y+b);while(y<t.max&&y!=v);return a},n.tickFormatter=function(t,e){var n=s(t,e.options);if(null!=i.timeformat)return a(n,i.timeformat,i.monthNames,i.dayNames);var r,l=e.options.tickSize&&"quarter"==e.options.tickSize[1]||e.options.minTickSize&&"quarter"==e.options.minTickSize[1],c=e.tickSize[0]*o[e.tickSize[1]],d=e.max-e.min,u=i.twelveHourClock?" %p":"",p=i.twelveHourClock?"%I":"%H";r=c<o.minute?p+":%M:%S"+u:c<o.day?d<2*o.day?p+":%M"+u:"%b %d "+p+":%M"+u:c<o.month?"%b %d":l&&c<o.quarter||!l&&c<o.year?d<o.year?"%b":"%b %Y":l&&c<o.year?d<o.year?"Q%q":"Q%q %Y":"%Y";var h=a(n,r,i.monthNames,i.dayNames);return h})})})}var r={xaxis:{timezone:null,timeformat:null,twelveHourClock:!1,monthNames:null}},o={second:1e3,minute:6e4,hour:36e5,day:864e5,month:2592e6,quarter:7776e6,year:525949.2*60*1e3},l=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[.25,"month"],[.5,"month"],[1,"month"],[2,"month"]],c=l.concat([[3,"month"],[6,"month"],[1,"year"]]),d=l.concat([[1,"quarter"],[2,"quarter"],[1,"year"]]);t.plot.plugins.push({init:i,options:r,name:"time",version:"1.0"}),t.plot.formatDate=a,t.plot.dateGenerator=s}(jQuery),define("flot.time",["flot"],function(){}),define("utils/accounting",["require","hbs!./accounting/html","utils/locale","opennebula/vm","utils/notifier","utils/resource-select","flot","flot.stack","flot.resize","flot.tooltip","flot.time"],function(t){function e(){var t=i({});return t}function a(t,e){function a(t){var e=$.map(t.split(/[^0-9]/),function(t){return parseInt(t,10)});return Date.UTC(e[0],e[1]-1||0,e[2]||1,e[3]||0,e[4]||0,e[5]||0,e[6]||0)}void 0==e&&(e={});var s=3;void 0==e.fixed_user&&void 0==e.fixed_group&&(s+=1),void 0==e.fixed_group_by&&(s+=1),s>4&&(s=4);var i=parseInt(12/s);$("#acct_start_time_container",t).addClass("large-"+i),$("#acct_end_time_container",t).addClass("large-"+i),$("#acct_group_by_container",t).addClass("large-"+i),$("#acct_owner_container",t).addClass("large-"+i),$("#acct_button_container",t).addClass("large-"+i);var d=new Date;d.setDate(1),d.setMonth(d.getMonth()-1),$("#acct_start_time",t).val(d.getFullYear()+"-"+("0"+(d.getMonth()+1)).slice(-2)+"-"+("0"+d.getDate()).slice(-2)),d=new Date,$("#acct_end_time",t).val(d.getFullYear()+"-"+("0"+(d.getMonth()+1)).slice(-2)+"-"+("0"+d.getDate()).slice(-2)),void 0!=e.fixed_user||void 0!=e.fixed_group?$("#acct_owner_container",t).hide():$("select#acct_owner",t).change(function(){var e=$(this).val();switch(e){case"acct_owner_all":$("#acct_owner_select",t).hide();break;case"acct_owner_group":$("#acct_owner_select",t).show(),c.insert("#acct_owner_select",t,"Group");break;case"acct_owner_user":$("#acct_owner_select",t).show(),c.insert("#acct_owner_select",t,"User",-1,!1,'<option value="-1">'+r.tr("<< me >>")+"</option>")}}),void 0!=e.init_group_by?$("#acct_group_by",t).val(e.init_group_by):void 0!=e.fixed_group_by&&($("#acct_group_by",t).val(e.fixed_group_by),$("#acct_group_by_container",t).hide()),$("#acct_submit",t).on("click",function(){var s=-1,i=-1,c=$("#acct_start_time",t).val();if(""==c)return l.notifyError(r.tr("Time range start is mandatory")),!1;if(s=a(c),isNaN(s))return l.notifyError(r.tr("Time range start is not a valid date. It must be YYYY/MM/DD")),!1;s/=1e3;var c=$("#acct_end_time",t).val();if(""!=c){if(i=new Date(c+" UTC"),isNaN(i))return l.notifyError(r.tr("Time range end is not a valid date. It must be YYYY/MM/DD")),!1;i.setDate(i.getDate()+1),i=i.getTime()/1e3}var d={start_time:s,end_time:i};if(void 0!=e.fixed_user)d.userfilter=e.fixed_user;else if(void 0!=e.fixed_group)d.group=e.fixed_group;else{var u=$("#acct_owner_select .resource_list_select",t).val();switch($("select#acct_owner",t).val()){case"acct_owner_all":break;case"acct_owner_group":""!=u&&(d.group=u);break;case"acct_owner_user":""!=u&&(d.userfilter=u)}}return o.accounting({success:function(e,a){n(t,e,a,!1)},error:l.onError,data:d}),!1})}function n(t,e,a,n){var i=e.request.data[0],o=new Date(1e3*i.start_time);o.setUTCHours(0,0,0,0);var l,c=new Date;void 0!=i.end_time&&-1!=i.end_time?(l=new Date(1e3*i.end_time),l>c&&(l=c)):l=c;for(var d=[],u=o;l>u;)d.push(u.getTime()),u.setUTCDate(u.getUTCDate()+1);u>c&&(u=c),d.push(u.getTime());var p,h,f,i={colors:["#0098C3","#0A00C2","#AB00C2","#C20037","#C26B00","#78C200","#00C22A","#00B8C2"],xaxis:{mode:"time",timeformat:"%y/%m/%d",color:"#efefef",font:{color:"#999",size:10},ticks:4,minTickSize:[1,"day"]},yaxis:{min:0,color:"#efefef",font:{color:"#999",size:10}},series:{bars:{show:!0,lineWidth:0,fill:!0,barWidth:6912e4,align:"center"},stack:!0},legend:{show:!1},grid:{borderWidth:1,borderColor:"#efefef",hoverable:!0},tooltip:!0,tooltipOpts:{content:"%x | %s | %y"}};switch($("#acct_group_by",t).val()){case"user":p=function(t){return t.VM.UID},h=function(t){return t.VM.UNAME},f=r.tr("User");break;case"group":p=function(t){return t.VM.GID},h=function(t){return t.VM.GNAME},f=r.tr("Group");break;case"vm":p=function(t){return t.OID},h=function(t){return t.VM.NAME},f=r.tr("VM")}var m={};if($("#acct_no_data",t).hide(),void 0==a.HISTORY_RECORDS)return $("#acct_placeholder",t).show(),$("#acct_content",t).hide(),$("#acct_no_data",t).show(),!1;$.each(a.HISTORY_RECORDS.HISTORY,function(t,e){var a=p(e);if(void 0==m[a]){m[a]={},m[a].data_points={},m[a].data_points[d[0]]={},m[a].data_points[d[d.length-2]]={},m[a].data_points[d[0]].CPU_HOURS=0,m[a].data_points[d[d.length-2]].CPU_HOURS=0,m[a].data_points[d[0]].MEM_HOURS=0,m[a].data_points[d[d.length-2]].MEM_HOURS=0;var n=h(e);m[a].name=n,m[a].label=f+" "+a+" "+n}for(var s=m[a].data_points,i=0;i<d.length-1;i++){var r=d[i],o=d[i+1];if(void 0==s[r]&&(s[r]={},s[r].CPU_HOURS=0,s[r].MEM_HOURS=0),(1e3*e.ETIME>r||0==e.ETIME)&&0!=e.STIME&&1e3*e.STIME<=o){var l=r;0!=e.STIME&&(l=Math.max(r,1e3*e.STIME));var c=o;0!=e.ETIME&&(c=Math.min(o,1e3*e.ETIME));var u=(c-l)/1e3/60/60,_=parseFloat(e.VM.TEMPLATE.CPU)*u;isNaN(_)||(s[r].CPU_HOURS+=_);var _=parseInt(e.VM.TEMPLATE.MEMORY)/1024*u;isNaN(_)||(s[r].MEM_HOURS+=_)}}});var _=[],b=[];$.each(m,function(t,e){var a=[],n=[];$.each(e.data_points,function(t,e){a.push([parseInt(t),e.CPU_HOURS]),n.push([parseInt(t),e.MEM_HOURS])}),_.push({label:e.label,name:e.name,id:t,data:a}),b.push({label:e.label,name:e.name,id:t,data:n})});var v=$.plot($("#acct_cpu_graph",t),_,i),g=$.plot($("#acct_mem_graph",t),b,i);if(n)$(".acct_table",t).hide();else{$("#acct_cpu_datatable",t).dataTable().fnClearTable(),$("#acct_cpu_datatable",t).dataTable().fnDestroy(),$("#acct_cpu_datatable thead",t).remove(),$("#acct_cpu_datatable",t).width("100%"),$("#acct_mem_datatable",t).dataTable().fnClearTable(),$("#acct_mem_datatable",t).dataTable().fnDestroy(),$("#acct_mem_datatable thead",t).remove(),$("#acct_mem_datatable",t).width("100%"),cpu_plot_data=v.getData(),mem_plot_data=g.getData();var y="<thead>          <tr>            <th>"+r.tr("Date UTC")+"</th>            <th>"+r.tr("Total")+"</th>";$.each(cpu_plot_data,function(t,e){y+='<th style="border-bottom: '+e.color+' 4px solid !important; border-left: 10px solid white; border-right: 5px solid white; white-space: nowrap">'+f+" "+e.id+"<br/>"+e.name+"</th>"}),y+="</tr></thead>",$("#acct_cpu_datatable",t).append(y),y="<thead>          <tr>            <th>"+r.tr("Date UTC")+"</th>            <th>"+r.tr("Total")+"</th>",$.each(mem_plot_data,function(t,e){y+='<th style="border-bottom: '+e.color+' 4px solid !important; border-left: 10px solid white; border-right: 5px solid white; white-space: nowrap">'+f+" "+e.id+"<br/>"+e.name+"</th>"}),y+="</tr></thead>",$("#acct_mem_datatable",t).append(y);for(var w=[],T=[],E=0;E<d.length-1;E++){var S=d[E],I=[],x=[],A=s(S);I.push(A),x.push(A),I.push(0),x.push(0);var M=0,k=0;$.each(m,function(t,e){var a=e.data_points[S];if(void 0!=a){var n=(100*a.CPU_HOURS).toFixed()/100,s=(100*a.MEM_HOURS).toFixed()/100;M+=n,k+=s,I.push(n),x.push(s)}else I.push(0),x.push(0)}),I[1]=(100*M).toFixed()/100,x[1]=(100*k).toFixed()/100,w.push(I),T.push(x)}var D=$("#acct_cpu_datatable",t).dataTable({bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:["_all"]}]}),C=$("#acct_mem_datatable",t).dataTable({bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:["_all"]}]});w.length>0&&D.fnAddData(w),T.length>0&&C.fnAddData(T)}$("#acct_placeholder",t).hide(),$("#acct_content",t).show()}function s(t){var e=new Date(t);return e.getUTCFullYear()+"/"+(e.getUTCMonth()+1)+"/"+e.getUTCDate()}var i=t("hbs!./accounting/html"),r=t("utils/locale"),o=t("opennebula/vm"),l=t("utils/notifier"),c=t("utils/resource-select");return t("flot"),t("flot.stack"),t("flot.resize"),t("flot.tooltip"),t("flot.time"),{html:e,setup:a,fillAccounting:n}}),define("hbs!utils/showback/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<div class="row">\n  <div id="showback_user_container" class="left medium-4 columns">\n    <label for="showback_user_select">'+i((e.tr||t&&t.tr||s).call(t,"Filter by user",{name:"tr",hash:{},data:n}))+'</label>\n    <div id="showback_user_select"/>\n  </div>\n  <div id="showback_group_container" class="left medium-4 columns">\n    <label for="showback_group_select">'+i((e.tr||t&&t.tr||s).call(t,"Filter by group",{name:"tr",hash:{},data:n}))+'</label>\n    <div id="showback_group_select"/>\n  </div>\n  <div id="showback_button_container" class="right medium-3 columns">\n    <button class="button radius success right large-12" id="showback_submit" type="button">\n      '+i((e.tr||t&&t.tr||s).call(t,"Get Showback",{name:"tr",hash:{},data:n}))+'\n    </button>\n  </div>\n</div>\n<div id="showback_placeholder">\n  <div class="row">\n    <div class="large-8 large-centered columns">\n      <div class="text-center">\n        <span class="fa-stack fa-5x" style="color: #dfdfdf">\n          <i class="fa fa-cloud fa-stack-2x"></i>\n          <i class="fa fa-money fa-stack-1x fa-inverse"></i>\n        </span>\n        <div id="showback_no_data" class="hidden">\n          <br>\n          <p style="font-size: 18px; color: #999">\n            '+i((e.tr||t&&t.tr||s).call(t,"There are no showback records",{name:"tr",hash:{},data:n}))+'\n          </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div id="showback_content" class="hidden">\n    <div class="row showback_table">\n      <div class="large-12 columns graph_legend">\n        <h3 class="subheader">'+i((e.tr||t&&t.tr||s).call(t,"Showback",{name:"tr",hash:{},data:n}))+'</h3>\n      </div>\n      <div class="large-6 columns" style="overflow:auto">\n        <table id="showback_datatable" class="datatable twelve">\n          <thead>\n            <tr>\n              <th>dateint</th>\n              <th>'+i((e.tr||t&&t.tr||s).call(t,"Year",{name:"tr",hash:{},data:n}))+"</th>\n              <th>"+i((e.tr||t&&t.tr||s).call(t,"Month",{name:"tr",hash:{},data:n}))+"</th>\n              <th>"+i((e.tr||t&&t.tr||s).call(t,"Date",{name:"tr",hash:{},data:n}))+"</th>\n              <th>"+i((e.tr||t&&t.tr||s).call(t,"Cost",{name:"tr",hash:{},data:n}))+'</th>\n            </tr>\n          </thead>\n          <tbody id="tbody_showback_datatable">\n          </tbody>\n        </table>\n        <span class="label secondary radius showback_select_a_row">\n          '+i((e.tr||t&&t.tr||s).call(t,"Select a row to get detailed information of the month",{name:"tr",hash:{},data:n}))+'\n        </span>\n      </div>\n      <div class="large-6 columns">\n        <div class="large-12 columns centered graph" id="showback_graph" style="height: 200px;">\n        </div>\n      </div>\n    </div>\n    <div class="row showback_vms_table hidden">\n      <div class="large-12 columns graph_legend">\n        <h3 class="subheader" id="showback_vms_title">'+i((e.tr||t&&t.tr||s).call(t,"VMs",{name:"tr",hash:{},data:n}))+'</h3>\n      </div>\n      <div class="large-12 columns" style="overflow:auto">\n        <table id="showback_vms_datatable" class="datatable twelve">\n          <thead>\n            <tr>\n              <th>'+i((e.tr||t&&t.tr||s).call(t,"ID",{name:"tr",hash:{},data:n}))+"</th>\n              <th>"+i((e.tr||t&&t.tr||s).call(t,"Name",{name:"tr",hash:{},data:n}))+"</th>\n              <th>"+i((e.tr||t&&t.tr||s).call(t,"Owner",{name:"tr",hash:{},data:n}))+"</th>\n              <th>"+i((e.tr||t&&t.tr||s).call(t,"Hours",{name:"tr",hash:{},data:n}))+"</th>\n              <th>"+i((e.tr||t&&t.tr||s).call(t,"Cost",{name:"tr",hash:{},data:n}))+'</th>\n            </tr>\n          </thead>\n          <tbody id="tbody_showback_datatable">\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>'},useData:!0});return e.registerPartial("utils/showback/html",a),a}),define("utils/showback",["require","hbs!./showback/html","utils/locale","opennebula/vm","utils/notifier","utils/resource-select","flot","flot.stack","flot.resize","flot.tooltip","flot.time"],function(t){function e(){var t=s({});return t}function a(t,e){void 0==e&&(e={}),void 0!=e.fixed_user?$("#showback_user_container",t).hide():l.insert("#showback_user_select",t,"User",-1,!1,'<option value="-1">'+i.tr("<< me >>")+"</option>"),void 0!=e.fixed_group?$("#showback_group_container",t).hide():l.insert("#showback_group_select",t,"Group","",!0),showback_dataTable=$("#showback_datatable",t).dataTable({bSortClasses:!1,bDeferRender:!0,iDisplayLength:6,sDom:"t<'row collapse'<'small-12 columns'p>>",aoColumnDefs:[{bVisible:!1,aTargets:[0,1,2]}]}),showback_dataTable.fnSort([[0,"desc"]]),showback_vms_dataTable=$("#showback_vms_datatable",t).dataTable({bSortClasses:!1,bDeferRender:!0}),showback_dataTable.on("click","tbody tr",function(){var e=showback_dataTable.fnGetData(this),a=e[1],n=e[2];showback_vms_dataTable.fnClearTable(),showback_vms_dataTable.fnAddData(showback_dataTable.data("vms_per_date")[a][n].VMS),$("#showback_vms_title",t).text(i.months[n-1]+" "+a+" "+i.tr("VMs")),$(".showback_vms_table",t).show(),$(".showback_select_a_row",t).hide()}),$("#showback_submit",t).on("click",function(){var a,s,i={};return a=void 0!=e.fixed_user?e.fixed_user:$("#showback_user_select .resource_list_select",t).val(),s=void 0!=e.fixed_group?e.fixed_group:$("#showback_group_select .resource_list_select",t).val(),""!=a&&(i.userfilter=a),""!=s&&(i.group=s),r.showback({success:function(e,a){n(t,e,a)},error:o.onError,data:i}),!1})}function n(t,e,a){if($("#showback_no_data",t).hide(),void 0==a.SHOWBACK_RECORDS)return $("#showback_placeholder",t).show(),$("#showback_content",t).hide(),$("#showback_no_data",t).show(),!1;var n={};$.each(a.SHOWBACK_RECORDS.SHOWBACK,function(t,e){void 0==n[e.YEAR]&&(n[e.YEAR]={}),void 0==n[e.YEAR][e.MONTH]&&(n[e.YEAR][e.MONTH]={VMS:[],TOTAL:0}),n[e.YEAR][e.MONTH].VMS.push([e.VMID,e.VMNAME,e.UNAME,e.HOURS,e.TOTAL_COST]),n[e.YEAR][e.MONTH].TOTAL+=parseFloat(e.TOTAL_COST)});var s=[],r=[];$.each(n,function(t,e){$.each(e,function(e,a){s.push([new Date(t,e-1).getTime(),t,e,i.months[e-1]+" "+t,a.TOTAL.toFixed(2)]),r.push([new Date(t,e-1),a.TOTAL.toFixed(2)])})}),showback_dataTable.fnClearTable(),s.length>0&&(showback_dataTable.data("vms_per_date",n),showback_dataTable.fnAddData(s));var o=[];o.push({label:i.tr("Showback"),data:r});{var l={colors:["#2ba6cb","#707D85","#AC5A62"],legend:{show:!1},xaxis:{mode:"time",color:"#efefef",size:8,minTickSize:[1,"month"]},yaxis:{show:!1},series:{bars:{show:!0,lineWidth:0,barWidth:1728e6,fill:!0,align:"left"}},grid:{borderWidth:1,borderColor:"#efefef",hoverable:!0}};$.plot($("#showback_graph",t),o,l)}$("#showback_placeholder",t).hide(),$("#showback_content",t).show()}var s=t("hbs!./showback/html"),i=t("utils/locale"),r=t("opennebula/vm"),o=t("utils/notifier"),l=t("utils/resource-select");return t("flot"),t("flot.stack"),t("flot.resize"),t("flot.tooltip"),t("flot.time"),{html:e,setup:a}}),define("utils/graphs",["require","flot","flot.stack","flot.resize","flot.time","utils/humanize"],function(t){function e(t,e){series=[];var s=e.monitor_resources.split(",");e.labels&&(labels=e.labels.split(","));for(var i=0;i<s.length;i++){var r=s[i],o=t.monitoring[r];o&&(1==e.derivative&&a(o),series.push({stack:r,label:labels?labels[i]:r[i].split("/").pop(),data:o}))}var l=e.humanize_figures?n.size:function(t){return t},c={colors:["#2ba6cb","#707D85","#AC5A62"],legend:{show:void 0!=e.div_legend,noColumns:s.length,container:e.div_legend},xaxis:{tickFormatter:function(t){return n.prettyTimeAxis(t,e.show_date)},color:"#efefef",font:{color:"#999",size:10}},yaxis:{tickFormatter:function(t){return l(t,e.convert_from_bytes,e.y_sufix)},min:0,color:"#efefef",font:{color:"#999",size:10}},series:{lines:{lineWidth:1}},grid:{borderWidth:1,borderColor:"#efefef"}};series.length>0&&$.plot(e.div_graph,series,c)}function a(t){for(var e=0;e<t.length-1;e++){var a=t[e],n=t[e+1],s=(n[1]-a[1])/(n[0]-a[0]);t[e]=[a[0],s]}t.pop()}t("flot"),t("flot.stack"),t("flot.resize"),t("flot.time");var n=t("utils/humanize");return{plot:e}}),function(t,e){"use strict";Foundation.libs.slider={name:"slider",version:"5.5.1",settings:{start:0,end:100,step:1,precision:null,initial:null,display_selector:"",vertical:!1,trigger_input_change:!1,on_change:function(){}},cache:{},init:function(t,e,a){Foundation.inherit(this,"throttle"),this.bindings(e,a),this.reflow()},events:function(){var a=this;t(this.scope).off(".slider").on("mousedown.fndtn.slider touchstart.fndtn.slider pointerdown.fndtn.slider","["+a.attr_name()+"]:not(.disabled, [disabled]) .range-slider-handle",function(e){a.cache.active||(e.preventDefault(),a.set_active_slider(t(e.target)))}).on("mousemove.fndtn.slider touchmove.fndtn.slider pointermove.fndtn.slider",function(n){if(a.cache.active)if(n.preventDefault(),t.data(a.cache.active[0],"settings").vertical){var s=0;n.pageY||(s=e.scrollY),a.calculate_position(a.cache.active,a.get_cursor_position(n,"y")+s)}else a.calculate_position(a.cache.active,a.get_cursor_position(n,"x"))}).on("mouseup.fndtn.slider touchend.fndtn.slider pointerup.fndtn.slider",function(){a.remove_active_slider()}).on("change.fndtn.slider",function(){a.settings.on_change()}),a.S(e).on("resize.fndtn.slider",a.throttle(function(){a.reflow()},300))},get_cursor_position:function(t,e){var a,n="page"+e.toUpperCase(),s="client"+e.toUpperCase();return"undefined"!=typeof t[n]?a=t[n]:"undefined"!=typeof t.originalEvent[s]?a=t.originalEvent[s]:t.originalEvent.touches&&t.originalEvent.touches[0]&&"undefined"!=typeof t.originalEvent.touches[0][s]?a=t.originalEvent.touches[0][s]:t.currentPoint&&"undefined"!=typeof t.currentPoint[e]&&(a=t.currentPoint[e]),a},set_active_slider:function(t){this.cache.active=t},remove_active_slider:function(){this.cache.active=null},calculate_position:function(e,a){var n=this,s=t.data(e[0],"settings"),i=(t.data(e[0],"handle_l"),t.data(e[0],"handle_o"),t.data(e[0],"bar_l")),r=t.data(e[0],"bar_o");requestAnimationFrame(function(){var t;t=Foundation.rtl&&!s.vertical?n.limit_to((r+i-a)/i,0,1):n.limit_to((a-r)/i,0,1),t=s.vertical?1-t:t;var o=n.normalized_value(t,s.start,s.end,s.step,s.precision);n.set_ui(e,o)})},set_ui:function(e,a){var n=t.data(e[0],"settings"),s=t.data(e[0],"handle_l"),i=t.data(e[0],"bar_l"),r=this.normalized_percentage(a,n.start,n.end),o=r*(i-s)-1,l=100*r,c=e.parent(),d=e.parent().children("input[type=hidden]");Foundation.rtl&&!n.vertical&&(o=-o),o=n.vertical?-o+i-s+1:o,this.set_translate(e,o,n.vertical),n.vertical?e.siblings(".range-slider-active-segment").css("height",l+"%"):e.siblings(".range-slider-active-segment").css("width",l+"%"),c.attr(this.attr_name(),a).trigger("change").trigger("change.fndtn.slider"),d.val(a),n.trigger_input_change&&d.trigger("change"),e[0].hasAttribute("aria-valuemin")||e.attr({"aria-valuemin":n.start,"aria-valuemax":n.end}),e.attr("aria-valuenow",a),""!=n.display_selector&&t(n.display_selector).each(function(){this.hasOwnProperty("value")?t(this).val(a):t(this).text(a)})},normalized_percentage:function(t,e,a){return Math.min(1,(t-e)/(a-e))},normalized_value:function(t,e,a,n,s){var i=a-e,r=t*i,o=(r-r%n)/n,l=r%n,c=l>=.5*n?n:0;return(o*n+c+e).toFixed(s)},set_translate:function(e,a,n){n?t(e).css("-webkit-transform","translateY("+a+"px)").css("-moz-transform","translateY("+a+"px)").css("-ms-transform","translateY("+a+"px)").css("-o-transform","translateY("+a+"px)").css("transform","translateY("+a+"px)"):t(e).css("-webkit-transform","translateX("+a+"px)").css("-moz-transform","translateX("+a+"px)").css("-ms-transform","translateX("+a+"px)").css("-o-transform","translateX("+a+"px)").css("transform","translateX("+a+"px)")},limit_to:function(t,e,a){return Math.min(Math.max(t,e),a)},initialize_settings:function(e){var a,n=t.extend({},this.settings,this.data_options(t(e).parent()));null===n.precision&&(a=(""+n.step).match(/\.([\d]*)/),n.precision=a&&a[1]?a[1].length:0),n.vertical?(t.data(e,"bar_o",t(e).parent().offset().top),t.data(e,"bar_l",t(e).parent().outerHeight()),t.data(e,"handle_o",t(e).offset().top),t.data(e,"handle_l",t(e).outerHeight())):(t.data(e,"bar_o",t(e).parent().offset().left),t.data(e,"bar_l",t(e).parent().outerWidth()),t.data(e,"handle_o",t(e).offset().left),t.data(e,"handle_l",t(e).outerWidth())),t.data(e,"bar",t(e).parent()),t.data(e,"settings",n)},set_initial_position:function(e){var a=t.data(e.children(".range-slider-handle")[0],"settings"),n="number"!=typeof a.initial||isNaN(a.initial)?Math.floor(.5*(a.end-a.start)/a.step)*a.step+a.start:a.initial,s=e.children(".range-slider-handle");this.set_ui(s,n)},set_value:function(e){var a=this;t("["+a.attr_name()+"]",this.scope).each(function(){t(this).attr(a.attr_name(),e)}),t(this.scope).attr(a.attr_name())&&t(this.scope).attr(a.attr_name(),e),a.reflow()},reflow:function(){var e=this;e.S("["+this.attr_name()+"]").each(function(){var a=t(this).children(".range-slider-handle")[0],n=t(this).attr(e.attr_name());e.initialize_settings(a),n?e.set_ui(t(a),parseFloat(n)):e.set_initial_position(t(this))})}}}(jQuery,window,window.document),define("foundation.slider",["foundation.core"],function(){}),define("tabs/provision-tab/users/quota-widget",["require","foundation.slider","utils/quotas/quota-limits"],function(t){function e(t){t.foundation("reflow","slider"),$("select.provision_quota_select",t).on("change",function(){var t=$(this).closest(".row");switch($(this).val()){case"edit":$("div.provision_quota_edit",t).show(),$("div.provision_quota_default",t).hide(),$("div.provision_quota_unlimited",t).hide(),$("input",t).change();break;case"default":$("div.provision_quota_edit",t).hide(),$("div.provision_quota_default",t).show(),$("div.provision_quota_unlimited",t).hide();break;case"unlimited":$("div.provision_quota_edit",t).hide(),$("div.provision_quota_default",t).hide(),$("div.provision_quota_unlimited",t).show()}return!1});var e=$(".provision_rvms_quota_input",t);$(".provision_rvms_quota_slider",t).on("change",function(){e.val($(this).attr("data-slider"))}),e.change(function(){$(".provision_rvms_quota_slider",t).foundation("slider","set_value",this.value)});var a=$(".provision_cpu_quota_input",t);$(".provision_cpu_quota_slider",t).on("change",function(){a.val($(this).attr("data-slider"))}),a.change(function(){$(".provision_cpu_quota_slider",t).foundation("slider","set_value",this.value)});var n=$(".provision_memory_quota_input",t),s=$(".provision_memory_quota_tmp_input",t),i=function(){var t=s.val();n.val(t>0?Math.floor(1024*t):t)};$(".provision_memory_quota_slider",t).on("change",function(){s.val($(this).attr("data-slider")),i()}),s.change(function(){i(),$(".provision_memory_quota_slider",t).foundation("slider","set_value",this.value)}),$(".provision_rvms_quota_input",t).val("").change(),$(".provision_memory_quota_input",t).val("").change(),$(".provision_memory_quota_tmp_input",t).val("").change(),$(".provision_cpu_quota_input",t).val("").change()}function a(t){$("select.provision_quota_select",t).val("edit").change(),$(".provision_rvms_quota_input",t).val("").change(),$(".provision_memory_quota_input",t).val("").change(),$(".provision_memory_quota_tmp_input",t).val("").change(),$(".provision_cpu_quota_input",t).val("").change()}function n(t){var e=function(t,e){switch(t.val()){case"edit":return e.val();case"default":return s.QUOTA_LIMIT_DEFAULT;case"unlimited":return s.QUOTA_LIMIT_UNLIMITED}},a=e($(".provision_rvms_quota select.provision_quota_select",t),$(".provision_rvms_quota_input",t)),n=e($(".provision_cpu_quota select.provision_quota_select",t),$(".provision_cpu_quota_input",t)),i=e($(".provision_memory_quota select.provision_quota_select",t),$(".provision_memory_quota_input",t));return{VM:{VOLATILE_SIZE:s.QUOTA_LIMIT_DEFAULT,VMS:a,MEMORY:i,CPU:n}}}t("foundation.slider");var s=t("utils/quotas/quota-limits");return{setup:e,reset:a,retrieve:n}}),function(t){"use strict";Foundation.libs.alert={name:"alert",version:"5.5.1",settings:{callback:function(){}},init:function(t,e,a){this.bindings(e,a)},events:function(){var e=this,a=this.S;t(this.scope).off(".alert").on("click.fndtn.alert","["+this.attr_name()+"] .close",function(t){var n=a(this).closest("["+e.attr_name()+"]"),s=n.data(e.attr_name(!0)+"-init")||e.settings;t.preventDefault(),Modernizr.csstransitions?(n.addClass("alert-close"),n.on("transitionend webkitTransitionEnd oTransitionEnd",function(){a(this).trigger("close").trigger("close.fndtn.alert").remove(),s.callback()})):n.fadeOut(300,function(){a(this).trigger("close").trigger("close.fndtn.alert").remove(),s.callback()})})},reflow:function(){}}}(jQuery,window,window.document),define("foundation.alert",["foundation.core"],function(){}),define("templates/helpers/isTabPanelEnabled",["require","hbs/handlebars","sunstone-config"],function(t){var e=t("hbs/handlebars"),a=t("sunstone-config"),n=function(t,e,n){return a.isTabPanelEnabled(t,e)?n.fn(this):n.inverse(this)};return e.registerHelper("isTabPanelEnabled",n),n}),define("hbs!tabs/provision-tab/vms/info",["hbs","hbs/handlebars","templates/helpers/tr","templates/helpers/isTabPanelEnabled"],function(t,e){var a=e.template({1:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'          <a href"#" data-tooltip title="'+i((e.tr||t&&t.tr||s).call(t,"The main disk of the Virtual Machine will be saved in a new Image",{name:"tr",hash:{},data:n}))+'" class="left button small radius success provision_snapshot_button tip-top">\n            <i class="fa fa-fw fa-lg fa-save"/>\n          </a>\n          <a data-tooltip title="'+i((e.tr||t&&t.tr||s).call(t,"You have to power-off the virtual machine first",{name:"tr",hash:{},data:n}))+'" class="left button small radius white provision_snapshot_button_disabled tip-top" style="color: #999">\n            <i class="fa fa-fw fa-lg fa-save"/>\n          </a>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o='<div class="text-center provision_info_vm_loading">\n  <span class="fa-stack fa-5x" style="color: #dfdfdf"> <i class="fa fa-cloud fa-stack-2x"></i> <i class="fa  fa-spinner fa-spin fa-stack-1x fa-inverse"></i>\n  </span>\n  <br>\n  <br>\n  <span style="font-size: 18px; color: #999"></span>\n</div>\n<div class="provision_info_vm">\n  <div class="row">\n    <div class="large-12 large-centered columns">\n      <ul class="inline-list provision_action_icons">\n        <li>\n          <a href"#" data-tooltip title="'+r((e.tr||t&&t.tr||i).call(t,"Open a remote console in a new window",{name:"tr",hash:{},data:n}))+'" class="left button small radius provision_vnc_button tip-top">\n            <i class="fa fa-fw fa-lg fa-desktop"/></a>\n          <a data-tooltip title="'+r((e.tr||t&&t.tr||i).call(t,"You have to boot the Virtual Machine first",{name:"tr",hash:{},data:n}))+'" class="left button small radius white provision_vnc_button_disabled tip-top" style="color: #999">\n            <i class="fa fa-fw fa-lg fa-desktop"/></a>\n';return s=(e.isTabPanelEnabled||t&&t.isTabPanelEnabled||i).call(t,"provision-tab","templates",{name:"isTabPanelEnabled",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(o+=s),o+'        </li>\n        <li class="right">\n          <a href"#" data-tooltip title="'+r((e.tr||t&&t.tr||i).call(t,"Delete",{name:"tr",hash:{},data:n}))+'" class="button small radius alert provision_delete_confirm_button tip-top right">\n            <i class="fa fa-fw fa-lg fa-trash-o"/>\n          </a>\n          <a href"#" data-tooltip title="'+r((e.tr||t&&t.tr||i).call(t,"Delete",{name:"tr",hash:{},data:n}))+'" class="button small radius alert provision_shutdownhard_confirm_button tip-top right">\n            <i class="fa fa-fw fa-lg fa-trash-o"/>\n          </a>\n          <a href"#" data-tooltip title="'+r((e.tr||t&&t.tr||i).call(t,"Power off",{name:"tr",hash:{},data:n}))+'" class="button small radius secondary provision_poweroff_confirm_button tip-top right">\n            <i class="fa fa-fw fa-lg fa-power-off"/>\n          </a>\n          <a href"#" data-tooltip title="'+r((e.tr||t&&t.tr||i).call(t,"Power on",{name:"tr",hash:{},data:n}))+'" class="button small radius secondary provision_poweron_button tip-top right">\n            <i class="fa fa-fw fa-lg fa-play"/>\n          </a>\n          <a href"#" data-tooltip title="'+r((e.tr||t&&t.tr||i).call(t,"Reboot",{name:"tr",hash:{},data:n}))+'" class="button small radius secondary provision_reboot_confirm_button tip-top right">\n            <i class="fa fa-fw fa-lg fa-repeat"/>\n          </a>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <div class="row">\n    <div class="provision_confirm_action large-12 large-centered columns"></div>\n  </div>\n  <div class="row">\n    <div class="large-5 columns">\n      <ul class="provision-pricing-table_vm_info provision-pricing-table" style="border: 0px !important; margin-top: 20px;"></ul>\n    </div>\n    <div class="large-6 columns right">\n      <div class="row">\n        <div class="large-6 medium-6  columns">\n          <div class="row text-center">\n            <div class="large-12 columns">\n              <h4 class="subheader" style="margin: 0px">\n                <small>'+r((e.tr||t&&t.tr||i).call(t,"CPU",{name:"tr",hash:{},data:n}))+'</small>\n              </h4>\n            </div>\n          </div>\n          <div class="row">\n            <div class="large-12 columns">\n              <div class="large-12 columns centered graph vm_cpu_graph" style="height: 100px;"></div>\n            </div>\n          </div>\n          <div class="row graph_legend">\n            <div class="large-12 columns centered vm_cpu_legend"></div>\n          </div>\n        </div>\n        <div class="large-6 medium-6 columns">\n          <div class="row text-center">\n            <div class="large-12 columns">\n              <h4 class="subheader" style="margin: 0px">\n                <small>'+r((e.tr||t&&t.tr||i).call(t,"Memory",{name:"tr",hash:{},data:n}))+'</small>\n              </h4>\n            </div>\n          </div>\n          <div class="row">\n            <div class="large-12 columns">\n              <div class="large-12 columns centered graph vm_memory_graph" style="height: 100px;"></div>\n            </div>\n          </div>\n          <div class="row graph_legend">\n            <div class="large-12 columns centered vm_memory_legend"></div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="large-12 columns">\n      <br>\n      <div class="row">\n      <div class="large-3 medium-6 columns">\n        <div class="row text-center">\n          <div class="large-12 columns">\n            <h4 class="subheader" style="margin: 0px">\n              <small>'+r((e.tr||t&&t.tr||i).call(t,"Net RX",{name:"tr",hash:{},data:n}))+'</small>\n            </h4>\n          </div>\n        </div>\n        <div class="row">\n          <div class="large-12 columns">\n            <div class="large-12 columns centered graph vm_net_rx_graph" style="height: 100px;"></div>\n          </div>\n        </div>\n        <div class="row graph_legend">\n          <div class="large-12 columns centered vm_net_rx_legend"></div>\n        </div>\n      </div>\n      <div class="large-3 medium-6  columns">\n        <div class="row text-center">\n          <div class="large-12 columns">\n            <h4 class="subheader" style="margin: 0px">\n              <small>'+r((e.tr||t&&t.tr||i).call(t,"Net TX",{name:"tr",hash:{},data:n}))+'</small>\n            </h4>\n          </div>\n        </div>\n        <div class="row">\n          <div class="large-12 columns">\n            <div class="large-12 columns centered graph vm_net_tx_graph" style="height: 100px;"></div>\n          </div>\n        </div>\n        <div class="row graph_legend">\n          <div class="large-12 columns centered vm_net_tx_legend"></div>\n        </div>\n      </div>\n      <div class="large-3 medium-6  columns">\n        <div class="row text-center">\n          <div class="large-12 columns">\n            <h4 class="subheader" style="margin: 0px">\n              <small>'+r((e.tr||t&&t.tr||i).call(t,"Net Download Speed",{name:"tr",hash:{},data:n}))+'</small>\n            </h4>\n          </div>\n        </div>\n        <div class="row">\n          <div class="large-12 columns">\n            <div class="large-12 columns centered graph vm_net_rx_speed_graph" style="height: 100px;"></div>\n          </div>\n        </div>\n        <div class="row graph_legend">\n          <div class="large-12 columns centered vm_net_rx_speed_legend"></div>\n        </div>\n      </div>\n      <div class="large-3 medium-6 columns">\n        <div class="row text-center">\n          <div class="large-12 columns">\n            <h4 class="subheader" style="margin: 0px">\n              <small>'+r((e.tr||t&&t.tr||i).call(t,"Net Upload Speed",{name:"tr",hash:{},data:n}))+'</small>\n            </h4>\n          </div>\n        </div>\n        <div class="row">\n          <div class="large-12 columns">\n            <div class="large-12 columns centered graph vm_net_tx_speed_graph" style="height: 100px;"></div>\n          </div>\n        </div>\n        <div class="row graph_legend">\n          <div class="large-12 columns centered vm_net_tx_speed_legend"></div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <br>\n  <br></div>'
},useData:!0});return e.registerPartial("tabs/provision-tab/vms/info",a),e.registerPartial("tabs/provision-tab/vms/info",a),a}),define("hbs!tabs/provision-tab/vms/list",["hbs","hbs/handlebars","hbs!tabs/provision-tab/vms/info","templates/helpers/tr"],function(t,e){var a=e.template({1:function(){return"active"},3:function(){return'style="display:none"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<dl class="accordion accordion_list provision_list_vms" data-accordion>\n  <dd class="';return s=e["if"].call(t,null!=(s=null!=t?t.opts:t)?s.active:s,{name:"if",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+=' accordion-navigation">\n    <a href="#provision_list_vm_accordion'+l((i=null!=(i=e.accordionId||(null!=t?t.accordionId:t))?i:o,typeof i===r?i.call(t,{name:"accordionId",hash:{},data:n}):i))+'" class="provision_back right only-not-active">\n      <span class="button small radius"> <i class="fa fa-fw fa-lg fa-th"/><i class="fa fa-fw fa-lg fa-chevron-left"/>\n      </span>\n    </a>\n    <h3 class="subheader">\n      <span style="color: #777">\n      </span>\n      <span class="provision_info_vm_name only-not-active"></span>\n      <span href"#" class="right only-active button small radius secondary provision_vms_list_refresh_button" \n                ',s=e.unless.call(t,null!=(s=null!=t?t.opts:t)?s.refresh:s,{name:"unless",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+=' data-tooltip title=" '+l((e.tr||t&&t.tr||o).call(t,"Refresh",{name:"tr",hash:{},data:n}))+'">\n        <i class="fa fa-fw fa-lg fa-refresh"/></span>\n      <span href"#" class="right only-not-active button small radius secondary provision_refresh_info" \n                ',s=e.unless.call(t,null!=(s=null!=t?t.opts:t)?s.refresh:s,{name:"unless",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+=' data-tooltip title=" '+l((e.tr||t&&t.tr||o).call(t,"Refresh",{name:"tr",hash:{},data:n}))+'">\n        <i class="fa fa-fw fa-lg fa-refresh"/>\n      </span>\n      <span href"#" class="right only-active button small radius secondary provision_vms_list_filter_button" \n                ',s=e.unless.call(t,null!=(s=null!=t?t.opts:t)?s.filter:s,{name:"unless",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+=' data-tooltip title=" '+l((e.tr||t&&t.tr||o).call(t,"Filter by User",{name:"tr",hash:{},data:n}))+'">\n        <i class="fa fa-fw fa-lg fa-filter"/>\n      </span>\n      <span class="right only-active provision_list_vms_filter" style="display: none"></span>\n      <span>\n        <span href"#" class="right  only-active button small radius success provision_create_vm_button" \n                ',s=e.unless.call(t,null!=(s=null!=t?t.opts:t)?s.create:s,{name:"unless",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+='>\n          <i class="fa fa-fw fa-lg fa-plus-square"/>\n        </span>\n        <input type="search" class="only-active provision_list_vms_search provision-search-input " placeholder="Search VMs"/>\n      </h3>\n      <div id="provision_list_vm_accordion'+l((i=null!=(i=e.accordionId||(null!=t?t.accordionId:t))?i:o,typeof i===r?i.call(t,{name:"accordionId",hash:{},data:n}):i))+'" class="content ',s=e["if"].call(t,null!=(s=null!=t?t.opts:t)?s.active:s,{name:"if",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+='">\n        <div class="row">\n          <div class="large-12 large-centered columns">\n            <table class="provision_vms_table">\n              <thead class="hidden">\n                <tr>\n                  <th>'+l((e.tr||t&&t.tr||o).call(t,"ID",{name:"tr",hash:{},data:n}))+"</th>\n                  <th>"+l((e.tr||t&&t.tr||o).call(t,"Name",{name:"tr",hash:{},data:n}))+"</th>\n                  <th>"+l((e.tr||t&&t.tr||o).call(t,"User ID",{name:"tr",hash:{},data:n}))+'</th>\n                </tr>\n              </thead>\n              <tbody class="hidden"></tbody>\n            </table>\n            <br></div>\n        </div>\n      </div>\n    </dd>\n    <dd class="accordion-navigation">\n      <a class="provision_show_vm_accordion" href="#provision_show_vm_accordion'+l((i=null!=(i=e.accordionId||(null!=t?t.accordionId:t))?i:o,typeof i===r?i.call(t,{name:"accordionId",hash:{},data:n}):i))+'"></a>\n      <div id="provision_show_vm_accordion'+l((i=null!=(i=e.accordionId||(null!=t?t.accordionId:t))?i:o,typeof i===r?i.call(t,{name:"accordionId",hash:{},data:n}):i))+'" class="content">',s=this.invokePartial(a["tabs/provision-tab/vms/info"],"","tabs/provision-tab/vms/info",t,void 0,e,a,n),null!=s&&(c+=s),c+"</div>\n    </dd>\n  </dl>"},usePartial:!0,useData:!0});return e.registerPartial("tabs/provision-tab/vms/list",a),a}),define("tabs/provision-tab/vms/list",["require","foundation.alert","opennebula","utils/locale","sunstone-config","utils/notifier","utils/humanize","utils/resource-select","utils/graphs","hbs!./list"],function(t){function e(){$(".section_content").hide(),$(".provision_vms_list_section").fadeIn(),$("dd:not(.active) .provision_back",$(".provision_vms_list_section")).trigger("click"),$(".provision_vms_list_refresh_button",$(".provision_vms_list_section")).trigger("click")}function a(t,e){t.off(),t.html(n(e)),e.data&&$(".provision_vms_table",t).data("opennebula",e.data),r(t,e),o(t)}function n(t){return opts=$.extend({title:p.tr("Virtual Machines"),refresh:!0,create:!0,filter:!0},t),g+=1,v({accordionId:g,opts:opts})}function s(t,e){t.fnClearTable(!0),0==e.length?t.html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa fa-info-circle fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999">'+p.tr("There are no Virtual Machines")+"</span><br><br></div>"):t.fnAddData(e)}function i(t,e){t.html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa  fa-spinner fa-spin fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999"></span></div>');var a=t.data("opennebula");a?s(t,a):setTimeout(function(){u.VM.list({timeout:!0,success:function(e,a){s(t,a)},error:f.onError})},e)}function r(t,e){var a=$(".provision_vms_table",t).dataTable({iDisplayLength:6,sDom:'<"H">t<"F"lp>',aLengthMenu:[[6,12,36,72],[6,12,36,72]],aaSorting:[[0,"desc"]],aoColumnDefs:[{bVisible:!1,aTargets:["all"]}],aoColumns:[{mDataProp:"VM.ID"},{mDataProp:"VM.NAME"},{mDataProp:"VM.UID"}],fnPreDrawCallback:function(){return 0==this.$("tr",{filter:"applied"}).length?this.html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa fa-info-circle fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999">'+p.tr("There are no Virtual Machines")+"</span></div>"):$(".provision_vms_table",t).html('<ul class="provision_vms_ul large-block-grid-3 medium-block-grid-3 small-block-grid-1 text-center"></ul>'),!0},fnDrawCallback:function(){return $(".provision_vms_ul",t).foundation("reflow","tooltip"),!0},fnRowCallback:function(e,a,n,s){var i=a.VM,r=l(i);return $(".provision_vms_ul",t).append('<li><ul class="provision-pricing-table" opennebula_id="'+i.ID+'" datatable_index="'+s+'"><li class="provision-title text-left"><a class="provision_info_vm_button" style="color:#555" href="#"><span class="'+r.color+'-color"  data-tooltip title="'+r.str+'"><i class="fa fa-fw fa-square"/> </span>'+i.NAME+'</a></li><li class="provision-bullet-item text-left" ><i class="fa fa-fw fa-lg fa-laptop"/> x'+i.TEMPLATE.CPU+" - "+(i.TEMPLATE.MEMORY>1e3?Math.floor(i.TEMPLATE.MEMORY/1024)+"GB":i.TEMPLATE.MEMORY+"MB")+" - "+c(i)+'</li><li class="provision-bullet-item text-left" ><span class="">'+d(i)+'</span></li><li class="provision-bullet-item-last text-left" ><span class=""><i class="fa fa-fw fa-lg fa-user"/> '+i.UNAME+'</span><span class="right">'+m.prettyTimeAgo(i.STIME)+"</span></li></ul></li>"),e}});$(".provision_list_vms_search",t).keyup(function(){a.fnFilter($(this).val())}),$(".provision_list_vms_search",t).change(function(){a.fnFilter($(this).val())}),t.on("click",".provision_vms_list_refresh_button",function(){return u.Action.clear_cache("VM"),i(a,0),!1}),$(".provision_list_vms_filter",t).on("change",".resource_list_select",function(){"-2"!=$(this).val()?a.fnFilter("^"+$(this).val()+"$",2,!0,!1):a.fnFilter("",2)}),_.insert(".provision_list_vms_filter",t,"User",e.filter_expression?e.filter_expression:"-2",!1,'<option value="-2">'+p.tr("ALL")+"</option>",null,null,!0,!0),t.on("click",".provision_vms_list_filter_button",function(){return $(".provision_list_vms_filter",t).fadeIn(),!1}),u.Action.clear_cache("VM"),i(a,0),$(document).foundation()}function o(t){function e(t,e){$(".provision_info_vm_name",e).text(""),$(".provision_info_vm_loading",e).show(),$(".provision_info_vm",e).css("visibility","hidden"),u.VM.show({data:{id:t},error:f.onError,success:function(t,a){var n=a.VM,s=l(n);switch(s.color){case"deploying":$(".provision_reboot_confirm_button",e).hide(),$(".provision_poweroff_confirm_button",e).hide(),$(".provision_poweron_button",e).hide(),$(".provision_delete_confirm_button",e).show(),$(".provision_shutdownhard_confirm_button",e).hide(),$(".provision_snapshot_button",e).hide(),$(".provision_vnc_button",e).hide(),$(".provision_snapshot_button_disabled",e).hide(),$(".provision_vnc_button_disabled",e).hide();break;case"running":$(".provision_reboot_confirm_button",e).show(),$(".provision_poweroff_confirm_button",e).show(),$(".provision_poweron_button",e).hide(),$(".provision_delete_confirm_button",e).hide(),$(".provision_shutdownhard_confirm_button",e).show(),$(".provision_snapshot_button",e).hide(),$(".provision_vnc_button",e).show(),$(".provision_snapshot_button_disabled",e).show(),$(".provision_vnc_button_disabled",e).hide();break;case"off":$(".provision_reboot_confirm_button",e).hide(),$(".provision_poweroff_confirm_button",e).hide(),$(".provision_poweron_button",e).show(),$(".provision_delete_confirm_button",e).show(),$(".provision_shutdownhard_confirm_button",e).hide(),$(".provision_snapshot_button",e).show(),$(".provision_vnc_button",e).hide(),$(".provision_snapshot_button_disabled",e).hide(),$(".provision_vnc_button_disabled",e).show();break;case"powering_off":case"error":$(".provision_reboot_confirm_button",e).hide(),$(".provision_poweroff_confirm_button",e).hide(),$(".provision_poweron_button",e).hide(),$(".provision_delete_confirm_button",e).show(),$(".provision_shutdownhard_confirm_button",e).hide(),$(".provision_snapshot_button",e).hide(),$(".provision_vnc_button",e).hide(),$(".provision_snapshot_button_disabled",e).hide(),$(".provision_vnc_button_disabled",e).hide();break;default:color="secondary",$(".provision_reboot_confirm_button",e).hide(),$(".provision_poweroff_confirm_button",e).hide(),$(".provision_poweron_button",e).hide(),$(".provision_delete_confirm_button",e).show(),$(".provision_shutdownhard_confirm_button",e).hide(),$(".provision_snapshot_button",e).hide(),$(".provision_vnc_button",e).hide(),$(".provision_snapshot_button_disabled",e).hide(),$(".provision_vnc_button_disabled",e).hide()}u.VM.isVNCSupported(n)||u.VM.isSPICESupported(n)||($(".provision_vnc_button",e).hide(),$(".provision_vnc_button_disabled",e).hide()),$(".provision_info_vm",e).attr("vm_id",n.ID),$(".provision_info_vm",e).data("vm",n),$(".provision_info_vm_name",e).text(n.NAME),$(".provision-pricing-table_vm_info",e).html('<li class="text-left provision-bullet-item"><span class="'+s.color+'-color"><i class="fa fa-fw fa-lg fa-square"/>&emsp;'+s.str+'</span></li><li class="text-left provision-bullet-item"><hr style="margin: 0px"></li><li class="text-left provision-bullet-item" ><span><i class="fa fa-fw fa-lg fa-laptop"/>&emsp;x'+n.TEMPLATE.CPU+" - "+(n.TEMPLATE.MEMORY>1e3?Math.floor(n.TEMPLATE.MEMORY/1024)+"GB":n.TEMPLATE.MEMORY+"MB")+"</span> - <span>"+c(n)+'</span></li><li class="text-left provision-bullet-item" ><span>'+d(n)+'</span></li><li class="text-left provision-bullet-item"><hr style="margin: 0px"></li><li class="text-right provision-bullet-item"><span class="left" style="color: #999;"><i class="fa fa-fw fa-lg fa-user"/>&emsp;'+n.UNAME+'</span><span class="right" style="color: #999;"><i class="fa fa-fw fa-lg fa-clock-o"/>&emsp;'+m.prettyTimeAgo(n.STIME)+" - ID: "+n.ID+"</span></li>"),$(".provision_confirm_action:first",e).html(""),$(".provision_info_vm",e).css("visibility","visible"),$(".provision_info_vm_loading",e).hide(),u.VM.monitor({data:{timeout:!0,id:n.ID,monitor:{monitor_resources:"CPU,MEMORY,NET_TX,NET_RX"}},success:function(t,a){for(var n=[{monitor_resources:"CPU",labels:"Real CPU",humanize_figures:!1,div_graph:$(".vm_cpu_graph",e)},{monitor_resources:"MEMORY",labels:"Real MEM",humanize_figures:!0,div_graph:$(".vm_memory_graph",e)},{labels:"Network reception",monitor_resources:"NET_RX",humanize_figures:!0,convert_from_bytes:!0,div_graph:$(".vm_net_rx_graph",e)},{labels:"Network transmission",monitor_resources:"NET_TX",humanize_figures:!0,convert_from_bytes:!0,div_graph:$(".vm_net_tx_graph",e)},{labels:"Network reception speed",monitor_resources:"NET_RX",humanize_figures:!0,convert_from_bytes:!0,y_sufix:"B/s",derivative:!0,div_graph:$(".vm_net_rx_speed_graph",e)},{labels:"Network transmission speed",monitor_resources:"NET_TX",humanize_figures:!0,convert_from_bytes:!0,y_sufix:"B/s",derivative:!0,div_graph:$(".vm_net_tx_speed_graph",e)}],s=0;s<n.length;s++)b.plot(a,n[s])}})}})}h.isTabPanelEnabled("provision-tab","templates")&&(t.on("click",".provision_snapshot_button",function(){$(".provision_confirm_action:first",t).html('<div data-alert class="alert-box secondary radius"><div class="row"><div class="large-12 columns"><span style="font-size: 14px; line-height: 20px">'+p.tr("This Virtual Machine will be saved in a new Template. Only the main disk will be preserved!")+"<br>"+p.tr("You can then create a new Virtual Machine using this Template")+'</span></div></div><br><div class="row"><div class="large-11 large-centered columns"><input type="text" class="provision_snapshot_name" placeholder="'+p.tr("Template Name")+'" style="height: 40px !important; font-size: 16px; padding: 0.5rem  !important; margin: 0px"/></div></div><br><div class="row"><div class="large-11 large-centered columns"><a href"#" class="provision_snapshot_create_button success button large-12 radius right">'+p.tr("Save Virtual Machine to Template")+'</a></div></div><a href="#" class="close" style="top: 20px">&times;</a></div>')}),t.on("click",".provision_snapshot_create_button",function(){var t=$(this);t.attr("disabled","disabled");var a=$(".provision_info_vm[vm_id]"),n=a.attr("vm_id"),s=$(".provision_snapshot_name",a).val();return u.VM.save_as_template({data:{id:n,extra_param:{name:s}},success:function(s){u.Action.clear_cache("VMTEMPLATE"),f.notifyMessage(p.tr("Image")+" "+s.request.data[0][1].name+" "+p.tr("saved successfully")),e(n,a),t.removeAttr("disabled")},error:function(e,a){f.onError(e,a),t.removeAttr("disabled")}}),!1})),t.on("click",".provision_delete_confirm_button",function(){$(".provision_confirm_action:first",t).html('<div data-alert class="alert-box secondary radius"><div class="row"><div class="large-9 columns"><span style="font-size: 14px; line-height: 20px">'+p.tr("Be careful, this action will inmediately destroy your Virtual Machine")+"<br>"+p.tr("All the information will be lost!")+'</span></div><div class="large-3 columns"><a href"#" class="provision_delete_button alert button large-12 radius right" style="margin-right: 15px">'+p.tr("Delete")+'</a></div></div><a href="#" class="close">&times;</a></div>')}),t.on("click",".provision_shutdownhard_confirm_button",function(){$(".provision_confirm_action:first",t).html('<div data-alert class="alert-box secondary radius"><div class="row"><div class="large-9 columns"><span style="font-size: 14px; line-height: 20px">'+p.tr("Be careful, this action will inmediately destroy your Virtual Machine")+"<br>"+p.tr("All the information will be lost!")+'</span></div><div class="large-3 columns"><a href"#" class="provision_shutdownhard_button alert button large-12 radius right" style="margin-right: 15px">'+p.tr("Delete")+'</a></div></div><a href="#" class="close" style="top: 20px">&times;</a></div>')}),t.on("click",".provision_poweroff_confirm_button",function(){$(".provision_confirm_action:first",t).html('<div data-alert class="alert-box secondary radius"><div class="row"><div class="large-11 columns"><span style="font-size: 14px; line-height: 20px">'+p.tr("This action will power off this Virtual Machine. The Virtual Machine will remain in the poweroff state, and can be powered on later")+"<br><br>"+p.tr("You can send the power off signal to the Virtual Machine (this is equivalent to execute the command from the console). If that doesn't effect your Virtual Machine, try to Power off the machine (this is equivalent to pressing the power off button in a physical computer).")+'</span></div></div><br><div class="row"><div class="large-12 columns"><a href"#" class="provision_poweroff_button button radius right" style="margin-right: 15px">'+p.tr("Power off")+'</a><label class="left" style="margin-left: 25px"><input type="radio" name="provision_poweroff_radio" value="poweroff_hard" class="provision_poweroff_hard_radio"> <i class="fa fa-fw fa-bolt"/> '+p.tr("Power off the machine")+'</label><label class="left" style="margin-left: 25px"><input type="radio" name="provision_poweroff_radio" value="poweroff" class="provision_poweroff_radio" checked> <i class="fa fa-fw fa-power-off"/> '+p.tr("Send the power off signal")+'</label></div></div><a href="#" class="close" style="top: 20px">&times;</a></div>')}),t.on("click",".provision_reboot_confirm_button",function(){$(".provision_confirm_action:first",t).html('<div data-alert class="alert-box secondary radius"><div class="row"><div class="large-11 columns"><span style="font-size: 14px; line-height: 20px">'+p.tr("This action will reboot this Virtual Machine.")+"<br><br>"+p.tr("You can send the reboot signal to the Virtual Machine (this is equivalent to execute the reboot command form the console). If that doesn't effect your Virtual Machine, try to Reboot the machine (this is equivalent to pressing the reset button a physical computer).")+'</span></div></div><br><div class="row"><div class="large-12 columns"><a href"#" class="provision_reboot_button button radius right" style="margin-right: 15px">'+p.tr("Reboot")+'</a><label class="left" style="margin-left: 25px"><input type="radio" name="provision_reboot_radio" value="reset" class="provision_reboot_hard_radio"> <i class="fa fa-fw fa-bolt"/> '+p.tr("Reboot the machine")+'</label><label class="left" style="margin-left: 25px"><input type="radio" name="provision_reboot_radio" value="reboot" class="provision_reboot_radio" checked> <i class="fa fa-fw fa-power-off"/> '+p.tr("Send the reboot signal")+'</label></div></div><a href="#" class="close" style="top: 20px">&times;</a></div>')}),t.on("click",".provision_delete_button",function(){var e=$(this);e.attr("disabled","disabled");var a=$(".provision_info_vm",t).attr("vm_id");return u.VM.del({data:{id:a},success:function(){$(".provision_back",t).click(),$(".provision_vms_list_refresh_button",t).click(),e.removeAttr("disabled")},error:function(t,a){f.onError(t,a),e.removeAttr("disabled")}}),!1}),t.on("click",".provision_shutdownhard_button",function(){var e=$(this);e.attr("disabled","disabled");var a=$(".provision_info_vm",t).attr("vm_id");return u.VM.cancel({data:{id:a},success:function(){$(".provision_back",t).click(),$(".provision_vms_list_refresh_button",t).click(),e.removeAttr("disabled")},error:function(t,a){f.onError(t,a),e.removeAttr("disabled")}}),!1}),t.on("click",".provision_poweroff_button",function(){var a=$(this);a.attr("disabled","disabled");var n=$(".provision_info_vm",t).attr("vm_id"),s=$("input[name=provision_poweroff_radio]:checked").val();return u.VM[s]({data:{id:n},success:function(){e(n,t),a.removeAttr("disabled")},error:function(t,e){f.onError(t,e),a.removeAttr("disabled")}}),!1}),t.on("click",".provision_reboot_button",function(){var a=$(this);a.attr("disabled","disabled");var n=$(".provision_info_vm",t).attr("vm_id"),s=$("input[name=provision_reboot_radio]:checked").val();return u.VM[s]({data:{id:n},success:function(){e(n,t),a.removeAttr("disabled")},error:function(t,e){f.onError(t,e),a.removeAttr("disabled")}}),!1}),t.on("click",".provision_poweron_button",function(){var a=$(this);a.attr("disabled","disabled");var n=$(".provision_info_vm",t).attr("vm_id");return u.VM.resume({data:{id:n},success:function(){e(n,t),a.removeAttr("disabled")},error:function(t,e){f.onError(t,e),a.removeAttr("disabled")}}),!1}),t.on("click",".provision_vnc_button",function(){var e=$(this);e.attr("disabled","disabled");var a=$(".provision_info_vm",t).attr("vm_id"),n=$(".provision_info_vm",t).data("vm");return u.VM.vnc({data:{id:a},success:function(t,a){if(u.VM.isVNCSupported(n)){var s=window.location.hostname,i=config.system_config.vnc_proxy_port,r=a.password,o=a.token,l=a.vm_name,c="vnc?";c+="host="+s,c+="&port="+i,c+="&token="+o,c+="&password="+r,c+="&encrypt="+config.user_config.vnc_wss,c+="&title="+l,window.open(c,"","_blank"),e.removeAttr("disabled")}else if(u.VM.isSPICESupported(n)){var d,p,h,m,o,l,_="ws://";"yes"==config.user_config.vnc_wss&&(_="wss://"),d=window.location.hostname,p=config.system_config.vnc_proxy_port,h=a.password,o=a.token,l=a.vm_name,m=_+d+":"+p+"?token="+o;var c="spice?";c+="host="+d,c+="&port="+p,c+="&token="+o,c+="&password="+h,c+="&encrypt="+config.user_config.vnc_wss,c+="&title="+l,window.open(c,"","_blank"),e.removeAttr("disabled")}else f.notifyError("The remote console is not enabled for this VM")},error:function(t,a){f.onError(t,a),e.removeAttr("disabled")}}),!1}),t.on("click",".provision_refresh_info",function(){var a=$(".provision_info_vm",t).attr("vm_id");return e(a,t),!1}),$(".provision_list_vms",t).on("click",".provision_info_vm_button",function(){$("a.provision_show_vm_accordion",t).trigger("click");var a=$(this).parents(".provision-pricing-table").attr("opennebula_id");return e(a,t),!1})}function l(t){var e,a,n=u.VM.stateStr(t.STATE);switch(n){case"INIT":case"PENDING":case"HOLD":e="deploying",a=p.tr("DEPLOYING")+" (1/3)";break;case"FAILED":e="error",a=p.tr("ERROR");break;case"ACTIVE":var s=u.VM.shortLcmStateStr(t.LCM_STATE);switch(s){case"LCM_INIT":e="deploying",a=p.tr("DEPLOYING")+" (1/3)";break;case"PROLOG":e="deploying",a=p.tr("DEPLOYING")+" (2/3)";break;case"BOOT":e="deploying",a=p.tr("DEPLOYING")+" (3/3)";break;case"RUNNING":case"SNAPSHOT":case"MIGRATE":e="running",a=p.tr("RUNNING");break;case"HOTPLUG":e="deploying",a=p.tr("SAVING IMAGE");break;case"FAILURE":e="error",a=p.tr("ERROR");break;case"SAVE":case"EPILOG":case"SHUTDOWN":case"CLEANUP":e="powering_off",a=p.tr("POWERING OFF");break;case"UNKNOWN":e="powering_off",a=p.tr("UNKNOWN");break;default:e="powering_off",a=p.tr("UNKNOWN")}break;case"STOPPED":case"SUSPENDED":case"POWEROFF":e="off",a=p.tr("OFF");break;default:e="powering_off",a=p.tr("UNKNOWN")}return{color:e,str:a}}function c(t){var e=[];return $.isArray(t.TEMPLATE.DISK)?e=t.TEMPLATE.DISK:$.isEmptyObject(t.TEMPLATE.DISK)||(e=[t.TEMPLATE.DISK]),e.length>0?e[0].IMAGE:""}function d(t){return'<i class="fa fa-fw fa-lg fa-globe"></i> '+u.VM.ipsStr(t)}t("foundation.alert");var u=t("opennebula"),p=t("utils/locale"),h=t("sunstone-config"),f=t("utils/notifier"),m=t("utils/humanize"),_=t("utils/resource-select"),b=t("utils/graphs"),v=t("hbs!./list"),g=0;return{generate:a,show:e,state:l}}),define("hbs!tabs/provision-tab/templates/list",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({1:function(){return"active"},3:function(){return'style="display:none"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<dl class="accordion accordion_list provision_list_templates" data-accordion="dfsaf">\n  <dd class="';return s=e["if"].call(t,null!=(s=null!=t?t.opts:t)?s.active:s,{name:"if",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+=' accordion-navigation">\n    <a class="right only-not-active" href="#provision_list_template_accordion'+l((i=null!=(i=e.accordionId||(null!=t?t.accordionId:t))?i:o,typeof i===r?i.call(t,{name:"accordionId",hash:{},data:n}):i))+'">\n      <span class="button small radius"> <i class="fa fa-fw fa-lg fa-th"/><i class="fa fa-fw fa-lg fa-chevron-left"/>\n      </span>\n    </a>\n    <h3 class="subheader">\n      <span href"#" class="right only-active button small radius secondary provision_templates_list_refresh_button" \n          ',s=e.unless.call(t,null!=(s=null!=t?t.opts:t)?s.refresh:s,{name:"unless",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+=' data-tooltip title=" '+l((e.tr||t&&t.tr||o).call(t,"Refresh",{name:"tr",hash:{},data:n}))+'">\n        <i class="fa fa-fw fa-lg fa-refresh"/></span>\n      <span href"#" class="right only-active button small radius secondary provision_templates_list_filter_button" \n          ',s=e.unless.call(t,null!=(s=null!=t?t.opts:t)?s.filter:s,{name:"unless",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+=' data-tooltip title=" '+l((e.tr||t&&t.tr||o).call(t,"Filter by User",{name:"tr",hash:{},data:n}))+'">\n        <i class="fa fa-fw fa-lg fa-filter"/>\n      </span>\n      <span class="right only-active provision_list_templates_filter" style="display: none"></span>\n      <input type="search" class="provision_list_templates_search only-active provision-search-input" placeholder="Search Templates"/>\n    </h3>\n    <div id="provision_list_template_accordion'+l((i=null!=(i=e.accordionId||(null!=t?t.accordionId:t))?i:o,typeof i===r?i.call(t,{name:"accordionId",hash:{},data:n}):i))+'" class="content ',s=e["if"].call(t,null!=(s=null!=t?t.opts:t)?s.active:s,{name:"if",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+'">\n      <div class="row">\n        <div class="provision_confirm_delete_template_div large-12 large-centered columns"></div>\n      </div>\n      <div class="row">\n        <div class="large-12 large-centered columns">\n          <table class="provision_templates_table">\n            <thead class="hidden">\n              <tr>\n                <th>'+l((e.tr||t&&t.tr||o).call(t,"ID",{name:"tr",hash:{},data:n}))+"</th>\n                <th>"+l((e.tr||t&&t.tr||o).call(t,"Name",{name:"tr",hash:{},data:n}))+"</th>\n                <th>"+l((e.tr||t&&t.tr||o).call(t,"Saved",{name:"tr",hash:{},data:n}))+"</th>\n                <th>"+l((e.tr||t&&t.tr||o).call(t,"User ID",{name:"tr",hash:{},data:n}))+'</th>\n              </tr>\n            </thead>\n            <tbody class="hidden"></tbody>\n          </table>\n          <br></div>\n      </div>\n    </div>\n  </dd>\n  <dd class="accordion-navigation">\n    <a class="provision_show_template_accordion" href="#provision_show_template_accordion'+l((i=null!=(i=e.accordionId||(null!=t?t.accordionId:t))?i:o,typeof i===r?i.call(t,{name:"accordionId",hash:{},data:n}):i))+'"></a>\n    <div id="provision_show_template_accordion'+l((i=null!=(i=e.accordionId||(null!=t?t.accordionId:t))?i:o,typeof i===r?i.call(t,{name:"accordionId",hash:{},data:n}):i))+'" class="content"></div>\n  </dd>\n</dl>'},useData:!0});return e.registerPartial("tabs/provision-tab/templates/list",a),a}),define("tabs/provision-tab/templates/list",["require","foundation.alert","opennebula","utils/locale","sunstone-config","utils/notifier","utils/humanize","utils/resource-select","hbs!./list"],function(t){function e(){$(".section_content").hide(),$(".provision_templates_list_section").fadeIn(),$(".provision_templates_list_refresh_button",$(".provision_templates_list_section")).trigger("click")}function a(t,e){t.off(),t.html(n(e)),i(t,e)}function n(t){return opts=$.extend({title:l.tr("Saved Templates"),refresh:!0,create:!0,active:!0,filter:!0},t),f+=1,h({accordionId:f,opts:opts})}function s(t,e){t.html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa  fa-spinner fa-spin fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999"></span></div>'),setTimeout(function(){o.Template.list({timeout:!0,success:function(e,a){t.fnClearTable(!0),0==a.length?t.html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa fa-info-circle fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999">'+l.tr("There are no templates available")+"</span></div>"):t.fnAddData(a)},error:d.onError})},e)}function i(t,e){var a=$(".provision_templates_table",t).dataTable({iDisplayLength:8,sDom:'<"H">t<"F"lp>',aLengthMenu:[[6,12,36,72],[6,12,36,72]],aaSorting:[[0,"desc"]],aoColumnDefs:[{bVisible:!1,aTargets:["all"]}],aoColumns:[{mDataProp:"VMTEMPLATE.ID"},{mDataProp:"VMTEMPLATE.NAME"},{mDataProp:"VMTEMPLATE.TEMPLATE.SAVED_TEMPLATE_ID",sDefaultContent:"-"},{mDataProp:"VMTEMPLATE.UID"}],fnPreDrawCallback:function(){return 0==this.$("tr",{filter:"applied"}).length?this.html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa fa-info-circle fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999">'+l.tr("There are no saved templates available")+"<br>"+l.tr("Create a template by saving a running Virtual Machine")+"</span></div>"):$(".provision_templates_table",t).html('<ul class="provision_templates_ul large-block-grid-3 medium-block-grid-3 small-block-grid-1 text-center"></ul>'),!0},fnRowCallback:function(e,a,n,s){var i=a.VMTEMPLATE,o="";return c.isTabActionEnabled("provision-tab","Template.chmod")&&i.UID==config.user_id&&("1"==i.PERMISSIONS.GROUP_U?(o+='<a class="provision_confirm_unshare_template_button left" data-tooltip title="'+l.tr("Unshare")+'" style="color:#555" href="#"><i class="fa fa-fw fa-lg fa-ban only-on-hover"/></a>',o+='<span style="font-size:12px; color: #777">'+l.tr("SHARED")+"</span>"):o+='<a class="provision_confirm_chmod_template_button left" data-tooltip title="'+l.tr("Share")+'" style="color:#555" href="#"><i class="fa fa-fw fa-lg fa-share-alt only-on-hover"/></a>'),c.isTabActionEnabled("provision-tab","Template.delete")&&(o+='<a class="provision_confirm_delete_template_button" data-tooltip title="'+l.tr("Delete")+'"  style="color:#555" href="#"><i class="fa fa-fw fa-lg fa-trash-o right only-on-hover"/></a>'),$(".provision_templates_ul",t).append('<li><ul class="provision-pricing-table" opennebula_id="'+i.ID+'" saved_to_image_id="'+i.TEMPLATE.SAVED_TO_IMAGE_ID+'" datatable_index="'+s+'"><li class="provision-title text-left" title="'+i.NAME+'">'+i.NAME+'</li><li class="provision-bullet-item text-left" ><i class="fa fa-fw fa-lg fa-laptop"/> x'+i.TEMPLATE.CPU+" - "+(i.TEMPLATE.MEMORY>1e3?Math.floor(i.TEMPLATE.MEMORY/1024)+"GB":i.TEMPLATE.MEMORY+"MB")+" - "+r(i)+'</li><li class="provision-description text-left" style="padding-top:0px; padding-bottom: 5px">'+(i.TEMPLATE.DESCRIPTION||"")+'</li><li class="provision-bullet-item" style="padding-top:10px">'+o+'</li><li class="provision-bullet-item-last text-left" ><span class=""><i class="fa fa-fw fa-lg fa-user"/> '+i.UNAME+'</span><span class="right">'+u.prettyTimeAgo(i.REGTIME)+"</span></li></ul></li>"),e}});a.fnFilter("^(?!-$)",2,!0,!1),$(".provision_list_templates_search",t).keyup(function(){a.fnFilter($(this).val())}),$(".provision_list_templates_search",t).change(function(){a.fnFilter($(this).val())}),t.on("click",".provision_templates_list_refresh_button",function(){return o.Action.clear_cache("VMTEMPLATE"),$(".provision_confirm_delete_template_div",t).html(""),s(a,0),!1}),t.on("click",".provision_templates_list_search_button",function(){$(".provision_list_templates_search",t).fadeIn()
}),$(".provision_list_templates_filter",t).on("change",".resource_list_select",function(){"-2"!=$(this).val()?a.fnFilter("^"+$(this).val()+"$",3,!0,!1):a.fnFilter("",3)}),p.insert(".provision_list_templates_filter",t,"User",e.filter_expression?e.filter_expression:"-2",!1,'<option value="-2">'+l.tr("ALL")+"</option>",null,null,!0,!0),t.on("click",".provision_templates_list_filter_button",function(){return $(".provision_list_templates_filter",t).fadeIn(),!1}),c.isTabActionEnabled("provision-tab","Template.delete")&&(t.on("click",".provision_confirm_delete_template_button",function(){var e=$(this).parents(".provision-pricing-table"),a=e.attr("opennebula_id"),n=e.attr("saved_to_image_id"),s=$(".provision-title",e).text();$(".provision_confirm_delete_template_div",t).html('<div data-alert class="alert-box secondary radius"><div class="row"><div class="large-9 columns"><span style="font-size: 14px; line-height: 20px">'+l.tr("Handle with care! This action will inmediately destroy the template")+' "'+s+'" '+l.tr("and the image associated.")+'</span></div><div class="large-3 columns"><a href"#" class="provision_delete_template_button alert button large-12 radius right" style="margin-right: 15px" image_id="'+n+'" template_id="'+a+'">'+l.tr("Delete")+'</a></div></div><a href="#" class="close">&times;</a></div>')}),t.on("click",".provision_delete_template_button",function(){})),c.isTabActionEnabled("provision-tab","Template.chmod")&&(t.on("click",".provision_confirm_chmod_template_button",function(){var e=$(this).parents(".provision-pricing-table"),a=e.attr("opennebula_id"),n=e.attr("saved_to_image_id"),s=$(".provision-title",e).text();$(".provision_confirm_delete_template_div",t).html('<div data-alert class="alert-box secondary radius"><div class="row"><div class="large-8 columns"><span style="font-size: 14px; line-height: 20px">'+l.tr("The template")+' "'+s+'" '+l.tr("and the image associated will be shared and all the users will be able to instantiate new VMs using this template.")+'</span></div><div class="large-4 columns"><a href"#" class="provision_chmod_template_button success button large-12 radius right" style="margin-right: 15px" image_id="'+n+'" template_id="'+a+'">'+l.tr("Share template")+'</a></div></div><a href="#" class="close">&times;</a></div>')}),t.on("click",".provision_chmod_template_button",function(){}),t.on("click",".provision_confirm_unshare_template_button",function(){var e=$(this).parents(".provision-pricing-table"),a=e.attr("opennebula_id"),n=e.attr("saved_to_image_id"),s=$(".provision-title",e).first().text();$(".provision_confirm_delete_template_div",t).html('<div data-alert class="alert-box secondary radius"><div class="row"><div class="large-8 columns"><span style="font-size: 14px; line-height: 20px">'+l.tr("The template")+' "'+s+'" '+l.tr("and the image associated will be unshared and the users will not be able to instantiate new VMs using this template.")+'</span></div><div class="large-4 columns"><a href"#" class="provision_unshare_template_button success button large-12 radius right" style="margin-right: 15px" image_id="'+n+'" template_id="'+a+'">'+l.tr("Unshare template")+'</a></div></div><a href="#" class="close">&times;</a></div>')}),t.on("click",".provision_unshare_template_button",function(){var e=$(this);e.attr("disabled","disabled");var a=$(this).attr("template_id"),n=$(this).attr("image_id");o.Template.chmod({timeout:!0,data:{id:a,extra_param:{group_u:0}},success:function(){$(".provision_templates_list_refresh_button",t).trigger("click"),o.Image.chmod({timeout:!0,data:{id:n,extra_param:{group_u:0}},success:function(){},error:d.onError})},error:d.onError})})),o.Action.clear_cache("VMTEMPLATE"),s(a,0),t.foundation()}function r(t){var e=[];return $.isArray(t.TEMPLATE.DISK)?e=t.TEMPLATE.DISK:$.isEmptyObject(t.TEMPLATE.DISK)||(e=[t.TEMPLATE.DISK]),e.length>0&&e[0].IMAGE?e[0].IMAGE:""}t("foundation.alert");var o=t("opennebula"),l=t("utils/locale"),c=t("sunstone-config"),d=t("utils/notifier"),u=t("utils/humanize"),p=t("utils/resource-select"),h=t("hbs!./list"),f=0;return{generate:a,show:e,updateDatatable:s}}),define("hbs!tabs/provision-tab/flows/info",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<div class="text-center provision_info_flow_loading">\n  <span class="fa-stack fa-5x" style="color: #dfdfdf"> <i class="fa fa-cloud fa-stack-2x"></i> <i class="fa  fa-spinner fa-spin fa-stack-1x fa-inverse"></i>\n  </span>\n  <br>\n  <br>\n  <span style="font-size: 18px; color: #999"></span>\n</div>\n<div class="provision_info_flow">\n  <div class="row">\n    <div class="large-12 large-centered columns">\n      <ul class="inline-list provision_action_icons">\n        <li>\n          <a href"#" data-tooltip title="'+i((e.tr||t&&t.tr||s).call(t,"Recover a failed service, cleaning the failed VMs",{name:"tr",hash:{},data:n}))+'" class="left button small radius success provision_recover_button">\n            <i class="fa fa-fw fa-lg fa-wrench"/></a>\n        </li>\n        <li class="right">\n          <a href"#" data-tooltip title="'+i((e.tr||t&&t.tr||s).call(t,"Delete",{name:"tr",hash:{},data:n}))+'" class="button small radius alert provision_delete_confirm_button tip-top right">\n            <i class="fa fa-fw fa-lg fa-trash-o"/></a>\n          <a href"#" data-tooltip title="'+i((e.tr||t&&t.tr||s).call(t,"Shutdown",{name:"tr",hash:{},data:n}))+'" class="button small radius secondary provision_shutdown_confirm_button tip-top right">\n            <i class="fa fa-fw fa-lg fa-power-off"/>\n          </a>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <div class="row">\n    <div class="provision_confirm_action large-10 large-centered columns"></div>\n  </div>\n  <br>\n  <div class="row">\n    <div class="large-4 columns">\n      <ul class="provision-pricing-table_flow_info provision-pricing-table" style="border: 0px !important; background: #fff;"></ul>\n    </div>\n    <div class="large-8 columns">\n      <div class="row">\n        <div class="large-12 columns">\n          <ul class="provision_roles_ul large-block-grid-2 medium-block-grid-2 small-block-grid-1 text-center"></ul>\n        </div>\n      </div>\n    </div>\n  </div>\n  <br>\n  <br>\n  <div class="row">\n    <div class="provision_role_vms_container large-12 large-centered columns"></div>\n  </div>\n</div>'},useData:!0});return e.registerPartial("tabs/provision-tab/flows/info",a),e.registerPartial("tabs/provision-tab/flows/info",a),a}),define("hbs!tabs/provision-tab/flows/list",["hbs","hbs/handlebars","hbs!tabs/provision-tab/flows/info","templates/helpers/tr"],function(t,e){var a=e.template({1:function(){return"active"},3:function(){return'style="display:none"'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<dl class="accordion accordion_list provision_list_flows" data-accordion>\n  <dd class="';return s=e["if"].call(t,null!=(s=null!=t?t.opts:t)?s.active:s,{name:"if",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+=' accordion-navigation">\n    <a class="provision_list_flow_accordion right only-not-active provision_back" href="#provision_list_flow_accordion'+l((i=null!=(i=e.accordionId||(null!=t?t.accordionId:t))?i:o,typeof i===r?i.call(t,{name:"accordionId",hash:{},data:n}):i))+'">\n      <span class="button small radius"> <i class="fa fa-fw fa-lg fa-th"/><i class="fa fa-fw fa-lg fa-chevron-left"/>\n      </span>\n    </a>\n    <h3 class="subheader">\n      <span class="provision_info_flow_name only-not-active"></span>\n      <span href"#" class="only-active right button radius small secondary provision_flows_list_refresh_button" \n              ',s=e.unless.call(t,null!=(s=null!=t?t.opts:t)?s.refresh:s,{name:"unless",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+=' data-tooltip title=" '+l((e.tr||t&&t.tr||o).call(t,"Refresh",{name:"tr",hash:{},data:n}))+'">\n        <i class="fa fa-fw fa-lg fa-refresh"/></span>\n      <span href"#" class="only-not-active right button small radius secondary provision_refresh_info" \n              ',s=e.unless.call(t,null!=(s=null!=t?t.opts:t)?s.refresh:s,{name:"unless",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+=' data-tooltip title=" '+l((e.tr||t&&t.tr||o).call(t,"Refresh",{name:"tr",hash:{},data:n}))+'">\n        <i class="fa fa-fw fa-lg fa-refresh"/>\n      </span>\n      <span href"#" class="only-active right button radius small secondary provision_flows_list_filter_button" \n              ',s=e.unless.call(t,null!=(s=null!=t?t.opts:t)?s.filter:s,{name:"unless",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+=' data-tooltip title=" '+l((e.tr||t&&t.tr||o).call(t,"Filter by User",{name:"tr",hash:{},data:n}))+'">\n        <i class="fa fa-fw fa-lg fa-filter"/>\n      </span>\n      <span class="only-active right provision_list_flows_filter" style="display: none"></span>\n      <span>\n        <input type="search" class="only-active provision_list_flows_search provision-search-input" placeholder="Search Services"/>\n        <span href"#" class="only-active right button radius small success provision_create_flow_button" \n              ',s=e.unless.call(t,null!=(s=null!=t?t.opts:t)?s.create:s,{name:"unless",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+='>\n          <i class="fa fa-fw fa-lg fa-plus-square"/>\n        </span>\n      </h3>\n      <div id="provision_list_flow_accordion'+l((i=null!=(i=e.accordionId||(null!=t?t.accordionId:t))?i:o,typeof i===r?i.call(t,{name:"accordionId",hash:{},data:n}):i))+'" class="content ',s=e["if"].call(t,null!=(s=null!=t?t.opts:t)?s.active:s,{name:"if",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+='">\n        <div class="">\n          <div class="row">\n            <div class="large-12 large-centered columns">\n              <table class="provision_flows_table">\n                <thead class="hidden">\n                  <tr>\n                    <th>'+l((e.tr||t&&t.tr||o).call(t,"ID",{name:"tr",hash:{},data:n}))+"</th>\n                    <th>"+l((e.tr||t&&t.tr||o).call(t,"Name",{name:"tr",hash:{},data:n}))+"</th>\n                    <th>"+l((e.tr||t&&t.tr||o).call(t,"User ID",{name:"tr",hash:{},data:n}))+'</th>\n                  </tr>\n                </thead>\n                <tbody class="hidden"></tbody>\n              </table>\n              <br></div>\n          </div>\n        </div>\n      </div>\n    </dd>\n    <dd class="accordion-navigation">\n      <a class="provision_show_flow_accordion" href="#provision_show_flow_accordion'+l((i=null!=(i=e.accordionId||(null!=t?t.accordionId:t))?i:o,typeof i===r?i.call(t,{name:"accordionId",hash:{},data:n}):i))+'"></a>\n      <div id="provision_show_flow_accordion'+l((i=null!=(i=e.accordionId||(null!=t?t.accordionId:t))?i:o,typeof i===r?i.call(t,{name:"accordionId",hash:{},data:n}):i))+'" class="content">',s=this.invokePartial(a["tabs/provision-tab/flows/info"],"","tabs/provision-tab/flows/info",t,void 0,e,a,n),null!=s&&(c+=s),c+"</div>\n    </dd>\n  </dl>"},usePartial:!0,useData:!0});return e.registerPartial("tabs/provision-tab/flows/list",a),a}),define("tabs/provision-tab/flows/list",["require","foundation.alert","opennebula","utils/locale","utils/notifier","utils/humanize","utils/resource-select","tabs/provision-tab/vms/list","hbs!./list"],function(t){function e(){$(".section_content").hide(),$(".provision_flows_list_section").fadeIn(),$("dd:not(.active) .provision_back",$(".provision_flows_list_section")).trigger("click"),$(".provision_flows_list_refresh_button",$(".provision_flows_list_section")).trigger("click")}function a(t,e){t.off(),t.html(n(e)),i(t,e),r(t)}function n(t){return opts=$.extend({title:d.tr("Services"),active:!0,refresh:!0,create:!0,filter:!0},t),_+=1,m({accordionId:_,opts:opts})}function s(t,e){t.html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa  fa-spinner fa-spin fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999"></span></div>'),setTimeout(function(){c.Service.list({timeout:!0,success:function(e,a){$(".flow_error_message").hide(),t.fnClearTable(!0),0==a.length?t.html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa fa-info-circle fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999">'+d.tr("There are no Services")+"</span><br><br></div>"):t.fnAddData(a)},error:function(e,a){t.html('<div class="text-center"><br><br><div class="row flow_error_message" id="" hidden><div class="small-6 columns small-centered text-center"><div class="alert-box alert radius">'+d.tr("Cannot connect to OneFlow server")+'</div></div></div><br><br><span style="font-size: 18px; color: #999"></span></div>'),u.onError(e,a,$(".flow_error_message"))}})},e)}function i(t,e){provision_flows_datatable=$(".provision_flows_table",t).dataTable({iDisplayLength:6,sDom:'<"H">t<"F"lp>',aLengthMenu:[[6,12,36,72],[6,12,36,72]],aaSorting:[[0,"desc"]],aoColumnDefs:[{bVisible:!1,aTargets:["all"]}],aoColumns:[{mDataProp:"DOCUMENT.ID"},{mDataProp:"DOCUMENT.NAME"},{mDataProp:"DOCUMENT.UID"}],fnPreDrawCallback:function(){return 0==this.$("tr",{filter:"applied"}).length?this.html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa fa-info-circle fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999">'+d.tr("Looks like you don't have any Service. Click the button below to get started")+'</span><br><br><div class="row"><div class="large-6 large-centered columns"><a href"#" class="medium large-12 button radius provision_create_flow_button"">'+d.tr("Create a new Service")+"</a></div></div><br><br></div>"):$(".provision_flows_table",t).html('<ul class="provision_flows_ul large-block-grid-3 medium-block-grid-3 small-block-grid-1 text-center"></ul>'),!0},fnDrawCallback:function(){$(".provision_flows_ul",t).foundation("reflow","tooltip")},fnRowCallback:function(e,a,n,s){var i=a.DOCUMENT,r=i.TEMPLATE.BODY,c=l(r),d=o(r),u="";return r.roles&&$.each(r.roles,function(t,e){var a=(l(e),{str:(e.nodes?e.nodes.length:0)+" / "+e.cardinality,percentage:100*Math.floor((e.nodes?e.nodes.length:0)/e.cardinality)});u+='<li class="provision-bullet-item text-left""><i class="fa fa-fw fa-lg fa-cube"/>&emsp;'+e.name+'<span class="right" style="font-size: 12px">'+a.str+" VMs</span></li>"}),$(".provision_flows_ul",t).append('<li><ul class="provision-pricing-table" opennebula_id="'+i.ID+'" datatable_index="'+s+'"><li class="provision-title text-left"><a class="provision_info_flow_button" style="color:#555" href="#"><span class="'+c.color+'-color" data-tooltip title="'+c.str+'"><i class="fa fa-fw fa-lg fa-square"/>&emsp;</span>'+i.NAME+"</a></li>"+u+'<li class="provision-bullet-item-last text-right"><span class="left"><i class="fa fa-fw fa-lg fa-user"/>&emsp;'+i.UNAME+"</span><span>"+(d?p.prettyTimeAgo(d):"-")+"</span></li></ul></li>"),e}}),$(".provision_list_flows_search",t).keyup(function(){provision_flows_datatable.fnFilter($(this).val())}),$(".provision_list_flows_search",t).change(function(){provision_flows_datatable.fnFilter($(this).val())}),t.on("click",".provision_flows_list_refresh_button",function(){return c.Action.clear_cache("SERVICE"),s(provision_flows_datatable,0),!1}),t.on("click",".provision_flows_list_search_button",function(){$(".provision_list_flows_search",t).fadeIn()}),$(".provision_list_flows_filter",t).on("change",".resource_list_select",function(){"-2"!=$(this).val()?provision_flows_datatable.fnFilter("^"+$(this).val()+"$",2,!0,!1):provision_flows_datatable.fnFilter("",2)}),h.insert(".provision_list_flows_filter",t,"User",e.filter_expression?e.filter_expression:"-2",!1,'<option value="-2">'+d.tr("ALL")+"</option>",null,null,!0,!0),t.on("click",".provision_flows_list_filter_button",function(){return $(".provision_list_flows_filter",t).fadeIn(),!1}),c.Action.clear_cache("SERVICE"),s(provision_flows_datatable,0),$(document).foundation()}function r(t){function e(t,e,a){$(".provision_info_flow_name",e).text(""),$(".provision_info_flow",e).css("visibility","hidden"),$(".provision_info_flow_loading",e).fadeIn(),$(".provision_role_vms_container").html(""),c.Service.show({data:{id:t},error:u.onError,success:function(t,n){var s=n.DOCUMENT,i=s.TEMPLATE.BODY,r=l(i),c=o(i);switch(r.color){case"deploying":$(".provision_recover_button",e).hide(),$(".provision_delete_confirm_button",e).show(),$(".provision_shutdown_confirm_button",e).show();break;case"running":$(".provision_recover_button",e).hide(),$(".provision_delete_confirm_button",e).show(),$(".provision_shutdown_confirm_button",e).show();break;case"off":$(".provision_recover_button",e).hide(),$(".provision_delete_confirm_button",e).show(),$(".provision_shutdown_confirm_button",e).hide();break;case"powering_off":case"error":$(".provision_recover_button",e).show(),$(".provision_delete_confirm_button",e).show(),$(".provision_shutdown_confirm_button",e).show();break;default:$(".provision_recover_button",e).show(),$(".provision_delete_confirm_button",e).show(),$(".provision_shutdown_confirm_button",e).show()}$(".provision_info_flow",e).attr("flow_id",s.ID),$(".provision_info_flow_name",e).text(s.NAME),$(".provision-pricing-table_flow_info",e).html('<li class="text-left provision-bullet-item"><span class="'+r.color+'-color"><i class="fa fa-fw fa-lg fa-square"/>&emsp;'+r.str+'</span></li><li class="text-left provision-bullet-item"><hr style="margin: 0px"></li><li class="text-left provision-bullet-item"><span style="color: #999;"><i class="fa fa-fw fa-lg fa-user"/>&emsp;'+s.UNAME+'</span><span class="right" style="color: #999;"><i class="fa fa-fw fa-lg fa-clock-o"/>&emsp;'+(c?p.prettyTimeAgo(c):"...")+" - ID: "+s.ID+"</span></li></ul>"),$(".provision_roles_ul",e).html(""),i.roles&&$.each(i.roles,function(t,n){var s=l(n),i={str:(n.nodes?n.nodes.length:0)+" / "+n.cardinality,percentage:100*Math.floor((n.nodes?n.nodes.length:0)/n.cardinality)},r=$('<li><ul class="provision_role_ul provision-pricing-table"><li class="provision-title text-left"><i class="fa fa-fw fa-cube"/>&emsp;'+n.name+'</li><li class="provision-bullet-item text-left" style="padding-top: 5px; margin-left: 10px; margin-right: 10px"><div class="progress small radius" style="margin-bottom:0px">  <span class="meter" style="width: '+i.percentage+'%;"></span></div></li><li class="provision-bullet-item text-left" style="padding-top: 0px; margin-left: 10px; margin-right: 10px; font-size: 14px"><span class="'+s.color+'-color">'+s.str+'</span><span class="right">'+i.str+' VMs</span></li><li class="text-left provision-bullet-item"><br></li><li class="provision-bullet-item text-left" style="padding-top: 5px; margin-left: 10px; margin-right: 10px"><a class="provision_role_vms_button button medium radius"><i class="fa fa-th fa-lg"></i></a><a class="provision_role_cardinality_button button medium success right radius"><i class="fa fa-arrows-h fa-lg"></i></a></li></ul></li>').appendTo($(".provision_roles_ul",e));$(".provision_role_ul",r).data("role",n),a&&a==n.name&&$(".provision_role_vms_button",r).trigger("click")}),$(".provision_info_flow_state_hr",e).html('<div style="height:1px; margin-top:5px; margin-bottom: 5px; background: #cfcfcf"></div>'),$(".provision_confirm_action:first",e).html(""),$(".provision_info_flow_loading",e).hide(),$(".provision_info_flow",e).css("visibility","visible")}})}t.on("click",".provision_role_vms_button",function(){$(".provision_role_vms_container",t).html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa  fa-spinner fa-spin fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999"></span></div>');var e=$(this).closest(".provision_role_ul").data("role");$(".provision_info_flow",t).data("role_id",e.name);var a=[];e.nodes&&e.nodes.length>0&&$.each(e.nodes,function(t,e){a.push(e.vm_info)}),f.generate($(".provision_role_vms_container",t),{title:e.name+" "+d.tr("VMs"),active:!0,refresh:!1,create:!1,filter:!1,data:a})}),t.on("click",".provision_role_cardinality_button",function(){var e=$(this).closest(".provision_role_ul").data("role"),a=e.min_vms||1,n=e.max_vms||100;if($(".provision_confirm_action:first",t).html('<div data-alert class="alert-box secondary radius"><div class="row"><div class="large-12 large-centered columns"><div class="row"><div class="large-4 text-center columns"><span class="cardinality_value" style="color: #777; font-size:60px">'+e.cardinality+'</span><br><span style="color: #999; font-size:20px">'+e.name+" "+d.tr("VMs")+'</span></div><div class="large-8 columns text-center"><div class="cardinality_slider_div"><br><span class="left" style="color: #999;">'+a+'</span><span class="right" style="color: #999;">'+n+'</span><br><div class="cardinality_slider"></div><br><a href"#" class="provision_change_cardinality_button success button radius large-12" role_id="'+e.name+'">'+d.tr("Change Cardinality")+'</a></div><div class="cardinality_no_slider_div"><br><br><span class="" style="color: #999;">'+d.tr("The cardinality for this role cannot be changed")+'</span></div></div></div></div><a href="#" class="close" style="top: 20px">&times;</a></div>'),n>a){$(".cardinality_slider_div",t).show(),$(".cardinality_no_slider_div",t).hide();var s=$(".cardinality_slider",t).noUiSlider({handles:1,connect:"lower",range:[a,n],step:1,start:e.cardinality,value:e.cardinality,slide:function(e){"move"!=e&&$(this).val()&&$(".cardinality_value",t).html($(this).val())}});s.val(e.cardinality),s.addClass("noUiSlider")}else $(".cardinality_slider_div",t).hide(),$(".cardinality_no_slider_div",t).show();return!1}),t.on("click",".provision_change_cardinality_button",function(){var e=$(".provision_info_flow",t).attr("flow_id"),a=$(".cardinality_slider",t).val();c.Role.update({data:{id:e+"/role/"+$(this).attr("role_id"),extra_param:{cardinality:a}},success:function(){c.Action.clear_cache("SERVICE"),$(".provision_refresh_info",t).trigger("click")},error:u.onError})}),t.on("click",".provision_delete_confirm_button",function(){$(".provision_confirm_action:first",t).html('<div data-alert class="alert-box secondary radius"><div class="row"><div class="large-9 columns"><span style="font-size: 14px; line-height: 20px">'+d.tr("Be careful, this action will inmediately destroy your Service")+"<br>"+d.tr("All the information will be lost!")+'</span></div><div class="large-3 columns"><a href"#" class="provision_delete_button alert button large-12 radius right" style="margin-right: 15px">'+d.tr("Delete")+'</a></div></div><a href="#" class="close">&times;</a></div>')}),t.on("click",".provision_shutdown_confirm_button",function(){$(".provision_confirm_action:first",t).html('<div data-alert class="alert-box secondary radius"><div class="row"><div class="large-9 columns"><span style="font-size: 14px; line-height: 20px">'+d.tr("Be careful, this action will inmediately shutdown your Service")+"<br>"+d.tr("All the information will be lost!")+'</span></div><div class="large-3 columns"><a href"#" class="provision_shutdown_button alert button large-12 radius right" style="margin-right: 15px">'+d.tr("Shutdown")+'</a></div></div><a href="#" class="close">&times;</a></div>')}),t.on("click",".provision_recover_button",function(){var a=$(".provision_info_flow",t).attr("flow_id");c.Service.recover({data:{id:a},success:function(){e(a,t)},error:u.onError})}),t.on("click",".provision_shutdown_button",function(){var a=$(".provision_info_flow",t).attr("flow_id");c.Service.shutdown({data:{id:a},success:function(){e(a,t)},error:u.onError})}),t.on("click",".provision_delete_button",function(){var e=$(this);e.attr("disabled","disabled");var a=$(".provision_info_flow",t).attr("flow_id");c.Service.del({data:{id:a},success:function(){$(".provision_back",t).click(),$(".provision_flows_list_refresh_button",t).click(),e.removeAttr("disabled")},error:function(t,a){u.onError(t,a),e.removeAttr("disabled")}})}),t.on("click",".provision_refresh_info",function(){var a=$(".provision_info_flow",t).attr("flow_id"),n=$(".provision_info_flow",t).data("role_id");return e(a,t,n),!1}),$(".provision_list_flows",t).on("click",".provision_info_flow_button",function(){$("a.provision_show_flow_accordion",t).trigger("click");var a=$(this).parents(".provision-pricing-table").attr("opennebula_id");return e(a,t),!1})}function o(t){return t.log?t.log[0].timestamp:null}function l(t){var e,a,n=c.Service.state(t.state);switch(n){case d.tr("PENDING"):e="deploying",a=d.tr("PENDING");break;case d.tr("DEPLOYING"):e="deploying",a=d.tr("DEPLOYING");break;case d.tr("UNDEPLOYING"):e="powering_off",a=d.tr("UNDEPLOYING");break;case d.tr("FAILED_UNDEPLOYING"):e="error",a=d.tr("FAILED UNDEPLOYING");break;case d.tr("FAILED_DEPLOYING"):e="error",a=d.tr("FAILED DEPLOYING");break;case d.tr("FAILED_SCALING"):e="error",a=d.tr("FAILED SCALING");break;case d.tr("WARNING"):e="error",a=d.tr("WARNING");break;case d.tr("RUNNING"):e="running",a=d.tr("RUNNING");break;case d.tr("SCALING"):e="deploying",a=d.tr("SCALING");break;case d.tr("COOLDOWN"):e="error",a=d.tr("COOLDOWN");break;case d.tr("DONE"):e="off",a=d.tr("DONE");break;default:e="powering_off",a=d.tr("UNKNOWN")}return{color:e,str:a}}t("foundation.alert");var c=t("opennebula"),d=t("utils/locale"),u=t("utils/notifier"),p=t("utils/humanize"),h=t("utils/resource-select"),f=t("tabs/provision-tab/vms/list"),m=t("hbs!./list"),_=0;return{generate:a,show:e}}),define("hbs!tabs/provision-tab/users/quota-widget/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<div class="row">\n  <div class="large-12 large-centered columns">\n    <h5 class="subheader text-right">\n      <span class="left" style="margin-bottom: 0.5em">'+i((e.tr||t&&t.tr||s).call(t,"Running VMs",{name:"tr",hash:{},data:n}))+'</span>\n    </h5>\n  </div>\n</div>\n<div class="row provision_rvms_quota">\n  <div class="medium-3 small-12 columns">\n    <select class="provision_quota_select">\n      <option value="edit">'+i((e.tr||t&&t.tr||s).call(t,"Manual",{name:"tr",hash:{},data:n}))+'</option>\n      <option value="unlimited">'+i((e.tr||t&&t.tr||s).call(t,"Unlimited",{name:"tr",hash:{},data:n}))+'</option>\n      <option value="default">'+i((e.tr||t&&t.tr||s).call(t,"Default",{name:"tr",hash:{},data:n}))+'</option>\n    </select>\n  </div>\n  <div class="medium-9 small-12 columns provision_quota_edit">\n    <div class="row collapse">\n      <div class="small-9 columns">\n        <div class="range-slider radius provision_rvms_quota_slider" data-slider data-options="start: 0; end: 50;">\n          <span class="range-slider-handle"></span>\n          <span class="range-slider-active-segment"></span>\n          <input type="hidden"></div>\n      </div>\n      <div class="large-2 small-2 columns">\n        <input type="text"  class="provision-input provision_rvms_quota_input" style="margin-top: -7px; height: 40px !important; font-size: 16px; padding: 0.5rem  !important;"/>\n      </div>\n    </div>\n  </div>\n  <div class="medium-9 small-12 columns provision_quota_unlimited" style="display:none">\n    <span style="font-size: 18px; color: #999">'+i((e.tr||t&&t.tr||s).call(t,"Unlimited. Group quotas will still apply",{name:"tr",hash:{},data:n}))+'</span>\n  </div>\n  <div class="medium-9 small-12 columns provision_quota_default" style="display:none">\n    <span style="font-size: 18px; color: #999">\n      '+i((e.tr||t&&t.tr||s).call(t,"Use the default system quotas set by the cloud adminstrator",{name:"tr",hash:{},data:n}))+'\n    </span>\n  </div>\n</div>\n<div class="row">\n  <div class="large-12 large-centered columns">\n    <h5 class="subheader text-right">\n      <span class="left" style="margin-bottom: 0.5em">'+i((e.tr||t&&t.tr||s).call(t,"CPU",{name:"tr",hash:{},data:n}))+'</span>\n    </h5>\n  </div>\n</div>\n<div class="row provision_cpu_quota">\n  <div class="medium-3 small-12 columns">\n    <select class="provision_quota_select">\n      <option value="edit">'+i((e.tr||t&&t.tr||s).call(t,"Manual",{name:"tr",hash:{},data:n}))+'</option>\n      <option value="unlimited">'+i((e.tr||t&&t.tr||s).call(t,"Unlimited",{name:"tr",hash:{},data:n}))+'</option>\n      <option value="default">'+i((e.tr||t&&t.tr||s).call(t,"Default",{name:"tr",hash:{},data:n}))+'</option>\n    </select>\n  </div>\n  <div class="medium-9 small-12 columns provision_quota_edit">\n    <div class="row collapse">\n      <div class="small-9 columns">\n        <div class="range-slider radius provision_cpu_quota_slider" data-slider data-options="start: 0; end: 50;">\n          <span class="range-slider-handle"></span>\n          <span class="range-slider-active-segment"></span>\n          <input type="hidden"></div>\n      </div>\n      <div class="large-2 small-2 columns">\n        <input type="text"  class="provision-input provision_cpu_quota_input" style="margin-top: -7px; height: 40px !important; font-size: 16px; padding: 0.5rem  !important;"/>\n      </div>\n    </div>\n  </div>\n  <div class="medium-9 small-12 columns provision_quota_unlimited" style="display:none">\n    <span style="font-size: 18px; color: #999">'+i((e.tr||t&&t.tr||s).call(t,"Unlimited. Group quotas will still apply",{name:"tr",hash:{},data:n}))+'</span>\n  </div>\n  <div class="medium-9 small-12 columns provision_quota_default" style="display:none">\n    <span style="font-size: 18px; color: #999">\n      '+i((e.tr||t&&t.tr||s).call(t,"Use the default system quotas set by the cloud adminstrator",{name:"tr",hash:{},data:n}))+'\n    </span>\n  </div>\n</div>\n<div class="row">\n  <div class="large-12 large-centered columns">\n    <h5 class="subheader text-right">\n      <span class="left" style="margin-bottom: 0.5em">'+i((e.tr||t&&t.tr||s).call(t,"Memory (GBs)",{name:"tr",hash:{},data:n}))+'</span>\n    </h5>\n  </div>\n</div>\n<div class="vm_param">\n  <input type="hidden" class="provision_memory_quota_input"/>\n</div>\n<div class="row provision_memory_quota">\n  <div class="medium-3 small-12 columns">\n    <select class="provision_quota_select">\n      <option value="edit">'+i((e.tr||t&&t.tr||s).call(t,"Manual",{name:"tr",hash:{},data:n}))+'</option>\n      <option value="unlimited">'+i((e.tr||t&&t.tr||s).call(t,"Unlimited",{name:"tr",hash:{},data:n}))+'</option>\n      <option value="default">'+i((e.tr||t&&t.tr||s).call(t,"Default",{name:"tr",hash:{},data:n}))+'</option>\n    </select>\n  </div>\n  <div class="medium-9 small-12 columns provision_quota_edit">\n    <div class="row collapse">\n      <div class="small-9 columns">\n        <div class="range-slider radius provision_memory_quota_slider" data-slider data-options="start: 0; end: 50;">\n          <span class="range-slider-handle"></span>\n          <span class="range-slider-active-segment"></span>\n          <input type="hidden"></div>\n      </div>\n      <div class="large-2 small-2 columns">\n        <input type="text"  class="provision-input provision_memory_quota_tmp_input" style="margin-top: -7px; height: 40px !important; font-size: 16px; padding: 0.5rem  !important;"/>\n      </div>\n    </div>\n  </div>\n  <div class="medium-9 small-12 columns provision_quota_unlimited" style="display:none">\n    <span style="font-size: 18px; color: #999">'+i((e.tr||t&&t.tr||s).call(t,"Unlimited. Group quotas will still apply",{name:"tr",hash:{},data:n}))+'</span>\n  </div>\n  <div class="medium-9 small-12 columns provision_quota_default" style="display:none">\n    <span style="font-size: 18px; color: #999">\n      '+i((e.tr||t&&t.tr||s).call(t,"Use the default system quotas set by the cloud adminstrator",{name:"tr",hash:{},data:n}))+"\n    </span>\n  </div>\n</div>"
},useData:!0});return e.registerPartial("tabs/provision-tab/users/quota-widget/html",a),a}),define("hbs!tabs/provision-tab/users/empty-graphs",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<span class="fa-stack fa-2x" style="color: #dfdfdf"> <i class="fa fa-cloud fa-stack-2x"></i>\n</span>\n<br>\n<span style="color: #cfcfcf">'+i((e.tr||t&&t.tr||s).call(t,"There is no information available",{name:"tr",hash:{},data:n}))+"</span>"},useData:!0});return e.registerPartial("tabs/provision-tab/users/empty-graphs",a),e.registerPartial("./empty-graphs",a),a}),define("hbs!tabs/provision-tab/users/info",["hbs","hbs/handlebars","hbs!tabs/provision-tab/users/empty-graphs","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o='<div class="text-center provision_info_vdc_user_loading">\n  <span class="fa-stack fa-5x" style="color: #dfdfdf"> <i class="fa fa-cloud fa-stack-2x"></i> <i class="fa  fa-spinner fa-spin fa-stack-1x fa-inverse"></i>\n  </span>\n  <br>\n  <br>\n  <span style="font-size: 18px; color: #999"></span>\n</div>\n<div class="provision_info_vdc_user">\n  <div class="row">\n    <div class="large-12 large-centered columns">\n      <ul class="inline-list provision_action_icons">\n        <li class="">\n          <a href"#" data-tooltip title="'+r((e.tr||t&&t.tr||i).call(t,"Update the User Quotas",{name:"tr",hash:{},data:n}))+'" class="left button small secondary radius provision_vdc_user_quota_confirm_button tip-top">\n            <i class="fa fa-fw fa-lg fa-align-left"/></a>\n          <a href"#" data-tooltip title="'+r((e.tr||t&&t.tr||i).call(t,"Change the password of the User",{name:"tr",hash:{},data:n}))+'" class="left button small secondary radius provision_vdc_user_password_confirm_button tip-top">\n            <i class="fa fa-fw fa-lg fa-lock"/></a>\n        </li>\n        <li class="right">\n          <a href"#" data-tooltip title="'+r((e.tr||t&&t.tr||i).call(t,"Delete the User",{name:"tr",hash:{},data:n}))+'" class="right button small radius alert provision_vdc_user_delete_confirm_button tip-top">\n            <i class="fa fa-fw fa-lg fa-trash-o"/>\n          </a>\n        </li>\n      </ul>\n    </div>\n  </div>\n  <div class="row">\n    <div class="provision_vdc_user_confirm_action large-12 columns"></div>\n  </div>\n  <br>\n  <div class="row">\n    <div class="large-4 columns">\n      <ul class="provision-pricing-table_user_info provision-pricing-table" style="border: 0px !important; background: #fff;"></ul>\n    </div>\n    <div class="large-8 columns">\n      <div class="row dashboard_vm_accounting">\n        <div id="acct_content">\n          <div class="large-6 columns">\n            <input style="display:none;" value="vm" id="acct_group_by"/>\n            <div class="row">\n              <div class="large-12 columns graph_legend text-center">\n                <span style="color: #777; font-size: 14px">'+r((e.tr||t&&t.tr||i).call(t,"CPU hours",{name:"tr",hash:{},data:n}))+'</span>\n              </div>\n              <br>\n              <div class="large-12 columns">\n                <div class="large-12 columns centered graph" id="acct_cpu_graph" style="height: 100px;"></div>\n              </div>\n            </div>\n          </div>\n          <div class="large-6 columns">\n            <div class="row">\n              <div class="large-12 columns graph_legend text-center">\n                <span style="color: #777; font-size: 14px">'+r((e.tr||t&&t.tr||i).call(t,"Memory GB hours",{name:"tr",hash:{},data:n}))+'</span>\n              </div>\n              <div class="large-12 columns">\n                <div class="large-12 columns centered graph" id="acct_mem_graph" style="height: 100px;"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div id="acct_no_data">\n          <div class="row">\n            <div class="large-12 columns text-center">';return s=this.invokePartial(a["./empty-graphs"],"","./empty-graphs",t,void 0,e,a,n),null!=s&&(o+=s),o+'</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <br>\n  <div class="row">\n    <div class="provision-user-resource-header large-12 columns text-center"></div>\n  </div>\n  <br>\n  <div class="row">\n    <div class="provision_vdc_info_container large-12 columns"></div>\n  </div>\n  <br></div>'},usePartial:!0,useData:!0});return e.registerPartial("tabs/provision-tab/users/info",a),e.registerPartial("tabs/provision-tab/users/info",a),a}),define("hbs!tabs/provision-tab/users/list",["hbs","hbs/handlebars","hbs!tabs/provision-tab/users/info","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<dl class="accordion accordion_list provision_list_users" data-accordion>\n  <dd class="active accordion-navigation">\n    <a href="#provision_list_user_accordion'+l((i=null!=(i=e.accordionId||(null!=t?t.accordionId:t))?i:o,typeof i===r?i.call(t,{name:"accordionId",hash:{},data:n}):i))+'" class="provision_back right only-not-active">\n      <span class="button small radius"> <i class="fa fa-fw fa-lg fa-th"/><i class="fa fa-fw fa-lg fa-chevron-left"/>\n      </span>\n    </a>\n    <h3 class="subheader">\n      <span class="provision_info_vdc_user_name only-not-active"></span>\n      <span href"#" class="right only-active provision_users_list_refresh_button button small radius secondary" data-tooltip title="'+l((e.tr||t&&t.tr||o).call(t,"Refresh",{name:"tr",hash:{},data:n}))+'">\n        <i class="fa fa-fw fa-lg fa-refresh"/></span>\n      <span href"#" class="right only-not-active provision_refresh_info button small radius secondary" data-tooltip title="'+l((e.tr||t&&t.tr||o).call(t,"Refresh",{name:"tr",hash:{},data:n}))+'">\n        <i class="fa fa-fw fa-lg fa-refresh"/>\n      </span>\n      <input type="search" class="provision_list_users_search provision-search-input only-active" placeholder="Search Users"/>\n      <span href"#" class="right only-active provision_create_user_button button small radius success">\n        <i class="fa fa-fw fa-lg fa-plus-square"/>\n      </span>\n    </h3>\n    <div id="provision_list_user_accordion'+l((i=null!=(i=e.accordionId||(null!=t?t.accordionId:t))?i:o,typeof i===r?i.call(t,{name:"accordionId",hash:{},data:n}):i))+'" class="content active">\n      <div class="row">\n        <div class="large-12 large-centered columns">\n          <table class="provision_users_table">\n            <thead class="hidden">\n              <tr>\n                <th>'+l((e.tr||t&&t.tr||o).call(t,"ID",{name:"tr",hash:{},data:n}))+"</th>\n                <th>"+l((e.tr||t&&t.tr||o).call(t,"Name",{name:"tr",hash:{},data:n}))+'</th>\n              </tr>\n            </thead>\n            <tbody class="hidden"></tbody>\n          </table>\n          <br></div>\n      </div>\n    </div>\n  </dd>\n  <dd class="accordion-navigation">\n    <a class="provision_show_user_accordion" href="#provision_show_user_accordion'+l((i=null!=(i=e.accordionId||(null!=t?t.accordionId:t))?i:o,typeof i===r?i.call(t,{name:"accordionId",hash:{},data:n}):i))+'"></a>\n    <div id="provision_show_user_accordion'+l((i=null!=(i=e.accordionId||(null!=t?t.accordionId:t))?i:o,typeof i===r?i.call(t,{name:"accordionId",hash:{},data:n}):i))+'" class="content">';return s=this.invokePartial(a["tabs/provision-tab/users/info"],"","tabs/provision-tab/users/info",t,void 0,e,a,n),null!=s&&(c+=s),c+"</div>\n  </dd>\n</dl>\n;"},usePartial:!0,useData:!0});return e.registerPartial("tabs/provision-tab/users/list",a),a}),define("tabs/provision-tab/users/list",["require","foundation.alert","opennebula","utils/locale","sunstone-config","utils/notifier","utils/quotas/quota-widgets","utils/quotas/quota-limits","utils/quotas/quota-defaults","utils/accounting","utils/showback","./quota-widget","tabs/provision-tab/vms/list","tabs/provision-tab/templates/list","tabs/provision-tab/flows/list","hbs!./quota-widget/html","hbs!./list"],function(t){function e(){$(".section_content").hide(),$(".provision_users_list_section").fadeIn(),$("dd:not(.active) .provision_back",$(".provision_users_list_section")).trigger("click"),$(".provision_users_list_refresh_button",$(".provision_users_list_section")).trigger("click")}function a(t,e){t.off(),t.html(n(e)),i(t),r(t)}function n(){return T+=1,w({accordionId:T})}function s(t,e){t.html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa  fa-spinner fa-spin fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999"></span></div>'),setTimeout(function(){o.User.list({timeout:!0,success:function(e,a,n){t.fnClearTable(!0),0==a.length?t.html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa fa-info-circle fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999">'+l.tr("The list of users is empty")+"</span></div>"):(provision_quotas_list=n,t.fnAddData(a))},error:d.onError})},e)}function i(t){var e=$(".provision_users_table",t).dataTable({iDisplayLength:6,sDom:'<"H">t<"F"lp>',aLengthMenu:[[6,12,36,72],[6,12,36,72]],aaSorting:[[0,"desc"]],aoColumnDefs:[{bVisible:!1,aTargets:["all"]}],aoColumns:[{mDataProp:"USER.ID"},{mDataProp:"USER.NAME"}],fnPreDrawCallback:function(){return 0==this.$("tr",{filter:"applied"}).length?this.html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa fa-info-circle fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999">'+l.tr("The list of users is empty")+"</span></div>"):$(".provision_users_table",t).html('<ul class="provision_users_ul large-block-grid-3 medium-block-grid-3 small-block-grid-1 text-center"></ul>'),!0},fnRowCallback:function(e,a,n,s){var i,r=a.USER;if(u.initEmptyQuotas(r),$.isEmptyObject(r.VM_QUOTA))quotas=u.quotaFloatInfo(0,0,null,!0),i="",i+='<li class="provision-bullet-item text-left"><i class="fa fa-fw fa-th"></i> '+l.tr("VMs")+'<span class="right">'+quotas.str+"</span></li>",quotas=u.quotaFloatInfo(0,0,null,!0),i+='<li class="provision-bullet-item text-left"><i class="fa fa-fw fa-tachometer"></i> '+l.tr("CPU")+'<span class="right">'+quotas.str+"</span></li>",quotas=u.quotaMBInfo(0,0,null,!0),i+='<li class="provision-bullet-item text-left"><i class="fa fa-fw fa-align-left"></i> '+l.tr("Memory")+'<span class="right">'+quotas.str+"</span></li>";else{var o=h.getDefaultUserQuotas();quotas=u.quotaFloatInfo(r.VM_QUOTA.VM.VMS_USED,r.VM_QUOTA.VM.VMS,o.VM_QUOTA.VM.VMS,!0),i="",i+='<li class="provision-bullet-item text-left"><i class="fa fa-fw fa-th"></i> '+l.tr("VMs")+'<span class="right">'+quotas.str+"</span></li>",quotas=u.quotaFloatInfo(r.VM_QUOTA.VM.CPU_USED,r.VM_QUOTA.VM.CPU,o.VM_QUOTA.VM.CPU,!0),i+='<li class="provision-bullet-item text-left"><i class="fa fa-fw fa-tachometer"></i> '+l.tr("CPU")+'<span class="right">'+quotas.str+"</span></li>",quotas=u.quotaMBInfo(r.VM_QUOTA.VM.MEMORY_USED,r.VM_QUOTA.VM.MEMORY,o.VM_QUOTA.VM.MEMORY,!0),i+='<li class="provision-bullet-item text-left"><i class="fa fa-fw fa-align-left"></i> '+l.tr("Memory")+'<span class="right">'+quotas.str+"</span></li>"}return $(".provision_users_ul",t).append('<li><ul class="provision-pricing-table" opennebula_id="'+r.ID+'" datatable_index="'+s+'"><li class="provision-title text-left" style="padding-bottom: 10px"><a class="provision_info_user_button" style="color:#555" href="#"><i class="fa fa-fw fa-lg fa-sign-in right only-on-hover"/>'+r.NAME+"</a></li>"+i+"</ul></li>"),e}});$(".provision_list_users_search",t).keyup(function(){e.fnFilter($(this).val())}),$(".provision_list_users_search",t).change(function(){e.fnFilter($(this).val())}),t.on("click",".provision_users_list_refresh_button",function(){return o.Action.clear_cache("USER"),s(e,0),!1}),$(document).foundation()}function r(t){function e(t,e){$(".provision_info_vdc_user_name",e).text(""),$(".provision_vdc_info_container",e).html(""),$(".provision_info_vdc_user",e).hide(),$(".provision_info_vdc_user_loading",e).fadeIn(),o.User.show({data:{id:t},error:d.onError,success:function(a,n){var s=n.USER;if($(".provision_vdc_user_confirm_action",e).html(""),$(".provision_info_vdc_user_acct",e).html(""),$(".provision_info_vdc_user",e).attr("opennebula_id",s.ID),$(".provision_info_vdc_user",e).attr("uname",s.NAME),$(".provision_info_vdc_user",e).attr("quotas",JSON.stringify(s.VM_QUOTA)),$(".provision_info_vdc_user_name",e).text(s.NAME),$(".provision-pricing-table_user_info",e).html(""),u.initEmptyQuotas(s),$.isEmptyObject(s.VM_QUOTA))quotas=u.quotaFloatInfo(0,0,null,!0),$(".provision-pricing-table_user_info",e).append('<li class="provision-bullet-item text-left"><i class="fa fa-fw fa-th"></i> '+l.tr("VMs")+'<span class="right">'+quotas.str+'</span></li><li class="provision-bullet-item text-left"><div class="progress small radius" style="background: #f7f7f7">  <span class="meter" style="width: '+quotas.percentage+'%;"></span></div></li>'),quotas=u.quotaFloatInfo(0,0,null,!0),$(".provision-pricing-table_user_info",e).append('<li class="provision-bullet-item text-left"><i class="fa fa-fw fa-tachometer"></i> '+l.tr("CPU")+'<span class="right">'+quotas.str+'</span></li><li class="provision-bullet-item text-left"><div class="progress small radius" style="background: #f7f7f7">  <span class="meter" style="width: '+quotas.percentage+'%;"></span></div></li>'),quotas=u.quotaMBInfo(0,0,null,!0),$(".provision-pricing-table_user_info",e).append('<li class="provision-bullet-item text-left"><i class="fa fa-fw fa-align-left"></i> '+l.tr("Memory")+'<span class="right">'+quotas.str+'</span></li><li class="provision-bullet-item text-left"><div class="progress small radius" style="background: #f7f7f7">  <span class="meter" style="width: '+quotas.percentage+'%;"></span></div></li>');else{var i=h.default_quotas(s.DEFAULT_USER_QUOTAS);quotas=u.quotaFloatInfo(s.VM_QUOTA.VM.VMS_USED,s.VM_QUOTA.VM.VMS,i.VM_QUOTA.VM.VMS,!0),$(".provision-pricing-table_user_info",e).append('<li class="provision-bullet-item text-left"><i class="fa fa-fw fa-th"></i> '+l.tr("VMs")+'<span class="right">'+quotas.str+'</span></li><li class="provision-bullet-item text-left"><div class="progress small radius" style="background: #f7f7f7">  <span class="meter" style="width: '+quotas.percentage+'%;"></span></div></li>'),quotas=u.quotaFloatInfo(s.VM_QUOTA.VM.CPU_USED,s.VM_QUOTA.VM.CPU,i.VM_QUOTA.VM.CPU,!0),$(".provision-pricing-table_user_info",e).append('<li class="provision-bullet-item text-left"><i class="fa fa-fw fa-tachometer"></i> '+l.tr("CPU")+'<span class="right">'+quotas.str+'</span></li><li class="provision-bullet-item text-left"><div class="progress small radius" style="background: #f7f7f7">  <span class="meter" style="width: '+quotas.percentage+'%;"></span></div></li>'),quotas=u.quotaMBInfo(s.VM_QUOTA.VM.MEMORY_USED,s.VM_QUOTA.VM.MEMORY,i.VM_QUOTA.VM.MEMORY,!0),$(".provision-pricing-table_user_info",e).append('<li class="provision-bullet-item text-left"><i class="fa fa-fw fa-align-left"></i> '+l.tr("Memory")+'<span class="right">'+quotas.str+'</span></li><li class="provision-bullet-item text-left"><div class="progress small radius" style="background: #f7f7f7">  <span class="meter" style="width: '+quotas.percentage+'%;"></span></div></li>')}$(".provision-user-resource-header",e).html('<span class="provision_vdc_user_info_show_vms button medium radius" data-tooltip title="'+l.tr("User Virtual Machines")+'" style="margin-right: 10px"><i class="fa fa-th fa-lg"></i></span><span class="provision_vdc_user_info_show_templates button medium radius" data-tooltip title="'+l.tr("User Saved Templates")+'" style="margin-right: 10px"><i class="fa fa-save fa-lg"></i></span><span class="provision_vdc_user_info_show_flows button medium radius" data-tooltip title="'+l.tr("User Services")+'" style="margin-right: 10px"><i class="fa fa-cubes fa-lg"></i></span><span class="provision_vdc_user_info_show_acct button medium radius" data-tooltip title="'+l.tr("User Accounting")+'" style="margin-right: 10px"><i class="fa fa-bar-chart-o fa-lg"></i></span>'+(c.isFeatureEnabled("showback")?'<span class="provision_vdc_user_info_show_showback button medium radius" data-tooltip title="'+l.tr("User Showback")+'" style="margin-right: 10px"><i class="fa fa-money fa-lg"></i></span>':""));var r=Math.floor((new Date).getTime()/1e3);r-=604800;var p=-1,m={start_time:r,end_time:p,userfilter:t},_=!0;o.VM.accounting({success:function(t,a){f.fillAccounting($(".dashboard_vm_accounting",e),t,a,_)},error:d.onError,data:m}),$(".provision_info_vdc_user",e).show(),$(".provision_info_vdc_user_loading",e).hide(),$(document).foundation()}})}$(".provision_list_users",t).on("click",".provision_info_user_button",function(){$("a.provision_show_user_accordion",t).trigger("click");var a=$(this).parents(".provision-pricing-table").attr("opennebula_id");e(a,t)}),t.on("click",".provision_vdc_user_info_show_vms",function(){$(".provision_vdc_info_container",t).html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa  fa-spinner fa-spin fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999"></span></div>'),b.generate($(".provision_vdc_info_container",t),{title:$(".provision_info_vdc_user",t).attr("uname")+" "+l.tr("VMs"),active:!0,refresh:!0,create:!1,filter:!1,filter_expression:$(".provision_info_vdc_user",t).attr("opennebula_id")})}),t.on("click",".provision_vdc_user_info_show_templates",function(){$(".provision_vdc_info_container",t).html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa  fa-spinner fa-spin fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999"></span></div>'),v.generate($(".provision_vdc_info_container",t),{title:$(".provision_info_vdc_user",t).attr("uname")+" "+l.tr("Templates"),active:!0,refresh:!0,create:!1,filter:!1,filter_expression:$(".provision_info_vdc_user",t).attr("opennebula_id")})}),t.on("click",".provision_vdc_user_info_show_flows",function(){$(".provision_vdc_info_container",t).html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa  fa-spinner fa-spin fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999"></span></div>'),g.generate($(".provision_vdc_info_container",t),{title:$(".provision_info_vdc_user",t).attr("uname")+" "+l.tr("Services"),active:!0,refresh:!0,create:!1,filter:!1,filter_expression:$(".provision_info_vdc_user",t).attr("opennebula_id")})}),t.on("click",".provision_vdc_user_info_show_acct",function(){$(".provision_vdc_info_container",t).html(""),$(".provision_vdc_info_container",t).html(f.html()),f.setup($(".provision_vdc_info_container",t),{fixed_user:$(".provision_info_vdc_user",t).attr("opennebula_id"),init_group_by:"vm"}),$(".provision_vdc_info_container",t).prepend('<h2 class="subheader">'+$(".provision_info_vdc_user",t).attr("uname")+" "+l.tr("Accounting")+"</h2>")}),c.isFeatureEnabled("showback")&&t.on("click",".provision_vdc_user_info_show_showback",function(){$(".provision_vdc_info_container",t).html(""),$(".provision_vdc_info_container",t).html(m.html()),m.setup($(".provision_vdc_info_container",t),{fixed_user:$(".provision_info_vdc_user",t).attr("opennebula_id"),fixed_group:""}),$(".provision_vdc_info_container",t).prepend('<h2 class="subheader">'+$(".provision_info_vdc_user",t).attr("uname")+" "+l.tr("Showback")+"</h2>")}),t.on("click",".provision_vdc_user_delete_confirm_button",function(){$(".provision_vdc_user_confirm_action",t).html('<div data-alert class="alert-box secondary radius"><div class="row"><div class="large-10 large-centered columns"><span style="font-size: 14px; line-height: 20px">'+l.tr("Be careful, this action will inmediately remove the User from OpenNebula")+'</span></div></div><br><div class="row"><div class="large-10 large-centered columns"><a href"#" class="provision_delete_button alert button large-12 large radius">'+l.tr("Delete User")+'</a></div></div><a href="#" class="close" style="top: 20px">&times;</a></div>')}),t.on("click",".provision_vdc_user_password_confirm_button",function(){$(".provision_vdc_user_confirm_action",t).html('<div data-alert class="alert-box secondary radius"><div class="row"><div class="large-10 large-centered columns"><input type="password" class="provision_vdc_user_new_password provision-input" placeholder="'+l.tr("New Password")+'" style="height: 40px !important; font-size: 16px; padding: 0.5rem  !important;"/></div></div><div class="row"><div class="large-10 large-centered columns"><input type="password" class="provision_vdc_user_new_confirm_password provision-input" placeholder="'+l.tr("Confirm Password")+'" style="height: 40px !important; font-size: 16px; padding: 0.5rem  !important;"/><br></div></div><div class="row"><div class="large-10 large-centered columns"><button href"#" type="submit" class="provision_vdc_user_change_password_button button success large radius large-12 small-12">'+l.tr("Update Password")+'</button></div></div><a href="#" class="close" style="top: 20px">&times;</a></div>'),t.on("click",".provision_vdc_user_change_password_button",function(){var a=$(this);a.attr("disabled","disabled");var n=$(".provision_info_vdc_user",t).attr("opennebula_id"),s=$(".provision_vdc_user_new_password",t).val(),i=$(".provision_vdc_user_new_confirm_password",t).val();return s.length?s!==i?(d.notifyError(l.tr("Passwords do not match")),!1):(o.User.passwd({data:{id:n,extra_param:s},success:function(){e(n,t),a.removeAttr("disabled")},error:function(t,e){d.onError(t,e),a.removeAttr("disabled")}}),!1):(d.notifyError(l.tr("Fill in a new password")),!1)})}),t.on("click",".provision_vdc_user_quota_confirm_button",function(){$(".provision_vdc_user_confirm_action",t).html('<div data-alert class="alert-box secondary radius">'+y()+'<br><br><div class="row"><div class="large-10 large-centered columns"><a href"#" class="provision_update_quota_button success large button large-12 radius" style="margin-right: 15px">'+l.tr("Update User Quota")+'</a></div></div><a href="#" class="close" style="top: 20px">&times;</a></div>'),_.setup(t),$(document).foundation();var e=$(".provision_info_vdc_user",t).attr("quotas");if(e){var a=JSON.parse(e),n=p.QUOTA_LIMIT_DEFAULT,s=p.QUOTA_LIMIT_DEFAULT,i=p.QUOTA_LIMIT_DEFAULT;void 0!=a.VM&&(n=a.VM.VMS,s=a.VM.CPU,i=a.VM.MEMORY,i!=p.QUOTA_LIMIT_UNLIMITED&&i!=p.QUOTA_LIMIT_DEFAULT&&(i=a.VM.MEMORY/1024));var r=function(t,e,a){switch(t){case p.QUOTA_LIMIT_DEFAULT:e.val("default").change(),a.val("").change();break;case p.QUOTA_LIMIT_UNLIMITED:e.val("unlimited").change(),a.val("").change();break;default:e.val("edit").change(),a.val(t).change()}};r(n,$("div.provision_rvms_quota select.provision_quota_select",t),$(".provision_rvms_quota_input",t)),r(s,$("div.provision_cpu_quota select.provision_quota_select",t),$(".provision_cpu_quota_input",t)),r(i,$("div.provision_memory_quota select.provision_quota_select",t),$(".provision_memory_quota_tmp_input",t))}}),t.on("click",".provision_delete_button",function(){var e=$(this);e.attr("disabled","disabled");var a=$(".provision_info_vdc_user",t).attr("opennebula_id");o.User.del({data:{id:a},success:function(){$(".provision_back",t).click(),$(".provision_users_list_refresh_button",t).click(),e.removeAttr("disabled")},error:function(t,a){d.onError(t,a),e.removeAttr("disabled")}})}),t.on("click",".provision_update_quota_button",function(){var a=$(this);a.attr("disabled","disabled");var n=$(".provision_info_vdc_user",t).attr("opennebula_id");quota_json=_.retrieve(t),o.User.set_quota({data:{id:n,extra_param:quota_json},success:function(){e(n,t),a.removeAttr("disabled")},error:function(t,e){d.onError(t,e),a.removeAttr("disabled")}})}),t.on("click",".provision_refresh_info",function(){var a=$(".provision_info_vdc_user",t).attr("opennebula_id");return e(a,t),!1})}t("foundation.alert");var o=t("opennebula"),l=t("utils/locale"),c=t("sunstone-config"),d=t("utils/notifier"),u=t("utils/quotas/quota-widgets"),p=t("utils/quotas/quota-limits"),h=t("utils/quotas/quota-defaults"),f=t("utils/accounting"),m=t("utils/showback"),_=t("./quota-widget"),b=t("tabs/provision-tab/vms/list"),v=t("tabs/provision-tab/templates/list"),g=t("tabs/provision-tab/flows/list"),y=t("hbs!./quota-widget/html"),w=t("hbs!./list"),T=0;return{generate:a,show:e}}),define("hbs!tabs/provision-tab/vms/create",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<form id="provision_create_vm" class="hidden section_content">\n  <div class="row">\n    <div class="large-10 large-centered columns">\n      <h2 class="subheader">'+i((e.tr||t&&t.tr||s).call(t,"Create Virtual Machine",{name:"tr",hash:{},data:n}))+'</h2>\n      <br></div>\n  </div>\n  <div class="row">\n    <div class="large-8 large-centered columns">\n      <input type="text" id="vm_name"  class="provision-input" placeholder="'+i((e.tr||t&&t.tr||s).call(t,"Virtual Machine Name",{name:"tr",hash:{},data:n}))+'" style="height: 40px !important; font-size: 16px; padding: 0.5rem  !important;"/>\n      <br></div>\n  </div>\n  <div class="row">\n    <div class="large-10 large-centered columns">\n      <dl class="accordion provision_accordion_template" data-accordion="provision_accordion_template">\n        <dd style="border-bottom: 1px solid #efefef;" class="active accordion-navigation">\n          <a href="#provision_dd_template" style="background: #fff; font-size: 30px">\n            <span class="select_template" style="color:#555">'+i((e.tr||t&&t.tr||s).call(t,"Select a Template",{name:"tr",hash:{},data:n}))+'</span>\n            <span class="selected_template" style="display:none; color:#555">\n              <span class="provision-logo selected_template_logo" style="line-height: 80px"></span>\n              <span class="selected_template_name"></span>\n              <span class="has-tip right" style="cursor: pointer; margin-right:10px; line-height: 80px"> <i class="fa fa-pencil"/></span>\n            </span>\n          </a>\n          <div id="provision_dd_template" class="active content">\n            <div class="row provision_select_template">\n              <div class="large-12 large-centered columns">\n                <dl class="tabs text-center" data-tab style="width: 100%">\n                  <dd class="active" style="width: 33%;">\n                    <a href="#provision_system_templates_selector">'+i((e.tr||t&&t.tr||s).call(t,"System",{name:"tr",hash:{},data:n}))+'</a>\n                  </dd>\n                  <dd style="width: 33%;">\n                    <a href="#provision_vdc_templates_selector">'+i((e.tr||t&&t.tr||s).call(t,"Group",{name:"tr",hash:{},data:n}))+'</a>\n                  </dd>\n                  <dd style="width: 34%;">\n                    <a href="#provision_saved_templates_selector">'+i((e.tr||t&&t.tr||s).call(t,"Saved",{name:"tr",hash:{},data:n}))+'</a>\n                  </dd>\n                </dl>\n                <div class="row">\n                  <div class="large-12 large-centered columns">\n                    <h3 class="subheader text-right">\n                      <input type="search" class="provision-search-input right" placeholder="Search" id="provision_create_template_search"/>\n                    </h3>\n                    <br></div>\n                </div>\n                <div class="tabs-content">\n                  <div class="content active" id="provision_system_templates_selector">\n                    <table id="provision_system_templates_table">\n                      <thead class="hidden">\n                        <tr>\n                          <th>'+i((e.tr||t&&t.tr||s).call(t,"ID",{name:"tr",hash:{},data:n}))+"</th>\n                          <th>"+i((e.tr||t&&t.tr||s).call(t,"Name",{name:"tr",hash:{},data:n}))+"</th>\n                          <th>"+i((e.tr||t&&t.tr||s).call(t,"Saved",{name:"tr",hash:{},data:n}))+'</th>\n                        </tr>\n                      </thead>\n                      <tbody class="hidden"></tbody>\n                    </table>\n                  </div>\n                  <div class="content" id="provision_vdc_templates_selector">\n                    <table id="provision_vdc_templates_table">\n                      <thead class="hidden">\n                        <tr>\n                          <th>'+i((e.tr||t&&t.tr||s).call(t,"ID",{name:"tr",hash:{},data:n}))+"</th>\n                          <th>"+i((e.tr||t&&t.tr||s).call(t,"Name",{name:"tr",hash:{},data:n}))+"</th>\n                          <th>"+i((e.tr||t&&t.tr||s).call(t,"Saved",{name:"tr",hash:{},data:n}))+"</th>\n                          <th>"+i((e.tr||t&&t.tr||s).call(t,"Shared",{name:"tr",hash:{},data:n}))+'</th>\n                        </tr>\n                      </thead>\n                      <tbody class="hidden"></tbody>\n                    </table>\n                  </div>\n                  <div class="content" id="provision_saved_templates_selector">\n                    <table id="provision_saved_templates_table">\n                      <thead class="hidden">\n                        <tr>\n                          <th>'+i((e.tr||t&&t.tr||s).call(t,"ID",{name:"tr",hash:{},data:n}))+"</th>\n                          <th>"+i((e.tr||t&&t.tr||s).call(t,"Name",{name:"tr",hash:{},data:n}))+"</th>\n                          <th>"+i((e.tr||t&&t.tr||s).call(t,"Saved",{name:"tr",hash:{},data:n}))+"</th>\n                          <th>"+i((e.tr||t&&t.tr||s).call(t,"Shared",{name:"tr",hash:{},data:n}))+'</th>\n                        </tr>\n                      </thead>\n                      <tbody class="hidden"></tbody>\n                    </table>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </dd>\n      </dl>\n    </div>\n  </div>\n  <br>\n  <br>\n  <div class="row">\n    <div class="large-10 large-centered columns">\n      <div class="provision_capacity_selector"></div>\n      <br>\n      <br>\n      <div class="provision_network_selector"></div>\n      <br>\n      <br>\n      <div class="provision_custom_attributes_selector"></div>\n    </div>\n  </div>\n  <br>\n  <br>\n  <br>\n  <div class="row">\n    <div class="large-7 columns large-centered">\n      <div data-alert class="alert-box alert-box-error radius text-center hidden"></div>\n      <button href="#" class="button large success radius large-12 small-12" type="submit" style="height: 59px">'+i((e.tr||t&&t.tr||s).call(t,"Create",{name:"tr",hash:{},data:n}))+"</button>\n    </div>\n  </div>\n  <br>\n  <br></form>"},useData:!0});return e.registerPartial("tabs/provision-tab/vms/create",a),e.registerPartial("tabs/provision-tab/vms/create",a),a}),define("templates/helpers/isFeatureEnabled",["require","hbs/handlebars","sunstone-config"],function(t){var e=t("hbs/handlebars"),a=t("sunstone-config"),n=function(t,e){return a.isFeatureEnabled(t)?e.fn(this):e.inverse(this)};return e.registerHelper("isFeatureEnabled",n),n}),define("hbs!tabs/provision-tab/group/info",["hbs","hbs/handlebars","templates/helpers/tr","templates/helpers/isFeatureEnabled"],function(t,e){var a=e.template({1:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'  <div class="row">\n    <div class="large-11 large-centered columns">\n      <h3 class="subheader text-right">\n        <span class="left">'+i((e.tr||t&&t.tr||s).call(t,"Group Showback",{name:"tr",hash:{},data:n}))+'</span>\n      </h3>\n    </div>\n  </div>\n  <br>\n  <div class="row">\n    <div  id="provision_info_vdc_group_showback" class="large-10 large-centered columns"></div>\n  </div>\n  <br>\n'
},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o='<div id="provision_manage_vdc" class="hidden section_content">\n  <div class="row">\n    <div class="large-11 large-centered columns">\n      <h3 class="subheader text-right">\n        <span class="left">'+r((e.tr||t&&t.tr||i).call(t,"Group Accounting",{name:"tr",hash:{},data:n}))+'</span>\n      </h3>\n    </div>\n  </div>\n  <br>\n  <div class="row">\n    <div  id="provision_info_vdc_group_acct" class="large-10 large-centered columns"></div>\n  </div>\n  <br>\n';return s=(e.isFeatureEnabled||t&&t.isFeatureEnabled||i).call(t,"showback",{name:"isFeatureEnabled",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(o+=s),o+'  <div class="row">\n    <div class="large-11 large-centered columns">\n      <h3 class="subheader text-right">\n        <span class="left">'+r((e.tr||t&&t.tr||i).call(t,"Group Quotas",{name:"tr",hash:{},data:n}))+'</span>\n      </h3>\n    </div>\n  </div>\n  <br>\n  <div class="row">\n    <div class="large-11 columns large-centered quotas" id="provision_vdc_quotas_div"></div>\n  </div>\n</div>'},useData:!0});return e.registerPartial("tabs/provision-tab/group/info",a),e.registerPartial("tabs/provision-tab/group/info",a),a}),define("hbs!tabs/provision-tab/users/create",["hbs","hbs/handlebars","hbs!tabs/provision-tab/users/quota-widget/html","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o='<form id="provision_create_user" class="hidden section_content">\n  <div class="row">\n    <div class="large-10 large-centered columns">\n      <h2 class="subheader">'+r((e.tr||t&&t.tr||i).call(t,"Create User",{name:"tr",hash:{},data:n}))+'</h2>\n      <br></div>\n  </div>\n  <div class="row">\n    <div class="large-8 large-centered columns">\n      <input type="text" id="username"  class="provision-input" placeholder="'+r((e.tr||t&&t.tr||i).call(t,"Username",{name:"tr",hash:{},data:n}))+'" style="height: 40px !important; font-size: 16px; padding: 0.5rem  !important;"/>\n      <br></div>\n  </div>\n  <div class="row">\n    <div class="large-8 large-centered columns">\n      <input type="password" id="password"  class="provision-input" placeholder="'+r((e.tr||t&&t.tr||i).call(t,"Password",{name:"tr",hash:{},data:n}))+'" style="height: 40px !important; font-size: 16px; padding: 0.5rem  !important;"/>\n      <br></div>\n  </div>\n  <div class="row">\n    <div class="large-8 large-centered columns">\n      <input type="password" id="repeat_password"  class="provision-input" placeholder="'+r((e.tr||t&&t.tr||i).call(t,"Repeat Password",{name:"tr",hash:{},data:n}))+'" style="height: 40px !important; font-size: 16px; padding: 0.5rem  !important;"/>\n      <br></div>\n  </div>\n  <div class="row">\n    <div class="large-10 large-centered columns">\n      <h3 class="subheader text-right">\n        <span class="left">'+r((e.tr||t&&t.tr||i).call(t,"Define Quotas",{name:"tr",hash:{},data:n}))+'</span>\n      </h3>\n      <br></div>\n  </div>\n  <br>\n  <div class="row">\n    <div class="large-8 large-centered columns">\n      <dl class="tabs text-center" data-tab style="width: 100%">\n        <dd class="active" style="width: 50%;">\n          <a href="#provision_create_user_default_quota">'+r((e.tr||t&&t.tr||i).call(t,"Default",{name:"tr",hash:{},data:n}))+'</a>\n        </dd>\n        <dd style="width: 50%;">\n          <a href="#provision_create_user_manual_quota">'+r((e.tr||t&&t.tr||i).call(t,"Manual",{name:"tr",hash:{},data:n}))+'</a>\n        </dd>\n      </dl>\n      <div class="tabs-content">\n        <div class="content active" id="provision_create_user_default_quota">\n          <div class="row">\n            <div class="large-12 large-centered columns">\n              <span style="font-size: 18px; color: #999">\n                '+r((e.tr||t&&t.tr||i).call(t,"Use the default system quotas set by the cloud adminstrator",{name:"tr",hash:{},data:n}))+'\n              </span>\n            </div>\n          </div>\n        </div>\n        <div class="content" id="provision_create_user_manual_quota">';return s=this.invokePartial(a["tabs/provision-tab/users/quota-widget/html"],"","tabs/provision-tab/users/quota-widget/html",t,void 0,e,a,n),null!=s&&(o+=s),o+'</div>\n      </div>\n    </div>\n  </div>\n  <br>\n  <br>\n  <div class="row">\n    <div class="large-5 large-centered columns">\n      <hr>\n      <br></div>\n  </div>\n  <div class="row">\n    <div class="large-7 columns large-centered">\n      <div data-alert class="alert-box alert-box-error radius text-center hidden"></div>\n      <button href="#" class="button large radius large-12 small-12" type="submit">'+r((e.tr||t&&t.tr||i).call(t,"Add User",{name:"tr",hash:{},data:n}))+"</button>\n    </div>\n  </div>\n  <br></form>"},usePartial:!0,useData:!0});return e.registerPartial("tabs/provision-tab/users/create",a),e.registerPartial("tabs/provision-tab/users/create",a),a}),define("hbs!tabs/provision-tab/flows/create",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<form id="provision_create_flow" class="hidden section_content">\n  <div class="row">\n    <div class="large-10 large-centered columns">\n      <h2 class="subheader">'+i((e.tr||t&&t.tr||s).call(t,"Create Service",{name:"tr",hash:{},data:n}))+'</h2>\n      <br></div>\n  </div>\n  <div class="row">\n    <div class="large-8 large-centered columns">\n      <input type="text" id="flow_name"  class="provision-input" placeholder="'+i((e.tr||t&&t.tr||s).call(t,"Service Name",{name:"tr",hash:{},data:n}))+'" style="height: 40px !important; font-size: 16px; padding: 0.5rem  !important;"/>\n    </div>\n  </div>\n  <div class="row">\n    <div class="large-10 large-centered columns">\n      <dl class="accordion provision_accordion_flow_template" data-accordion="provision_accordion_flow_template">\n        <dd style="border-bottom: 1px solid #efefef;" class="active accordion-navigation">\n          <a href="#provision_dd_flow_template" style="background: #fff; font-size: 30px">\n            <span class="select_template" style="color:#555">'+i((e.tr||t&&t.tr||s).call(t,"Select a Template",{name:"tr",hash:{},data:n}))+'</span>\n            <span class="selected_template" style="display:none; color:#555">\n              <span class="provision-logo selected_template_logo" style="color:#555"></span>\n              <span class="selected_template_name" style="color:#555"></span>\n              <span class="has-tip right" style="cursor: pointer; margin-right:10px;"> <i class="fa fa-pencil"/></span>\n            </span>\n          </a>\n          <div id="provision_dd_flow_template" class="provision_select_flow_template active content">\n            <div class="row">\n              <div class="large-12 large-centered columns">\n                <h3 class="subheader text-right">\n                  <input type="search" class="provision-search-input right" placeholder="Search" id="provision_create_flow_template_search"/>\n                </h3>\n                <br></div>\n            </div>\n            <div class="row">\n              <div class="large-12 large-centered columns">\n                <table id="provision_flow_templates_table">\n                  <thead class="hidden">\n                    <tr>\n                      <th>'+i((e.tr||t&&t.tr||s).call(t,"ID",{name:"tr",hash:{},data:n}))+"</th>\n                      <th>"+i((e.tr||t&&t.tr||s).call(t,"Name",{name:"tr",hash:{},data:n}))+'</th>\n                    </tr>\n                  </thead>\n                  <tbody class="hidden"></tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        </dd>\n      </dl>\n    </div>\n  </div>\n  <br>\n  <br>\n  <br>\n  <div class="row">\n    <div class="provision_network_selector large-9 large-centered columns"></div>\n  </div>\n  <br>\n  <div class="row">\n    <div class="provision_custom_attributes_selector large-9 large-centered columns"></div>\n  </div>\n  <div id="provision_customize_flow_template" style="display: none"></div>\n  <br>\n  <br>\n  <div class="row">\n    <div class="large-7 columns large-centered">\n      <div data-alert class="alert-box alert-box-error radius text-center hidden"></div>\n      <button href="#" class="button large success radius large-12 small-12" type="submit" style="height: 59px">'+i((e.tr||t&&t.tr||s).call(t,"Create",{name:"tr",hash:{},data:n}))+"</button>\n    </div>\n  </div>\n  <br>\n  <br></form>"},useData:!0});return e.registerPartial("tabs/provision-tab/flows/create",a),e.registerPartial("tabs/provision-tab/flows/create",a),a}),define("hbs!tabs/provision-tab/content",["hbs","hbs/handlebars","hbs!tabs/provision-tab/vms/create","hbs!tabs/provision-tab/group/info","hbs!tabs/provision-tab/users/create","hbs!tabs/provision-tab/flows/create","templates/helpers/isTabPanelEnabled"],function(t,e){var a=e.template({1:function(){return'<div class="provision_templates_list_section hidden section_content"></div>\n'},3:function(t,e,a,n){var s,i="";return s=this.invokePartial(a["tabs/provision-tab/group/info"],"","tabs/provision-tab/group/info",t,void 0,e,a,n),null!=s&&(i+=s),s=this.invokePartial(a["tabs/provision-tab/users/create"],"","tabs/provision-tab/users/create",t,void 0,e,a,n),null!=s&&(i+=s),i+'<div class="provision_users_list_section hidden section_content"></div>\n'},5:function(t,e,a,n){var s,i="";return s=this.invokePartial(a["tabs/provision-tab/flows/create"],"","tabs/provision-tab/flows/create",t,void 0,e,a,n),null!=s&&(i+=s),i+'<div class="provision_flows_list_section hidden section_content"></div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r='<div id="provision_dashboard" class="section_content"></div>\n\n';return s=this.invokePartial(a["tabs/provision-tab/vms/create"],"","tabs/provision-tab/vms/create",t,void 0,e,a,n),null!=s&&(r+=s),r+='<div class="provision_vms_list_section hidden section_content"></div>\n\n',s=(e.isTabPanelEnabled||t&&t.isTabPanelEnabled||i).call(t,"provision-tab","templates",{name:"isTabPanelEnabled",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(r+=s),r+="\n",s=(e.isTabPanelEnabled||t&&t.isTabPanelEnabled||i).call(t,"provision-tab","users",{name:"isTabPanelEnabled",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(r+=s),r+="\n",s=(e.isTabPanelEnabled||t&&t.isTabPanelEnabled||i).call(t,"provision-tab","flows",{name:"isTabPanelEnabled",hash:{},fn:this.program(5,n),inverse:this.noop,data:n}),null!=s&&(r+=s),r},usePartial:!0,useData:!0});return e.registerPartial("tabs/provision-tab/content",a),a}),define("hbs!tabs/provision-tab/header",["hbs","hbs/handlebars","templates/helpers/isTabPanelEnabled","templates/helpers/tr"],function(t,e){var a=e.template({1:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'        <li>\n          <a href"#" class="medium off-color" id="provision_vdc_info_button">\n            <i class="fa fa-fw fa-lg fa-bar-chart-o"/>\n            '+i((e.tr||t&&t.tr||s).call(t,"Group Info",{name:"tr",hash:{},data:n}))+'\n          </a>\n        </li>\n        <li>\n          <a href"#" class="medium off-color provision_users_list_button" id="">\n          <i class="fa fa-fw fa-lg fa-users"/>\n          '+i((e.tr||t&&t.tr||s).call(t,"Users",{name:"tr",hash:{},data:n}))+"\n          </a>\n        </li>\n"},3:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'        <li>\n          <a href"#" class="medium off-color provision_templates_list_button">\n            <i class="fa fa-fw fa-lg fa-save"/>\n            '+i((e.tr||t&&t.tr||s).call(t,"Templates",{name:"tr",hash:{},data:n}))+"\n          </a>\n        </li>\n"},5:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'        <li>\n          <a href"#" class="medium off-color provision_flows_list_button" id="">\n            <i class="fa fa-lg fa-fw fa-cubes"/>\n            '+i((e.tr||t&&t.tr||s).call(t,"Services",{name:"tr",hash:{},data:n}))+"\n          </a>\n        </li>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<div style=" padding: 15px 0px 10px 0px; margin-bottom: 10px">\n  <div class="row">\n    <div class="large-12 columns">\n      <a href="#" class="provision_image_header" >\n        <img src="'+l((i=null!=(i=e.logo||(null!=t?t.logo:t))?i:o,typeof i===r?i.call(t,{name:"logo",hash:{},data:n}):i))+'" style="height:40px; vertical-align:top;"></a>\n      <br>\n      <br>\n      <ul class="inline-list provision-header text-center">\n';return s=(e.isTabPanelEnabled||t&&t.isTabPanelEnabled||o).call(t,"provision-tab","users",{name:"isTabPanelEnabled",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+='        <li>\n          <a href"#" class="medium off-color provision_vms_list_button" id="">\n            <i class="fa fa-fw fa-lg fa-th"/>\n            '+l((e.tr||t&&t.tr||o).call(t,"VMs",{name:"tr",hash:{},data:n}))+"\n          </a>\n        </li>\n",s=(e.isTabPanelEnabled||t&&t.isTabPanelEnabled||o).call(t,"provision-tab","templates",{name:"isTabPanelEnabled",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(c+=s),s=(e.isTabPanelEnabled||t&&t.isTabPanelEnabled||o).call(t,"provision-tab","flows",{name:"isTabPanelEnabled",hash:{},fn:this.program(5,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+"      </ul>\n    </div>\n  </div>\n</div>"},useData:!0});return e.registerPartial("tabs/provision-tab/header",a),a}),define("hbs!tabs/provision-tab/dashboard/quotas",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<div class="row">\n  <div class="large-11 large-centered columns">\n    <h2 class="subheader">'+i((e.tr||t&&t.tr||s).call(t,"Quotas",{name:"tr",hash:{},data:n}))+'</h2>\n    <br></div>\n</div>\n<div class="row">\n  <div class="large-10 large-centered columns">\n    <div class="row">\n      <div class="large-4 columns text-center">\n        <span id="provision_dashboard_rvms_percentage"  style="font-size:50px">0</span>\n        <span style="font-size:20px; color: #999">%</span></div>\n        <div class="large-4 columns text-center">\n          <span id="provision_dashboard_cpu_percentage"  style="font-size:50px">0</span>\n          <span style="font-size:20px; color: #999">%</span></div>\n          <div class="large-4 columns text-center">\n            <span id="provision_dashboard_memory_percentage"  style="font-size:50px">0</span>\n            <span style="font-size:20px; color: #999">%</span></div>\n          </div>\n          <div class="row">\n            <div class="large-4 columns text-center">\n              <div class="progress large radius">\n                <span id="provision_dashboard_rvms_meter" class="meter"></span>\n              </div>\n            </div>\n            <div class="large-4 columns text-center">\n              <div class="progress large radius">\n                <span id="provision_dashboard_cpu_meter" class="meter"></span>\n              </div>\n            </div>\n            <div class="large-4 columns text-center">\n              <div class="progress large radius">\n                <span id="provision_dashboard_memory_meter" class="meter"></span>\n              </div>\n            </div>\n          </div>\n          <div class="row">\n            <div class="large-4 columns text-center">\n              <span>'+i((e.tr||t&&t.tr||s).call(t,"RUNNING VMS",{name:"tr",hash:{},data:n}))+'</span>\n              <br>\n              <span id="provision_dashboard_rvms_str" style="color: #999; font-size: 14px;"></span>\n            </div>\n            <div class="large-4 columns text-center">\n              <span>'+i((e.tr||t&&t.tr||s).call(t,"CPU",{name:"tr",hash:{},data:n}))+'</span>\n              <br>\n              <span id="provision_dashboard_cpu_str" style="color: #999; font-size: 14px;"></span>\n            </div>\n            <div class="large-4 columns text-center">\n              <span>'+i((e.tr||t&&t.tr||s).call(t,"MEMORY",{name:"tr",hash:{},data:n}))+'</span>\n              <br>\n              <span id="provision_dashboard_memory_str" style="color: #999; font-size: 14px;"></span>\n            </div>\n          </div>\n        </div>\n      </div>\n      <br>\n      <br>'},useData:!0});return e.registerPartial("tabs/provision-tab/dashboard/quotas",a),a}),define("hbs!tabs/provision-tab/dashboard/vdc-quotas",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<div class="row">\n  <div class="large-12 large-centered columns">\n    <h3 class="subheader">'+i((e.tr||t&&t.tr||s).call(t,"Group Quotas",{name:"tr",hash:{},data:n}))+'</h3>\n    <br></div>\n</div>\n<div class="row">\n  <div class="large-12 large-centered columns">\n    <div class="row">\n      <div class="large-4 columns text-center">\n        <span id="provision_dashboard_vdc_rvms_percentage" style="font-size:50px">0</span>\n        <span style="font-size:20px; color: #999">%</span>\n      </div>\n      <div class="large-4 columns text-center">\n        <span id="provision_dashboard_vdc_cpu_percentage" style="font-size:50px">0</span>\n        <span style="font-size:20px; color: #999">%</span>\n      </div>\n      <div class="large-4 columns text-center">\n        <span id="provision_dashboard_vdc_memory_percentage" style="font-size:50px">0</span>\n        <span style="font-size:20px; color: #999">%</span>\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-4 columns text-center">\n        <div class="progress large radius">\n          <span id="provision_dashboard_vdc_rvms_meter" class="meter"></span>\n        </div>\n      </div>\n      <div class="large-4 columns text-center">\n        <div class="progress large radius">\n          <span id="provision_dashboard_vdc_cpu_meter" class="meter"></span>\n        </div>\n      </div>\n      <div class="large-4 columns text-center">\n        <div class="progress large radius">\n          <span id="provision_dashboard_vdc_memory_meter" class="meter"></span>\n        </div>\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-4 columns text-center">\n        <span>'+i((e.tr||t&&t.tr||s).call(t,"RUNNING VMS",{name:"tr",hash:{},data:n}))+'</span>\n        <br>\n        <span id="provision_dashboard_vdc_rvms_str" style="color: #999; font-size: 14px;"></span>\n      </div>\n      <div class="large-4 columns text-center">\n        <span>'+i((e.tr||t&&t.tr||s).call(t,"CPU",{name:"tr",hash:{},data:n}))+'</span>\n        <br>\n        <span id="provision_dashboard_vdc_cpu_str" style="color: #999; font-size: 14px;"></span>\n      </div>\n      <div class="large-4 columns text-center">\n        <span>'+i((e.tr||t&&t.tr||s).call(t,"MEMORY",{name:"tr",hash:{},data:n}))+'</span>\n        <br>\n        <span id="provision_dashboard_vdc_memory_str" style="color: #999; font-size: 14px;"></span>\n      </div>\n    </div>\n  </div>\n</div>\n<br>\n<br>'},useData:!0});return e.registerPartial("tabs/provision-tab/dashboard/vdc-quotas",a),a}),define("hbs!tabs/provision-tab/dashboard/empty-graphs",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<span class="fa-stack fa-2x" style="color: #dfdfdf"> <i class="fa fa-cloud fa-stack-2x"></i>\n</span>\n<br>\n<span style="color: #cfcfcf">'+i((e.tr||t&&t.tr||s).call(t,"There is no information available",{name:"tr",hash:{},data:n}))+"</span>"},useData:!0});return e.registerPartial("tabs/provision-tab/dashboard/empty-graphs",a),e.registerPartial("./empty-graphs",a),a}),define("hbs!tabs/provision-tab/dashboard/vms",["hbs","hbs/handlebars","hbs!tabs/provision-tab/dashboard/empty-graphs","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o='<div class="row">\n  <div class="large-11 large-centered columns">\n    <h2 class="subheader">'+r((e.tr||t&&t.tr||i).call(t,"Virtual Machines",{name:"tr",hash:{},data:n}))+'</h2>\n    <br></div>\n</div>\n<div class="row" id="provision_vms_dashboard">\n  <div class="large-11 large-centered columns">\n    <div class="row">\n      <div class="large-4 columns text-center">\n        <br>\n        <div class="row">\n          <div class="large-12 columns">\n            <span  id="provision_dashboard_total" style="font-size:80px"> <i class="fa fa-spinner fa-spin"></i>\n            </span>\n            <br>\n            <span style="color: #999;">'+r((e.tr||t&&t.tr||i).call(t,"TOTAL",{name:"tr",hash:{},data:n}))+'</span>\n          </div>\n        </div>\n        <br>\n        <br>\n        <div class="row">\n          <div class="large-12 columns text-center">\n            <a href"#" class="medium button success large radius provision_create_vm_button" style="margin-left: 5px; margin-right: 5px"> <i class="fa fa-lg fa-plus-square"/></a>\n            <a href"#" class="medium button large radius provision_vms_list_button" style="margin-left: 5px; margin-right: 5px">\n              <i class="fa fa-lg fa-th"/></a>\n          </div>\n        </div>\n        <br>\n        <div class="row">\n          <div class="large-12 columns"></div>\n        </div>\n      </div>\n      <div class="large-2 columns">\n        <div class="row">\n          <div class="large-12 columns text-center">\n            <span id="provision_dashboard_running" style="font-size:40px">\n              <i class="fa fa-spinner fa-spin"></i>\n            </span>\n            <br>\n            <span  style="color: #999; font-size: 14px">'+r((e.tr||t&&t.tr||i).call(t,"RUNNING",{name:"tr",hash:{},data:n}))+'</span>\n          </div>\n        </div>\n        <br>\n        <div class="row">\n          <div class="large-12 columns text-center ">\n            <span id="provision_dashboard_deploying"  style="font-size:40px">\n              <i class="fa fa-spinner fa-spin"></i>\n            </span>\n            <br>\n            <span  style="color: #999; font-size: 14px">'+r((e.tr||t&&t.tr||i).call(t,"DEPLOYING",{name:"tr",hash:{},data:n}))+'</span>\n          </div>\n        </div>\n        <br>\n        <div class="row">\n          <div class="large-12 columns text-center">\n            <span  id="provision_dashboard_off" style="font-size:40px">\n              <i class="fa fa-spinner fa-spin"></i>\n            </span>\n            <br>\n            <span  style="color: #999; font-size: 14px">'+r((e.tr||t&&t.tr||i).call(t,"OFF",{name:"tr",hash:{},data:n}))+'</span>\n          </div>\n        </div>\n        <br>\n        <div class="row">\n          <div class="large-12 columns text-center ">\n            <span  id="provision_dashboard_error" style="font-size:40px">\n              <i class="fa fa-spinner fa-spin"></i>\n            </span>\n            <br>\n            <span  style="color: #999; font-size: 14px">'+r((e.tr||t&&t.tr||i).call(t,"ERROR",{name:"tr",hash:{},data:n}))+'</span>\n          </div>\n        </div>\n      </div>\n      <div class="large-6 columns" id="dashboard_vm_accounting">\n        <input style="display:none;" value="vm" id="acct_group_by"/>\n        <div class="row">\n          <div class="large-12 columns graph_legend">\n            <h3 class="subheader">\n              <small>'+r((e.tr||t&&t.tr||i).call(t,"CPU hours",{name:"tr",hash:{},data:n}))+'</small>\n            </h3>\n          </div>\n          <div class="large-12 columns">\n            <div class="large-12 columns centered graph text-center" id="acct_cpu_graph" style="height: 100px;">';return s=this.invokePartial(a["./empty-graphs"],"","./empty-graphs",t,void 0,e,a,n),null!=s&&(o+=s),o+='</div>\n          </div>\n        </div>\n        <div class="row">\n          <div class="large-12 columns graph_legend">\n            <h3 class="subheader">\n              <small>'+r((e.tr||t&&t.tr||i).call(t,"Memory GB hours",{name:"tr",hash:{},data:n}))+'</small>\n            </h3>\n          </div>\n          <div class="large-12 columns">\n            <div class="large-12 columns centered graph text-center" id="acct_mem_graph" style="height: 100px;">',s=this.invokePartial(a["./empty-graphs"],"","./empty-graphs",t,void 0,e,a,n),null!=s&&(o+=s),o+"</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<br>\n<br>"},usePartial:!0,useData:!0});return e.registerPartial("tabs/provision-tab/dashboard/vms",a),a}),define("hbs!tabs/provision-tab/dashboard/vdc-vms",["hbs","hbs/handlebars","hbs!tabs/provision-tab/dashboard/empty-graphs","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o='<div class="row">\n  <div class="large-12 large-centered columns">\n    <h3 class="subheader">'+r((e.tr||t&&t.tr||i).call(t,"Group Virtual Machines",{name:"tr",hash:{},data:n}))+'</h3>\n    <br></div>\n</div>\n<div class="row" id="provision_vdc_vms_dashboard">\n  <div class="large-12 large-centered columns">\n    <div class="row">\n      <div class="large-4 columns text-center">\n        <br>\n        <div class="row">\n          <div class="large-12 columns">\n            <span  id="provision_dashboard_vdc_total" style="font-size:80px"> <i class="fa fa-spinner fa-spin"></i>\n            </span>\n            <br>\n            <span style="color: #999;">'+r((e.tr||t&&t.tr||i).call(t,"TOTAL",{name:"tr",hash:{},data:n}))+'</span>\n          </div>\n        </div>\n        <br>\n        <br>\n        <div class="row">\n          <div class="large-12 columns text-center">\n            <a href"#" class="medium button success large radius provision_create_vm_button" style="margin-left: 5px; margin-right: 5px"> <i class="fa fa-lg fa-plus-square"/></a>\n            <a href"#" class="medium button large radius provision_vms_list_button" style="margin-left: 5px; margin-right: 5px">\n              <i class="fa fa-lg fa-th"/></a>\n          </div>\n        </div>\n        <br>\n        <div class="row">\n          <div class="large-12 columns"></div>\n        </div>\n      </div>\n      <div class="large-2 columns">\n        <div class="row">\n          <div class="large-12 columns text-center">\n            <span id="provision_dashboard_vdc_running" style="font-size:40px">\n              <i class="fa fa-spinner fa-spin"></i>\n            </span>\n            <br>\n            <span  style="color: #999; font-size: 14px">'+r((e.tr||t&&t.tr||i).call(t,"RUNNING",{name:"tr",hash:{},data:n}))+'</span>\n          </div>\n        </div>\n        <br>\n        <div class="row">\n          <div class="large-12 columns text-center ">\n            <span id="provision_dashboard_vdc_deploying"  style="font-size:40px">\n              <i class="fa fa-spinner fa-spin"></i>\n            </span>\n            <br>\n            <span  style="color: #999; font-size: 14px">'+r((e.tr||t&&t.tr||i).call(t,"DEPLOYING",{name:"tr",hash:{},data:n}))+'</span>\n          </div>\n        </div>\n        <br>\n        <div class="row">\n          <div class="large-12 columns text-center">\n            <span  id="provision_dashboard_vdc_off" style="font-size:40px">\n              <i class="fa fa-spinner fa-spin"></i>\n            </span>\n            <br>\n            <span  style="color: #999; font-size: 14px">'+r((e.tr||t&&t.tr||i).call(t,"OFF",{name:"tr",hash:{},data:n}))+'</span>\n          </div>\n        </div>\n        <br>\n        <div class="row">\n          <div class="large-12 columns text-center ">\n            <span  id="provision_dashboard_vdc_error" style="font-size:40px">\n              <i class="fa fa-spinner fa-spin"></i>\n            </span>\n            <br>\n            <span  style="color: #999; font-size: 14px">'+r((e.tr||t&&t.tr||i).call(t,"ERROR",{name:"tr",hash:{},data:n}))+'</span>\n          </div>\n        </div>\n      </div>\n      <div class="large-6 columns" id="dashboard_vdc_vm_accounting">\n        <input style="display:none;" value="vm" id="acct_group_by"/>\n        <div class="row">\n          <div class="large-12 columns graph_legend">\n            <h3 class="subheader">\n              <small>'+r((e.tr||t&&t.tr||i).call(t,"CPU hours",{name:"tr",hash:{},data:n}))+'</small>\n            </h3>\n          </div>\n          <div class="large-12 columns">\n            <div class="large-12 columns centered graph text-center" id="acct_cpu_graph" style="height: 100px;">';return s=this.invokePartial(a["./empty-graphs"],"","./empty-graphs",t,void 0,e,a,n),null!=s&&(o+=s),o+='</div>\n          </div>\n        </div>\n        <div class="row">\n          <div class="large-12 columns graph_legend">\n            <h3 class="subheader">\n              <small>'+r((e.tr||t&&t.tr||i).call(t,"Memory GB hours",{name:"tr",hash:{},data:n}))+'</small>\n            </h3>\n          </div>\n          <div class="large-12 columns">\n            <div class="large-12 columns centered graph text-center" id="acct_mem_graph" style="height: 100px;">',s=this.invokePartial(a["./empty-graphs"],"","./empty-graphs",t,void 0,e,a,n),null!=s&&(o+=s),o+"</div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<br>\n<br>"},usePartial:!0,useData:!0});return e.registerPartial("tabs/provision-tab/dashboard/vdc-vms",a),a}),define("hbs!tabs/provision-tab/dashboard/users",["hbs","hbs/handlebars","hbs!tabs/provision-tab/dashboard/empty-graphs","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o='    <div class="row">\n      <div class="large-11 large-centered columns">\n        <h3 class="subheader">\n          '+r((e.tr||t&&t.tr||i).call(t,"Users",{name:"tr",hash:{},data:n}))+'\n        </h3>\n        <br>\n      </div>\n    </div>\n    <div class="row" id="provision_users_dashboard">\n      <div class="large-12 large-centered columns">\n          <div class="row">\n            <div class="large-4 columns text-center">\n              <br>\n              <div class="row">\n                <div class="large-12 columns">\n                  <span  id="provision_dashboard_users_total" style="font-size:80px">\n                    <i class="fa fa-spinner fa-spin"></i>\n                  </span>\n                  <br>\n                  <span style="color: #999;">'+r((e.tr||t&&t.tr||i).call(t,"TOTAL",{name:"tr",hash:{},data:n}))+'</span>\n                </div>\n              </div>\n              <br>\n              <br>\n              <div class="row">\n                <div class="large-12 columns">\n                  <a href"#" class="medium button large success radius provision_create_user_button" style="margin-left: 5px; margin-right: 5px"><i class="fa fa-lg fa-plus-square"/></a>\n                  <a href"#" class="medium button large radius provision_users_list_button" style="margin-left: 5px; margin-right: 5px"><i class="fa fa-lg fa-users"/></a>\n                </div>\n              </div>\n              <br>\n              <div class="row">\n                <div class="large-12 columns">\n                </div>\n              </div>\n            </div>\n            <div class="large-8 columns" id="dashboard_vdc_user_accounting">\n              <input style="display:none;" value="user" id="acct_group_by"/>\n              <div class="row">\n                <div class="large-12 columns graph_legend">\n                  <h3 class="subheader"><small>'+r((e.tr||t&&t.tr||i).call(t,"CPU hours",{name:"tr",hash:{},data:n}))+'</small></h3>\n                </div>\n                <div class="large-12 columns">\n                  <div class="large-12 columns centered graph text-center" id="acct_cpu_graph" style="height: 100px;">\n';
return s=this.invokePartial(a["./empty-graphs"],"                    ","./empty-graphs",t,void 0,e,a,n),null!=s&&(o+=s),o+='                  </div>\n                </div>\n              </div>\n              <div class="row">\n                <div class="large-12 columns graph_legend">\n                  <h3 class="subheader"><small>'+r((e.tr||t&&t.tr||i).call(t,"Memory GB hours",{name:"tr",hash:{},data:n}))+'</small></h3>\n                </div>\n                <div class="large-12 columns">\n                  <div class="large-12 columns centered graph text-center" id="acct_mem_graph" style="height: 100px;">\n',s=this.invokePartial(a["./empty-graphs"],"                    ","./empty-graphs",t,void 0,e,a,n),null!=s&&(o+=s),o+"                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n      </div>\n    </div>\n    <br>\n    <br>"},usePartial:!0,useData:!0});return e.registerPartial("tabs/provision-tab/dashboard/users",a),a}),define("tabs/provision-tab",["require","foundation.core","foundation.accordion","foundation-datatables","utils/locale","sunstone-config","opennebula","sunstone","utils/notifier","utils/resource-select","utils/quotas/quota-widgets","utils/quotas/quota-defaults","utils/accounting","utils/showback","utils/humanize","utils/quotas/quota-limits","utils/graphs","./provision-tab/users/quota-widget","./provision-tab/vms/list","./provision-tab/templates/list","./provision-tab/users/list","./provision-tab/flows/list","hbs!./provision-tab/content","hbs!./provision-tab/header","hbs!./provision-tab/dashboard/quotas","hbs!./provision-tab/dashboard/vdc-quotas","hbs!./provision-tab/dashboard/vms","hbs!./provision-tab/dashboard/vdc-vms","hbs!./provision-tab/dashboard/users","hbs!./provision-tab/group/info","./provision-tab/tabId"],function(t){function e(t,e){t.off();var a=[];$.each(e,function(t,e){var n=e.split("|"),s={name:t,mandatory:n[0],type:n[1],description:n[2]};switch(n[1]){case"text":a.push(s);break;case"password":a.push(s)}}),a.length>0?(t.html('<br><div class="row"><div class="large-12 large-centered columns"><h3 class="subheader text-right"><span class="left"><i class="fa fa-th fa-gears"></i>&emsp;'+b.tr("Custom Attributes")+'</span></h3><br></div></div><br><div class="provision_custom_attributes"></div><br><br><br>'),$.each(a,function(e,a){$(".provision_custom_attributes",t).append('<br><div class="row"><div class="large-10 large-centered columns"><label style="font-size: 16px"><i class="fa fa-asterisk" style="color:#0099c3"/> '+a.description+'<input type="'+a.type+'" attr_name="'+a.name+'" class="provision_custom_attribute provision-input" style="height: 40px !important; font-size: 16px; padding: 0.5rem  !important;"/></label></div></div>')})):t.html("")}function a(t,e,a){t.off();var n=e.min_vms||1,s=e.max_vms||20;t.html('<br><div class="row"><div class="large-12 large-centered columns"><h3 class="subheader text-right"><span class="left"><i class="fa fa-th fa-lg"></i>&emsp;'+b.tr("Cardinality")+'</span></h3><br></div></div><br><br><div class="row"><div class="large-12 columns"><div class="row"><div class="large-2 text-center columns"><span class="cardinality_value" style="color: #777; font-size:40px">'+e.cardinality+'</span><br><span style="color: #999;">'+b.tr("VMs")+'</span></div><div class="large-6 columns"><div class="cardinality_slider_div"><span class="" style="color: #777;">'+b.tr("Change cardinality")+'</span><br><div class="range-slider radius cardinality_slider" data-slider data-options="start: 1; end: 50;"><span class="range-slider-handle"></span><span class="range-slider-active-segment"></span><input type="hidden"></div><span class="left" style="color: #999;">'+n+'</span><span class="right" style="color: #999;">'+s+'</span></div><div class="cardinality_no_slider_div"><br><br><span class="" style="color: #999;">'+b.tr("The cardinality for this role cannot be changed")+'</span></div></div><div class="large-4 columns text-center provision_create_service_cost_div hidden"><span class="cost_value" style="color: #777; font-size:40px"></span><br><span style="color: #999;">'+b.tr("COST")+" / "+b.tr("HOUR")+"</span></div></div></div></div>");var i=a.VMTEMPLATE.TEMPLATE,r=0;if(i.CPU_COST||i.MEMORY_COST&&v.isFeatureEnabled("showback")){$(".provision_create_service_cost_div").show(),i.CPU&&i.CPU_COST&&(r+=i.CPU*i.CPU_COST,$(".cost_value",t).data("CPU_COST",i.CPU_COST)),i.MEMORY&&i.MEMORY_COST&&(r+=i.MEMORY*i.MEMORY_COST,$(".cost_value",t).data("MEMORY_COST",i.MEMORY_COST)),$(".provision_create_service_cost_div",t).data("cost",r);var o=r*parseInt(e.cardinality);$(".cost_value",t).html(o.toFixed(2))}else $(".provision_create_service_cost_div").hide();s>n?($(".cardinality_slider",t).attr("data-options","start: "+n+"; end: "+s+";"),t.foundation(),$(".cardinality_slider_div",t).show(),$(".cardinality_no_slider_div",t).hide(),$(".cardinality_slider",t).foundation("slider","set_value",e.cardinality),$(".cardinality_slider",t).on("change",function(){$(".cardinality_value",t).html($(this).attr("data-slider"));var e=$(".provision_create_service_cost_div",t).data("cost")*$(this).attr("data-slider");$(".cost_value",t).html(e.toFixed(2))})):($(".cardinality_slider_div",t).hide(),$(".cardinality_no_slider_div",t).show())}function n(t,e){t.off();var a,n;e.MEMORY>1e3?(a=Math.floor(e.MEMORY/1024),n="GB"):(a=e.MEMORY?e.MEMORY:"-",n="MB"),t.html('<br><div class="row"><div class="large-12 large-centered columns"><h3 class="subheader text-right"><span class="left"><i class="fa fa-laptop fa-lg"></i>&emsp;'+b.tr("Capacity")+'</span></h3><br></div></div><br><div class="row"><div class="large-12 large-centered columns"><div class="row text-center"><div class="large-4 columns"><span class="cpu_value" style="color: #777; font-size:60px">'+(e.CPU?e.CPU:"-")+'</span><br><span style="color: #999;">'+b.tr("CPU")+'</span></div><div class="large-4 columns"><span class="memory_value" style="color: #777; font-size:60px">'+a+'</span> <span class="memory_unit" style="color: #777; font-size:30px">'+n+'</span><br><span style="color: #999;">'+b.tr("MEMORY")+'</span></div><div class="large-4 columns provision_create_template_cost_div hidden"><span class="cost_value" style="color: #777; font-size:60px"></span><br><span style="color: #999;">'+b.tr("COST")+" / "+b.tr("HOUR")+"</span></div></div></div></div>"+(v.provision.create_vm.isEnabled("capacity_select")&&"NO"!=e.SUNSTONE_CAPACITY_SELECT?'<br><br><div class="row"><div class="large-12 large-centered columns"><dl class="accordion" data-accordion="provision_accordion_'+z+'"><dd class="accordion-navigation"><a href="#provision_instance_type_dd_'+z+'" class="button large-12 medium radius" style="color: #555;">'+b.tr("Change Capacity")+'</a><div id="provision_instance_type_dd_'+z+'" class="content"><div class="row"><div class="large-12 large-centered columns"><h3 class="subheader text-right"><input type="search" class="provision-search-input right" placeholder="Search"/></h3><br></div></div><div class="row"><div class="large-12 large-centered columns"><table class="provision_instance_types_table"><thead class="hidden"><tr><th>'+b.tr("Name")+'</th></tr></thead><tbody class="hidden"></tbody></table><br></div></div></div></dd></dl></div></div>':"")+"<br>");var s=0;if(e.CPU_COST||e.MEMORY_COST&&v.isFeatureEnabled("showback")?($(".provision_create_template_cost_div").show(),e.CPU&&e.CPU_COST&&(s+=e.CPU*e.CPU_COST,$(".cost_value").data("CPU_COST",e.CPU_COST)),e.MEMORY&&e.MEMORY_COST&&(s+=e.MEMORY*e.MEMORY_COST,$(".cost_value").data("MEMORY_COST",e.MEMORY_COST)),$(".cost_value").html(s.toFixed(2))):$(".provision_create_template_cost_div").hide(),v.provision.create_vm.isEnabled("capacity_select")&&"NO"!=e.SUNSTONE_CAPACITY_SELECT){z+=1;var i=$(".provision_instance_types_table",t).dataTable({iDisplayLength:6,sDom:'<"H">t<"F"lp>',bSort:!1,aLengthMenu:[[6,12,36,72],[6,12,36,72]],aoColumnDefs:[{bVisible:!1,aTargets:["all"]}],aoColumns:[{mDataProp:"name"}],fnPreDrawCallback:function(){return 0==this.$("tr",{filter:"applied"}).length?this.html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa fa-info-circle fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999">'+b.tr("There are no instance_types available. Please contact your cloud administrator")+"</span></div>"):$(".provision_instance_types_table",t).html('<ul class="provision_instance_types_ul large-block-grid-3 medium-block-grid-3 small-block-grid-1 text-center"></ul>'),!0},fnRowCallback:function(e,a){var n=a,s=$('<li><ul class="provision-pricing-table hoverable only-one" cpu="'+n.cpu+'" memory="'+n.memory+'"><li class="provision-title" title="'+n.name+'">'+n.name+'</li><li class="provision-bullet-item"><span style="font-size: 40px"><i class="fa fa-fw fa-laptop"/>&emsp;<span style="vertical-align: middle; font-size:14px">x'+n.cpu+" - "+(n.memory>1e3?Math.floor(n.memory/1024)+"GB":n.memory+"MB")+'</span></span></li><li class="provision-description">'+(n.description||"")+"</li></ul></li>").appendTo($(".provision_instance_types_ul",t));return $(".provision-pricing-table",s).data("opennebula",n),e}});$(".provision-search-input",t).on("keyup",function(){i.fnFilter($(this).val())}),$(".provision-search-input",t).on("change",function(){i.fnFilter($(this).val())}),t.on("click",".provision-pricing-table.only-one",function(){$(".cpu_value",t).html($(this).attr("cpu"));var e,a;if($(this).attr("memory")>1e3?(e=Math.floor($(this).attr("memory")/1024),a="GB"):(e=$(this).attr("memory"),a="MB"),$(".memory_value",t).html(e),$(".memory_unit",t).html(a),v.isFeatureEnabled("showback")){var n=0;$(".cost_value").data("CPU_COST")&&(n+=$(this).attr("cpu")*$(".cost_value").data("CPU_COST")),$(".cost_value").data("MEMORY_COST")&&(n+=$(this).attr("memory")*$(".cost_value").data("MEMORY_COST")),$(".cost_value").html(n.toFixed(2))}$(".accordion a",t).first().trigger("click")}),$(document).foundation(),p(i)}}function s(t,e,a){t.off();var n;n=e?'<span class="selected_network" template_nic=\''+JSON.stringify(e)+'\'><span style="color: #999; font-size: 14px">'+b.tr("INTERFACE")+'</span>&emsp;&emsp;<span style="color: #777;">'+(e.NETWORK||e.NETWORK_ID)+'</span></span><span class="has-tip right provision_remove_nic" style="cursor: pointer;"><i class="fa fa-times"/></span><span class="has-tip right" style="cursor: pointer; margin-right:10px"><i class="fa fa-pencil"/></span>':a?'<span style="color: #777; font-size: 16px">'+a.description+'</span><br><span class="selected_network only-not-active" attr_name=\''+a.name+'\' style="color: #777;"><span style="color: #999; font-size: 14px">'+b.tr("INTERFACE")+'</span>&emsp;&emsp;<span class="button radius small">'+b.tr("Select a Network")+'</span></span><span class="only-active" style="color:#555">'+b.tr("Select a Network for this interface")+'</span><span class="has-tip right only-not-active" style="cursor: pointer; margin-right:10px"><i class="fa fa-pencil"/></span>':'<span class="selected_network only-not-active" style="color: #777;"><span style="color: #999; font-size: 14px">'+b.tr("INTERFACE")+'</span>&emsp;&emsp;<span class="button radius small">'+b.tr("Select a Network")+'</span></span><span class="only-active" style="color:#555">'+b.tr("Select a Network for this interface")+'</span><span class="has-tip right provision_remove_nic" style="cursor: pointer;"><i class="fa fa-times"/></span><span class="has-tip right only-not-active" style="cursor: pointer; margin-right:10px"><i class="fa fa-pencil"/></span>';var s=$('<dd style="border-bottom: 1px solid #efefef;" class="accordion-navigation"><a href="#provision_accordion_dd_'+G+'" style="background: #fff; font-size: 24px">'+n+'</a><div id="provision_accordion_dd_'+G+'" class="content"><div class="row"><div class="large-12 large-centered columns"><h3 class="subheader text-right"><input type="search" class="provision-search-input right" placeholder="Search"/></h3><br></div></div><div class="row"><div class="large-12 large-centered columns"><table class="provision_networks_table"><thead class="hidden"><tr><th>'+b.tr("ID")+"</th><th>"+b.tr("Name")+'</th></tr></thead><tbody class="hidden"></tbody></table><br></div></div></div></dd>').appendTo(t);G+=1;var i=$(".provision_networks_table",s).dataTable({iDisplayLength:6,sDom:'<"H">t<"F"lp>',aLengthMenu:[[6,12,36,72],[6,12,36,72]],aoColumnDefs:[{bVisible:!1,aTargets:["all"]}],aoColumns:[{mDataProp:"VNET.ID"},{mDataProp:"VNET.NAME"}],fnPreDrawCallback:function(){return 0==this.$("tr",{filter:"applied"}).length?this.html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa fa-info-circle fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999">'+b.tr("There are no networks available. Please contact your cloud administrator")+"</span></div>"):$(".provision_networks_table",s).html('<ul class="provision_networks_ul large-block-grid-3 medium-block-grid-3 small-block-grid-1 text-center"></ul>'),!0},fnRowCallback:function(t,e){var a=e.VNET;return $(".provision_networks_ul",s).append('<li><ul class="provision-pricing-table hoverable more-than-one" opennebula_id="'+a.ID+'" opennebula_name="'+a.NAME+'"><li class="provision-title" title="'+a.NAME+'">'+a.NAME+'</li><li class="provision-bullet-item"><i class="fa fa-fw fa-globe" style="font-size:40px;"/></li><li class="provision-description">'+(a.TEMPLATE.DESCRIPTION||"...")+"</li></ul></li>"),t}});$(".provision-search-input",s).on("keyup",function(){i.fnFilter($(this).val())}),$(".provision-search-input",s).on("change",function(){i.fnFilter($(this).val())}),s.on("click",".provision-pricing-table.more-than-one",function(){$(".selected_network",s).html('<span style="color: #999; font-size: 14px">'+b.tr("INTERFACE")+'</span>&emsp;&emsp;<span style="color: #777;">'+$(this).attr("opennebula_name")+"</span>"),$(".selected_network",s).attr("opennebula_id",$(this).attr("opennebula_id")),$(".selected_network",s).removeAttr("template_nic"),$("a",s).first().trigger("click")}),s.on("click",".provision_remove_nic",function(){return s.remove(),!1}),e||a||$("a",s).trigger("click"),h(i)}function i(t,e){t.off(),t.html('<br><div class="row"><div class="large-12 columns"><h3 class="subheader text-right"><span class="left"><i class="fa fa-globe fa-lg"></i>&emsp;'+b.tr("Network")+'</span></h3><br></div></div><br><div class="row"><div class="large-12 large-centered columns"><dl class="accordion provision_nic_accordion" data-accordion="provision_accordion_'+V+'"></dl><br><a class="button large-12 medium radius secondary provision_add_network_interface" style="padding: 1rem; color: #555; '+(e?"display:none;":"")+'">'+b.tr("Add another Network Interface")+"</a></div></div><br>"),V+=1,$(".provision_add_network_interface",t).on("click",function(){s($(".accordion",t))}),$(document).foundation()}function r(){if($(".section_content").hide(),$("#provision_dashboard").fadeIn(),$("#provision_dashboard").html(""),v.provision.dashboard.isEnabled("quotas")&&($("#provision_dashboard").append(O()),g.User.show({data:{id:"-1"},success:function(t,e){var a=e.USER;if(T.initEmptyQuotas(a),!$.isEmptyObject(a.VM_QUOTA)){var n=QuotasDefault.default_quotas(a.DEFAULT_USER_QUOTAS),s=T.quotaInfo(a.VM_QUOTA.VM.VMS_USED,a.VM_QUOTA.VM.VMS,n.VM_QUOTA.VM.VMS,!0);$("#provision_dashboard_rvms_percentage").html(s.percentage),$("#provision_dashboard_rvms_str").html(s.str),$("#provision_dashboard_rvms_meter").css("width",s.percentage+"%");var i=T.quotaMBInfo(a.VM_QUOTA.VM.MEMORY_USED,a.VM_QUOTA.VM.MEMORY,n.VM_QUOTA.VM.MEMORY,!0);$("#provision_dashboard_memory_percentage").html(i.percentage),$("#provision_dashboard_memory_str").html(i.str),$("#provision_dashboard_memory_meter").css("width",i.percentage+"%");var r=T.quotaFloatInfo(a.VM_QUOTA.VM.CPU_USED,a.VM_QUOTA.VM.CPU,n.VM_QUOTA.VM.CPU,!0);$("#provision_dashboard_cpu_percentage").html(r.percentage),$("#provision_dashboard_cpu_str").html(r.str),$("#provision_dashboard_cpu_meter").css("width",r.percentage+"%")}}})),v.provision.dashboard.isEnabled("vdcquotas")&&($("#provision_dashboard").append(R()),g.Group.show({data:{id:"-1"},success:function(t,e){var a=e.GROUP;if(T.initEmptyQuotas(a),!$.isEmptyObject(a.VM_QUOTA)){var n=E.default_quotas(a.DEFAULT_GROUP_QUOTAS),s=T.quotaInfo(a.VM_QUOTA.VM.VMS_USED,a.VM_QUOTA.VM.VMS,n.VM_QUOTA.VM.VMS,!0);$("#provision_dashboard_vdc_rvms_percentage").html(s.percentage),$("#provision_dashboard_vdc_rvms_str").html(s.str),$("#provision_dashboard_vdc_rvms_meter").css("width",s.percentage+"%");var i=T.quotaMBInfo(a.VM_QUOTA.VM.MEMORY_USED,a.VM_QUOTA.VM.MEMORY,n.VM_QUOTA.VM.MEMORY,!0);$("#provision_dashboard_vdc_memory_percentage").html(i.percentage),$("#provision_dashboard_vdc_memory_str").html(i.str),$("#provision_dashboard_vdc_memory_meter").css("width",i.percentage+"%");var r=T.quotaFloatInfo(a.VM_QUOTA.VM.CPU_USED,a.VM_QUOTA.VM.CPU,n.VM_QUOTA.VM.CPU,!0);$("#provision_dashboard_vdc_cpu_percentage").html(r.percentage),$("#provision_dashboard_vdc_cpu_str").html(r.str),$("#provision_dashboard_vdc_cpu_meter").css("width",r.percentage+"%")}}})),v.provision.dashboard.isEnabled("vms")){$("#provision_dashboard").append(L());var t=Math.floor((new Date).getTime()/1e3);t-=604800;var e=-1,a={start_time:t,end_time:e,userfilter:config.user_id},n=!0;g.VM.accounting({success:function(t,e){S.fillAccounting($("#dashboard_vm_accounting"),t,e,n)},error:w.onError,data:a}),g.VM.list({timeout:!0,success:function(t,e){var a=0,n=0,s=0,i=0,r=0;$.each(e,function(t,e){if(e.VM.UID==config.user_id){var o=A.state(e.VM);switch(a+=1,o.color){case"deploying":r+=1;break;case"error":i+=1;break;case"running":n+=1;break;case"powering_off":s+=1;break;case"off":s+=1}}});var o=$("#provision_vms_dashboard");$("#provision_dashboard_total",o).html(a),$("#provision_dashboard_running",o).html(n),$("#provision_dashboard_off",o).html(s),$("#provision_dashboard_error",o).html(i),$("#provision_dashboard_deploying",o).html(r)},error:w.onError})}if(v.provision.dashboard.isEnabled("vdcvms")){$("#provision_dashboard").append(N());var t=Math.floor((new Date).getTime()/1e3);t-=604800;var e=-1,a={start_time:t,end_time:e},n=!0;g.VM.accounting({success:function(t,e){S.fillAccounting($("#dashboard_vdc_vm_accounting"),t,e,n)},error:w.onError,data:a}),g.VM.list({timeout:!0,success:function(t,e){var a=0,n=0,s=0,i=0,r=0;$.each(e,function(t,e){var o=A.state(e.VM);switch(a+=1,o.color){case"deploying":r+=1;break;case"error":i+=1;break;case"running":n+=1;break;case"powering_off":s+=1;break;case"off":s+=1}});var o=$("#provision_vdc_vms_dashboard");$("#provision_dashboard_vdc_total",o).html(a),$("#provision_dashboard_vdc_running",o).html(n),$("#provision_dashboard_vdc_off",o).html(s),$("#provision_dashboard_vdc_error",o).html(i),$("#provision_dashboard_vdc_deploying",o).html(r)},error:w.onError})}if(v.provision.dashboard.isEnabled("users")){$("#provision_dashboard").append(U());var t=Math.floor((new Date).getTime()/1e3);t-=604800;var e=-1,a={start_time:t,end_time:e,group:config.user_gid},n=!0;g.VM.accounting({success:function(t,e){S.fillAccounting($("#dashboard_vdc_user_accounting"),t,e,n)},error:w.onError,data:a}),g.User.list({timeout:!0,success:function(t,e){var a=e.length||0,n=$("#provision_users_dashboard");$("#provision_dashboard_users_total",n).html(a)},error:w.onError})}}function o(t,e){var a=e.GROUP,n=$("#provision_manage_vdc"),s=E.default_quotas(a.DEFAULT_GROUP_QUOTAS),i=T.initQuotasPanel(a,s,"#provision_vdc_quotas_div",!1);$("#provision_vdc_quotas_div").html(i),T.setupQuotasPanel(a,"#provision_vdc_quotas_div",!1,"Group"),$("#provision_info_vdc_group_acct",n).html(S.html()),S.setup($("#provision_info_vdc_group_acct",n),{fixed_group:a.ID,init_group_by:"user"}),v.isFeatureEnabled("showback")&&($("#provision_info_vdc_group_showback",n).html(I.html()),I.setup($("#provision_info_vdc_group_showback",n),{fixed_user:"",fixed_group:a.ID})),$("#acct_placeholder",n).hide()}function l(){g.Action.clear_cache("VMTEMPLATE"),M.updateDatatable(provision_system_templates_datatable),provision_system_templates_datatable.fnFilter("^-$",2,!0,!1),M.updateDatatable(provision_vdc_templates_datatable),provision_vdc_templates_datatable.fnFilter("^(?!-$)",2,!0,!1),provision_vdc_templates_datatable.fnFilter("^1$",3,!0,!1),v.isTabPanelEnabled("provision-tab","templates")&&(M.updateDatatable(provision_saved_templates_datatable),provision_saved_templates_datatable.fnFilter("^(?!-$)",2,!0,!1),provision_saved_templates_datatable.fnFilter("^0$",3,!0,!1)),$(".provision_accordion_template .selected_template").hide(),$(".provision_accordion_template .select_template").show(),$("#provision_create_vm .provision_capacity_selector").html(""),$("#provision_create_vm .provision_network_selector").html(""),$("#provision_create_vm .provision_custom_attributes_selector").html(""),$("#provision_create_vm dd:not(.active) a[href='#provision_dd_template']").trigger("click"),$(".section_content").hide(),$("#provision_create_vm").fadeIn()}function c(){f(provision_flow_templates_datatable);var t=$("#provision_create_flow");$("#provision_customize_flow_template",t).hide(),$("#provision_customize_flow_template",t).html(""),$(".provision_network_selector",t).html(""),$(".provision_custom_attributes_selector",t).html(""),$(".provision_accordion_flow_template .selected_template",t).hide(),$(".provision_accordion_flow_template .select_template",t).show(),$("dd:not(.active) a[href='#provision_dd_flow_template']",t).trigger("click"),$(".alert-box-error",t).hide(),$(".section_content").hide(),$("#provision_create_flow").fadeIn()}function d(){$(".section_content").hide(),$("#provision_create_user").fadeIn(),$(document).foundation()}function u(){$(".section_content").hide(),$("#provision_manage_vdc").fadeIn(),y.runAction("Provision.Group.show","-1")}function p(t){t.fnClearTable(!0),config.instance_types&&0!=config.instance_types.length?t.fnAddData(config.instance_types):t.html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa fa-info-circle fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999">'+b.tr("There are no instance types available")+"</span></div>")}function h(t){t.html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa  fa-spinner fa-spin fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999"></span></div>'),g.Network.list({timeout:!0,success:function(e,a){t.fnClearTable(!0),0==a.length?t.html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa fa-info-circle fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999">'+b.tr("There are no networks available.")+"</span></div>"):t.fnAddData(a)},error:w.onError})}function f(t,e){t.html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa  fa-spinner fa-spin fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999"></span></div>'),setTimeout(function(){g.ServiceTemplate.list({timeout:!0,success:function(e,a){t.fnClearTable(!0),0==a.length?t.html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa fa-info-circle fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999">'+b.tr("There are no templates available")+"</span></div>"):t.fnAddData(a)},error:w.onError})},e)}function m(){g.Action.clear_cache("USER"),k.show(0);var t=$("#provision_create_user");$("#username",t).val(""),$("#password",t).val(""),$("#repeat_password",t).val(""),x.reset(t),$(".alert-box-error",t).hide(),$(".alert-box-error",t).html("")}function _(){$(document).ready(function(){function t(t,e){var a,n=t.VMTEMPLATE;a=n.TEMPLATE.LOGO?'<span class="provision-logo" href="#"><img  src="'+n.TEMPLATE.LOGO+'"></span>':'<span style="color: #bfbfbf; font-size: 60px;"><i class="fa fa-fw fa-file-text-o"/></span>';var s=$('<li><ul class="provision-pricing-table hoverable only-one" opennebula_id="'+n.ID+'"><li class="provision-title" title="'+n.NAME+'">'+n.NAME+'</li><li style="height: 85px" class="provision-bullet-item">'+a+'</li><li class="provision-description">'+(n.TEMPLATE.DESCRIPTION||"...")+"</li></ul></li>").appendTo($("#"+e+"_ul"));$(".provision-pricing-table",s).data("opennebula",t)}function o(t,e){return 0==t.$("tr",{filter:"applied"}).length?t.html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa fa-info-circle fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999">'+b.tr("There are no templates available")+"</span></div>"):$("#"+e+"_table").html('<ul id="'+e+'_ul" class="large-block-grid-3 medium-block-grid-3 small-block-grid-1 text-center"></ul>'),!0}var p="provision-tab",h=$("#"+p);if(v.isTabEnabled(p)){$(".right-header").prepend(P({logo:v.provision.logo})),$(".left-content").remove(),$(".right-content").addClass("large-centered small-centered"),$("#footer").removeClass("right"),$("#footer").addClass("large-centered small-centered"),$("#provision_logout").click(function(){return g.Auth.logout({success:function(){window.location.href="login"}}),!1}),A.generate($(".provision_vms_list_section"),{active:!0}),v.isTabPanelEnabled("provision-tab","templates")&&M.generate($(".provision_templates_list_section"),{active:!0}),D.generate($(".provision_flows_list_section"),{active:!0}),k.generate($(".provision_users_list_section"),{active:!0}),$(".provision_image_header").on("click",function(){y.showTab(F),$("li",".provision-header").removeClass("active"),r()}),$(".configuration").on("click",function(){$("li",".provision-header").removeClass("active")}),r(),$(".provision-header").on("click","li",function(){y.showTab(F),$("li",".provision-header").removeClass("active"),$(this).closest("li").addClass("active")}),$(document).on("click",".provision_vms_list_button",function(){g.Action.clear_cache("VM"),A.show(0)}),$(document).on("click",".provision_templates_list_button",function(){g.Action.clear_cache("VMTEMPLATE"),M.show(0)}),$(document).on("click",".provision_flows_list_button",function(){g.Action.clear_cache("SERVICE"),D.show(0)}),$(document).on("click",".provision_users_list_button",function(){g.Action.clear_cache("USER"),k.show(0)}),provision_system_templates_datatable=$("#provision_system_templates_table").dataTable({iDisplayLength:6,sDom:'<"H">t<"F"lp>',aLengthMenu:[[6,12,36,72],[6,12,36,72]],aoColumnDefs:[{bVisible:!1,aTargets:["all"]}],aoColumns:[{mDataProp:"VMTEMPLATE.ID"},{mDataProp:"VMTEMPLATE.NAME"},{mDataProp:"VMTEMPLATE.TEMPLATE.SAVED_TEMPLATE_ID",sDefaultContent:"-"}],fnPreDrawCallback:function(){o(this,"provision_system_templates")},fnRowCallback:function(e,a){return t(a,"provision_system_templates"),e}}),provision_vdc_templates_datatable=$("#provision_vdc_templates_table").dataTable({iDisplayLength:6,sDom:'<"H">t<"F"lp>',aLengthMenu:[[6,12,36,72],[6,12,36,72]],aoColumnDefs:[{bVisible:!1,aTargets:["all"]}],aoColumns:[{mDataProp:"VMTEMPLATE.ID"},{mDataProp:"VMTEMPLATE.NAME"},{mDataProp:"VMTEMPLATE.TEMPLATE.SAVED_TEMPLATE_ID",sDefaultContent:"-"},{mDataProp:"VMTEMPLATE.PERMISSIONS.GROUP_U"}],fnPreDrawCallback:function(){o(this,"provision_vdc_templates")},fnRowCallback:function(e,a){return t(a,"provision_vdc_templates"),e}}),provision_saved_templates_datatable=$("#provision_saved_templates_table").dataTable({iDisplayLength:6,sDom:'<"H">t<"F"lp>',aLengthMenu:[[6,12,36,72],[6,12,36,72]],aoColumnDefs:[{bVisible:!1,aTargets:["all"]}],aoColumns:[{mDataProp:"VMTEMPLATE.ID"},{mDataProp:"VMTEMPLATE.NAME"},{mDataProp:"VMTEMPLATE.TEMPLATE.SAVED_TEMPLATE_ID",sDefaultContent:"-"},{mDataProp:"VMTEMPLATE.PERMISSIONS.GROUP_U"}],fnPreDrawCallback:function(){o(this,"provision_saved_templates")},fnRowCallback:function(e,a){return t(a,"provision_saved_templates"),e}}),$("#provision_create_template_search").on("keyup",function(){provision_system_templates_datatable.fnFilter($(this).val()),provision_saved_templates_datatable.fnFilter($(this).val()),provision_vdc_templates_datatable.fnFilter($(this).val())}),$("#provision_create_template_search").on("change",function(){provision_system_templates_datatable.fnFilter($(this).val()),provision_saved_templates_datatable.fnFilter($(this).val()),provision_vdc_templates_datatable.fnFilter($(this).val())}),$("#provision_create_template_refresh_button").click(function(){g.Action.clear_cache("VMTEMPLATE"),M.updateDatatable(provision_system_templates_datatable),M.updateDatatable(provision_saved_templates_datatable),M.updateDatatable(provision_vdc_templates_datatable)}),h.on("click","#provision_create_vm .provision_select_template .provision-pricing-table.only-one",function(){var t=$("#provision_create_vm");if($(this).hasClass("selected"))$(".provision_network_selector",t).html(""),$(".provision_capacity_selector",t).html(""),$(".provision_accordion_template .selected_template").hide(),$(".provision_accordion_template .select_template").show();else{var a=($(this).attr("opennebula_id"),$(this).data("opennebula")),r=a.VMTEMPLATE.TEMPLATE.NIC,o=[];$.isArray(r)?o=r:$.isEmptyObject(r)||(o=[r]),$(".provision_accordion_template .selected_template").show(),$(".provision_accordion_template .select_template").hide(),$(".provision_accordion_template .selected_template_name").html(a.VMTEMPLATE.NAME),$(".provision_accordion_template .selected_template_logo").html(a.VMTEMPLATE.TEMPLATE.LOGO?'<img  src="'+a.VMTEMPLATE.TEMPLATE.LOGO+'">':'<i class="fa fa-file-text-o fa-lg"/>&emsp;'),$(".provision_accordion_template a").first().trigger("click"),n($(".provision_capacity_selector",t),a.VMTEMPLATE.TEMPLATE),v.provision.create_vm.isEnabled("network_select")&&"NO"!=a.VMTEMPLATE.TEMPLATE.SUNSTONE_NETWORK_SELECT?(i($(".provision_network_selector",t)),$.each(o,function(e,a){s($(".provision_nic_accordion",t),a)})):$(".provision_network_selector",t).html(""),a.VMTEMPLATE.TEMPLATE.USER_INPUTS?e($(".provision_custom_attributes_selector",t),a.VMTEMPLATE.TEMPLATE.USER_INPUTS):$(".provision_custom_attributes_selector",t).html("")}}),h.on("click","#provision_create_vm .provision-pricing-table.only-one",function(){$(this).hasClass("selected")?$(this).removeClass("selected"):($(".provision-pricing-table",$(this).parents(".large-block-grid-3,.large-block-grid-2")).removeClass("selected"),$(this).addClass("selected"))}),$("#provision_create_vm").submit(function(){var t,e=$(this),a=$("#vm_name",e).val(),n=$(".tabs-content .content.active .selected",e).attr("opennebula_id"),s=[];$(".selected_network",e).each(function(){t=$(this).attr("template_nic")?JSON.parse($(this).attr("template_nic")):$(this).attr("opennebula_id")?{network_id:$(this).attr("opennebula_id")}:void 0,t&&s.push(t)});var i=$(".provision_instance_types_ul .selected",e);if(!n)return $(".alert-box-error",e).fadeIn().html(b.tr("You must select at least a template configuration")),!1;var r={vm_name:a,template:{}};if(s.length>0&&(r.template.nic=s),i.length>0){var o=i.data("opennebula");delete o.name,$.extend(r.template,o)}var l=!1,c={};return $(".provision_custom_attributes",$(this))&&$(".provision_custom_attribute",$(".provision_custom_attributes",$(this))).each(function(){$(this).val()?($(this).parent("label").css("color","#777"),c[$(this).attr("attr_name")]=$(this).val()):($(this).parent("label").css("color","red"),l=!0)}),l?($(".alert-box-error",$(this)).fadeIn().html(b.tr("You have not specified all the Custom Atrributes for this VM")),!1):($.isEmptyObject(c)||$.extend(r.template,c),y.runAction("Provision.instantiate",n,r),!1)}),$(document).on("click",".provision_create_vm_button",function(){l()}),provision_flow_templates_datatable=$("#provision_flow_templates_table").dataTable({iDisplayLength:6,sDom:'<"H">t<"F"lp>',aLengthMenu:[[6,12,36,72],[6,12,36,72]],aaSorting:[[1,"asc"]],aoColumnDefs:[{bVisible:!1,aTargets:["all"]}],aoColumns:[{mDataProp:"DOCUMENT.ID"},{mDataProp:"DOCUMENT.NAME"}],fnPreDrawCallback:function(){return 0==this.$("tr",{filter:"applied"}).length?this.html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa fa-info-circle fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999">'+b.tr("There are no templates available")+"</span></div>"):$("#provision_flow_templates_table").html('<ul id="provision_flow_templates_ul" class="large-block-grid-3 medium-block-grid-3 small-block-grid-1 text-center"></ul>'),!0
},fnRowCallback:function(t,e){var a,n=e.DOCUMENT,s=n.TEMPLATE.BODY,i="";s.roles&&$.each(s.roles,function(t,e){i+='<li class="provision-bullet-item text-left" style="margin-left: 10px;margin-right: 10px;"><i class="fa fa-fw fa-cube"/>&emsp;'+e.name+'<span class="right">'+e.cardinality+" VMs</span></li>"}),a=s.LOGO?'<span class="provision-logo" href="#"><img  src="'+s.LOGO+'"></span>':'<span style="color: #bfbfbf; font-size: 60px;"><i class="fa fa-fw fa-cubes"/></span>';var r=$('<li><ul class="provision-pricing-table hoverable only-one" opennebula_id="'+n.ID+'"><li class="provision-title" title="'+n.NAME+'">'+n.NAME+'</li><li style="height: 85px" class="provision-bullet-item">'+a+"</li>"+i+'<li class="provision-description" style="padding-top:0px">'+(n.TEMPLATE.DESCRIPTION||"")+"</li></ul></li>").appendTo($("#provision_flow_templates_ul"));return $(".provision-pricing-table",r).data("opennebula",e),t}}),$("#provision_create_flow_template_search").on("keyup",function(){provision_flow_templates_datatable.fnFilter($(this).val())}),$("#provision_create_flow_template_search").on("change",function(){provision_flow_templates_datatable.fnFilter($(this).val())}),$("#provision_create_flow_template_refresh_button").click(function(){g.Action.clear_cache("SERVICE_TEMPLATE"),f(provision_flow_templates_datatable)}),h.on("click",".provision_select_flow_template .provision-pricing-table.only-one",function(){var t=$("#provision_create_flow");if($(this).hasClass("selected"))$("#provision_customize_flow_template").hide(),$("#provision_customize_flow_template").html(""),$(".provision_network_selector",t).html(""),$(".provision_custom_attributes_selector",t).html(""),$(".provision_accordion_flow_template .selected_template").hide(),$(".provision_accordion_flow_template .select_template").show();else{$("#provision_customize_flow_template").show(),$("#provision_customize_flow_template").html("");var n=$(this).data("opennebula"),r=n.DOCUMENT.TEMPLATE.BODY;$(".provision_accordion_flow_template .selected_template").show(),$(".provision_accordion_flow_template .select_template").hide(),$(".provision_accordion_flow_template .selected_template_name").html(r.name),$(".provision_accordion_flow_template .selected_template_logo").html('<i class="fa fa-cubes fa-lg"/>&emsp;'),$(".provision_accordion_flow_template a").first().trigger("click");var t=$("#provision_create_flow");if(r.custom_attrs){var o=[],l=[];$.each(r.custom_attrs,function(t,e){var a=e.split("|"),n={name:t,mandatory:a[0],type:a[1],description:a[2]};switch(a[1]){case"vnet_id":o.push(n);break;case"text":l.push(n);break;case"password":l.push(n)}}),o.length>0&&(i($(".provision_network_selector",t),!0),$.each(o,function(e,a){s($(".provision_nic_accordion",t),null,a)}))}else $(".provision_network_selector",t).html(""),$(".provision_custom_attributes_selector",t).html("");$.each(r.roles,function(t,n){var s=$('<div id="provision_create_flow_role_'+t+'" class="provision_create_flow_role"><div class="row"><div class="large-10 large-centered columns"><h2 class="subheader"><i class="fa fa-cube fa-lg"></i>&emsp;'+n.name+'</h2><br></div></div><div class="row"><div class="provision_cardinality_selector large-9 large-centered columns"></div></div><br><div class="row"><div class="provision_custom_attributes_selector large-9 large-centered columns"></div></div></div><br><br>').appendTo($("#provision_customize_flow_template"));s.data("opennebula",n);var i=n.vm_template,r="#provision_create_flow_role_"+t;g.Template.show({data:{id:i},success:function(t,i){var o=$(r);a($(".provision_cardinality_selector",s),n,i),i.VMTEMPLATE.TEMPLATE.USER_INPUTS?e($(".provision_custom_attributes_selector",o),i.VMTEMPLATE.TEMPLATE.USER_INPUTS):$(".provision_custom_attributes_selector",o).html("")}})}),$(document).foundation()}}),h.on("click","#provision_create_flow .provision-pricing-table.only-one",function(){$(this).hasClass("selected")?$(this).removeClass("selected"):($(".provision-pricing-table",$(this).parents(".large-block-grid-3,.large-block-grid-2")).removeClass("selected"),$(this).addClass("selected"))}),$("#provision_create_flow").submit(function(){var t=$(this),e=$("#flow_name",t).val(),a=$(".provision_select_flow_template .selected",t).attr("opennebula_id");if(!a)return $(".alert-box-error",t).fadeIn().html(b.tr("You must select at least a template configuration")),!1;var n={},s=!1;if($(".provision_nic_accordion",t)&&$(".selected_network",$(".provision_nic_accordion",t)).each(function(){$(this).attr("opennebula_id")?($(this).css("color","#777"),n[$(this).attr("attr_name")]=$(this).attr("opennebula_id")):($(this).css("color","red"),s=!0)}),s)return $(".alert-box-error",t).fadeIn().html(b.tr("You have not specified all the Networks for this Service")),!1;var i=[],r=!1;$(".provision_create_flow_role",t).each(function(){var t={};$(".provision_custom_attributes",$(this))&&$(".provision_custom_attribute",$(".provision_custom_attributes",$(this))).each(function(){$(this).val()?($(this).parent("label").css("color","#777"),t[$(this).attr("attr_name")]=$(this).val()):($(this).parent("label").css("color","red"),r=!0)});var e=$(this).data("opennebula");$.each(e.elasticity_policies,function(t,e){e.expression=htmlDecode(e.expression)}),i.push($.extend(e,{cardinality:$(".cardinality_value",$(this)).text(),user_inputs_values:t}))});var o={merge_template:{name:e,roles:i,custom_attrs_values:n}};return r?($(".alert-box-error",$(this)).fadeIn().html(b.tr("You have not specified all the Custom Atrributes for this Service")),!1):(y.runAction("Provision.Flow.instantiate",a,o),!1)}),$(".provision_create_flow_button").on("click",function(){c()}),$("#provision_vdc_info_button").on("click",function(){g.Action.clear_cache("GROUP"),u()});var m=$("#provision_create_user");x.setup(m),$('a[href="#provision_create_user_manual_quota"]',m).on("click",function(){$(".provision_rvms_quota_input",m).change(),$(".provision_memory_quota_input",m).change(),$(".provision_memory_quota_tmp_input",m).change(),$(".provision_cpu_quota_input",m).change()}),$("#provision_create_user").submit(function(){var t=$(this),e=$("#username",t).val(),a=$("#password",t).val(),n=$("#repeat_password",t).val(),s="core";if(!e.length||!a.length)return $(".alert-box-error",t).fadeOut(),$(".alert-box-error",t).fadeIn().html(b.tr("You have to provide a username and password")),!1;if(a!==n)return $(".alert-box-error",t).fadeOut(),$(".alert-box-error",t).fadeIn().html(b.tr("Passwords do not match")),!1;var i={user:{name:e,password:a,auth_driver:s}};return y.runAction("Provision.User.create",i),$(".alert-box-error",t).html('<div class="text-center"><span class="fa-stack fa-5x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa  fa-spinner fa-spin fa-stack-1x fa-inverse"></i></span><br><br><span style="font-size: 18px; color: #999"></span></div>'),!1}),$(document).on("click",".provision_create_user_button",function(){d()})}})}t("foundation.core"),t("foundation.accordion"),t("foundation-datatables");var b=t("utils/locale"),v=t("sunstone-config"),g=t("opennebula"),y=t("sunstone"),w=t("utils/notifier"),T=(t("utils/resource-select"),t("utils/quotas/quota-widgets")),E=t("utils/quotas/quota-defaults"),S=t("utils/accounting"),I=t("utils/showback"),x=(t("utils/humanize"),t("utils/quotas/quota-limits"),t("utils/graphs"),t("./provision-tab/users/quota-widget")),A=t("./provision-tab/vms/list"),M=t("./provision-tab/templates/list"),k=t("./provision-tab/users/list"),D=t("./provision-tab/flows/list"),C=t("hbs!./provision-tab/content"),P=t("hbs!./provision-tab/header"),O=t("hbs!./provision-tab/dashboard/quotas"),R=t("hbs!./provision-tab/dashboard/vdc-quotas"),L=t("hbs!./provision-tab/dashboard/vms"),N=t("hbs!./provision-tab/dashboard/vdc-vms"),U=t("hbs!./provision-tab/dashboard/users"),F=(t("hbs!./provision-tab/group/info"),t("./provision-tab/tabId")),q={"Provision.User.create":{type:"create",call:g.User.create,callback:function(t,e){$("div#provision_create_user_manual_quota",$("#provision_create_user")).hasClass("active")?(quota_json=x.retrieve($("#provision_create_user")),y.runAction("Provision.User.set_quota",[e.USER.ID],quota_json)):m()},error:w.onError},"Provision.User.set_quota":{type:"multiple",call:g.User.set_quota,callback:function(){m()},error:w.onError},"Provision.Group.show":{type:"single",call:g.Group.show,callback:o,error:w.onError},"Provision.Flow.instantiate":{type:"single",call:g.ServiceTemplate.instantiate,callback:function(){g.Action.clear_cache("SERVICE"),D.show(0);var t=$("#provision_create_flow");$("#flow_name",t).val(""),$(".provision-pricing-table",t).removeClass("selected")},error:w.onError},"Provision.instantiate":{type:"single",call:g.Template.instantiate,callback:function(){g.Action.clear_cache("VM"),show_provision_vm_list(0);var t=$("#provision_create_vm");$("#vm_name",t).val(""),$(".provision_selected_networks").html(""),$(".provision-pricing-table",t).removeClass("selected"),$(".alert-box-error",t).hide(),$('a[href="#provision_system_templates_selector"]',t).click()},error:w.onError}};$(document).foundation();var z=0,V=0,G=0,B={tabId:F,list_header:"",actions:q,content:C(),setup:_};return B}),define("tabs/users-tab/buttons",["require","utils/locale"],function(t){var e=t("utils/locale"),a={"User.refresh":{type:"action",layout:"refresh",alwaysActive:!0},"User.create_dialog":{type:"create_dialog",layout:"create"},"User.update_password":{type:"action",layout:"main_buttons",text:e.tr("Password")},"User.change_authentication":{type:"action",layout:"main_buttons",text:e.tr("Auth")},"User.quotas_dialog":{type:"action",layout:"main_buttons",text:e.tr("Quotas")},"User.chgrp":{type:"confirm_with_select",text:e.tr("Change group"),layout:"user_select",select:"Group",tip:e.tr("This will change the main group of the selected users. Select the new group")+":"},"User.addgroup":{type:"confirm_with_select",text:e.tr("Add to group"),layout:"user_select",select:"Group",tip:e.tr("This will add the user to a secondary group. Select the new group")+":"},"User.delgroup":{type:"confirm_with_select",text:e.tr("Remove from group"),layout:"user_select",select:"Group",tip:e.tr("This will remove the user from a secondary group. Select the group")+":"},"User.delete":{type:"confirm",text:e.tr("Delete"),layout:"del"}};return a}),define("hbs!utils/tab-datatable/empty-table",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<div class="text-center" style="font-size: 18px; color: #999">\n  <br>\n  <span class="fa-stack fa-3x" style="color: #dfdfdf"> \n    <i class="fa fa-cloud fa-stack-2x"></i> \n    <i class="fa fa-info-circle fa-stack-1x fa-inverse"></i>\n  </span>\n  <br>\n  <span style=" color: #999">'+i((e.tr||t&&t.tr||s).call(t,"There is no data available",{name:"tr",hash:{},data:n}))+"</span>\n</div>\n<br>"},useData:!0});return e.registerPartial("utils/tab-datatable/empty-table",a),a}),function(t,e){"use strict";Foundation.libs.tooltip={name:"tooltip",version:"5.5.1",settings:{additional_inheritable_classes:[],tooltip_class:".tooltip",append_to:"body",touch_close_text:"Tap To Close",disable_for_touch:!1,hover_delay:0,show_on:"all",tip_template:function(t,e){return'<span data-selector="'+t+'" id="'+t+'" class="'+Foundation.libs.tooltip.settings.tooltip_class.substring(1)+'" role="tooltip">'+e+'<span class="nub"></span></span>'}},cache:{},init:function(t,e,a){Foundation.inherit(this,"random_str"),this.bindings(e,a)},should_show:function(e){var a=t.extend({},this.settings,this.data_options(e));return"all"===a.show_on?!0:this.small()&&"small"===a.show_on?!0:this.medium()&&"medium"===a.show_on?!0:this.large()&&"large"===a.show_on?!0:!1},medium:function(){return matchMedia(Foundation.media_queries.medium).matches},large:function(){return matchMedia(Foundation.media_queries.large).matches},events:function(e){var a=this,n=a.S;a.create(this.S(e)),t(this.scope).off(".tooltip").on("mouseenter.fndtn.tooltip mouseleave.fndtn.tooltip touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip","["+this.attr_name()+"]",function(e){var s=n(this),i=t.extend({},a.settings,a.data_options(s)),r=!1;if(Modernizr.touch&&/touchstart|MSPointerDown/i.test(e.type)&&n(e.target).is("a"))return!1;if(/mouse/i.test(e.type)&&a.ie_touch(e))return!1;if(s.hasClass("open"))Modernizr.touch&&/touchstart|MSPointerDown/i.test(e.type)&&e.preventDefault(),a.hide(s);else{if(i.disable_for_touch&&Modernizr.touch&&/touchstart|MSPointerDown/i.test(e.type))return;!i.disable_for_touch&&Modernizr.touch&&/touchstart|MSPointerDown/i.test(e.type)&&(e.preventDefault(),n(i.tooltip_class+".open").hide(),r=!0),/enter|over/i.test(e.type)?this.timer=setTimeout(function(){a.showTip(s)}.bind(this),a.settings.hover_delay):"mouseout"===e.type||"mouseleave"===e.type?(clearTimeout(this.timer),a.hide(s)):a.showTip(s)}}).on("mouseleave.fndtn.tooltip touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip","["+this.attr_name()+"].open",function(e){return/mouse/i.test(e.type)&&a.ie_touch(e)?!1:void(("touch"!=t(this).data("tooltip-open-event-type")||"mouseleave"!=e.type)&&("mouse"==t(this).data("tooltip-open-event-type")&&/MSPointerDown|touchstart/i.test(e.type)?a.convert_to_touch(t(this)):a.hide(t(this))))}).on("DOMNodeRemoved DOMAttrModified","["+this.attr_name()+"]:not(a)",function(){a.hide(n(this))})},ie_touch:function(){return!1},showTip:function(t){var e=this.getTip(t);return this.should_show(t,e)?this.show(t):void 0},getTip:function(e){var a=this.selector(e),n=t.extend({},this.settings,this.data_options(e)),s=null;return a&&(s=this.S('span[data-selector="'+a+'"]'+n.tooltip_class)),"object"==typeof s?s:!1},selector:function(t){var e=t.attr("id"),a=t.attr(this.attr_name())||t.attr("data-selector");return(e&&e.length<1||!e)&&"string"!=typeof a&&(a=this.random_str(6),t.attr("data-selector",a).attr("aria-describedby",a)),e&&e.length>0?e:a},create:function(a){var n=this,s=t.extend({},this.settings,this.data_options(a)),i=this.settings.tip_template;"string"==typeof s.tip_template&&e.hasOwnProperty(s.tip_template)&&(i=e[s.tip_template]);var r=t(i(this.selector(a),t("<div></div>").html(a.attr("title")).html())),o=this.inheritable_classes(a);r.addClass(o).appendTo(s.append_to),Modernizr.touch&&(r.append('<span class="tap-to-close">'+s.touch_close_text+"</span>"),r.on("touchstart.fndtn.tooltip MSPointerDown.fndtn.tooltip",function(){n.hide(a)})),a.removeAttr("title").attr("title","")},reposition:function(e,a,n){var s,i,r,o,l;if(a.css("visibility","hidden").show(),s=e.data("width"),i=a.children(".nub"),r=i.outerHeight(),o=i.outerHeight(),a.css(this.small()?{width:"100%"}:{width:s?s:"auto"}),l=function(t,e,a,n,s){return t.css({top:e?e:"auto",bottom:n?n:"auto",left:s?s:"auto",right:a?a:"auto"}).end()},l(a,e.offset().top+e.outerHeight()+10,"auto","auto",e.offset().left),this.small())l(a,e.offset().top+e.outerHeight()+10,"auto","auto",12.5,t(this.scope).width()),a.addClass("tip-override"),l(i,-r,"auto","auto",e.offset().left);else{var c=e.offset().left;Foundation.rtl&&(i.addClass("rtl"),c=e.offset().left+e.outerWidth()-a.outerWidth()),l(a,e.offset().top+e.outerHeight()+10,"auto","auto",c),a.removeClass("tip-override"),n&&n.indexOf("tip-top")>-1?(Foundation.rtl&&i.addClass("rtl"),l(a,e.offset().top-a.outerHeight(),"auto","auto",c).removeClass("tip-override")):n&&n.indexOf("tip-left")>-1?(l(a,e.offset().top+e.outerHeight()/2-a.outerHeight()/2,"auto","auto",e.offset().left-a.outerWidth()-r).removeClass("tip-override"),i.removeClass("rtl")):n&&n.indexOf("tip-right")>-1&&(l(a,e.offset().top+e.outerHeight()/2-a.outerHeight()/2,"auto","auto",e.offset().left+e.outerWidth()+r).removeClass("tip-override"),i.removeClass("rtl"))}a.css("visibility","visible").hide()},small:function(){return matchMedia(Foundation.media_queries.small).matches&&!matchMedia(Foundation.media_queries.medium).matches},inheritable_classes:function(e){var a=t.extend({},this.settings,this.data_options(e)),n=["tip-top","tip-left","tip-bottom","tip-right","radius","round"].concat(a.additional_inheritable_classes),s=e.attr("class"),i=s?t.map(s.split(" "),function(e){return-1!==t.inArray(e,n)?e:void 0}).join(" "):"";return t.trim(i)},convert_to_touch:function(e){var a=this,n=a.getTip(e),s=t.extend({},a.settings,a.data_options(e));0===n.find(".tap-to-close").length&&(n.append('<span class="tap-to-close">'+s.touch_close_text+"</span>"),n.on("click.fndtn.tooltip.tapclose touchstart.fndtn.tooltip.tapclose MSPointerDown.fndtn.tooltip.tapclose",function(){a.hide(e)})),e.data("tooltip-open-event-type","touch")},show:function(t){var e=this.getTip(t);"touch"==t.data("tooltip-open-event-type")&&this.convert_to_touch(t),this.reposition(t,e,t.attr("class")),t.addClass("open"),e.fadeIn(150)},hide:function(t){var e=this.getTip(t);e.fadeOut(150,function(){e.find(".tap-to-close").remove(),e.off("click.fndtn.tooltip.tapclose MSPointerDown.fndtn.tapclose"),t.removeClass("open")})},off:function(){var e=this;this.S(this.scope).off(".fndtn.tooltip"),this.S(this.settings.tooltip_class).each(function(a){t("["+e.attr_name()+"]").eq(a).attr("title",t(this).text())}).remove()},reflow:function(){}}}(jQuery,window,window.document),define("foundation.tooltip",["foundation.core"],function(){}),define("utils/tips",["require","foundation.tooltip"],function(t){t("foundation.tooltip");var e=function(t,e){$(".tip",t).each(function(){var t=$(this);t.removeClass("tip");var a=t.html(),n=["has-tip"];e&&n.push(e),t.html('<span data-tooltip class="'+n.join(" ")+'" data-width="210" title="'+a+'"><i class="fa fa-question-circle"></i></span>')}),$(document).foundation("reflow","tooltip")};return{setup:e}}),define("hbs!utils/tab-datatable/table",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({1:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'  <div class="row">\n    <div class="large-8 small-2 columns">\n      <a id="refresh_button_'+o((s=null!=(s=e.dataTableId||(null!=t?t.dataTableId:t))?s:r,typeof s===i?s.call(t,{name:"dataTableId",hash:{},data:n}):s))+'" href="#" class="button small radius secondary"> <i class="fa fa-refresh" /></a>\n    </div>\n    <div class="large-4 small-10 columns">\n      <input id="'+o((s=null!=(s=e.dataTableId||(null!=t?t.dataTableId:t))?s:r,typeof s===i?s.call(t,{name:"dataTableId",hash:{},data:n}):s))+'_search" class="search" type="search" placeholder="'+o((e.tr||t&&t.tr||r).call(t,"Search",{name:"tr",hash:{},data:n}))+'"/>\n    </div>\n  </div>\n'},3:function(t){var e=this.lambda,a=this.escapeExpression;return"        <th>"+a(e(t,t))+"</th>\n"},5:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c=this.lambda;return'  <div class="row">\n    <div class="large-12 columns" id="selected_ids_row_'+l((i=null!=(i=e.dataTableId||(null!=t?t.dataTableId:t))?i:o,typeof i===r?i.call(t,{name:"dataTableId",hash:{},data:n}):i))+'">\n      <label for="selected_resource_id_'+l((i=null!=(i=e.dataTableId||(null!=t?t.dataTableId:t))?i:o,typeof i===r?i.call(t,{name:"dataTableId",hash:{},data:n}):i))+'" id="select_resource_'+l((i=null!=(i=e.dataTableId||(null!=t?t.dataTableId:t))?i:o,typeof i===r?i.call(t,{name:"dataTableId",hash:{},data:n}):i))+'" class="radius secondary label">'+l(c(null!=(s=null!=t?t.selectOptions:t)?s.select_resource:s,t))+'</label>\n      <span id="selected_resource_'+l((i=null!=(i=e.dataTableId||(null!=t?t.dataTableId:t))?i:o,typeof i===r?i.call(t,{name:"dataTableId",hash:{},data:n}):i))+'" class="radius secondary label" style="display: none;">'+l(c(null!=(s=null!=t?t.selectOptions:t)?s.you_selected:s,t))+'</span>\n      <span id="select_resource_multiple_'+l((i=null!=(i=e.dataTableId||(null!=t?t.dataTableId:t))?i:o,typeof i===r?i.call(t,{name:"dataTableId",hash:{},data:n}):i))+'" class="radius secondary label" style="display: none;">'+l(c(null!=(s=null!=t?t.selectOptions:t)?s.select_resource_multiple:s,t))+'</span>\n      <span id="selected_resource_multiple_'+l((i=null!=(i=e.dataTableId||(null!=t?t.dataTableId:t))?i:o,typeof i===r?i.call(t,{name:"dataTableId",hash:{},data:n}):i))+'" class="radius secondary label" style="display: none;">'+l(c(null!=(s=null!=t?t.selectOptions:t)?s.you_selected_multiple:s,t))+'</span>\n      <input id="selected_resource_id_'+l((i=null!=(i=e.dataTableId||(null!=t?t.dataTableId:t))?i:o,typeof i===r?i.call(t,{name:"dataTableId",hash:{},data:n}):i))+'" type="text"/>\n      <span id="selected_resource_name_'+l((i=null!=(i=e.dataTableId||(null!=t?t.dataTableId:t))?i:o,typeof i===r?i.call(t,{name:"dataTableId",hash:{},data:n}):i))+'" class="radius label" type="text"></span>\n    </div>\n  </div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<div id="'+l((i=null!=(i=e.dataTableId||(null!=t?t.dataTableId:t))?i:o,typeof i===r?i.call(t,{name:"dataTableId",hash:{},data:n}):i))+'Container">\n';return s=e["if"].call(t,null!=(s=null!=t?t.conf:t)?s.select:s,{name:"if",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+='  <table id="'+l((i=null!=(i=e.dataTableId||(null!=t?t.dataTableId:t))?i:o,typeof i===r?i.call(t,{name:"dataTableId",hash:{},data:n}):i))+'" class="datatable twelve">\n    <thead>\n      <tr>\n        <th class="check">\n          <input type="checkbox" class="check_all" value=""/>\n        </th>\n',s=e.each.call(t,null!=t?t.columns:t,{name:"each",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+="      </tr>\n    </thead>\n    <tbody></tbody>\n  </table>\n",s=e["if"].call(t,null!=(s=null!=t?t.conf:t)?s.select:s,{name:"if",hash:{},fn:this.program(5,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+"</div>"},useData:!0});return e.registerPartial("utils/tab-datatable/table",a),a}),define("hbs!utils/tab-datatable/search-input",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<input id="'+o((s=null!=(s=e.dataTableSearchId||(null!=t?t.dataTableSearchId:t))?s:r,typeof s===i?s.call(t,{name:"dataTableSearchId",hash:{},data:n}):s))+'" type="search" placeholder="'+o((e.tr||t&&t.tr||r).call(t,"Search",{name:"tr",hash:{},data:n}))+'" />'},useData:!0});return e.registerPartial("utils/tab-datatable/search-input",a),a}),define("utils/tab-datatable",["require","foundation-datatables","hbs!./tab-datatable/empty-table","sunstone","sunstone-config","utils/locale","utils/tips","opennebula","utils/notifier","hbs!./tab-datatable/table","hbs!./tab-datatable/search-input"],function(t){function e(){var t=this;return t.conf.select&&(t.selectOptions.select_resource||(t.selectOptions.select_resource=M.tr("Please select a resource from the list")),t.selectOptions.you_selected||(t.selectOptions.you_selected=M.tr("You selected the following resource:")),void 0==t.selectOptions.id_index&&(t.selectOptions.id_index=0),$.extend(t.selectOptions,t.conf.selectOptions),t.selectOptions.fixed_ids_map_orig={},void 0!=t.selectOptions.fixed_ids&&$.each(t.selectOptions.fixed_ids,function(){t.selectOptions.fixed_ids_map_orig[this]=!0}),t.selectOptions.starred_ids_map={},void 0!=t.selectOptions.starred_ids&&$.each(t.selectOptions.starred_ids,function(){t.selectOptions.starred_ids_map[this]=!0}),void 0==t.selectOptions.multiple_choice&&(t.selectOptions.multiple_choice=!1)),t.dataTableHTML=P({dataTableId:this.dataTableId,columns:this.columns,conf:this.conf,selectOptions:this.selectOptions}),t.searchInputHTML=O({dataTableSearchId:this.dataTableId+"Search"}),t}function a(t){this.dataTable=$("#"+this.dataTableId).dataTable(this.dataTableOptions);var e=this;$("#"+this.dataTableId+"Search").keyup(function(){e.dataTable.fnFilter($(this).val())}),this.dataTable.on("draw",function(){e.recountCheckboxes()}),this.dataTable.fnSort([[1,A.tableOrder]]),this.conf.actions&&(this.initCheckAllBoxes(),this.tableCheckboxesListener()),1==this.conf.oneSelection&&this.onlyOneCheckboxListener(),this.conf.info?this.infoListener(n):this.conf.customTrListener?this.infoListener(this.conf.customTrListener):this.infoListener(),this.conf.select&&(t&&t.selectOptions&&$.extend(this.selectOptions,t.selectOptions),this.initSelectResourceTableSelect())}function n(t,e){var a=t.dataTable.fnGetData(e);if(!a)return!0;var n=$(a[0]).val();return n?(x.showElement(t.tabId,t.resource+".show",n),!1):!0}function s(t){var e=this;this.dataTable.on("click","tbody tr",function(a){return $(a.target).is("input")||$(a.target).is("select")||$(a.target).is("option")?!0:(t?a.ctrlKey||a.metaKey||$(a.target).is("input")?$(".check_item",this).trigger("click"):t(e,this):$(".check_item",this).trigger("click"),!1)})}function i(t,e){var a=this.elementArray(e);this.dataTable.fnAddData(a)}function r(t){var e="#"+this.resource.toLowerCase()+"_"+t.request.data,a=$(e,this.dataTable).parents("tr")[0];this.dataTable.fnDeleteRow(a),this.recountCheckboxes();var n=this.dataTable.parents(".tab");x.rightInfoVisible(n)&&$("a[href='back']",n).click()}function o(){var t=this;this.dataTable.on("change",".check_all",function(){var e=$(this).closest(".dataTables_wrapper");$(this).is(":checked")?($("tbody input.check_item",e).prop("checked",!0),$("td",e).addClass("markrowchecked")):($("tbody input.check_item",e).prop("checked",!1),$("td",e).removeClass("markrowchecked")),t.recountCheckboxes()})}function l(){var t,e=$("tbody",this.dataTable);if(this.conf.customTabContext)t=this.conf.customTabContext;else if(t=e.parents(".tab"),$(".right-info",t).is(":visible"))return;{var a=$("tr",e),n=a.length,s=$("input.check_item:checked",a).length;$(".last_action_button",t)}s?($(".top_button, .list_button",t).prop("disabled",!1),n==s?$(".check_all",this.dataTable).prop("checked",!0):$(".check_all",this.dataTable).prop("checked",!1)):($(".check_all",this.dataTable).prop("checked",!1),$(".top_button, .list_button",t).prop("disabled",!0).attr("disabled","disabled")),$(".create_dialog_button",t).prop("disabled",!1),$(".alwaysActive",t).prop("disabled",!1)}function c(){var t=this.conf.customTabContext||this.dataTable.parents(".tab");$(".last_action_button",t).prop("disabled",!0),$(".top_button, .list_button",t).prop("disabled",!0),$(".create_dialog_button",t).prop("disabled",!1),$(".alwaysActive",t).prop("disabled",!1);var e=this;this.dataTable.on("change","tbody input.check_item",function(){$(this).parents("table");$(this).is(":checked")?$(this).parents("tr").children().addClass("markrowchecked"):$(this).parents("tr").children().removeClass("markrowchecked"),e.recountCheckboxes()})}function d(){var t=this;this.dataTable.on("change","tbody input.check_item",function(){var e=$(this).is(":checked");$("td",t.dataTable).removeClass("markrowchecked"),$("input.check_item:checked",t.dataTable).prop("checked",!1),$("td",$(this).closest("tr")).addClass("markrowchecked"),$(this).prop("checked",e)})}function u(t,e,a){var n=null,s=new Array,i=this;i.preUpdateView&&i.preUpdateView();var r=this.dataTable.attr("row_id");if(void 0!=r&&$.each($(this.dataTable.fnGetNodes()),function(){if(0!=$("td.markrow",this).length){var t=i.dataTable.fnGetData(this);n=t[r]}}),$.each($(this.dataTable.fnGetNodes()),function(){0!=$("td.markrowchecked",this).length&&s.push(isNaN($($("td",$(this))[1]).html())?$($("td",$(this))[0]).html():$($("td",$(this))[1]).html())}),this.dataTable&&this.dataTable.fnSettings()){var o=this.dataTable.fnSettings(),l=o._iDisplayStart;this.dataTable.fnClearTable(!1);var c;a?c=e:(c=[],$.each(e,function(){var t=i.elementArray(this);t&&c.push(t)}));var i=this;c.length>0&&i.dataTable.fnAddData(c,!1);var d=l;d>c.length-1&&(d=c.length>0?c.length-1:0),o.iInitDisplayStart=d,this.dataTable.fnDraw(!0)}void 0!=n&&$.each($(this.dataTable.fnGetNodes()),function(){var t=i.dataTable.fnGetData(this);t[r]==n&&$("td",this)[0].click()}),0!=s.length&&$.each($(this.dataTable.fnGetNodes()),function(){var t=$($("td",this)[1]).html();isNaN(t)&&(t=$($("td",this)[0]).html()),t&&-1!=$.inArray(t,s)&&($("input.check_item",this).first().click(),$("td",this).addClass("markrowchecked"))}),i.postUpdateView&&i.postUpdateView()}function p(t,e){var a=e[this.xmlRoot].ID,n=this.elementArray(e),s="#"+this.resource.toLowerCase()+"_"+a,i=this.dataTable.fnGetNodes(),r=$(s,i).parents("tr")[0];if(r){var o=$("input.check_item",r).prop("checked"),l=this.dataTable.fnGetPosition(r);this.dataTable.fnUpdate(n,l,void 0,!1),$("input.check_item",r).prop("checked",o),this.recountCheckboxes()}}function h(t,e){var a=this.dataTable.fnGetNodes(),n=$(e+"_"+t,a).parents("tr")[0];return this.dataTable.fnGetData(n)}function f(){$("tr input.check_item:visible",this.dataTable).replaceWith(R)}function m(t){var e=[];if(this.dataTable){var a=this.dataTable.parents(".tab");if(x.rightInfoVisible(a)&&!t)e.push(x.rightInfoResourceId(a));else{var n=$("tbody input.check_item:checked",this.dataTable);$.each(n,function(){e.push($(this).val())})}}return e}function _(t,e){this.dataTable.fnFilter(t,e)}function b(){function t(t,n){e.dataTable.unbind("draw");var s=n[e.selectOptions.id_index],i=n[e.selectOptions.name_index],r=$("#selected_ids_row_"+e.dataTableId,a).data("ids");return r[s]?(delete r[s],void 0!=t&&($("td",t).removeClass("markrowchecked"),$("input.check_item",t).prop("checked",!1)),$("#selected_ids_row_"+e.dataTableId+' span[row_id="'+s+'"]',a).remove(),e.selectOptions.unselect_callback()):(r[s]=!0,void 0!=t&&($("td",t).addClass("markrowchecked"),$("input.check_item",t).prop("checked",!0)),$("#selected_ids_row_"+e.dataTableId,a).append('<span row_id="'+s+'" class="radius label">'+i+' <span class="fa fa-times blue"></span></span> '),e.selectOptions.select_callback(n,e.selectOptions)),$.isEmptyObject(r)?($("#selected_resource_multiple_"+e.dataTableId,a).hide(),$("#select_resource_multiple_"+e.dataTableId,a).show()):($("#selected_resource_multiple_"+e.dataTableId,a).show(),$("#select_resource_multiple_"+e.dataTableId,a).hide()),$(".alert-box",a).hide(),!0}var e=this,a=$("#"+e.dataTableId+"Container");void 0==e.selectOptions.id_index&&(e.selectOptions.id_index=0),void 0==e.selectOptions.name_index&&(e.selectOptions.name_index=1),void 0==e.selectOptions.dataTable_options&&(e.selectOptions.dataTable_options={}),void 0==e.selectOptions.select_callback&&(e.selectOptions.select_callback=function(){}),void 0==e.selectOptions.unselect_callback&&(e.selectOptions.unselect_callback=function(){}),e.selectOptions.dataTable_options.fnRowCallback=e.selectOptions.multiple_choice?function(t,n){var s=n[e.selectOptions.id_index],i=$("#selected_ids_row_"+e.dataTableId,a).data("ids");i[s]?($("td",t).addClass("markrowchecked"),$("input.check_item",this).prop("checked",!0)):($("td",t).removeClass("markrowchecked"),$("input.check_item",this).prop("checked",!1))}:function(t,n){var s=n[e.selectOptions.id_index],i=$("#selected_resource_id_"+e.dataTableId,a).val();s==i?($("td",t).addClass("markrow"),$("input.check_item",this).prop("checked",!0)):($("td",t).removeClass("markrow"),$("input.check_item",this).prop("checked",!1))},$("#refresh_button_"+e.dataTableId,a).off("click"),a.on("click","#refresh_button_"+e.dataTableId,function(){return e.updateFn(),!1}),$("#"+e.dataTableId+"_search",a).keyup(function(){e.dataTable.fnFilter($(this).val())}),e.dataTable.fnSort([[e.selectOptions.id_index,config.user_config.table_order]]),e.selectOptions.read_only?$("#selected_ids_row_"+e.dataTableId,a).hide():e.selectOptions.multiple_choice&&($("#selected_resource_"+e.dataTableId,a).hide(),$("#select_resource_"+e.dataTableId,a).hide(),$("#selected_resource_multiple_"+e.dataTableId,a).hide(),$("#select_resource_multiple_"+e.dataTableId,a).show()),$("#selected_resource_id_"+e.dataTableId,a).hide(),$("#selected_resource_name_"+e.dataTableId,a).hide(),$("#selected_ids_row_"+e.dataTableId,a).data("options",e.selectOptions),e.selectOptions.read_only||(e.selectOptions.multiple_choice?($("#selected_ids_row_"+e.dataTableId,a).data("ids",{}),$("#"+e.dataTableId+" tbody",a).on("click","tr",function(){var a=e.dataTable.fnGetData(this);
t(this,a)}),$(a).on("click","#selected_ids_row_"+e.dataTableId+" span.fa.fa-times",function(){var n=$(this).parent("span").attr("row_id"),s=!1;if($.each(e.dataTable.fnGetData(),function(a,i){return i[e.selectOptions.id_index]==n?(s=!0,t(e.dataTable.fnGetNodes(a),i),!1):void 0}),!s){var i=$("#selected_ids_row_"+e.dataTableId,a).data("ids");delete i[n],$("#selected_ids_row_"+e.dataTableId+' span[row_id="'+n+'"]',a).remove(),$.isEmptyObject(i)?($("#selected_resource_multiple_"+e.dataTableId,a).hide(),$("#select_resource_multiple_"+e.dataTableId,a).show()):($("#selected_resource_multiple_"+e.dataTableId,a).show(),$("#select_resource_multiple_"+e.dataTableId,a).hide())}e.selectOptions.unselect_callback(aData,e.selectOptions)})):$("#"+e.dataTableId+" tbody",a).delegate("tr","click",function(){e.dataTable.unbind("draw");var t=e.dataTable.fnGetData(this);return $("td.markrow",e.dataTable).removeClass("markrow"),$("tbody input.check_item",e.dataTable).prop("checked",!1),$("#selected_resource_"+e.dataTableId,a).show(),$("#select_resource_"+e.dataTableId,a).hide(),$(".alert-box",a).hide(),$("td",this).addClass("markrow"),$("input.check_item",this).prop("checked",!0),$("#selected_resource_id_"+e.dataTableId,a).val(t[e.selectOptions.id_index]).change(),$("#selected_resource_id_"+e.dataTableId,a).hide(),$("#selected_resource_name_"+e.dataTableId,a).text(t[e.selectOptions.name_index]).change(),$("#selected_resource_name_"+e.dataTableId,a).show(),e.selectOptions.select_callback(t,e.selectOptions),!0})),k.setup(a)}function v(){var t=this,e=$("#"+t.dataTableId+"Container");$("td.markrow",t.dataTable).removeClass("markrow"),$("tbody input.check_item",t.dataTable).prop("checked",!1),$("#"+t.dataTableId+"_search",e).val("").trigger("keyup"),$("#refresh_button_"+t.dataTableId).click(),$("#selected_resource_id_"+t.dataTableId,e).val("").hide(),$("#selected_resource_name_"+t.dataTableId,e).text("").hide(),$("#selected_resource_"+t.dataTableId,e).hide(),$("#select_resource_"+t.dataTableId,e).show()}function g(){var t=this,e=$("#"+t.dataTableId+"Container");if(t.selectOptions.multiple_choice){var a=$("#selected_ids_row_"+t.dataTableId,e).data("ids"),n=[];return $.each(a,function(t){n.push(t)}),n}return $("#selected_resource_id_"+t.dataTableId,e).val()}function y(){var t=this,e=$("#"+t.dataTableId+"Container");return t.selectOptions.multiple_choice?$("#selected_ids_row_"+t.dataTableId,e):$("#selected_resource_id_"+t.dataTableId,e)}function w(){var t=this,e=$("#"+t.dataTableId+"Container");$("#refresh_button_"+t.dataTableId,e).click()}function T(t){var e=this,a=$("#"+e.dataTableId+"Container");if(e.selectOptions.multiple_choice){e.refreshResourceTableSelect(a,e.dataTableId);var n=$("#selected_ids_row_"+e.dataTableId,a).data("ids");n={},$("#selected_ids_row_"+e.dataTableId+" span[row_id]",a).remove(),void 0==t.ids&&(t.ids=[]),$.each(t.ids,function(t,s){if(isNaN(s))return!0;n[s]=!0;var i=""+s;$.each(e.dataTable.fnGetData(),function(t,a){return a[e.selectOptions.id_index]==s?(i=a[e.selectOptions.name_index],!1):void 0}),$("#selected_ids_row_"+e.dataTableId,a).append('<span row_id="'+s+'" class="radius label">'+i+' <span class="fa fa-times blue"></span></span> ')}),$("#selected_ids_row_"+e.dataTableId,a).data("ids",n),$.isEmptyObject(n)?($("#selected_resource_multiple_"+e.dataTableId,a).hide(),$("#select_resource_multiple_"+e.dataTableId,a).show()):($("#selected_resource_multiple_"+e.dataTableId,a).show(),$("#select_resource_multiple_"+e.dataTableId,a).hide()),$(".alert-box",a).hide(),e.dataTable.fnDraw()}else{$("td.markrow",e.dataTable).removeClass("markrow"),$("tbody input.check_item",e.dataTable).prop("checked",!1),$("#selected_resource_"+e.dataTableId,a).show(),$("#select_resource_"+e.dataTableId,a).hide(),$(".alert-box",a).hide();var s=void 0,i="";if(void 0!=t.ids)s=t.ids,i=""+s,$.each(e.dataTable.fnGetData(),function(t,a){return a[e.selectOptions.id_index]==s?(i=a[e.selectOptions.name_index],!1):void 0});else if(void 0!=t.names){i=t.names.name;var r=t.names.uname;$.each(e.dataTable.fnGetData(),function(t,a){return a[e.selectOptions.name_index]==i&&a[e.selectOptions.uname_index]==r?(s=a[e.selectOptions.id_index],!1):void 0})}$("#selected_resource_id_"+e.dataTableId,a).val(s).change(),$("#selected_resource_id_"+e.dataTableId,a).hide(),$("#selected_resource_name_"+e.dataTableId,a).text(i).change(),$("#selected_resource_name_"+e.dataTableId,a).show(),e.refreshResourceTableSelect(a,e.dataTableId)}}function E(){var t=this,e=function(e,a){var n=[],s=$.extend({},t.selectOptions.fixed_ids_map_orig);$.each(a,function(){var e=!0;t.selectOptions.filter_fn&&(e=t.selectOptions.filter_fn(this[t.xmlRoot])),void 0!=t.selectOptions.fixed_ids&&(e=e&&s[this[t.xmlRoot].ID]);var a;e&&(a=t.elementArray(this),e=0!=a),e&&(void 0!=t.selectOptions.starred_ids&&(a[t.selectOptions.name_index]=t.selectOptions.starred_ids_map[this[t.xmlRoot].ID]?'<i class="fa fa-star fa-fw"></i> '+a[t.selectOptions.name_index]:'<i class="fa fa-fw"></i> '+a[t.selectOptions.name_index]),n.push(a),delete s[this[t.xmlRoot].ID])});var i=t.columns.length+1;$.each(s,function(e){for(var a=[],s=0;i>=s;s++)a.push("");a[t.selectOptions.id_index]=e,n.push(a)}),t.updateView(null,n,!0)},a=function(t,a,n){e(t,[]),C.onError(t,a,n)};void 0==t.selectOptions.zone_id?D[t.resource].list({timeout:!0,success:e,error:a}):D[t.resource].list_in_zone({data:{zone_id:t.selectOptions.zone_id},timeout:!0,success:e,error:a})}function S(){var t=this;D[t.resource].list({success:function(e,a){t.updateView(e,a)},error:C.onError})}t("foundation-datatables");var I=t("hbs!./tab-datatable/empty-table"),x=t("sunstone"),A=t("sunstone-config"),M=t("utils/locale"),k=t("utils/tips"),D=t("opennebula"),C=t("utils/notifier"),P=t("hbs!./tab-datatable/table"),O=t("hbs!./tab-datatable/search-input"),R='<img src="images/ajax-loader.gif" alt="retrieving" class="loading_img"/>';return $.extend(!0,$.fn.dataTable.defaults,{dom:"t<'row collapse'<'small-6 columns'i><'small-6 columns'lp>>",renderer:"foundation",language:{sLengthMenu:"_MENU_",emptyTable:I()}}),e.prototype={initialize:a,initCheckAllBoxes:o,tableCheckboxesListener:c,onlyOneCheckboxListener:d,infoListener:s,addElement:i,deleteElement:r,updateElement:p,elements:m,updateView:u,getElementData:h,waitingNodes:f,recountCheckboxes:l,filter:_,resetResourceTableSelect:v,refreshResourceTableSelect:w,selectResourceTableSelect:T,retrieveResourceTableSelect:g,idInput:y,initSelectResourceTableSelect:b,updateFn:E,list:S},e}),define("utils/template-utils",["require","utils/locale","sunstone"],function(t){function e(t){return void 0!=t?t.replace(/\\/g,"\\").replace(/"/g,'\\"'):t}function a(t){return $("<div/>").html(t).text()}function n(t,e){e&&(t=$.extend({},t,e));var n="\n";return $.each(t,function(t,e){if(e)if(e.constructor==Array){$.each(e,function(e,a){if(!a)return!0;if("object"==typeof a){n+=t+"=[";for(var s in a)n+=s+'="'+a[s].toString().replace(/"/g,'\\"')+'",';n=n.substring(0,n.length-1),n+="]\n"}else n=n+t+'="'+a.toString().replace(/"/g,'\\"')+'"\n'})}else if("object"==typeof e){n+=t+"=[";for(var a in e)n+=a+'="'+e[a].toString().replace(/"/g,'\\"')+'",';n=n.substring(0,n.length-1),n+="]\n"}else n=n+t+'="'+e.toString().replace(/"/g,'\\"')+'"\n';else n=n+t+"=\n"}),a(n)}t("utils/locale"),t("sunstone");return{templateToString:n,htmlDecode:a,escapeDoubleQuotes:e}}),define("tabs/users-tab/tabId",["require"],function(){return"users-tab"}),define("tabs/users-tab/datatable",["require","utils/tab-datatable","sunstone-config","utils/locale","utils/quotas/quota-defaults","utils/quotas/quota-widgets","utils/template-utils","./tabId"],function(t){function e(t,e){this.conf=e||{},this.tabId=h,this.dataTableId=t,this.resource=u,this.xmlRoot=p,this.dataTableOptions={bAutoWidth:!1,bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:["check",5,6,7]},{sWidth:"35px",aTargets:[0]},{sWidth:"150px",aTargets:[5,6,7]},{bVisible:!0,aTargets:r.tabTableColumns(h)},{bVisible:!1,aTargets:["_all"]}]},this.columns=[o.tr("ID"),o.tr("Name"),o.tr("Group"),o.tr("Auth driver"),o.tr("VMs"),o.tr("Memory"),o.tr("CPU"),o.tr("Group ID"),o.tr("Hidden User Data")],this.selectOptions={id_index:1,name_index:2,select_resource:o.tr("Please select a User from the list"),you_selected:o.tr("You selected the following User:"),select_resource_multiple:o.tr("Please select one or more users from the list"),you_selected_multiple:o.tr("You selected the following users:")},this.totalUsers=0,i.call(this)}function a(t){this.totalUsers++;var e=t[p],a='<span class="progress-text right" style="font-size: 12px">-</span>',n='<span class="progress-text right" style="font-size: 12px">-</span>',s='<span class="progress-text right" style="font-size: 12px">-</span>',i=l.getDefaultUserQuotas();c.initEmptyQuotas(e),$.isEmptyObject(e.VM_QUOTA)||(a=c.quotaBar(e.VM_QUOTA.VM.VMS_USED,e.VM_QUOTA.VM.VMS,i.VM_QUOTA.VM.VMS),n=c.quotaBarMB(e.VM_QUOTA.VM.MEMORY_USED,e.VM_QUOTA.VM.MEMORY,i.VM_QUOTA.VM.MEMORY),s=c.quotaBarFloat(e.VM_QUOTA.VM.CPU_USED,e.VM_QUOTA.VM.CPU,i.VM_QUOTA.VM.CPU));var r=d.templateToString(e);return['<input class="check_item" type="checkbox" id="'+u.toLowerCase()+"_"+e.ID+'" name="selected_items" value="'+e.ID+'"/>',e.ID,e.NAME,e.GNAME,e.AUTH_DRIVER,a,n,s,e.GID,r]}function n(){this.totalUsers=0}function s(){$(".total_users").text(this.totalUsers)}var i=t("utils/tab-datatable"),r=t("sunstone-config"),o=t("utils/locale"),l=t("utils/quotas/quota-defaults"),c=t("utils/quotas/quota-widgets"),d=t("utils/template-utils"),u="User",p="USER",h=t("./tabId");return e.prototype=Object.create(i.prototype),e.prototype.constructor=e,e.prototype.elementArray=a,e.prototype.preUpdateView=n,e.prototype.postUpdateView=s,e}),define("tabs/users-tab/form-panels/create/formPanelId",["require"],function(){return"createUserForm"}),define("tabs/users-tab/dialogs/password/dialogId",["require"],function(){return"userPasswordDialog"}),define("tabs/users-tab/dialogs/auth-driver/dialogId",["require"],function(){return"userAuthDriverDialog"}),define("tabs/users-tab/dialogs/quotas/dialogId",["require"],function(){return"userQuotasDialog"}),define("tabs/users-tab/actions",["require","sunstone","utils/notifier","utils/locale","./datatable","opennebula/user","./tabId","./form-panels/create/formPanelId","./dialogs/password/dialogId","./dialogs/auth-driver/dialogId","./dialogs/quotas/dialogId"],function(t){var e=t("sunstone"),a=t("utils/notifier"),n=t("utils/locale"),s=(t("./datatable"),t("opennebula/user")),i="User",r="USER",o=t("./tabId"),l=t("./form-panels/create/formPanelId"),c=t("./dialogs/password/dialogId"),d=t("./dialogs/auth-driver/dialogId"),u=t("./dialogs/quotas/dialogId"),p={"User.create":{type:"create",call:s.create,callback:function(t,a){e.resetFormPanel(o,l),e.hideFormPanel(o),e.getDataTable(o).addElement(t,a)},error:function(t,n){e.hideFormPanelLoading(o),a.onError(t,n)},notify:!0},"User.create_dialog":{type:"custom",call:function(){e.showFormPanel(o,l,"create")}},"User.list":{type:"list",call:s.list,callback:function(t,a){e.getDataTable(o).updateView(t,a)},error:a.onError},"User.refresh":{type:"custom",call:function(){var t=$("#"+o);e.rightInfoVisible(t)?e.runAction(i+".show",e.rightInfoResourceId(t)):(e.getDataTable(o).waitingNodes(),e.runAction(i+".list",{force:!0}))},error:a.onError},"User.update_password":{type:"custom",call:function(){e.getDialog(c).setParams({selectedElements:e.getDataTable(o).elements()}),e.getDialog(c).reset(),e.getDialog(c).show()}},"User.passwd":{type:"multiple",call:s.passwd,error:a.onError},"User.chgrp":{type:"multiple",call:s.chgrp,callback:function(){e.runAction(i+".refresh")},elements:function(){return e.getDataTable(o).elements()},error:a.onError},"User.addgroup":{type:"multiple",call:s.addgroup,callback:function(){e.runAction(i+".refresh")},elements:function(){return e.getDataTable(o).elements()},error:a.onError},"User.delgroup":{type:"multiple",call:s.delgroup,callback:function(t){e.runAction(i+".show",t.request.data[0][0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError},"User.change_authentication":{type:"custom",call:function(){e.getDialog(d).show()}},"User.chauth":{type:"multiple",call:s.chauth,error:a.onError},"User.show":{type:"single",call:s.show,callback:function(t,a){e.getDataTable(o).updateElement(t,a),e.rightInfoVisible($("#"+o))&&e.insertPanels(o,a)},error:a.onError},"User.delete":{type:"multiple",call:s.del,callback:function(t,a){e.getDataTable(o).deleteElement(t,a)},elements:function(){return e.getDataTable(o).elements()},error:a.onError},"User.update_template":{type:"single",call:s.update,callback:function(t){e.runAction(i+".show",t.request.data[0][0]),t.request.data[0][0]==config.user_id&&e.runAction("Settings.refresh")},error:a.onError},"User.update_language":{type:"single",call:s.update,callback:function(t){e.runAction(i+".show",t.request.data[0][0]),t.request.data[0][0]==config.user_id&&e.runAction("Settings.refresh"),a.notifyMessage(n.tr("The user must refresh the page for the change to take effect"))},error:a.onError},"User.update_view":{type:"single",call:s.update,callback:function(t){e.runAction(i+".show",t.request.data[0][0]),t.request.data[0][0]==config.user_id&&e.runAction("Settings.refresh"),a.notifyMessage(n.tr("The user must refresh the page for the change to take effect"))},error:a.onError},"User.fetch_quotas":{type:"single",call:s.show,callback:function(t,a){e.getDialog(u).setParams({element:a[r]}),e.getDialog(u).reset(),e.getDialog(u).show()},error:a.onError},"User.quotas_dialog":{type:"custom",call:function(){var t=$("#"+o);if(e.rightInfoVisible(t))$('a[href="#user_quotas_tab"]',t).click(),$("#edit_quotas_button",t).click();else{var a=e.getDataTable(o).elements();1==a.length?e.runAction(i+".fetch_quotas",a[0]):(e.getDialog(u).setParams({element:{}}),e.getDialog(u).reset(),e.getDialog(u).show())}}},"User.set_quota":{type:"multiple",call:s.set_quota,elements:function(){return e.getDataTable(o).elements()},callback:function(t){e.getDialog(u).hide(),e.runAction(i+".show",t.request.data[0])},error:a.onError}};return p}),define("utils/dialogs/dialog",["require","foundation.reveal"],function(t){function e(){return this}function a(){var t=this,e=$(t.html()).appendTo("div#dialogs");return t.setup(e),e.foundation("reveal","reflow"),e.on("opened.fndtn.reveal",function(a){"fndtn.reveal"===a.namespace&&t.onShow(e)}),e.on("opened.fndtn.close",function(){t.onClose&&t.onClose(e)}),e.on("click",".resetDialog",function(){t.reset(),t.show()}),t.dialogElement=e,t.dialogElement}function n(){return this.dialogElement.foundation("reveal","open"),!1}function s(){this.dialogElement.foundation("reveal","close")}function i(){return this.dialogElement.remove(),this.dialogElement=this.insert(),!1}return t("foundation.reveal"),e.prototype={insert:a,show:n,hide:s,reset:i},e}),define("hbs!tabs/users-tab/dialogs/password/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<div id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'" class="reveal-modal" role="dialog" data-reveal >\n  <div class="row">\n    <h3 class="subheader">'+l((e.tr||t&&t.tr||o).call(t,"Update Password",{name:"tr",hash:{},data:n}))+'</h3>\n  </div>\n  <form data-abide="ajax" id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'Form">\n    <div class="row">\n      <div class="large-12 columns">\n        ';return i=null!=(i=e.userCreationHTML||(null!=t?t.userCreationHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"userCreationHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+'\n      </div>\n    </div>\n    <div class="form_buttons row">\n      <button type="submit" class="button radius right">\n        '+l((e.tr||t&&t.tr||o).call(t,"Change",{name:"tr",hash:{},data:n}))+'\n      </button>\n    </div>\n    <a class="close-reveal-modal">&#215;</a>\n  </form>\n</div>'},useData:!0});return e.registerPartial("tabs/users-tab/dialogs/password/html",a),a}),define("hbs!tabs/users-tab/utils/user-creation/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o="function";return'<div class="row name_row">\n  <div class="large-12 columns">\n    <label for="username">'+r((e.tr||t&&t.tr||i).call(t,"Username",{name:"tr",hash:{},data:n}))+'</label>\n    <input required type="text" name="username" id="'+r((s=null!=(s=e.idPrefix||(null!=t?t.idPrefix:t))?s:i,typeof s===o?s.call(t,{name:"idPrefix",hash:{},data:n}):s))+'_username" />\n  </div>\n</div>\n<div class="row password_row">\n  <div class="large-12 columns">\n    <label for="pass">'+r((e.tr||t&&t.tr||i).call(t,"Password",{name:"tr",hash:{},data:n}))+'</label>\n    <input required type="password" name="pass" id="'+r((s=null!=(s=e.idPrefix||(null!=t?t.idPrefix:t))?s:i,typeof s===o?s.call(t,{name:"idPrefix",hash:{},data:n}):s))+'_pass" />\n  </div>\n  <div class="large-12 columns">\n    <label for="confirm_password">'+r((e.tr||t&&t.tr||i).call(t,"Confirm Password",{name:"tr",hash:{},data:n}))+'</label>\n    <input data-equalto="'+r((s=null!=(s=e.idPrefix||(null!=t?t.idPrefix:t))?s:i,typeof s===o?s.call(t,{name:"idPrefix",hash:{},data:n}):s))+'_pass" type="password" name="confirm_password" id="'+r((s=null!=(s=e.idPrefix||(null!=t?t.idPrefix:t))?s:i,typeof s===o?s.call(t,{name:"idPrefix",hash:{},data:n}):s))+'_confirm_password" />\n    <small class="error">'+r((e.tr||t&&t.tr||i).call(t,"Passwords do not match",{name:"tr",hash:{},data:n}))+'</small>\n  </div>\n</div>\n<div class="row auth_driver_row">\n  <div class="large-12 columns">\n    <label for="driver">'+r((e.tr||t&&t.tr||i).call(t,"Authentication",{name:"tr",hash:{},data:n}))+'</label>\n    <select name="driver" id="'+r((s=null!=(s=e.idPrefix||(null!=t?t.idPrefix:t))?s:i,typeof s===o?s.call(t,{name:"idPrefix",hash:{},data:n}):s))+'_driver">\n      <option value="core" selected="selected">'+r((e.tr||t&&t.tr||i).call(t,"Core",{name:"tr",hash:{},data:n}))+'</option>\n      <option value="ssh">'+r((e.tr||t&&t.tr||i).call(t,"SSH",{name:"tr",hash:{},data:n}))+'</option>\n      <option value="x509">'+r((e.tr||t&&t.tr||i).call(t,"x509",{name:"tr",hash:{},data:n}))+'</option>\n      <option value="ldap">'+r((e.tr||t&&t.tr||i).call(t,"LDAP",{name:"tr",hash:{},data:n}))+'</option>\n      <option value="public">'+r((e.tr||t&&t.tr||i).call(t,"Public",{name:"tr",hash:{},data:n}))+'</option>\n      <option value="custom">'+r((e.tr||t&&t.tr||i).call(t,"Custom",{name:"tr",hash:{},data:n}))+'</option>\n    </select>\n    <div>\n      <input type="text" id="'+r((s=null!=(s=e.idPrefix||(null!=t?t.idPrefix:t))?s:i,typeof s===o?s.call(t,{name:"idPrefix",hash:{},data:n}):s))+'_custom_auth" name="custom_auth" />\n    </div>\n  </div>\n</div>'},useData:!0});return e.registerPartial("tabs/users-tab/utils/user-creation/html",a),a}),define("tabs/users-tab/utils/user-creation",["require","hbs!./user-creation/html"],function(t){function e(t,e){this.idPrefix=t,this.options=e,void 0==this.options&&(this.options={}),void 0==this.options.name&&(this.options.name=!0),void 0==this.options.password&&(this.options.password=!0),void 0==this.options.auth_driver&&(this.options.auth_driver=!0)}function a(){return l({idPrefix:this.idPrefix})}function n(t){var e=this;0==this.options.name&&($("#"+e.idPrefix+"_username",t).removeAttr("required"),$(".name_row",t).hide()),0==this.options.password&&($("#"+e.idPrefix+"_pass",t).removeAttr("required"),$(".password_row",t).hide()),0==this.options.auth_driver&&$(".auth_driver_row",t).hide(),$("#"+e.idPrefix+"_driver",t).change(function(){"ldap"==$(this).val()?($("#"+e.idPrefix+"_pass",t).removeAttr("required"),$(".password_row",t).hide()):e.options.password&&($("#"+e.idPrefix+"_pass",t).attr("required",""),$(".password_row",t).show())}),$('input[name="custom_auth"]',t).parent().hide(),$("select#"+e.idPrefix+"_driver",t).change(function(){"custom"==$(this).val()?($('input[name="custom_auth"]',t).parent().show(),$('input[name="custom_auth"]',t).attr("required","")):($('input[name="custom_auth"]',t).parent().hide(),$('input[name="custom_auth"]',t).removeAttr("required"))})}function s(t){var e=this,a=$("#"+e.idPrefix+"_username",t).val(),n=$("#"+e.idPrefix+"_pass",t).val(),s=$("#"+e.idPrefix+"_driver",t).val();return"custom"==s?s=$('input[name="custom_auth"]',t).val():"ldap"==s&&(n="-"),{name:a,password:n,auth_driver:s}}function i(t){var e=this;$("#"+e.idPrefix+"_username",t).attr("disabled","disabled").removeAttr("required"),$("#"+e.idPrefix+"_pass",t).attr("disabled","disabled").removeAttr("required"),$("#"+e.idPrefix+"_confirm_password",t).attr("disabled","disabled").removeAttr("required"),$("#"+e.idPrefix+"_driver",t).attr("disabled","disabled").removeAttr("required"),$("#"+e.idPrefix+"_custom_auth",t).attr("disabled","disabled").removeAttr("required")}function r(t){var e=this;$("#"+e.idPrefix+"_username",t).removeAttr("disabled").attr("required",""),$("#"+e.idPrefix+"_pass",t).removeAttr("disabled").attr("required",""),$("#"+e.idPrefix+"_confirm_password",t).removeAttr("disabled").attr("required",""),$("#"+e.idPrefix+"_driver",t).removeAttr("disabled").attr("required",""),$("#"+e.idPrefix+"_custom_auth",t).removeAttr("disabled"),$("select#"+e.idPrefix+"_driver",t).change()}function o(t,e){$("#"+this.idPrefix+"_username",t).val(e)}var l=t("hbs!./user-creation/html");return e.prototype.constructor=e,e.prototype.html=a,e.prototype.setup=n,e.prototype.retrieve=s,e.prototype.enable=r,e.prototype.disable=i,e.prototype.setName=o,e}),define("tabs/users-tab/dialogs/password",["require","utils/dialogs/dialog","hbs!./password/html","sunstone","utils/notifier","utils/locale","tabs/users-tab/utils/user-creation","./password/dialogId","../tabId"],function(t){function e(){this.dialogId=p,this.userCreation=new u(p,{name:!1,auth_driver:!1}),r.call(this)}function a(t){this.selectedElements=t.selectedElements}function n(){return o({dialogId:this.dialogId,userCreationHTML:this.userCreation.html()})}function s(t){var e=this;return this.userCreation.setup(t),t.off("invalid.fndtn.abide","#"+p+"Form"),t.off("valid.fndtn.abide","#"+p+"Form"),t.on("invalid.fndtn.abide","#"+p+"Form",function(t){"abide.fndtn"==t.namespace&&c.notifyError(d.tr("One or more required fields are missing or malformed."))}).on("valid.fndtn.abide","#"+p+"Form",function(a){if("abide.fndtn"==a.namespace){var n=e.userCreation.retrieve(t);return l.runAction("User.passwd",e.selectedElements,n.password),l.getDialog(p).hide(),l.getDialog(p).reset(),l.runAction("User.refresh"),!1}}),t.foundation("reflow","abide"),!1}function i(){return!1}{var r=t("utils/dialogs/dialog"),o=t("hbs!./password/html"),l=t("sunstone"),c=t("utils/notifier"),d=t("utils/locale"),u=t("tabs/users-tab/utils/user-creation"),p=t("./password/dialogId");t("../tabId")}return e.DIALOG_ID=p,e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype.html=n,e.prototype.onShow=i,e.prototype.setup=s,e.prototype.setParams=a,e}),define("hbs!tabs/users-tab/dialogs/auth-driver/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<div id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'" class="reveal-modal" role="dialog" data-reveal >\n  <div class="row">\n    <h3 class="subheader">'+l((e.tr||t&&t.tr||o).call(t,"Change authentication",{name:"tr",hash:{},data:n}))+'</h3>\n  </div>\n  <form data-abide="ajax" id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'Form">\n    <div class="row">\n      <div class="large-12 columns">\n        ';return i=null!=(i=e.userCreationHTML||(null!=t?t.userCreationHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"userCreationHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+'\n      </div>\n    </div>\n    <div class="form_buttons row">\n      <button type="submit" class="button radius right">\n        '+l((e.tr||t&&t.tr||o).call(t,"Change",{name:"tr",hash:{},data:n}))+'\n      </button>\n    </div>\n    <a class="close-reveal-modal">&#215;</a>\n  </form>\n</div>'},useData:!0});return e.registerPartial("tabs/users-tab/dialogs/auth-driver/html",a),a}),define("tabs/users-tab/dialogs/auth-driver",["require","utils/dialogs/dialog","hbs!./auth-driver/html","sunstone","utils/notifier","utils/locale","tabs/users-tab/utils/user-creation","./auth-driver/dialogId","../tabId"],function(t){function e(){this.dialogId=u,this.userCreation=new d(u,{name:!1,password:!1}),i.call(this)}function a(){return r({dialogId:this.dialogId,userCreationHTML:this.userCreation.html()})}function n(t){var e=this;return this.userCreation.setup(t),t.off("invalid.fndtn.abide","#"+u+"Form"),t.off("valid.fndtn.abide","#"+u+"Form"),t.on("invalid.fndtn.abide","#"+u+"Form",function(t){"abide.fndtn"==t.namespace&&l.notifyError(c.tr("One or more required fields are missing or malformed."))}).on("valid.fndtn.abide","#"+u+"Form",function(a){if("abide.fndtn"==a.namespace){var n=e.userCreation.retrieve(t),s=o.getDataTable(p).elements();return o.runAction("User.chauth",s,n.auth_driver),o.getDialog(u).hide(),o.getDialog(u).reset(),o.runAction("User.refresh"),!1}}),t.foundation("reflow","abide"),!1}function s(){return!1}var i=t("utils/dialogs/dialog"),r=t("hbs!./auth-driver/html"),o=t("sunstone"),l=t("utils/notifier"),c=t("utils/locale"),d=t("tabs/users-tab/utils/user-creation"),u=t("./auth-driver/dialogId"),p=t("../tabId");return e.DIALOG_ID=u,e.prototype=Object.create(i.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=s,e.prototype.setup=n,e}),define("hbs!tabs/users-tab/dialogs/quotas/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<div id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'" class="reveal-modal large max-height" role="dialog" data-reveal >\n  <div class="row">\n    <h3 class="subheader">'+l((e.tr||t&&t.tr||o).call(t,"Update Quota",{name:"tr",hash:{},data:n}))+'</h3>\n  </div>\n  <form data-abide="ajax" id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'Form">\n    <div class="row">\n      <div class="large-12 columns">\n        ';return i=null!=(i=e.quotasHTML||(null!=t?t.quotasHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"quotasHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+'\n      </div>\n    </div>\n    <div class="form_buttons row">\n      <button type="submit" class="button radius right" value="User.set_quota">\n        '+l((e.tr||t&&t.tr||o).call(t,"Apply changes",{name:"tr",hash:{},data:n}))+'\n      </button>\n    </div>\n    <a class="close-reveal-modal">&#215;</a>\n  </form>\n</div>'},useData:!0});return e.registerPartial("tabs/users-tab/dialogs/quotas/html",a),a}),define("tabs/users-tab/dialogs/quotas",["require","utils/dialogs/dialog","hbs!./quotas/html","utils/locale","utils/quotas/quota-defaults","utils/quotas/quota-widgets","./quotas/dialogId","../tabId"],function(t){function e(){this.dialogId=d,this.element=void 0,r.call(this)}function a(){return o({dialogId:this.dialogId,quotasHTML:c.dialogHTML()})}function n(t){return c.setupQuotasDialog(t),!1}function s(t){this.element=t.element}function i(t){return c.populateQuotasDialog(this.element,l.getDefaultQuotas(u),t),!1}var r=t("utils/dialogs/dialog"),o=t("hbs!./quotas/html"),l=(t("utils/locale"),t("utils/quotas/quota-defaults")),c=t("utils/quotas/quota-widgets"),d=t("./quotas/dialogId"),u=(t("../tabId"),"User");return e.DIALOG_ID=d,e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=i,e.prototype.setup=n,e.prototype.setParams=s,e}),define("templates/helpers/valOrDefault",["require","hbs/handlebars","utils/locale"],function(t){var e=t("hbs/handlebars"),a=(t("utils/locale"),function(t,a){var n=t||a;return new e.SafeString(n)});return e.registerHelper("valOrDefault",a),a}),define("hbs!tabs/users-tab/panels/info/html",["hbs","hbs/handlebars","templates/helpers/tr","templates/helpers/valOrDefault"],function(t,e){var a=e.template({1:function(t){var e,a=this.lambda,n=this.escapeExpression;return"        "+n(a(null!=(e=null!=(e=null!=t?t.element:t)?e.TEMPLATE:e)?e.SSH_PUBLIC_KEY:e,t))+"\n"},3:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return"        "+i((e.tr||t&&t.tr||s).call(t,"You can provide a SSH Key for this User clicking on the edit button",{name:"tr",hash:{},data:n}))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,c="function",d='<div class="row">\n  <div class="large-6 columns">\n    <table id="info_user_table" class="dataTable extended_table" cellpadding="0" cellspacing="0" border="0">\n      <thead>\n        <tr>\n          <th colspan="3">'+o((e.tr||t&&t.tr||r).call(t,"Information",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"ID",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s.ID:s,t))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Name",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s.NAME:s,t))+"</td>\n          <td></td>\n        </tr>\n        ";return i=null!=(i=e.groupTrHTML||(null!=t?t.groupTrHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"groupTrHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+='\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Secondary groups",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o((i=null!=(i=e.secondaryGroups||(null!=t?t.secondaryGroups:t))?i:r,typeof i===c?i.call(t,{name:"secondaryGroups",hash:{},data:n}):i))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Authentication driver",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s.AUTH_DRIVER:s,t))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Password",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td" colspan="2">\n            <button id="update_password" type="button" class="button tiny radius secondary" >\n              '+o((e.tr||t&&t.tr||r).call(t,"Update password",{name:"tr",hash:{},data:n}))+' <a><i class="fa fa-pencil-square-o"/></a>\n            </button>\n          </td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Table Order",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td_table_order">'+o((e.valOrDefault||t&&t.valOrDefault||r).call(t,null!=(s=null!=(s=null!=t?t.element:t)?s.TEMPLATE:s)?s.TABLE_ORDER:s,"-",{name:"valOrDefault",hash:{},data:n}))+'</td>\n          <td>\n            <div id="div_edit_table_order">\n              <a id="div_edit_table_order_link" class="edit_e" href="#"> <i class="fa fa-pencil-square-o right"/></a>\n            </div>\n          </td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Language",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td_language">'+o((e.valOrDefault||t&&t.valOrDefault||r).call(t,null!=(s=null!=(s=null!=t?t.element:t)?s.TEMPLATE:s)?s.LANG:s,"-",{name:"valOrDefault",hash:{},data:n}))+'</td>\n          <td>\n            <div id="div_edit_language">\n              <a id="div_edit_language_link" class="edit_e" href="#"> <i class="fa fa-pencil-square-o right"/></a>\n            </div>\n          </td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"View",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td_view">'+o((e.valOrDefault||t&&t.valOrDefault||r).call(t,null!=(s=null!=(s=null!=t?t.element:t)?s.TEMPLATE:s)?s.DEFAULT_VIEW:s,"-",{name:"valOrDefault",hash:{},data:n}))+'</td>\n          <td>\n            <div id="div_edit_view">\n              <a id="div_edit_view_link" class="edit_e" href="#"> <i class="fa fa-pencil-square-o right"/></a>\n            </div>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <div class="large-6 columns">\n    <table class="dataTable extended_table" cellpadding="0" cellspacing="0" border="0">\n      <thead>\n        <tr>\n          <th>'+o((e.tr||t&&t.tr||r).call(t,"Public SSH Key",{name:"tr",hash:{},data:n}))+'</th>\n          <th>\n            <a class="user_ssh_public_key_edit right" href="#"><i class="fa fa-pencil-square-o"></i></a>\n          </th>\n        </tr>\n      </thead>\n    </table>\n    <textarea rows="6" type="text" id="user_ssh_public_key_textarea" name="ssh_public_key" class="hidden">'+o(l(null!=(s=null!=(s=null!=t?t.element:t)?s.TEMPLATE:s)?s.SSH_PUBLIC_KEY:s,t))+'</textarea>\n    <p id="user_ssh_public_key_text" name="ssh_public_key">\n',s=e["if"].call(t,null!=(s=null!=(s=null!=t?t.element:t)?s.TEMPLATE:s)?s.SSH_PUBLIC_KEY:s,{name:"if",hash:{},fn:this.program(1,n),inverse:this.program(3,n),data:n}),null!=s&&(d+=s),d+='    </p>\n  </div>\n</div>\n<div class="row">\n  <div class="large-9 columns">\n    ',i=null!=(i=e.templateTableHTML||(null!=t?t.templateTableHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"templateTableHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+"\n  </div>\n</div>"
},useData:!0});return e.registerPartial("tabs/users-tab/panels/info/html",a),a}),define("hbs!tabs/users-tab/panels/info/chgrp-tr",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o=this.lambda;return'<tr>\n  <td class="key_td">'+r((e.tr||t&&t.tr||i).call(t,"Group",{name:"tr",hash:{},data:n}))+'</td>\n  <td id="value_td_group">'+r(o(null!=(s=null!=t?t.element:t)?s.GNAME:s,t))+'</td>\n  <td>\n    <div id="div_edit_chg_group">\n      <a id="div_edit_chg_group_link" class="edit_e" href="#"> <i class="fa fa-pencil-square-o right"/></a>\n    </div>\n  </td>\n</tr>'},useData:!0});return e.registerPartial("tabs/users-tab/panels/info/chgrp-tr",a),a}),define("utils/panel/template-table",["require","utils/locale","sunstone","utils/template-utils"],function(t){function e(t,e,n){var i='<table id="'+e.toLowerCase()+'_template_table" class="dataTable configuration_attrs"  cellpadding="0" cellspacing="0" border="0">                   <thead>                     <tr>                       <th colspan="3">'+n+"</th>                     </tr>                    </thead>"+a(t,e)+'<tr>                      <td class="key_td"><input type="text" name="new_key" id="new_key" /></td>                      <td class="value_td"><textarea rows="1" type="text" name="new_value" id="new_value"></textarea></td>                      <td class="text-right"><button type="button" id="button_add_value" class="button small secondary">'+s.tr("Add")+"</button></td>                    </tr></table>";return i}function a(t,e,a,s){var i="";if(!t)return"Not defined";var r=null;for(r in t)i+=n(r,t[r],e,a,s);return i}function n(t,e,i,r,o){var l="";if(e.constructor==Array){var c=null;for(c=0;c<e.length;++c){var d=e[c];"object"==typeof d?(l+='<tr id="'+i.toLowerCase()+"_template_table_"+t+'">                             <td class="key_td key_vectorial_td">'+s.tr(t)+'</td>                             <td class="value_vectorial_td"></td>                             <td class="text-right">                               <span id="div_add_vectorial">                                 <a id="div_add_vectorial_'+t+'" class="add_vectorial_a ocurrence_'+c+" vectorial_key_"+t+'" href="#"><i class="fa fa-plus-sign"/></a>                               </span>&emsp;                               <span id="div_minus">                                 <a id="div_minus_'+t+'" class="remove_vectorial_x ocurrence_'+c+'" href="#"><i class="fa fa-pencil-square-o"/><i class="fa fa-trash-o"/></a>                               </span>                             </td>',l+=a(d,i,t,c)):l+=n(t,d,i,!1,c)}}else{var u="";null!=o&&(u=" ocurrence_"+o),r?l+='<tr>                       <td class="key_td key_vectorial_td">&emsp;&emsp;'+s.tr(t)+'</td>                       <td class="value_td value_vectorial_td value_td_input_'+t+u+" vectorial_key_"+r+'" id="value_td_input_'+t+'">'+e+'</td>                       <td class="text-right">                         <span id="div_edit_vectorial">                           <a id="div_edit_'+t+'" class="edit_e'+u+" vectorial_key_"+r+'" href="#"><i class="fa fa-pencil-square-o"/></a>                         </span>&emsp;                         <span id="div_minus_vectorial">                           <a id="div_minus_'+t+'" class="remove_x'+u+" vectorial_key_"+r+'" href="#"><i class="fa fa-trash-o"/></a>                         </span>                       </td>                     </tr>':"object"==typeof e?(l+='<tr id="'+i.toLowerCase()+"_template_table_"+t+'">                             <td class="key_td key_vectorial_td">'+s.tr(t)+'</td>                             <td class="value_vectorial_td"></td>                             <td class="text-right">                               <span id="div_add_vectorial">                                 <a id="div_add_vectorial_'+t+'" class="add_vectorial_a'+u+" vectorial_key_"+t+'" href="#"><i class="fa fa-plus-sign"/></a>                               </span>&emsp;                               <span id="div_minus">                                 <a id="div_minus_'+t+'" class="remove_vectorial_x'+u+'" href="#"><i class="fa fa-trash-o"/></a>                               </span>                             </td>',l+=a(e,i,t,o)):l+='<tr>                           <td class="key_td">'+s.tr(t)+'</td>                           <td class="value_td" id="value_td_input_'+t+'">'+e+'</td>                           <td class="text-right">                             <span id="div_edit">                               <a id="div_edit_'+t+'" class="edit_e'+u+'" href="#"><i class="fa fa-pencil-square-o"/></a>                             </span>&emsp;                             <span id="div_minus">                               <a id="div_minus_'+t+'" class="remove_x'+u+'" href="#"><i class="fa fa-trash-o"/></a>                             </span>                           </td>                         </tr>'}return l}var s=t("utils/locale"),i=t("sunstone"),r=t("utils/template-utils"),o=function(t,e,a,n,o){n.off("keypress","#new_key"),n.off("keypress","#new_value"),n.off("keypress","#new_value_vectorial"),n.off("click","#div_minus"),n.off("click","#div_edit"),n.off("change",".input_edit_value"),n.off("click","#div_edit_vectorial"),n.off("change",".input_edit_value_vectorial"),n.off("click","#div_minus_vectorial"),n.off("click","#button_add_value"),n.off("click","#button_add_value_vectorial"),n.off("click","#div_add_vectorial"),n.on("click","#button_add_value",function(){if(new_value=$("#new_value",$(this).parent().parent()).val(),new_key=$("#new_key",$(this).parent().parent()).val(),""!=new_key){var n=$.extend({},t);t[$.trim(new_key)]&&t[$.trim(new_key)]instanceof Array?t[$.trim(new_key)].push($.trim(new_value)):t[$.trim(new_key)]=$.trim(new_value),template_str=r.templateToString(t,o),i.runAction(e+".update_template",a,template_str),t=n}}),n.on("keypress","#new_value",function(t){var e=t||window.event,a=e.keyCode;13!=a||e.altKey||($("#button_add_value",$(this).parent().parent()).click(),e.preventDefault())}),n.on("click","#div_minus",function(){field=this.firstElementChild.id.substring(10,this.firstElementChild.id.length);var n=this.firstElementChild.className.split(" "),s=null;1!=n.length&&$.each(n,function(t,e){e.match(/^ocurrence_/)&&(s=e.substring(10,e.length))}),null!=s?t[field].splice(s,1):delete t[field],template_str=r.templateToString(t,o),i.runAction(e+".update_template",a,template_str)}),n.on("click","#div_edit",function(){var t=this.firstElementChild.id.substring(9,this.firstElementChild.id.length),e=$("#value_td_input_"+t).text();input=$("#value_td_input_"+t).html('<textarea class="input_edit_value" id="input_edit_'+t+'" type="text"></textarea>'),$("#input_edit_"+t).val(e),n.off("keypress","#input_edit_"+t),n.on("keypress","#input_edit_"+t,function(e){var a=e||window.event,n=a.keyCode;13!=n||a.altKey||$("#input_edit_"+t).blur()})}),n.on("change",".input_edit_value",function(){var n=$.trim(this.id.substring(11,this.id.length)),s=$.trim(this.value),l=$.extend({},t);delete t[n],t[n]=s,template_str=r.templateToString(t,o),i.runAction(e+".update_template",a,template_str),t=l}),n.on("click","#div_edit_vectorial",function(){var t=$.trim(this.firstElementChild.id.substring(9,this.firstElementChild.id.length)),e=this.firstElementChild.className.split(" "),a=" ",n=null;if(1!=e.length&&$.each(e,function(t,e){e.match(/^ocurrence_/)&&(a+=e+" ")}),1!=e.length&&$.each(e,function(t,e){e.match(/^vectorial_key_/)&&(n=e)})," "!=a){var s=$.trim($(".value_td_input_"+t+"."+a.substring(1,a.length-1)+"."+n).text());$(".value_td_input_"+t+"."+a.substring(1,a.length-1)+"."+n).html('<input class="input_edit_value_vectorial'+a+n+'" id="input_edit_'+t+'" type="text" value="'+s+'"/>')}else{var s=$.trim($(".value_td_input_"+t+"."+n).text());$(".value_td_input_"+t+"."+n).html('<input class="input_edit_value_vectorial'+a+n+'" id="input_edit_'+t+'" type="text" value="'+s+'"/>')}}),n.on("change",".input_edit_value_vectorial",function(){var n=$.trim(this.id.substring(11,this.id.length)),s=$.trim(this.value),l=$.extend({},t),c=this.className.split(" "),d=null,u=null;1!=c.length&&$.each(c,function(t,e){e.match(/^ocurrence_/)&&(d=e.substring(10,e.length))}),1!=c.length&&$.each(c,function(t,e){e.match(/^vectorial_key_/)&&(u=e.substring(14,e.length))}),null!=d?t[u][d][n]=s:t[u][n]=s,template_str=r.templateToString(t,o),i.runAction(e+".update_template",a,template_str),t=l}),n.on("click","#div_minus_vectorial",function(){var n=this.firstElementChild.id.substring(10,this.firstElementChild.id.length),s=this.firstElementChild.className.split(" "),l=null,c=null;1!=s.length&&$.each(s,function(t,e){e.match(/^ocurrence_/)&&(l=e.substring(10,e.length))}),1!=s.length&&$.each(s,function(t,e){e.match(/^vectorial_key_/)&&(c=e.substring(14,e.length))}),null!=l?delete t[c][l][n]:delete t[c][n],template_str=r.templateToString(t,o),i.runAction(e+".update_template",a,template_str)}),n.on("click","#div_add_vectorial",function(){if(!$("#button_add_value_vectorial").html()){var t=(this.firstElementChild.id.substring(18,this.firstElementChild.id.length),this.firstElementChild.className.split(" ")),e=null,a=null;1!=t.length&&$.each(t,function(t,a){a.match(/^ocurrence_/)&&(e=a)}),1!=t.length&&$.each(t,function(t,e){e.match(/^vectorial_key_/)&&(a=e)}),$(this).parent().parent().after('<tr>                                                <td class="key_td"><input type="text" style="text-align:center" name="new_key_vectorial" id="new_key_vectorial" /></td>                                                <td class="value_td"><input type="text" name="new_value" id="new_value_vectorial" /></td>                                                <td class=""><button class="'+a+" "+e+'" id="button_add_value_vectorial">'+s.tr("Add")+"</button></td>                                               </tr>")}}),n.on("click","#button_add_value_vectorial",function(){if(""!=$("#new_value_vectorial").val()&&""!=$("#new_key_vectorial").val()){var n=this.className.split(" "),s=null,l=null,c=$.extend({},t);1!=n.length&&$.each(n,function(t,e){e.match(/^vectorial_key_/)&&(l=e)}),1!=n.length&&$.each(n,function(t,e){e.match(/^ocurrence_/)&&(s=e)}),l=l.substring(14,l.length),null!=s?(s=s.substring(10,s.length),t[l][s][$("#new_key_vectorial").val()]=$.trim($("#new_value_vectorial").val())):t[l][$("#new_key_vectorial").val()]=$.trim($("#new_value_vectorial").val()),template_str=r.templateToString(t,o),i.runAction(e+".update_template",a,template_str),t=c}}),n.on("keypress","#new_value_vectorial",function(t){var e=t||window.event,a=e.keyCode;13==a&&($("#button_add_value_vectorial").click(),e.preventDefault())})};return{html:e,setup:o}}),define("tabs/users-tab/panels/info/panelId",["require"],function(){return"user_info_tab"}),define("tabs/users-tab/panels/info",["require","hbs!./info/html","hbs!./info/chgrp-tr","utils/resource-select","utils/locale","opennebula/user","sunstone","utils/panel/template-table","../tabId","./info/panelId","tabs/users-tab/dialogs/password/dialogId"],function(t){function e(t){return this.title=o.tr("Info"),this.icon="fa-info-circle",this.element=t[h],this}function a(){var t,e=i({element:this.element});t="object"==typeof this.element.GROUPS.ID?this.element.GROUPS.ID.join(","):"-";var a=$.extend({},this.element.TEMPLATE);delete a.SSH_PUBLIC_KEY,delete a.LANG,delete a.TABLE_ORDER,delete a.DEFAULT_VIEW;var n=d.html(a,p,o.tr("Attributes"));return s({element:this.element,groupTrHTML:e,secondaryGroups:t,templateTableHTML:n})}function n(t){var e=this,a=$.extend({},this.element.TEMPLATE);delete a.SSH_PUBLIC_KEY,delete a.LANG,delete a.TABLE_ORDER,delete a.DEFAULT_VIEW;var n={};return void 0!=this.element.TEMPLATE.SSH_PUBLIC_KEY&&(n.SSH_PUBLIC_KEY=this.element.TEMPLATE.SSH_PUBLIC_KEY),void 0!=this.element.TEMPLATE.LANG&&(n.LANG=this.element.TEMPLATE.LANG),void 0!=this.element.TEMPLATE.TABLE_ORDER&&(n.TABLE_ORDER=this.element.TEMPLATE.TABLE_ORDER),void 0!=this.element.TEMPLATE.DEFAULT_VIEW&&(n.DEFAULT_VIEW=this.element.TEMPLATE.DEFAULT_VIEW),d.setup(a,p,this.element.ID,t,n),t.off("click","#div_edit_chg_group_link"),t.on("click","#div_edit_chg_group_link",function(){r.insert("#value_td_group",t,"Group",e.element.GID,!1)}),t.off("change","#value_td_group .resource_list_select"),t.on("change","#value_td_group .resource_list_select",function(){var t=$(this).val();""!=t&&c.runAction(p+".chgrp",[e.element.ID],t)}),t.off("click",".user_ssh_public_key_edit"),t.on("click",".user_ssh_public_key_edit",function(){$("#user_ssh_public_key_text",t).hide(),$("#user_ssh_public_key_textarea",t).show().focus()}),t.off("click","#update_password"),t.on("click","#update_password",function(){c.getDialog(f).setParams({selectedElements:[e.element.ID]}),c.getDialog(f).reset(),c.getDialog(f).show()}),t.off("change","#user_ssh_public_key_textarea"),t.on("change","#user_ssh_public_key_textarea",function(){var a=e.element.ID;l.show({data:{id:a},success:function(){var n=e.element.TEMPLATE;n.SSH_PUBLIC_KEY=$("#user_ssh_public_key_textarea",t).val(),template_str="",$.each(n,function(t,e){template_str+=t+'="'+e+'"\n'}),c.runAction("User.update_template",a,template_str)}})}),t.off("focusout","#user_ssh_public_key_textarea"),t.on("focusout","#user_ssh_public_key_textarea",function(){$("#user_ssh_public_key_text",t).show(),$("#user_ssh_public_key_textarea",t).hide()}),t.off("click","#div_edit_table_order"),t.on("click","#div_edit_table_order",function(){$(".value_td_table_order",t).html('<select id="table_order_select"><option value="asc">'+o.tr("ascending")+'</option><option value="desc">'+o.tr("descending")+"</option></select>"),e.element.TEMPLATE.TABLE_ORDER&&$("#table_order_select",t).val(e.element.TEMPLATE.TABLE_ORDER)}),t.off("change","#table_order_select"),t.on("change","#table_order_select",function(){var a=e.element.ID;l.show({data:{id:a},success:function(){var n=e.element.TEMPLATE;n.TABLE_ORDER=$("#table_order_select",t).val(),template_str="",$.each(n,function(t,e){template_str+=t+'="'+e+'"\n'}),c.runAction("User.update_template",a,template_str)}})}),t.off("click","#div_edit_language"),t.on("click","#div_edit_language",function(){$(".value_td_language",t).html('<select id="language_select">'+o.language_options+"</select>"),e.element.TEMPLATE.LANG&&$("#language_select",t).val(e.element.TEMPLATE.LANG)}),t.off("change","#language_select"),t.on("change","#language_select",function(){var a=e.element.ID;l.show({data:{id:a},success:function(){var n=e.element.TEMPLATE;n.LANG=$("#language_select",t).val(),template_str="",$.each(n,function(t,e){template_str+=t+'="'+e+'"\n'}),c.runAction("User.update_language",a,template_str)}})}),t.off("click","#div_edit_view"),t.on("click","#div_edit_view",function(){var a="";$.each(config.available_views,function(t,e){a+='<option value="'+e+'">'+e+"</option>"}),$(".value_td_view",t).html('<select id="view_select">'+a+"</select>"),e.element.TEMPLATE.DEFAULT_VIEW&&$("#view_select",t).val(e.element.TEMPLATE.DEFAULT_VIEW)}),t.off("change","#view_select"),t.on("change","#view_select",function(){var a=e.element.ID;l.show({data:{id:a},success:function(){var n=e.element.TEMPLATE;n.DEFAULT_VIEW=$("#view_select",t).val(),template_str="",$.each(n,function(t,e){template_str+=t+'="'+e+'"\n'}),c.runAction("User.update_view",a,template_str)}})}),!1}var s=t("hbs!./info/html"),i=t("hbs!./info/chgrp-tr"),r=t("utils/resource-select"),o=t("utils/locale"),l=t("opennebula/user"),c=t("sunstone"),d=t("utils/panel/template-table"),u=(t("../tabId"),t("./info/panelId")),p="User",h="USER",f=t("tabs/users-tab/dialogs/password/dialogId");return e.PANEL_ID=u,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/users-tab/panels/quotas/panelId",["require"],function(){return"user_quotas_tab"}),define("tabs/users-tab/panels/quotas",["require","utils/locale","sunstone-config","utils/quotas/quota-defaults","utils/quotas/quota-widgets","../tabId","./quotas/panelId"],function(t){function e(t,e){return this.tabId=e||l,this.title=s.tr("Quotas"),this.icon="fa-align-left",this.element=t[u],this}function a(){return o.initQuotasPanel(this.element,r.getDefaultQuotas(d),i.isTabActionEnabled(this.tabId,d+".quotas_dialog"))}function n(t){return o.setupQuotasPanel(this.element,t,i.isTabActionEnabled(this.tabId,d+".quotas_dialog"),d),!1}var s=t("utils/locale"),i=t("sunstone-config"),r=t("utils/quotas/quota-defaults"),o=t("utils/quotas/quota-widgets"),l=t("../tabId"),c=t("./quotas/panelId"),d="User",u="USER";return e.PANEL_ID=c,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/users-tab/panels/accounting/panelId",["require"],function(){return"user_accounting_tab"}),define("tabs/users-tab/panels/accounting",["require","utils/locale","utils/accounting","../tabId","./accounting/panelId"],function(t){function e(t){return this.title=s.tr("Accounting"),this.icon="fa-bar-chart-o",this.element=t[o],this}function a(){return i.html()}function n(t){i.setup(t,{fixed_user:this.element.ID,init_group_by:"vm"})}var s=t("utils/locale"),i=t("utils/accounting"),r=(t("../tabId"),t("./accounting/panelId")),o="USER";return e.PANEL_ID=r,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/users-tab/panels/showback/panelId",["require"],function(){return"user_showback_tab"}),define("tabs/users-tab/panels/showback",["require","utils/locale","sunstone-config","utils/showback","../tabId","./showback/panelId"],function(t){function e(t){if(this.title=s.tr("Showback"),this.icon="fa-money",this.element=t[l],!i.isFeatureEnabled("showback"))throw"Showback is disabled in the configuration";return this}function a(){return r.html()}function n(t){r.setup(t,{fixed_user:this.element.ID,fixed_group:""})}var s=t("utils/locale"),i=t("sunstone-config"),r=t("utils/showback"),o=(t("../tabId"),t("./showback/panelId")),l="USER";return e.PANEL_ID=o,e.prototype.html=a,e.prototype.setup=n,e}),function(t,e,a){"use strict";Foundation.libs.abide={name:"abide",version:"5.5.1",settings:{live_validate:!0,validate_on_blur:!0,focus_on_invalid:!0,error_labels:!0,error_class:"error",timeout:1e3,patterns:{alpha:/^[a-zA-Z]+$/,alpha_numeric:/^[a-zA-Z0-9]+$/,integer:/^[-+]?\d+$/,number:/^[-+]?\d*(?:[\.\,]\d+)?$/,card:/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,cvv:/^([0-9]){3,4}$/,email:/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+$/,url:/^(https?|ftp|file|ssh):\/\/(((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-zA-Z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-zA-Z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/,domain:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,8}$/,datetime:/^([0-2][0-9]{3})\-([0-1][0-9])\-([0-3][0-9])T([0-5][0-9])\:([0-5][0-9])\:([0-5][0-9])(Z|([\-\+]([0-1][0-9])\:00))$/,date:/(?:19|20)[0-9]{2}-(?:(?:0[1-9]|1[0-2])-(?:0[1-9]|1[0-9]|2[0-9])|(?:(?!02)(?:0[1-9]|1[0-2])-(?:30))|(?:(?:0[13578]|1[02])-31))$/,time:/^(0[0-9]|1[0-9]|2[0-3])(:[0-5][0-9]){2}$/,dateISO:/^\d{4}[\/\-]\d{1,2}[\/\-]\d{1,2}$/,month_day_year:/^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.]\d{4}$/,day_month_year:/^(0[1-9]|[12][0-9]|3[01])[- \/.](0[1-9]|1[012])[- \/.]\d{4}$/,color:/^#?([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$/},validators:{equalTo:function(t){var e=a.getElementById(t.getAttribute(this.add_namespace("data-equalto"))).value,n=t.value,s=e===n;return s}}},timer:null,init:function(t,e,a){this.bindings(e,a)},events:function(e){var a=this,n=a.S(e).attr("novalidate","novalidate"),s=n.data(this.attr_name(!0)+"-init")||{};this.invalid_attr=this.add_namespace("data-invalid"),n.off(".abide").on("submit.fndtn.abide validate.fndtn.abide",function(t){var e=/ajax/i.test(a.S(this).attr(a.attr_name()));return a.validate(a.S(this).find("input, textarea, select").get(),t,e)}).on("reset",function(){return a.reset(t(this))}).find("input, textarea, select").off(".abide").on("blur.fndtn.abide change.fndtn.abide",function(t){s.validate_on_blur===!0&&a.validate([this],t)}).on("keydown.fndtn.abide",function(t){s.live_validate===!0&&9!=t.which&&(clearTimeout(a.timer),a.timer=setTimeout(function(){a.validate([this],t)}.bind(this),s.timeout))})},reset:function(e){e.removeAttr(this.invalid_attr),t(this.invalid_attr,e).removeAttr(this.invalid_attr),t("."+this.settings.error_class,e).not("small").removeClass(this.settings.error_class)},validate:function(t,e,a){for(var n=this.parse_patterns(t),s=n.length,i=this.S(t[0]).closest("form"),r=/submit/.test(e.type),o=0;s>o;o++)if(!n[o]&&(r||a))return this.settings.focus_on_invalid&&t[o].focus(),i.trigger("invalid").trigger("invalid.fndtn.abide"),this.S(t[o]).closest("form").attr(this.invalid_attr,""),!1;return(r||a)&&i.trigger("valid").trigger("valid.fndtn.abide"),i.removeAttr(this.invalid_attr),a?!1:!0},parse_patterns:function(t){for(var e=t.length,a=[];e--;)a.push(this.pattern(t[e]));return this.check_validation_and_apply_styles(a)},pattern:function(t){var e=t.getAttribute("type"),a="string"==typeof t.getAttribute("required"),n=t.getAttribute("pattern")||"";return this.settings.patterns.hasOwnProperty(n)&&n.length>0?[t,this.settings.patterns[n],a]:n.length>0?[t,new RegExp(n),a]:this.settings.patterns.hasOwnProperty(e)?[t,this.settings.patterns[e],a]:(n=/.*/,[t,n,a])},check_validation_and_apply_styles:function(e){var a=e.length,n=[],s=this.S(e[0][0]).closest("[data-"+this.attr_name(!0)+"]");for(s.data(this.attr_name(!0)+"-init")||{};a--;){var i,r,o=e[a][0],l=e[a][2],c=o.value.trim(),d=this.S(o).parent(),u=o.getAttribute(this.add_namespace("data-abide-validator")),p="radio"===o.type,h="checkbox"===o.type,f=this.S('label[for="'+o.getAttribute("id")+'"]'),m=l?o.value.length>0:!0,_=[];if(o.getAttribute(this.add_namespace("data-equalto"))&&(u="equalTo"),i=d.is("label")?d.parent():d,u&&(r=this.settings.validators[u].apply(this,[o,l,i]),_.push(r)),p&&l)_.push(this.valid_radio(o,l));else if(h&&l)_.push(this.valid_checkbox(o,l));else if(_.push(e[a][1].test(c)&&m||!l&&o.value.length<1||t(o).attr("disabled")?!0:!1),_=[_.every(function(t){return t})],_[0])this.S(o).removeAttr(this.invalid_attr),o.setAttribute("aria-invalid","false"),o.removeAttribute("aria-describedby"),i.removeClass(this.settings.error_class),f.length>0&&this.settings.error_labels&&f.removeClass(this.settings.error_class).removeAttr("role"),t(o).triggerHandler("valid");else{this.S(o).attr(this.invalid_attr,""),o.setAttribute("aria-invalid","true");var b=i.find("small."+this.settings.error_class,"span."+this.settings.error_class),v=b.length>0?b[0].id:"";v.length>0&&o.setAttribute("aria-describedby",v),i.addClass(this.settings.error_class),f.length>0&&this.settings.error_labels&&f.addClass(this.settings.error_class).attr("role","alert"),t(o).triggerHandler("invalid")}n.push(_[0])}return n=[n.every(function(t){return t})]},valid_checkbox:function(t,e){var t=this.S(t),a=t.is(":checked")||!e||t.get(0).getAttribute("disabled");return a?t.removeAttr(this.invalid_attr).parent().removeClass(this.settings.error_class):t.attr(this.invalid_attr,"").parent().addClass(this.settings.error_class),a},valid_radio:function(t){for(var e=t.getAttribute("name"),a=this.S(t).closest("[data-"+this.attr_name(!0)+"]").find("[name='"+e+"']"),n=a.length,s=!1,i=!1,r=0;n>r;r++)a[r].getAttribute("disabled")?(i=!0,s=!0):a[r].checked?s=!0:i&&(s=!1);for(var r=0;n>r;r++)s?this.S(a[r]).removeAttr(this.invalid_attr).parent().removeClass(this.settings.error_class):this.S(a[r]).attr(this.invalid_attr,"").parent().addClass(this.settings.error_class);return s},valid_equal:function(t,e,n){var s=a.getElementById(t.getAttribute(this.add_namespace("data-equalto"))).value,i=t.value,r=s===i;return r?(this.S(t).removeAttr(this.invalid_attr),n.removeClass(this.settings.error_class),label.length>0&&settings.error_labels&&label.removeClass(this.settings.error_class)):(this.S(t).attr(this.invalid_attr,""),n.addClass(this.settings.error_class),label.length>0&&settings.error_labels&&label.addClass(this.settings.error_class)),r},valid_oneof:function(t,e,a,n){var t=this.S(t),s=this.S("["+this.add_namespace("data-oneof")+"]"),i=s.filter(":checked").length>0;if(i?t.removeAttr(this.invalid_attr).parent().removeClass(this.settings.error_class):t.attr(this.invalid_attr,"").parent().addClass(this.settings.error_class),!n){var r=this;s.each(function(){r.valid_oneof.call(r,this,null,null,!0)})}return i}}}(jQuery,window,window.document),define("foundation.abide",["foundation.core"],function(){}),define("utils/form-panels/form-panel",["require","foundation.abide","utils/notifier","utils/locale","sunstone"],function(t){function e(){return this}function a(t){var e=this;this.wizardElement=$(e.htmlWizard()).appendTo($("#wizardForms",t)),e.htmlAdvanced&&(this.advancedElement=$(e.htmlAdvanced()).appendTo($("#advancedForms",t))),t.off("invalid.fndtn.abide","#"+e.formPanelId+"Wizard"),t.off("valid.fndtn.abide","#"+e.formPanelId+"Wizard"),t.on("invalid.fndtn.abide","#"+e.formPanelId+"Wizard",function(t){"abide.fndtn"==t.namespace&&(c.notifyError(d.tr("One or more required fields are missing or malformed.")),u.hideFormPanelLoading(e.tabId))}).on("valid.fndtn.abide","#"+e.formPanelId+"Wizard",function(t){return"abide.fndtn"==t.namespace?(e.submitWizard(this),!1):void 0}),t.off("invalid.fndtn.abide","#"+e.formPanelId+"Advanced"),t.off("valid.fndtn.abide","#"+e.formPanelId+"Advanced"),t.on("invalid.fndtn.abide","#"+e.formPanelId+"Advanced",function(t){"abide.fndtn"==t.namespace&&(c.notifyError(d.tr("One or more required fields are missing or malformed.")),u.hideFormPanelLoading(e.tabId))}).on("valid.fndtn.abide","#"+e.formPanelId+"Advanced",function(t){return"abide.fndtn"==t.namespace?(e.submitAdvanced(this),!1):void 0}),t.foundation("reflow","abide"),e.setup(t)}function n(t){this.wizardElement.remove(),this.htmlAdvanced&&this.advancedElement.remove(),this.insert(t)}function s(t,e){var a=this.action;this.action=e,(a!=e||"update"==e)&&this.reset(t)}function i(){if(this.action){var t=this.actions[this.action];return t?t:null}return null}function r(){var t=this.actionOptions();return t?t.title:""}function o(){var t=this.actionOptions();return t?t.buttonText:""}function l(){var t=this.actionOptions();return t?t.resetButton:!1}t("foundation.abide");var c=t("utils/notifier"),d=t("utils/locale"),u=t("sunstone");return e.prototype={insert:a,reset:n,setAction:s,title:r,buttonText:o,resetButton:l,actionOptions:i},e}),define("hbs!tabs/users-tab/form-panels/create/wizard",["hbs","hbs/handlebars"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<form data-abide="ajax" id="'+l((i=null!=(i=e.formPanelId||(null!=t?t.formPanelId:t))?i:o,typeof i===r?i.call(t,{name:"formPanelId",hash:{},data:n}):i))+'Wizard" class="custom creation">\n  <div class="row" >\n    <div class="medium-6 columns">\n      ';return i=null!=(i=e.userCreationHTML||(null!=t?t.userCreationHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"userCreationHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+"\n    </div>\n  </div>\n</form>"},useData:!0});return e.registerPartial("tabs/users-tab/form-panels/create/wizard",a),a}),define("tabs/users-tab/form-panels/create",["require","foundation.tab","utils/form-panels/form-panel","sunstone","utils/locale","tabs/users-tab/utils/user-creation","hbs!./create/wizard","./create/formPanelId","../tabId"],function(t){function e(){this.formPanelId=u,this.tabId=p,this.actions={create:{title:l.tr("Create User"),buttonText:l.tr("Create"),resetButton:!0}},this.userCreation=new c(u),r.call(this)}function a(){return d({formPanelId:this.formPanelId,userCreationHTML:this.userCreation.html()})}function n(t){this.userCreation.setup(t)}function s(t){var e={user:this.userCreation.retrieve(t)};return o.runAction("User.create",e),!1}function i(){}t("foundation.tab");var r=t("utils/form-panels/form-panel"),o=t("sunstone"),l=t("utils/locale"),c=t("tabs/users-tab/utils/user-creation"),d=t("hbs!./create/wizard"),u=t("./create/formPanelId"),p=t("../tabId");return e.FORM_PANEL_ID=u,e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype.htmlWizard=a,e.prototype.submitWizard=s,e.prototype.onShow=i,e.prototype.setup=n,e}),define("tabs/users-tab",["require","utils/locale","./users-tab/buttons","./users-tab/actions","./users-tab/datatable","./users-tab/tabId","./users-tab/dialogs/password","./users-tab/dialogs/auth-driver","./users-tab/dialogs/quotas","./users-tab/panels/info","./users-tab/panels/quotas","./users-tab/panels/accounting","./users-tab/panels/showback","./users-tab/form-panels/create"],function(t){var e=t("utils/locale"),a=t("./users-tab/buttons"),n=t("./users-tab/actions"),s=t("./users-tab/datatable"),i=t("./users-tab/tabId"),r="dataTableUsers",o=[t("./users-tab/dialogs/password"),t("./users-tab/dialogs/auth-driver"),t("./users-tab/dialogs/quotas")],l=[t("./users-tab/panels/info"),t("./users-tab/panels/quotas"),t("./users-tab/panels/accounting"),t("./users-tab/panels/showback")],c=[t("./users-tab/form-panels/create")],d={tabId:i,title:e.tr("Users"),tabClass:"subTab",parentTab:"system-tab",listHeader:'<i class="fa fa-fw fa-user"></i>&emsp;'+e.tr("Users"),infoHeader:'<i class="fa fa-fw fa-user"></i>&emsp;'+e.tr("User"),subheader:'<span>        <span class="total_users"/> <small>'+e.tr("TOTAL")+"</small>      </span>",resource:"User",buttons:a,actions:n,dataTable:new s(r,{actions:!0,info:!0}),panels:l,formPanels:c,dialogs:o};return d}),define("hbs!tabs/settings-tab/panels/user-config/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l="function",c='<div class="row">\n  <div class="large-6 columns">\n    <div class="row">\n      <div class="large-12 large-centered columns">\n        <dl class="accordion" data-accordion>\n          <dd class="accordion-navigation">\n            <a href="#provision_update_language_accordion" class="text-center accordion-a">\n              <div class="row only-not-active">\n                <div class="large-12 large-centered columns">\n                  <div class="text-center">\n                    <span class="fa-stack fa-3x" style="color: #777"> <i class="fa fa-cloud fa-stack-2x"></i> <i class="fa fa-comments fa-stack-1x fa-inverse"></i>\n                    </span>\n                  </div>\n                </div>\n              </div>\n              <br class="only-not-active">\n              <i class="fa fa-lg fa-comments only-active"></i>\n              '+o((e.tr||t&&t.tr||r).call(t,"Change Language",{name:"tr",hash:{},data:n}))+'\n            </a>\n            <div id="provision_update_language_accordion" class="content">\n              <br>\n              <form id="provision_change_language_form">\n                <div class="row">\n                  <div class="large-12 columns">\n                    <select type="language" id="provision_new_language" class="provision-input" style="height: 40px !important; font-size: 16px; padding: 0.5rem  !important;">';
return i=null!=(i=e.languageOptions||(null!=t?t.languageOptions:t))?i:r,s=typeof i===l?i.call(t,{name:"languageOptions",hash:{},data:n}):i,null!=s&&(c+=s),c+'</select>\n                  </div>\n                </div>\n                <div class="row">\n                  <div class="large-12 columns">\n                    <button href"#" type="submit" class="button large radius large-12 small-12">'+o((e.tr||t&&t.tr||r).call(t,"Update Language",{name:"tr",hash:{},data:n}))+'</button>\n                  </div>\n                </div>\n              </form>\n            </div>\n          </dd>\n        </dl>\n      </div>\n    </div>\n  </div>\n  <div class="large-6 columns">\n    <div class="row">\n      <div class="large-12 large-centered columns">\n        <dl class="accordion" data-accordion>\n          <dd class="accordion-navigation">\n            <a href="#provision_update_password_accordion" class="text-center accordion-a">\n              <div class="row only-not-active">\n                <div class="large-12 large-centered columns">\n                  <div class="text-center">\n                    <span class="fa-stack fa-3x" style="color: #777">\n                      <i class="fa fa-cloud fa-stack-2x"></i>\n                      <i class="fa fa-lock fa-stack-1x fa-inverse"></i>\n                    </span>\n                  </div>\n                </div>\n              </div>\n              <br class="only-not-active">\n              <i class="fa fa-lg fa-lock only-active"></i>\n              '+o((e.tr||t&&t.tr||r).call(t,"Change Password",{name:"tr",hash:{},data:n}))+'\n            </a>\n            <div id="provision_update_password_accordion" class="content">\n              <br>\n              <form id="provision_change_password_form">\n                <div class="row">\n                  <div class="large-12 columns">\n                    <input type="password" id="provision_new_password" class="provision-input" placeholder="'+o((e.tr||t&&t.tr||r).call(t,"New Password",{name:"tr",hash:{},data:n}))+'" style="height: 40px !important; font-size: 16px; padding: 0.5rem  !important;"/>\n                  </div>\n                </div>\n                <div class="row">\n                  <div class="large-12 columns">\n                    <input type="password" id="provision_new_confirm_password" class="provision-input" placeholder="'+o((e.tr||t&&t.tr||r).call(t,"Confirm Password",{name:"tr",hash:{},data:n}))+'" style="height: 40px !important; font-size: 16px; padding: 0.5rem  !important;"/>\n                  </div>\n                </div>\n                <div class="row">\n                  <div class="large-12 columns">\n                    <button href"#" type="submit" class="button large radius large-12 small-12">'+o((e.tr||t&&t.tr||r).call(t,"Update Password",{name:"tr",hash:{},data:n}))+'</button>\n                  </div>\n                </div>\n              </form>\n            </div>\n          </dd>\n        </dl>\n      </div>\n    </div>\n  </div>\n</div>\n<br>\n<br>\n<div class="row">\n  <div class="large-6 columns">\n    <div class="row">\n      <div class="large-12 large-centered columns">\n        <dl class="accordion" data-accordion>\n          <dd class="accordion-navigation">\n            <a href="#provision_update_view_accordion" class="text-center accordion-a">\n              <div class="row only-not-active">\n                <div class="large-12 large-centered columns">\n                  <div class="text-center">\n                    <span class="fa-stack fa-3x" style="color: #777">\n                      <i class="fa fa-cloud fa-stack-2x"></i>\n                      <i class="fa fa-picture-o fa-stack-1x fa-inverse"></i>\n                    </span>\n                  </div>\n                </div>\n              </div>\n              <br class="only-not-active">\n              <i class="fa fa-lg fa-picture-o only-active"></i>\n              '+o((e.tr||t&&t.tr||r).call(t,"Change view",{name:"tr",hash:{},data:n}))+'\n            </a>\n            <div id="provision_update_view_accordion" class="content">\n              <br>\n              <form id="provision_change_view_form">\n                <div class="row">\n                  <div class="large-12 columns">\n                    <select id="provision_user_views_select" class="provision-input" style="height: 40px !important; font-size: 16px; padding: 0.5rem  !important;"></select>\n                  </div>\n                </div>\n                <div class="row">\n                  <div class="large-12 columns">\n                    <button href"#" type="submit" class="button large radius large-12 small-12">'+o((e.tr||t&&t.tr||r).call(t,"Update view",{name:"tr",hash:{},data:n}))+'</button>\n                  </div>\n                </div>\n              </form>\n            </div>\n          </dd>\n        </dl>\n      </div>\n    </div>\n  </div>\n  <div class="large-6 columns">\n    <form id="provision_add_ssh_key_form">\n      <div class="row">\n        <div class="large-12 large-centered columns">\n          <dl class="accordion" data-accordion>\n            <dd class="accordion-navigation">\n              <a href="#provision_add_ssh_key_accordion" class="text-center accordion-a">\n                <div class="row only-not-active">\n                  <div class="large-12 large-centered columns">\n                    <div class="text-center">\n                      <span class="fa-stack fa-3x" style="color: #777">\n                        <i class="fa fa-cloud fa-stack-2x"></i>\n                        <i class="fa fa-key fa-stack-1x fa-inverse"></i>\n                      </span>\n                    </div>\n                  </div>\n                </div>\n                <br class="only-not-active">\n                <i class="fa fa-key fa-lg only-active"></i>\n                <span class="provision_add_ssh_key_button">'+o((e.tr||t&&t.tr||r).call(t,"Add SSH Key",{name:"tr",hash:{},data:n}))+'</span>\n                <span class="provision_update_ssh_key_button">'+o((e.tr||t&&t.tr||r).call(t,"Update SSH Key",{name:"tr",hash:{},data:n}))+'</span>\n              </a>\n              <div id="provision_add_ssh_key_accordion" class="content">\n                <br>\n                <p style="font-size: 16px; color: #999">\n                  <span class="provision_add_ssh_key_button">\n                    '+o((e.tr||t&&t.tr||r).call(t,"Add a public SSH key to your account!",{name:"tr",hash:{},data:n}))+"\n                    <br>\n                    "+o((e.tr||t&&t.tr||r).call(t,"You will be able to access your Virtual Machines without password",{name:"tr",hash:{},data:n}))+'\n                  </span>\n                  <span class="provision_update_ssh_key_button">\n                    '+o((e.tr||t&&t.tr||r).call(t,"Update your public SSH key!",{name:"tr",hash:{},data:n}))+"\n                    <br>\n                    "+o((e.tr||t&&t.tr||r).call(t,"You will be able to access your Virtual Machines without password",{name:"tr",hash:{},data:n}))+'\n                  </span>\n                </p>\n                <div class="row">\n                  <div class="large-12 large-centered columns">\n                    <textarea id="provision_ssh_key" style="height: 100px; font-size: 14px" placeholder="SSH key" class="provision-input"></textarea>\n                  </div>\n                </div>\n                <div class="row">\n                  <div class="large-12 large-centered columns">\n                    <button href="#" type="submit" class="provision_add_ssh_key_button button large radius large-12 small-12">'+o((e.tr||t&&t.tr||r).call(t,"Add SSH Key",{name:"tr",hash:{},data:n}))+'</button>\n                    <button href="#" type="submit" class="provision_update_ssh_key_button button large radius large-12 small-12 hidden">'+o((e.tr||t&&t.tr||r).call(t,"Update SSH Key",{name:"tr",hash:{},data:n}))+"</button>\n                  </div>\n                </div>\n              </div>\n            </dd>\n          </dl>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>"},useData:!0});return e.registerPartial("tabs/settings-tab/panels/user-config/html",a),a}),define("tabs/settings-tab/panels/user-config/panelId",["require"],function(){return"user_config_tab"}),define("tabs/settings-tab/panels/user-config",["require","foundation.accordion","utils/locale","sunstone-config","opennebula","hbs!./user-config/html","../tabId","./user-config/panelId"],function(t){function e(t,e){return this.tabId=e||o,this.title=s.tr("Config"),this.icon="fa-info",this.element=t[c],this}function a(){return r({languageOptions:s.language_options})}function n(t){$(document).foundation("accordion","reflow");var e=this.element.TEMPLATE.SSH_PUBLIC_KEY;return e&&e.length?($("#provision_ssh_key",t).val(e),$(".provision_add_ssh_key_button",t).hide(),$(".provision_update_ssh_key_button"),t.show()):($(".provision_add_ssh_key_button",t).show(),$(".provision_update_ssh_key_button",t).hide()),$('#provision_new_language option[value="'+config.user_config.lang+'"]',t).attr("selected","selected"),$('#provision_user_views_select option[value="'+config.user_config.default_view+'"]',t).attr("selected","selected"),$.each(config.available_views,function(e,a){$("select#provision_user_views_select",t).append('<option value="'+a+'">'+a+"</option>")}),$("#provision_change_password_form").submit(function(){var t=$("#provision_new_password",this).val(),e=$("#provision_new_confirm_password",this).val();return t.length?t!==e?(Notifier.notifyError(s.tr("Passwords do not match")),!1):(Sunstone.runAction("User.passwd","-1",t),!1):(Notifier.notifyError(s.tr("Fill in a new password")),!1)}),$("#provision_add_ssh_key_form").submit(function(){var t=$("#provision_ssh_key",this).val();return t.length?(i.User.show({data:{id:"-1"},success:function(e,a){var n=a.USER.TEMPLATE;n.SSH_PUBLIC_KEY=t,template_str="",$.each(n,function(t,e){template_str+=t+'="'+e+'"\n'}),Sunstone.runAction("User.update_template","-1",template_str)}}),!1):(Notifier.notifyError(s.tr("You have to provide an SSH key")),!1)}),$("#provision_change_view_form").submit(function(){var t=$("#provision_user_views_select",this).val();return i.User.show({data:{id:"-1"},success:function(e,a){var n=a.USER.TEMPLATE;n.DEFAULT_VIEW=t,template_str="",$.each(n,function(t,e){template_str+=t+'="'+e+'"\n'});var s=i.Helper.action("update",{template_raw:template_str});$.ajax({url:"config",type:"POST",dataType:"json",data:JSON.stringify(s),success:function(){window.location.href="."},error:function(){}})}}),!1}),$("#provision_change_language_form").submit(function(){var t=$("#provision_new_language",this).val();return i.User.show({data:{id:"-1"},success:function(e,a){var n=a.USER.TEMPLATE;n.LANG=t,template_str="",$.each(n,function(t,e){template_str+=t+'="'+e+'"\n'});var s=i.Helper.action("update",{template_raw:template_str});$.ajax({url:"config",type:"POST",dataType:"json",data:JSON.stringify(s),success:function(){window.location.href="."},error:function(){}})}}),!1}),!1}t("foundation.accordion");var s=t("utils/locale"),i=(t("sunstone-config"),t("opennebula")),r=t("hbs!./user-config/html"),o=t("../tabId"),l=t("./user-config/panelId"),c="USER";return e.PANEL_ID=l,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/settings-tab/panels/group-quotas/panelId",["require"],function(){return"group_quotas_tab"}),define("tabs/settings-tab/panels/group-quotas",["require","utils/locale","sunstone-config","utils/quotas/quota-defaults","utils/quotas/quota-widgets","opennebula/group","../tabId","./group-quotas/panelId"],function(t){function e(t,e){return this.tabId=e||c,this.title=i.tr("Group Quotas"),this.icon="fa-align-left",this.element=t[u],this}function a(){return'<div class="row">              <div class="large-6 columns">                <label>'+i.tr("Select group")+':                  <select id="quota_group_sel">                  </select>                </label>              </div>            </div>            <div id="group_quotasTabBody" class="row">            </div>'}function n(t){var e=this.element.GROUPS.ID;$.isArray(e)||(e=[e]);var a="";return $.each(e,function(){a+='<option elem_id="'+this+'" value="'+this+'">'+l.getName(this)+" (id:"+this+")</option>"}),$("select#quota_group_sel",t).html(a),$("#quota_group_sel",t).off("change"),$("#quota_group_sel",t).on("change",function(){var e=$("select#quota_group_sel").val();""!=e&&s(e,t)}),s("-1",t),!1}function s(t,e){l.show({data:{id:t},success:function(t,a){var n=a.GROUP,s=o.initQuotasPanel(n,r.getDefaultQuotas("Group"),!1);$("#group_quotasTabBody",e).html(s),o.setupQuotasPanel(n,$("#group_quotasTabBody",e),!1,"Group"),$("select#quota_group_sel",e).val(n.ID)}})}var i=t("utils/locale"),r=(t("sunstone-config"),t("utils/quotas/quota-defaults")),o=t("utils/quotas/quota-widgets"),l=t("opennebula/group"),c=t("../tabId"),d=t("./group-quotas/panelId"),u="USER";return e.PANEL_ID=d,e.prototype.html=a,e.prototype.setup=n,e}),define("hbs!tabs/acls-tab/form-panels/create/wizard",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<form data-abide="ajax" id="'+o((s=null!=(s=e.formPanelId||(null!=t?t.formPanelId:t))?s:r,typeof s===i?s.call(t,{name:"formPanelId",hash:{},data:n}):s))+'Wizard" class="custom creation">\n  <div class="row">\n    <div class="medium-6 columns">\n      <fieldset>\n        <legend>'+o((e.tr||t&&t.tr||r).call(t,"This rule applies to",{name:"tr",hash:{},data:n}))+'</legend>\n        <div class="row">\n          <div class="large-4 columns">\n            <input type="radio" class="applies" name="applies_select" value="*" id="applies_all">\n            <label class="applies" for="applies_all">'+o((e.tr||t&&t.tr||r).call(t,"All",{name:"tr",hash:{},data:n}))+'</label>\n          </div>\n          <div class="large-4 columns">\n            <input type="radio" class="applies" name="applies_select" value="applies_to_user" id="applies_id">\n            <label class="applies" for="applies_id">'+o((e.tr||t&&t.tr||r).call(t,"User",{name:"tr",hash:{},data:n}))+'</label>\n          </div>\n          <div class="large-4 columns">\n            <input type="radio" class="applies" name="applies_select" value="applies_to_group" id="applies_group">\n            <label class="applies" for="applies_group">'+o((e.tr||t&&t.tr||r).call(t,"Group",{name:"tr",hash:{},data:n}))+'</label>\n          </div>\n        </div>\n        <div class="row">\n          <div class="large-12 columns">\n            <div class="applies_to_user">\n              <label for="applies_to_user">'+o((e.tr||t&&t.tr||r).call(t,"User",{name:"tr",hash:{},data:n}))+':</label>\n              <div name="applies_to_user" id="applies_to_user">\n              </div>\n            </div>\n            <div class="applies_to_group">\n              <label for="applies_to_group">'+o((e.tr||t&&t.tr||r).call(t,"Group",{name:"tr",hash:{},data:n}))+':</label>\n              <div name="applies_to_group" id="applies_to_group">\n              </div>\n            </div>\n          </div>\n        </div>\n      </fieldset>\n    </div>\n    <div class="medium-6 columns">\n      <label for="zones_applies">'+o((e.tr||t&&t.tr||r).call(t,"Zones where the rule applies",{name:"tr",hash:{},data:n}))+'</label>\n      <div name="zones_applies" id="zones_applies">\n      </div>\n    </div>\n  </div>\n  <fieldset>\n    <legend>'+o((e.tr||t&&t.tr||r).call(t,"Affected resources",{name:"tr",hash:{},data:n}))+'</legend>\n    <div class="row">\n      <div class="large-3 medium-6 columns">\n        <input type="checkbox" id="res_host" name="res_host" class="resource_cb" value="HOST">\n        <label for="res_host">'+o((e.tr||t&&t.tr||r).call(t,"Hosts",{name:"tr",hash:{},data:n}))+'</label>\n      </div>\n      <div class="large-3 medium-6 columns">\n        <input type="checkbox" id="res_cluster" name="res_cluster" class="resource_cb" value="CLUSTER">\n        <label for="res_cluster">'+o((e.tr||t&&t.tr||r).call(t,"Clusters",{name:"tr",hash:{},data:n}))+'</label>\n      </div>\n      <div class="large-3 medium-6 columns">\n        <input type="checkbox" id="res_datastore" name="res_datastore" class="resource_cb" value="DATASTORE">\n        <label for="res_datastore">'+o((e.tr||t&&t.tr||r).call(t,"Datastores",{name:"tr",hash:{},data:n}))+'</label>\n      </div>\n      <div class="large-3 medium-6 columns">\n        <input type="checkbox" id="res_vm" name="res_vm" class="resource_cb" value="VM">\n        <label for="res_vm">'+o((e.tr||t&&t.tr||r).call(t,"Virtual Machines",{name:"tr",hash:{},data:n}))+'</label>\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-3 medium-6 columns">\n        <input type="checkbox" id="res_net" name="res_net" class="resource_cb" value="NET">\n        <label for="res_net">'+o((e.tr||t&&t.tr||r).call(t,"Virtual Networks",{name:"tr",hash:{},data:n}))+'</label>\n      </div>\n      <div class="large-3 medium-6 columns">\n        <input type="checkbox" id="res_image" name="res_image" class="resource_cb" value="IMAGE">\n        <label for="res_image">'+o((e.tr||t&&t.tr||r).call(t,"Images",{name:"tr",hash:{},data:n}))+'</label>\n      </div>\n      <div class="large-3 medium-6 columns">\n        <input type="checkbox" id="res_template" name="res_template" class="resource_cb" value="TEMPLATE">\n        <label for="res_template">'+o((e.tr||t&&t.tr||r).call(t,"Templates",{name:"tr",hash:{},data:n}))+'</label>\n      </div>\n      <div class="large-3 medium-6 columns">\n        <input type="checkbox" id="res_user" name="res_user" class="resource_cb" value="USER">\n        <label for="res_user">'+o((e.tr||t&&t.tr||r).call(t,"Users",{name:"tr",hash:{},data:n}))+'</label>\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-3 medium-6 columns">\n        <input type="checkbox" id="res_group" name="res_group" class="resource_cb" value="GROUP">\n        <label for="res_group">'+o((e.tr||t&&t.tr||r).call(t,"Groups",{name:"tr",hash:{},data:n}))+'</label>\n      </div>\n      <div class="large-3 medium-6 columns">\n        <input type="checkbox" id="res_document" name="res_document" class="resource_cb" value="DOCUMENT">\n        <label for="res_document">'+o((e.tr||t&&t.tr||r).call(t,"Documents",{name:"tr",hash:{},data:n}))+'</label>\n      </div>\n      <div class="large-3 medium-6 columns">\n        <input type="checkbox" id="res_zone" name="res_zone" class="resource_cb" value="ZONE">\n        <label for="res_zone">'+o((e.tr||t&&t.tr||r).call(t,"Zones",{name:"tr",hash:{},data:n}))+'</label>\n      </div>\n      <div class="large-3 medium-6 columns">\n        <input type="checkbox" id="res_secgroup" name="res_secgroup" class="resource_cb" value="SECGROUP">\n        <label for="res_secgroup">'+o((e.tr||t&&t.tr||r).call(t,"Security Groups",{name:"tr",hash:{},data:n}))+'</label>\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-3 medium-6 columns">\n        <input type="checkbox" id="res_vdc" name="res_vdc" class="resource_cb" value="VDC">\n        <label for="res_vdc">'+o((e.tr||t&&t.tr||r).call(t,"VDCs",{name:"tr",hash:{},data:n}))+"</label>\n      </div>\n    </div>\n  </fieldset>\n  <fieldset>\n    <legend>"+o((e.tr||t&&t.tr||r).call(t,"Resource subset",{name:"tr",hash:{},data:n}))+'</legend>\n    <div class="row">\n      <div class="large-3 columns">\n        <input type="radio" class="res_subgroup" name="mode_select" value="*" id="res_subgroup_all">\n        <label class="res_subgroup" for="res_subgroup_all">'+o((e.tr||t&&t.tr||r).call(t,"All",{name:"tr",hash:{},data:n}))+'</label>\n      </div>\n      <div class="large-3 columns">\n        <input type="radio" class="res_subgroup" name="mode_select" value="res_id" id="res_subgroup_id">\n        <label class="res_subgroup" for="res_subgroup_id">'+o((e.tr||t&&t.tr||r).call(t,"ID",{name:"tr",hash:{},data:n}))+'</label>\n      </div>\n      <div class="large-3 columns">\n        <input type="radio" class="res_subgroup" name="mode_select" value="belonging_to" id="res_subgroup_group">\n        <label class="res_subgroup" for="res_subgroup_group">'+o((e.tr||t&&t.tr||r).call(t,"Group",{name:"tr",hash:{},data:n}))+'</label>\n      </div>\n      <div class="large-3 columns">\n        <input type="radio" class="res_subgroup" name="mode_select" value="in_cluster" id="res_subgroup_cluster">\n        <label class="res_subgroup" for="res_subgroup_cluster">'+o((e.tr||t&&t.tr||r).call(t,"Cluster",{name:"tr",hash:{},data:n}))+'</label>\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-6 columns">\n        <div class="res_id">\n          <label for="res_id">'+o((e.tr||t&&t.tr||r).call(t,"Resource ID",{name:"tr",hash:{},data:n}))+':</label>\n          <input type="text" name="res_id" id="res_id"></input>\n        </div>\n        <div class="belonging_to">\n          <label for="belonging_to">'+o((e.tr||t&&t.tr||r).call(t,"Group",{name:"tr",hash:{},data:n}))+':</label>\n          <div name="belonging_to" id="belonging_to">\n          </div>\n        </div>\n        <div class="in_cluster">\n          <label for="in_cluster">'+o((e.tr||t&&t.tr||r).call(t,"Cluster",{name:"tr",hash:{},data:n}))+':</label>\n          <div name="in_cluster" id="in_cluster">\n          </div>\n        </div>\n      </div>\n    </div>\n  </fieldset>\n  <fieldset>\n    <legend>'+o((e.tr||t&&t.tr||r).call(t,"Allowed operations",{name:"tr",hash:{},data:n}))+'</legend>\n    <div class="row">\n      <div class="large-3 medium-6 columns">\n        <input type="checkbox" id="right_delete" name="right_delete" class="right_cb" value="USE">\n        <label for="right_delete">'+o((e.tr||t&&t.tr||r).call(t,"Use",{name:"tr",hash:{},data:n}))+'</label>\n      </div>\n      <div class="large-3 medium-6 columns">\n        <input type="checkbox" id="right_use" name="right_use" class="right_cb" value="MANAGE">\n        <label for="right_use">'+o((e.tr||t&&t.tr||r).call(t,"Manage",{name:"tr",hash:{},data:n}))+'</label>\n      </div>\n      <div class="large-3 medium-6 columns">\n        <input type="checkbox" id="right_manage" name="right_manage" class="right_cb" value="ADMIN">\n        <label for="right_manage">'+o((e.tr||t&&t.tr||r).call(t,"Administrate",{name:"tr",hash:{},data:n}))+'</label>\n      </div>\n      <div class="large-3 medium-6 columns">\n        <input type="checkbox" id="right_create" name="right_create" class="right_cb" value="CREATE">\n        <label for="right_create">'+o((e.tr||t&&t.tr||r).call(t,"Create",{name:"tr",hash:{},data:n}))+'</label>\n      </div>\n    </div>\n  </fieldset>\n  <br>\n  <div class="row">\n    <div class="large-12 columns">\n      <label for="acl_preview">'+o((e.tr||t&&t.tr||r).call(t,"ACL String preview",{name:"tr",hash:{},data:n}))+':</label>\n      <input type="text" name="acl_preview" id="acl_preview"></input>\n    </div>\n  </div>\n</form>'},useData:!0});return e.registerPartial("tabs/acls-tab/form-panels/create/wizard",a),a}),define("tabs/acls-tab/form-panels/create/formPanelId",["require"],function(){return"createAclForm"}),define("tabs/acls-tab/tabId",["require"],function(){return"acls-tab"}),define("tabs/acls-tab/form-panels/create",["require","foundation.tab","utils/form-panels/form-panel","sunstone","utils/locale","utils/notifier","utils/resource-select","hbs!./create/wizard","./create/formPanelId","../tabId"],function(t){function e(){this.formPanelId=p,this.tabId=h,this.actions={create:{title:l.tr("Create ACL"),buttonText:l.tr("Create"),resetButton:!0}},r.call(this)}function a(){return u({formPanelId:this.formPanelId})}function n(t){$("#applies_all",t).attr("checked","checked"),$(".applies_to_user",t).hide(),$(".applies_to_group",t).hide(),$("#res_subgroup_all",t).attr("checked","checked"),$(".res_id",t).hide(),$(".belonging_to",t).hide(),$(".in_cluster",t).hide(),$(".applies",t).click(function(){var e=$(this).val();switch(e){case"*":$(".applies_to_user",t).hide(),$(".applies_to_group",t).hide();break;case"applies_to_user":$(".applies_to_user",t).show(),$(".applies_to_group",t).hide();break;case"applies_to_group":$(".applies_to_user",t).hide(),$(".applies_to_group",t).show()}}),$(".res_subgroup",t).click(function(){var e=$(this).val();switch(e){case"*":$(".res_id",t).hide(),$(".belonging_to",t).hide(),$(".in_cluster",t).hide();break;case"res_id":$(".res_id",t).show(),$(".belonging_to").hide(),$(".in_cluster",t).hide();break;case"belonging_to":$(".res_id",t).hide(),$(".belonging_to",t).show(),$(".in_cluster",t).hide();break;case"in_cluster":$(".res_id",t).hide(),$(".belonging_to",t).hide(),$(".in_cluster",t).show()}}),$("input#res_id",t).keyup(function(){$(this).trigger("change")}),t.off("change","input,select"),t.on("change","input,select",function(){var e="",a=$(".applies:checked",t).val();switch(a){case"*":e="*";break;case"applies_to_user":e="#"+$("div#applies_to_user .resource_list_select",t).val();break;case"applies_to_group":e="@"+$("div#applies_to_group .resource_list_select",t).val()}var n="";$(".resource_cb:checked",t).each(function(){n+=$(this).val()+"+"}),n.length&&(n=n.substring(0,n.length-1));var s="",a=$(".res_subgroup:checked",t).val();switch(a){case"*":s="*";break;case"res_id":s="#"+$("#res_id",t).val();break;case"belonging_to":s="@"+$("div#belonging_to .resource_list_select",t).val();break;case"in_cluster":s="%"+$("#in_cluster .resource_list_select",t).val()}var i="";$(".right_cb:checked",t).each(function(){i+=$(this).val()+"+"}),i.length&&(i=i.substring(0,i.length-1));var r=$("#zones_applies .resource_list_select",t).val();"*"!=r&&(r="#"+r);var o=e+" "+n+"/"+s+" "+i+" "+r;$("#acl_preview",t).val(o)})}function s(t){var e=$(".applies:checked",t).val();switch(e){case"applies_to_user":var a=$("#applies_to_user .resource_list_select",t).val().length;if(!a)return o.hideFormPanelLoading(this.tabId),c.notifyError(l.tr("Please select a user to whom the acl applies")),!1;break;case"applies_to_group":var a=$("#applies_to_group .resource_list_select",t).val().length;if(!a)return o.hideFormPanelLoading(this.tabId),c.notifyError(l.tr("Please select a group to whom the acl applies")),!1}var n=$(".resource_cb:checked",t).length;if(!n)return o.hideFormPanelLoading(this.tabId),c.notifyError(l.tr("Please select at least one resource")),!1;var e=$(".res_subgroup:checked",t).val();switch(e){case"res_id":var a=$("#res_id",t).val().length;if(!a)return o.hideFormPanelLoading(this.tabId),c.notifyError(l.tr("Please provide a resource ID for the resource(s) in this rule")),!1;break;case"belonging_to":var a=$("#belonging_to .resource_list_select",t).val().length;if(!a)return o.hideFormPanelLoading(this.tabId),c.notifyError("Please select a group to which the selected resources belong to"),!1;break;case"in_cluster":var a=$("#in_cluster .resource_list_select",t).val().length;if(!a)return o.hideFormPanelLoading(this.tabId),c.notifyError("Please select a cluster to which the selected resources belong to"),!1}var s=$(".right_cb:checked",t).length;if(!s)return o.hideFormPanelLoading(this.tabId),c.notifyError("Please select at least one operation"),!1;var i=$("#acl_preview",t).val(),r={acl:i};return o.runAction("Acl.create",r),!1}function i(t){d.insert("div#applies_to_user",t,"User",null,!0),d.insert("div#applies_to_group",t,"Group",null,!0),d.insert("div#belonging_to",t,"Group",null,!0),d.insert("#in_cluster",t,"Cluster",null,!0),$('#in_cluster select option[value="-1"]',t).remove(),d.insert("div#zones_applies",t,"Zone","*",!1,'<option value="*">'+l.tr("All")+"</option>")}t("foundation.tab");var r=t("utils/form-panels/form-panel"),o=t("sunstone"),l=t("utils/locale"),c=t("utils/notifier"),d=t("utils/resource-select"),u=t("hbs!./create/wizard"),p=t("./create/formPanelId"),h=t("../tabId");return e.FORM_PANEL_ID=p,e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype.htmlWizard=a,e.prototype.submitWizard=s,e.prototype.onShow=i,e.prototype.setup=n,e}),define("tabs/settings-tab",["require","utils/locale","opennebula/user","sunstone","./users-tab/actions","./settings-tab/tabId","tabs/users-tab/tabId","tabs/users-tab/dialogs/password","tabs/users-tab/panels/info","tabs/settings-tab/panels/user-config","tabs/users-tab/panels/quotas","tabs/settings-tab/panels/group-quotas","tabs/users-tab/panels/accounting","tabs/users-tab/panels/showback","./acls-tab/form-panels/create"],function(t){function e(){n.show({data:{id:-1},success:function(t,e){s.insertPanels(r,e,r,$(".right-list",$("#"+r)))}})}{var a=t("utils/locale"),n=t("opennebula/user"),s=t("sunstone"),i=t("./users-tab/actions"),r=t("./settings-tab/tabId");t("tabs/users-tab/tabId")}i["Settings.refresh"]={type:"custom",call:e};var o=[t("tabs/users-tab/dialogs/password")],l=[t("tabs/users-tab/panels/info"),t("tabs/settings-tab/panels/user-config"),t("tabs/users-tab/panels/quotas"),t("tabs/settings-tab/panels/group-quotas"),t("tabs/users-tab/panels/accounting"),t("tabs/users-tab/panels/showback")],c=([t("./acls-tab/form-panels/create")],{tabId:r,title:'<i class="fa fa-lg fa-fw fa-cog"></i>&emsp;'+a.tr("Settings"),listHeader:'<i class="fa fa-cog"></i>&emsp;'+a.tr("Settings"),resource:"Settings",actions:i,content:'<span class="fa-stack fa-2x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa  fa-spinner fa-spin fa-stack-1x fa-inverse"></i></span>',dialogs:o,panels:l});return c}),define("hbs!tabs/dashboard-tab/html",["hbs","hbs/handlebars"],function(t,e){var a=e.template({1:function(t){var e,a=this.lambda,n='    <div class="small-12 large-12 columns">\n      ';return e=a(t,t),null!=e&&(n+=e),n+"\n    </div>\n"},3:function(t){var e,a=this.lambda,n='    <div class="small-4 large-4 columns">\n      ';return e=a(t,t),null!=e&&(n+=e),n+"\n    </div>\n"},5:function(t){var e,a=this.lambda,n='    <div class="small-6 large-6 columns">\n      ';return e=a(t,t),null!=e&&(n+=e),n+"\n    </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i='<div>\n  <div id="one_per_row">\n';return s=e.each.call(t,null!=t?t.onePerRow:t,{name:"each",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(i+=s),i+='  </div>\n  <div id="three_per_row" class="row">\n',s=e.each.call(t,null!=t?t.threePerRow:t,{name:"each",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(i+=s),i+='  </div>\n  <div id="two_per_row" class="row">\n',s=e.each.call(t,null!=t?t.twoPerRow:t,{name:"each",hash:{},fn:this.program(5,n),inverse:this.noop,data:n}),null!=s&&(i+=s),i+='  </div>\n  <div id="one_footer">\n',s=e.each.call(t,null!=t?t.oneFooter:t,{name:"each",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(i+=s),i+"  </div>\n</div>"},useData:!0});return e.registerPartial("tabs/dashboard-tab/html",a),a}),define("tabs/vms-tab/tabId",["require"],function(){return"vms-tab"}),define("tabs/hosts-tab/tabId",["require"],function(){return"hosts-tab"}),define("tabs/images-tab/tabId",["require"],function(){return"images-tab"}),define("tabs/vnets-tab/tabId",["require"],function(){return"vnets-tab"}),define("tabs/vms-tab/form-panels/create/formPanelId",["require"],function(){return"createVMForm"}),define("tabs/hosts-tab/form-panels/create/formPanelId",["require"],function(){return"createHostForm"}),define("tabs/images-tab/form-panels/create/formPanelId",["require"],function(){return"createImageForm"}),define("tabs/vnets-tab/form-panels/create/formPanelId",["require"],function(){return"createVNetForm"}),define("hbs!tabs/dashboard-tab/storage",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<div class="row totals-info dashboard-widget-footer">\n  <div class="small-12 large-12 columns text-center">\n    <h2 class="subheader">\n      <small>'+i((e.tr||t&&t.tr||s).call(t,"IMAGES",{name:"tr",hash:{},data:n}))+'</small>\n      <br>\n      <span class="total_images subheader"></span>\n      <small><i class="fa fa-fw fa-upload"></i> </small>\n    </h2>\n  </div>\n  <div class="small-12 large-12 columns text-center">\n    <h5 class="subheader">\n      <span class="size_images subheader"></span>\n      <br>\n      <small>'+i((e.tr||t&&t.tr||s).call(t,"USED",{name:"tr",hash:{},data:n}))+'</small>\n    </h5>\n  </div>\n    <div class="small-12 large-12 columns text-center">\n      <br>\n      <a class="button secondary radius tiny show_images_tab"> <i class="fa fa-lg fa-list fa-fw"></i>\n      </a>\n      <a class="button secondary  radius tiny show_create_image">\n        <i class="fa fa-lg fa-plus fa-fw"></i><i class="fa fa-fw fa-lg fa-upload"></i>\n      </a>\n    </div>\n</div>'
},useData:!0});return e.registerPartial("tabs/dashboard-tab/storage",a),a}),define("hbs!tabs/dashboard-tab/empty-graph",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<span class="fa-stack fa-2x" style="color: #dfdfdf"> <i class="fa fa-cloud fa-stack-2x"></i>\n</span>\n<br>\n<span style="color: #cfcfcf">'+i((e.tr||t&&t.tr||s).call(t,"There is no information available",{name:"tr",hash:{},data:n}))+"</span>"},useData:!0});return e.registerPartial("tabs/dashboard-tab/empty-graph",a),e.registerPartial("./empty-graph",a),a}),define("hbs!tabs/dashboard-tab/users",["hbs","hbs/handlebars","hbs!tabs/dashboard-tab/empty-graph","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o='<div class="row totals-info">\n  <div class="large-3 medium-6 small-12 columns">\n    <div class="small-12 large-12 columns text-center">\n      <h2 class="subheader">\n        <small>'+r((e.tr||t&&t.tr||i).call(t,"USERS",{name:"tr",hash:{},data:n}))+'</small>\n        <br>\n        <span class="subheader total_users">-</span>\n        <small><i class="fa fa-fw fa-user"></i> </small>\n      </h2>\n    </div>\n    <div class="small-12 large-12 columns text-center" style="margin-top: 20px">\n      <a class="button secondary radius tiny show_users_tab"> <i class="fa fa-lg fa-list fa-fw"></i></a>\n      <a class="button secondary radius tiny show_create_user">\n        <i class="fa fa-lg fa-plus fa-fw"></i><i class="fa fa-fw fa-lg fa-user"></i></a>\n    </div>\n  </div>\n  <div class="large-9 medium-6 small-12 columns text-center" id="dashboard_vdc_user_accounting">\n    <input style="display:none;" value="user" id="acct_group_by"/>\n    <div class="small-12 large-6 columns">\n      <h4 class="subheader">\n        <small>'+r((e.tr||t&&t.tr||i).call(t,"CPU hours",{name:"tr",hash:{},data:n}))+'</small>\n      </h4>\n      <div class="large-12 columns centered graph text-center" id="acct_cpu_graph" style="height: 100px;">';return s=this.invokePartial(a["./empty-graph"],"","./empty-graph",t,void 0,e,a,n),null!=s&&(o+=s),o+='</div>\n    </div>\n    <div class="small-12 large-6 columns">\n      <h4 class="subheader">\n        <small>'+r((e.tr||t&&t.tr||i).call(t,"Memory GB hours",{name:"tr",hash:{},data:n}))+'</small>\n      </h4>\n      <div class="large-12 columns centered graph text-center" id="acct_mem_graph" style="height: 100px;">',s=this.invokePartial(a["./empty-graph"],"","./empty-graph",t,void 0,e,a,n),null!=s&&(o+=s),o+'</div>\n    </div>\n  </div>\n</div>\n<div class="row dashboard-widget-footer">\n  <div class="small-3 large-3 columns text-center"></div>\n</div>'},usePartial:!0,useData:!0});return e.registerPartial("tabs/dashboard-tab/users",a),a}),define("hbs!tabs/dashboard-tab/network",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<div class="row totals-info dashboard-widget-footer">\n  <div class="small-12 large-12 columns text-center">\n    <h2 class="subheader">\n      <small>'+i((e.tr||t&&t.tr||s).call(t,"VNETs",{name:"tr",hash:{},data:n}))+'</small>\n      <br>\n      <span class="total_vnets subheader"></span>\n      <small><i class="fa fa-fw fa-sitemap"></i> </small>\n    </h2>\n  </div>\n  <div class="small-12 large-12 columns text-center">\n    <h5 class="subheader">\n      <span class="addresses_vnets subheader"></span>\n      <br>\n      <small>'+i((e.tr||t&&t.tr||s).call(t,"USED IPs",{name:"tr",hash:{},data:n}))+'</small>\n    </h5>\n  </div>\n    <div class="small-12 large-12 columns text-center">\n      <br>\n      <a class="button secondary radius tiny show_vnets_tab"> <i class="fa fa-lg fa-list fa-fw"></i>\n      </a>\n      <a class="button secondary  radius tiny show_create_vnet">\n        <i class="fa fa-lg fa-plus fa-fw"></i><i class="fa fa-fw fa-lg fa-sitemap"></i>\n      </a>\n    </div>\n</div>'},useData:!0});return e.registerPartial("tabs/dashboard-tab/network",a),a}),define("hbs!tabs/dashboard-tab/hosts",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<div class="row  totals-info">\n  <div class="small-12 medium-6 large-3 columns centered">\n    <div class="small-12 large-12 columns text-center">\n      <h2 class="subheader">\n        <small>'+i((e.tr||t&&t.tr||s).call(t,"HOSTs",{name:"tr",hash:{},data:n}))+'</small>\n        <br>\n        <span class="total_hosts subheader"/> \n        <small><i class="fa fa-fw fa-lg fa-hdd-o"></i></small>\n      </h2>\n    </div>\n    <div class="small-4 large-4 columns text-center">\n      <h5 class="subheader">\n        <span class="on_hosts subheader success-color"/>\n        <br>\n        <small class="success-color">'+i((e.tr||t&&t.tr||s).call(t,"ON",{name:"tr",hash:{},data:n}))+'</small>\n      </h5>\n    </div>\n    <div class="small-4 large-4 columns text-center">\n      <h5 class="subheader">\n        <span class="off_hosts subheader"/>\n        <br>\n        <small>'+i((e.tr||t&&t.tr||s).call(t,"OFF",{name:"tr",hash:{},data:n}))+'</small>\n      </h5>\n    </div>\n    <div class="small-4 large-4 columns text-center">\n      <h5 class="subheader">\n        <span class="error_hosts subheader alert-color"/>\n        <br>\n        <small class="alert-color">'+i((e.tr||t&&t.tr||s).call(t,"ERROR",{name:"tr",hash:{},data:n}))+'</small>\n      </h5>\n    </div>\n    <div class="small-12 large-12 columns text-center">\n      <br>\n      <a class="button secondary radius tiny show_hosts_tab"> <i class="fa fa-lg fa-list fa-fw"></i>\n      </a>\n      <a class="button secondary  radius tiny show_create_host">\n        <i class="fa fa-lg fa-plus fa-fw"></i><i class="fa fa-fw fa-lg fa-hdd-o"></i>\n      </a>\n    </div>\n  </div>\n  <div class="small-12 medium-6 large-9 columns">\n    <div class="row">\n      <div class="small-12 large-6 columns">\n        <div id="dashboard_host_allocated_cpu" style="padding: 0px 40px"></div>\n        <br>\n        <div id="dashboard_host_real_cpu" style="padding: 0px 40px"></div>\n      </div>\n      <div class="small-12 large-6 columns">\n        <div id="dashboard_host_allocated_mem" style="padding: 0px 40px"></div>\n        <br>\n        <div id="dashboard_host_real_mem" style="padding: 0px 40px"></div>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="row dashboard-widget-footer">\n  <div class="small-3 large-3 columns text-center"></div>\n</div>'},useData:!0});return e.registerPartial("tabs/dashboard-tab/hosts",a),a}),define("hbs!tabs/dashboard-tab/vms",["hbs","hbs/handlebars","hbs!tabs/dashboard-tab/empty-graph","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o='<div class="row totals-info">\n  <div class="small-12 medium-6 large-3 columns">\n    <div class="small-12 large-12 columns text-center">\n      <h2 class="subheader">\n        <small>'+r((e.tr||t&&t.tr||i).call(t,"VMs",{name:"tr",hash:{},data:n}))+'</small>\n        <br>\n        <span class="subheader total_vms"></span>\n        <small><i class="fa fa-fw fa-th"></i></small>\n      </h2>\n    </div>\n    <div class="small-4 large-4 columns text-center">\n      <h5 class="subheader">\n        <span class="subheader active_vms success-color"></span>\n        <br>\n        <small class="success-color">'+r((e.tr||t&&t.tr||i).call(t,"ACTIVE",{name:"tr",hash:{},data:n}))+'</small>\n      </h5>\n    </div>\n    <div class="small-4 large-4 columns text-center">\n      <h5 class="subheader">\n        <span class="subheader pending_vms"></span>\n        <br>\n        <small>'+r((e.tr||t&&t.tr||i).call(t,"PENDING",{name:"tr",hash:{},data:n}))+'</small>\n      </h5>\n    </div>\n    <div class="small-4 large-4 columns text-center">\n      <h5 class="subheader">\n        <span class="subheader failed_vms alert-color"></span>\n        <br>\n        <small class="alert-color">'+r((e.tr||t&&t.tr||i).call(t,"FAILED",{name:"tr",hash:{},data:n}))+'</small>\n      </h5>\n    </div>\n    <div class="small-12 large-12 columns text-center" style="margin-top: 20px">\n      <a class="button secondary radius tiny show_vms_tab"> <i class="fa fa-lg fa-list fa-fw"></i>\n      </a>\n      <a class="button secondary radius tiny show_create_vm">\n        <i class="fa fa-lg fa-plus fa-fw"></i><i class="fa fa-fw fa-lg fa-th"></i></a>\n      <br>\n    </div>\n  </div>\n  <div class="large-9 medium-6 small-12 columns text-center" id="dashboard_vm_accounting">\n    <input style="display:none;" value="vm" id="acct_group_by"/>\n    <div class="small-12 large-6 columns">\n      <h4 class="subheader">\n        <small>'+r((e.tr||t&&t.tr||i).call(t,"CPU hours",{name:"tr",hash:{},data:n}))+'</small>\n      </h4>\n      <div class="large-12 columns centered graph text-center" id="acct_cpu_graph" style="height: 180px;">';return s=this.invokePartial(a["./empty-graph"],"","./empty-graph",t,void 0,e,a,n),null!=s&&(o+=s),o+='</div>\n    </div>\n    <div class="small-12 large-6 columns">\n      <h4 class="subheader">\n        <small>'+r((e.tr||t&&t.tr||i).call(t,"Memory GB hours",{name:"tr",hash:{},data:n}))+'</small>\n      </h4>\n      <div class="large-12 columns centered graph text-center" id="acct_mem_graph" style="height: 180px;">',s=this.invokePartial(a["./empty-graph"],"","./empty-graph",t,void 0,e,a,n),null!=s&&(o+=s),o+'</div>\n    </div>\n  </div>\n</div>\n<div class="row dashboard-widget-footer">\n  <div class="small-3 large-3 columns text-center"></div>\n</div>'},usePartial:!0,useData:!0});return e.registerPartial("tabs/dashboard-tab/vms",a),a}),define("hbs!tabs/dashboard-tab/user-quotas",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<h5 class="subheader"> <i class="fa fa-fw fa-lg fa-align-left"></i>\n  '+i((e.tr||t&&t.tr||s).call(t,"User Quotas",{name:"tr",hash:{},data:n}))+'\n</h5>\n<div class="row totals-info dashboard-widget-footer" id="quotas_tab_user">\n  <div class="large-12 small-12 columns">\n    <div class="row">\n      <div class="large-8 large-centered columns">\n        <div class="text-center">\n          <span class="fa-stack fa-5x" style="color: #dfdfdf"> <i class="fa fa-cloud fa-stack-2x"></i>\n            <i class="fa fa-align-left fa-stack-1x fa-inverse"></i>\n          </span>\n          <br>\n          <p style="font-size: 18px; color: #999">'+i((e.tr||t&&t.tr||s).call(t,"There are no quotas defined",{name:"tr",hash:{},data:n}))+"</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>"},useData:!0});return e.registerPartial("tabs/dashboard-tab/user-quotas",a),a}),define("hbs!tabs/dashboard-tab/group-quotas",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<h5 class="subheader"> <i class="fa fa-fw fa-lg fa-align-left"></i>\n  '+i((e.tr||t&&t.tr||s).call(t,"Group Quotas",{name:"tr",hash:{},data:n}))+'\n</h5>\n<div id="quotas_tab_group_TabBody" class="row">\n  <div class="large-12 columns">\n    <div class="row">\n      <div class="large-8 large-centered columns">\n        <div class="text-center">\n          <span class="fa-stack fa-5x" style="color: #dfdfdf"> <i class="fa fa-cloud fa-stack-2x"></i>\n            <i class="fa fa-align-left fa-stack-1x fa-inverse"></i>\n          </span>\n          <br>\n          <p style="font-size: 18px; color: #999">'+i((e.tr||t&&t.tr||s).call(t,"There are no quotas defined",{name:"tr",hash:{},data:n}))+'</p>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="row dashboard-widget-footer">\n  <div class="large-12 columns">\n    <label>\n      '+i((e.tr||t&&t.tr||s).call(t,"Select group",{name:"tr",hash:{},data:n}))+':\n      <div id="quotas_tab_group_sel"></div>\n    </label>\n  </div>\n</div>'},useData:!0});return e.registerPartial("tabs/dashboard-tab/group-quotas",a),a}),define("hbs!tabs/dashboard-tab/accounting",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<h5 class="subheader"> <i class="fa fa-fw fa-lg fa-bar-chart-o"></i>\n  '+i((e.tr||t&&t.tr||s).call(t,"Accounting",{name:"tr",hash:{},data:n}))+'\n</h5>\n<div class="row dashboard-widget-footer">\n  <div id="user_dashboard_info_acct_div" class="large-12 columns columns"></div>\n</div>'},useData:!0});return e.registerPartial("tabs/dashboard-tab/accounting",a),a}),define("tabs/dashboard-tab",["require","utils/locale","sunstone-config","sunstone","utils/notifier","opennebula/vm","utils/accounting","hbs!./dashboard-tab/html","tabs/vms-tab/tabId","tabs/hosts-tab/tabId","tabs/users-tab/tabId","tabs/images-tab/tabId","tabs/vnets-tab/tabId","tabs/vms-tab/form-panels/create/formPanelId","tabs/hosts-tab/form-panels/create/formPanelId","tabs/users-tab/form-panels/create/formPanelId","tabs/images-tab/form-panels/create/formPanelId","tabs/vnets-tab/form-panels/create/formPanelId","hbs!./dashboard-tab/storage","hbs!./dashboard-tab/users","hbs!./dashboard-tab/network","hbs!./dashboard-tab/hosts","hbs!./dashboard-tab/vms","hbs!./dashboard-tab/user-quotas","hbs!./dashboard-tab/group-quotas","hbs!./dashboard-tab/accounting","./dashboard-tab/tabId"],function(t){function e(){var t={threePerRow:[],twoPerRow:[],onePerRow:[],oneFooter:[]};return $.each(i.dashboardWidgets("widgets_three_per_row"),function(e,a){T.push(a),t.threePerRow.push(E[a].html())}),$.each(i.dashboardWidgets("widgets_two_per_row"),function(e,a){T.push(a),t.twoPerRow.push(E[a].html())}),$.each(i.dashboardWidgets("widgets_one_per_row"),function(e,a){T.push(a),t.onePerRow.push(E[a].html())}),$.each(i.dashboardWidgets("widgets_one_footer"),function(e,a){T.push(a),t.oneFooter.push(E[a].html())}),d(t)}function a(){w||n(),$.each(T,function(t,e){E[e].onShow&&E[e].onShow()})}function n(){w=!0,$(document).on("click",".show_vms_tab",function(){return r.showTab(u),!1}),$(document).on("click",".show_hosts_tab",function(){return r.showTab(p),!1}),$(document).on("click",".show_users_tab",function(){return r.showTab(h),!1}),$(document).on("click",".show_images_tab",function(){return r.showTab(f),!1}),$(document).on("click",".show_vnets_tab",function(){return r.showTab(m),!1}),$(document).on("click",".show_create_vm",function(){return r.showTab(u),r.showFormPanel(u,_,"create"),!1}),$(document).on("click",".show_create_host",function(){return r.showTab(p),r.showFormPanel(p,b,"create"),!1}),$(document).on("click",".show_create_user",function(){return r.showTab(h),r.showFormPanel(h,v,"create"),!1}),$(document).on("click",".show_create_image",function(){return r.showTab(f),r.showFormPanel(f,g,"create"),!1}),$(document).on("click",".show_create_vnet",function(){return r.showTab(m),r.showFormPanel(m,y,"create"),!1})}var s=t("utils/locale"),i=t("sunstone-config"),r=t("sunstone"),o=t("utils/notifier"),l=t("opennebula/vm"),c=t("utils/accounting"),d=t("hbs!./dashboard-tab/html"),u=t("tabs/vms-tab/tabId"),p=t("tabs/hosts-tab/tabId"),h=t("tabs/users-tab/tabId"),f=t("tabs/images-tab/tabId"),m=t("tabs/vnets-tab/tabId"),_=t("tabs/vms-tab/form-panels/create/formPanelId"),b=t("tabs/hosts-tab/form-panels/create/formPanelId"),v=t("tabs/users-tab/form-panels/create/formPanelId"),g=t("tabs/images-tab/form-panels/create/formPanelId"),y=t("tabs/vnets-tab/form-panels/create/formPanelId"),w=!1,T=[],E={storage:{html:t("hbs!./dashboard-tab/storage"),onShow:function(){r.runAction("Image.list")}},users:{html:t("hbs!./dashboard-tab/users"),onShow:function(){r.runAction("User.list"),r.runAction("Group.list");var t=-1,e=Math.floor((new Date).getTime()/1e3);e-=604800;var a={start_time:e,end_time:t},n=!0;$("#acct_cpu_graph, #acct_mem_graph","#dashboard_vdc_user_accounting").html('<span  id="provision_dashboard_total" style="font-size:80px"><i class="fa fa-spinner fa-spin"></i></span>'),l.accounting({success:function(t,e){c.fillAccounting($("#dashboard_vdc_user_accounting"),t,e,n)},error:o.onError,data:a})}},network:{html:t("hbs!./dashboard-tab/network"),onShow:function(){r.runAction("Network.list")}},hosts:{html:t("hbs!./dashboard-tab/hosts"),onShow:function(){r.runAction("Host.list")}},vms:{html:t("hbs!./dashboard-tab/vms"),onShow:function(){r.runAction("VM.list");var t=-1,e=Math.floor((new Date).getTime()/1e3);e-=604800;var a={start_time:e,end_time:t},n=!0;$("#acct_cpu_graph, #acct_mem_graph","#dashboard_vm_accounting").html('<span  id="provision_dashboard_total" style="font-size:80px"><i class="fa fa-spinner fa-spin"></i></span>'),l.accounting({success:function(t,e){c.fillAccounting($("#dashboard_vm_accounting"),t,e,n)},error:o.onError,data:a})}},user_quotas:{html:t("hbs!./dashboard-tab/user-quotas")},group_quotas:{html:t("hbs!./dashboard-tab/group-quotas")},accounting:{html:t("hbs!./dashboard-tab/accounting")}},S={"Dashboard.refresh":{type:"action",layout:"refresh",alwaysActive:!0}},I={"Dashboard.refresh":{type:"custom",call:a}},x=t("./dashboard-tab/tabId"),A={tabId:x,resource:"Dashboard",title:'<i class="fa fa-lg fa-fw fa-tachometer"></i>&emsp;'+s.tr("Dashboard"),listHeader:'<i class="fa fa-lg fa-fw fa-tachometer"></i>&emsp;'+s.tr("Dashboard"),buttons:S,actions:I,content:e()};return A}),define("tabs/system-tab",["require","utils/locale"],function(t){var e=t("utils/locale"),a="system-tab",n={tabId:a,title:'<i class="fa fa-lg fa-fw fa-cogs"></i>&emsp;'+e.tr("System"),no_content:!0};return n}),define("tabs/groups-tab/buttons",["require","utils/locale"],function(t){var e=t("utils/locale"),a={"Group.refresh":{type:"action",layout:"refresh",alwaysActive:!0},"Group.create_dialog":{type:"create_dialog",layout:"create"},"Group.update_dialog":{type:"action",layout:"main",text:e.tr("Update")},"Group.quotas_dialog":{type:"action",text:e.tr("Quotas"),layout:"main"},"Group.delete":{type:"confirm",text:e.tr("Delete"),layout:"del"}};return a}),define("tabs/groups-tab/tabId",["require"],function(){return"groups-tab"}),define("tabs/groups-tab/datatable",["require","utils/tab-datatable","sunstone-config","utils/locale","utils/quotas/quota-defaults","utils/quotas/quota-widgets","./tabId"],function(t){function e(t,e){this.conf=e||{},this.tabId=p,this.dataTableId=t,this.resource=d,this.xmlRoot=u,this.dataTableOptions={bAutoWidth:!1,bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:["check",4,5,6]},{sWidth:"35px",aTargets:[0]},{sWidth:"150px",aTargets:[4,5,6]},{bVisible:!0,aTargets:r.tabTableColumns(p)},{bVisible:!1,aTargets:["_all"]}]},this.columns=[o.tr("ID"),o.tr("Name"),o.tr("Users"),o.tr("VMs"),o.tr("Memory"),o.tr("CPU")],this.selectOptions={id_index:1,name_index:2,select_resource:o.tr("Please select a Group from the list"),you_selected:o.tr("You selected the following Group:"),select_resource_multiple:o.tr("Please select one or more groups from the list"),you_selected_multiple:o.tr("You selected the following groups:")},this.totalGroups=0,i.call(this)}function a(t){var e=t[u],a="0";e.USERS.ID&&(a=$.isArray(e.USERS.ID)?e.USERS.ID.length:"1");var n='<span class="progress-text right" style="font-size: 12px">-</span>',s='<span class="progress-text right" style="font-size: 12px">-</span>',i='<span class="progress-text right" style="font-size: 12px">-</span>',r=l.getDefaultGroupQuotas();return c.initEmptyQuotas(e),$.isEmptyObject(e.VM_QUOTA)||(n=c.quotaBar(e.VM_QUOTA.VM.VMS_USED,e.VM_QUOTA.VM.VMS,r.VM_QUOTA.VM.VMS),s=c.quotaBarMB(e.VM_QUOTA.VM.MEMORY_USED,e.VM_QUOTA.VM.MEMORY,r.VM_QUOTA.VM.MEMORY),i=c.quotaBarFloat(e.VM_QUOTA.VM.CPU_USED,e.VM_QUOTA.VM.CPU,r.VM_QUOTA.VM.CPU)),['<input class="check_item" type="checkbox" id="'+d.toLowerCase()+"_"+e.ID+'" name="selected_items" value="'+e.ID+'"/>',e.ID,e.NAME,a,n,s,i]}function n(){this.totalGroups=0}function s(){$(".total_groups").text(this.totalGroups)}var i=t("utils/tab-datatable"),r=t("sunstone-config"),o=t("utils/locale"),l=t("utils/quotas/quota-defaults"),c=t("utils/quotas/quota-widgets"),d="Group",u="GROUP",p=t("./tabId");return e.prototype=Object.create(i.prototype),e.prototype.constructor=e,e.prototype.elementArray=a,e.prototype.preUpdateView=n,e.prototype.postUpdateView=s,e}),define("tabs/groups-tab/form-panels/create/formPanelId",["require"],function(){return"createGroupForm"}),define("tabs/groups-tab/dialogs/quotas/dialogId",["require"],function(){return"groupQuotasDialog"}),define("tabs/groups-tab/actions",["require","sunstone","utils/notifier","utils/locale","./datatable","opennebula/group","./tabId","./form-panels/create/formPanelId","./dialogs/quotas/dialogId"],function(t){var e=t("sunstone"),a=t("utils/notifier"),n=(t("utils/locale"),t("./datatable"),t("opennebula/group")),s="Group",i="GROUP",r=t("./tabId"),o=t("./form-panels/create/formPanelId"),l=t("./dialogs/quotas/dialogId"),c={"Group.create":{type:"create",call:n.create,callback:function(t,a){e.resetFormPanel(r,o),e.hideFormPanel(r),e.getDataTable(r).addElement(t,a)},error:function(t,n){e.hideFormPanelLoading(r),a.onError(t,n)},notify:!0},"Group.create_dialog":{type:"custom",call:function(){e.showFormPanel(r,o,"create")}},"Group.list":{type:"list",call:n.list,callback:function(t,a){e.getDataTable(r).updateView(t,a)},error:a.onError},"Group.show":{type:"single",call:n.show,callback:function(t,a){e.getDataTable(r).updateElement(t,a),e.rightInfoVisible($("#"+r))&&e.insertPanels(r,a)},error:a.onError},"Group.refresh":{type:"custom",call:function(){var t=$("#"+r);e.rightInfoVisible(t)?e.runAction(s+".show",e.rightInfoResourceId(t)):(e.getDataTable(r).waitingNodes(),e.runAction(s+".list",{force:!0}))},error:a.onError},"Group.update":{type:"single",call:n.update,callback:function(){e.hideFormPanel(r)},error:function(t,n){e.hideFormPanelLoading(r),a.onError(t,n)}},"Group.update_template":{type:"single",call:n.update,callback:function(t){e.runAction(s+".show",t.request.data[0][0])},error:a.onError},"Group.update_dialog":{type:"single",call:function(){var t=e.getDataTable(r).elements();if(1!=t.length)return a.notifyMessage("Please select one (and just one) group to update."),!1;var n=""+t[0];e.runAction(s+".show_to_update",n)}},"Group.show_to_update":{type:"single",call:n.show,callback:function(t,a){e.showFormPanel(r,o,"update",function(t,e){t.fill(e,a[i])})},error:a.onError},"Group.delete":{type:"multiple",call:n.del,callback:function(t,a){e.getDataTable(r).deleteElement(t,a)},elements:function(){return e.getDataTable(r).elements()},error:a.onError},"Group.fetch_quotas":{type:"single",call:n.show,callback:function(t,a){e.getDialog(l).setParams({element:a[i]}),e.getDialog(l).reset(),e.getDialog(l).show()},error:a.onError},"Group.quotas_dialog":{type:"custom",call:function(){var t=$("#"+r);if(e.rightInfoVisible(t))$('a[href="#group_quotas_tab"]',t).click(),$("#edit_quotas_button",t).click();else{var a=e.getDataTable(r).elements();1==a.length?e.runAction(s+".fetch_quotas",a[0]):(e.getDialog(l).setParams({element:{}}),e.getDialog(l).reset(),e.getDialog(l).show())}}},"Group.set_quota":{type:"multiple",call:n.set_quota,elements:function(){return e.getDataTable(r).elements()},callback:function(t){e.getDialog(l).hide(),e.runAction(s+".show",t.request.data[0])},error:a.onError},"Group.add_admin":{type:"single",call:n.add_admin,callback:function(t){e.runAction(s+".show",t.request.data[0][0])},error:a.onError},"Group.del_admin":{type:"single",call:n.del_admin,callback:function(t){e.runAction(s+".show",t.request.data[0][0])},error:a.onError}};return c}),define("hbs!tabs/groups-tab/dialogs/quotas/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<div id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'" class="reveal-modal large max-height" role="dialog" data-reveal >\n  <div class="row">\n    <h3 class="subheader">'+l((e.tr||t&&t.tr||o).call(t,"Update Quota",{name:"tr",hash:{},data:n}))+'</h3>\n  </div>\n  <form data-abide="ajax" id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'Form">\n    <div class="row">\n      <div class="large-12 columns">\n        ';return i=null!=(i=e.quotasHTML||(null!=t?t.quotasHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"quotasHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+'\n      </div>\n    </div>\n    <div class="form_buttons row">\n      <button type="submit" class="button radius right" value="Group.set_quota">\n        '+l((e.tr||t&&t.tr||o).call(t,"Apply changes",{name:"tr",hash:{},data:n}))+'\n      </button>\n    </div>\n    <a class="close-reveal-modal">&#215;</a>\n  </form>\n</div>'},useData:!0});return e.registerPartial("tabs/groups-tab/dialogs/quotas/html",a),a}),define("tabs/groups-tab/dialogs/quotas",["require","utils/dialogs/dialog","hbs!./quotas/html","utils/locale","utils/quotas/quota-defaults","utils/quotas/quota-widgets","./quotas/dialogId","../tabId"],function(t){function e(){this.dialogId=d,this.element=void 0,r.call(this)}function a(){return o({dialogId:this.dialogId,quotasHTML:c.dialogHTML()})}function n(t){return c.setupQuotasDialog(t),!1}function s(t){this.element=t.element}function i(t){return c.populateQuotasDialog(this.element,l.getDefaultQuotas(u),t),!1}var r=t("utils/dialogs/dialog"),o=t("hbs!./quotas/html"),l=(t("utils/locale"),t("utils/quotas/quota-defaults")),c=t("utils/quotas/quota-widgets"),d=t("./quotas/dialogId"),u=(t("../tabId"),"Group");return e.DIALOG_ID=d,e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=i,e.prototype.setup=n,e.prototype.setParams=s,e}),define("hbs!tabs/groups-tab/panels/info/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({1:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o='        <thead>\n          <tr>\n            <th colspan="3">'+r((e.tr||t&&t.tr||i).call(t,"Group Admins Views",{name:"tr",hash:{},data:n}))+"</th>\n          </tr>\n        </thead>\n";return s=e.each.call(t,null!=t?t.adminViews:t,{name:"each",hash:{},fn:this.program(2,n),inverse:this.noop,data:n}),null!=s&&(o+=s),o},2:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='          <tr>\n            <td class="key_td">\n              '+l((i=null!=(i=e.name||(null!=t?t.name:t))?i:o,typeof i===r?i.call(t,{name:"name",hash:{},data:n}):i))+"\n";return s=e["if"].call(t,null!=t?t.description:t,{name:"if",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+"            </td>\n          </tr>\n"},3:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'                <span class="tip">'+o((s=null!=(s=e.description||(null!=t?t.description:t))?s:r,typeof s===i?s.call(t,{name:"description",hash:{},data:n}):s))+"</span>\n"},5:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o='        <thead>\n          <tr>\n            <th colspan="3">'+r((e.tr||t&&t.tr||i).call(t,"Group Users Views",{name:"tr",hash:{},data:n}))+"</th>\n          </tr>\n        </thead>\n";return s=e.each.call(t,null!=t?t.userViews:t,{name:"each",hash:{},fn:this.program(2,n),inverse:this.noop,data:n}),null!=s&&(o+=s),o},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,c="function",d='<div class="row">\n  <div class="large-6 columns">\n    <table class="dataTable extended_table">\n      <thead>\n        <tr>\n          <th colspan="3">'+o((e.tr||t&&t.tr||r).call(t,"Information",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"ID",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s.ID:s,t))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Name",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s.NAME:s,t))+'</td>\n          <td></td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <div class="large-6 columns">\n    <table class="dataTable extended_table">\n';return s=e["if"].call(t,null!=t?t.adminViews:t,{name:"if",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(d+=s),s=e["if"].call(t,null!=t?t.userViews:t,{name:"if",hash:{},fn:this.program(5,n),inverse:this.noop,data:n}),null!=s&&(d+=s),d+='    </table>\n  </div>\n</div>\n<div class="row">\n  <div class="large-9 columns">\n    ',i=null!=(i=e.templateTableHTML||(null!=t?t.templateTableHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"templateTableHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+"\n  </div>\n</div>"},useData:!0});return e.registerPartial("tabs/groups-tab/panels/info/html",a),a}),define("tabs/groups-tab/utils/views",["require","utils/locale"],function(t){var e=t("utils/locale"),a={advanced:{name:"Advanced Layout",description:e.tr("This layout exposes a complete view of the cloud, allowing administrators and advanced users to have full control of any physical or virtual resource of the cloud."),preview:"advanced_layout.png"},cloud:{name:"Cloud Layout",description:e.tr("This layout exposes a simplified version of the cloud where group administrators and cloud end-users will be able to manage any virtual resource of the cloud, without taking care of the physical resources management."),preview:"cloud_layout.png"},vcenter:{name:"vCenter Layout",description:e.tr("Set of views to present the valid operation against a vCenter infrastructure"),preview:"vcenter_layout.png"},other:{name:"Other Layouts",description:"",preview:null}},n={admin:{id:"admin",name:"Admin",description:e.tr("This view provides full control of the cloud"),type:"advanced"},user:{id:"user",name:"User",description:e.tr("In this view users will not be able to manage nor retrieve the hosts and clusters of the cloud. They will be able to see Datastores and Virtual Networks in order to use them when creating a new Image or Virtual Machine, but they will not be able to create new ones."),type:"advanced"},groupadmin:{id:"groupadmin",name:"Group Admin",description:e.tr("This view provides control of all the resources belonging to a group, but with no access to resources outside that group, that is, restricted to the physical and virtual resources of the group. This view features the ability to create new users within the group as well as set and keep track of user quotas."),type:"cloud"},cloud:{id:"cloud",name:"Cloud",description:e.tr("This is a simplified view mainly intended for user that just require a portal where they can provision new virtual machines easily from pre-defined Templates."),type:"cloud"},admin_vcenter:{id:"admin_vcenter",name:"Admin vCenter",description:e.tr("View designed to present the valid operations against a vCenter infrastructure to a cloud administrator"),type:"vcenter"},groupadmin_vcenter:{id:"groupadmin_vcenter",name:"Group Admin vCenter",description:e.tr("View designed to present the valid operations agaist a vCenter infrastructure to a group administrator"),type:"vcenter"},cloud_vcenter:{id:"cloud_vcenter",name:"Cloud vCenter",description:e.tr("View designed to present the valid operations against a vCenter infrastructure to a cloud consumer"),type:"vcenter"}};return{info:n,types:a}}),define("tabs/groups-tab/panels/info/panelId",["require"],function(){return"group_info_tab"}),define("tabs/groups-tab/panels/info",["require","hbs!./info/html","utils/locale","../utils/views","utils/tips","utils/panel/template-table","../tabId","./info/panelId"],function(t){function e(t){return this.title=r.tr("Info"),this.icon="fa-info-circle",this.element=t[p],this
}function a(){var t=s(this.element.TEMPLATE.GROUP_ADMIN_VIEWS,this.element.TEMPLATE.GROUP_ADMIN_DEFAULT_VIEW),e=s(this.element.TEMPLATE.SUNSTONE_VIEWS,this.element.TEMPLATE.DEFAULT_VIEW),a=$.extend({},this.element.TEMPLATE);delete a.GROUP_ADMIN_VIEWS,delete a.SUNSTONE_VIEWS,delete a.GROUP_ADMIN_DEFAULT_VIEW,delete a.DEFAULT_VIEW;var n=c.html(a,u,r.tr("Attributes"));return i({element:this.element,adminViews:t,userViews:e,templateTableHTML:n})}function n(t){var e=this;l.setup(t);var a=["GROUP_ADMIN_VIEWS","SUNSTONE_VIEWS","GROUP_ADMIN_DEFAULT_VIEW","DEFAULT_VIEW"],n=$.extend({},this.element.TEMPLATE);$.each(a,function(t,e){delete n[e]});var s={};return $.each(a,function(t,a){void 0!=e.element.TEMPLATE[a]&&(s[a]=e.element.TEMPLATE[a])}),c.setup(n,u,this.element.ID,t,s),!1}function s(t,e){var a=[];return t&&$.each(t.split(","),function(t,n){var s,i=o.info[n];s=i?{name:i.name,description:i.description}:{name:n,description:""},n==e&&(s.name+=" ("+r.tr("default")+")"),a.push(s)}),a}var i=t("hbs!./info/html"),r=t("utils/locale"),o=t("../utils/views"),l=t("utils/tips"),c=t("utils/panel/template-table"),d=(t("../tabId"),t("./info/panelId")),u="Group",p="GROUP";return e.PANEL_ID=d,e.prototype.html=a,e.prototype.setup=n,e}),define("templates/helpers/isTabActionEnabled",["require","hbs/handlebars","sunstone-config"],function(t){var e=t("hbs/handlebars"),a=t("sunstone-config"),n=function(t,e,n){return a.isTabActionEnabled(t,e)?n.fn(this):n.inverse(this)};return e.registerHelper("isTabActionEnabled",n),n}),define("hbs!tabs/groups-tab/panels/users/html",["hbs","hbs/handlebars","templates/helpers/isTabActionEnabled","templates/helpers/tr"],function(t,e){var a=e.template({1:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'  <div class="row">\n    <div class="large-4 columns right">\n      <span>\n        <button class="button secondary small radius" id="edit_admins_button" style="width: 100%;">\n          <span class="fa fa-pencil-square-o"></span>'+i((e.tr||t&&t.tr||s).call(t,"Edit administrators",{name:"tr",hash:{},data:n}))+'\n        </button>\n        <button class="button alert small radius" id="cancel_admins_button" style="display: none">\n          '+i((e.tr||t&&t.tr||s).call(t,"Cancel",{name:"tr",hash:{},data:n}))+'\n        </button>\n        <button class="button success small radius" id="submit_admins_button" style="display: none">\n          '+i((e.tr||t&&t.tr||s).call(t,"Apply",{name:"tr",hash:{},data:n}))+"\n        </button>\n      </span>\n    </div>\n  </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o="function",l="";return s=(e.isTabActionEnabled||t&&t.isTabActionEnabled||r).call(t,"groups-tab","Group.edit_admins",{name:"isTabActionEnabled",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(l+=s),l+='<div class="group_users_info_table">\n  ',i=null!=(i=e.usersTableHTML||(null!=t?t.usersTableHTML:t))?i:r,s=typeof i===o?i.call(t,{name:"usersTableHTML",hash:{},data:n}):i,null!=s&&(l+=s),l+"\n</div>\n\n\n"},useData:!0});return e.registerPartial("tabs/groups-tab/panels/users/html",a),a}),define("tabs/groups-tab/panels/users/panelId",["require"],function(){return"group_users_tab"}),define("tabs/groups-tab/panels/users",["require","utils/locale","sunstone-config","hbs!./users/html","tabs/users-tab/datatable","sunstone","../tabId","./users/panelId"],function(t){function e(t){return this.title=s.tr("Users"),this.icon="fa-users",this.element=t[d],this}function a(){this.users=[],void 0!=this.element.USERS.ID&&(this.users=this.element.USERS.ID,$.isArray(this.users)||(this.users=[this.users])),this.admins=[],void 0!=this.element.ADMINS.ID&&(this.admins=this.element.ADMINS.ID,$.isArray(this.admins)||(this.admins=[this.admins]));var t={info:!0,select:!0,selectOptions:{read_only:!0,fixed_ids:this.users,starred_ids:this.admins}};return this.usersTable=new o(u,t),r({usersTableHTML:this.usersTable.dataTableHTML})}function n(t){var e=this;this.usersTable.initialize(),this.usersTable.refreshResourceTableSelect(),i.isTabActionEnabled("groups-tab","Group.edit_admins")&&(t.off("click","#edit_admins_button"),t.on("click","#edit_admins_button",function(){$("#edit_admins_button",t).hide(),$("#cancel_admins_button",t).show(),$("#submit_admins_button",t).show();var a={info:!1,select:!0,selectOptions:{multiple_choice:!0,fixed_ids:e.users,starred_ids:e.admins}};return e.usersTableEdit=new o(p,a),$("div.group_users_info_table",t).html(e.usersTableEdit.dataTableHTML),e.usersTableEdit.initialize(),e.usersTableEdit.selectResourceTableSelect({ids:e.admins}),!1}),t.off("click","#cancel_admins_button"),t.on("click","#cancel_admins_button",function(){return l.runAction("Group.show",e.element.ID),!1}),t.off("click","#submit_admins_button"),t.on("click","#submit_admins_button",function(){var a=e.usersTableEdit.retrieveResourceTableSelect(t,"group_users_edit_list");return $.each(a,function(t,a){-1==e.admins.indexOf(a)&&l.runAction("Group.add_admin",e.element.ID,{admin_id:a})}),$.each(e.admins,function(t,n){-1==a.indexOf(n)&&l.runAction("Group.del_admin",e.element.ID,{admin_id:n})}),!1}))}var s=t("utils/locale"),i=t("sunstone-config"),r=t("hbs!./users/html"),o=t("tabs/users-tab/datatable"),l=t("sunstone"),c=(t("../tabId"),t("./users/panelId")),d="GROUP",u=c+"UsersTable",p=c+"UsersTableEdit";return e.PANEL_ID=c,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/groups-tab/panels/quotas/panelId",["require"],function(){return"group_quotas_tab"}),define("tabs/groups-tab/panels/quotas",["require","utils/locale","sunstone-config","utils/quotas/quota-defaults","utils/quotas/quota-widgets","../tabId","./quotas/panelId"],function(t){function e(t){return this.title=s.tr("Quotas"),this.icon="fa-align-left",this.element=t[u],this}function a(){return o.initQuotasPanel(this.element,r.getDefaultQuotas(d),i.isTabActionEnabled(l,d+".quotas_dialog"))}function n(t){return o.setupQuotasPanel(this.element,t,i.isTabActionEnabled(l,d+".quotas_dialog"),d),!1}var s=t("utils/locale"),i=t("sunstone-config"),r=t("utils/quotas/quota-defaults"),o=t("utils/quotas/quota-widgets"),l=t("../tabId"),c=t("./quotas/panelId"),d="Group",u="GROUP";return e.PANEL_ID=c,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/groups-tab/panels/accounting/panelId",["require"],function(){return"group_accounting_tab"}),define("tabs/groups-tab/panels/accounting",["require","utils/locale","utils/accounting","../tabId","./accounting/panelId"],function(t){function e(t){return this.title=s.tr("Accounting"),this.icon="fa-bar-chart-o",this.element=t[o],this}function a(){return i.html()}function n(t){i.setup(t,{fixed_group:this.element.ID,init_group_by:"user"})}var s=t("utils/locale"),i=t("utils/accounting"),r=(t("../tabId"),t("./accounting/panelId")),o="GROUP";return e.PANEL_ID=r,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/groups-tab/panels/showback/panelId",["require"],function(){return"group_showback_tab"}),define("tabs/groups-tab/panels/showback",["require","utils/locale","sunstone-config","utils/showback","../tabId","./showback/panelId"],function(t){function e(t){if(this.title=s.tr("Showback"),this.icon="fa-money",this.element=t[l],!i.isFeatureEnabled("showback"))throw"Showback is disabled in the configuration";return this}function a(){return r.html()}function n(t){r.setup(t,{fixed_user:"",fixed_group:this.element.ID})}var s=t("utils/locale"),i=t("sunstone-config"),r=t("utils/showback"),o=(t("../tabId"),t("./showback/panelId")),l="GROUP";return e.PANEL_ID=o,e.prototype.html=a,e.prototype.setup=n,e}),define("hbs!tabs/groups-tab/form-panels/create/wizard",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({1:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='        <div class="row">\n          <div class="large-7 columns">\n            <h4>'+l((i=null!=(i=e.name||(null!=t?t.name:t))?i:o,typeof i===r?i.call(t,{name:"name",hash:{},data:n}):i))+"\n";return s=e["if"].call(t,null!=t?t.description:t,{name:"if",hash:{},fn:this.program(2,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+="            </h4>\n            <table class=\"dataTable extended_table\">\n              <tr>\n                <th style='width: 60%;'></th>\n                <th>"+l((e.tr||t&&t.tr||o).call(t,"Group Users",{name:"tr",hash:{},data:n}))+"</th>\n                <th>"+l((e.tr||t&&t.tr||o).call(t,"Group Admins",{name:"tr",hash:{},data:n}))+"</th>\n              </tr>\n",s=e.each.call(t,null!=t?t.views:t,{name:"each",hash:{},fn:this.program(4,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+='            </table>\n          </div>\n          <div class="large-5 columns" style="text-align: center">\n',s=e["if"].call(t,null!=t?t.preview:t,{name:"if",hash:{},fn:this.program(7,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+"          </div>\n        </div>\n        <br>\n"},2:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'              <span class="tip">'+o((s=null!=(s=e.description||(null!=t?t.description:t))?s:r,typeof s===i?s.call(t,{name:"description",hash:{},data:n}):s))+"</span>\n"},4:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c="              <tr>\n                <td>\n                  "+l((i=null!=(i=e.name||(null!=t?t.name:t))?i:o,typeof i===r?i.call(t,{name:"name",hash:{},data:n}):i))+" "+l((e.tr||t&&t.tr||o).call(t,"View",{name:"tr",hash:{},data:n}))+"\n";return s=e["if"].call(t,null!=t?t.description:t,{name:"if",hash:{},fn:this.program(5,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+'                </td>\n                <td>\n                  <input class="user_view_input" type="checkbox"\n                  id="group_view_'+l((i=null!=(i=e.id||(null!=t?t.id:t))?i:o,typeof i===r?i.call(t,{name:"id",hash:{},data:n}):i))+'"\n                  value="'+l((i=null!=(i=e.id||(null!=t?t.id:t))?i:o,typeof i===r?i.call(t,{name:"id",hash:{},data:n}):i))+'"/>\n                </td>\n                <td>\n                  <input class="admin_view_input" type="checkbox"\n                  id="group_admin_view_'+l((i=null!=(i=e.id||(null!=t?t.id:t))?i:o,typeof i===r?i.call(t,{name:"id",hash:{},data:n}):i))+'"\n                  value="'+l((i=null!=(i=e.id||(null!=t?t.id:t))?i:o,typeof i===r?i.call(t,{name:"id",hash:{},data:n}):i))+'"/>\n                </td>\n              </tr>\n'},5:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'                  <span class="tip">'+o((s=null!=(s=e.description||(null!=t?t.description:t))?s:r,typeof s===i?s.call(t,{name:"description",hash:{},data:n}):s))+"</span>\n"},7:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'            <img src="images/'+o((s=null!=(s=e.preview||(null!=t?t.preview:t))?s:r,typeof s===i?s.call(t,{name:"preview",hash:{},data:n}):s))+'" style="height: 200px;">\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<form data-abide="ajax" id="'+l((i=null!=(i=e.formPanelId||(null!=t?t.formPanelId:t))?i:o,typeof i===r?i.call(t,{name:"formPanelId",hash:{},data:n}):i))+'Wizard" class="custom creation">\n  <div class="row">\n    <div class="columns medium-5">\n      <label>'+l((e.tr||t&&t.tr||o).call(t,"Name",{name:"tr",hash:{},data:n}))+':\n        <input required type="text" name="name" id="name" />\n      </label>\n    </div>\n    <div class="columns medium-7">\n      <dl class="tabs right-info-tabs text-center right" data-tab>\n       <dd class="active"><a href="#resource_views"><i class="fa fa-eye"></i><br>'+l((e.tr||t&&t.tr||o).call(t,"Views",{name:"tr",hash:{},data:n}))+'</a></dd>\n       <dd><a href="#administrators"><i class="fa fa-upload"></i><br>'+l((e.tr||t&&t.tr||o).call(t,"Admin",{name:"tr",hash:{},data:n}))+'</a></dd>\n       <dd><a href="#resource_creation"><i class="fa fa-folder-open"></i><br>'+l((e.tr||t&&t.tr||o).call(t,"Permissions",{name:"tr",hash:{},data:n}))+'</a></dd>\n     </dl>\n   </div>\n </div>\n <div class="tabs-content">\n  <div id="resource_views" class="content active">\n    <div class="row">\n      <div class="large-12 columns">\n        <p class="subheader">\n          '+l((e.tr||t&&t.tr||o).call(t,"Allow users in this group to use the following Sunstone views",{name:"tr",hash:{},data:n}))+'\n          &emsp;<span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Views available to the group users. If the default is unset, the one set in sunstone-views.yaml will be used",{name:"tr",hash:{},data:n}))+'</span>\n        </p>\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-12 columns">\n        <div class="row">\n          <div class="large-6 columns">\n            <label for="user_view_default">'+l((e.tr||t&&t.tr||o).call(t,"Default Users View",{name:"tr",hash:{},data:n}))+'\n            </label>\n            <select id="user_view_default">\n            </select>\n          </div>\n          <div class="large-6 columns">\n            <label for="admin_view_default">'+l((e.tr||t&&t.tr||o).call(t,"Default Admin View",{name:"tr",hash:{},data:n}))+'\n            </label>\n            <select id="admin_view_default">\n            </select>\n          </div>\n        </div>\n        <br>\n';return s=e.each.call(t,null!=t?t.viewTypes:t,{name:"each",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+='      </div>\n    </div>\n  </div>\n  <div id="administrators" class=" content">\n    <div class="row">\n      <div class="medium-6 columns" id="admin_user_wrapper">\n        <div class="row">\n          <div class="large-12 columns">\n            <label>\n              <input type="checkbox" id="admin_user" name="admin_user" value="YES" />\n              '+l((e.tr||t&&t.tr||o).call(t,"Create an administrator user",{name:"tr",hash:{},data:n}))+'\n              <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"You can create now an administrator user. More administrators can be added later.",{name:"tr",hash:{},data:n}))+"</span>\n            </label>\n          </div>\n        </div>\n        ",i=null!=(i=e.userCreationHTML||(null!=t?t.userCreationHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"userCreationHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+'\n      </div>\n    </div>\n  </div>\n  <div id="resource_creation" class="content">\n    <div class="row">\n      <div class="large-12 columns">\n        <label>\n          <input type="checkbox" id="shared_resources" name="shared_resources" value="YES" />\n          '+l((e.tr||t&&t.tr||o).call(t,"Allow users to view the VMs and Services of other users in the same group",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"An ACL Rule will be created to give users in this group access to all the resources in the same group.",{name:"tr",hash:{},data:n}))+'</span>\n        </label>\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-12 columns">\n        <p class="subheader">\n          '+l((e.tr||t&&t.tr||o).call(t,"Allow users in this group to create the following resources",{name:"tr",hash:{},data:n}))+'\n          &emsp;<span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"This will create new ACL Rules to define which virtual resources this group's users will be able to create.",{name:"tr",hash:{},data:n}))+'</span>\n        </p>\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-12 columns">\n        <table class="dataTable" style="table-layout:fixed">\n          <thead><tr>\n            <th>'+l((e.tr||t&&t.tr||o).call(t,"VMs",{name:"tr",hash:{},data:n}))+"</th>\n            <th>"+l((e.tr||t&&t.tr||o).call(t,"VNets",{name:"tr",hash:{},data:n}))+"</th>\n            <th>"+l((e.tr||t&&t.tr||o).call(t,"Security Groups",{name:"tr",hash:{},data:n}))+"</th>\n            <th>"+l((e.tr||t&&t.tr||o).call(t,"Images",{name:"tr",hash:{},data:n}))+"</th>\n            <th>"+l((e.tr||t&&t.tr||o).call(t,"Templates",{name:"tr",hash:{},data:n}))+"</th>\n            <th>"+l((e.tr||t&&t.tr||o).call(t,"Documents",{name:"tr",hash:{},data:n}))+'<span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Documents are a special tool used for general purposes, mainly by OneFlow. If you want to enable users of this group to use service composition via OneFlow, let it checked.",{name:"tr",hash:{},data:n}))+'</span></th>\n          </tr></thead>\n          <tbody>\n            <tr>\n              <td><input type="checkbox" id="group_res_vm" name="group_res_vm" class="resource_cb" value="VM"></input></td>\n              <td><input type="checkbox" id="group_res_net" name="group_res_net" class="resource_cb" value="NET"></input></td>\n              <td><input type="checkbox" id="group_res_sg" name="group_res_sg" class="resource_cb" value="SECGROUP"></input></td>\n              <td><input type="checkbox" id="group_res_image" name="group_res_image" class="resource_cb" value="IMAGE"></input></td>\n              <td><input type="checkbox" id="group_res_template" name="group_res_template" class="resource_cb" value="TEMPLATE"></input></td>\n              <td><input type="checkbox" id="group_res_document" name="group_res_document" class="resource_cb" value="DOCUMENT"></input></td>\n              <td/>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</div>\n<div class="reveal-footer">\n  <div class="row collapse" id="default_vdc_warning">\n    <div class="large-12 columns text-right">\n      <span class="radius secondary label"><i class="fa fa-warning"/> '+l((e.tr||t&&t.tr||o).call(t,"New Groups are automatically added to the default VDC",{name:"tr",hash:{},data:n}))+"</span>\n    </div>\n  </div>\n</div>\n</form>"},useData:!0});return e.registerPartial("tabs/groups-tab/form-panels/create/wizard",a),a}),define("tabs/groups-tab/form-panels/create",["require","foundation.tab","utils/form-panels/form-panel","sunstone","utils/locale","tabs/users-tab/utils/user-creation","utils/tips","tabs/groups-tab/utils/views","utils/template-utils","hbs!./create/wizard","./create/formPanelId","../tabId"],function(t){function e(){this.formPanelId=_,this.tabId=b,this.actions={create:{title:d.tr("Create Group"),buttonText:d.tr("Create"),resetButton:!0},update:{title:d.tr("Update Group"),buttonText:d.tr("Update"),resetButton:!1}},this.userCreation=new u(_),l.call(this)}function a(){var t,e={cloud:[],advanced:[],vcenter:[],other:[]};$.each(config.all_views,function(a,n){if(t=h.info[n])switch(t.type){case"advanced":e.advanced.push(t);break;case"cloud":e.cloud.push(t);break;case"vcenter":e.vcenter.push(t);break;default:e.other.push({id:n,name:n,description:null,type:"other"})}else e.other.push({id:n,name:n,description:null,type:"other"})});var a=[];return $.each(e,function(t,e){e.length>0&&a.push({name:h.types[t].name,description:h.types[t].description,preview:h.types[t].preview,views:e})}),m({formPanelId:this.formPanelId,userCreationHTML:this.userCreation.html(),viewTypes:a})}function n(t){var e=this;this.userCreation.setup($("#admin_user_wrapper",t)),p.setup(t),$("input#name",t).change(function(){var a=$(this).val();e.userCreation.setName(t,a+"-admin")}),$("input#admin_user",t).change(function(){$(this).prop("checked")?e.userCreation.enable($("#admin_user_wrapper",t)):e.userCreation.disable($("#admin_user_wrapper",t))}),this.userCreation.disable($("#admin_user_wrapper",t)),$.each($('[id^="group_res"]',t),function(){$(this).prop("checked",!0)}),$("#group_res_net",t).prop("checked",!1),$(t).off("change",".admin_view_input"),$(t).on("change",".admin_view_input",function(){o(t,"admin")}),$(t).off("change",".user_view_input"),$(t).on("change",".user_view_input",function(){o(t,"user")}),"create"==this.action&&($("input#group_view_cloud").attr("checked","checked").change(),$("input#group_admin_view_groupadmin").attr("checked","checked").change(),o(t,"admin","groupadmin"),o(t,"user","cloud"))}function s(t){var e=[];$.each($('[id^="group_view"]:checked',t),function(){e.push($(this).val())});var a=[];$.each($('[id^="group_admin_view"]:checked',t),function(){a.push($(this).val())});var n=$("#user_view_default",t).val(),s=$("#admin_view_default",t).val();if("create"==this.action){var i=$("#name",t).val(),r=null;$("#admin_user",t).prop("checked")&&(r=this.userCreation.retrieve($("#admin_user_wrapper",t)));var o={group:{name:i}};r&&(o.group.group_admin=r);var l="",d="";return $.each($('[id^="group_res"]:checked',t),function(){l+=d+$(this).val(),d="+"}),o.group.resources=l,$("#shared_resources",t).prop("checked")&&(o.group.shared_resources="VM+DOCUMENT"),o.group.views=e,void 0!=n&&(o.group.default_view=n),o.group.admin_views=a,void 0!=s&&(o.group.default_admin_view=s),c.runAction("Group.create",o),!1}if("update"==this.action){var u=this.element.TEMPLATE;delete u.SUNSTONE_VIEWS,delete u.DEFAULT_VIEW,delete u.GROUP_ADMIN_VIEWS,delete u.GROUP_ADMIN_DEFAULT_VIEW,0!=e.length&&(u.SUNSTONE_VIEWS=e.join(",")),void 0!=n&&(u.DEFAULT_VIEW=n),0!=a.length&&(u.GROUP_ADMIN_VIEWS=a.join(",")),void 0!=s&&(u.GROUP_ADMIN_DEFAULT_VIEW=s);var p=f.templateToString(u);return c.runAction("Group.update",this.resourceId,p),!1}}function i(){}function r(t,e){if("update"==this.action){this.resourceId=e.ID,this.element=e,$("input#name",t).attr("disabled","disabled"),$("a[href='#administrators']",t).parents("dd").hide(),$("a[href='#resource_creation']",t).parents("dd").hide(),$("input#name",t).val(e.NAME);var a="";if($('input[id^="group_view"]',t).removeAttr("checked"),e.TEMPLATE.SUNSTONE_VIEWS){a=e.TEMPLATE.SUNSTONE_VIEWS;var n=a.split(",");$.each(n,function(){$('input[id^="group_view"][value="'+this.trim()+'"]',t).attr("checked","checked").change()})}if($('input[id^="group_default_view"]',t).removeAttr("checked"),e.TEMPLATE.DEFAULT_VIEW?$("#user_view_default",t).val(e.TEMPLATE.DEFAULT_VIEW.trim()).change():$("#user_view_default",t).val("").change(),$('input[id^="group_admin_view"]',t).removeAttr("checked"),e.TEMPLATE.GROUP_ADMIN_VIEWS){a=e.TEMPLATE.GROUP_ADMIN_VIEWS;var n=a.split(",");$.each(n,function(){$('input[id^="group_admin_view"][value="'+this.trim()+'"]',t).attr("checked","checked").change()})}$('input[id^="group_default_admin_view"]',t).removeAttr("checked"),e.TEMPLATE.GROUP_ADMIN_DEFAULT_VIEW?$("#admin_view_default",t).val(e.TEMPLATE.GROUP_ADMIN_DEFAULT_VIEW.trim()).change():$("#admin_view_default",t).val("").change()}}function o(t,e,a){var n=a||$("#"+e+"_view_default",t).val(),s='<option id="" name="" value=""></option>';$("."+e+"_view_input:checked",t).each(function(){var t=h.info[this.value]?h.info[this.value].name:this.value;s+='<option value="'+this.value+'">'+t+"</option>"}),$("select#"+e+"_view_default",t).html(s),n&&$("#"+e+"_view_default",t).val(n).change()}t("foundation.tab");var l=t("utils/form-panels/form-panel"),c=t("sunstone"),d=t("utils/locale"),u=t("tabs/users-tab/utils/user-creation"),p=t("utils/tips"),h=t("tabs/groups-tab/utils/views"),f=t("utils/template-utils"),m=t("hbs!./create/wizard"),_=t("./create/formPanelId"),b=t("../tabId");return e.FORM_PANEL_ID=_,e.prototype=Object.create(l.prototype),e.prototype.constructor=e,e.prototype.htmlWizard=a,e.prototype.submitWizard=s,e.prototype.onShow=i,e.prototype.fill=r,e.prototype.setup=n,e}),define("tabs/groups-tab",["require","utils/locale","./groups-tab/buttons","./groups-tab/actions","./groups-tab/datatable","./groups-tab/tabId","./groups-tab/dialogs/quotas","./groups-tab/panels/info","./groups-tab/panels/users","./groups-tab/panels/quotas","./groups-tab/panels/accounting","./groups-tab/panels/showback","./groups-tab/form-panels/create"],function(t){var e=t("utils/locale"),a=t("./groups-tab/buttons"),n=t("./groups-tab/actions"),s=t("./groups-tab/datatable"),i=t("./groups-tab/tabId"),r="dataTableGroups",o=[t("./groups-tab/dialogs/quotas")],l=[t("./groups-tab/panels/info"),t("./groups-tab/panels/users"),t("./groups-tab/panels/quotas"),t("./groups-tab/panels/accounting"),t("./groups-tab/panels/showback")],c=[t("./groups-tab/form-panels/create")],d={tabId:i,title:e.tr("Groups"),tabClass:"subTab",parentTab:"system-tab",listHeader:'<i class="fa fa-fw fa-users"></i>&emsp;'+e.tr("Groups"),infoHeader:'<i class="fa fa-fw fa-users"></i>&emsp;'+e.tr("Group"),subheader:'<span>        <span class="total_groups"/> <small>'+e.tr("TOTAL")+"</small>      </span>",resource:"Group",buttons:a,actions:n,dataTable:new s(r,{actions:!0,info:!0}),panels:l,formPanels:c,dialogs:o};return d}),define("tabs/vdcs-tab/buttons",["require","utils/locale"],function(t){var e=t("utils/locale"),a={"Vdc.refresh":{type:"action",layout:"refresh",alwaysActive:!0},"Vdc.create_dialog":{type:"create_dialog",layout:"create"},"Vdc.update_dialog":{type:"action",layout:"main",text:e.tr("Update")},"Vdc.delete":{type:"confirm",layout:"del",text:e.tr("Delete")}};return a}),define("tabs/vdcs-tab/tabId",["require"],function(){return"vdcs-tab"}),define("tabs/vdcs-tab/datatable",["require","utils/tab-datatable","sunstone-config","utils/locale","./tabId"],function(t){function e(t,e){this.conf=e||{},this.tabId=c,this.dataTableId=t,this.resource=o,this.xmlRoot=l,this.dataTableOptions={bAutoWidth:!1,bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:["check"]},{sWidth:"35px",aTargets:[0]},{bVisible:!0,aTargets:i.tabTableColumns(c)},{bVisible:!1,aTargets:["_all"]}]},this.columns=[r.tr("ID"),r.tr("Name"),r.tr("Groups"),r.tr("Clusters"),r.tr("Hosts"),r.tr("VNets"),r.tr("Datastores")],this.selectOptions={id_index:1,name_index:2,select_resource:r.tr("Please select a VDC from the list"),you_selected:r.tr("You selected the following VDC:"),select_resource_multiple:r.tr("Please select one or more VDCs from the list"),you_selected_multiple:r.tr("You selected the following VDCs:")},s.call(this)}function a(t){var e=t[l];return['<input class="check_item" type="checkbox" id="'+o.toLowerCase()+"_"+e.ID+'" name="selected_items" value="'+e.ID+'"/>',e.ID,e.NAME,n(e.GROUPS.ID),n(e.CLUSTERS.CLUSTER),n(e.HOSTS.HOST),n(e.VNETS.VNET),n(e.DATASTORES.DATASTORE)]}function n(t){var e=0;return $.isArray(t)?e=t.length:$.isEmptyObject(t)||(e=1),e}var s=t("utils/tab-datatable"),i=t("sunstone-config"),r=t("utils/locale"),o="Vdc",l="VDC",c=t("./tabId");return e.prototype=Object.create(s.prototype),e.prototype.constructor=e,e.prototype.elementArray=a,e}),define("tabs/vdcs-tab/form-panels/create/formPanelId",["require"],function(){return"createVDCForm"}),define("tabs/vdcs-tab/actions",["require","sunstone","utils/notifier","utils/locale","./datatable","opennebula/vdc","./tabId","./form-panels/create/formPanelId"],function(t){var e=t("sunstone"),a=t("utils/notifier"),n=t("utils/locale"),s=(t("./datatable"),t("opennebula/vdc")),i="Vdc",r=t("./tabId"),o=t("./form-panels/create/formPanelId"),l={"Vdc.create":{type:"create",call:s.create,callback:function(t,s){e.resetFormPanel(r,o),e.hideFormPanel(r);var l=t.request.data[0].group_ids;void 0!=l&&$.each(l,function(){e.runAction(i+".add_group",s.VDC.ID,{group_id:parseInt(this)})});var c=t.request.data[0].clusters;void 0!=c&&$.each(c,function(){e.runAction(i+".add_cluster",s.VDC.ID,this)});var d=t.request.data[0].hosts;void 0!=d&&$.each(d,function(){e.runAction(i+".add_host",s.VDC.ID,this)});var u=t.request.data[0].vnets;void 0!=u&&$.each(u,function(){e.runAction(i+".add_vnet",s.VDC.ID,this)});var p=t.request.data[0].datastores;void 0!=p&&$.each(p,function(){e.runAction(i+".add_datastore",s.VDC.ID,this)}),e.runAction(i+".show",t.request.data[0][0]),e.getDataTable(r).addElement(t,s),a.notifyCustom(n.tr("VDC created")," ID: "+s.VDC.ID,!1)},error:a.onError},"Vdc.create_dialog":{type:"custom",call:function(){e.showFormPanel(r,o,"create")}},"Vdc.list":{type:"list",call:s.list,callback:function(t,a){e.getDataTable(r).updateView(t,a)},error:a.onError},"Vdc.show":{type:"single",call:s.show,callback:function(t,a){e.getDataTable(r).updateElement(t,a),e.rightInfoVisible($("#"+r))&&e.insertPanels(r,a)},error:a.onError},"Vdc.refresh":{type:"custom",call:function(){var t=$("#"+r);e.rightInfoVisible(t)?e.runAction(i+".show",e.rightInfoResourceId(t)):(e.getDataTable(r).waitingNodes(),e.runAction(i+".list",{force:!0}))},error:a.onError},"Vdc.delete":{type:"multiple",call:s.del,callback:function(t,a){e.getDataTable(r).deleteElement(t,a)},elements:function(){return e.getDataTable(r).elements()},error:a.onError},"Vdc.rename":{type:"single",call:s.rename,callback:function(t){e.runAction(i+".show",t.request.data[0][0])},error:a.onError},"Vdc.update_dialog":{type:"custom",call:function(){var t=e.getDataTable(r).elements();if(1!=t.length)return a.notifyMessage("Please select one (and just one) VDC to update."),!1;var n=""+t[0];e.runAction(i+".show_to_update",n)}},"Vdc.show_to_update":{type:"single",call:s.show,callback:function(t,a){e.showFormPanel(r,o,"update",function(t,e){t.fill(e,a.VDC)})},error:a.onError},"Vdc.update":{type:"single",call:s.update,callback:function(){e.hideFormPanel(r),a.notifyMessage(n.tr("VDC updated correctly"))},error:function(t,n){e.hideFormPanelLoading(r),a.onError(t,n)}},"Vdc.update_template":{type:"single",call:s.update,callback:function(t){e.runAction(i+".show",t.request.data[0][0])},error:a.onError},"Vdc.add_group":{type:"single",call:s.add_group,callback:function(){},error:a.onError},"Vdc.del_group":{type:"single",call:s.del_group,callback:function(){},error:a.onError},"Vdc.add_cluster":{type:"single",call:s.add_cluster,callback:function(){},error:a.onError},"Vdc.del_cluster":{type:"single",call:s.del_cluster,callback:function(){},error:a.onError},"Vdc.add_host":{type:"single",call:s.add_host,callback:function(){},error:a.onError},"Vdc.del_host":{type:"single",call:s.del_host,callback:function(){},error:a.onError},"Vdc.add_vnet":{type:"single",call:s.add_vnet,callback:function(){},error:a.onError},"Vdc.del_vnet":{type:"single",call:s.del_vnet,callback:function(){},error:a.onError},"Vdc.add_datastore":{type:"single",call:s.add_datastore,callback:function(){},error:a.onError},"Vdc.del_datastore":{type:"single",call:s.del_datastore,callback:function(){},error:a.onError}};return l}),define("hbs!tabs/vdcs-tab/panels/info/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,c="function",d='<div class="row">\n  <div class="large-6 columns">\n    <table class="dataTable extended_table">\n      <thead>\n        <tr>\n          <th colspan="3">'+o((e.tr||t&&t.tr||r).call(t,"Information",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <tbody>\n       <tr>\n        <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"ID",{name:"tr",hash:{},data:n}))+'</td>\n        <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s.ID:s,t))+"</td>\n        <td></td>\n      </tr>\n      ";return i=null!=(i=e.renameTrHTML||(null!=t?t.renameTrHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"renameTrHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+='\n    </tbody>\n  </table>\n</div>\n</div>\n<div class="row">\n  <div class="large-9 columns">\n    ',i=null!=(i=e.templateTableHTML||(null!=t?t.templateTableHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"templateTableHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+"\n  </div>\n</div>"},useData:!0});return e.registerPartial("tabs/vdcs-tab/panels/info/html",a),a}),define("hbs!utils/panel/rename-tr/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<tr class="'+o((s=null!=(s=e.resourceType||(null!=t?t.resourceType:t))?s:r,typeof s===i?s.call(t,{name:"resourceType",hash:{},data:n}):s))+'_rename">\n  <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Name",{name:"tr",hash:{},data:n}))+'</td>\n  <td class="value_td_rename">'+o((s=null!=(s=e.resourceName||(null!=t?t.resourceName:t))?s:r,typeof s===i?s.call(t,{name:"resourceName",hash:{},data:n}):s))+'</td>\n  <td>\n    <div id="div_edit_rename">\n      <a id="div_edit_rename_link" class="edit_e" href="#"> <i class="fa fa-pencil-square-o right"/></a>\n    </div>\n  </td>\n</tr>'
},useData:!0});return e.registerPartial("utils/panel/rename-tr/html",a),a}),define("utils/panel/rename-tr",["require","hbs!./rename-tr/html","sunstone"],function(t){var e=t("hbs!./rename-tr/html"),a=t("sunstone"),n=function(t,a){var n=e({resourceType:t.toLowerCase(),resourceName:a});return n},s=function(t,e,n){return n.off("click","#div_edit_rename_link"),n.on("click","#div_edit_rename_link",function(){var t=$(".value_td_rename",n).text();$(".value_td_rename",n).html('<input class="input_edit_value_rename" id="input_edit_rename" type="text" value="'+t+'"/>')}),n.off("change",".input_edit_value_rename"),n.on("change",".input_edit_value_rename",function(){var s=$(".input_edit_value_rename",n).val();if(""!=s){var i={name:s};a.runAction(t+".rename",e,i)}}),!1};return{html:n,setup:s}}),define("tabs/vdcs-tab/panels/info/panelId",["require"],function(){return"vdc_info_tab"}),define("tabs/vdcs-tab/panels/info",["require","hbs!./info/html","utils/locale","utils/panel/rename-tr","utils/panel/template-table","../tabId","./info/panelId"],function(t){function e(t){return this.title=i.tr("Info"),this.icon="fa-info-circle",this.element=t[d],this}function a(){var t=r.html(c,this.element.NAME),e=o.html(this.element.TEMPLATE,c,i.tr("Attributes"));return s({element:this.element,renameTrHTML:t,templateTableHTML:e})}function n(t){r.setup(c,this.element.ID,t),o.setup(this.element.TEMPLATE,c,this.element.ID,t)}var s=t("hbs!./info/html"),i=t("utils/locale"),r=t("utils/panel/rename-tr"),o=t("utils/panel/template-table"),l=(t("../tabId"),t("./info/panelId")),c="Vdc",d="VDC";return e.PANEL_ID=l,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/vdcs-tab/panels/groups/panelId",["require"],function(){return"vdc_groups_tab"}),define("tabs/vdcs-tab/panels/groups",["require","utils/locale","tabs/groups-tab/datatable","./groups/panelId"],function(t){function e(t){return this.title=s.tr("Groups"),this.icon="fa-users",this.element=t[l],this}function a(){var t=[];void 0!=this.element.GROUPS.ID&&(t=this.element.GROUPS.ID,$.isArray(t)||(t=[t]));var e={info:!0,select:!0,selectOptions:{read_only:!0,fixed_ids:t}};return this.groupsTable=new i(o,e),this.groupsTable.dataTableHTML}function n(){return this.groupsTable.initialize(),this.groupsTable.refreshResourceTableSelect(),!1}var s=t("utils/locale"),i=t("tabs/groups-tab/datatable"),r=t("./groups/panelId"),o=r+"GroupsTable",l="VDC";return e.PANEL_ID=r,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/vdcs-tab/utils/common",["require"],function(){function t(t){function e(t){void 0==a[t]&&(a[t]={clusters:[],hosts:[],vnets:[],datastores:[]})}var a={},n=[],s=[],i=[],r=[];return t.CLUSTERS.CLUSTER&&(n=t.CLUSTERS.CLUSTER,$.isArray(n)||(n=[n])),t.HOSTS.HOST&&(s=t.HOSTS.HOST,$.isArray(s)||(s=[s])),t.VNETS.VNET&&(i=t.VNETS.VNET,$.isArray(i)||(i=[i])),t.DATASTORES.DATASTORE&&(r=t.DATASTORES.DATASTORE,$.isArray(r)||(r=[r])),$.each(n,function(t,n){e(n.ZONE_ID),a[n.ZONE_ID].clusters.push(n.CLUSTER_ID)}),$.each(s,function(t,n){e(n.ZONE_ID),a[n.ZONE_ID].hosts.push(n.HOST_ID)}),$.each(i,function(t,n){e(n.ZONE_ID),a[n.ZONE_ID].vnets.push(n.VNET_ID)}),$.each(r,function(t,n){e(n.ZONE_ID),a[n.ZONE_ID].datastores.push(n.DATASTORE_ID)}),a}var e="-10";return{indexedVdcResources:t,VDC_ALL_RESOURCES:e}}),define("hbs!tabs/vdcs-tab/utils/resources-tab/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<div class="row">\n  <div class="large-8 medium-6 columns">\n    <label class="inline right">'+i((e.tr||t&&t.tr||s).call(t,"Zone",{name:"tr",hash:{},data:n}))+'</label>\n  </div>\n  <div class="large-4 medium-6 columns end">\n    <select class="vdc_zones_select">\n    </select>\n  </div>\n</div>\n<div class="row">\n  <div class="large-12 columns">\n    <div class="tabs-content vdc_zones_tabs_content"></div>\n  </div>\n</div>'},useData:!0});return e.registerPartial("tabs/vdcs-tab/utils/resources-tab/html",a),a}),define("hbs!tabs/vdcs-tab/utils/resources-zone/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<div class="row">\n  <div class="large-12 columns">\n    <dl class="tabs right-info-tabs text-center" data-tab>\n      <dd class="active"><a href="#vdcClustersTab_'+l((i=null!=(i=e.unique_id||(null!=t?t.unique_id:t))?i:o,typeof i===r?i.call(t,{name:"unique_id",hash:{},data:n}):i))+'"><i class="fa fa-th"></i><br>'+l((e.tr||t&&t.tr||o).call(t,"Clusters",{name:"tr",hash:{},data:n}))+'</a></dd>\n      <dd><a href="#vdcHostsTab_'+l((i=null!=(i=e.unique_id||(null!=t?t.unique_id:t))?i:o,typeof i===r?i.call(t,{name:"unique_id",hash:{},data:n}):i))+'"><i class="fa fa-hdd-o"></i><br>'+l((e.tr||t&&t.tr||o).call(t,"Hosts",{name:"tr",hash:{},data:n}))+'</a></dd>\n      <dd><a href="#vdcVnetsTab_'+l((i=null!=(i=e.unique_id||(null!=t?t.unique_id:t))?i:o,typeof i===r?i.call(t,{name:"unique_id",hash:{},data:n}):i))+'"><i class="fa fa-globe"></i><br>'+l((e.tr||t&&t.tr||o).call(t,"VNets",{name:"tr",hash:{},data:n}))+'</a></dd>\n      <dd><a href="#vdcDatastoresTab_'+l((i=null!=(i=e.unique_id||(null!=t?t.unique_id:t))?i:o,typeof i===r?i.call(t,{name:"unique_id",hash:{},data:n}):i))+'"><i class="fa fa-folder-open"></i><br>'+l((e.tr||t&&t.tr||o).call(t,"Datastores",{name:"tr",hash:{},data:n}))+'</a></dd>\n    </dl>\n    <div class="tabs-content">\n      <div class="content active" id="vdcClustersTab_'+l((i=null!=(i=e.unique_id||(null!=t?t.unique_id:t))?i:o,typeof i===r?i.call(t,{name:"unique_id",hash:{},data:n}):i))+'" class="content">\n        <div class="row">\n          <div class="large-12 columns">\n            <label for="all_clusters_'+l((i=null!=(i=e.unique_id||(null!=t?t.unique_id:t))?i:o,typeof i===r?i.call(t,{name:"unique_id",hash:{},data:n}):i))+'">\n              <input type="checkbox" name="all_clusters_'+l((i=null!=(i=e.unique_id||(null!=t?t.unique_id:t))?i:o,typeof i===r?i.call(t,{name:"unique_id",hash:{},data:n}):i))+'" id="all_clusters_'+l((i=null!=(i=e.unique_id||(null!=t?t.unique_id:t))?i:o,typeof i===r?i.call(t,{name:"unique_id",hash:{},data:n}):i))+'" />\n              '+l((e.tr||t&&t.tr||o).call(t,"All",{name:"tr",hash:{},data:n}))+'\n              <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Selects all current and future clusters",{name:"tr",hash:{},data:n}))+'</span>\n            </label>\n          </div>\n        </div>\n        <div class="vdc_clusters_select">\n          ';return i=null!=(i=e.clustersTableHTML||(null!=t?t.clustersTableHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"clustersTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+='\n        </div>\n      </div>\n      <div id="vdcHostsTab_'+l((i=null!=(i=e.unique_id||(null!=t?t.unique_id:t))?i:o,typeof i===r?i.call(t,{name:"unique_id",hash:{},data:n}):i))+'" class="content">\n        <div class="row">\n          <div class="large-12 columns">\n            <label for="all_hosts_'+l((i=null!=(i=e.unique_id||(null!=t?t.unique_id:t))?i:o,typeof i===r?i.call(t,{name:"unique_id",hash:{},data:n}):i))+'">\n              <input type="checkbox" name="all_hosts_'+l((i=null!=(i=e.unique_id||(null!=t?t.unique_id:t))?i:o,typeof i===r?i.call(t,{name:"unique_id",hash:{},data:n}):i))+'" id="all_hosts_'+l((i=null!=(i=e.unique_id||(null!=t?t.unique_id:t))?i:o,typeof i===r?i.call(t,{name:"unique_id",hash:{},data:n}):i))+'" />\n              '+l((e.tr||t&&t.tr||o).call(t,"All",{name:"tr",hash:{},data:n}))+'\n              <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Selects all current and future hosts",{name:"tr",hash:{},data:n}))+'</span>\n            </label>\n          </div>\n        </div>\n        <div class="vdc_hosts_select">\n          ',i=null!=(i=e.hostsTableHTML||(null!=t?t.hostsTableHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"hostsTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+='\n        </div>\n      </div>\n      <div id="vdcVnetsTab_'+l((i=null!=(i=e.unique_id||(null!=t?t.unique_id:t))?i:o,typeof i===r?i.call(t,{name:"unique_id",hash:{},data:n}):i))+'" class="content">\n        <div class="row">\n          <div class="large-12 columns">\n            <label for="all_vnets_'+l((i=null!=(i=e.unique_id||(null!=t?t.unique_id:t))?i:o,typeof i===r?i.call(t,{name:"unique_id",hash:{},data:n}):i))+'">\n              <input type="checkbox" name="all_vnets_'+l((i=null!=(i=e.unique_id||(null!=t?t.unique_id:t))?i:o,typeof i===r?i.call(t,{name:"unique_id",hash:{},data:n}):i))+'" id="all_vnets_'+l((i=null!=(i=e.unique_id||(null!=t?t.unique_id:t))?i:o,typeof i===r?i.call(t,{name:"unique_id",hash:{},data:n}):i))+'" />\n              '+l((e.tr||t&&t.tr||o).call(t,"All",{name:"tr",hash:{},data:n}))+'\n              <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Selects all current and future vnets",{name:"tr",hash:{},data:n}))+'</span>\n            </label>\n          </div>\n        </div>\n        <div class="vdc_vnets_select">\n          ',i=null!=(i=e.vnetsTableHTML||(null!=t?t.vnetsTableHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"vnetsTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+='\n        </div>\n      </div>\n      <div id="vdcDatastoresTab_'+l((i=null!=(i=e.unique_id||(null!=t?t.unique_id:t))?i:o,typeof i===r?i.call(t,{name:"unique_id",hash:{},data:n}):i))+'" class="content">\n        <div class="row">\n          <div class="large-12 columns">\n            <label for="all_datastores_'+l((i=null!=(i=e.unique_id||(null!=t?t.unique_id:t))?i:o,typeof i===r?i.call(t,{name:"unique_id",hash:{},data:n}):i))+'">\n              <input type="checkbox" name="all_datastores_'+l((i=null!=(i=e.unique_id||(null!=t?t.unique_id:t))?i:o,typeof i===r?i.call(t,{name:"unique_id",hash:{},data:n}):i))+'" id="all_datastores_'+l((i=null!=(i=e.unique_id||(null!=t?t.unique_id:t))?i:o,typeof i===r?i.call(t,{name:"unique_id",hash:{},data:n}):i))+'" />\n              '+l((e.tr||t&&t.tr||o).call(t,"All",{name:"tr",hash:{},data:n}))+'\n              <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Selects all current and future datastores",{name:"tr",hash:{},data:n}))+'</span>\n            </label>\n          </div>\n        </div>\n        <div class="vdc_datastores_select">\n          ',i=null!=(i=e.datastoresTableHTML||(null!=t?t.datastoresTableHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"datastoresTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+"\n        </div>\n      </div>\n    </div>\n  </div>\n</div>"},useData:!0});return e.registerPartial("tabs/vdcs-tab/utils/resources-zone/html",a),a}),define("tabs/clusters-tab/tabId",["require"],function(){return"clusters-tab"}),define("tabs/clusters-tab/datatable",["require","utils/tab-datatable","sunstone-config","utils/locale","./tabId"],function(t){function e(t,e){this.conf=e||{},this.tabId=c,this.dataTableId=t,this.resource=o,this.xmlRoot=l,this.dataTableOptions={bAutoWidth:!1,bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:["check"]},{sWidth:"35px",aTargets:[0]},{bVisible:!0,aTargets:i.tabTableColumns(c)},{bVisible:!1,aTargets:["_all"]}]},this.columns=[r.tr("ID"),r.tr("Name"),r.tr("Hosts"),r.tr("VNets"),r.tr("Datastores")],this.selectOptions={id_index:1,name_index:2,select_resource:r.tr("Please select a Cluster from the list"),you_selected:r.tr("You selected the following Cluster:"),select_resource_multiple:r.tr("Please select one or more clusters from the list"),you_selected_multiple:r.tr("You selected the following clusters:")},s.call(this)}function a(t){var e=t[l];return['<input class="check_item" type="checkbox" id="'+o.toLowerCase()+"_"+e.ID+'" name="selected_items" value="'+e.ID+'"/>',e.ID,e.NAME,n(e.HOSTS.ID),n(e.VNETS.ID),n(e.DATASTORES.ID)]}function n(t){var e=0;return $.isArray(t)?e=t.length:$.isEmptyObject(t)||(e=1),e}var s=t("utils/tab-datatable"),i=t("sunstone-config"),r=t("utils/locale"),o="Cluster",l="CLUSTER",c=t("./tabId");return e.prototype=Object.create(s.prototype),e.prototype.constructor=e,e.prototype.elementArray=a,e}),define("tabs/hosts-tab/utils/cpu-bars",["require","utils/progress-bar","utils/humanize"],function(t){var e=t("utils/progress-bar"),a=(t("utils/humanize"),function(t,a){var n,s,i=a?t:t.HOST_SHARE,r=parseInt(i.MAX_CPU);if(i.CPU_USAGE){var o=parseInt(i.CPU_USAGE);if(r>0){var l=Math.round(o/r*100);n=o+" / "+r+" ("+l+"%)"}else n="";s=e.html(o,r,n)}var c;if(i.USED_CPU){var d=parseInt(i.USED_CPU);if(r>0){var u=Math.round(d/r*100);n=d+" / "+r+" ("+u+"%)"}else n="";c=e.html(d,r,n)}return{real:c,allocated:s}});return{html:a}}),define("tabs/hosts-tab/utils/memory-bars",["require","utils/progress-bar","utils/humanize"],function(t){var e=t("utils/progress-bar"),a=t("utils/humanize"),n=function(t,n){var s,i=n?t:t.HOST_SHARE,r=parseInt(i.MAX_MEM),o="";if(i.MEM_USAGE){var l=parseInt(i.MEM_USAGE);if(r>0){var c=Math.round(l/r*100);o=a.size(l)+" / "+a.size(r)+" ("+c+"%)"}else o=a.size(l)+" / -";s=e.html(l,r,o)}var d;if(i.USED_MEM){var u=parseInt(i.USED_MEM);if(r>0){var p=Math.round(u/r*100);o=a.size(u)+" / "+a.size(r)+" ("+p+"%)"}else o=a.size(u)+" / -";d=e.html(u,r,o)}return{real:d,allocated:s}};return{html:n}}),define("tabs/hosts-tab/datatable",["require","utils/tab-datatable","sunstone-config","utils/locale","utils/humanize","./utils/cpu-bars","./utils/memory-bars","opennebula/host","./tabId"],function(t){function e(t,e){this.conf=e||{},this.tabId=m,this.dataTableId=t,this.resource=h,this.xmlRoot=f,this.dataTableOptions={bAutoWidth:!1,bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:["check",5,6,7,8]},{sWidth:"35px",aTargets:[0]},{bVisible:!0,aTargets:o.tabTableColumns(m)},{bVisible:!1,aTargets:["_all"]}]},this.columns=[l.tr("ID"),l.tr("Name"),l.tr("Cluster"),l.tr("RVMs"),l.tr("Real CPU"),l.tr("Allocated CPU"),l.tr("Real MEM"),l.tr("Allocated MEM"),l.tr("Status"),l.tr("IM MAD"),l.tr("VM MAD"),l.tr("Last monitored on")],this.selectOptions={id_index:1,name_index:2,select_resource:l.tr("Please select a Host from the list"),you_selected:l.tr("You selected the following Host:"),select_resource_multiple:l.tr("Please select one or more hosts from the list"),you_selected_multiple:l.tr("You selected the following hosts:")},this.totalHosts=0,this.onHosts=0,this.offHosts=0,this.errorHosts=0,this.maxCPU=0,this.allocatedCPU=0,this.realCPU=0,this.maxMemory=0,this.allocatedMemory=0,this.realMemory=0,r.call(this)}function a(t){var e=t.HOST,a=d.html(e),n=u.html(e);this.totalHosts++;var s=p.simpleStateStr(e.STATE);switch(s){case"INIT":case"UPDATE":case"ON":this.onHosts++;break;case"ERROR":case"RETRY":this.errorHosts++;break;case"OFF":this.offHosts++}return this.maxCPU+=parseInt(e.HOST_SHARE.MAX_CPU),this.allocatedCPU+=parseInt(e.HOST_SHARE.CPU_USAGE),this.realCPU+=parseInt(e.HOST_SHARE.USED_CPU),this.maxMemory+=parseInt(e.HOST_SHARE.MAX_MEM),this.allocatedMemory+=parseInt(e.HOST_SHARE.MEM_USAGE),this.realMemory+=parseInt(e.HOST_SHARE.USED_MEM),['<input class="check_item" type="checkbox" id="'+h.toLowerCase()+"_"+e.ID+'" name="selected_items" value="'+e.ID+'"/>',e.ID,e.NAME,e.CLUSTER.length?e.CLUSTER:"-",e.HOST_SHARE.RUNNING_VMS,a.real,a.allocated,n.real,n.allocated,s,e.IM_MAD,e.VM_MAD,c.prettyTime(e.LAST_MON_TIME)]}function n(){this.totalHosts=0,this.onHosts=0,this.offHosts=0,this.errorHosts=0,this.maxCPU=0,this.allocatedCPU=0,this.realCPU=0,this.maxMemory=0,this.allocatedMemory=0,this.realMemory=0}function s(){$(".total_hosts").text(this.totalHosts),$(".on_hosts").text(this.onHosts),$(".off_hosts").text(this.offHosts),$(".error_hosts").text(this.errorHosts);var t=0;this.maxCPU>0?(t=Math.round(this.allocatedCPU/this.maxCPU*100),info_str=this.allocatedCPU+" / "+this.maxCPU):info_str="- / -",$("#dashboard_host_allocated_cpu").html(i("dashboard_host_allocated_cpu",l.tr("Allocated CPU"),"30px","14px",{percentage:t,str:info_str}));var e=0;this.maxCPU>0?(e=Math.round(this.realCPU/this.maxCPU*100),info_str=this.realCPU+" / "+this.maxCPU):info_str="- / -",$("#dashboard_host_real_cpu").html(i("dashboard_host_real_cpu",l.tr("Real CPU"),"30px","14px",{percentage:e,str:info_str}));var a=0;this.maxMemory>0?(a=Math.round(this.allocatedMemory/this.maxMemory*100),info_str=c.size(this.allocatedMemory)+" / "+c.size(this.maxMemory)):info_str=c.size(this.allocatedMemory)+" / -",$("#dashboard_host_allocated_mem").html(i("dashboard_host_allocated_mem",l.tr("Allocated Memory"),"30px","14px",{percentage:a,str:info_str}));var n=0;this.maxMemory>0?(n=Math.round(this.realMemory/this.maxMemory*100),info_str=c.size(this.realMemory)+" / "+c.size(this.maxMemory)):info_str=c.size(this.realMemory)+" / -",$("#dashboard_host_real_mem").html(i("dashboard_host_real_mem",l.tr("Real Memory"),"30px","14px",{percentage:n,str:info_str}))}function i(t,e,a,n,s){var i=s.percentage>100?100:s.percentage;return'<div class="row"><div class="large-12 columns text-center" style="margin-bottom: 5px"><h4 class="subheader"><small>'+e+'</small></h4></div></div><div class="row"><div class="large-12 columns text-center"><div class="progress large radius">  <span id="'+t+'_meter" class="meter" style="width: '+i+'%"></span></div></div></div><div class="row"><div class="large-12 columns text-center"><span id="'+t+'_percentage" class="left" style="font-size:'+n+';">'+s.percentage+' %</span><span id="'+t+'_str" class="right" style="color: #999; font-size: '+n+';">'+s.str+"</span></div></div>"}var r=t("utils/tab-datatable"),o=t("sunstone-config"),l=t("utils/locale"),c=t("utils/humanize"),d=t("./utils/cpu-bars"),u=t("./utils/memory-bars"),p=t("opennebula/host"),h="Host",f="HOST",m=t("./tabId");return e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype.elementArray=a,e.prototype.preUpdateView=n,e.prototype.postUpdateView=s,e}),define("tabs/vnets-tab/utils/common",["require"],function(){function t(t){var e=t.AR_POOL.AR;return e?e.constructor!=Array&&(e=[e]):e=[],e}return{getARList:t}}),define("tabs/vnets-tab/datatable",["require","utils/tab-datatable","sunstone-config","utils/locale","utils/progress-bar","./utils/common","./tabId"],function(t){function e(t,e){this.conf=e||{},this.tabId=p,this.dataTableId=t,this.resource=d,this.xmlRoot=u,this.dataTableOptions={bAutoWidth:!1,bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:["check"]},{sWidth:"35px",aTargets:[0]},{bVisible:!0,aTargets:r.tabTableColumns(p)},{bVisible:!1,aTargets:["_all"]}]},this.columns=[o.tr("ID"),o.tr("Owner"),o.tr("Group"),o.tr("Name"),o.tr("Reservation"),o.tr("Cluster"),o.tr("Bridge"),o.tr("Leases"),o.tr("VLAN ID")],this.selectOptions={id_index:1,name_index:4,uname_index:2,select_resource:o.tr("Please select a network from the list"),you_selected:o.tr("You selected the following network:"),select_resource_multiple:o.tr("Please select one or more networks from the list"),you_selected_multiple:o.tr("You selected the following networks:")},this.usedLeases=0,this.totalVNets=0,i.call(this)}function a(t){var e=t[u];this.usedLeases=this.usedLeases+parseInt(e.USED_LEASES),this.totalVNets++;var a=0,n=c.getARList(e);return $.each(n,function(){a+=parseInt(this.SIZE)}),['<input class="check_item" type="checkbox" id="'+d.toLowerCase()+"_"+e.ID+'" name="selected_items" value="'+e.ID+'"/>',e.ID,e.UNAME,e.GNAME,e.NAME,o.tr(e.PARENT_NETWORK_ID.length?"Yes":"No"),e.CLUSTER.length?e.CLUSTER:"-",e.BRIDGE,l.html(e.USED_LEASES,a),e.VLAN_ID.length?e.VLAN_ID:"-"]}function n(){this.totalVNets=0,this.usedLeases=0}function s(){$(".total_vnets").text(this.totalVNets),$(".addresses_vnets").text(this.usedLeases)}var i=t("utils/tab-datatable"),r=t("sunstone-config"),o=t("utils/locale"),l=t("utils/progress-bar"),c=t("./utils/common"),d="Network",u="VNET",p=t("./tabId");return e.prototype=Object.create(i.prototype),e.prototype.constructor=e,e.prototype.elementArray=a,e.prototype.preUpdateView=n,e.prototype.postUpdateView=s,e}),define("tabs/datastores-tab/utils/datastore-capacity-bar",["require","utils/progress-bar","utils/humanize"],function(t){var e=t("utils/progress-bar"),a=t("utils/humanize"),n=function(t){var n=parseInt(t.TOTAL_MB),s=n-parseInt(t.FREE_MB);if(n>0){var i=Math.round(s/n*100);info_str=a.sizeFromMB(s)+" / "+a.sizeFromMB(n)+" ("+i+"%)"}else info_str=1==t.TYPE?"- / -":a.size(s)+" / -";return e.html(s,n,info_str)};return{html:n}}),define("tabs/datastores-tab/tabId",["require"],function(){return"datastores-tab"}),define("tabs/datastores-tab/datatable",["require","utils/tab-datatable","sunstone-config","utils/locale","opennebula/datastore","./utils/datastore-capacity-bar","./tabId"],function(t){function e(t,e){this.conf=e||{},this.tabId=d,this.dataTableId=t,this.resource=l,this.xmlRoot=c,this.dataTableOptions={bAutoWidth:!1,bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:["check"]},{sWidth:"35px",aTargets:[0]},{sWidth:"250px",aTargets:[5]},{bVisible:!0,aTargets:s.tabTableColumns(d)},{bVisible:!1,aTargets:["_all"]}]},this.columns=[i.tr("ID"),i.tr("Owner"),i.tr("Group"),i.tr("Name"),i.tr("Capacity"),i.tr("Cluster"),i.tr("Basepath"),i.tr("TM MAD"),i.tr("DS MAD"),i.tr("Type"),i.tr("Status")],this.selectOptions={id_index:1,name_index:4,uname_index:2,select_resource:i.tr("Please select a datastore from the list"),you_selected:i.tr("You selected the following datastore:"),select_resource_multiple:i.tr("Please select one or more datastores from the list"),you_selected_multiple:i.tr("You selected the following datastores:")},n.call(this)}function a(t){var e=t.DATASTORE;return['<input class="check_item" type="checkbox" id="'+l.toLowerCase()+"_"+e.ID+'" name="selected_items" value="'+e.ID+'"/>',e.ID,e.UNAME,e.GNAME,e.NAME,o.html(e),e.CLUSTER.length?e.CLUSTER:"-",e.BASE_PATH,e.TM_MAD,e.DS_MAD,e.TEMPLATE.TYPE.toLowerCase().split("_")[0],i.tr(r.stateStr(e.STATE))]}var n=t("utils/tab-datatable"),s=t("sunstone-config"),i=t("utils/locale"),r=t("opennebula/datastore"),o=t("./utils/datastore-capacity-bar"),l="Datastore",c="DATASTORE",d=t("./tabId");return e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.elementArray=a,e}),define("tabs/vdcs-tab/utils/resources-zone",["require","hbs!./resources-zone/html","tabs/clusters-tab/datatable","tabs/hosts-tab/datatable","tabs/vnets-tab/datatable","tabs/datastores-tab/datatable","utils/tips","./common"],function(t){function e(t,e,a,n,s){this.unique_id=t,this.zone_id=e,this.resources=void 0,void 0!=s&&void 0!=s[e]&&(this.resources=s[e])}function a(){return this.zone_id}function n(){var t=this,e={};return $.each(["clusters","hosts","vnets","datastores"],function(a,n){void 0!=t.resources?(e[n]={info:!0,select:!0,selectOptions:{read_only:!0,zone_id:t.zone_id}},(1!=t.resources[n].length||t.resources[n][0]!=m)&&(e[n].selectOptions.fixed_ids=t.resources[n])):e[n]={info:!1,select:!0,selectOptions:{multiple_choice:!0,zone_id:t.zone_id}}}),t.clustersTable=new c("vdc_clusters_"+t.unique_id,e.clusters),t.hostsTable=new d("vdc_hosts_"+t.unique_id,e.hosts),t.vnetsTable=new u("vdc_vnets_"+t.unique_id,e.vnets),t.datastoresTable=new p("vdc_datastores_"+t.unique_id,e.datastores),l({unique_id:t.unique_id,clustersTableHTML:t.clustersTable.dataTableHTML,hostsTableHTML:t.hostsTable.dataTableHTML,vnetsTableHTML:t.vnetsTable.dataTableHTML,datastoresTableHTML:t.datastoresTable.dataTableHTML})}function s(){var t=this;$.each([t.clustersTable,t.hostsTable,t.vnetsTable,t.datastoresTable],function(){this.refreshResourceTableSelect()})}function i(t){var e=this;t.foundation(),$.each(["clusters","hosts","vnets","datastores"],function(a,n){void 0!=e.resources&&(1==e.resources[n].length&&e.resources[n][0]==m&&$("#all_"+n+"_"+e.unique_id,t).prop("checked","checked"),$("#all_"+n+"_"+e.unique_id,t).prop("disabled",!0)),$("input[name='all_"+n+"_"+e.unique_id+"']",t).change(function(){$(this).prop("checked")?$("div.vdc_"+n+"_select",t).hide():$("div.vdc_"+n+"_select",t).show()})}),$.each([e.clustersTable,e.hostsTable,e.vnetsTable,e.datastoresTable],function(){this.initialize()}),h.setup(t)}function r(t){var e,a,n,s;e=$("input[name='all_clusters_"+this.unique_id+"']",t).prop("checked")?[m]:this.clustersTable.retrieveResourceTableSelect(),a=$("input[name='all_hosts_"+this.unique_id+"']",t).prop("checked")?[m]:this.hostsTable.retrieveResourceTableSelect(),n=$("input[name='all_vnets_"+this.unique_id+"']",t).prop("checked")?[m]:this.vnetsTable.retrieveResourceTableSelect(),s=$("input[name='all_datastores_"+this.unique_id+"']",t).prop("checked")?[m]:this.datastoresTable.retrieveResourceTableSelect();var i={clusters:e,hosts:a,vnets:n,datastores:s};return i}function o(t,e){void 0==e[this.zone_id]&&(e[this.zone_id]={clusters:[],hosts:[],vnets:[],datastores:[]});var a=e[this.zone_id];1==a.clusters.length&&a.clusters[0]==m?$("#all_clusters_"+this.unique_id,t).click():this.clustersTable.selectResourceTableSelect({ids:a.clusters}),1==a.hosts.length&&a.hosts[0]==m?$("#all_hosts_"+this.unique_id,t).click():this.hostsTable.selectResourceTableSelect({ids:a.hosts}),1==a.vnets.length&&a.vnets[0]==m?$("#all_vnets_"+this.unique_id,t).click():this.vnetsTable.selectResourceTableSelect({ids:a.vnets}),1==a.datastores.length&&a.datastores[0]==m?$("#all_datastores_"+this.unique_id,t).click():this.datastoresTable.selectResourceTableSelect({ids:a.datastores})}var l=t("hbs!./resources-zone/html"),c=t("tabs/clusters-tab/datatable"),d=t("tabs/hosts-tab/datatable"),u=t("tabs/vnets-tab/datatable"),p=t("tabs/datastores-tab/datatable"),h=t("utils/tips"),f=t("./common"),m=f.VDC_ALL_RESOURCES;return e.prototype.constructor=e,e.prototype.html=n,e.prototype.setup=i,e.prototype.onShow=s,e.prototype.retrieve=r,e.prototype.fill=o,e.prototype.getZoneId=a,e}),define("tabs/vdcs-tab/utils/resources-tab",["require","hbs!./resources-tab/html","./resources-zone","./common"],function(t){function e(t){this.unique_id_prefix=t,this.zones=[]}function a(){return c({})}function n(t){$.each(this.zones,function(e,a){a.onShow(t)})}function s(t){var e=this;$("select.vdc_zones_select",t).change(function(){t.find(".vdc_zone_content").hide(),$("div#"+e.unique_id_prefix+"_"+$(this).val()+"Tab",t).show()}),$("select.vdc_zones_select",t)[0].selectedIndex=0,$("select.vdc_zones_select",t).change()}function i(t){var e=[],a=[],n=[],s=[];return $.each(this.zones,function(i,r){var o=r.retrieve(t),l=r.getZoneId();$.each(o.clusters,function(t,a){e.push({zone_id:l,cluster_id:a})}),$.each(o.hosts,function(t,e){a.push({zone_id:l,host_id:e})}),$.each(o.vnets,function(t,e){n.push({zone_id:l,vnet_id:e})}),$.each(o.datastores,function(t,e){s.push({zone_id:l,ds_id:e})})}),{clusters:e,hosts:a,vnets:n,datastores:s}}function r(t){var e={};return $.each(this.zones,function(a,n){e[n.getZoneId()]=n.retrieve(t)}),e}function o(t,e){$.each(this.zones,function(a,n){n.fill(t,e)})}function l(t,e,a,n){var s=this.unique_id_prefix+"_"+t,i=new d(s,t,e,a,n),r='<div id="'+s+'Tab" class="vdc_zone_content">'+i.html()+"</div>";$(r).appendTo($(".vdc_zones_tabs_content",a)),$("select.vdc_zones_select",a).append('<option value="'+t+'">'+e+"</option>");var o=$("#"+s+"Tab",a);i.setup(o),i.onShow(o),this.zones.push(i)}{var c=t("hbs!./resources-tab/html"),d=t("./resources-zone");t("./common")}return e.prototype.constructor=e,e.prototype.html=a,e.prototype.setup=s,e.prototype.onShow=n,e.prototype.retrieve=i,e.prototype.retrieveIndexed=r,e.prototype.fill=o,e.prototype.addResourcesZone=l,e}),define("tabs/vdcs-tab/panels/resources/panelId",["require"],function(){return"vdc_resources_tab"}),define("tabs/vdcs-tab/panels/resources",["require","utils/locale","../utils/common","../utils/resources-tab","opennebula/zone","../tabId","./resources/panelId"],function(t){function e(t){return this.title=s.tr("Resources"),this.icon="fa-th",this.element=t[c],this.resourcesTab=new r("vdc_info_panel"),this}function a(){return this.resourcesTab.html()}function n(t){var e=this,a=i.indexedVdcResources(this.element);$.each(a,function(n){e.resourcesTab.addResourcesZone(n,o.getName(n),t,a)}),e.resourcesTab.setup(t),e.resourcesTab.onShow(t)}var s=t("utils/locale"),i=t("../utils/common"),r=t("../utils/resources-tab"),o=t("opennebula/zone"),l=(t("../tabId"),t("./resources/panelId")),c="VDC";return e.PANEL_ID=l,e.prototype.html=a,e.prototype.setup=n,e}),define("hbs!utils/custom-tags-table/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<div class="row">\n  <div class="large-4 columns">\n    <input type="text" id="KEY" name="key" />\n  </div>\n  <div class="large-6 columns">\n    <input type="text" id="VALUE" name="value" />\n  </div>\n  <div class="large-2 columns">\n    <button type="button" class="button secondary small radius" id="add_custom">\n      '+i((e.tr||t&&t.tr||s).call(t,"Add",{name:"tr",hash:{},data:n}))+'\n    </button>\n  </div>\n</div>\n<div class="row">\n  <div class="large-12 columns">\n    <table id="custom_tags" class="dataTable policies_table">\n      <thead>\n        <tr>\n          <th>'+i((e.tr||t&&t.tr||s).call(t,"KEY",{name:"tr",hash:{},data:n}))+"</th>\n          <th>"+i((e.tr||t&&t.tr||s).call(t,"VALUE",{name:"tr",hash:{},data:n}))+'</th>\n          <th></th>\n        </tr>\n      </thead>\n      <tbody id="tbodyinput">\n        <tr>\n        </tr>\n        <tr>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>'},useData:!0});return e.registerPartial("utils/custom-tags-table/html",a),a}),define("utils/custom-tags-table",["require","utils/locale","hbs!./custom-tags-table/html","utils/template-utils"],function(t){function e(){return i()}function a(t){$("#add_custom",t).click(function(){var e=$("#custom_tags",t)[0],a=e.rows.length,n=e.insertRow(a),s=n.insertCell(0),i=document.createElement("input");i.id="KEY",i.type="text",i.value=$("input#KEY",t).val(),s.appendChild(i);var r=n.insertCell(1),o=document.createElement("input");o.id="VALUE",o.type="text",o.value=$("input#VALUE",t).val(),r.appendChild(o);var l=n.insertCell(2);l.innerHTML="<i class='fa fa-times-circle fa fa-lg remove-tab'></i>"}),t.on("click","i.remove-tab",function(){$(this).closest("tr").remove()})}function n(t){var e={};return $("#custom_tags tr",t).each(function(){$("#KEY",$(this)).val()&&(e[$("#KEY",$(this)).val()]=$("#VALUE",$(this)).val())}),e}function s(t,e){$.each(e,function(e,a){var n=$("#custom_tags",t)[0],s=n.rows.length,i=n.insertRow(s),o=i.insertCell(0),l=document.createElement("input");l.id="KEY",l.type="text",l.value=r.htmlDecode(e),o.appendChild(l);var c=i.insertCell(1),d=document.createElement("input");d.id="VALUE",d.type="text",d.value=r.htmlDecode(a),c.appendChild(d);var u=i.insertCell(2);u.innerHTML="<i class='fa fa-times-circle fa fa-lg remove-tab'></i>"})}var i=(t("utils/locale"),t("hbs!./custom-tags-table/html")),r=t("utils/template-utils");return{html:e,setup:a,retrieve:n,fill:s}}),define("utils/wizard-fields",["require","utils/template-utils"],function(t){function e(t){var e={},a=$("[wizard_field]",t);return a.each(function(){var t=$(this);if(1!=t.prop("wizard_field_disabled")&&null!=t.val()&&t.val().length&&("checkbox"!=t.attr("type")||t.prop("checked"))&&("radio"!=t.attr("type")||t.prop("checked"))){var a=t.attr("wizard_field");e[a]=t.val()}}),e}function a(t,e){var a=$("[wizard_field]",t);a.each(function(){var t=$(this),a=t.attr("wizard_field");if(e[a]){switch(t.attr("type")){case"radio":var s=t.val()==e[a];t.prop("checked",s),s&&t.change();break;case"checkbox":var s=t.val().toUpperCase()==e[a].toUpperCase();t.prop("checked",s),s&&t.change();break;default:t.val(n.escapeDoubleQuotes(n.htmlDecode(e[a]))),t.change()}delete e[a]}})}var n=t("utils/template-utils");return{retrieve:e,fill:a}}),define("hbs!tabs/vdcs-tab/form-panels/create/wizard",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<form data-abide="ajax" id="'+l((i=null!=(i=e.formPanelId||(null!=t?t.formPanelId:t))?i:o,typeof i===r?i.call(t,{name:"formPanelId",hash:{},data:n}):i))+'Wizard" class="custom creation">\n  <div>\n    <dl id="vdc_create_tabs" class="tabs right-info-tabs text-center" data-tab>\n      <dd class="active"><a href="#vdcCreateGeneralTab"><i class="fa fa-th"></i><br>'+l((e.tr||t&&t.tr||o).call(t,"General",{name:"tr",hash:{},data:n}))+'</a></dd>\n      <dd><a href="#vdcCreateGroupsTab"><i class="fa fa-users"></i><br>'+l((e.tr||t&&t.tr||o).call(t,"Groups",{name:"tr",hash:{},data:n}))+'</a></dd>\n      <dd><a href="#vdcCreateResourcesTab"><i class="fa fa-hdd-o"></i><br>'+l((e.tr||t&&t.tr||o).call(t,"Resources",{name:"tr",hash:{},data:n}))+'</a></dd>\n    </dl>\n    <div id="vdc_create_tabs_content" class="tabs-content">\n      <div class="content active" id="vdcCreateGeneralTab">\n        <div class="row">\n          <div class="large-6 columns">\n            <label for="name" >'+l((e.tr||t&&t.tr||o).call(t,"Name",{name:"tr",hash:{},data:n}))+':\n              <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Name that the VDC will get for description purposes.",{name:"tr",hash:{},data:n}))+'</span>\n            </label>\n            <input type="text" wizard_field="NAME" required name="name" id="name"/>\n          </div>\n        </div>\n        <div class="row">\n          <div class="large-6 columns">\n            <label for="DESCRIPTION" >'+l((e.tr||t&&t.tr||o).call(t,"Description",{name:"tr",hash:{},data:n}))+':\n              <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Description of the VDC",{name:"tr",hash:{},data:n}))+'</span>\n            </label>\n            <textarea type="text" wizard_field="DESCRIPTION" id="DESCRIPTION" name="DESCRIPTION"/>\n          </div>\n        </div>\n        <br>\n        <div class="row">\n          <div class="large-12 columns">\n            <span>'+l((e.tr||t&&t.tr||o).call(t,"Custom attributes",{name:"tr",hash:{},data:n}))+"</span>\n            <br>\n            <br>\n          </div>\n        </div>\n        ";
return i=null!=(i=e.customTagsHTML||(null!=t?t.customTagsHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"customTagsHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+='\n      </div>\n      <div id="vdcCreateGroupsTab" class="content">\n        ',i=null!=(i=e.groupsTableHTML||(null!=t?t.groupsTableHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"groupsTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+='\n      </div>\n      <div id="vdcCreateResourcesTab" class="content">\n        ',i=null!=(i=e.resourcesTabHTML||(null!=t?t.resourcesTabHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"resourcesTabHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+"\n      </div>\n    </div>\n  </div>\n</form>"},useData:!0});return e.registerPartial("tabs/vdcs-tab/form-panels/create/wizard",a),a}),define("hbs!tabs/vdcs-tab/form-panels/create/advanced",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<form data-abide="ajax" id="'+o((s=null!=(s=e.formPanelId||(null!=t?t.formPanelId:t))?s:r,typeof s===i?s.call(t,{name:"formPanelId",hash:{},data:n}):s))+'Advanced" class="custom creation">\n  <div class="row">\n    <div class="large-12 columns">\n      <p>'+o((e.tr||t&&t.tr||r).call(t,"Write the VDC template here",{name:"tr",hash:{},data:n}))+'</p>\n    </div>\n  </div>\n  <div class="row">\n    <div class="large-12 columns">\n      <textarea id="template" rows="15" required></textarea>\n    </div>\n  </div>\n</form>'},useData:!0});return e.registerPartial("tabs/vdcs-tab/form-panels/create/advanced",a),a}),define("tabs/vdcs-tab/form-panels/create",["require","foundation.tab","utils/form-panels/form-panel","sunstone","utils/locale","utils/tips","utils/custom-tags-table","utils/wizard-fields","tabs/groups-tab/datatable","opennebula/zone","../utils/common","utils/notifier","../utils/resources-tab","utils/template-utils","hbs!./create/wizard","hbs!./create/advanced","./create/formPanelId","../tabId"],function(t){function e(){this.formPanelId=E,this.tabId=S,this.actions={create:{title:u.tr("Create Virtual Data Center"),buttonText:u.tr("Create"),resetButton:!0},update:{title:u.tr("Update Virtual Data Center"),buttonText:u.tr("Update"),resetButton:!1}},c.call(this)}function a(){var t={info:!1,select:!0,selectOptions:{multiple_choice:!0}};return this.groupsTable=new m("vdc_wizard_groups",t),this.resourcesTab=new g("create"==this.action?"vdc_create_wizard":"vdc_update_wizard"),w({formPanelId:this.formPanelId,customTagsHTML:h.html(),groupsTableHTML:this.groupsTable.dataTableHTML,resourcesTabHTML:this.resourcesTab.html()})}function n(){return T({formPanelId:this.formPanelId})}function s(t){var e=this;if(h.setup($("#vdcCreateGeneralTab",t)),this.groupsTable.initialize(),"create"==this.action){var a=[];_.list({timeout:!0,success:function(n,s){var i=$("#vdcCreateResourcesTab",t);$.each(s,function(){a.push(this.ZONE.ID),e.resourcesTab.addResourcesZone(this.ZONE.ID,this.ZONE.NAME,i)}),e.resourcesTab.setup(i),e.zone_ids=a},error:v.onError})}t.foundation(),p.setup()}function i(t){var e=this,a={};$.extend(a,f.retrieve($("#vdcCreateGeneralTab",t))),$.extend(a,h.retrieve($("#vdcCreateGeneralTab",t)));var n=this.groupsTable.retrieveResourceTableSelect();if("create"==this.action){var s=this.resourcesTab.retrieve(t);return a={vdc:a,group_ids:n,clusters:s.clusters,hosts:s.hosts,vnets:s.vnets,datastores:s.datastores},d.runAction("Vdc.create",a),!1}if("update"==this.action){var i=this.groupsTable.retrieveResourceTableSelect();$.each(i,function(t,a){-1==e.original_groups_list.indexOf(a)&&d.runAction("Vdc.add_group",e.resourceId,{group_id:a})}),$.each(e.original_groups_list,function(t,a){-1==i.indexOf(a)&&d.runAction("Vdc.del_group",e.resourceId,{group_id:a})});var r=e.resourcesTab.retrieveIndexed(t);for(var o in r){var l=e.originalSelectedResources[o];$.each(r[o].clusters,function(t,a){-1==l.clusters.indexOf(a)&&d.runAction("Vdc.add_cluster",e.resourceId,{zone_id:o,cluster_id:a})}),$.each(r[o].hosts,function(t,a){-1==l.hosts.indexOf(a)&&d.runAction("Vdc.add_host",e.resourceId,{zone_id:o,host_id:a})}),$.each(r[o].vnets,function(t,a){-1==l.vnets.indexOf(a)&&d.runAction("Vdc.add_vnet",e.resourceId,{zone_id:o,vnet_id:a})}),$.each(r[o].datastores,function(t,a){-1==l.datastores.indexOf(a)&&d.runAction("Vdc.add_datastore",e.resourceId,{zone_id:o,ds_id:a})})}for(var o in e.originalSelectedResources){var c=r[o];$.each(e.originalSelectedResources[o].clusters,function(t,a){-1==c.clusters.indexOf(a)&&d.runAction("Vdc.del_cluster",e.resourceId,{zone_id:o,cluster_id:a})}),$.each(e.originalSelectedResources[o].hosts,function(t,a){-1==c.hosts.indexOf(a)&&d.runAction("Vdc.del_host",e.resourceId,{zone_id:o,host_id:a})}),$.each(e.originalSelectedResources[o].vnets,function(t,a){-1==c.vnets.indexOf(a)&&d.runAction("Vdc.del_vnet",e.resourceId,{zone_id:o,vnet_id:a})}),$.each(e.originalSelectedResources[o].datastores,function(t,a){-1==c.datastores.indexOf(a)&&d.runAction("Vdc.del_datastore",e.resourceId,{zone_id:o,ds_id:a})})}return d.runAction("Vdc.update",e.resourceId,y.templateToString(a)),!1}}function r(t){if("create"==this.action){var e=$("textarea#template",t).val(),a={vdc:{vdc_raw:e}};return d.runAction("Vdc.create",a),!1}if("update"==this.action){var n=$("textarea#template",t).val();return d.runAction("Vdc.update",this.resourceId,n),!1}}function o(t){this.groupsTable.refreshResourceTableSelect(),this.resourcesTab.onShow(t)}function l(t,e){var a=this;this.resourceId=e.ID,$("#template",t).val(y.templateToString(e.TEMPLATE).replace(/^[\r\n]+$/g,"")),$('[wizard_field="NAME"]',t).val(y.escapeDoubleQuotes(y.htmlDecode(e.NAME))).prop("disabled",!0).prop("wizard_field_disabled",!0),f.fill($("#vdcCreateGeneralTab",t),e.TEMPLATE);var n=$("[wizard_field]",t);n.each(function(){var t=$(this),a=t.attr("wizard_field");delete e.TEMPLATE[a]}),h.fill($("#vdcCreateGeneralTab",t),e.TEMPLATE);var s=e.GROUPS.ID;"string"==typeof s&&(s=[s]),this.original_groups_list=[],s&&(this.original_groups_list=s,this.groupsTable.selectResourceTableSelect({ids:s})),this.originalSelectedResources=b.indexedVdcResources(e);var i=[];_.list({timeout:!0,success:function(e,n){var s=$("#vdcCreateResourcesTab",t);$.each(n,function(){i.push(this.ZONE.ID),a.resourcesTab.addResourcesZone(this.ZONE.ID,this.ZONE.NAME,s)}),a.resourcesTab.setup(s),a.resourcesTab.fill(s,a.originalSelectedResources),a.zone_ids=i},error:v.onError})}t("foundation.tab");var c=t("utils/form-panels/form-panel"),d=t("sunstone"),u=t("utils/locale"),p=t("utils/tips"),h=t("utils/custom-tags-table"),f=t("utils/wizard-fields"),m=t("tabs/groups-tab/datatable"),_=t("opennebula/zone"),b=t("../utils/common"),v=t("utils/notifier"),g=t("../utils/resources-tab"),y=t("utils/template-utils"),w=t("hbs!./create/wizard"),T=t("hbs!./create/advanced"),E=t("./create/formPanelId"),S=t("../tabId");return e.FORM_PANEL_ID=E,e.prototype=Object.create(c.prototype),e.prototype.constructor=e,e.prototype.htmlWizard=a,e.prototype.htmlAdvanced=n,e.prototype.submitWizard=i,e.prototype.submitAdvanced=r,e.prototype.onShow=o,e.prototype.fill=l,e.prototype.setup=s,e}),define("tabs/vdcs-tab",["require","utils/locale","./vdcs-tab/buttons","./vdcs-tab/actions","./vdcs-tab/datatable","./vdcs-tab/tabId","./vdcs-tab/panels/info","./vdcs-tab/panels/groups","./vdcs-tab/panels/resources","./vdcs-tab/form-panels/create"],function(t){var e=t("utils/locale"),a=t("./vdcs-tab/buttons"),n=t("./vdcs-tab/actions"),s=t("./vdcs-tab/datatable"),i=t("./vdcs-tab/tabId"),r="dataTableVDCs",o=[],l=[t("./vdcs-tab/panels/info"),t("./vdcs-tab/panels/groups"),t("./vdcs-tab/panels/resources")],c=[t("./vdcs-tab/form-panels/create")],d={tabId:i,title:e.tr("VDCs"),tabClass:"subTab",parentTab:"system-tab",listHeader:'<i class="fa fa-fw fa-th"></i>&emsp;'+e.tr("Virtual Data Centers"),infoHeader:'<i class="fa fa-fw fa-th"></i>&emsp;'+e.tr("Virtual Data Center"),subheader:'<span>        <span class="total_vdcs"/> <small>'+e.tr("TOTAL")+"</small>      </span>",resource:"Vdc",buttons:a,actions:n,dataTable:new s(r,{actions:!0,info:!0}),panels:l,formPanels:c,dialogs:o};return d}),define("tabs/acls-tab/buttons",["require","utils/locale"],function(t){var e=t("utils/locale"),a={"Acl.refresh":{type:"action",layout:"refresh",alwaysActive:!0},"Acl.create_dialog":{type:"create_dialog",layout:"create"},"Acl.delete":{type:"confirm",text:e.tr("Delete"),layout:"del"}};return a}),define("tabs/acls-tab/datatable",["require","utils/tab-datatable","sunstone-config","utils/locale","opennebula/user","opennebula/group","opennebula/zone","./tabId"],function(t){function e(t,e){this.conf=e||{},this.tabId=m,this.dataTableId=t,this.resource=h,this.xmlRoot=f,this.dataTableOptions={bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:["check",2,3,4,5,6,7]},{sWidth:"35px",aTargets:[0]},{bVisible:!0,aTargets:l.tabTableColumns(m)},{bVisible:!1,aTargets:["_all"]}]},this.columns=[c.tr("ID"),c.tr("Applies to"),c.tr("Affected resources"),c.tr("Resource ID / Owned by"),c.tr("Allowed operations"),c.tr("Zone"),c.tr("ACL String")],this.selectOptions={id_index:1,name_index:1,select_resource:c.tr("Please select an ACL rule from the list"),you_selected:c.tr("You selected the following ACL rule:"),select_resource_multiple:c.tr("Please select one or more ACL rules from the list"),you_selected_multiple:c.tr("You selected the following ACL rules:")},o.call(this)}function a(t){var e=t[f],a=e.STRING,s=n(a);return['<input class="check_item" type="checkbox" id="'+h.toLowerCase()+"_"+e.ID+'" name="selected_items" value="'+e.ID+'"/>',e.ID,s[0],s[1],s[2],s[3],c.tr(s[4].charAt(0).toUpperCase()+s[4].substring(1)),e.STRING]}function n(t){var e=t.split(" "),a=e[0],n=e[1],o=e[2],l=e[3],d=s(a),u="",p=n.split("/"),h=i(p[1]);p=p[0].split("+");for(var f=0;f<p.length;f++)switch(p[f]){case"HOST":u+=c.tr("Hosts")+", ";break;case"VM":u+=c.tr("Virtual Machines")+", ";break;case"NET":u+=c.tr("Virtual Networks")+", ";break;case"IMAGE":u+=c.tr("Images")+", ";break;case"TEMPLATE":u+=c.tr("VM Templates")+", ";break;case"USER":u+=c.tr("Users")+", ";break;case"GROUP":u+=c.tr("Groups")+", ";break;case"CLUSTER":u+=c.tr("Clusters")+", ";break;case"DATASTORE":u+=c.tr("Datastores")+", ";break;case"DOCUMENT":u+=c.tr("Documents")+", ";break;case"ZONE":u+=c.tr("Zones")+", ";break;case"SECGROUP":u+=c.tr("Security Groups")+", ";break;case"VDC":u+=c.tr("VDCs")+", "}u=u.substring(0,u.length-2);for(var m="",_=o.split("+"),f=0;f<_.length;f++)m+=_[f].toLowerCase()+", ";m=m.substring(0,m.length-2);var b=r(l);return[d,u,h,m,b]}function s(t){var e="";return"*"==t[0]?e=c.tr("All"):"#"==t[0]?(e=c.tr("User")+" ",e+=d.getName(t.substring(1))):"@"==t[0]&&(e=c.tr("Group "),e+=u.getName(t.substring(1))),e}function i(t){var e="";return"*"==t[0]?e=c.tr("All"):"#"==t[0]?(e=c.tr("ID")+" ",e+=t.substring(1)):"@"==t[0]?(e=c.tr("Group")+" ",e+=u.getName(t.substring(1))):"%"==t[0]&&(e=c.tr("Cluster ID")+" ",e+=t.substring(1)),e}function r(t){var e="";return"*"==t[0]?e=c.tr("All"):"#"==t[0]&&(e=p.getName(t.substring(1))),e}var o=t("utils/tab-datatable"),l=t("sunstone-config"),c=t("utils/locale"),d=t("opennebula/user"),u=t("opennebula/group"),p=t("opennebula/zone"),h="Acl",f="ACL",m=t("./tabId");return e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.elementArray=a,e}),define("tabs/acls-tab/actions",["require","sunstone","utils/notifier","utils/locale","./datatable","opennebula/acl","./tabId","./form-panels/create/formPanelId"],function(t){var e=t("sunstone"),a=t("utils/notifier"),n=(t("utils/locale"),t("./datatable"),t("opennebula/acl")),s="Acl",i=t("./tabId"),r=t("./form-panels/create/formPanelId"),o={"Acl.create":{type:"create",call:n.create,callback:function(t,a){e.resetFormPanel(i,r),e.hideFormPanel(i),e.getDataTable(i).addElement(t,a)},error:function(t,n){e.hideFormPanelLoading(i),a.onError(t,n)},notify:!0},"Acl.create_dialog":{type:"custom",call:function(){e.showFormPanel(i,r,"create")}},"Acl.list":{type:"list",call:n.list,callback:function(t,a){e.getDataTable(i).updateView(t,a)},error:a.onError},"Acl.refresh":{type:"custom",call:function(){var t=$("#"+i);e.rightInfoVisible(t)?e.runAction(s+".show",e.rightInfoResourceId(t)):(e.getDataTable(i).waitingNodes(),e.runAction(s+".list",{force:!0}))},error:a.onError},"Acl.delete":{type:"multiple",call:n.del,callback:function(t,a){e.getDataTable(i).deleteElement(t,a)},elements:function(){return e.getDataTable(i).elements()},error:a.onError}};return o}),define("tabs/acls-tab",["require","utils/locale","./acls-tab/buttons","./acls-tab/actions","./acls-tab/datatable","./acls-tab/tabId","./acls-tab/form-panels/create"],function(t){var e=t("utils/locale"),a=t("./acls-tab/buttons"),n=t("./acls-tab/actions"),s=t("./acls-tab/datatable"),i=t("./acls-tab/tabId"),r="dataTableAcls",o=[],l=[],c=[t("./acls-tab/form-panels/create")],d={tabId:i,title:e.tr("ACLs"),tabClass:"subTab",parentTab:"system-tab",listHeader:'<i class="fa fa-key"></i>&emsp;'+e.tr("Access Control Lists"),subheader:"<span/><small></small>&emsp;",resource:"Acl",buttons:a,actions:n,dataTable:new s(r,{actions:!0,info:!1}),panels:l,formPanels:c,dialogs:o};return d}),define("tabs/vresources-tab",["require","utils/locale"],function(t){var e=t("utils/locale"),a="vresources-tab",n={tabId:a,title:'<i class="fa fa-lg fa-fw fa-cloud"></i>&emsp;'+e.tr("Virtual Resources"),no_content:!0};return n}),define("tabs/vms-tab/buttons",["require","utils/locale"],function(t){var e=t("utils/locale"),a={"VM.refresh":{type:"action",layout:"refresh",alwaysActive:!0},"VM.create_dialog":{type:"action",layout:"create",alwaysActive:!0},"VM.chown":{type:"confirm_with_select",text:e.tr("Change owner"),select:"User",layout:"user_select",tip:e.tr("Select the new owner")+":"},"VM.chgrp":{type:"confirm_with_select",text:e.tr("Change group"),select:"Group",layout:"user_select",tip:e.tr("Select the new group")+":"},"VM.deploy":{type:"action",text:e.tr("Deploy"),tip:e.tr("This will deploy the selected VMs on the chosen host"),layout:"vmsplanification_buttons",custom_classes:"state-dependent"},"VM.migrate":{type:"action",text:e.tr("Migrate"),tip:e.tr("This will migrate the selected VMs to the chosen host"),layout:"vmsplanification_buttons",custom_classes:"state-dependent"},"VM.migrate_live":{type:"action",text:e.tr("Migrate")+' <span class="label secondary radius">live</span>',tip:e.tr("This will live-migrate the selected VMs to the chosen host"),layout:"vmsplanification_buttons",custom_classes:"state-dependent"},"VM.hold":{type:"action",text:e.tr("Hold"),tip:e.tr("This will hold selected pending VMs from being deployed"),layout:"vmsplanification_buttons",custom_classes:"state-dependent"},"VM.release":{type:"action",text:e.tr("Release"),layout:"vmsplanification_buttons",tip:e.tr("This will release held machines"),custom_classes:"state-dependent"},"VM.suspend":{type:"action",text:e.tr("Suspend"),layout:"vmspause_buttons",tip:e.tr("This will suspend selected machines"),custom_classes:"state-dependent"},"VM.resume":{type:"action",text:'<i class="fa fa-play"/>',layout:"vmsplay_buttons",tip:e.tr("This will resume selected VMs"),custom_classes:"state-dependent"},"VM.stop":{type:"action",text:e.tr("Stop"),layout:"vmsstop_buttons",tip:e.tr("This will stop selected VMs"),custom_classes:"state-dependent"},"VM.reboot":{type:"action",text:e.tr("Reboot"),layout:"vmsrepeat_buttons",tip:e.tr("This will send a reboot action to running VMs"),custom_classes:"state-dependent"},"VM.reboot_hard":{type:"action",text:e.tr("Reboot")+' <span class="label secondary radius">hard</span>',layout:"vmsrepeat_buttons",tip:e.tr("This will perform a hard reboot on selected VMs"),custom_classes:"state-dependent"},"VM.poweroff":{type:"action",text:e.tr("Power Off"),layout:"vmspause_buttons",tip:e.tr("This will send a power off signal to running VMs. They can be resumed later."),custom_classes:"state-dependent"},"VM.poweroff_hard":{type:"action",text:e.tr("Power Off")+' <span class="label secondary radius">hard</span>',layout:"vmspause_buttons",tip:e.tr("This will send a forced power off signal to running VMs. They can be resumed later."),custom_classes:"state-dependent"},"VM.undeploy":{type:"action",text:e.tr("Undeploy"),layout:"vmsstop_buttons",tip:e.tr("Shuts down the given VM. The VM is saved in the system Datastore."),custom_classes:"state-dependent"},"VM.undeploy_hard":{type:"action",text:e.tr("Undeploy")+' <span class="label secondary radius">hard</span>',layout:"vmsstop_buttons",tip:e.tr("Shuts down the given VM. The VM is saved in the system Datastore."),custom_classes:"state-dependent"},"VM.shutdown":{type:"confirm",text:e.tr("Shutdown"),layout:"vmsdelete_buttons",tip:e.tr("This will initiate the shutdown process in the selected VMs"),custom_classes:"state-dependent"},"VM.shutdown_hard":{type:"confirm",text:e.tr("Shutdown")+' <span class="label secondary radius">hard</span>',layout:"vmsdelete_buttons",tip:e.tr("This will initiate the shutdown-hard (forced) process in the selected VMs"),custom_classes:"state-dependent"},"VM.delete":{type:"confirm",text:e.tr("Delete"),layout:"vmsdelete_buttons",tip:e.tr("This will delete the selected VMs from the database"),custom_classes:"state-dependent"},"VM.delete_recreate":{type:"confirm",text:e.tr("Delete")+' <span class="label secondary radius">recreate</span>',layout:"vmsrepeat_buttons",tip:e.tr("This will delete and recreate VMs to PENDING state"),custom_classes:"state-dependent"},"VM.resched":{type:"action",text:e.tr("Reschedule"),layout:"vmsplanification_buttons",tip:e.tr("This will reschedule selected VMs"),custom_classes:"state-dependent"},"VM.unresched":{type:"action",text:e.tr("Un-Reschedule"),layout:"vmsplanification_buttons",tip:e.tr("This will cancel the rescheduling for the selected VMs"),custom_classes:"state-dependent"},"VM.recover":{type:"confirm_with_select",text:e.tr("Recover"),layout:"vmsplanification_buttons",custom_select:'<select class="resource_list_select">                    <option value="2">'+e.tr("retry")+'</option>                    <option value="1">'+e.tr("success")+'</option>                    <option value="0">'+e.tr("failure")+"</option>                    </select>",tip:e.tr("Recovers a stuck VM that is waiting for a driver operation.                     The recovery may be done by failing, succeeding or retrying the current operation.                     YOU NEED TO MANUALLY CHECK THE VM STATUS ON THE HOST, to decide if the operation                     was successful or not, or if it can be retried."),custom_classes:"state-dependent"},"VM.startvnc":{type:"action",text:'<i class="fa fa-desktop" style="color: rgb(111, 111, 111)"/> '+e.tr("VNC"),custom_classes:"only-right-info vnc-right-info",tip:e.tr("VNC")},"VM.startspice":{type:"action",text:'<i class="fa fa-desktop" style="color: rgb(111, 111, 111)"/> '+e.tr("SPICE"),custom_classes:"only-right-info spice-right-info",tip:e.tr("SPICE")}};return a}),define("utils/common-actions",["require","sunstone","utils/notifier","utils/locale"],function(t){function e(t,e,a){this.openNebulaResource=t,this.tabId=a,this.resourceStr=e}function a(){var t=this;return{type:"list",call:t.openNebulaResource.list,callback:function(e,a){l.getDataTable(t.tabId).updateView(e,a)},error:c.onError}}function n(){var t=this;return{type:"single",call:t.openNebulaResource.show,callback:function(e,a){l.getDataTable(t.tabId).updateElement(e,a),l.rightInfoVisible($("#"+t.tabId))&&l.insertPanels(t.tabId,a)},error:c.onError}}function s(){var t=this;return{type:"custom",call:function(){var e=$("#"+t.tabId);l.rightInfoVisible(e)?l.runAction(t.resourceStr+".show",l.rightInfoResourceId(e)):(l.getDataTable(t.tabId).waitingNodes(),l.runAction(t.resourceStr+".list",{force:!0}))},error:c.onError}}function i(){var t=this;return{type:"multiple",call:t.openNebulaResource.del,callback:function(e,a){l.getDataTable(t.tabId).deleteElement(e,a)},elements:function(){return l.getDataTable(t.tabId).elements()},error:c.onError,notify:!0}}function r(t){var e=this;return{type:"multiple",call:e.openNebulaResource[t],callback:function(t){l.runAction(e.resourceStr+".show",t.request.data[0])},elements:function(){return l.getDataTable(e.tabId).elements()},error:c.onError,notify:!0}}function o(t){var e=this;return{type:"single",call:e.openNebulaResource[t],callback:function(t){l.runAction(e.resourceStr+".show",t.request.data[0][0])},elements:function(){return l.getDataTable(e.tabId).elements()},error:c.onError,notify:!0}}{var l=t("sunstone"),c=t("utils/notifier");t("utils/locale")}return e.prototype.list=a,e.prototype.show=n,e.prototype.refresh=s,e.prototype["delete"]=i,e.prototype.multipleAction=r,e.prototype.singleAction=o,e});var Util={},addFunc=function(t,e,a){t.prototype[e]||Object.defineProperty(t.prototype,e,{enumerable:!1,value:a})};addFunc(Array,"push8",function(t){"use strict";this.push(255&t)}),addFunc(Array,"push16",function(t){"use strict";this.push(t>>8&255,255&t)}),addFunc(Array,"push32",function(t){"use strict";this.push(t>>24&255,t>>16&255,t>>8&255,255&t)}),addFunc(Array,"map",function(t){"use strict";var e=this.length;if("function"!=typeof t)throw new TypeError;for(var a=new Array(e),n=arguments[1],s=0;e>s;s++)s in this&&(a[s]=t.call(n,this[s],s,this));return a}),addFunc(Array,"indexOf",function(t){"use strict";var e=this.length>>>0,a=Number(arguments[1])||0;for(a=0>a?Math.ceil(a):Math.floor(a),0>a&&(a+=e);e>a;a++)if(a in this&&this[a]===t)return a;return-1}),Object.keys||(Object.keys=function(){"use strict";var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],n=a.length;return function(s){if("object"!=typeof s&&("function"!=typeof s||null===s))throw new TypeError("Object.keys called on non-object");var i,r,o=[];for(i in s)t.call(s,i)&&o.push(i);if(e)for(r=0;n>r;r++)t.call(s,a[r])&&o.push(a[r]);return o}}()),addFunc(Function,"bind",function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),a=this,n=function(){},s=function(){return a.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,s.prototype=new n,s}),window.requestAnimFrame=function(){"use strict";return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),Util._log_level="warn",Util.init_logging=function(t){"use strict";switch("undefined"==typeof t?t=Util._log_level:Util._log_level=t,"undefined"==typeof window.console&&(window.console="undefined"!=typeof window.opera?{log:window.opera.postError,warn:window.opera.postError,error:window.opera.postError}:{log:function(){},warn:function(){},error:function(){}}),Util.Debug=Util.Info=Util.Warn=Util.Error=function(){},t){case"debug":Util.Debug=function(t){console.log(t)};case"info":Util.Info=function(t){console.log(t)};case"warn":Util.Warn=function(t){console.warn(t)};case"error":Util.Error=function(t){console.error(t)};case"none":break;default:throw new Error("invalid logging type '"+t+"'")}},Util.get_logging=function(){return Util._log_level},Util.init_logging(),Util.make_property=function(t,e,a,n){"use strict";var s;s="arr"===n?function(t){return"undefined"!=typeof t?this["_"+e][t]:this["_"+e]}:function(){return this["_"+e]};var i,r=function(t){return t?function(a,n){"undefined"!=typeof n?this["_"+e][n]=t(a):this["_"+e]=t(a)}:function(t,a){"undefined"!=typeof a?this["_"+e][a]=t:this["_"+e]=t}};if("bool"===n)i=r(function(t){return!t||t in{0:1,no:1,"false":1}?!1:!0});else if("int"===n)i=r(function(t){return parseInt(t,10)});else if("float"===n)i=r(parseFloat);else if("str"===n)i=r(String);else if("func"===n)i=r(function(t){return t?t:function(){}});else{if("arr"!==n&&"dom"!==n&&"raw"!=n)throw new Error("Unknown property type "+n);i=r()}"undefined"==typeof t["get_"+e]&&(t["get_"+e]=s),"undefined"==typeof t["set_"+e]&&("rw"===a?t["set_"+e]=i:"wo"===a&&(t["set_"+e]=function(t,a){if("undefined"!=typeof this["_"+e])throw new Error(e+" can only be set once");i.call(this,t,a)})),t["_raw_set_"+e]=function(t,e){i.call(this,t,e)}},Util.make_properties=function(t,e){"use strict";for(var a=0;a<e.length;a++)Util.make_property(t.prototype,e[a][0],e[a][1],e[a][2])},Util.set_defaults=function(t,e,a){var n,s=Object.keys(a),i=Object.keys(e),r={};for(n=0;n<s.length;n++)r[s[n]]=1;for(n=0;n<i.length;n++)r[i[n]]=1;var o=Object.keys(r);for(n=0;n<o.length;n++){var l=t["_raw_set_"+o[n]];l?o[n]in e?l.call(t,e[o[n]]):l.call(t,a[o[n]]):Util.Warn("Invalid property "+o[n])}},Util.decodeUTF8=function(t){"use strict";return decodeURIComponent(escape(t))},Util.get_include_uri=function(){return"undefined"!=typeof INCLUDE_URI?INCLUDE_URI:"include/"},Util._loading_scripts=[],Util._pending_scripts=[],Util.load_scripts=function(t){"use strict";for(var e,a=document.getElementsByTagName("head")[0],n=Util._loading_scripts,s=Util._pending_scripts,i=function(){for(;n.length>0&&("loaded"===n[0].readyState||"complete"===n[0].readyState);){var t=n.shift();a.appendChild(t)}(!this.readyState||Util.Engine.presto&&"loaded"===this.readyState||"complete"===this.readyState)&&s.indexOf(this)>=0&&(this.onload=this.onreadystatechange=null,s.splice(s.indexOf(this),1),0===s.length&&window.onscriptsload&&window.onscriptsload())},r=0;r<t.length;r++)e=document.createElement("script"),e.type="text/javascript",e.src=Util.get_include_uri()+t[r],e.onload=e.onreadystatechange=i,Util.Engine.trident?n.push(e):(e.async=!1,a.appendChild(e)),s.push(e)},Util.getPosition=function(){"use strict";function t(t,e){var a;return t.currentStyle?a=t.currentStyle[e]:window.getComputedStyle&&(a=window.getComputedStyle(t,null)[e]),a}function e(){var t=0,e=0,a=document.getElementsByTagName("html")[0];return t=a.scrollTop&&document.documentElement.scrollTop?a.scrollTop:a.scrollTop||document.documentElement.scrollTop?a.scrollTop+document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0,e=a.scrollLeft&&document.documentElement.scrollLeft?a.scrollLeft:a.scrollLeft||document.documentElement.scrollLeft?a.scrollLeft+document.documentElement.scrollLeft:document.body.scrollLeft?document.body.scrollLeft:0,[e,t]}return function(a){for(var n=0,s=0,i=a,r=!1;(i=i.parentNode)&&i!=document.body;)n-=i.scrollLeft||0,s-=i.scrollTop||0,"fixed"==t(i,"position")&&(r=!0);if(r&&!window.opera){var o=e();n+=o[0],s+=o[1]}do n+=a.offsetLeft,s+=a.offsetTop;while(a=a.offsetParent);return{x:n,y:s}}}(),Util.getEventPosition=function(t,e,a){"use strict";var n,s,i,r;n=t?t:window.event,n=n.changedTouches?n.changedTouches[0]:n.touches?n.touches[0]:n,n.pageX||n.pageY?(s=n.pageX,i=n.pageY):(n.clientX||n.clientY)&&(s=n.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,i=n.clientY+document.body.scrollTop+document.documentElement.scrollTop),r=Util.getPosition(e),"undefined"==typeof a&&(a=1);var o=s-r.x,l=i-r.y,c=Math.max(Math.min(o,e.width-1),0),d=Math.max(Math.min(l,e.height-1),0);return{x:c/a,y:d/a,realx:o/a,realy:l/a}},Util.addEvent=function(t,e,a){"use strict";if(t.attachEvent){var n=t.attachEvent("on"+e,a);return n}if(t.addEventListener)return t.addEventListener(e,a,!1),!0;throw new Error("Handler could not be attached")},Util.removeEvent=function(t,e,a){"use strict";if(t.detachEvent){var n=t.detachEvent("on"+e,a);return n}if(t.removeEventListener)return t.removeEventListener(e,a,!1),!0;throw new Error("Handler could not be removed")},Util.stopEvent=function(t){"use strict";t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.preventDefault?t.preventDefault():t.returnValue=!1},Util.Features={xpath:!!document.evaluate,air:!!window.runtime,query:!!document.querySelector},function(){"use strict";var t=function(){return!!window.opera},e=function(){return window.ActiveXObject?window.XMLHttpRequest?document.querySelectorAll?6:5:4:!1},a=function(){try{return navigator.taintEnabled?!1:Util.Features.xpath?Util.Features.query?525:420:419}catch(t){return!1}},n=function(t){var e=/WebKit\/([0-9\.]*) /,a=(navigator.userAgent.match(e)||["",t])[1];return parseFloat(a,10)},s=function(){return document.getBoxObjectFor||null!=window.mozInnerScreenX?document.getElementsByClassName?19:18:!1};Util.Engine={presto:t(),trident:e(),webkit:a(),gecko:s()},Util.Engine.webkit&&(Util.Engine.webkit=n(Util.Engine.webkit))}(),Util.Flash=function(){"use strict";var t,e;try{t=navigator.plugins["Shockwave Flash"].description}catch(a){try{t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(n){t="0 r0"}}return e=t.match(/\d+/g),{version:parseInt(e[0]||"0."+e[1],10)||0,build:parseInt(e[2],10)||0}}(),define("vnc-util",function(t){return function(){var e;return e||t.Util}}(this));var WebUtil={},$D;window.$D||(window.$D=function(t){return document.getElementById?document.getElementById(t):document.all?document.all[t]:document.layers?document.layers[t]:void 0}),WebUtil.init_logging=function(t){"use strict";if("undefined"!=typeof t)Util._log_level=t;else{var e=document.location.href.match(/logging=([A-Za-z0-9\._\-]*)/);Util._log_level=(e||["",Util._log_level])[1]}Util.init_logging()},WebUtil.dirObj=function(t,e,a){"use strict";e||(e=2),a||(a="");var n="";for(var s in t)if(e>1&&"object"==typeof t[s])n+=WebUtil.dirObj(t[s],e-1,a+"."+s);else{var i="";i="undefined"==typeof t[s]?"undefined":t[s].toString().replace("\n"," "),i.length>30&&(i=i.substr(0,30)+"..."),n+=a+"."+s+": "+i+"\n"}return n},WebUtil.getQueryVar=function(t,e){"use strict";var a=new RegExp(".*[?&]"+t+"=([^&#]*)"),n=document.location.href.match(a);return"undefined"==typeof e&&(e=null),n?decodeURIComponent(n[1]):e},WebUtil.createCookie=function(t,e,a){"use strict";var n,s;a?(n=new Date,n.setTime(n.getTime()+24*a*60*60*1e3),s="; expires="+n.toGMTString()):s="";var i;i="https:"===document.location.protocol?"; secure":"",document.cookie=t+"="+e+s+"; path=/"+i},WebUtil.readCookie=function(t,e){"use strict";for(var a=t+"=",n=document.cookie.split(";"),s=0;s<n.length;s+=1){for(var i=n[s];" "===i.charAt(0);)i=i.substring(1,i.length);if(0===i.indexOf(a))return i.substring(a.length,i.length)}return"undefined"!=typeof e?e:null},WebUtil.eraseCookie=function(t){"use strict";WebUtil.createCookie(t,"",-1)},WebUtil.initSettings=function(t){"use strict";var e=Array.prototype.slice.call(arguments,1);window.chrome&&window.chrome.storage?window.chrome.storage.sync.get(function(a){WebUtil.settings=a,console.log(WebUtil.settings),t&&t.apply(this,e)}):t&&t.apply(this,e)},WebUtil.writeSetting=function(t,e){"use strict";window.chrome&&window.chrome.storage?WebUtil.settings[t]!==e&&(WebUtil.settings[t]=e,window.chrome.storage.sync.set(WebUtil.settings)):localStorage.setItem(t,e)},WebUtil.readSetting=function(t,e){"use strict";var a;return a=window.chrome&&window.chrome.storage?WebUtil.settings[t]:localStorage.getItem(t),"undefined"==typeof a&&(a=null),null===a&&void 0!==typeof e?e:a},WebUtil.eraseSetting=function(t){"use strict";window.chrome&&window.chrome.storage?(window.chrome.storage.sync.remove(t),delete WebUtil.settings[t]):localStorage.removeItem(t)},WebUtil.getStylesheets=function(){"use strict";for(var t=document.getElementsByTagName("link"),e=[],a=0;a<t.length;a+=1)t[a].title&&t[a].rel.toUpperCase().indexOf("STYLESHEET")>-1&&e.push(t[a]);return e},WebUtil.selectStylesheet=function(t){"use strict";"undefined"==typeof t&&(t="default");for(var e=WebUtil.getStylesheets(),a=0;a<e.length;a+=1){var n=e[a];n.title===t?(Util.Debug("Using stylesheet "+t),n.disabled=!1):n.disabled=!0}return t},define("vnc-webutil",["vnc-util"],function(){});var Base64={toBase64Table:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".split(""),base64Pad:"=",encode:function(t){"use strict";for(var e="",a=Base64.toBase64Table,n=t.length,s=n%3,i=0;n-2>i;i+=3)e+=a[t[i]>>2],e+=a[((3&t[i])<<4)+(t[i+1]>>4)],e+=a[((15&t[i+1])<<2)+(t[i+2]>>6)],e+=a[63&t[i+2]];
var r=0;return 2===s?(r=n-s,e+=a[t[r]>>2],e+=a[((3&t[r])<<4)+(t[r+1]>>4)],e+=a[(15&t[r+1])<<2],e+=a[64]):1===s&&(r=n-s,e+=a[t[r]>>2],e+=a[(3&t[r])<<4],e+=a[64],e+=a[64]),e},toBinaryTable:[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],decode:function(t,e){"use strict";e="undefined"!=typeof e?e:0;var a,n,s=Base64.toBinaryTable,i=Base64.base64Pad,r=0,o=0,l=t.indexOf("=")-e;0>l&&(l=t.length-e),n=3*(l>>2)+Math.floor(l%4/1.5),a=new Array(n);for(var c=0,d=e;d<t.length;d++){var u=s[127&t.charCodeAt(d)],p=t.charAt(d)===i;-1!==u?(o=o<<6|u,r+=6,r>=8&&(r-=8,p||(a[c++]=o>>r&255),o&=(1<<r)-1)):console.error("Illegal character code "+t.charCodeAt(d)+" at position "+d)}if(r)throw err=new Error("Corrupted base64 string"),err.name="Base64-Error",err;return a}};define("vnc-base64",["vnc-util"],function(){}),window.WebSocket&&!window.WEB_SOCKET_FORCE_FLASH?Websock_native=!0:window.MozWebSocket&&!window.WEB_SOCKET_FORCE_FLASH?(Websock_native=!0,window.WebSocket=window.MozWebSocket):(Websock_native=!1,function(){window.WEB_SOCKET_SWF_LOCATION=Util.get_include_uri()+"web-socket-js/WebSocketMain.swf",Util.Engine.trident&&(Util.Debug("Forcing uncached load of WebSocketMain.swf"),window.WEB_SOCKET_SWF_LOCATION+="?"+Math.random()),Util.load_scripts(["web-socket-js/swfobject.js","web-socket-js/web_socket.js"])}()),function(){"use strict";Websock.prototype={get_sQ:function(){return this._sQ},get_rQ:function(){return this._rQ},get_rQi:function(){return this._rQi},set_rQi:function(t){this._rQi=t},rQlen:function(){return this._rQ.length-this._rQi},rQpeek8:function(){return this._rQ[this._rQi]},rQshift8:function(){return this._rQ[this._rQi++]},rQskip8:function(){this._rQi++},rQskipBytes:function(t){this._rQi+=t},rQunshift8:function(t){0===this._rQi?this._rQ.unshift(t):(this._rQi--,this._rQ[this._rQi]=t)},rQshift16:function(){return(this._rQ[this._rQi++]<<8)+this._rQ[this._rQi++]},rQshift32:function(){return(this._rQ[this._rQi++]<<24)+(this._rQ[this._rQi++]<<16)+(this._rQ[this._rQi++]<<8)+this._rQ[this._rQi++]},rQshiftStr:function(t){"undefined"==typeof t&&(t=this.rQlen());var e=this._rQ.slice(this._rQi,this._rQi+t);return this._rQi+=t,String.fromCharCode.apply(null,e)},rQshiftBytes:function(t){return"undefined"==typeof t&&(t=this.rQlen()),this._rQi+=t,this._rQ.slice(this._rQi-t,this._rQi)},rQslice:function(t,e){return e?this._rQ.slice(this._rQi+t,this._rQi+e):this._rQ.slice(this._rQi+t)},rQwait:function(t,e,a){var n=this._rQ.length-this._rQi;if(e>n){if(a){if(this._rQi<a)throw new Error("rQwait cannot backup "+a+" bytes");this._rQi-=a}return!0}return!1},flush:function(){return 0!==this._websocket.bufferedAmount&&Util.Debug("bufferedAmount: "+this._websocket.bufferedAmount),this._websocket.bufferedAmount<this.maxBufferedAmount?(this._sQ.length>0&&(this._websocket.send(this._encode_message()),this._sQ=[]),!0):(Util.Info("Delaying send, bufferedAmount: "+this._websocket.bufferedAmount),!1)},send:function(t){return this._sQ=this._sQ.concat(t),this.flush()},send_string:function(t){this.send(t.split("").map(function(t){return t.charCodeAt(0)}))},on:function(t,e){this._eventHandlers[t]=e},init:function(t,e){this._rQ=[],this._rQi=0,this._sQ=[],this._websocket=null;var a=!1;"Uint8Array"in window&&"set"in Uint8Array.prototype&&(a=!0);var n=!1;try{a&&("binaryType"in WebSocket.prototype||new WebSocket(e+"://.").binaryType)&&(Util.Info("Detected binaryType support in WebSockets"),n=!0)}catch(s){}if("undefined"==typeof t&&(t=n?["binary","base64"]:"base64"),!n){if("binary"===t)throw new Error("WebSocket binary sub-protocol requested but not supported");if("object"==typeof t){for(var i=[],r=0;r<t.length;r++)"binary"===t[r]?Util.Error("Skipping unsupported WebSocket binary sub-protocol"):i.push(t[r]);if(!(i.length>0))throw new Error("Only WebSocket binary sub-protocol was requested and is not supported.");t=i}}return t},open:function(t,e){var a=t.match(/^([a-z]+):\/\//)[1];e=this.init(e,a),this._websocket=new WebSocket(t,e),e.indexOf("binary")>=0&&(this._websocket.binaryType="arraybuffer"),this._websocket.onmessage=this._recv_message.bind(this),this._websocket.onopen=function(){Util.Debug(">> WebSock.onopen"),this._websocket.protocol?(this._mode=this._websocket.protocol,Util.Info("Server choose sub-protocol: "+this._websocket.protocol)):(this._mode="base64",Util.Error("Server select no sub-protocol!: "+this._websocket.protocol)),this._eventHandlers.open(),Util.Debug("<< WebSock.onopen")}.bind(this),this._websocket.onclose=function(t){Util.Debug(">> WebSock.onclose"),this._eventHandlers.close(t),Util.Debug("<< WebSock.onclose")}.bind(this),this._websocket.onerror=function(t){Util.Debug(">> WebSock.onerror: "+t),this._eventHandlers.error(t),Util.Debug("<< WebSock.onerror: "+t)}.bind(this)},close:function(){this._websocket&&((this._websocket.readyState===WebSocket.OPEN||this._websocket.readyState===WebSocket.CONNECTING)&&(Util.Info("Closing WebSocket connection"),this._websocket.close()),this._websocket.onmessage=function(){})},_encode_message:function(){return"binary"===this._mode?new Uint8Array(this._sQ).buffer:Base64.encode(this._sQ)},_decode_message:function(t){if("binary"===this._mode)for(var e=new Uint8Array(t),a=0;a<e.length;a++)this._rQ.push(e[a]);else this._rQ=this._rQ.concat(Base64.decode(t,0))},_recv_message:function(t){try{this._decode_message(t.data),this.rQlen()>0?(this._eventHandlers.message(),this._rQ.length>this._rQmax&&(this._rQ=this._rQ.slice(this._rQi),this._rQi=0)):Util.Debug("Ignoring empty message")}catch(e){var a="";e.name&&(a+="\n    name: "+e.name+"\n",a+="    message: "+e.message+"\n"),"undefined"!=typeof e.description&&(a+="    description: "+e.description+"\n"),"undefined"!=typeof e.stack&&(a+=e.stack),Util.Error(a.length>0?"recv_message, caught exception: "+a:"recv_message, caught exception: "+e),this._eventHandlers.error("undefined"!=typeof e.name?e.name+": "+e.message:e)}}}}(),define("vnc-websock",["vnc-util"],function(){}),define("vnc-des",["vnc-util"],function(){});var keysyms=function(){"use strict";function t(t){return t?{keysym:t,keyname:e?e[t]:t}:void 0}var e=null,a={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:92,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:126,160:160,161:161,162:162,163:163,164:164,165:165,166:166,167:167,168:168,169:169,170:170,171:171,172:172,173:173,174:174,175:175,176:176,177:177,178:178,179:179,180:180,181:181,182:182,183:183,184:184,185:185,186:186,187:187,188:188,189:189,190:190,191:191,192:192,193:193,194:194,195:195,196:196,197:197,198:198,199:199,200:200,201:201,202:202,203:203,204:204,205:205,206:206,207:207,208:208,209:209,210:210,211:211,212:212,213:213,214:214,215:215,216:216,217:217,218:218,219:219,220:220,221:221,222:222,223:223,224:224,225:225,226:226,227:227,228:228,229:229,230:230,231:231,232:232,233:233,234:234,235:235,236:236,237:237,238:238,239:239,240:240,241:241,242:242,243:243,244:244,245:245,246:246,247:247,248:248,249:249,250:250,251:251,252:252,253:253,254:254,255:255,256:960,257:992,258:451,259:483,260:417,261:433,262:454,263:486,264:710,265:742,266:709,267:741,268:456,269:488,270:463,271:495,272:464,273:496,274:938,275:954,278:972,279:1004,280:458,281:490,282:460,283:492,284:728,285:760,286:683,287:699,288:725,289:757,290:939,291:955,292:678,293:694,294:673,295:689,296:933,297:949,298:975,299:1007,300:16777516,301:16777517,302:967,303:999,304:681,305:697,308:684,309:700,310:979,311:1011,312:930,313:453,314:485,315:934,316:950,317:421,318:437,321:419,322:435,323:465,324:497,325:977,326:1009,327:466,328:498,330:957,331:959,332:978,333:1010,336:469,337:501,338:5052,339:5053,340:448,341:480,342:931,343:947,344:472,345:504,346:422,347:438,348:734,349:766,350:426,351:442,352:425,353:441,354:478,355:510,356:427,357:443,358:940,359:956,360:989,361:1021,362:990,363:1022,364:733,365:765,366:473,367:505,368:475,369:507,370:985,371:1017,372:16777588,373:16777589,374:16777590,375:16777591,376:5054,377:428,378:444,379:431,380:447,381:430,382:446,399:16777615,402:2294,415:16777631,416:16777632,417:16777633,431:16777647,432:16777648,437:16777653,438:16777654,439:16777655,466:16777681,486:16777702,487:16777703,601:16777817,629:16777845,658:16777874,711:439,728:418,729:511,731:434,733:445,901:1966,902:1953,904:1954,905:1955,906:1956,908:1959,910:1960,911:1963,912:1974,913:1985,914:1986,915:1987,916:1988,917:1989,918:1990,919:1991,920:1992,921:1993,922:1994,923:1995,924:1996,925:1997,926:1998,927:1999,928:2e3,929:2001,931:2002,932:2004,933:2005,934:2006,935:2007,936:2008,937:2009,938:1957,939:1961,940:1969,941:1970,942:1971,943:1972,944:1978,945:2017,946:2018,947:2019,948:2020,949:2021,950:2022,951:2023,952:2024,953:2025,954:2026,955:2027,956:2028,957:2029,958:2030,959:2031,960:2032,961:2033,962:2035,963:2034,964:2036,965:2037,966:2038,967:2039,968:2040,969:2041,970:1973,971:1977,972:1975,973:1976,974:1979,1025:1715,1026:1713,1027:1714,1028:1716,1029:1717,1030:1718,1031:1719,1032:1720,1033:1721,1034:1722,1035:1723,1036:1724,1038:1726,1039:1727,1040:1761,1041:1762,1042:1783,1043:1767,1044:1764,1045:1765,1046:1782,1047:1786,1048:1769,1049:1770,1050:1771,1051:1772,1052:1773,1053:1774,1054:1775,1055:1776,1056:1778,1057:1779,1058:1780,1059:1781,1060:1766,1061:1768,1062:1763,1063:1790,1064:1787,1065:1789,1066:1791,1067:1785,1068:1784,1069:1788,1070:1760,1071:1777,1072:1729,1073:1730,1074:1751,1075:1735,1076:1732,1077:1733,1078:1750,1079:1754,1080:1737,1081:1738,1082:1739,1083:1740,1084:1741,1085:1742,1086:1743,1087:1744,1088:1746,1089:1747,1090:1748,1091:1749,1092:1734,1093:1736,1094:1731,1095:1758,1096:1755,1097:1757,1098:1759,1099:1753,1100:1752,1101:1756,1102:1728,1103:1745,1105:1699,1106:1697,1107:1698,1108:1700,1109:1701,1110:1702,1111:1703,1112:1704,1113:1705,1114:1706,1115:1707,1116:1708,1118:1710,1119:1711,1168:1725,1169:1709,1170:16778386,1171:16778387,1174:16778390,1175:16778391,1178:16778394,1179:16778395,1180:16778396,1181:16778397,1186:16778402,1187:16778403,1198:16778414,1199:16778415,1200:16778416,1201:16778417,1202:16778418,1203:16778419,1206:16778422,1207:16778423,1208:16778424,1209:16778425,1210:16778426,1211:16778427,1240:16778456,1241:16778457,1250:16778466,1251:16778467,1256:16778472,1257:16778473,1262:16778478,1263:16778479,1329:16778545,1330:16778546,1331:16778547,1332:16778548,1333:16778549,1334:16778550,1335:16778551,1336:16778552,1337:16778553,1338:16778554,1339:16778555,1340:16778556,1341:16778557,1342:16778558,1343:16778559,1344:16778560,1345:16778561,1346:16778562,1347:16778563,1348:16778564,1349:16778565,1350:16778566,1351:16778567,1352:16778568,1353:16778569,1354:16778570,1355:16778571,1356:16778572,1357:16778573,1358:16778574,1359:16778575,1360:16778576,1361:16778577,1362:16778578,1363:16778579,1364:16778580,1365:16778581,1366:16778582,1370:16778586,1371:16778587,1372:16778588,1373:16778589,1374:16778590,1377:16778593,1378:16778594,1379:16778595,1380:16778596,1381:16778597,1382:16778598,1383:16778599,1384:16778600,1385:16778601,1386:16778602,1387:16778603,1388:16778604,1389:16778605,1390:16778606,1391:16778607,1392:16778608,1393:16778609,1394:16778610,1395:16778611,1396:16778612,1397:16778613,1398:16778614,1399:16778615,1400:16778616,1401:16778617,1402:16778618,1403:16778619,1404:16778620,1405:16778621,1406:16778622,1407:16778623,1408:16778624,1409:16778625,1410:16778626,1411:16778627,1412:16778628,1413:16778629,1414:16778630,1415:16778631,1417:16778633,1418:16778634,1488:3296,1489:3297,1490:3298,1491:3299,1492:3300,1493:3301,1494:3302,1495:3303,1496:3304,1497:3305,1498:3306,1499:3307,1500:3308,1501:3309,1502:3310,1503:3311,1504:3312,1505:3313,1506:3314,1507:3315,1508:3316,1509:3317,1510:3318,1511:3319,1512:3320,1513:3321,1514:3322,1548:1452,1563:1467,1567:1471,1569:1473,1570:1474,1571:1475,1572:1476,1573:1477,1574:1478,1575:1479,1576:1480,1577:1481,1578:1482,1579:1483,1580:1484,1581:1485,1582:1486,1583:1487,1584:1488,1585:1489,1586:1490,1587:1491,1588:1492,1589:1493,1590:1494,1591:1495,1592:1496,1593:1497,1594:1498,1600:1504,1601:1505,1602:1506,1603:1507,1604:1508,1605:1509,1606:1510,1607:1511,1608:1512,1609:1513,1610:1514,1611:1515,1612:1516,1613:1517,1614:1518,1615:1519,1616:1520,1617:1521,1618:1522,1619:16778835,1620:16778836,1621:16778837,1632:16778848,1633:16778849,1634:16778850,1635:16778851,1636:16778852,1637:16778853,1638:16778854,1639:16778855,1640:16778856,1641:16778857,1642:16778858,1648:16778864,1657:16778873,1662:16778878,1670:16778886,1672:16778888,1681:16778897,1688:16778904,1700:16778916,1705:16778921,1711:16778927,1722:16778938,1726:16778942,1729:16778945,1740:16778956,1746:16778962,1748:16778964,1776:16778992,1777:16778993,1778:16778994,1779:16778995,1780:16778996,1781:16778997,1782:16778998,1783:16778999,1784:16779e3,1785:16779001,3458:16780674,3459:16780675,3461:16780677,3462:16780678,3463:16780679,3464:16780680,3465:16780681,3466:16780682,3467:16780683,3468:16780684,3469:16780685,3470:16780686,3471:16780687,3472:16780688,3473:16780689,3474:16780690,3475:16780691,3476:16780692,3477:16780693,3478:16780694,3482:16780698,3483:16780699,3484:16780700,3485:16780701,3486:16780702,3487:16780703,3488:16780704,3489:16780705,3490:16780706,3491:16780707,3492:16780708,3493:16780709,3494:16780710,3495:16780711,3496:16780712,3497:16780713,3498:16780714,3499:16780715,3500:16780716,3501:16780717,3502:16780718,3503:16780719,3504:16780720,3505:16780721,3507:16780723,3508:16780724,3509:16780725,3510:16780726,3511:16780727,3512:16780728,3513:16780729,3514:16780730,3515:16780731,3517:16780733,3520:16780736,3521:16780737,3522:16780738,3523:16780739,3524:16780740,3525:16780741,3526:16780742,3530:16780746,3535:16780751,3536:16780752,3537:16780753,3538:16780754,3539:16780755,3540:16780756,3542:16780758,3544:16780760,3545:16780761,3546:16780762,3547:16780763,3548:16780764,3549:16780765,3550:16780766,3551:16780767,3570:16780786,3571:16780787,3572:16780788,3585:3489,3586:3490,3587:3491,3588:3492,3589:3493,3590:3494,3591:3495,3592:3496,3593:3497,3594:3498,3595:3499,3596:3500,3597:3501,3598:3502,3599:3503,3600:3504,3601:3505,3602:3506,3603:3507,3604:3508,3605:3509,3606:3510,3607:3511,3608:3512,3609:3513,3610:3514,3611:3515,3612:3516,3613:3517,3614:3518,3615:3519,3616:3520,3617:3521,3618:3522,3619:3523,3620:3524,3621:3525,3622:3526,3623:3527,3624:3528,3625:3529,3626:3530,3627:3531,3628:3532,3629:3533,3630:3534,3631:3535,3632:3536,3633:3537,3634:3538,3635:3539,3636:3540,3637:3541,3638:3542,3639:3543,3640:3544,3641:3545,3642:3546,3647:3551,3648:3552,3649:3553,3650:3554,3651:3555,3652:3556,3653:3557,3654:3558,3655:3559,3656:3560,3657:3561,3658:3562,3659:3563,3660:3564,3661:3565,3664:3568,3665:3569,3666:3570,3667:3571,3668:3572,3669:3573,3670:3574,3671:3575,3672:3576,3673:3577,4304:16781520,4305:16781521,4306:16781522,4307:16781523,4308:16781524,4309:16781525,4310:16781526,4311:16781527,4312:16781528,4313:16781529,4314:16781530,4315:16781531,4316:16781532,4317:16781533,4318:16781534,4319:16781535,4320:16781536,4321:16781537,4322:16781538,4323:16781539,4324:16781540,4325:16781541,4326:16781542,4327:16781543,4328:16781544,4329:16781545,4330:16781546,4331:16781547,4332:16781548,4333:16781549,4334:16781550,4335:16781551,4336:16781552,4337:16781553,4338:16781554,4339:16781555,4340:16781556,4341:16781557,4342:16781558,7682:16784898,7683:16784899,7690:16784906,7691:16784907,7710:16784926,7711:16784927,7734:16784950,7735:16784951,7744:16784960,7745:16784961,7766:16784982,7767:16784983,7776:16784992,7777:16784993,7786:16785002,7787:16785003,7808:16785024,7809:16785025,7810:16785026,7811:16785027,7812:16785028,7813:16785029,7818:16785034,7819:16785035,7840:16785056,7841:16785057,7842:16785058,7843:16785059,7844:16785060,7845:16785061,7846:16785062,7847:16785063,7848:16785064,7849:16785065,7850:16785066,7851:16785067,7852:16785068,7853:16785069,7854:16785070,7855:16785071,7856:16785072,7857:16785073,7858:16785074,7859:16785075,7860:16785076,7861:16785077,7862:16785078,7863:16785079,7864:16785080,7865:16785081,7866:16785082,7867:16785083,7868:16785084,7869:16785085,7870:16785086,7871:16785087,7872:16785088,7873:16785089,7874:16785090,7875:16785091,7876:16785092,7877:16785093,7878:16785094,7879:16785095,7880:16785096,7881:16785097,7882:16785098,7883:16785099,7884:16785100,7885:16785101,7886:16785102,7887:16785103,7888:16785104,7889:16785105,7890:16785106,7891:16785107,7892:16785108,7893:16785109,7894:16785110,7895:16785111,7896:16785112,7897:16785113,7898:16785114,7899:16785115,7900:16785116,7901:16785117,7902:16785118,7903:16785119,7904:16785120,7905:16785121,7906:16785122,7907:16785123,7908:16785124,7909:16785125,7910:16785126,7911:16785127,7912:16785128,7913:16785129,7914:16785130,7915:16785131,7916:16785132,7917:16785133,7918:16785134,7919:16785135,7920:16785136,7921:16785137,7922:16785138,7923:16785139,7924:16785140,7925:16785141,7926:16785142,7927:16785143,7928:16785144,7929:16785145,8194:2722,8195:2721,8196:2723,8197:2724,8199:2725,8200:2726,8201:2727,8202:2728,8210:2747,8211:2730,8212:2729,8213:1967,8215:3295,8216:2768,8217:2769,8218:2813,8220:2770,8221:2771,8222:2814,8224:2801,8225:2802,8226:2790,8229:2735,8230:2734,8240:2773,8242:2774,8243:2775,8248:2812,8254:1150,8304:16785520,8308:16785524,8309:16785525,8310:16785526,8311:16785527,8312:16785528,8313:16785529,8320:16785536,8321:16785537,8322:16785538,8323:16785539,8324:16785540,8325:16785541,8326:16785542,8327:16785543,8328:16785544,8329:16785545,8352:16785568,8353:16785569,8354:16785570,8355:16785571,8356:16785572,8357:16785573,8358:16785574,8359:16785575,8360:16785576,8361:3839,8362:16785578,8363:16785579,8364:8364,8453:2744,8470:1712,8471:2811,8478:2772,8482:2761,8531:2736,8532:2737,8533:2738,8534:2739,8535:2740,8536:2741,8537:2742,8538:2743,8539:2755,8540:2756,8541:2757,8542:2758,8592:2299,8593:2300,8594:2301,8595:2302,8658:2254,8660:2253,8706:2287,8709:16785925,8711:2245,8712:16785928,8713:16785929,8715:16785931,8728:3018,8730:2262,8731:16785947,8732:16785948,8733:2241,8734:2242,8743:2270,8744:2271,8745:2268,8746:2269,8747:2239,8748:16785964,8749:16785965,8756:2240,8757:16785973,8764:2248,8771:2249,8773:16785992,8775:16785991,8800:2237,8801:2255,8802:16786018,8803:16786019,8804:2236,8805:2238,8834:2266,8835:2267,8866:3068,8867:3036,8868:3010,8869:3022,8968:3027,8970:3012,8981:2810,8992:2212,8993:2213,9109:3020,9115:2219,9117:2220,9118:2221,9120:2222,9121:2215,9123:2216,9124:2217,9126:2218,9128:2223,9132:2224,9143:2209,9146:2543,9147:2544,9148:2546,9149:2547,9225:2530,9226:2533,9227:2537,9228:2531,9229:2532,9251:2732,9252:2536,9472:2211,9474:2214,9484:2210,9488:2539,9492:2541,9496:2538,9500:2548,9508:2549,9516:2551,9524:2550,9532:2542,9618:2529,9642:2791,9643:2785,9644:2779,9645:2786,9646:2783,9647:2767,9650:2792,9651:2787,9654:2781,9655:2765,9660:2793,9661:2788,9664:2780,9665:2764,9670:2528,9675:2766,9679:2782,9702:2784,9734:2789,9742:2809,9747:2762,9756:2794,9758:2795,9792:2808,9794:2807,9827:2796,9829:2798,9830:2797,9837:2806,9839:2805,10003:2803,10007:2804,10013:2777,10016:2800,10216:2748,10217:2750,10240:16787456,10241:16787457,10242:16787458,10243:16787459,10244:16787460,10245:16787461,10246:16787462,10247:16787463,10248:16787464,10249:16787465,10250:16787466,10251:16787467,10252:16787468,10253:16787469,10254:16787470,10255:16787471,10256:16787472,10257:16787473,10258:16787474,10259:16787475,10260:16787476,10261:16787477,10262:16787478,10263:16787479,10264:16787480,10265:16787481,10266:16787482,10267:16787483,10268:16787484,10269:16787485,10270:16787486,10271:16787487,10272:16787488,10273:16787489,10274:16787490,10275:16787491,10276:16787492,10277:16787493,10278:16787494,10279:16787495,10280:16787496,10281:16787497,10282:16787498,10283:16787499,10284:16787500,10285:16787501,10286:16787502,10287:16787503,10288:16787504,10289:16787505,10290:16787506,10291:16787507,10292:16787508,10293:16787509,10294:16787510,10295:16787511,10296:16787512,10297:16787513,10298:16787514,10299:16787515,10300:16787516,10301:16787517,10302:16787518,10303:16787519,10304:16787520,10305:16787521,10306:16787522,10307:16787523,10308:16787524,10309:16787525,10310:16787526,10311:16787527,10312:16787528,10313:16787529,10314:16787530,10315:16787531,10316:16787532,10317:16787533,10318:16787534,10319:16787535,10320:16787536,10321:16787537,10322:16787538,10323:16787539,10324:16787540,10325:16787541,10326:16787542,10327:16787543,10328:16787544,10329:16787545,10330:16787546,10331:16787547,10332:16787548,10333:16787549,10334:16787550,10335:16787551,10336:16787552,10337:16787553,10338:16787554,10339:16787555,10340:16787556,10341:16787557,10342:16787558,10343:16787559,10344:16787560,10345:16787561,10346:16787562,10347:16787563,10348:16787564,10349:16787565,10350:16787566,10351:16787567,10352:16787568,10353:16787569,10354:16787570,10355:16787571,10356:16787572,10357:16787573,10358:16787574,10359:16787575,10360:16787576,10361:16787577,10362:16787578,10363:16787579,10364:16787580,10365:16787581,10366:16787582,10367:16787583,10368:16787584,10369:16787585,10370:16787586,10371:16787587,10372:16787588,10373:16787589,10374:16787590,10375:16787591,10376:16787592,10377:16787593,10378:16787594,10379:16787595,10380:16787596,10381:16787597,10382:16787598,10383:16787599,10384:16787600,10385:16787601,10386:16787602,10387:16787603,10388:16787604,10389:16787605,10390:16787606,10391:16787607,10392:16787608,10393:16787609,10394:16787610,10395:16787611,10396:16787612,10397:16787613,10398:16787614,10399:16787615,10400:16787616,10401:16787617,10402:16787618,10403:16787619,10404:16787620,10405:16787621,10406:16787622,10407:16787623,10408:16787624,10409:16787625,10410:16787626,10411:16787627,10412:16787628,10413:16787629,10414:16787630,10415:16787631,10416:16787632,10417:16787633,10418:16787634,10419:16787635,10420:16787636,10421:16787637,10422:16787638,10423:16787639,10424:16787640,10425:16787641,10426:16787642,10427:16787643,10428:16787644,10429:16787645,10430:16787646,10431:16787647,10432:16787648,10433:16787649,10434:16787650,10435:16787651,10436:16787652,10437:16787653,10438:16787654,10439:16787655,10440:16787656,10441:16787657,10442:16787658,10443:16787659,10444:16787660,10445:16787661,10446:16787662,10447:16787663,10448:16787664,10449:16787665,10450:16787666,10451:16787667,10452:16787668,10453:16787669,10454:16787670,10455:16787671,10456:16787672,10457:16787673,10458:16787674,10459:16787675,10460:16787676,10461:16787677,10462:16787678,10463:16787679,10464:16787680,10465:16787681,10466:16787682,10467:16787683,10468:16787684,10469:16787685,10470:16787686,10471:16787687,10472:16787688,10473:16787689,10474:16787690,10475:16787691,10476:16787692,10477:16787693,10478:16787694,10479:16787695,10480:16787696,10481:16787697,10482:16787698,10483:16787699,10484:16787700,10485:16787701,10486:16787702,10487:16787703,10488:16787704,10489:16787705,10490:16787706,10491:16787707,10492:16787708,10493:16787709,10494:16787710,10495:16787711,12289:1188,12290:1185,12300:1186,12301:1187,12443:1246,12444:1247,12449:1191,12450:1201,12451:1192,12452:1202,12453:1193,12454:1203,12455:1194,12456:1204,12457:1195,12458:1205,12459:1206,12461:1207,12463:1208,12465:1209,12467:1210,12469:1211,12471:1212,12473:1213,12475:1214,12477:1215,12479:1216,12481:1217,12483:1199,12484:1218,12486:1219,12488:1220,12490:1221,12491:1222,12492:1223,12493:1224,12494:1225,12495:1226,12498:1227,12501:1228,12504:1229,12507:1230,12510:1231,12511:1232,12512:1233,12513:1234,12514:1235,12515:1196,12516:1236,12517:1197,12518:1237,12519:1198,12520:1238,12521:1239,12522:1240,12523:1241,12524:1242,12525:1243,12527:1244,12530:1190,12531:1245,12539:1189,12540:1200};return{fromUnicode:function(e){return t(a[e])},lookup:t}}();define("vnc-keysymdef",["vnc-util"],function(){});var kbdUtil=function(){"use strict";function t(t){var e={536:350,537:351,538:354,539:355},a=e[t];return a?a:t}function e(){return navigator&&!!/mac/i.exec(navigator.platform)}function a(){return navigator&&!!/win/i.exec(navigator.platform)}function n(){return navigator&&!!/linux/i.exec(navigator.platform)}function s(t,e){var a={};for(var n in e)parseInt(n)!==XK_Shift_L&&(a[n]=e[n]);var s=0;for(var r in e)a[r]&&++s;return i(t,a)?s>t.length:s>0}function i(t,e){if(0===t.length)return!1;for(var a=0;a<t.length;++a)if(!e[t[a]])return!1;return!0}function r(t){function r(t,e){function a(t){return{keysym:keysyms.lookup(t),type:c[t]?"keydown":"keyup"}}var n=[];return void 0!==t.ctrlKey&&t.ctrlKey!==c[XK_Control_L]&&e!==XK_Control_L&&(c[XK_Control_L]=t.ctrlKey,n.push(a(XK_Control_L))),void 0!==t.altKey&&t.altKey!==c[XK_Alt_L]&&e!==XK_Alt_L&&(c[XK_Alt_L]=t.altKey,n.push(a(XK_Alt_L))),void 0!==t.altGraphKey&&t.altGraphKey!==c[XK_ISO_Level3_Shift]&&e!==XK_ISO_Level3_Shift&&(c[XK_ISO_Level3_Shift]=t.altGraphKey,n.push(a(XK_ISO_Level3_Shift))),void 0!==t.shiftKey&&t.shiftKey!==c[XK_Shift_L]&&e!==XK_Shift_L&&(c[XK_Shift_L]=t.shiftKey,n.push(a(XK_Shift_L))),void 0!==t.metaKey&&t.metaKey!==c[XK_Meta_L]&&e!==XK_Meta_L&&(c[XK_Meta_L]=t.metaKey,n.push(a(XK_Meta_L))),n}function o(t,e){var a=l(t),n=a?a.keysym:null;return null!==n&&void 0!==c[n]&&(c[n]=e),r(t,n)}t||(t=e()?[XK_Alt_L]:a()?[XK_Alt_L,XK_Control_L]:n()?[XK_ISO_Level3_Shift]:[]);var c={};return c[XK_Control_L]=!1,c[XK_Alt_L]=!1,c[XK_ISO_Level3_Shift]=!1,c[XK_Shift_L]=!1,c[XK_Meta_L]=!1,{keydown:function(t){return o(t,!0)},keyup:function(t){return o(t,!1)},syncAny:function(t){return r(t)},hasShortcutModifier:function(){return s(t,c)},activeCharModifier:function(){return i(t,c)?t:null}}}function o(t){return"keyCode"in t&&"key"in t?t.key+":"+t.keyCode:"keyCode"in t?t.keyCode:t.key}function l(e){var a;if(e["char"]&&1===e["char"].length?a=e["char"].charCodeAt():e.charCode?a=e.charCode:e.keyCode&&"keypress"===e.type&&(a=e.keyCode),a){var n=keysyms.fromUnicode(t(a));if(n)return n}return e.keyCode?keysyms.lookup(c(e.keyCode,e.shiftKey)):e.which?keysyms.lookup(c(e.which,e.shiftKey)):null}function c(t,e){if("number"!=typeof t)return null;if(t>=48&&57>=t)return t;if(t>=65&&90>=t)return e?t:t+32;if(t>=96&&105>=t)return XK_KP_0+(t-96);switch(t){case 32:return XK_space;case 106:return XK_KP_Multiply;case 107:return XK_KP_Add;case 108:return XK_KP_Separator;case 109:return XK_KP_Subtract;case 110:return XK_KP_Decimal;case 111:return XK_KP_Divide;case 187:return XK_plus;case 188:return XK_comma;case 189:return XK_minus;case 190:return XK_period}return d({keyCode:t})}function d(t){if(!t.keyCode)return null;var e=t.keyCode;if(e>=112&&135>=e)return XK_F1+e-112;switch(e){case 8:return XK_BackSpace;case 13:return XK_Return;case 9:return XK_Tab;case 27:return XK_Escape;case 46:return XK_Delete;case 36:return XK_Home;case 35:return XK_End;case 33:return XK_Page_Up;case 34:return XK_Page_Down;case 45:return XK_Insert;case 37:return XK_Left;case 38:return XK_Up;case 39:return XK_Right;case 40:return XK_Down;case 16:return XK_Shift_L;case 17:return XK_Control_L;case 18:return XK_Alt_L;case 224:return XK_Meta_L;case 225:return XK_ISO_Level3_Shift;case 91:return XK_Super_L;case 92:return XK_Super_R;case 93:return XK_Menu;default:return null}}return{hasShortcutModifier:s,hasCharModifier:i,ModifierSync:r,getKey:o,getKeysym:l,keysymFromKeyCode:c,nonCharacterKey:d,substituteCodepoint:t}}();define("vnc-keyboard",["vnc-util"],function(){});var Keyboard,Mouse;!function(){"use strict";Keyboard=function(t){this._keyDownList=[],Util.set_defaults(this,t,{target:document,focused:!0}),this._handler=new KeyEventDecoder(kbdUtil.ModifierSync(),VerifyCharModifier(TrackKeyState(EscapeModifiers(this._handleRfbEvent.bind(this))))),this._eventHandlers={keyup:this._handleKeyUp.bind(this),keydown:this._handleKeyDown.bind(this),keypress:this._handleKeyPress.bind(this),blur:this._allKeysUp.bind(this)}},Keyboard.prototype={_handleRfbEvent:function(t){this._onKeyPress&&(Util.Debug("onKeyPress "+("keydown"==t.type?"down":"up")+", keysym: "+t.keysym.keysym+"("+t.keysym.keyname+")"),this._onKeyPress(t.keysym.keysym,"keydown"==t.type))},_handleKeyDown:function(t){return this._focused&&this._handler.keydown(t)?(Util.stopEvent(t),!1):!0},_handleKeyPress:function(t){return this._focused&&this._handler.keypress(t)?(Util.stopEvent(t),!1):!0},_handleKeyUp:function(t){return this._focused&&this._handler.keyup(t)?(Util.stopEvent(t),!1):!0},_allKeysUp:function(){Util.Debug(">> Keyboard.allKeysUp"),this._handler.releaseAll(),Util.Debug("<< Keyboard.allKeysUp")},grab:function(){var t=this._target;Util.addEvent(t,"keydown",this._eventHandlers.keydown),Util.addEvent(t,"keyup",this._eventHandlers.keyup),Util.addEvent(t,"keypress",this._eventHandlers.keypress),Util.addEvent(window,"blur",this._eventHandlers.blur)},ungrab:function(){var t=this._target;Util.removeEvent(t,"keydown",this._eventHandlers.keydown),Util.removeEvent(t,"keyup",this._eventHandlers.keyup),Util.removeEvent(t,"keypress",this._eventHandlers.keypress),Util.removeEvent(window,"blur",this._eventHandlers.blur),this._allKeysUp()},sync:function(t){this._handler.syncModifiers(t)}},Util.make_properties(Keyboard,[["target","wo","dom"],["focused","rw","bool"],["onKeyPress","rw","func"]]),Mouse=function(t){this._mouseCaptured=!1,this._doubleClickTimer=null,this._lastTouchPos=null,Util.set_defaults(this,t,{target:document,focused:!0,scale:1,touchButton:1}),this._eventHandlers={mousedown:this._handleMouseDown.bind(this),mouseup:this._handleMouseUp.bind(this),mousemove:this._handleMouseMove.bind(this),mousewheel:this._handleMouseWheel.bind(this),mousedisable:this._handleMouseDisable.bind(this)}},Mouse.prototype={_captureMouse:function(){this._target.setCapture&&this._target.setCapture(),this._mouseCaptured=!0},_releaseMouse:function(){this._target.releaseCapture&&this._target.releaseCapture(),this._mouseCaptured=!1},_resetDoubleClickTimer:function(){this._doubleClickTimer=null},_handleMouseButton:function(t,e){if(!this._focused)return!0;this._notify&&this._notify(t);var a,n=t?t:window.event,s=Util.getEventPosition(t,this._target,this._scale);if(t.touches||t.changedTouches){if(1==e){if(null===this._doubleClickTimer)this._lastTouchPos=s;else{clearTimeout(this._doubleClickTimer);var i=this._lastTouchPos.x-s.x,r=this._lastTouchPos.y-s.y,o=Math.sqrt(i*i+r*r);o<20*window.devicePixelRatio&&(s=this._lastTouchPos)}this._doubleClickTimer=setTimeout(this._resetDoubleClickTimer.bind(this),500)}a=this._touchButton}else a=n.which?1<<n.button:(1&n.button)+2*(2&n.button)+(4&n.button)/2;return this._onMouseButton&&(Util.Debug("onMouseButton "+(e?"down":"up")+", x: "+s.x+", y: "+s.y+", bmask: "+a),this._onMouseButton(s.x,s.y,e,a)),Util.stopEvent(t),!1},_handleMouseDown:function(t){this._captureMouse(),this._handleMouseButton(t,1)},_handleMouseUp:function(t){this._mouseCaptured&&(this._handleMouseButton(t,0),this._releaseMouse())},_handleMouseWheel:function(t){if(!this._focused)return!0;this._notify&&this._notify(t);var e,a=t?t:window.event,n=Util.getEventPosition(t,this._target,this._scale),s=a.detail?-1*a.detail:a.wheelDelta/40;return e=s>0?8:16,this._onMouseButton&&(this._onMouseButton(n.x,n.y,1,e),this._onMouseButton(n.x,n.y,0,e)),Util.stopEvent(t),!1},_handleMouseMove:function(t){if(!this._focused)return!0;this._notify&&this._notify(t);var e=(t?t:window.event,Util.getEventPosition(t,this._target,this._scale));return this._onMouseMove&&this._onMouseMove(e.x,e.y),Util.stopEvent(t),!1},_handleMouseDisable:function(t){if(!this._focused)return!0;var e=(t?t:window.event,Util.getEventPosition(t,this._target,this._scale));
return e.realx>=0&&e.realy>=0&&e.realx<this._target.offsetWidth&&e.realy<this._target.offsetHeight?(Util.stopEvent(t),!1):!0},grab:function(){var t=this._target;"ontouchstart"in document.documentElement?(Util.addEvent(t,"touchstart",this._eventHandlers.mousedown),Util.addEvent(window,"touchend",this._eventHandlers.mouseup),Util.addEvent(t,"touchend",this._eventHandlers.mouseup),Util.addEvent(t,"touchmove",this._eventHandlers.mousemove)):(Util.addEvent(t,"mousedown",this._eventHandlers.mousedown),Util.addEvent(window,"mouseup",this._eventHandlers.mouseup),Util.addEvent(t,"mouseup",this._eventHandlers.mouseup),Util.addEvent(t,"mousemove",this._eventHandlers.mousemove),Util.addEvent(t,Util.Engine.gecko?"DOMMouseScroll":"mousewheel",this._eventHandlers.mousewheel)),Util.addEvent(document,"click",this._eventHandlers.mousedisable),Util.addEvent(document.body,"contextmenu",this._eventHandlers.mousedisable)},ungrab:function(){var t=this._target;"ontouchstart"in document.documentElement?(Util.removeEvent(t,"touchstart",this._eventHandlers.mousedown),Util.removeEvent(window,"touchend",this._eventHandlers.mouseup),Util.removeEvent(t,"touchend",this._eventHandlers.mouseup),Util.removeEvent(t,"touchmove",this._eventHandlers.mousemove)):(Util.removeEvent(t,"mousedown",this._eventHandlers.mousedown),Util.removeEvent(window,"mouseup",this._eventHandlers.mouseup),Util.removeEvent(t,"mouseup",this._eventHandlers.mouseup),Util.removeEvent(t,"mousemove",this._eventHandlers.mousemove),Util.removeEvent(t,Util.Engine.gecko?"DOMMouseScroll":"mousewheel",this._eventHandlers.mousewheel)),Util.removeEvent(document,"click",this._eventHandlers.mousedisable),Util.removeEvent(document.body,"contextmenu",this._eventHandlers.mousedisable)}},Util.make_properties(Mouse,[["target","ro","dom"],["notify","ro","func"],["focused","rw","bool"],["scale","rw","float"],["onMouseButton","rw","func"],["onMouseMove","rw","func"],["touchButton","rw","int"]])}(),define("vnc-input",["vnc-util"],function(){});var Display;!function(){"use strict";Display=function(t){if(this._drawCtx=null,this._c_forceCanvas=!1,this._renderQ=[],this._fb_width=0,this._fb_height=0,this._viewportLoc={x:0,y:0,w:0,h:0},this._cleanRect={x1:0,y1:0,x2:-1,y2:-1},this._prevDrawStyle="",this._tile=null,this._tile16x16=null,this._tile_x=0,this._tile_y=0,Util.set_defaults(this,t,{true_color:!0,colourMap:[],scale:1,viewport:!1,render_mode:""}),Util.Debug(">> Display.constructor"),!this._target)throw new Error("Target must be set");if("string"==typeof this._target)throw new Error("target must be a DOM element");if(!this._target.getContext)throw new Error("no getContext method");if(this._drawCtx||(this._drawCtx=this._target.getContext("2d")),Util.Debug("User Agent: "+navigator.userAgent),Util.Engine.gecko&&Util.Debug("Browser: gecko "+Util.Engine.gecko),Util.Engine.webkit&&Util.Debug("Browser: webkit "+Util.Engine.webkit),Util.Engine.trident&&Util.Debug("Browser: trident "+Util.Engine.trident),Util.Engine.presto&&Util.Debug("Browser: presto "+Util.Engine.presto),this.clear(),!("createImageData"in this._drawCtx))throw new Error("Canvas does not support createImageData");this._render_mode="canvas rendering",null===this._prefer_js&&(Util.Info("Prefering javascript operations"),this._prefer_js=!0);for(var e=[],a=0;256>a;a++)e.push(255);try{var n=this._target.style.cursor;Display.changeCursor(this._target,e,e,2,2,8,8),this._target.style.cursor?((null===this._cursor_uri||void 0===this._cursor_uri)&&(this._cursor_uri=!0),Util.Info("Data URI scheme cursor supported")):((null===this._cursor_uri||void 0===this._cursor_uri)&&(this._cursor_uri=!1),Util.Warn("Data URI scheme cursor not supported")),this._target.style.cursor=n}catch(s){Util.Error("Data URI scheme cursor test exception: "+s),this._cursor_uri=!1}Util.Debug("<< Display.constructor")},Display.prototype={viewportChange:function(t,e,a,n){var s=this._viewportLoc,i=this._cleanRect,r=this._target;if(this._viewport||(Util.Debug("Setting viewport to full display region"),t=-s.w,e=-s.h,a=this._fb_width,n=this._fb_height),"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),"undefined"==typeof a&&(a=s.w),"undefined"==typeof n&&(n=s.h),a>this._fb_width&&(a=this._fb_width),n>this._fb_height&&(n=this._fb_height),s.w!==a||s.h!==n){a<s.w&&i.x2>s.x+a-1&&(i.x2=s.x+a-1),s.w=a,n<s.h&&i.y2>s.y+n-1&&(i.y2=s.y+n-1),s.h=n;var o=null;if(s.w>0&&s.h>0&&r.width>0&&r.height>0){var l=r.width<s.w?r.width:s.w,c=r.height<s.h?r.height:s.h;o=this._drawCtx.getImageData(0,0,l,c)}r.width=s.w,r.height=s.h,o&&this._drawCtx.putImageData(o,0,0)}var d=s.x+s.w-1,u=s.y+s.h-1;if(0>t&&s.x+t<0&&(t=-s.x),d+t>=this._fb_width&&(t-=d+t-this._fb_width+1),s.y+e<0&&(e=-s.y),u+e>=this._fb_height&&(e-=u+e-this._fb_height+1),0!==t||0!==e){Util.Debug("viewportChange deltaX: "+t+", deltaY: "+e),s.x+=t,d+=t,s.y+=e,u+=e,s.x>i.x1&&(i.x1=s.x),d<i.x2&&(i.x2=d),s.y>i.y1&&(i.y1=s.y),u<i.y2&&(i.y2=u);var p,h;0>t?(p=0,h=-t):(p=s.w-t,h=t);var f,m;0>e?(f=0,m=-e):(f=s.h-e,m=e);var _=this._drawCtx.fillStyle;this._drawCtx.fillStyle="rgb(255,255,255)",0!==t&&(this._drawCtx.drawImage(r,0,0,s.w,s.h,-t,0,s.w,s.h),this._drawCtx.fillRect(p,0,h,s.h)),0!==e&&(this._drawCtx.drawImage(r,0,0,s.w,s.h,0,-e,s.w,s.h),this._drawCtx.fillRect(0,f,s.w,m)),this._drawCtx.fillStyle=_}},getCleanDirtyReset:function(){var t=this._viewportLoc,e=this._cleanRect,a={x:e.x1,y:e.y1,w:e.x2-e.x1+1,h:e.y2-e.y1+1},n=[];if(e.x1>=e.x2||e.y1>=e.y2)n.push({x:t.x,y:t.y,w:t.w,h:t.h});else{var s=t.x+t.w-1,i=t.y+t.h-1;t.x<e.x1&&n.push({x:t.x,y:t.y,w:e.x1-t.x+1,h:t.h}),s>e.x2&&n.push({x:e.x2+1,y:t.y,w:s-e.x2,h:t.h}),t.y<e.y1&&n.push({x:e.x1,y:t.y,w:e.x2-e.x1+1,h:e.y1-t.y}),i>e.y2&&n.push({x:e.x1,y:e.y2+1,w:e.x2-e.x1+1,h:i-e.y2})}return this._cleanRect={x1:t.x,y1:t.y,x2:t.x+t.w-1,y2:t.y+t.h-1},{cleanBox:a,dirtyBoxes:n}},absX:function(t){return t+this._viewportLoc.x},absY:function(t){return t+this._viewportLoc.y},resize:function(t,e){this._prevDrawStyle="",this._fb_width=t,this._fb_height=e,this._rescale(this._scale),this.viewportChange()},clear:function(){this._logo?(this.resize(this._logo.width,this._logo.height),this.blitStringImage(this._logo.data,0,0)):(6===Util.Engine.trident&&this._drawCtx.clearRect(0,0,this._viewportLoc.w,this._viewportLoc.h),this.resize(240,20),this._drawCtx.clearRect(0,0,this._viewportLoc.w,this._viewportLoc.h)),this._renderQ=[]},fillRect:function(t,e,a,n,s){this._setFillColor(s),this._drawCtx.fillRect(t-this._viewportLoc.x,e-this._viewportLoc.y,a,n)},copyImage:function(t,e,a,n,s,i){var r=t-this._viewportLoc.x,o=e-this._viewportLoc.y,l=a-this._viewportLoc.x,c=n-this._viewportLoc.y;this._drawCtx.drawImage(this._target,r,o,s,i,l,c,s,i)},startTile:function(t,e,a,n,s){if(this._tile_x=t,this._tile_y=e,this._tile=16===a&&16===n?this._tile16x16:this._drawCtx.createImageData(a,n),this._prefer_js){var i;i=this._true_color?s:this._colourMap[s[0]];for(var r=i[2],o=i[1],l=i[0],c=this._tile.data,d=0;a*n*4>d;d+=4)c[d]=r,c[d+1]=o,c[d+2]=l,c[d+3]=255}else this.fillRect(t,e,a,n,s)},subTile:function(t,e,a,n,s){if(this._prefer_js){var i;i=this._true_color?s:this._colourMap[s[0]];for(var r=i[2],o=i[1],l=i[0],c=t+a,d=e+n,u=this._tile.data,p=this._tile.width,h=e;d>h;h++)for(var f=t;c>f;f++){var m=4*(f+h*p);u[m]=r,u[m+1]=o,u[m+2]=l,u[m+3]=255}}else this.fillRect(this._tile_x+t,this._tile_y+e,a,n,s)},finishTile:function(){this._prefer_js&&this._drawCtx.putImageData(this._tile,this._tile_x-this._viewportLoc.x,this._tile_y-this._viewportLoc.y)},blitImage:function(t,e,a,n,s,i){this._true_color?this._bgrxImageData(t,e,this._viewportLoc.x,this._viewportLoc.y,a,n,s,i):this._cmapImageData(t,e,this._viewportLoc.x,this._viewportLoc.y,a,n,s,i)},blitRgbImage:function(t,e,a,n,s,i){this._true_color?this._rgbImageData(t,e,this._viewportLoc.x,this._viewportLoc.y,a,n,s,i):this._cmapImageData(t,e,this._viewportLoc.x,this._viewportLoc.y,a,n,s,i)},blitStringImage:function(t,e,a){var n=new Image;return n.onload=function(){this._drawCtx.drawImage(n,e-this._viewportLoc.x,a-this._viewportLoc.y)}.bind(this),n.src=t,n},drawImage:function(t,e,a){this._drawCtx.drawImage(t,e-this._viewportLoc.x,a-this._viewportLoc.y)},renderQ_push:function(t){this._renderQ.push(t),1===this._renderQ.length&&this._scan_renderQ()},changeCursor:function(t,e,a,n,s,i){return this._cursor_uri===!1?void Util.Warn("changeCursor called but no cursor data URI support"):void(this._true_color?Display.changeCursor(this._target,t,e,a,n,s,i):Display.changeCursor(this._target,t,e,a,n,s,i,this._colourMap))},defaultCursor:function(){this._target.style.cursor="default"},get_context:function(){return this._drawCtx},set_scale:function(t){this._rescale(t)},set_width:function(t){this.resize(t,this._fb_height)},get_width:function(){return this._fb_width},set_height:function(t){this.resize(this._fb_width,t)},get_height:function(){return this._fb_height},_rescale:function(t){for(var e,a=this._target,n=["transform","WebkitTransform","MozTransform"];(e=n.shift())&&"undefined"==typeof a.style[e];);if(null===e)return void Util.Debug("No scaling support");if("undefined"==typeof t?t=this._scale:t>1?t=1:.1>t&&(t=.1),this._scale!==t){this._scale=t;var s=a.width-a.width*t,i=a.height-a.height*t;a.style[e]="scale("+this._scale+") translate(-"+s+"px, -"+i+"px)"}},_setFillColor:function(t){var e;e=this._true_color?t:this._colourMap[t[0]];var a="rgb("+e[2]+","+e[1]+","+e[0]+")";a!==this._prevDrawStyle&&(this._drawCtx.fillStyle=a,this._prevDrawStyle=a)},_rgbImageData:function(t,e,a,n,s,i,r,o){for(var l=this._drawCtx.createImageData(s,i),c=l.data,d=0,u=o;s*i*4>d;d+=4,u+=3)c[d]=r[u],c[d+1]=r[u+1],c[d+2]=r[u+2],c[d+3]=255;this._drawCtx.putImageData(l,t-a,e-n)},_bgrxImageData:function(t,e,a,n,s,i,r,o){for(var l=this._drawCtx.createImageData(s,i),c=l.data,d=0,u=o;s*i*4>d;d+=4,u+=4)c[d]=r[u+2],c[d+1]=r[u+1],c[d+2]=r[u],c[d+3]=255;this._drawCtx.putImageData(l,t-a,e-n)},_cmapImageData:function(t,e,a,n,s,i,r,o){for(var l=this._drawCtx.createImageData(s,i),c=l.data,d=this._colourMap,u=0,p=o;s*i*4>u;u+=4,p++){var h=d[r[p]];c[u]=h[2],c[u+1]=h[1],c[u+2]=h[0],c[u+3]=255}this._drawCtx.putImageData(l,t-a,e-n)},_scan_renderQ:function(){for(var t=!0;t&&this._renderQ.length>0;){var e=this._renderQ[0];switch(e.type){case"copy":this.copyImage(e.old_x,e.old_y,e.x,e.y,e.width,e.height);break;case"fill":this.fillRect(e.x,e.y,e.width,e.height,e.color);break;case"blit":this.blitImage(e.x,e.y,e.width,e.height,e.data,0);break;case"blitRgb":this.blitRgbImage(e.x,e.y,e.width,e.height,e.data,0);break;case"img":e.img.complete?this.drawImage(e.img,e.x,e.y):t=!1}t&&this._renderQ.shift()}this._renderQ.length>0&&requestAnimFrame(this._scan_renderQ.bind(this))}},Util.make_properties(Display,[["target","wo","dom"],["context","ro","raw"],["logo","rw","raw"],["true_color","rw","bool"],["colourMap","rw","arr"],["scale","rw","float"],["viewport","rw","bool"],["width","rw","int"],["height","rw","int"],["render_mode","ro","str"],["prefer_js","rw","str"],["cursor_uri","rw","raw"]]),Display.changeCursor=function(t,e,a,n,s,i,r,o){var l=i,c=r;l>c?c=l:l=c;var d=[];d.push16le=function(t){this.push(255&t,t>>8&255)},d.push32le=function(t){this.push(255&t,t>>8&255,t>>16&255,t>>24&255)};var u=40,p=l*c*4,h=Math.ceil(l*c/8),f=Math.ceil(l*c/8);d.push16le(0),d.push16le(2),d.push16le(1),d.push(l),d.push(c),d.push(0),d.push(0),d.push16le(n),d.push16le(s),d.push32le(u+p+h+f),d.push32le(22),d.push32le(u),d.push32le(l),d.push32le(2*c),d.push16le(1),d.push16le(32),d.push32le(0),d.push32le(h+f),d.push32le(0),d.push32le(0),d.push32le(0),d.push32le(0);var m,_;for(m=c-1;m>=0;m--)for(_=0;l>_;_++)if(_>=i||m>=r)d.push(0),d.push(0),d.push(0),d.push(0);else{var b=m*Math.ceil(i/8)+Math.floor(_/8),v=a[b]<<_%8&128?255:0;if(o){b=i*m+_;var g=o[e[b]];d.push(g[2]),d.push(g[1]),d.push(g[0]),d.push(v)}else b=4*(i*m+_),d.push(e[b+2]),d.push(e[b+1]),d.push(e[b]),d.push(v)}for(m=0;c>m;m++)for(_=0;_<Math.ceil(l/8);_++)d.push(0);for(m=0;c>m;m++)for(_=0;_<Math.ceil(l/8);_++)d.push(0);var y="data:image/x-icon;base64,"+Base64.encode(d);t.style.cursor="url("+y+")"+n+" "+s+", default"}}(),define("vnc-display",["vnc-util"],function(){});var tinf;define("vnc-jsunzip",["vnc-util"],function(){});var RFB;!function(){"use strict";RFB=function(t){t||(t={}),this._rfb_host="",this._rfb_port=5900,this._rfb_password="",this._rfb_path="",this._rfb_state="disconnected",this._rfb_version=0,this._rfb_max_version=3.8,this._rfb_auth_scheme="",this._rfb_tightvnc=!1,this._rfb_xvp_ver=0,this._encodings=[["COPYRECT",1],["TIGHT",7],["TIGHT_PNG",-260],["HEXTILE",5],["RRE",2],["RAW",0],["DesktopSize",-223],["Cursor",-239],["JPEG_quality_med",-26],["compress_hi",-247],["last_rect",-224],["xvp",-309]],this._encHandlers={},this._encNames={},this._encStats={},this._sock=null,this._display=null,this._keyboard=null,this._mouse=null,this._sendTimer=null,this._disconnTimer=null,this._msgTimer=null,this._FBU={rects:0,subrects:0,lines:0,tiles:0,bytes:0,x:0,y:0,width:0,height:0,encoding:0,subencoding:-1,background:null,zlib:[]},this._fb_Bpp=4,this._fb_depth=3,this._fb_width=0,this._fb_height=0,this._fb_name="",this._rre_chunk_sz=100,this._timing={last_fbu:0,fbu_total:0,fbu_total_cnt:0,full_fbu_total:0,full_fbu_cnt:0,fbu_rt_start:0,fbu_rt_total:0,fbu_rt_cnt:0,pixels:0},this._mouse_buttonMask=0,this._mouse_arr=[],this._viewportDragging=!1,this._viewportDragPos={},Util.set_defaults(this,t,{target:"null",focusContainer:document,encrypt:!1,true_color:!0,local_cursor:!1,shared:!0,view_only:!1,xvp_password_sep:"@",disconnectTimeout:3,wsProtocols:["binary","base64"],repeaterID:"",viewportDrag:!1,onUpdateState:function(){},onPasswordRequired:function(){},onClipboard:function(){},onBell:function(){},onFBUReceive:function(){},onFBUComplete:function(){},onFBResize:function(){},onDesktopName:function(){},onXvpInit:function(){}}),Util.Debug(">> RFB.constructor"),Object.keys(RFB.encodingHandlers).forEach(function(t){this._encHandlers[t]=RFB.encodingHandlers[t].bind(this)}.bind(this));for(var e=0;e<this._encodings.length;e++)this._encHandlers[this._encodings[e][1]]=this._encHandlers[this._encodings[e][0]],this._encNames[this._encodings[e][1]]=this._encodings[e][0],this._encStats[this._encodings[e][1]]=[0,0];try{this._display=new Display({target:this._target})}catch(a){Util.Error("Display exception: "+a),this._updateState("fatal","No working Display")}this._keyboard=new Keyboard({target:this._focusContainer,onKeyPress:this._handleKeyPress.bind(this)}),this._mouse=new Mouse({target:this._target,onMouseButton:this._handleMouseButton.bind(this),onMouseMove:this._handleMouseMove.bind(this),notify:this._keyboard.sync.bind(this._keyboard)}),this._sock=new Websock,this._sock.on("message",this._handle_message.bind(this)),this._sock.on("open",function(){"connect"===this._rfb_state?this._updateState("ProtocolVersion","Starting VNC handshake"):this._fail("Got unexpected WebSocket connection")}.bind(this)),this._sock.on("close",function(t){Util.Warn("WebSocket on-close event");var e="";t.code&&(e=" (code: "+t.code,t.reason&&(e+=", reason: "+t.reason),e+=")"),"disconnect"===this._rfb_state?this._updateState("disconnected","VNC disconnected"+e):"ProtocolVersion"===this._rfb_state?this._fail("Failed to connect to server"+e):this._rfb_state in{failed:1,disconnected:1}?Util.Error("Received onclose while disconnected"+e):this._fail("Server disconnected"+e)}.bind(this)),this._sock.on("error",function(){Util.Warn("WebSocket on-error event")}),this._init_vars();var n=this._display.get_render_mode();Websock_native?(Util.Info("Using native WebSockets"),this._updateState("loaded","noVNC ready: native WebSockets, "+n)):(Util.Warn("Using web-socket-js bridge.  Flash version: "+Util.Flash.version),!Util.Flash||Util.Flash.version<9?this._updateState("fatal","WebSockets or <a href='http://get.adobe.com/flashplayer'>Adobe Flash</a> is required"):"file://"===document.location.href.substr(0,7)?this._updateState("fatal","'file://' URL is incompatible with Adobe Flash"):this._updateState("loaded","noVNC ready: WebSockets emulation, "+n)),Util.Debug("<< RFB.constructor")},RFB.prototype={connect:function(t,e,a,n){return this._rfb_host=t,this._rfb_port=e,this._rfb_password=void 0!==a?a:"",this._rfb_path=void 0!==n?n:"",this._rfb_host&&this._rfb_port?void this._updateState("connect"):this._fail("Must set host and port")},disconnect:function(){this._updateState("disconnect","Disconnecting")},sendPassword:function(t){this._rfb_password=t,this._rfb_state="Authentication",setTimeout(this._init_msg.bind(this),1)},sendCtrlAltDel:function(){if("normal"!==this._rfb_state||this._view_only)return!1;Util.Info("Sending Ctrl-Alt-Del");var t=[];t=t.concat(RFB.messages.keyEvent(XK_Control_L,1)),t=t.concat(RFB.messages.keyEvent(XK_Alt_L,1)),t=t.concat(RFB.messages.keyEvent(XK_Delete,1)),t=t.concat(RFB.messages.keyEvent(XK_Delete,0)),t=t.concat(RFB.messages.keyEvent(XK_Alt_L,0)),t=t.concat(RFB.messages.keyEvent(XK_Control_L,0)),this._sock.send(t)},xvpOp:function(t,e){return this._rfb_xvp_ver<t?!1:(Util.Info("Sending XVP operation "+e+" (version "+t+")"),this._sock.send_string("\x00"+String.fromCharCode(t)+String.fromCharCode(e)),!0)},xvpShutdown:function(){return this.xvpOp(1,2)},xvpReboot:function(){return this.xvpOp(1,3)},xvpReset:function(){return this.xvpOp(1,4)},sendKey:function(t,e){if("normal"!==this._rfb_state||this._view_only)return!1;var a=[];"undefined"!=typeof e?(Util.Info("Sending key code ("+(e?"down":"up")+"): "+t),a=a.concat(RFB.messages.keyEvent(t,e?1:0))):(Util.Info("Sending key code (down + up): "+t),a=a.concat(RFB.messages.keyEvent(t,1)),a=a.concat(RFB.messages.keyEvent(t,0))),this._sock.send(a)},clipboardPasteFrom:function(t){"normal"===this._rfb_state&&this._sock.send(RFB.messages.clientCutText(t))},_connect:function(){Util.Debug(">> RFB.connect");var t;t="undefined"!=typeof UsingSocketIO?"http":this._encrypt?"wss":"ws",t+="://"+this._rfb_host+":"+this._rfb_port+"/"+this._rfb_path,Util.Info("connecting to "+t),this._sock.open(t,this._wsProtocols),Util.Debug("<< RFB.connect")},_init_vars:function(){this._sock.init(),this._FBU.rects=0,this._FBU.subrects=0,this._FBU.lines=0,this._FBU.tiles=0,this._FBU.zlibs=[],this._mouse_buttonMask=0,this._mouse_arr=[],this._rfb_tightvnc=!1;var t;for(t=0;t<this._encodings.length;t++)this._encStats[this._encodings[t][1]][0]=0;for(t=0;4>t;t++)this._FBU.zlibs[t]=new TINF,this._FBU.zlibs[t].init()},_print_stats:function(){Util.Info("Encoding stats for this connection:");var t,e;for(t=0;t<this._encodings.length;t++)e=this._encStats[this._encodings[t][1]],e[0]+e[1]>0&&Util.Info("    "+this._encodings[t][0]+": "+e[0]+" rects");for(Util.Info("Encoding stats since page load:"),t=0;t<this._encodings.length;t++)e=this._encStats[this._encodings[t][1]],Util.Info("    "+this._encodings[t][0]+": "+e[1]+" rects")},_updateState:function(t,e){var a=this._rfb_state;t===a&&Util.Debug("Already in state '"+t+"', ignoring"),t in{disconnected:1,loaded:1,connect:1,disconnect:1,failed:1,fatal:1}&&(this._sendTimer&&(clearInterval(this._sendTimer),this._sendTimer=null),this._msgTimer&&(clearInterval(this._msgTimer),this._msgTimer=null),this._display&&this._display.get_context()&&(this._keyboard.ungrab(),this._mouse.ungrab(),this._display.defaultCursor(),("debug"!==Util.get_logging()||"loaded"===t)&&this._display.clear()),this._sock.close()),"fatal"===a&&Util.Error("Fatal error, cannot continue");var n="undefined"!=typeof e?" Msg: "+e:"";switch("failed"===t||"fatal"===t?Util.Error(n):Util.Warn(n),this._rfb_state="failed"===a&&"disconnected"===t?"failed":t,this._disconnTimer&&"disconnect"!==this._rfb_state&&(Util.Debug("Clearing disconnect timer"),clearTimeout(this._disconnTimer),this._disconnTimer=null),t){case"normal":("disconnected"===a||"failed"===a)&&Util.Error("Invalid transition from 'disconnected' or 'failed' to 'normal'");break;case"connect":this._init_vars(),this._connect();break;case"disconnect":this._disconnTimer=setTimeout(function(){this._fail("Disconnect timeout")}.bind(this),1e3*this._disconnectTimeout),this._print_stats();break;case"failed":"disconnected"===a?Util.Error("Invalid transition from 'disconnected' to 'failed'"):"normal"===a?Util.Error("Error while connected."):"init"===a&&Util.Error("Error while initializing."),setTimeout(function(){this._updateState("disconnected")}.bind(this),50)}"failed"===a&&"disconnected"===t?this._onUpdateState(this,t,a):this._onUpdateState(this,t,a,e)},_fail:function(t){return this._updateState("failed",t),!1},_handle_message:function(){if(0===this._sock.rQlen())return void Util.Warn("handle_message called on an empty receive queue");switch(this._rfb_state){case"disconnected":case"failed":Util.Error("Got data while disconnected");break;case"normal":this._normal_msg()&&this._sock.rQlen()>0&&(null===this._msgTimer?(Util.Debug("More data to process, creating timer"),this._msgTimer=setTimeout(function(){this._msgTimer=null,this._handle_message()}.bind(this),10)):Util.Debug("More data to process, existing timer"));break;default:this._init_msg()}},_checkEvents:function(){"normal"===this._rfb_state&&!this._viewportDragging&&this._mouse_arr.length>0&&(this._sock.send(this._mouse_arr),this._mouse_arr=[])},_handleKeyPress:function(t,e){this._view_only||this._sock.send(RFB.messages.keyEvent(t,e))},_handleMouseButton:function(t,e,a,n){if(a?this._mouse_buttonMask|=n:this._mouse_buttonMask^=n,this._viewportDrag){if(a&&!this._viewportDragging)return this._viewportDragging=!0,void(this._viewportDragPos={x:t,y:e});this._viewportDragging=!1}this._view_only||(this._mouse_arr=this._mouse_arr.concat(RFB.messages.pointerEvent(this._display.absX(t),this._display.absY(e),this._mouse_buttonMask)),this._sock.send(this._mouse_arr),this._mouse_arr=[])},_handleMouseMove:function(t,e){if(this._viewportDragging){var a=this._viewportDragPos.x-t,n=this._viewportDragPos.y-e;return this._viewportDragPos={x:t,y:e},void this._display.viewportChange(a,n)}this._view_only||(this._mouse_arr=this._mouse_arr.concat(RFB.messages.pointerEvent(this._display.absX(t),this._display.absY(e),this._mouse_buttonMask)),this._checkEvents())},_negotiate_protocol_version:function(){if(this._sock.rQlen()<12)return this._fail("Incomplete protocol version");var t=this._sock.rQshiftStr(12).substr(4,7);Util.Info("Server ProtocolVersion: "+t);var e=0;switch(t){case"000.000":e=1;break;case"003.003":case"003.006":case"003.889":this._rfb_version=3.3;break;case"003.007":this._rfb_version=3.7;break;case"003.008":case"004.000":case"004.001":this._rfb_version=3.8;break;default:return this._fail("Invalid server version "+t)}if(e){for(var a=this._repeaterID;a.length<250;)a+="\x00";return this._sock.send_string(a),!0}this._rfb_version>this._rfb_max_version&&(this._rfb_version=this._rfb_max_version),this._sendTimer=setInterval(this._sock.flush.bind(this._sock),50);var n="00"+parseInt(this._rfb_version,10)+".00"+10*this._rfb_version%10;this._sock.send_string("RFB "+n+"\n"),this._updateState("Security","Sent ProtocolVersion: "+n)},_negotiate_security:function(){if(this._rfb_version>=3.7){var t=this._sock.rQshift8();if(this._sock.rQwait("security type",t,1))return!1;if(0===t){var e=this._sock.rQshift32(),a=this._sock.rQshiftStr(e);return this._fail("Security failure: "+a)}this._rfb_auth_scheme=0;var n=this._sock.rQshiftBytes(t);Util.Debug("Server security types: "+n);for(var s=0;s<n.length;s++)n[s]>this._rfb_auth_scheme&&(n[s]<=16||22==n[s])&&(this._rfb_auth_scheme=n[s]);if(0===this._rfb_auth_scheme)return this._fail("Unsupported security types: "+n);this._sock.send([this._rfb_auth_scheme])}else{if(this._sock.rQwait("security scheme",4))return!1;this._rfb_auth_scheme=this._sock.rQshift32()}return this._updateState("Authentication","Authenticating using scheme: "+this._rfb_auth_scheme),this._init_msg()},_negotiate_xvp_auth:function(){var t=this._xvp_password_sep,e=this._rfb_password.split(t);if(e.length<3)return this._updateState("password","XVP credentials required (user"+t+"target"+t+"password) -- got only "+this._rfb_password),this._onPasswordRequired(this),!1;var a=String.fromCharCode(e[0].length)+String.fromCharCode(e[1].length)+e[0]+e[1];return this._sock.send_string(a),this._rfb_password=e.slice(2).join(t),this._rfb_auth_scheme=2,this._negotiate_authentication()},_negotiate_std_vnc_auth:function(){if(0===this._rfb_password.length&&(this._updateState("password","Password Required"),this._onPasswordRequired(this)),this._sock.rQwait("auth challenge",16))return!1;var t=this._sock.rQshiftBytes(16),e=RFB.genDES(this._rfb_password,t);return this._sock.send(e),this._updateState("SecurityResult"),!0},_negotiate_tight_tunnels:function(t){for(var e={0:{vendor:"TGHT",signature:"NOTUNNEL"}},a={},n=0;t>n;n++){var s=this._sock.rQshift32(),i=this._sock.rQshiftStr(4),r=this._sock.rQshiftStr(8);a[s]={vendor:i,signature:r}}return a[0]?a[0].vendor!=e[0].vendor||a[0].signature!=e[0].signature?this._fail("Client's tunnel type had the incorrect vendor or signature"):(this._sock.send([0,0,0,0]),!1):this._fail("Server wanted tunnels, but doesn't support the notunnel type")},_negotiate_tight_auth:function(){if(!this._rfb_tightvnc){if(this._sock.rQwait("num tunnels",4))return!1;var t=this._sock.rQshift32();if(t>0&&this._sock.rQwait("tunnel capabilities",16*t,4))return!1;if(this._rfb_tightvnc=!0,t>0)return this._negotiate_tight_tunnels(t),!1}if(this._sock.rQwait("sub auth count",4))return!1;var e=this._sock.rQshift32();if(this._sock.rQwait("sub auth capabilities",16*e,4))return!1;for(var a={STDVNOAUTH__:1,STDVVNCAUTH_:2},n=[],s=0;e>s;s++){var i=(this._sock.rQshift32(),this._sock.rQshiftStr(12));n.push(i)}for(var r in a)if(-1!=n.indexOf(r))switch(this._sock.send([0,0,0,a[r]]),r){case"STDVNOAUTH__":return this._updateState("SecurityResult"),!0;case"STDVVNCAUTH_":return this._rfb_auth_scheme=2,this._init_msg();default:return this._fail("Unsupported tiny auth scheme: "+r)}this._fail("No supported sub-auth types!")},_negotiate_authentication:function(){switch(this._rfb_auth_scheme){case 0:if(this._sock.rQwait("auth reason",4))return!1;var t=this._sock.rQshift32(),e=this._sock.rQshiftStr(t);return this._fail("Auth failure: "+e);case 1:return this._rfb_version>=3.8?(this._updateState("SecurityResult"),!0):(this._updateState("ClientInitialisation","No auth required"),this._init_msg());case 22:return this._negotiate_xvp_auth();case 2:return this._negotiate_std_vnc_auth();case 16:return this._negotiate_tight_auth();default:return this._fail("Unsupported auth scheme: "+this._rfb_auth_scheme)}},_handle_security_result:function(){if(this._sock.rQwait("VNC auth response ",4))return!1;switch(this._sock.rQshift32()){case 0:return this._updateState("ClientInitialisation","Authentication OK"),this._init_msg();case 1:if(this._rfb_version>=3.8){var t=this._sock.rQshift32();if(this._sock.rQwait("SecurityResult reason",t,8))return!1;var e=this._sock.rQshiftStr(t);return this._fail(e)}return this._fail("Authentication failure");case 2:return this._fail("Too many auth attempts")}},_negotiate_server_init:function(){if(this._sock.rQwait("server initialization",24))return!1;this._fb_width=this._sock.rQshift16(),this._fb_height=this._sock.rQshift16();var t=this._sock.rQshift8(),e=this._sock.rQshift8(),a=this._sock.rQshift8(),n=this._sock.rQshift8(),s=this._sock.rQshift16(),i=this._sock.rQshift16(),r=this._sock.rQshift16(),o=this._sock.rQshift8(),l=this._sock.rQshift8(),c=this._sock.rQshift8();this._sock.rQskipBytes(3);var d=this._sock.rQshift32();if(this._sock.rQwait("server init name",d,24))return!1;if(this._fb_name=Util.decodeUTF8(this._sock.rQshiftStr(d)),this._rfb_tightvnc){if(this._sock.rQwait("TightVNC extended server init header",8,24+d))return!1;var u=this._sock.rQshift16(),p=this._sock.rQshift16(),h=this._sock.rQshift16();this._sock.rQskipBytes(2);var f=16*(u+p+h);if(this._sock.rQwait("TightVNC extended server init header",f,32+d))return!1;var m;for(m=0;u>m;m++){this._sock.rQshiftStr(16)}for(m=0;p>m;m++){this._sock.rQshiftStr(16)}for(m=0;h>m;m++){this._sock.rQshiftStr(16)}}Util.Info("Screen: "+this._fb_width+"x"+this._fb_height+", bpp: "+t+", depth: "+e+", big_endian: "+a+", true_color: "+n+", red_max: "+s+", green_max: "+i+", blue_max: "+r+", red_shift: "+o+", green_shift: "+l+", blue_shift: "+c),0!==a&&Util.Warn("Server native endian is not little endian"),16!==o&&Util.Warn("Server native red-shift is not 16"),0!==c&&Util.Warn("Server native blue-shift is not 0"),this._onDesktopName(this,this._fb_name),this._true_color&&"Intel(r) AMT KVM"===this._fb_name&&(Util.Warn("Intel AMT KVM only supports 8/16 bit depths.  Disabling true color"),this._true_color=!1),this._display.set_true_color(this._true_color),this._onFBResize(this,this._fb_width,this._fb_height),this._display.resize(this._fb_width,this._fb_height),this._keyboard.grab(),this._mouse.grab(),this._true_color?(this._fb_Bpp=4,this._fb_depth=3):(this._fb_Bpp=1,this._fb_depth=1);var _=RFB.messages.pixelFormat(this._fb_Bpp,this._fb_depth,this._true_color);_=_.concat(RFB.messages.clientEncodings(this._encodings,this._local_cursor,this._true_color)),_=_.concat(RFB.messages.fbUpdateRequests(this._display.getCleanDirtyReset(),this._fb_width,this._fb_height)),this._timing.fbu_rt_start=(new Date).getTime(),this._timing.pixels=0,this._sock.send(_),this._checkEvents(),this._encrypt?this._updateState("normal","Connected (encrypted) to: "+this._fb_name):this._updateState("normal","Connected (unencrypted) to: "+this._fb_name)},_init_msg:function(){switch(this._rfb_state){case"ProtocolVersion":return this._negotiate_protocol_version();case"Security":return this._negotiate_security();case"Authentication":return this._negotiate_authentication();case"SecurityResult":return this._handle_security_result();case"ClientInitialisation":return this._sock.send([this._shared?1:0]),this._updateState("ServerInitialisation","Authentication OK"),!0;case"ServerInitialisation":return this._negotiate_server_init()}},_handle_set_colour_map_msg:function(){Util.Debug("SetColorMapEntries"),this._sock.rQskip8();var t=this._sock.rQshift16(),e=this._sock.rQshift16();if(this._sock.rQwait("SetColorMapEntries",6*e,6))return!1;for(var a=0;e>a;a++){var n=parseInt(this._sock.rQshift16()/256,10),s=parseInt(this._sock.rQshift16()/256,10),i=parseInt(this._sock.rQshift16()/256,10);this._display.set_colourMap([i,s,n],t+a)}return Util.Debug("colourMap: "+this._display.get_colourMap()),Util.Info("Registered "+e+" colourMap entries"),!0},_handle_server_cut_text:function(){if(Util.Debug("ServerCutText"),this._sock.rQwait("ServerCutText header",7,1))return!1;this._sock.rQskipBytes(3);var t=this._sock.rQshift32();if(this._sock.rQwait("ServerCutText",t,8))return!1;var e=this._sock.rQshiftStr(t);return this._onClipboard(this,e),!0},_handle_xvp_msg:function(){if(this._sock.rQwait("XVP version and message",3,1))return!1;this._sock.rQskip8();var t=this._sock.rQshift8(),e=this._sock.rQshift8();switch(e){case 0:this._updateState(this._rfb_state,"Operation Failed");break;case 1:this._rfb_xvp_ver=t,Util.Info("XVP extensions enabled (version "+this._rfb_xvp_ver+")"),this._onXvpInit(this._rfb_xvp_ver);break;default:this._fail("Disconnected: illegal server XVP message "+e)}return!0},_normal_msg:function(){var t;switch(t=this._FBU.rects>0?0:this._sock.rQshift8()){case 0:var e=this._framebufferUpdate();return e&&this._sock.send(RFB.messages.fbUpdateRequests(this._display.getCleanDirtyReset(),this._fb_width,this._fb_height)),e;case 1:return this._handle_set_colour_map_msg();case 2:return Util.Debug("Bell"),this._onBell(this),!0;case 3:return this._handle_server_cut_text();case 250:return this._handle_xvp_msg();default:return this._fail("Disconnected: illegal server message type "+t),Util.Debug("sock.rQslice(0, 30): "+this._sock.rQslice(0,30)),!0}},_framebufferUpdate:function(){var t,e=!0;if(0===this._FBU.rects){if(this._sock.rQwait("FBU header",3,1))return!1;this._sock.rQskip8(),this._FBU.rects=this._sock.rQshift16(),this._FBU.bytes=0,this._timing.cur_fbu=0,this._timing.fbu_rt_start>0&&(t=(new Date).getTime(),Util.Info("First FBU latency: "+(t-this._timing.fbu_rt_start)))}for(;this._FBU.rects>0;){if("normal"!==this._rfb_state)return!1;if(this._sock.rQwait("FBU",this._FBU.bytes))return!1;
if(0===this._FBU.bytes){if(this._sock.rQwait("rect header",12))return!1;var a=this._sock.rQshiftBytes(12);if(this._FBU.x=(a[0]<<8)+a[1],this._FBU.y=(a[2]<<8)+a[3],this._FBU.width=(a[4]<<8)+a[5],this._FBU.height=(a[6]<<8)+a[7],this._FBU.encoding=parseInt((a[8]<<24)+(a[9]<<16)+(a[10]<<8)+a[11],10),this._onFBUReceive(this,{x:this._FBU.x,y:this._FBU.y,width:this._FBU.width,height:this._FBU.height,encoding:this._FBU.encoding,encodingName:this._encNames[this._FBU.encoding]}),!this._encNames[this._FBU.encoding])return this._fail("Disconnected: unsupported encoding "+this._FBU.encoding),!1}if(this._timing.last_fbu=(new Date).getTime(),e=this._encHandlers[this._FBU.encoding](),t=(new Date).getTime(),this._timing.cur_fbu+=t-this._timing.last_fbu,e&&(this._encStats[this._FBU.encoding][0]++,this._encStats[this._FBU.encoding][1]++,this._timing.pixels+=this._FBU.width*this._FBU.height),this._timing.pixels>=this._fb_width*this._fb_height&&((this._FBU.width===this._fb_width&&this._FBU.height===this._fb_height||this._timing.fbu_rt_start>0)&&(this._timing.full_fbu_total+=this._timing.cur_fbu,this._timing.full_fbu_cnt++,Util.Info("Timing of full FBU, curr: "+this._timing.cur_fbu+", total: "+this._timing.full_fbu_total+", cnt: "+this._timing.full_fbu_cnt+", avg: "+this._timing.full_fbu_total/this._timing.full_fbu_cnt)),this._timing.fbu_rt_start>0)){var n=t-this._timing.fbu_rt_start;this._timing.fbu_rt_total+=n,this._timing.fbu_rt_cnt++,Util.Info("full FBU round-trip, cur: "+n+", total: "+this._timing.fbu_rt_total+", cnt: "+this._timing.fbu_rt_cnt+", avg: "+this._timing.fbu_rt_total/this._timing.fbu_rt_cnt),this._timing.fbu_rt_start=0}if(!e)return e}return this._onFBUComplete(this,{x:this._FBU.x,y:this._FBU.y,width:this._FBU.width,height:this._FBU.height,encoding:this._FBU.encoding,encodingName:this._encNames[this._FBU.encoding]}),!0}},Util.make_properties(RFB,[["target","wo","dom"],["focusContainer","wo","dom"],["encrypt","rw","bool"],["true_color","rw","bool"],["local_cursor","rw","bool"],["shared","rw","bool"],["view_only","rw","bool"],["xvp_password_sep","rw","str"],["disconnectTimeout","rw","int"],["wsProtocols","rw","arr"],["repeaterID","rw","str"],["viewportDrag","rw","bool"],["onUpdateState","rw","func"],["onPasswordRequired","rw","func"],["onClipboard","rw","func"],["onBell","rw","func"],["onFBUReceive","rw","func"],["onFBUComplete","rw","func"],["onFBResize","rw","func"],["onDesktopName","rw","func"],["onXvpInit","rw","func"]]),RFB.prototype.set_local_cursor=function(t){!t||t in{0:1,no:1,"false":1}?this._local_cursor=!1:this._display.get_cursor_uri()?this._local_cursor=!0:Util.Warn("Browser does not support local cursor")},RFB.prototype.get_display=function(){return this._display},RFB.prototype.get_keyboard=function(){return this._keyboard},RFB.prototype.get_mouse=function(){return this._mouse},RFB.messages={keyEvent:function(t,e){var a=[4];return a.push8(e),a.push16(0),a.push32(t),a},pointerEvent:function(t,e,a){var n=[5];return n.push8(a),n.push16(t),n.push16(e),n},clientCutText:function(t){var e=[6];e.push8(0),e.push8(0),e.push8(0),e.push32(t.length);for(var a=t.length,n=0;a>n;n++)e.push(t.charCodeAt(n));return e},pixelFormat:function(t,e,a){var n=[0];return n.push8(0),n.push8(0),n.push8(0),n.push8(8*t),n.push8(8*e),n.push8(0),n.push8(a?1:0),n.push16(255),n.push16(255),n.push16(255),n.push8(16),n.push8(8),n.push8(0),n.push8(0),n.push8(0),n.push8(0),n},clientEncodings:function(t,e,a){var n,s=[];for(n=0;n<t.length;n++)"Cursor"!==t[n][0]||e?"TIGHT"!==t[n][0]||a?s.push(t[n][1]):Util.Warn("Skipping tight as it is only supported with true color"):Util.Debug("Skipping Cursor pseudo-encoding");var i=[2];for(i.push8(0),i.push16(s.length),n=0;n<s.length;n++)i.push32(s[n]);return i},fbUpdateRequests:function(t,e,a){var n,s,i=[],r=t.cleanBox;r.w>0&&r.h>0&&(n="undefined"==typeof r.w?e:r.w,s="undefined"==typeof r.h?a:r.h,i=i.concat(RFB.messages.fbUpdateRequest(1,r.x,r.y,n,s)));for(var o=0;o<t.dirtyBoxes.length;o++){var l=t.dirtyBoxes[o];n="undefined"==typeof l.w?e:l.w,s="undefined"==typeof l.h?a:l.h,i=i.concat(RFB.messages.fbUpdateRequest(0,l.x,l.y,n,s))}return i},fbUpdateRequest:function(t,e,a,n,s){"undefined"==typeof e&&(e=0),"undefined"==typeof a&&(a=0);var i=[3];return i.push8(t),i.push16(e),i.push16(a),i.push16(n),i.push16(s),i}},RFB.genDES=function(t,e){for(var a=[],n=0;n<t.length;n++)a.push(t.charCodeAt(n));return new DES(a).encrypt(e)},RFB.extract_data_uri=function(t){return";base64,"+Base64.encode(t)},RFB.encodingHandlers={RAW:function(){if(0===this._FBU.lines&&(this._FBU.lines=this._FBU.height),this._FBU.bytes=this._FBU.width*this._fb_Bpp,this._sock.rQwait("RAW",this._FBU.bytes))return!1;var t=this._FBU.y+(this._FBU.height-this._FBU.lines),e=Math.min(this._FBU.lines,Math.floor(this._sock.rQlen()/(this._FBU.width*this._fb_Bpp)));return this._display.blitImage(this._FBU.x,t,this._FBU.width,e,this._sock.get_rQ(),this._sock.get_rQi()),this._sock.rQskipBytes(this._FBU.width*e*this._fb_Bpp),this._FBU.lines-=e,this._FBU.lines>0?this._FBU.bytes=this._FBU.width*this._fb_Bpp:(this._FBU.rects--,this._FBU.bytes=0),!0},COPYRECT:function(){return this._FBU.bytes=4,this._sock.rQwait("COPYRECT",4)?!1:(this._display.renderQ_push({type:"copy",old_x:this._sock.rQshift16(),old_y:this._sock.rQshift16(),x:this._FBU.x,y:this._FBU.y,width:this._FBU.width,height:this._FBU.height}),this._FBU.rects--,this._FBU.bytes=0,!0)},RRE:function(){var t;if(0===this._FBU.subrects){if(this._FBU.bytes=4+this._fb_Bpp,this._sock.rQwait("RRE",4+this._fb_Bpp))return!1;this._FBU.subrects=this._sock.rQshift32(),t=this._sock.rQshiftBytes(this._fb_Bpp),this._display.fillRect(this._FBU.x,this._FBU.y,this._FBU.width,this._FBU.height,t)}for(;this._FBU.subrects>0&&this._sock.rQlen()>=this._fb_Bpp+8;){t=this._sock.rQshiftBytes(this._fb_Bpp);var e=this._sock.rQshift16(),a=this._sock.rQshift16(),n=this._sock.rQshift16(),s=this._sock.rQshift16();this._display.fillRect(this._FBU.x+e,this._FBU.y+a,n,s,t),this._FBU.subrects--}if(this._FBU.subrects>0){var i=Math.min(this._rre_chunk_sz,this._FBU.subrects);this._FBU.bytes=(this._fb_Bpp+8)*i}else this._FBU.rects--,this._FBU.bytes=0;return!0},HEXTILE:function(){var t=this._sock.get_rQ(),e=this._sock.get_rQi();for(0===this._FBU.tiles&&(this._FBU.tiles_x=Math.ceil(this._FBU.width/16),this._FBU.tiles_y=Math.ceil(this._FBU.height/16),this._FBU.total_tiles=this._FBU.tiles_x*this._FBU.tiles_y,this._FBU.tiles=this._FBU.total_tiles);this._FBU.tiles>0;){if(this._FBU.bytes=1,this._sock.rQwait("HEXTILE subencoding",this._FBU.bytes))return!1;var a=t[e];if(a>30)return this._fail("Disconnected: illegal hextile subencoding "+a),!1;var n=0,s=this._FBU.total_tiles-this._FBU.tiles,i=s%this._FBU.tiles_x,r=Math.floor(s/this._FBU.tiles_x),o=this._FBU.x+16*i,l=this._FBU.y+16*r,c=Math.min(16,this._FBU.x+this._FBU.width-o),d=Math.min(16,this._FBU.y+this._FBU.height-l);if(1&a)this._FBU.bytes+=c*d*this._fb_Bpp;else if(2&a&&(this._FBU.bytes+=this._fb_Bpp),4&a&&(this._FBU.bytes+=this._fb_Bpp),8&a){if(this._FBU.bytes++,this._sock.rQwait("hextile subrects header",this._FBU.bytes))return!1;n=t[e+this._FBU.bytes-1],this._FBU.bytes+=16&a?n*(this._fb_Bpp+2):2*n}if(this._sock.rQwait("hextile",this._FBU.bytes))return!1;if(this._FBU.subencoding=t[e],e++,0===this._FBU.subencoding)1&this._FBU.lastsubencoding?Util.Debug("     Ignoring blank after RAW"):this._display.fillRect(o,l,c,d,this._FBU.background);else if(1&this._FBU.subencoding)this._display.blitImage(o,l,c,d,t,e),e+=this._FBU.bytes-1;else{if(2&this._FBU.subencoding&&(this._FBU.background=t.slice(e,e+this._fb_Bpp),e+=this._fb_Bpp),4&this._FBU.subencoding&&(this._FBU.foreground=t.slice(e,e+this._fb_Bpp),e+=this._fb_Bpp),this._display.startTile(o,l,c,d,this._FBU.background),8&this._FBU.subencoding){n=t[e],e++;for(var u=0;n>u;u++){var p;16&this._FBU.subencoding?(p=t.slice(e,e+this._fb_Bpp),e+=this._fb_Bpp):p=this._FBU.foreground;var h=t[e];e++;var f=h>>4,m=15&h,_=t[e];e++;var b=(_>>4)+1,v=(15&_)+1;this._display.subTile(f,m,b,v,p)}}this._display.finishTile()}this._sock.set_rQi(e),this._FBU.lastsubencoding=this._FBU.subencoding,this._FBU.bytes=0,this._FBU.tiles--}return 0===this._FBU.tiles&&this._FBU.rects--,!0},getTightCLength:function(t){var e=1,a=0;return a+=127&t[0],128&t[0]&&(e++,a+=(127&t[1])<<7,128&t[1]&&(e++,a+=t[2]<<14)),[e,a]},display_tight:function(t){if(1===this._fb_depth&&this._fail("Tight protocol handler only implements true color mode"),this._FBU.bytes=1,this._sock.rQwait("TIGHT compression-control",this._FBU.bytes))return!1;var e,a,n,s=0,i=-1,r=function(t){for(var e=0;4>e;e++)s>>e&1&&(this._FBU.zlibs[e].reset(),Util.Info("Reset zlib stream "+e));var a=this._FBU.zlibs[i].uncompress(t,0);return 0!==a.status&&Util.Error("Invalid data in zlib stream"),a.data}.bind(this),o=function(t,e,a,n,s){var i,r,o,l,c=[];if(2===e){var d=Math.floor((n+7)/8),u=Math.floor(n/8);for(r=0;s>r;r++){var p;for(i=0;u>i;i++)for(p=7;p>=0;p--)o=3*(r*n+8*i+7-p),l=3*(t[r*d+i]>>p&1),c[o]=a[l],c[o+1]=a[l+1],c[o+2]=a[l+2];for(p=7;p>=8-n%8;p--)o=3*(r*n+8*i+7-p),l=3*(t[r*d+i]>>p&1),c[o]=a[l],c[o+1]=a[l+1],c[o+2]=a[l+2]}}else for(r=0;s>r;r++)for(i=0;n>i;i++)o=3*(r*n+i),l=3*t[r*n+i],c[o]=a[l],c[o+1]=a[l+1],c[o+2]=a[l+2];return c}.bind(this),l=this._sock.get_rQ(),c=this._sock.get_rQi(),d=function(){var t=l[c+2]+1,s=t*this._fb_depth;if(this._FBU.bytes+=s,this._sock.rQwait("TIGHT palette "+e,this._FBU.bytes))return!1;var i=2>=t?1:8,d=Math.floor((this._FBU.width*i+7)/8),u=!1;if(d*this._FBU.height<12?(u=!0,a=[0,d*this._FBU.height]):a=RFB.encodingHandlers.getTightCLength(this._sock.rQslice(3+s,3+s+3)),this._FBU.bytes+=a[0]+a[1],this._sock.rQwait("TIGHT "+e,this._FBU.bytes))return!1;this._sock.rQskipBytes(3);var p=this._sock.rQshiftBytes(s);this._sock.rQskipBytes(a[0]),n=u?this._sock.rQshiftBytes(a[1]):r(this._sock.rQshiftBytes(a[1]));var h=o(n,t,p,this._FBU.width,this._FBU.height);return this._display.renderQ_push({type:"blitRgb",data:h,x:this._FBU.x,y:this._FBU.y,width:this._FBU.width,height:this._FBU.height}),!0}.bind(this),u=function(){var t=!1,s=this._FBU.width*this._FBU.height*this._fb_depth;return 12>s?(t=!0,a=[0,s]):a=RFB.encodingHandlers.getTightCLength(this._sock.rQslice(1,4)),this._FBU.bytes=1+a[0]+a[1],this._sock.rQwait("TIGHT "+e,this._FBU.bytes)?!1:(this._sock.rQshiftBytes(1+a[0]),n=t?this._sock.rQshiftBytes(a[1]):r(this._sock.rQshiftBytes(a[1])),this._display.renderQ_push({type:"blitRgb",data:n,x:this._FBU.x,y:this._FBU.y,width:this._FBU.width,height:this._FBU.height}),!0)}.bind(this),p=this._sock.rQpeek8();if(s=15&p,p>>=4,i=3&p,8===p)e="fill";else if(9===p)e="jpeg";else if(10===p)e="png";else if(4&p)e="filter";else{if(!(4>p))return this._fail("Illegal tight compression received, ctl: "+p);e="copy"}if(t&&("filter"===e||"copy"===e))return this._fail("filter/copy received in tightPNG mode");switch(e){case"fill":this._FBU.bytes+=this._fb_depth;break;case"jpeg":this._FBU.bytes+=3;break;case"png":this._FBU.bytes+=3;break;case"filter":this._FBU.bytes+=2;break;case"copy":}if(this._sock.rQwait("TIGHT "+e,this._FBU.bytes))return!1;switch(e){case"fill":this._sock.rQskip8();var h=this._sock.rQshiftBytes(this._fb_depth);this._display.renderQ_push({type:"fill",x:this._FBU.x,y:this._FBU.y,width:this._FBU.width,height:this._FBU.height,color:[h[2],h[1],h[0]]});break;case"png":case"jpeg":if(a=RFB.encodingHandlers.getTightCLength(this._sock.rQslice(1,4)),this._FBU.bytes=1+a[0]+a[1],this._sock.rQwait("TIGHT "+e,this._FBU.bytes))return!1;this._sock.rQskipBytes(1+a[0]);var f=new Image;f.src="data: image/"+e+RFB.extract_data_uri(this._sock.rQshiftBytes(a[1])),this._display.renderQ_push({type:"img",img:f,x:this._FBU.x,y:this._FBU.y}),f=null;break;case"filter":var m=l[c+1];if(1!==m)throw new Error("Unsupported tight subencoding received, filter: "+m);if(!d())return!1;break;case"copy":if(!u())return!1}return this._FBU.bytes=0,this._FBU.rects--,!0},TIGHT:function(){return this._encHandlers.display_tight(!1)},TIGHT_PNG:function(){return this._encHandlers.display_tight(!0)},last_rect:function(){return this._FBU.rects=0,!0},DesktopSize:function(){return Util.Debug(">> set_desktopsize"),this._fb_width=this._FBU.width,this._fb_height=this._FBU.height,this._onFBResize(this,this._fb_width,this._fb_height),this._display.resize(this._fb_width,this._fb_height),this._timing.fbu_rt_start=(new Date).getTime(),this._FBU.bytes=0,this._FBU.rects--,Util.Debug("<< set_desktopsize"),!0},Cursor:function(){Util.Debug(">> set_cursor");var t=this._FBU.x,e=this._FBU.y,a=this._FBU.width,n=this._FBU.height,s=a*n*this._fb_Bpp,i=Math.floor((a+7)/8)*n;return this._FBU.bytes=s+i,this._sock.rQwait("cursor encoding",this._FBU.bytes)?!1:(this._display.changeCursor(this._sock.rQshiftBytes(s),this._sock.rQshiftBytes(i),t,e,a,n),this._FBU.bytes=0,this._FBU.rects--,Util.Debug("<< set_cursor"),!0)},JPEG_quality_lo:function(){Util.Error("Server sent jpeg_quality pseudo-encoding")},compress_lo:function(){Util.Error("Server sent compress level pseudo-encoding")}}}(),define("vnc-rfb",["vnc-util"],function(){});var XK_VoidSymbol=16777215,XK_BackSpace=65288,XK_Tab=65289,XK_Linefeed=65290,XK_Clear=65291,XK_Return=65293,XK_Pause=65299,XK_Scroll_Lock=65300,XK_Sys_Req=65301,XK_Escape=65307,XK_Delete=65535,XK_Home=65360,XK_Left=65361,XK_Up=65362,XK_Right=65363,XK_Down=65364,XK_Prior=65365,XK_Page_Up=65365,XK_Next=65366,XK_Page_Down=65366,XK_End=65367,XK_Begin=65368,XK_Select=65376,XK_Print=65377,XK_Execute=65378,XK_Insert=65379,XK_Undo=65381,XK_Redo=65382,XK_Menu=65383,XK_Find=65384,XK_Cancel=65385,XK_Help=65386,XK_Break=65387,XK_Mode_switch=65406,XK_script_switch=65406,XK_Num_Lock=65407,XK_KP_Space=65408,XK_KP_Tab=65417,XK_KP_Enter=65421,XK_KP_F1=65425,XK_KP_F2=65426,XK_KP_F3=65427,XK_KP_F4=65428,XK_KP_Home=65429,XK_KP_Left=65430,XK_KP_Up=65431,XK_KP_Right=65432,XK_KP_Down=65433,XK_KP_Prior=65434,XK_KP_Page_Up=65434;XK_KP_Next=65435,XK_KP_Page_Down=65435,XK_KP_End=65436,XK_KP_Begin=65437,XK_KP_Insert=65438,XK_KP_Delete=65439,XK_KP_Equal=65469,XK_KP_Multiply=65450,XK_KP_Add=65451,XK_KP_Separator=65452,XK_KP_Subtract=65453,XK_KP_Decimal=65454,XK_KP_Divide=65455,XK_KP_0=65456,XK_KP_1=65457,XK_KP_2=65458,XK_KP_3=65459,XK_KP_4=65460,XK_KP_5=65461,XK_KP_6=65462,XK_KP_7=65463,XK_KP_8=65464,XK_KP_9=65465,XK_F1=65470,XK_F2=65471,XK_F3=65472,XK_F4=65473,XK_F5=65474,XK_F6=65475,XK_F7=65476,XK_F8=65477,XK_F9=65478,XK_F10=65479,XK_F11=65480,XK_L1=65480,XK_F12=65481,XK_L2=65481,XK_F13=65482,XK_L3=65482,XK_F14=65483,XK_L4=65483,XK_F15=65484,XK_L5=65484,XK_F16=65485,XK_L6=65485,XK_F17=65486,XK_L7=65486,XK_F18=65487,XK_L8=65487,XK_F19=65488,XK_L9=65488,XK_F20=65489,XK_L10=65489,XK_F21=65490,XK_R1=65490,XK_F22=65491,XK_R2=65491,XK_F23=65492,XK_R3=65492,XK_F24=65493,XK_R4=65493,XK_F25=65494,XK_R5=65494,XK_F26=65495,XK_R6=65495,XK_F27=65496,XK_R7=65496,XK_F28=65497,XK_R8=65497,XK_F29=65498,XK_R9=65498,XK_F30=65499,XK_R10=65499,XK_F31=65500,XK_R11=65500,XK_F32=65501,XK_R12=65501,XK_F33=65502,XK_R13=65502,XK_F34=65503,XK_R14=65503,XK_F35=65504,XK_R15=65504,XK_Shift_L=65505,XK_Shift_R=65506,XK_Control_L=65507,XK_Control_R=65508,XK_Caps_Lock=65509,XK_Shift_Lock=65510,XK_Meta_L=65511,XK_Meta_R=65512,XK_Alt_L=65513,XK_Alt_R=65514,XK_Super_L=65515,XK_Super_R=65516,XK_Hyper_L=65517,XK_Hyper_R=65518,XK_ISO_Level3_Shift=65027,XK_space=32,XK_exclam=33,XK_quotedbl=34,XK_numbersign=35,XK_dollar=36,XK_percent=37,XK_ampersand=38,XK_apostrophe=39,XK_quoteright=39,XK_parenleft=40,XK_parenright=41,XK_asterisk=42,XK_plus=43,XK_comma=44,XK_minus=45,XK_period=46,XK_slash=47,XK_0=48,XK_1=49,XK_2=50,XK_3=51,XK_4=52,XK_5=53,XK_6=54,XK_7=55,XK_8=56,XK_9=57,XK_colon=58,XK_semicolon=59,XK_less=60,XK_equal=61,XK_greater=62,XK_question=63,XK_at=64,XK_A=65,XK_B=66,XK_C=67,XK_D=68,XK_E=69,XK_F=70,XK_G=71,XK_H=72,XK_I=73,XK_J=74,XK_K=75,XK_L=76,XK_M=77,XK_N=78,XK_O=79,XK_P=80,XK_Q=81,XK_R=82,XK_S=83,XK_T=84,XK_U=85,XK_V=86,XK_W=87,XK_X=88,XK_Y=89,XK_Z=90,XK_bracketleft=91,XK_backslash=92,XK_bracketright=93,XK_asciicircum=94,XK_underscore=95,XK_grave=96,XK_quoteleft=96,XK_a=97,XK_b=98,XK_c=99,XK_d=100,XK_e=101,XK_f=102,XK_g=103,XK_h=104,XK_i=105,XK_j=106,XK_k=107,XK_l=108,XK_m=109,XK_n=110,XK_o=111,XK_p=112,XK_q=113,XK_r=114,XK_s=115,XK_t=116,XK_u=117,XK_v=118,XK_w=119,XK_x=120,XK_y=121,XK_z=122,XK_braceleft=123,XK_bar=124,XK_braceright=125,XK_asciitilde=126,XK_nobreakspace=160,XK_exclamdown=161,XK_cent=162,XK_sterling=163,XK_currency=164,XK_yen=165,XK_brokenbar=166,XK_section=167,XK_diaeresis=168,XK_copyright=169,XK_ordfeminine=170,XK_guillemotleft=171,XK_notsign=172,XK_hyphen=173,XK_registered=174,XK_macron=175,XK_degree=176,XK_plusminus=177,XK_twosuperior=178,XK_threesuperior=179,XK_acute=180,XK_mu=181,XK_paragraph=182,XK_periodcentered=183,XK_cedilla=184,XK_onesuperior=185,XK_masculine=186,XK_guillemotright=187,XK_onequarter=188,XK_onehalf=189,XK_threequarters=190,XK_questiondown=191,XK_Agrave=192,XK_Aacute=193,XK_Acircumflex=194,XK_Atilde=195,XK_Adiaeresis=196,XK_Aring=197,XK_AE=198,XK_Ccedilla=199,XK_Egrave=200,XK_Eacute=201,XK_Ecircumflex=202,XK_Ediaeresis=203,XK_Igrave=204,XK_Iacute=205,XK_Icircumflex=206,XK_Idiaeresis=207,XK_ETH=208,XK_Eth=208,XK_Ntilde=209,XK_Ograve=210,XK_Oacute=211,XK_Ocircumflex=212,XK_Otilde=213,XK_Odiaeresis=214,XK_multiply=215,XK_Oslash=216,XK_Ooblique=216,XK_Ugrave=217,XK_Uacute=218,XK_Ucircumflex=219,XK_Udiaeresis=220,XK_Yacute=221,XK_THORN=222,XK_Thorn=222,XK_ssharp=223,XK_agrave=224,XK_aacute=225,XK_acircumflex=226,XK_atilde=227,XK_adiaeresis=228,XK_aring=229,XK_ae=230,XK_ccedilla=231,XK_egrave=232,XK_eacute=233,XK_ecircumflex=234,XK_ediaeresis=235,XK_igrave=236,XK_iacute=237,XK_icircumflex=238,XK_idiaeresis=239,XK_eth=240,XK_ntilde=241,XK_ograve=242,XK_oacute=243,XK_ocircumflex=244,XK_otilde=245,XK_odiaeresis=246,XK_division=247,XK_oslash=248,XK_ooblique=248,XK_ugrave=249,XK_uacute=250,XK_ucircumflex=251,XK_udiaeresis=252,XK_yacute=253,XK_thorn=254,XK_ydiaeresis=255,define("vnc-keysym",["vnc-util"],function(){}),define("utils/vnc",["require","vnc-util","vnc-webutil","vnc-base64","vnc-websock","vnc-des","vnc-keysymdef","vnc-keyboard","vnc-input","vnc-display","vnc-jsunzip","vnc-rfb","vnc-keysym","sunstone-config"],function(t){function e(){return d}function a(){d=!0}function n(){d=!1}function s(t){l=new RFB({target:$D("VNC_canvas"),encrypt:"yes"==c.vncWSS,true_color:!0,local_cursor:!0,shared:!0,onUpdateState:o});var e=window.location.hostname,a=c.vncProxyPort,n=t.password,s=t.token,i=t.vm_name,r="?token="+s,d="vnc?";d+="host="+e,d+="&port="+a,d+="&token="+s,d+="&password="+n,d+="&encrypt="+c.vncWSS,d+="&title="+i,$("#open_in_a_new_window").attr("href",d),l.connect(e,a,n,r)}function i(){l&&l.disconnect()}function r(){l&&rfb.sendCtrlAltDel()}function o(t,e,a,n){var s,i,r;switch(s=$D("VNC_status"),i=$D("VNC_status_bar"),r=$D("sendCtrlAltDelButton"),e){case"failed":level="error";break;case"fatal":level="error";break;case"normal":level="normal";break;case"disconnected":level="normal";break;case"loaded":level="normal";break;default:level="warn"}r.disabled="normal"===e?!1:!0,"undefined"!=typeof n&&(i.setAttribute("class","noVNC_status_"+level),s.innerHTML=n)}INCLUDE_URI="bower_components/no-vnc/include/",t("vnc-util"),t("vnc-webutil"),t("vnc-base64"),t("vnc-websock"),t("vnc-des"),t("vnc-keysymdef"),t("vnc-keyboard"),t("vnc-input"),t("vnc-display"),t("vnc-jsunzip"),t("vnc-rfb"),t("vnc-keysym");var l,c=t("sunstone-config"),d=!1;return{lockStatus:e,lock:a,unlock:n,vncCallback:s,disconnect:i,sendCtrlAltDel:r}}),SpiceConn.prototype={send_hdr:function(){var t=new SpiceLinkHeader,e=new SpiceLinkMess;e.connection_id=this.connection_id,e.channel_type=this.type,e.common_caps.push(1<<SPICE_COMMON_CAP_PROTOCOL_AUTH_SELECTION|1<<SPICE_COMMON_CAP_MINI_HEADER),e.channel_type==SPICE_CHANNEL_PLAYBACK?e.channel_caps.push(1<<SPICE_PLAYBACK_CAP_OPUS):e.channel_type==SPICE_CHANNEL_MAIN&&e.channel_caps.push(1<<SPICE_MAIN_CAP_AGENT_CONNECTED_TOKENS),t.size=e.buffer_size();var a=new ArrayBuffer(t.buffer_size()+e.buffer_size());t.to_buffer(a),e.to_buffer(a,t.buffer_size()),DEBUG>1&&console.log("Sending header:"),DEBUG>2&&hexdump_buffer(a),this.ws.send(a)},send_ticket:function(t){var e=new SpiceLinkAuthTicket;e.auth_mechanism=SPICE_COMMON_CAP_AUTH_SPICE,e.encrypted_data=t;var a=new ArrayBuffer(e.buffer_size());e.to_buffer(a),DEBUG>1&&console.log("Sending ticket:"),DEBUG>2&&hexdump_buffer(a),this.ws.send(a)},send_msg:function(t){var e=new ArrayBuffer(t.buffer_size());t.to_buffer(e),this.messages_sent++,DEBUG>0&&console.log(">> hdr "+this.channel_type()+" type "+t.type+" size "+e.byteLength),DEBUG>2&&hexdump_buffer(e),this.ws.send(e)},process_inbound:function(t,e){if(DEBUG>2&&console.log(this.type+": processing message of size "+t.byteLength+"; state is "+this.state),"ready"==this.state)if(void 0==e){var a=new SpiceMiniData(t);a.type>500&&alert("Something has gone very wrong; we think we have message of type "+a.type),0==a.size?(this.process_message(a),this.wire_reader.request(SpiceMiniData.prototype.buffer_size())):(this.wire_reader.request(a.size),this.wire_reader.save_header(a))}else e.data=t,this.process_message(e),this.wire_reader.request(SpiceMiniData.prototype.buffer_size()),this.wire_reader.save_header(void 0);else if("start"==this.state)if(this.reply_hdr=new SpiceLinkHeader(t),this.reply_hdr.magic!=SPICE_MAGIC){this.state="error";var n=new Error("Error: magic mismatch: "+this.reply_hdr.magic);this.report_error(n)}else this.wire_reader.request(this.reply_hdr.size),this.state="link";else if("link"==this.state)if(this.reply_link=new SpiceLinkReply(t),this.reply_link.error){this.state="error";var n=new Error("Error: reply link error "+this.reply_link.error);this.report_error(n)}else this.send_ticket(rsa_encrypt(this.reply_link.pub_key,this.password+String.fromCharCode(0))),this.state="ticket",this.wire_reader.request(SpiceLinkAuthReply.prototype.buffer_size());else if("ticket"==this.state)if(this.auth_reply=new SpiceLinkAuthReply(t),this.auth_reply.auth_code==SPICE_LINK_ERR_OK){if(DEBUG>0&&console.log(this.type+": Connected"),this.type==SPICE_CHANNEL_DISPLAY){var s=new SpiceMsgcDisplayInit,i=new SpiceMiniData;i.build_msg(SPICE_MSGC_DISPLAY_INIT,s),DEBUG>0&&console.log("Request display init"),this.send_msg(i)}this.state="ready",this.wire_reader.request(SpiceMiniData.prototype.buffer_size()),this.timeout&&(window.clearTimeout(this.timeout),delete this.timeout)}else{if(this.state="error",this.auth_reply.auth_code==SPICE_LINK_ERR_PERMISSION_DENIED)var n=new Error("Permission denied.");else var n=new Error("Unexpected link error "+this.auth_reply.auth_code);this.report_error(n)}},process_common_messages:function(t){if(t.type==SPICE_MSG_SET_ACK){var e=new SpiceMsgSetAck(t.data);this.ack_window=e.window,DEBUG>1&&console.log(this.type+": set ack to "+e.window),this.msgs_until_ack=this.ack_window;var a=new SpiceMsgcAckSync(e),n=new SpiceMiniData;return n.build_msg(SPICE_MSGC_ACK_SYNC,a),this.send_msg(n),!0}if(t.type==SPICE_MSG_PING){DEBUG>1&&console.log("ping!");var s=new SpiceMiniData;return s.type=SPICE_MSGC_PONG,t.data&&(s.data=t.data.slice(0,12)),s.size=s.buffer_size(),this.send_msg(s),!0}if(t.type==SPICE_MSG_NOTIFY){var i=new SpiceMsgNotify(t.data);return i.severity==SPICE_NOTIFY_SEVERITY_ERROR?this.log_err(i.message):i.severity==SPICE_NOTIFY_SEVERITY_WARN?this.log_warn(i.message):this.log_info(i.message),!0}return!1},process_message:function(t){var e;if(DEBUG>0&&console.log("<< hdr "+this.channel_type()+" type "+t.type+" size "+(t.data&&t.data.byteLength)),e=this.process_common_messages(t),e||(this.process_channel_message?(e=this.process_channel_message(t),e||this.log_warn(this.type+": Unknown message type "+t.type+"!")):this.log_err(this.type+": No message handlers for this channel; message "+t.type)),void 0!==this.msgs_until_ack&&this.ack_window&&(this.msgs_until_ack--,this.msgs_until_ack<=0)){this.msgs_until_ack=this.ack_window;var a=new SpiceMiniData;a.type=SPICE_MSGC_ACK,this.send_msg(a),DEBUG>1&&console.log(this.type+": sent ack")}return e},channel_type:function(){return this.type==SPICE_CHANNEL_MAIN?"main":this.type==SPICE_CHANNEL_DISPLAY?"display":this.type==SPICE_CHANNEL_INPUTS?"inputs":this.type==SPICE_CHANNEL_CURSOR?"cursor":"unknown-"+this.type},log_info:function(){var t=Array.prototype.join.call(arguments," ");if(console.log(t),this.message_id){var e=document.createElement("p");e.appendChild(document.createTextNode(t)),e.className+="spice-message-info",document.getElementById(this.message_id).appendChild(e)}},log_warn:function(){var t=Array.prototype.join.call(arguments," ");if(console.log("WARNING: "+t),this.message_id){var e=document.createElement("p");e.appendChild(document.createTextNode(t)),e.className+="spice-message-warning",document.getElementById(this.message_id).appendChild(e)}},log_err:function(){var t=Array.prototype.join.call(arguments," ");if(console.log("ERROR: "+t),this.message_id){var e=document.createElement("p");e.appendChild(document.createTextNode(t)),e.className+="spice-message-error",document.getElementById(this.message_id).appendChild(e)}},known_unimplemented:function(t,e){if(!this.warnings[t]||DEBUG>1){var a="";1>=DEBUG&&(a=" [ further notices suppressed ]"),this.log_warn("Unimplemented function "+t+"("+e+")"+a),this.warnings[t]=!0}},report_error:function(t){if(this.log_err(t.toString()),void 0==this.onerror)throw t;this.onerror(t)},report_success:function(t){void 0!=this.onsuccess&&this.onsuccess(t)},cleanup:function(){this.timeout&&(window.clearTimeout(this.timeout),delete this.timeout),this.ws&&(this.ws.close(),this.ws=void 0)},handle_timeout:function(){var t=new Error("Connection timed out.");this.report_error(t)}},define("spice-spiceconn",function(){}),ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=SpiceArrayBufferSlice,console.log("WARNING:  ArrayBuffer.slice() is missing; we are extending ArrayBuffer to compensate")),define("spice-spicearraybuffer",function(){});var SPICE_MAGIC="REDQ",SPICE_VERSION_MAJOR=2,SPICE_VERSION_MINOR=2,SPICE_CONNECT_TIMEOUT=3e4,SPICE_COMMON_CAP_PROTOCOL_AUTH_SELECTION=0,SPICE_COMMON_CAP_AUTH_SPICE=1,SPICE_COMMON_CAP_AUTH_SASL=2,SPICE_COMMON_CAP_MINI_HEADER=3,SPICE_TICKET_KEY_PAIR_LENGTH=1024,SPICE_TICKET_PUBKEY_BYTES=SPICE_TICKET_KEY_PAIR_LENGTH/8+34,SPICE_LINK_ERR_OK=0,SPICE_LINK_ERR_ERROR=1,SPICE_LINK_ERR_INVALID_MAGIC=2,SPICE_LINK_ERR_INVALID_DATA=3,SPICE_LINK_ERR_VERSION_MISMATCH=4,SPICE_LINK_ERR_NEED_SECURED=5,SPICE_LINK_ERR_NEED_UNSECURED=6,SPICE_LINK_ERR_PERMISSION_DENIED=7,SPICE_LINK_ERR_BAD_CONNECTION_ID=8,SPICE_LINK_ERR_CHANNEL_NOT_AVAILABLE=9,SPICE_MSG_MIGRATE=1,SPICE_MSG_MIGRATE_DATA=2,SPICE_MSG_SET_ACK=3,SPICE_MSG_PING=4,SPICE_MSG_WAIT_FOR_CHANNELS=5,SPICE_MSG_DISCONNECTING=6,SPICE_MSG_NOTIFY=7,SPICE_MSG_LIST=8,SPICE_MSG_MAIN_MIGRATE_BEGIN=101,SPICE_MSG_MAIN_MIGRATE_CANCEL=102,SPICE_MSG_MAIN_INIT=103,SPICE_MSG_MAIN_CHANNELS_LIST=104,SPICE_MSG_MAIN_MOUSE_MODE=105,SPICE_MSG_MAIN_MULTI_MEDIA_TIME=106,SPICE_MSG_MAIN_AGENT_CONNECTED=107,SPICE_MSG_MAIN_AGENT_DISCONNECTED=108,SPICE_MSG_MAIN_AGENT_DATA=109,SPICE_MSG_MAIN_AGENT_TOKEN=110,SPICE_MSG_MAIN_MIGRATE_SWITCH_HOST=111,SPICE_MSG_MAIN_MIGRATE_END=112,SPICE_MSG_MAIN_NAME=113,SPICE_MSG_MAIN_UUID=114,SPICE_MSG_MAIN_AGENT_CONNECTED_TOKENS=115,SPICE_MSG_MAIN_MIGRATE_BEGIN_SEAMLESS=116,SPICE_MSG_MAIN_MIGRATE_DST_SEAMLESS_ACK=117,SPICE_MSG_MAIN_MIGRATE_DST_SEAMLESS_NACK=118,SPICE_MSG_END_MAIN=119,SPICE_MSGC_ACK_SYNC=1,SPICE_MSGC_ACK=2,SPICE_MSGC_PONG=3,SPICE_MSGC_MIGRATE_FLUSH_MARK=4,SPICE_MSGC_MIGRATE_DATA=5,SPICE_MSGC_DISCONNECTING=6,SPICE_MSGC_MAIN_CLIENT_INFO=101,SPICE_MSGC_MAIN_MIGRATE_CONNECTED=102,SPICE_MSGC_MAIN_MIGRATE_CONNECT_ERROR=103,SPICE_MSGC_MAIN_ATTACH_CHANNELS=104,SPICE_MSGC_MAIN_MOUSE_MODE_REQUEST=105,SPICE_MSGC_MAIN_AGENT_START=106,SPICE_MSGC_MAIN_AGENT_DATA=107,SPICE_MSGC_MAIN_AGENT_TOKEN=108,SPICE_MSGC_MAIN_MIGRATE_END=109,SPICE_MSGC_END_MAIN=110,SPICE_MSG_DISPLAY_MODE=101,SPICE_MSG_DISPLAY_MARK=102,SPICE_MSG_DISPLAY_RESET=103,SPICE_MSG_DISPLAY_COPY_BITS=104,SPICE_MSG_DISPLAY_INVAL_LIST=105,SPICE_MSG_DISPLAY_INVAL_ALL_PIXMAPS=106,SPICE_MSG_DISPLAY_INVAL_PALETTE=107,SPICE_MSG_DISPLAY_INVAL_ALL_PALETTES=108,SPICE_MSG_DISPLAY_STREAM_CREATE=122,SPICE_MSG_DISPLAY_STREAM_DATA=123,SPICE_MSG_DISPLAY_STREAM_CLIP=124,SPICE_MSG_DISPLAY_STREAM_DESTROY=125,SPICE_MSG_DISPLAY_STREAM_DESTROY_ALL=126,SPICE_MSG_DISPLAY_DRAW_FILL=302,SPICE_MSG_DISPLAY_DRAW_OPAQUE=303,SPICE_MSG_DISPLAY_DRAW_COPY=304,SPICE_MSG_DISPLAY_DRAW_BLEND=305,SPICE_MSG_DISPLAY_DRAW_BLACKNESS=306,SPICE_MSG_DISPLAY_DRAW_WHITENESS=307,SPICE_MSG_DISPLAY_DRAW_INVERS=308,SPICE_MSG_DISPLAY_DRAW_ROP3=309,SPICE_MSG_DISPLAY_DRAW_STROKE=310,SPICE_MSG_DISPLAY_DRAW_TEXT=311,SPICE_MSG_DISPLAY_DRAW_TRANSPARENT=312,SPICE_MSG_DISPLAY_DRAW_ALPHA_BLEND=313,SPICE_MSG_DISPLAY_SURFACE_CREATE=314,SPICE_MSG_DISPLAY_SURFACE_DESTROY=315,SPICE_MSGC_DISPLAY_INIT=101,SPICE_MSG_INPUTS_INIT=101,SPICE_MSG_INPUTS_KEY_MODIFIERS=102,SPICE_MSG_INPUTS_MOUSE_MOTION_ACK=111,SPICE_MSGC_INPUTS_KEY_DOWN=101,SPICE_MSGC_INPUTS_KEY_UP=102,SPICE_MSGC_INPUTS_KEY_MODIFIERS=103,SPICE_MSGC_INPUTS_MOUSE_MOTION=111,SPICE_MSGC_INPUTS_MOUSE_POSITION=112,SPICE_MSGC_INPUTS_MOUSE_PRESS=113,SPICE_MSGC_INPUTS_MOUSE_RELEASE=114,SPICE_MSG_CURSOR_INIT=101,SPICE_MSG_CURSOR_RESET=102,SPICE_MSG_CURSOR_SET=103,SPICE_MSG_CURSOR_MOVE=104,SPICE_MSG_CURSOR_HIDE=105,SPICE_MSG_CURSOR_TRAIL=106,SPICE_MSG_CURSOR_INVAL_ONE=107,SPICE_MSG_CURSOR_INVAL_ALL=108,SPICE_MSG_PLAYBACK_DATA=101,SPICE_MSG_PLAYBACK_MODE=102,SPICE_MSG_PLAYBACK_START=103,SPICE_MSG_PLAYBACK_STOP=104,SPICE_MSG_PLAYBACK_VOLUME=105,SPICE_MSG_PLAYBACK_MUTE=106,SPICE_MSG_PLAYBACK_LATENCY=107,SPICE_PLAYBACK_CAP_CELT_0_5_1=0,SPICE_PLAYBACK_CAP_VOLUME=1,SPICE_PLAYBACK_CAP_LATENCY=2,SPICE_PLAYBACK_CAP_OPUS=3,SPICE_MAIN_CAP_SEMI_SEAMLESS_MIGRATE=0,SPICE_MAIN_CAP_NAME_AND_UUID=1,SPICE_MAIN_CAP_AGENT_CONNECTED_TOKENS=2,SPICE_MAIN_CAP_SEAMLESS_MIGRATE=3,SPICE_AUDIO_DATA_MODE_INVALID=0,SPICE_AUDIO_DATA_MODE_RAW=1,SPICE_AUDIO_DATA_MODE_CELT_0_5_1=2,SPICE_AUDIO_DATA_MODE_OPUS=3,SPICE_AUDIO_FMT_INVALID=0,SPICE_AUDIO_FMT_S16=1,SPICE_CHANNEL_MAIN=1,SPICE_CHANNEL_DISPLAY=2,SPICE_CHANNEL_INPUTS=3,SPICE_CHANNEL_CURSOR=4,SPICE_CHANNEL_PLAYBACK=5,SPICE_CHANNEL_RECORD=6,SPICE_CHANNEL_TUNNEL=7,SPICE_CHANNEL_SMARTCARD=8,SPICE_CHANNEL_USBREDIR=9,SPICE_SURFACE_FLAGS_PRIMARY=1,SPICE_NOTIFY_SEVERITY_INFO=0,SPICE_NOTIFY_SEVERITY_WARN=1,SPICE_NOTIFY_SEVERITY_ERROR=2,SPICE_MOUSE_MODE_SERVER=1,SPICE_MOUSE_MODE_CLIENT=2,SPICE_MOUSE_MODE_MASK=3,SPICE_CLIP_TYPE_NONE=0,SPICE_CLIP_TYPE_RECTS=1,SPICE_IMAGE_TYPE_BITMAP=0,SPICE_IMAGE_TYPE_QUIC=1,SPICE_IMAGE_TYPE_RESERVED=2,SPICE_IMAGE_TYPE_LZ_PLT=100,SPICE_IMAGE_TYPE_LZ_RGB=101,SPICE_IMAGE_TYPE_GLZ_RGB=102,SPICE_IMAGE_TYPE_FROM_CACHE=103,SPICE_IMAGE_TYPE_SURFACE=104,SPICE_IMAGE_TYPE_JPEG=105,SPICE_IMAGE_TYPE_FROM_CACHE_LOSSLESS=106,SPICE_IMAGE_TYPE_ZLIB_GLZ_RGB=107,SPICE_IMAGE_TYPE_JPEG_ALPHA=108,SPICE_IMAGE_FLAGS_CACHE_ME=1,SPICE_IMAGE_FLAGS_HIGH_BITS_SET=2,SPICE_IMAGE_FLAGS_CACHE_REPLACE_ME=4,SPICE_BITMAP_FLAGS_PAL_CACHE_ME=1,SPICE_BITMAP_FLAGS_PAL_FROM_CACHE=2,SPICE_BITMAP_FLAGS_TOP_DOWN=4,SPICE_BITMAP_FLAGS_MASK=7,SPICE_BITMAP_FMT_INVALID=0,SPICE_BITMAP_FMT_1BIT_LE=1,SPICE_BITMAP_FMT_1BIT_BE=2,SPICE_BITMAP_FMT_4BIT_LE=3,SPICE_BITMAP_FMT_4BIT_BE=4,SPICE_BITMAP_FMT_8BIT=5,SPICE_BITMAP_FMT_16BIT=6,SPICE_BITMAP_FMT_24BIT=7,SPICE_BITMAP_FMT_32BIT=8,SPICE_BITMAP_FMT_RGBA=9,SPICE_CURSOR_FLAGS_NONE=1,SPICE_CURSOR_FLAGS_CACHE_ME=2,SPICE_CURSOR_FLAGS_FROM_CACHE=4,SPICE_CURSOR_FLAGS_MASK=7,SPICE_MOUSE_BUTTON_MASK_LEFT=1,SPICE_MOUSE_BUTTON_MASK_MIDDLE=2,SPICE_MOUSE_BUTTON_MASK_RIGHT=4,SPICE_MOUSE_BUTTON_MASK_MASK=7,SPICE_MOUSE_BUTTON_INVALID=0,SPICE_MOUSE_BUTTON_LEFT=1,SPICE_MOUSE_BUTTON_MIDDLE=2,SPICE_MOUSE_BUTTON_RIGHT=3,SPICE_MOUSE_BUTTON_UP=4,SPICE_MOUSE_BUTTON_DOWN=5,SPICE_BRUSH_TYPE_NONE=0,SPICE_BRUSH_TYPE_SOLID=1,SPICE_BRUSH_TYPE_PATTERN=2,SPICE_SURFACE_FMT_INVALID=0,SPICE_SURFACE_FMT_1_A=1,SPICE_SURFACE_FMT_8_A=8,SPICE_SURFACE_FMT_16_555=16,SPICE_SURFACE_FMT_32_xRGB=32,SPICE_SURFACE_FMT_16_565=80,SPICE_SURFACE_FMT_32_ARGB=96,SPICE_ROPD_INVERS_SRC=1,SPICE_ROPD_INVERS_BRUSH=2,SPICE_ROPD_INVERS_DEST=4,SPICE_ROPD_OP_PUT=8,SPICE_ROPD_OP_OR=16,SPICE_ROPD_OP_AND=32,SPICE_ROPD_OP_XOR=64,SPICE_ROPD_OP_BLACKNESS=128,SPICE_ROPD_OP_WHITENESS=256,SPICE_ROPD_OP_INVERS=512,SPICE_ROPD_INVERS_RES=1024,SPICE_ROPD_MASK=2047,LZ_IMAGE_TYPE_INVALID=0,LZ_IMAGE_TYPE_PLT1_LE=1,LZ_IMAGE_TYPE_PLT1_BE=2,LZ_IMAGE_TYPE_PLT4_LE=3,LZ_IMAGE_TYPE_PLT4_BE=4,LZ_IMAGE_TYPE_PLT8=5,LZ_IMAGE_TYPE_RGB16=6,LZ_IMAGE_TYPE_RGB24=7,LZ_IMAGE_TYPE_RGB32=8,LZ_IMAGE_TYPE_RGBA=9,LZ_IMAGE_TYPE_XXXA=10,QUIC_IMAGE_TYPE_INVALID=0,QUIC_IMAGE_TYPE_GRAY=1,QUIC_IMAGE_TYPE_RGB16=2,QUIC_IMAGE_TYPE_RGB24=3,QUIC_IMAGE_TYPE_RGB32=4,QUIC_IMAGE_TYPE_RGBA=5,SPICE_INPUT_MOTION_ACK_BUNCH=4,SPICE_CURSOR_TYPE_ALPHA=0,SPICE_CURSOR_TYPE_MONO=1,SPICE_CURSOR_TYPE_COLOR4=2,SPICE_CURSOR_TYPE_COLOR8=3,SPICE_CURSOR_TYPE_COLOR16=4,SPICE_CURSOR_TYPE_COLOR24=5,SPICE_CURSOR_TYPE_COLOR32=6,SPICE_VIDEO_CODEC_TYPE_MJPEG=1,VD_AGENT_PROTOCOL=1,VD_AGENT_MAX_DATA_SIZE=2048,VD_AGENT_MOUSE_STATE=1,VD_AGENT_MONITORS_CONFIG=2,VD_AGENT_REPLY=3,VD_AGENT_CLIPBOARD=4,VD_AGENT_DISPLAY_CONFIG=5,VD_AGENT_ANNOUNCE_CAPABILITIES=6,VD_AGENT_CLIPBOARD_GRAB=7,VD_AGENT_CLIPBOARD_REQUEST=8,VD_AGENT_CLIPBOARD_RELEASE=9,VD_AGENT_FILE_XFER_START=10,VD_AGENT_FILE_XFER_STATUS=11,VD_AGENT_FILE_XFER_DATA=12,VD_AGENT_CLIENT_DISCONNECTED=13,VD_AGENT_MAX_CLIPBOARD=14,VD_AGENT_CAP_MOUSE_STATE=0,VD_AGENT_CAP_MONITORS_CONFIG=1,VD_AGENT_CAP_REPLY=2,VD_AGENT_CAP_CLIPBOARD=3,VD_AGENT_CAP_DISPLAY_CONFIG=4,VD_AGENT_CAP_CLIPBOARD_BY_DEMAND=5,VD_AGENT_CAP_CLIPBOARD_SELECTION=6,VD_AGENT_CAP_SPARSE_MONITORS_CONFIG=7,VD_AGENT_CAP_GUEST_LINEEND_LF=8,VD_AGENT_CAP_GUEST_LINEEND_CRLF=9,VD_AGENT_CAP_MAX_CLIPBOARD=10,VD_AGENT_END_CAP=11,VD_AGENT_FILE_XFER_STATUS_CAN_SEND_DATA=0,VD_AGENT_FILE_XFER_STATUS_CANCELLED=1,VD_AGENT_FILE_XFER_STATUS_ERROR=2,VD_AGENT_FILE_XFER_STATUS_SUCCESS=3;
define("spice-enums",function(){});var KEY_Escape=1,KEY_1=2,KEY_2=3,KEY_3=4,KEY_4=5,KEY_5=6,KEY_6=7,KEY_7=8,KEY_8=9,KEY_9=10,KEY_0=11,KEY_Minus=12,KEY_Equal=13,KEY_BackSpace=14,KEY_Tab=15,KEY_Q=16,KEY_W=17,KEY_E=18,KEY_R=19,KEY_T=20,KEY_Y=21,KEY_U=22,KEY_I=23,KEY_O=24,KEY_P=25,KEY_LBrace=26,KEY_RBrace=27,KEY_Enter=28,KEY_LCtrl=29,KEY_A=30,KEY_S=31,KEY_D=32,KEY_F=33,KEY_G=34,KEY_H=35,KEY_J=36,KEY_K=37,KEY_L=38,KEY_SemiColon=39,KEY_Quote=40,KEY_Tilde=41,KEY_ShiftL=42,KEY_BSlash=43,KEY_Z=44,KEY_X=45,KEY_C=46,KEY_V=47,KEY_B=48,KEY_N=49,KEY_M=50,KEY_Comma=51,KEY_Period=52,KEY_Slash=53,KEY_ShiftR=54,KEY_KP_Multiply=55,KEY_Alt=56,KEY_Space=57,KEY_CapsLock=58,KEY_F1=59,KEY_F2=60,KEY_F3=61,KEY_F4=62,KEY_F5=63,KEY_F6=64,KEY_F7=65,KEY_F8=66,KEY_F9=67,KEY_F10=68,KEY_NumLock=69,KEY_ScrollLock=70,KEY_KP_7=71,KEY_KP_8=72,KEY_KP_9=73,KEY_KP_Minus=74,KEY_KP_4=75,KEY_KP_5=76,KEY_KP_6=77,KEY_KP_Plus=78,KEY_KP_1=79,KEY_KP_2=80,KEY_KP_3=81,KEY_KP_0=82,KEY_KP_Decimal=83,KEY_SysReqest=84,KEY_Less=86,KEY_F11=87,KEY_F12=88,KEY_Prefix0=96,KEY_Prefix1=97;define("spice-atKeynames",function(){});var DEBUG=0,DUMP_DRAWS=!1,DUMP_CANVASES=!1,common_scanmap=[];common_scanmap["Q".charCodeAt(0)]=KEY_Q,common_scanmap["W".charCodeAt(0)]=KEY_W,common_scanmap["E".charCodeAt(0)]=KEY_E,common_scanmap["R".charCodeAt(0)]=KEY_R,common_scanmap["T".charCodeAt(0)]=KEY_T,common_scanmap["Y".charCodeAt(0)]=KEY_Y,common_scanmap["U".charCodeAt(0)]=KEY_U,common_scanmap["I".charCodeAt(0)]=KEY_I,common_scanmap["O".charCodeAt(0)]=KEY_O,common_scanmap["P".charCodeAt(0)]=KEY_P,common_scanmap["A".charCodeAt(0)]=KEY_A,common_scanmap["S".charCodeAt(0)]=KEY_S,common_scanmap["D".charCodeAt(0)]=KEY_D,common_scanmap["F".charCodeAt(0)]=KEY_F,common_scanmap["G".charCodeAt(0)]=KEY_G,common_scanmap["H".charCodeAt(0)]=KEY_H,common_scanmap["J".charCodeAt(0)]=KEY_J,common_scanmap["K".charCodeAt(0)]=KEY_K,common_scanmap["L".charCodeAt(0)]=KEY_L,common_scanmap["Z".charCodeAt(0)]=KEY_Z,common_scanmap["X".charCodeAt(0)]=KEY_X,common_scanmap["C".charCodeAt(0)]=KEY_C,common_scanmap["V".charCodeAt(0)]=KEY_V,common_scanmap["B".charCodeAt(0)]=KEY_B,common_scanmap["N".charCodeAt(0)]=KEY_N,common_scanmap["M".charCodeAt(0)]=KEY_M,common_scanmap[" ".charCodeAt(0)]=KEY_Space,common_scanmap[13]=KEY_Enter,common_scanmap[27]=KEY_Escape,common_scanmap[8]=KEY_BackSpace,common_scanmap[9]=KEY_Tab,common_scanmap[16]=KEY_ShiftL,common_scanmap[17]=KEY_LCtrl,common_scanmap[18]=KEY_Alt,common_scanmap[20]=KEY_CapsLock,common_scanmap[144]=KEY_NumLock,common_scanmap[112]=KEY_F1,common_scanmap[113]=KEY_F2,common_scanmap[114]=KEY_F3,common_scanmap[115]=KEY_F4,common_scanmap[116]=KEY_F5,common_scanmap[117]=KEY_F6,common_scanmap[118]=KEY_F7,common_scanmap[119]=KEY_F8,common_scanmap[120]=KEY_F9,common_scanmap[121]=KEY_F10,common_scanmap[122]=KEY_F11,common_scanmap[123]=KEY_F12,common_scanmap[42]=99,common_scanmap[19]=101,common_scanmap[111]=57397,common_scanmap[106]=57399,common_scanmap[36]=57415,common_scanmap[38]=57416,common_scanmap[33]=57417,common_scanmap[37]=57419,common_scanmap[39]=57421,common_scanmap[35]=57423,common_scanmap[40]=57424,common_scanmap[34]=57425,common_scanmap[45]=57426,common_scanmap[46]=57427,common_scanmap[44]=10807,common_scanmap["1".charCodeAt(0)]=KEY_1,common_scanmap["2".charCodeAt(0)]=KEY_2,common_scanmap["3".charCodeAt(0)]=KEY_3,common_scanmap["4".charCodeAt(0)]=KEY_4,common_scanmap["5".charCodeAt(0)]=KEY_5,common_scanmap["6".charCodeAt(0)]=KEY_6,common_scanmap["7".charCodeAt(0)]=KEY_7,common_scanmap["8".charCodeAt(0)]=KEY_8,common_scanmap["9".charCodeAt(0)]=KEY_9,common_scanmap["0".charCodeAt(0)]=KEY_0,common_scanmap[145]=KEY_ScrollLock,common_scanmap[103]=KEY_KP_7,common_scanmap[104]=KEY_KP_8,common_scanmap[105]=KEY_KP_9,common_scanmap[100]=KEY_KP_4,common_scanmap[101]=KEY_KP_5,common_scanmap[102]=KEY_KP_6,common_scanmap[107]=KEY_KP_Plus,common_scanmap[97]=KEY_KP_1,common_scanmap[98]=KEY_KP_2,common_scanmap[99]=KEY_KP_3,common_scanmap[96]=KEY_KP_0,common_scanmap[110]=KEY_KP_Decimal,common_scanmap[191]=KEY_Slash,common_scanmap[190]=KEY_Period,common_scanmap[188]=KEY_Comma,common_scanmap[220]=KEY_BSlash,common_scanmap[192]=KEY_Tilde,common_scanmap[222]=KEY_Quote,common_scanmap[219]=KEY_LBrace,common_scanmap[221]=KEY_RBrace,common_scanmap[91]=57435,common_scanmap[92]=57436,common_scanmap[93]=57437;var firefox_scanmap=[];firefox_scanmap[173]=KEY_Minus,firefox_scanmap[109]=KEY_Minus,firefox_scanmap[61]=KEY_Equal,firefox_scanmap[59]=KEY_SemiColon;var DOM_scanmap=[];DOM_scanmap[189]=KEY_Minus,DOM_scanmap[187]=KEY_Equal,DOM_scanmap[186]=KEY_SemiColon,define("spice-utils",function(){});var rfc2083_crc_table=Array(256),rfc2083_crc_table_computed=0;PngIHDR.prototype={to_buffer:function(t,e){e=e||0;var a=e,n=new SpiceDataView(t);return n.setUint32(e,this.buffer_size()-12),e+=4,n.setUint8(e,"I".charCodeAt(0)),e++,n.setUint8(e,"H".charCodeAt(0)),e++,n.setUint8(e,"D".charCodeAt(0)),e++,n.setUint8(e,"R".charCodeAt(0)),e++,n.setUint32(e,this.width),e+=4,n.setUint32(e,this.height),e+=4,n.setUint8(e,this.depth),e++,n.setUint8(e,this.type),e++,n.setUint8(e,this.compression),e++,n.setUint8(e,this.filter),e++,n.setUint8(e,this.interlace),e++,n.setUint32(e,crc32(t,a+4,this.buffer_size()-8)),e+=4},buffer_size:function(){return 25}},adler.prototype.update=function(t){this.s1+=t,this.s1%=65521,this.s2+=this.s1,this.s2%=65521},PngIDAT.prototype={to_buffer:function(t,e){e=e||0;var a,n,s,i=e,r=new SpiceDataView(t),o=new adler;r.setUint32(e,this.buffer_size()-12),e+=4,r.setUint8(e,"I".charCodeAt(0)),e++,r.setUint8(e,"D".charCodeAt(0)),e++,r.setUint8(e,"A".charCodeAt(0)),e++,r.setUint8(e,"T".charCodeAt(0)),e++,r.setUint8(e,120),e++,r.setUint8(e,1),e++,r.setUint8(e,128),e++,r.setUint16(e,this.data.byteLength+this.height),e+=2,r.setUint16(e,~(this.data.byteLength+this.height)),e+=2;var l=new Uint8Array(this.data);for(s=0,n=0;n<this.height;n++)for(r.setUint8(e,0),e++,o.update(0),a=0;a<this.width&&s<this.data.byteLength;a++)o.update(l[s]),r.setUint8(e,l[s++]),e++,o.update(l[s]),r.setUint8(e,l[s++]),e++,o.update(l[s]),r.setUint8(e,l[s++]),e++,o.update(l[s]),r.setUint8(e,l[s++]),e++;return r.setUint16(e,o.s2),e+=2,r.setUint16(e,o.s1),e+=2,r.setUint32(e,crc32(t,i+4,this.buffer_size()-8)),e+=4},buffer_size:function(){return 12+this.data.byteLength+this.height+4+2+1+2+2}},PngIEND.prototype={to_buffer:function(t,e){e=e||0;var a=e,n=new SpiceDataView(t);return n.setUint32(e,this.buffer_size()-12),e+=4,n.setUint8(e,"I".charCodeAt(0)),e++,n.setUint8(e,"E".charCodeAt(0)),e++,n.setUint8(e,"N".charCodeAt(0)),e++,n.setUint8(e,"D".charCodeAt(0)),e++,n.setUint32(e,crc32(t,a+4,this.buffer_size()-8)),e+=4},buffer_size:function(){return 12}},define("spice-png",function(){}),define("spice-lz",function(){});var encoder,QUIC_IMAGE_TYPE_INVALID=0,QUIC_IMAGE_TYPE_GRAY=1,QUIC_IMAGE_TYPE_RGB16=2,QUIC_IMAGE_TYPE_RGB24=3,QUIC_IMAGE_TYPE_RGB32=4,QUIC_IMAGE_TYPE_RGBA=5,DEFevol=3,DEFwmimax=6,DEFwminext=2048,need_init=!0,DEFmaxclen=26,evol=DEFevol,wmimax=DEFwmimax,wminext=DEFwminext,family_5bpc={nGRcodewords:[0,0,0,0,0,0,0,0],notGRcwlen:[0,0,0,0,0,0,0,0],notGRprefixmask:[0,0,0,0,0,0,0,0],notGRsuffixlen:[0,0,0,0,0,0,0,0],xlatU2L:[0,0,0,0,0,0,0,0],xlatL2U:[0,0,0,0,0,0,0,0]},family_8bpc={nGRcodewords:[0,0,0,0,0,0,0,0],notGRcwlen:[0,0,0,0,0,0,0,0],notGRprefixmask:[0,0,0,0,0,0,0,0],notGRsuffixlen:[0,0,0,0,0,0,0,0],xlatU2L:[0,0,0,0,0,0,0,0],xlatL2U:[0,0,0,0,0,0,0,0]},bppmask=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215,33554431,67108863,134217727,268435455,536870911,1073741823,2147483647,4294967295],zeroLUT=[],besttrigtab=[[550,900,800,700,500,350,300,200,180,180,160],[110,550,900,800,550,400,350,250,140,160,140],[100,120,550,900,700,500,400,300,220,250,160]],J=[0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,5,5,6,6,7,7,8,9,10,11,12,13,14,15],lzeroes=[8,7,6,6,5,5,5,5,4,4,4,4,4,4,4,4,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],tabrand_chaos=[46495042,893548311,794435923,2453991765,2077388039,894197842,1462934312,697534094,1826128012,343623392,2581292719,3811265708,459739748,2638427270,1654964626,101227083,2654850628,3668700691,572794346,2758751005,3445133904,2344099199,3367450297,898927923,3618406352,1606297603,754696453,20823118,2050458127,972590750,3990194068,3305596553,4239238564,1690498157,3015324227,2306127097,1510321853,548392192,971157512,2292288069,1611390505,4086766286,4084927083,1883326811,1891043243,113180603,1107690783,3778825955,3248980775,2443839100,2190866218,1932072870,495393613,1078522166,4051963518,1784694977,1768732442,2146763203,264646923,1474361405,2361552500,296035746,2489922759,2094565616,2409465348,1334241083,72483606,3740181004,4057920662,1734898312,4114662834,574624900,880305546,3258472262,26713132,1571648456,52557195,4043234286,2458021343,676064371,1528437109,64953873,546717185,2709319979,1947039598,2812723004,28691684,286829174,4235176970,3465707163,12526951,2154766700,3165032534,2036061161,3386656087,2301212354,2023576300,1061142336,3105452904,2743866805,3283373992,3397596080,3085489552,3196092395,3210707808,3651022684,925444321,2088074316,230011220,3223248386,533229176,523863486,3028311159,13140218,2538347282,900399636,3000796173,1526771255,3541282854,2992674461,2135722105,389334227,1225164337,3119947809,1803959919,3471171263,704170491,1407019136,1924534819,526887421,168782227,333811993,298623278,4268451686,381087740,2542899140,3266880867,2498950977,200969370,3511909096,3252303004,2268881098,2499828613,2606499854,3163208665,3790254546,1840025712,1319758833,3771674836,519421307,3512796222,1563402978,4284300462,2263719815,715250337,3178437172,2660191010,2982332026,3256309961,2709659997,3434092872,2367065591,69438718,915160508,183164069,3134331940,175242981,2680543346,1421955782,4231173251,1736652874,3990568476,1710820912,2286604440,3464587098,1261907837,1757387321,1128554270,1090050251,2429922486,1288729218,882830086,211637042,1376462063,2147615815,1737974929,798170275,4271572277,4241687072,1638524620,2760366295,1065115089,2097227717,1224023317,1625204849,3383303351,1488272307,2640186157,1649047732,819719707,2615091943,502645401,760628135,4108137983,63606742,1404337880,1865161130,4272996852,1239761976,790984678,3213322601,1917062825,4195069880,1962259360,2111002573,2311983960,1861406170,511141875,2797510619,1331661048,3130608186,147483493,3767089176,2650841450,4096523407,2574446300,1956416337,851468126,3607527519,1811658703,3642821136,832691095,2453312857,933732854,94341217,3393797730,1695907457,2405722077,2877685663,2469507058,2249636341,3988608661,4001245617,825934927,3103985967,1127151177,3691656896,1640967098,2168932645,2830550957,3998822878,3002602893,1509651465,775813869,2599574079,3791574229],rgb32_pixel_pad=3,rgb32_pixel_r=2,rgb32_pixel_g=1,rgb32_pixel_b=0,rgb32_pixel_size=4;if(QuicModel.prototype={n_buckets:0,n_buckets_ptrs:0,repfirst:0,firstsize:0,repnext:0,mulsize:0,levels:0},QuicBucket.prototype={bestcode:0,reste:function(t){this.bestcode=t,this.counters=[0,0,0,0,0,0,0,0]},update_model_8bpc:function(t,e,a){var n,s=a-1,i=this.counters[s]+=golomb_code_len_8bpc(e,s);for(n=a-2;n>=0;n--){var r=this.counters[n]+=golomb_code_len_8bpc(e,n);i>r&&(s=n,i=r)}if(this.bestcode=s,i>t.wm_trigger)for(n=0;a>n;n++)this.counters[n]=this.counters[n]>>>1}},QuicFamilyStat.prototype={fill_model_structures:function(t){var e,a=0,n=0,s=t.repfirst+1,i=t.firstsize;do{e=n?a+1:0,--s||(s=t.repnext,i*=t.mulsize),a=e+i-1,a+i>=t.levels&&(a=t.levels-1),this.buckets_buf[n]=new QuicBucket;var r;for(r=e;a>=r;r++)this.buckets_ptrs[r]=this.buckets_buf[n];n++}while(a<t.levels-1);return!0}},QuicChannel.prototype={reste:function(t){var e;if(this.correlate_row={zero:0,row:[]},8==t){for(e=0;e<this.model_8bpc.n_buckets;e++)this.family_stat_8bpc.buckets_buf[e].reste(7);this.buckets_ptrs=this.family_stat_8bpc.buckets_ptrs}else{if(5!=t)return console.log("quic: %s: bad bpc %d\n",__FUNCTION__,t),!1;for(e=0;e<this.model_5bpc.n_buckets;e++)this.family_stat_8bpc.buckets_buf[e].reste(4);this.buckets_ptrs=this.family_stat_5bpc.buckets_ptrs}return this.state.reste(),!0}},CommonState.prototype={waitcnt:0,tabrand_seed:255,wm_trigger:0,wmidx:0,wmileft:wminext,melcstate:0,melclen:0,melcorder:0,set_wm_trigger:function(){var t=this.wmidx;t>10&&(t=10),this.wm_trigger=besttrigtab[Math.floor(evol/2)][t]},reste:function(){this.waitcnt=0,this.tabrand_seed=255,this.wmidx=0,this.wmileft=wminext,this.set_wm_trigger(),this.melcstate=0,this.melclen=J[0],this.melcorder=1<<this.melclen},tabrand:function(){return this.tabrand_seed++,tabrand_chaos[255&this.tabrand_seed]}},QuicEncoder.prototype={type:0,width:0,height:0,io_idx:0,io_available_bits:0,io_word:0,io_next_word:0,io_now:0,io_end:0,rows_completed:0},QuicEncoder.prototype.reste=function(t){return this.rgb_state.reste(),this.io_now=t,this.io_end=this.io_now.length,this.io_idx=0,this.rows_completed=0,!0},QuicEncoder.prototype.read_io_word=function(){if(this.io_idx>=this.io_end)throw"quic: out of data";this.io_next_word=this.io_now[this.io_idx++]|this.io_now[this.io_idx++]<<8|this.io_now[this.io_idx++]<<16|this.io_now[this.io_idx++]<<24},QuicEncoder.prototype.decode_eatbits=function(t){this.io_word=this.io_word<<t;var e=this.io_available_bits-t;e>=0?(this.io_available_bits=e,this.io_word|=this.io_next_word>>>this.io_available_bits):(e=-1*e,this.io_word|=this.io_next_word<<e,this.read_io_word(),this.io_available_bits=32-e,this.io_word|=this.io_next_word>>>this.io_available_bits)},QuicEncoder.prototype.decode_eat32bits=function(){this.decode_eatbits(16),this.decode_eatbits(16)},QuicEncoder.prototype.reste_channels=function(t){var e;for(e=0;4>e;e++)if(!this.channels[e].reste(t))return!1;return!0},QuicEncoder.prototype.quic_decode_begin=function(t){if(!this.reste(t))return!1;this.io_idx=0,this.io_next_word=this.io_now[this.io_idx++]|this.io_now[this.io_idx++]<<8|this.io_now[this.io_idx++]<<16|this.io_now[this.io_idx++]<<24,this.io_word=this.io_next_word,this.io_available_bits=0;var e=this.io_word;if(this.decode_eat32bits(),1128879441!=e)return console.log("quic: bad magic "+e.toString(16)),!1;var a=this.io_word;if(this.decode_eat32bits(),0!=a)return console.log("quic: bad version "+a.toString(16)),!1;this.type=this.io_word,this.decode_eat32bits(),this.width=this.io_word,this.decode_eat32bits(),this.height=this.io_word,this.decode_eat32bits();var n=quic_image_bpc(this.type);return this.reste_channels(n)?!0:!1},QuicEncoder.prototype.quic_rgb32_uncompress_row0_seg=function(t,e,a,n,s,i){var r,o,l,c=3;if(t)r=t+this.rgb_state.waitcnt;else{e[rgb32_pixel_pad]=0,o=0;do l=golomb_decoding_8bpc(this.channels[o].buckets_ptrs[this.channels[o].correlate_row.zero].bestcode,this.io_word),this.channels[o].correlate_row.row[0]=l.rc,e[2-o]=255&family_8bpc.xlatL2U[l.rc],this.decode_eatbits(l.codewordlen);while(++o<c);if(this.rgb_state.waitcnt)--this.rgb_state.waitcnt;else{this.rgb_state.waitcnt=this.rgb_state.tabrand()&n,o=0;do this.channels[o].buckets_ptrs[this.channels[o].correlate_row.zero].update_model_8bpc(this.rgb_state,this.channels[o].correlate_row.row[0],s);while(++o<c)}r=++t+this.rgb_state.waitcnt}for(;a>r;){for(;r>=t;t++){e[t*rgb32_pixel_size+rgb32_pixel_pad]=0,o=0;do l=golomb_decoding_8bpc(this.channels[o].buckets_ptrs[this.channels[o].correlate_row.row[t-1]].bestcode,this.io_word),this.channels[o].correlate_row.row[t]=l.rc,e[t*rgb32_pixel_size+(2-o)]=family_8bpc.xlatL2U[l.rc]+e[(t-1)*rgb32_pixel_size+(2-o)]&i,this.decode_eatbits(l.codewordlen);while(++o<c)}o=0;do this.channels[o].buckets_ptrs[this.channels[o].correlate_row.row[r-1]].update_model_8bpc(this.rgb_state,this.channels[o].correlate_row.row[r],s);while(++o<c);r=t+(this.rgb_state.tabrand()&n)}for(;a>t;t++){e[t*rgb32_pixel_size+rgb32_pixel_pad]=0,o=0;do l=golomb_decoding_8bpc(this.channels[o].buckets_ptrs[this.channels[o].correlate_row.row[t-1]].bestcode,this.io_word),this.channels[o].correlate_row.row[t]=l.rc,e[t*rgb32_pixel_size+(2-o)]=family_8bpc.xlatL2U[l.rc]+e[(t-1)*rgb32_pixel_size+(2-o)]&i,this.decode_eatbits(l.codewordlen);while(++o<c)}this.rgb_state.waitcnt=r-a},QuicEncoder.prototype.quic_rgb32_uncompress_row0=function(t){for(var e=8,a=255,n=0,s=this.width;wmimax>this.rgb_state.wmidx&&this.rgb_state.wmileft<=s;)this.rgb_state.wmileft&&(this.quic_rgb32_uncompress_row0_seg(n,t,n+this.rgb_state.wmileft,bppmask[this.rgb_state.wmidx],e,a),n+=this.rgb_state.wmileft,s-=this.rgb_state.wmileft),this.rgb_state.wmidx++,this.rgb_state.set_wm_trigger(),this.rgb_state.wmileft=wminext;s&&(this.quic_rgb32_uncompress_row0_seg(n,t,n+s,bppmask[this.rgb_state.wmidx],e,a),wmimax>this.rgb_state.wmidx&&(this.rgb_state.wmileft-=s))},QuicEncoder.prototype.quic_rgb32_uncompress_row_seg=function(t,e,a,n,s,i){var r,o,l=3,c=bppmask[this.rgb_state.wmidx],d=0,u=0,p=0;if(a)u=a+this.rgb_state.waitcnt;else{e[rgb32_pixel_pad]=0,o=0;do r=golomb_decoding_8bpc(this.channels[o].buckets_ptrs[this.channels[o].correlate_row.zero].bestcode,this.io_word),this.channels[o].correlate_row.row[0]=r.rc,e[2-o]=family_8bpc.xlatL2U[this.channels[o].correlate_row.row[0]]+t[2-o]&i,this.decode_eatbits(r.codewordlen);while(++o<l);if(this.rgb_state.waitcnt)--this.rgb_state.waitcnt;else{this.rgb_state.waitcnt=this.rgb_state.tabrand()&c,o=0;do this.channels[o].buckets_ptrs[this.channels[o].correlate_row.zero].update_model_8bpc(this.rgb_state,this.channels[o].correlate_row.row[0],s);while(++o<l)}u=++a+this.rgb_state.waitcnt}for(;;){for(var h=0;n>u&&!h;){for(;u>=a&&!h;a++){var f=a*rgb32_pixel_size,m=(a-1)*rgb32_pixel_size,_=(a-2)*rgb32_pixel_size;if(t[m+rgb32_pixel_r]==t[f+rgb32_pixel_r]&&t[m+rgb32_pixel_g]==t[f+rgb32_pixel_g]&&t[m+rgb32_pixel_b]==t[f+rgb32_pixel_b]&&d!=a&&a>2&&e[m+rgb32_pixel_r]==e[_+rgb32_pixel_r]&&e[m+rgb32_pixel_g]==e[_+rgb32_pixel_g]&&e[m+rgb32_pixel_b]==e[_+rgb32_pixel_b]){for(this.rgb_state.waitcnt=u-a,d=a,p=a+this.decode_run(this.rgb_state);p>a;a++){var f=a*rgb32_pixel_size,m=(a-1)*rgb32_pixel_size;e[f+rgb32_pixel_pad]=0,e[f+rgb32_pixel_r]=e[m+rgb32_pixel_r],e[f+rgb32_pixel_g]=e[m+rgb32_pixel_g],e[f+rgb32_pixel_b]=e[m+rgb32_pixel_b]}if(a==n)return;u=a+this.rgb_state.waitcnt,h=1;break}o=0,e[f+rgb32_pixel_pad]=0;do{var b=this.channels[o],v=b.correlate_row;r=golomb_decoding_8bpc(b.buckets_ptrs[v.row[a-1]].bestcode,this.io_word),v.row[a]=r.rc,e[f+(2-o)]=family_8bpc.xlatL2U[r.rc]+(e[m+(2-o)]+t[f+(2-o)]>>1)&i,this.decode_eatbits(r.codewordlen)}while(++o<l)}if(h)break;o=0;do this.channels[o].buckets_ptrs[this.channels[o].correlate_row.row[u-1]].update_model_8bpc(this.rgb_state,this.channels[o].correlate_row.row[u],s);while(++o<l);u=a+(this.rgb_state.tabrand()&c)}for(;n>a&&!h;a++){var f=a*rgb32_pixel_size,m=(a-1)*rgb32_pixel_size,_=(a-2)*rgb32_pixel_size;if(t[m+rgb32_pixel_r]==t[f+rgb32_pixel_r]&&t[m+rgb32_pixel_g]==t[f+rgb32_pixel_g]&&t[m+rgb32_pixel_b]==t[f+rgb32_pixel_b]&&d!=a&&a>2&&e[m+rgb32_pixel_r]==e[_+rgb32_pixel_r]&&e[m+rgb32_pixel_g]==e[_+rgb32_pixel_g]&&e[m+rgb32_pixel_b]==e[_+rgb32_pixel_b]){for(this.rgb_state.waitcnt=u-a,d=a,p=a+this.decode_run(this.rgb_state);p>a;a++){var f=a*rgb32_pixel_size,m=(a-1)*rgb32_pixel_size;e[f+rgb32_pixel_pad]=0,e[f+rgb32_pixel_r]=e[m+rgb32_pixel_r],e[f+rgb32_pixel_g]=e[m+rgb32_pixel_g],e[f+rgb32_pixel_b]=e[m+rgb32_pixel_b]}if(a==n)return;u=a+this.rgb_state.waitcnt,h=1;break}e[f+rgb32_pixel_pad]=0,o=0;do r=golomb_decoding_8bpc(this.channels[o].buckets_ptrs[this.channels[o].correlate_row.row[a-1]].bestcode,this.io_word),this.channels[o].correlate_row.row[a]=r.rc,e[f+(2-o)]=family_8bpc.xlatL2U[r.rc]+(e[m+(2-o)]+t[f+(2-o)]>>1)&i,this.decode_eatbits(r.codewordlen);while(++o<l)}if(!h)return void(this.rgb_state.waitcnt=u-n)}},QuicEncoder.prototype.decode_run=function(t){for(var e=0;;){var a,n=~(this.io_word>>>24)>>>0&255,s=zeroLUT[n];for(a=1;s>=a;a++)e+=t.melcorder,t.melcstate<32&&(t.melclen=J[++t.melcstate],t.melcorder=1<<t.melclen);if(8!=s){this.decode_eatbits(s+1);break}this.decode_eatbits(8)}return t.melclen&&(e+=this.io_word>>>32-t.melclen,this.decode_eatbits(t.melclen)),t.melcstate&&(t.melclen=J[--t.melcstate],t.melcorder=1<<t.melclen),e},QuicEncoder.prototype.quic_rgb32_uncompress_row=function(t,e){for(var a=8,n=255,s=0,i=this.width;wmimax>this.rgb_state.wmidx&&this.rgb_state.wmileft<=i;)this.rgb_state.wmileft&&(this.quic_rgb32_uncompress_row_seg(t,e,s,s+this.rgb_state.wmileft,a,n),s+=this.rgb_state.wmileft,i-=this.rgb_state.wmileft),this.rgb_state.wmidx++,this.rgb_state.set_wm_trigger(),this.rgb_state.wmileft=wminext;i&&(this.quic_rgb32_uncompress_row_seg(t,e,s,s+i,a,n),wmimax>this.rgb_state.wmidx&&(this.rgb_state.wmileft-=i))},QuicEncoder.prototype.quic_four_uncompress_row0_seg=function(t,e,a,n,s,i,r,o){var l,c;for(0==e?(c=golomb_decoding_8bpc(t.buckets_ptrs[a.zero].bestcode,this.io_word),a.row[0]=c.rc,n[rgb32_pixel_pad]=family_8bpc.xlatL2U[c.rc],this.decode_eatbits(c.codewordlen),t.state.waitcnt?--t.state.waitcnt:(t.state.waitcnt=t.state.tabrand()&i,t.buckets_ptrs[a.zero].update_model_8bpc(t.state,a.row[0],r)),l=++e+t.state.waitcnt):l=e+t.state.waitcnt;s>l;){for(var d;l>=e;e++)d=t.buckets_ptrs[a.row[e-1]],c=golomb_decoding_8bpc(d.bestcode,this.io_word),a.row[e]=c.rc,n[e*rgb32_pixel_size+rgb32_pixel_pad]=family_8bpc.xlatL2U[c.rc]+n[(e-1)*rgb32_pixel_size+rgb32_pixel_pad]&o,this.decode_eatbits(c.codewordlen);d.update_model_8bpc(t.state,a.row[l],r),l=e+(t.state.tabrand()&i)}for(;s>e;e++)c=golomb_decoding_8bpc(t.buckets_ptrs[a.row[e-1]].bestcode,this.io_word),a.row[e]=c.rc,n[e*rgb32_pixel_size+rgb32_pixel_pad]=family_8bpc.xlatL2U[c.rc]+n[(e-1)*rgb32_pixel_size+rgb32_pixel_pad]&o,this.decode_eatbits(c.codewordlen);t.state.waitcnt=l-s},QuicEncoder.prototype.quic_four_uncompress_row0=function(t,e){for(var a=8,n=255,s=t.correlate_row,i=0,r=this.width;wmimax>t.state.wmidx&&t.state.wmileft<=r;)t.state.wmileft&&(this.quic_four_uncompress_row0_seg(t,i,s,e,i+t.state.wmileft,bppmask[t.state.wmidx],a,n),i+=t.state.wmileft,r-=t.state.wmileft),t.state.wmidx++,t.state.set_wm_trigger(),t.state.wmileft=wminext;r&&(this.quic_four_uncompress_row0_seg(t,i,s,e,i+r,bppmask[t.state.wmidx],a,n),wmimax>t.state.wmidx&&(t.state.wmileft-=r))},QuicEncoder.prototype.quic_four_uncompress_row_seg=function(t,e,a,n,s,i,r,o){var l,c,d,u=bppmask[t.state.wmidx],p=0;for(0==s?(d=golomb_decoding_8bpc(t.buckets_ptrs[e.zero].bestcode,this.io_word),e.row[0]=d.rc,n[rgb32_pixel_pad]=family_8bpc.xlatL2U[d.rc]+a[rgb32_pixel_pad]&o,this.decode_eatbits(d.codewordlen),t.state.waitcnt?--t.state.waitcnt:(t.state.waitcnt=t.state.tabrand()&u,t.buckets_ptrs[e.zero].update_model_8bpc(t.state,e.row[0],r)),l=++s+t.state.waitcnt):l=s+t.state.waitcnt;;){for(var h=0;i>l&&!h;){for(var f;l>=s&&!h;s++){var m=s*rgb32_pixel_size,_=(s-1)*rgb32_pixel_size,b=(s-2)*rgb32_pixel_size;if(a[_+rgb32_pixel_pad]==a[m+rgb32_pixel_pad]&&p!=s&&s>2&&n[_+rgb32_pixel_pad]==n[b+rgb32_pixel_pad]){for(t.state.waitcnt=l-s,p=s,c=s+this.decode_run(t.state);c>s;s++){var m=s*rgb32_pixel_size,_=(s-1)*rgb32_pixel_size;n[m+rgb32_pixel_pad]=n[_+rgb32_pixel_pad]}if(s==i)return;l=s+t.state.waitcnt,h=1;break}f=t.buckets_ptrs[e.row[s-1]],d=golomb_decoding_8bpc(f.bestcode,this.io_word),e.row[s]=d.rc,n[m+rgb32_pixel_pad]=family_8bpc.xlatL2U[d.rc]+(n[_+rgb32_pixel_pad]+a[m+rgb32_pixel_pad]>>1)&o,this.decode_eatbits(d.codewordlen)}if(h)break;f.update_model_8bpc(t.state,e.row[l],r),l=s+(t.state.tabrand()&u)}for(;i>s&&!h;s++){var m=s*rgb32_pixel_size,_=(s-1)*rgb32_pixel_size,b=(s-2)*rgb32_pixel_size;if(a[_+rgb32_pixel_pad]==a[m+rgb32_pixel_pad]&&p!=s&&s>2&&n[_+rgb32_pixel_pad]==n[b+rgb32_pixel_pad]){for(t.state.waitcnt=l-s,p=s,c=s+this.decode_run(t.state);c>s;s++){var m=s*rgb32_pixel_size,_=(s-1)*rgb32_pixel_size;n[m+rgb32_pixel_pad]=n[_+rgb32_pixel_pad]}if(s==i)return;l=s+t.state.waitcnt,h=1;break}d=golomb_decoding_8bpc(t.buckets_ptrs[e.row[s-1]].bestcode,this.io_word),e.row[s]=d.rc,n[m+rgb32_pixel_pad]=family_8bpc.xlatL2U[d.rc]+(n[_+rgb32_pixel_pad]+a[m+rgb32_pixel_pad]>>1)&o,this.decode_eatbits(d.codewordlen)}if(!h)return void(t.state.waitcnt=l-i)}},QuicEncoder.prototype.quic_four_uncompress_row=function(t,e,a){for(var n=8,s=255,i=t.correlate_row,r=0,o=this.width;wmimax>t.state.wmidx&&t.state.wmileft<=o;)t.state.wmileft&&(this.quic_four_uncompress_row_seg(t,i,e,a,r,r+t.state.wmileft,n,s),r+=t.state.wmileft,o-=t.state.wmileft),t.state.wmidx++,t.state.set_wm_trigger(),t.state.wmileft=wminext;o&&(this.quic_four_uncompress_row_seg(t,i,e,a,r,r+o,n,s),wmimax>t.state.wmidx&&(t.state.wmileft-=o))},QuicEncoder.prototype.quic_decode=function(t,e){var a;switch(this.type){case QUIC_IMAGE_TYPE_RGB32:case QUIC_IMAGE_TYPE_RGB24:for(this.channels[0].correlate_row.zero=0,this.channels[1].correlate_row.zero=0,this.channels[2].correlate_row.zero=0,this.quic_rgb32_uncompress_row0(t),this.rows_completed++,a=1;a<this.height;a++){var n=t;t=n.subarray(e),this.channels[0].correlate_row.zero=this.channels[0].correlate_row.row[0],this.channels[1].correlate_row.zero=this.channels[1].correlate_row.row[0],this.channels[2].correlate_row.zero=this.channels[2].correlate_row.row[0],this.quic_rgb32_uncompress_row(n,t),this.rows_completed++}break;case QUIC_IMAGE_TYPE_RGB16:return console.log("quic: unsupported output format\n"),!1;case QUIC_IMAGE_TYPE_RGBA:for(this.channels[0].correlate_row.zero=0,this.channels[1].correlate_row.zero=0,this.channels[2].correlate_row.zero=0,this.quic_rgb32_uncompress_row0(t),this.channels[3].correlate_row.zero=0,this.quic_four_uncompress_row0(this.channels[3],t),this.rows_completed++,a=1;a<this.height;a++){var n=t;t=n.subarray(e),this.channels[0].correlate_row.zero=this.channels[0].correlate_row.row[0],this.channels[1].correlate_row.zero=this.channels[1].correlate_row.row[0],this.channels[2].correlate_row.zero=this.channels[2].correlate_row.row[0],this.quic_rgb32_uncompress_row(n,t),this.channels[3].correlate_row.zero=this.channels[3].correlate_row.row[0],this.quic_four_uncompress_row(encoder.channels[3],n,t),this.rows_completed++}break;case QUIC_IMAGE_TYPE_GRAY:return console.log("quic: unsupported output format\n"),!1;case QUIC_IMAGE_TYPE_INVALID:default:return console.log("quic: bad image type\n"),!1}return!0},QuicEncoder.prototype.simple_quic_decode=function(t){var e=4;if(!this.quic_decode_begin(t))return void 0;if(this.type!=QUIC_IMAGE_TYPE_RGB32&&this.type!=QUIC_IMAGE_TYPE_RGB24&&this.type!=QUIC_IMAGE_TYPE_RGBA)return void 0;var a=new Uint8Array(this.width*this.height*4);return a[0]=69,this.quic_decode(a,this.width*e)?a:void 0},SpiceQuic.prototype={from_dv:function(t,e,a){if(!encoder)throw"quic: no quic encoder";this.data_size=t.getUint32(e,!0),e+=4;var n=new Uint8Array(a.slice(e));return this.outptr=encoder.simple_quic_decode(n),this.outptr&&(this.type=encoder.type,this.width=encoder.width,this.height=encoder.height),e+=n.length}},need_init){need_init=!1,family_init(family_8bpc,8,DEFmaxclen),family_init(family_5bpc,5,DEFmaxclen);var i,j,k,l;for(j=k=1,l=8,i=0;256>i;++i)zeroLUT[i]=l,--k,0==k&&(k=j,--l,j*=2);if(encoder=new QuicEncoder,!encoder)throw"quic: failed to create encoder"}define("spice-quic",function(){}),define("spice-bitmap",function(){}),SpiceDataView.prototype={getUint8:function(t){return this.u8[t]},getUint16:function(t,e){var a=1,n=0;return e&&(a=0,n=1),this.u8[t+n]<<8|this.u8[t+a]},getUint32:function(t,e){var a=2,n=0;return e&&(a=0,n=2),this.getUint16(t+n,e)<<16|this.getUint16(t+a,e)},getUint64:function(t,e){var a=4,n=0;return e&&(a=0,n=4),this.getUint32(t+n,e)<<32|this.getUint32(t+a,e)},setUint8:function(t,e){this.u8[t]=255&e},setUint16:function(t,e,a){var n=1,s=0;a&&(n=0,s=1),this.u8[t+s]=(65535&e)>>8,this.u8[t+n]=255&e},setUint32:function(t,e,a){var n=2,s=0;a&&(n=0,s=2),this.setUint16(t+s,(4294967295&e)>>16,a),this.setUint16(t+n,65535&e,a)},setUint64:function(t,e,a){var n=4,s=0;a&&(n=0,s=4),this.setUint32(t+s,(0x10000000000000000&e)>>32,a),this.setUint32(t+n,4294967295&e,a)}},define("spice-spicedataview",function(){}),SpiceChannelId.prototype={from_dv:function(t,e){return this.type=t.getUint8(e,!0),e++,this.id=t.getUint8(e,!0),e++,e}},SpiceRect.prototype={from_dv:function(t,e){return this.top=t.getUint32(e,!0),e+=4,this.left=t.getUint32(e,!0),e+=4,this.bottom=t.getUint32(e,!0),e+=4,this.right=t.getUint32(e,!0),e+=4},is_same_size:function(t){return this.bottom-this.top==t.bottom-t.top&&this.right-this.left==t.right-t.left?!0:!1}},SpiceClipRects.prototype={from_dv:function(t,e,a){var n;for(this.num_rects=t.getUint32(e,!0),e+=4,this.num_rects>0&&(this.rects=[]),n=0;n<this.num_rects;n++)this.rects[n]=new SpiceRect,e=this.rects[n].from_dv(t,e,a);return e}},SpiceClip.prototype={from_dv:function(t,e,a){return this.type=t.getUint8(e,!0),e++,this.type==SPICE_CLIP_TYPE_RECTS&&(this.rects=new SpiceClipRects,e=this.rects.from_dv(t,e,a)),e}},SpiceImageDescriptor.prototype={from_dv:function(t,e){return this.id=t.getUint64(e,!0),e+=8,this.type=t.getUint8(e,!0),e++,this.flags=t.getUint8(e,!0),e++,this.width=t.getUint32(e,!0),e+=4,this.height=t.getUint32(e,!0),e+=4}},SpicePalette.prototype={from_dv:function(t,e){var a;for(this.unique=t.getUint64(e,!0),e+=8,this.num_ents=t.getUint16(e,!0),e+=2,this.ents=[],a=0;a<this.num_ents;a++)this.ents[a]=t.getUint32(e,!0),e+=4;return e}},SpiceBitmap.prototype={from_dv:function(t,e,a){if(this.format=t.getUint8(e,!0),e++,this.flags=t.getUint8(e,!0),e++,this.x=t.getUint32(e,!0),e+=4,this.y=t.getUint32(e,!0),e+=4,this.stride=t.getUint32(e,!0),e+=4,this.flags&SPICE_BITMAP_FLAGS_PAL_FROM_CACHE)this.palette_id=t.getUint64(e,!0),e+=8;else{var n=t.getUint32(e,!0);e+=4,0==n?this.palette=null:(this.palette=new SpicePalette,this.palette.from_dv(t,n,a))}return this.data=a.slice(e),e+=this.data.byteLength}},SpiceImage.prototype={from_dv:function(t,e,a){if(this.descriptor=new SpiceImageDescriptor,e=this.descriptor.from_dv(t,e,a),this.descriptor.type==SPICE_IMAGE_TYPE_LZ_RGB){this.lz_rgb=new Object,this.lz_rgb.length=t.getUint32(e,!0),e+=4;var n=e;this.lz_rgb.magic="";for(var s=3;s>=0;s--)this.lz_rgb.magic+=String.fromCharCode(t.getUint8(e+s));e+=4,this.lz_rgb.version=t.getUint32(e),e+=4,this.lz_rgb.type=t.getUint32(e),e+=4,this.lz_rgb.width=t.getUint32(e),e+=4,this.lz_rgb.height=t.getUint32(e),e+=4,this.lz_rgb.stride=t.getUint32(e),e+=4,this.lz_rgb.top_down=t.getUint32(e),e+=4;var i=e-n;this.lz_rgb.data=a.slice(e,this.lz_rgb.length+e-i),e+=this.lz_rgb.data.byteLength}if(this.descriptor.type==SPICE_IMAGE_TYPE_BITMAP&&(this.bitmap=new SpiceBitmap,e=this.bitmap.from_dv(t,e,a)),this.descriptor.type==SPICE_IMAGE_TYPE_SURFACE&&(this.surface_id=t.getUint32(e,!0),e+=4),this.descriptor.type==SPICE_IMAGE_TYPE_JPEG&&(this.jpeg=new Object,this.jpeg.data_size=t.getUint32(e,!0),e+=4,this.jpeg.data=a.slice(e),e+=this.jpeg.data.byteLength),this.descriptor.type==SPICE_IMAGE_TYPE_JPEG_ALPHA){this.jpeg_alpha=new Object,this.jpeg_alpha.flags=t.getUint8(e,!0),e+=1,this.jpeg_alpha.jpeg_size=t.getUint32(e,!0),e+=4,this.jpeg_alpha.data_size=t.getUint32(e,!0),e+=4,this.jpeg_alpha.data=a.slice(e,this.jpeg_alpha.jpeg_size+e),e+=this.jpeg_alpha.data.byteLength,this.jpeg_alpha.alpha=new Object,this.jpeg_alpha.alpha.length=this.jpeg_alpha.data_size-this.jpeg_alpha.jpeg_size;var n=e;this.jpeg_alpha.alpha.magic="";for(var s=3;s>=0;s--)this.jpeg_alpha.alpha.magic+=String.fromCharCode(t.getUint8(e+s));e+=4,this.jpeg_alpha.alpha.version=t.getUint32(e),e+=4,this.jpeg_alpha.alpha.type=t.getUint32(e),e+=4,this.jpeg_alpha.alpha.width=t.getUint32(e),e+=4,this.jpeg_alpha.alpha.height=t.getUint32(e),e+=4,this.jpeg_alpha.alpha.stride=t.getUint32(e),e+=4,this.jpeg_alpha.alpha.top_down=t.getUint32(e),e+=4;var i=e-n;this.jpeg_alpha.alpha.data=a.slice(e,this.jpeg_alpha.alpha.length+e-i),e+=this.jpeg_alpha.alpha.data.byteLength}return this.descriptor.type==SPICE_IMAGE_TYPE_QUIC&&(this.quic=new SpiceQuic,e=this.quic.from_dv(t,e,a)),e}},SpiceQMask.prototype={from_dv:function(t,e,a){this.flags=t.getUint8(e,!0),e++,this.pos=new SpicePoint,e=this.pos.from_dv(t,e,a);
var n=t.getUint32(e,!0);return e+=4,0==n?(this.bitmap=null,e):(this.bitmap=new SpiceImage,this.bitmap.from_dv(t,n,a))}},SpicePattern.prototype={from_dv:function(t,e,a){var n=t.getUint32(e,!0);return e+=4,0==n?this.pat=null:(this.pat=new SpiceImage,this.pat.from_dv(t,n,a)),this.pos=new SpicePoint,this.pos.from_dv(t,e,a)}},SpiceBrush.prototype={from_dv:function(t,e,a){return this.type=t.getUint8(e,!0),e++,this.type==SPICE_BRUSH_TYPE_SOLID?(this.color=t.getUint32(e,!0),e+=4):this.type==SPICE_BRUSH_TYPE_PATTERN&&(this.pattern=new SpicePattern,e=this.pattern.from_dv(t,e,a)),e}},SpiceFill.prototype={from_dv:function(t,e,a){return this.brush=new SpiceBrush,e=this.brush.from_dv(t,e,a),this.rop_descriptor=t.getUint16(e,!0),e+=2,this.mask=new SpiceQMask,this.mask.from_dv(t,e,a)}},SpiceCopy.prototype={from_dv:function(t,e,a){var n=t.getUint32(e,!0);return e+=4,0==n?this.src_bitmap=null:(this.src_bitmap=new SpiceImage,this.src_bitmap.from_dv(t,n,a)),this.src_area=new SpiceRect,e=this.src_area.from_dv(t,e,a),this.rop_descriptor=t.getUint16(e,!0),e+=2,this.scale_mode=t.getUint8(e,!0),e++,this.mask=new SpiceQMask,this.mask.from_dv(t,e,a)}},SpicePoint16.prototype={from_dv:function(t,e){return this.x=t.getUint16(e,!0),e+=2,this.y=t.getUint16(e,!0),e+=2}},SpicePoint.prototype={from_dv:function(t,e){return this.x=t.getUint32(e,!0),e+=4,this.y=t.getUint32(e,!0),e+=4}},SpiceCursorHeader.prototype={from_dv:function(t,e){return this.unique=t.getUint64(e,!0),e+=8,this.type=t.getUint8(e,!0),e++,this.width=t.getUint16(e,!0),e+=2,this.height=t.getUint16(e,!0),e+=2,this.hot_spot_x=t.getUint16(e,!0),e+=2,this.hot_spot_y=t.getUint16(e,!0),e+=2}},SpiceCursor.prototype={from_dv:function(t,e,a){return this.flags=t.getUint16(e,!0),e+=2,this.flags&SPICE_CURSOR_FLAGS_NONE?this.header=null:(this.header=new SpiceCursorHeader,e=this.header.from_dv(t,e,a),this.data=a.slice(e),e+=this.data.byteLength),e}},SpiceSurface.prototype={from_dv:function(t,e){return this.surface_id=t.getUint32(e,!0),e+=4,this.width=t.getUint32(e,!0),e+=4,this.height=t.getUint32(e,!0),e+=4,this.format=t.getUint32(e,!0),e+=4,this.flags=t.getUint32(e,!0),e+=4}},define("spice-spicetype",function(){}),SpiceLinkHeader.prototype={from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);this.magic="";for(var n=0;4>n;n++)this.magic+=String.fromCharCode(a.getUint8(e+n));e+=4,this.major_version=a.getUint32(e,!0),e+=4,this.minor_version=a.getUint32(e,!0),e+=4,this.size=a.getUint32(e,!0),e+=4},to_buffer:function(t,e){e=e||0;for(var a=new SpiceDataView(t),n=0;4>n;n++)a.setUint8(e+n,this.magic.charCodeAt(n));e+=4,a.setUint32(e,this.major_version,!0),e+=4,a.setUint32(e,this.minor_version,!0),e+=4,a.setUint32(e,this.size,!0),e+=4},buffer_size:function(){return 16}},SpiceLinkMess.prototype={from_buffer:function(t,e){e=e||0;var a,n=e,s=new SpiceDataView(t);this.connection_id=s.getUint32(e,!0),e+=4,this.channel_type=s.getUint8(e,!0),e++,this.channel_id=s.getUint8(e,!0),e++;var i=s.getUint32(e,!0);e+=4;var r=s.getUint32(e,!0);e+=4;var o=s.getUint32(e,!0);for(e+=4,e=n+o,this.common_caps=[],a=0;i>a;a++)this.common_caps.unshift(s.getUint32(e,!0)),e+=4;for(this.channel_caps=[],a=0;r>a;a++)this.channel_caps.unshift(s.getUint32(e,!0)),e+=4},to_buffer:function(t,e){e=e||0;var a,n=e,s=new SpiceDataView(t);for(s.setUint32(e,this.connection_id,!0),e+=4,s.setUint8(e,this.channel_type,!0),e++,s.setUint8(e,this.channel_id,!0),e++,s.setUint32(e,this.common_caps.length,!0),e+=4,s.setUint32(e,this.channel_caps.length,!0),e+=4,s.setUint32(e,e-n+4,!0),e+=4,a=0;a<this.common_caps.length;a++)s.setUint32(e,this.common_caps[a],!0),e+=4;for(a=0;a<this.channel_caps.length;a++)s.setUint32(e,this.channel_caps[a],!0),e+=4},buffer_size:function(){return 18+4*this.common_caps.length+4*this.channel_caps.length}},SpiceLinkReply.prototype={from_buffer:function(t,e){e=e||0;var a,n=e,s=new SpiceDataView(t);this.error=s.getUint32(e,!0),e+=4,this.pub_key=create_rsa_from_mb(t,e),e+=SPICE_TICKET_PUBKEY_BYTES;var i=s.getUint32(e,!0);e+=4;var r=s.getUint32(e,!0);e+=4;var o=s.getUint32(e,!0);for(e+=4,e=n+o,this.common_caps=[],a=0;i>a;a++)this.common_caps.unshift(s.getUint32(e,!0)),e+=4;for(this.channel_caps=[],a=0;r>a;a++)this.channel_caps.unshift(s.getUint32(e,!0)),e+=4}},SpiceLinkAuthTicket.prototype={to_buffer:function(t,e){e=e||0;var a,n=new SpiceDataView(t);for(n.setUint32(e,this.auth_mechanism,!0),e+=4,a=0;SPICE_TICKET_KEY_PAIR_LENGTH/8>a;a++)this.encrypted_data&&a<this.encrypted_data.length?n.setUint8(e,this.encrypted_data[a],!0):n.setUint8(e,0,!0),e++},buffer_size:function(){return 4+SPICE_TICKET_KEY_PAIR_LENGTH/8}},SpiceLinkAuthReply.prototype={from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);this.auth_code=a.getUint32(e,!0),e+=4},buffer_size:function(){return 4}},SpiceMiniData.prototype={from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);this.type=a.getUint16(e,!0),e+=2,this.size=a.getUint32(e,!0),e+=4,t.byteLength>e&&(this.data=t.slice(e),e+=this.data.byteLength)},to_buffer:function(t,e){e=e||0;var a,n=new SpiceDataView(t);if(n.setUint16(e,this.type,!0),e+=2,n.setUint32(e,this.data?this.data.byteLength:0,!0),e+=4,this.data&&this.data.byteLength>0){var s=new Uint8Array(this.data);for(a=0;a<s.length;a++,e++)n.setUint8(e,s[a],!0)}},build_msg:function(t,e){this.type=t,this.size=e.buffer_size(),this.data=new ArrayBuffer(this.size),e.to_buffer(this.data)},buffer_size:function(){return this.data?6+this.data.byteLength:6}},SpiceMsgChannels.prototype={from_buffer:function(t,e){e=e||0;var a,n=new SpiceDataView(t);for(this.num_of_channels=n.getUint32(e,!0),e+=4,a=0;a<this.num_of_channels;a++){var s=new SpiceChannelId;e=s.from_dv(n,e,t),this.channels.push(s)}}},SpiceMsgMainInit.prototype={from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);this.session_id=a.getUint32(e,!0),e+=4,this.display_channels_hint=a.getUint32(e,!0),e+=4,this.supported_mouse_modes=a.getUint32(e,!0),e+=4,this.current_mouse_mode=a.getUint32(e,!0),e+=4,this.agent_connected=a.getUint32(e,!0),e+=4,this.agent_tokens=a.getUint32(e,!0),e+=4,this.multi_media_time=a.getUint32(e,!0),e+=4,this.ram_hint=a.getUint32(e,!0),e+=4}},SpiceMsgMainMouseMode.prototype={from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);this.supported_modes=a.getUint16(e,!0),e+=2,this.current_mode=a.getUint16(e,!0),e+=2}},SpiceMsgMainAgentData.prototype={from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);this.protocol=a.getUint32(e,!0),e+=4,this.type=a.getUint32(e,!0),e+=4,this.opaque=a.getUint64(e,!0),e+=8,this.size=a.getUint32(e,!0),e+=4,t.byteLength>e&&(this.data=t.slice(e),e+=this.data.byteLength)}},SpiceMsgMainAgentTokens.prototype={from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);this.num_tokens=a.getUint32(e,!0),e+=4}},SpiceMsgSetAck.prototype={from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);this.generation=a.getUint32(e,!0),e+=4,this.window=a.getUint32(e,!0),e+=4}},SpiceMsgcAckSync.prototype={to_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);a.setUint32(e,this.generation,!0),e+=4},buffer_size:function(){return 4}},SpiceMsgcMainMouseModeRequest.prototype={to_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);a.setUint16(e,this.mode,!0),e+=2},buffer_size:function(){return 2}},SpiceMsgcMainAgentStart.prototype={to_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);a.setUint32(e,this.num_tokens,!0),e+=4},buffer_size:function(){return 4}},SpiceMsgcMainAgentData.prototype={to_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);a.setUint32(e,this.protocol,!0),e+=4,a.setUint32(e,this.type,!0),e+=4,a.setUint64(e,this.opaque,!0),e+=8,a.setUint32(e,this.size,!0),e+=4,this.data.to_buffer(t,e)},buffer_size:function(){return 20+this.data.buffer_size()}},VDAgentAnnounceCapabilities.prototype={to_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);a.setUint32(e,this.request,!0),e+=4,a.setUint32(e,this.caps,!0),e+=4},from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);return this.request=a.getUint32(e,!0),e+=4,this.caps=a.getUint32(e,!0),e+=4},buffer_size:function(){return 8}},VDAgentMonitorsConfig.prototype={to_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);a.setUint32(e,this.num_mon,!0),e+=4,a.setUint32(e,this.flags,!0),e+=4,a.setUint32(e,this.height,!0),e+=4,a.setUint32(e,this.width,!0),e+=4,a.setUint32(e,this.depth,!0),e+=4,a.setUint32(e,this.x,!0),e+=4,a.setUint32(e,this.y,!0),e+=4},buffer_size:function(){return 28}},VDAgentFileXferStatusMessage.prototype={to_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);a.setUint32(e,this.id,!0),e+=4,a.setUint32(e,this.result,!0),e+=4},from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);return this.id=a.getUint32(e,!0),e+=4,this.result=a.getUint32(e,!0),e+=4},buffer_size:function(){return 8}},VDAgentFileXferStartMessage.prototype={to_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);a.setUint32(e,this.id,!0),e+=4;for(var n=0;n<this.string.length;n++,e++)a.setUint8(e,this.string.charCodeAt(n))},buffer_size:function(){return 4+this.string.length+1}},VDAgentFileXferDataMessage.prototype={to_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);if(a.setUint32(e,this.id,!0),e+=4,a.setUint64(e,this.size,!0),e+=8,this.data&&this.data.byteLength>0)for(var n=new Uint8Array(this.data),s=0;s<n.length;s++,e++)a.setUint8(e,n[s])},buffer_size:function(){return 12+this.size}},SpiceMsgNotify.prototype={from_buffer:function(t,e){e=e||0;var a,n=new SpiceDataView(t);for(this.time_stamp=n.getUint64(e,!0),e+=8,this.severity=n.getUint32(e,!0),e+=4,this.visibility=n.getUint32(e,!0),e+=4,this.what=n.getUint32(e,!0),e+=4,this.message_len=n.getUint32(e,!0),e+=4,this.message="",a=0;a<this.message_len;a++){var s=n.getUint8(e,!0);e++,this.message+=String.fromCharCode(s)}}},SpiceMsgcDisplayInit.prototype={to_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);a.setUint8(e,this.pixmap_cache_id,!0),e++,a.setUint64(e,this.pixmap_cache_size,!0),e+=8,a.setUint8(e,this.glz_dictionary_id,!0),e++,a.setUint32(e,this.glz_dictionary_window_size,!0),e+=4},buffer_size:function(){return 14}},SpiceMsgDisplayBase.prototype={from_dv:function(t,e,a){return this.surface_id=t.getUint32(e,!0),e+=4,this.box=new SpiceRect,e=this.box.from_dv(t,e,a),this.clip=new SpiceClip,this.clip.from_dv(t,e,a)}},SpiceMsgDisplayDrawCopy.prototype={from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);return this.base=new SpiceMsgDisplayBase,e=this.base.from_dv(a,e,t),this.data=new SpiceCopy,this.data.from_dv(a,e,t)}},SpiceMsgDisplayDrawFill.prototype={from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);return this.base=new SpiceMsgDisplayBase,e=this.base.from_dv(a,e,t),this.data=new SpiceFill,this.data.from_dv(a,e,t)}},SpiceMsgDisplayCopyBits.prototype={from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);return this.base=new SpiceMsgDisplayBase,e=this.base.from_dv(a,e,t),this.src_pos=new SpicePoint,this.src_pos.from_dv(a,e,t)}},SpiceMsgSurfaceCreate.prototype={from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);return this.surface=new SpiceSurface,this.surface.from_dv(a,e,t)}},SpiceMsgSurfaceDestroy.prototype={from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);this.surface_id=a.getUint32(e,!0),e+=4}},SpiceMsgInputsInit.prototype={from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);return this.keyboard_modifiers=a.getUint16(e,!0),e+=2}},SpiceMsgInputsKeyModifiers.prototype={from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);return this.keyboard_modifiers=a.getUint16(e,!0),e+=2}},SpiceMsgCursorInit.prototype={from_buffer:function(t,e,a){e=e||0;var n=new SpiceDataView(t);return this.position=new SpicePoint16,e=this.position.from_dv(n,e,a),this.trail_length=n.getUint16(e,!0),e+=2,this.trail_frequency=n.getUint16(e,!0),e+=2,this.visible=n.getUint8(e,!0),e++,this.cursor=new SpiceCursor,this.cursor.from_dv(n,e,t)}},SpiceMsgPlaybackData.prototype={from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);return this.time=a.getUint32(e,!0),e+=4,t.byteLength>e&&(this.data=t.slice(e),e+=this.data.byteLength),e}},SpiceMsgPlaybackMode.prototype={from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);return this.time=a.getUint32(e,!0),e+=4,this.mode=a.getUint16(e,!0),e+=2,t.byteLength>e&&(this.data=t.slice(e),e+=this.data.byteLength),e}},SpiceMsgPlaybackStart.prototype={from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);return this.channels=a.getUint32(e,!0),e+=4,this.format=a.getUint16(e,!0),e+=2,this.frequency=a.getUint32(e,!0),e+=4,this.time=a.getUint32(e,!0),e+=4}},SpiceMsgCursorSet.prototype={from_buffer:function(t,e,a){e=e||0;var n=new SpiceDataView(t);return this.position=new SpicePoint16,e=this.position.from_dv(n,e,a),this.visible=n.getUint8(e,!0),e++,this.cursor=new SpiceCursor,this.cursor.from_dv(n,e,t)}},SpiceMsgcMousePosition.prototype={to_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);return a.setUint32(e,this.x,!0),e+=4,a.setUint32(e,this.y,!0),e+=4,a.setUint16(e,this.buttons_state,!0),e+=2,a.setUint8(e,this.display_id,!0),e+=1},buffer_size:function(){return 11}},SpiceMsgcMouseMotion.prototype.to_buffer=SpiceMsgcMousePosition.prototype.to_buffer,SpiceMsgcMouseMotion.prototype.buffer_size=SpiceMsgcMousePosition.prototype.buffer_size,SpiceMsgcMousePress.prototype={to_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);return a.setUint8(e,this.button,!0),e++,a.setUint16(e,this.buttons_state,!0),e+=2},buffer_size:function(){return 3}},SpiceMsgcMouseRelease.prototype.to_buffer=SpiceMsgcMousePress.prototype.to_buffer,SpiceMsgcMouseRelease.prototype.buffer_size=SpiceMsgcMousePress.prototype.buffer_size,SpiceMsgcKeyDown.prototype={to_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);return a.setUint32(e,this.code,!0),e+=4},buffer_size:function(){return 4}},SpiceMsgcKeyUp.prototype.to_buffer=SpiceMsgcKeyDown.prototype.to_buffer,SpiceMsgcKeyUp.prototype.buffer_size=SpiceMsgcKeyDown.prototype.buffer_size,SpiceMsgDisplayStreamCreate.prototype={from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);this.surface_id=a.getUint32(e,!0),e+=4,this.id=a.getUint32(e,!0),e+=4,this.flags=a.getUint8(e,!0),e+=1,this.codec_type=a.getUint8(e,!0),e+=1,this.stamp=a.getUint64(e,!0),e+=8,this.stream_width=a.getUint32(e,!0),e+=4,this.stream_height=a.getUint32(e,!0),e+=4,this.src_width=a.getUint32(e,!0),e+=4,this.src_height=a.getUint32(e,!0),e+=4,this.dest=new SpiceRect,e=this.dest.from_dv(a,e,t),this.clip=new SpiceClip,this.clip.from_dv(a,e,t)}},SpiceStreamDataHeader.prototype={from_dv:function(t,e){return this.id=t.getUint32(e,!0),e+=4,this.multi_media_time=t.getUint32(e,!0),e+=4}},SpiceMsgDisplayStreamData.prototype={from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);this.base=new SpiceStreamDataHeader,e=this.base.from_dv(a,e,t),this.data_size=a.getUint32(e,!0),e+=4,this.data=a.u8.subarray(e,e+this.data_size)}},SpiceMsgDisplayStreamClip.prototype={from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);this.id=a.getUint32(e,!0),e+=4,this.clip=new SpiceClip,this.clip.from_dv(a,e,t)}},SpiceMsgDisplayStreamDestroy.prototype={from_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);this.id=a.getUint32(e,!0),e+=4}},SpiceMsgDisplayInvalList.prototype={from_buffer:function(t,e){var a;e=e||0;var n=new SpiceDataView(t);for(this.count=n.getUint16(e,!0),e+=2,a=0;a<this.count;a++)this.resources[a]={},this.resources[a].type=n.getUint8(e,!0),e++,this.resources[a].id=n.getUint64(e,!0),e+=8}},define("spice-spicemsg",function(){}),SpiceWireReader.prototype={inbound:function(t){if(0==this.needed)return void this.buffers.push(t);for(0==this.buffers.length&&t.byteLength>=this.needed?(t.byteLength>this.needed&&(this.buffers.push(t.slice(this.needed)),t=t.slice(0,this.needed)),this.callback.call(this.sc,t,this.saved_msg_header||void 0)):this.buffers.push(t);this.buffers.length>1&&this.buffers[0].byteLength<this.needed;){var e=this.buffers.shift(),a=this.buffers.shift();this.buffers.unshift(combine_array_buffers(e,a))}for(;this.buffers.length>0&&this.buffers[0].byteLength>=this.needed;)t=this.buffers.shift(),t.byteLength>this.needed&&(this.buffers.unshift(t.slice(this.needed)),t=t.slice(0,this.needed)),this.callback.call(this.sc,t,this.saved_msg_header||void 0)},request:function(t){this.needed=t},save_header:function(t){this.saved_msg_header=t},clear_header:function(){this.saved_msg_header=void 0}},define("spice-wire",function(){}),SpiceDisplayConn.prototype=Object.create(SpiceConn.prototype),SpiceDisplayConn.prototype.process_channel_message=function(t){if(t.type==SPICE_MSG_DISPLAY_MARK)return this.known_unimplemented(t.type,"Display Mark"),!0;if(t.type==SPICE_MSG_DISPLAY_RESET)return DEBUG>2&&console.log("Display reset"),this.surfaces[this.primary_surface].canvas.context.restore(),!0;if(t.type==SPICE_MSG_DISPLAY_DRAW_COPY){var e=new SpiceMsgDisplayDrawCopy(t.data);if(DEBUG>1&&this.log_draw("DrawCopy",e),e.base.box.is_same_size(e.data.src_area)||this.log_warn("FIXME: DrawCopy src_area is a different size than base.box; we do not handle that yet."),e.base.clip.type!=SPICE_CLIP_TYPE_NONE&&this.log_warn("FIXME: DrawCopy we don't handle clipping yet"),e.data.rop_descriptor!=SPICE_ROPD_OP_PUT&&this.log_warn("FIXME: DrawCopy we don't handle ropd type: "+e.data.rop_descriptor),e.data.mask.flags&&this.log_warn("FIXME: DrawCopy we don't handle mask flag: "+e.data.mask.flags),e.data.mask.bitmap&&this.log_warn("FIXME: DrawCopy we don't handle mask"),e.data&&e.data.src_bitmap){if(e.data.src_bitmap.descriptor.flags&&e.data.src_bitmap.descriptor.flags!=SPICE_IMAGE_FLAGS_CACHE_ME&&e.data.src_bitmap.descriptor.flags!=SPICE_IMAGE_FLAGS_HIGH_BITS_SET&&(this.log_warn("FIXME: DrawCopy unhandled image flags: "+e.data.src_bitmap.descriptor.flags),1>=DEBUG&&this.log_draw("DrawCopy",e)),e.data.src_bitmap.descriptor.type==SPICE_IMAGE_TYPE_QUIC){var a=this.surfaces[e.base.surface_id].canvas;if(!e.data.src_bitmap.quic)return this.log_warn("FIXME: DrawCopy could not handle this QUIC file."),!1;var n=convert_spice_quic_to_web(a.context,e.data.src_bitmap.quic);return this.draw_copy_helper({base:e.base,src_area:e.data.src_area,image_data:n,tag:"copyquic."+e.data.src_bitmap.quic.type,has_alpha:e.data.src_bitmap.quic.type==QUIC_IMAGE_TYPE_RGBA?!0:!1,descriptor:e.data.src_bitmap.descriptor})}if(e.data.src_bitmap.descriptor.type==SPICE_IMAGE_TYPE_FROM_CACHE||e.data.src_bitmap.descriptor.type==SPICE_IMAGE_TYPE_FROM_CACHE_LOSSLESS)return this.cache&&this.cache[e.data.src_bitmap.descriptor.id]?this.draw_copy_helper({base:e.base,src_area:e.data.src_area,image_data:this.cache[e.data.src_bitmap.descriptor.id],tag:"copycache."+e.data.src_bitmap.descriptor.id,has_alpha:!0,descriptor:e.data.src_bitmap.descriptor}):(this.log_warn("FIXME: DrawCopy did not find image id "+e.data.src_bitmap.descriptor.id+" in cache."),!1);if(e.data.src_bitmap.descriptor.type==SPICE_IMAGE_TYPE_SURFACE){var s=this.surfaces[e.data.src_bitmap.surface_id].canvas.context,n=(this.surfaces[e.base.surface_id].canvas.context,s.getImageData(e.data.src_area.left,e.data.src_area.top,e.data.src_area.right-e.data.src_area.left,e.data.src_area.bottom-e.data.src_area.top)),i=new SpiceRect;return i.top=i.left=0,i.right=n.width,i.bottom=n.height,this.draw_copy_helper({base:e.base,src_area:i,image_data:n,tag:"copysurf."+e.data.src_bitmap.surface_id,has_alpha:this.surfaces[e.data.src_bitmap.surface_id].format==SPICE_SURFACE_FMT_32_xRGB?!1:!0,descriptor:e.data.src_bitmap.descriptor})}if(e.data.src_bitmap.descriptor.type==SPICE_IMAGE_TYPE_JPEG){if(!e.data.src_bitmap.jpeg)return this.log_warn("FIXME: DrawCopy could not handle this JPEG file."),!1;var r,o="data:image/jpeg,",l=new Image,c=new Uint8Array(e.data.src_bitmap.jpeg.data);for(r=0;r<c.length;r++)o+="%",c[r]<16&&(o+="0"),o+=c[r].toString(16);return l.o={base:e.base,tag:"jpeg."+e.data.src_bitmap.surface_id,descriptor:e.data.src_bitmap.descriptor,sc:this},l.onload=handle_draw_jpeg_onload,l.src=o,!0}if(e.data.src_bitmap.descriptor.type==SPICE_IMAGE_TYPE_JPEG_ALPHA){if(!e.data.src_bitmap.jpeg_alpha)return this.log_warn("FIXME: DrawCopy could not handle this JPEG ALPHA file."),!1;var r,o="data:image/jpeg,",l=new Image,c=new Uint8Array(e.data.src_bitmap.jpeg_alpha.data);for(r=0;r<c.length;r++)o+="%",c[r]<16&&(o+="0"),o+=c[r].toString(16);if(l.o={base:e.base,tag:"jpeg."+e.data.src_bitmap.surface_id,descriptor:e.data.src_bitmap.descriptor,sc:this},this.surfaces[e.base.surface_id].format==SPICE_SURFACE_FMT_32_ARGB){var a=this.surfaces[e.base.surface_id].canvas;l.alpha_img=convert_spice_lz_to_web(a.context,e.data.src_bitmap.jpeg_alpha.alpha)}return l.onload=handle_draw_jpeg_onload,l.src=o,!0}if(e.data.src_bitmap.descriptor.type==SPICE_IMAGE_TYPE_BITMAP){var a=this.surfaces[e.base.surface_id].canvas;if(!e.data.src_bitmap.bitmap)return this.log_err("null bitmap"),!1;var n=convert_spice_bitmap_to_web(a.context,e.data.src_bitmap.bitmap);return n?this.draw_copy_helper({base:e.base,src_area:e.data.src_area,image_data:n,tag:"bitmap."+e.data.src_bitmap.bitmap.format,has_alpha:e.data.src_bitmap.bitmap==SPICE_BITMAP_FMT_32BIT?!1:!0,descriptor:e.data.src_bitmap.descriptor}):(this.log_warn("FIXME: Unable to interpret bitmap of format: "+e.data.src_bitmap.bitmap.format),!1)}if(e.data.src_bitmap.descriptor.type==SPICE_IMAGE_TYPE_LZ_RGB){var a=this.surfaces[e.base.surface_id].canvas;if(!e.data.src_bitmap.lz_rgb)return this.log_err("null lz_rgb "),!1;1!=e.data.src_bitmap.lz_rgb.top_down&&this.log_warn("FIXME: Implement non top down support for lz_rgb");var n=convert_spice_lz_to_web(a.context,e.data.src_bitmap.lz_rgb);return n?this.draw_copy_helper({base:e.base,src_area:e.data.src_area,image_data:n,tag:"lz_rgb."+e.data.src_bitmap.lz_rgb.type,has_alpha:e.data.src_bitmap.lz_rgb.type==LZ_IMAGE_TYPE_RGBA?!0:!1,descriptor:e.data.src_bitmap.descriptor}):(this.log_warn("FIXME: Unable to interpret bitmap of type: "+e.data.src_bitmap.lz_rgb.type),!1)}return this.log_warn("FIXME: DrawCopy unhandled image type: "+e.data.src_bitmap.descriptor.type),this.log_draw("DrawCopy",e),!1}return this.log_warn("FIXME: DrawCopy no src_bitmap."),!1}if(t.type==SPICE_MSG_DISPLAY_DRAW_FILL){var d=new SpiceMsgDisplayDrawFill(t.data);if(DEBUG>1&&this.log_draw("DrawFill",d),d.data.rop_descriptor!=SPICE_ROPD_OP_PUT&&this.log_warn("FIXME: DrawFill we don't handle ropd type: "+d.data.rop_descriptor),d.data.mask.flags&&this.log_warn("FIXME: DrawFill we don't handle mask flag: "+d.data.mask.flags),d.data.mask.bitmap&&this.log_warn("FIXME: DrawFill we don't handle mask"),d.data.brush.type==SPICE_BRUSH_TYPE_SOLID){var u=16777215&d.data.brush.color,p="rgb("+(u>>16)+", "+(u>>8&255)+", "+(255&u)+")";if(this.surfaces[d.base.surface_id].canvas.context.fillStyle=p,this.surfaces[d.base.surface_id].canvas.context.fillRect(d.base.box.left,d.base.box.top,d.base.box.right-d.base.box.left,d.base.box.bottom-d.base.box.top),DUMP_DRAWS&&this.parent.dump_id){var h=document.createElement("canvas");h.setAttribute("width",this.surfaces[d.base.surface_id].canvas.width),h.setAttribute("height",this.surfaces[d.base.surface_id].canvas.height),h.setAttribute("id","fillbrush."+d.base.surface_id+"."+this.surfaces[d.base.surface_id].draw_count),h.getContext("2d").fillStyle=p,h.getContext("2d").fillRect(d.base.box.left,d.base.box.top,d.base.box.right-d.base.box.left,d.base.box.bottom-d.base.box.top),document.getElementById(this.parent.dump_id).appendChild(h)}this.surfaces[d.base.surface_id].draw_count++}else this.log_warn("FIXME: DrawFill can't handle brush type: "+d.data.brush.type);return!0}if(t.type==SPICE_MSG_DISPLAY_COPY_BITS){var f=new SpiceMsgDisplayCopyBits(t.data);DEBUG>1&&this.log_draw("CopyBits",f);var m=this.surfaces[f.base.surface_id].canvas,s=m.context,_=m.width-f.src_pos.x,b=m.height-f.src_pos.y;_>f.base.box.right-f.base.box.left&&(_=f.base.box.right-f.base.box.left),b>f.base.box.bottom-f.base.box.top&&(b=f.base.box.bottom-f.base.box.top);var n=s.getImageData(f.src_pos.x,f.src_pos.y,_,b);if(putImageDataWithAlpha(s,n,f.base.box.left,f.base.box.top),DUMP_DRAWS&&this.parent.dump_id){var h=document.createElement("canvas");h.setAttribute("width",_),h.setAttribute("height",b),h.setAttribute("id","copybits"+f.base.surface_id+"."+this.surfaces[f.base.surface_id].draw_count),h.getContext("2d").putImageData(n,0,0),document.getElementById(this.parent.dump_id).appendChild(h)}return this.surfaces[f.base.surface_id].draw_count++,!0}if(t.type==SPICE_MSG_DISPLAY_INVAL_ALL_PALETTES)return this.known_unimplemented(t.type,"Inval All Palettes"),!0;if(t.type==SPICE_MSG_DISPLAY_SURFACE_CREATE){"surfaces"in this||(this.surfaces=[]);var v=new SpiceMsgSurfaceCreate(t.data);if(DEBUG>1&&console.log(this.type+": MsgSurfaceCreate id "+v.surface.surface_id+"; "+v.surface.width+"x"+v.surface.height+"; format "+v.surface.format+"; flags "+v.surface.flags),v.surface.format!=SPICE_SURFACE_FMT_32_xRGB&&v.surface.format!=SPICE_SURFACE_FMT_32_ARGB)return this.log_warn("FIXME: cannot handle surface format "+v.surface.format+" yet."),!1;var a=document.createElement("canvas");return a.setAttribute("width",v.surface.width),a.setAttribute("height",v.surface.height),a.setAttribute("id","spice_surface_"+v.surface.surface_id),a.setAttribute("tabindex",v.surface.surface_id),a.context=a.getContext("2d"),DUMP_CANVASES&&this.parent.dump_id&&document.getElementById(this.parent.dump_id).appendChild(a),v.surface.canvas=a,v.surface.draw_count=0,this.surfaces[v.surface.surface_id]=v.surface,v.surface.flags&SPICE_SURFACE_FLAGS_PRIMARY&&(this.primary_surface=v.surface.surface_id,a.context.save(),document.getElementById(this.parent.screen_id).appendChild(a),document.getElementById(this.parent.screen_id).style.height=v.surface.height+"px",this.hook_events()),!0}if(t.type==SPICE_MSG_DISPLAY_SURFACE_DESTROY){var v=new SpiceMsgSurfaceDestroy(t.data);return DEBUG>1&&console.log(this.type+": MsgSurfaceDestroy id "+v.surface_id),this.delete_surface(v.surface_id),!0}if(t.type==SPICE_MSG_DISPLAY_STREAM_CREATE){var v=new SpiceMsgDisplayStreamCreate(t.data);return DEBUG>1&&console.log(this.type+": MsgStreamCreate id"+v.id),this.streams||(this.streams=new Array),this.streams[v.id]?console.log("Stream already exists"):this.streams[v.id]=v,v.codec_type!=SPICE_VIDEO_CODEC_TYPE_MJPEG&&console.log("Unhandled stream codec: "+v.codec_type),!0}if(t.type==SPICE_MSG_DISPLAY_STREAM_DATA){var v=new SpiceMsgDisplayStreamData(t.data);if(!this.streams[v.base.id])return console.log("no stream for data"),!1;if(this.streams[v.base.id].codec_type===SPICE_VIDEO_CODEC_TYPE_MJPEG){var r,o="data:image/jpeg,",l=new Image;for(r=0;r<v.data.length;r++)o+="%",v.data[r]<16&&(o+="0"),o+=v.data[r].toString(16);var g=new SpiceMsgDisplayBase;g.surface_id=this.streams[v.base.id].surface_id,g.box=this.streams[v.base.id].dest,g.clip=this.streams[v.base.id].clip,l.o={base:g,tag:"mjpeg."+v.base.id,descriptor:null,sc:this},l.onload=handle_draw_jpeg_onload,l.src=o}return!0}if(t.type==SPICE_MSG_DISPLAY_STREAM_CLIP){var v=new SpiceMsgDisplayStreamClip(t.data);return DEBUG>1&&console.log(this.type+": MsgStreamClip id"+v.id),this.streams[v.id].clip=v.clip,!0}if(t.type==SPICE_MSG_DISPLAY_STREAM_DESTROY){var v=new SpiceMsgDisplayStreamDestroy(t.data);return DEBUG>1&&console.log(this.type+": MsgStreamDestroy id"+v.id),this.streams[v.id]=void 0,!0}if(t.type==SPICE_MSG_DISPLAY_INVAL_LIST){var r,v=new SpiceMsgDisplayInvalList(t.data);for(DEBUG>1&&console.log(this.type+": MsgInvalList "+v.count+" items"),r=0;r<v.count;r++)void 0!=this.cache[v.resources[r].id]&&delete this.cache[v.resources[r].id];return!0}return!1},SpiceDisplayConn.prototype.delete_surface=function(t){var e=document.getElementById("spice_surface_"+t);DUMP_CANVASES&&this.parent.dump_id&&document.getElementById(this.parent.dump_id).removeChild(e),this.primary_surface==t&&(this.unhook_events(),this.primary_surface=void 0,document.getElementById(this.parent.screen_id).removeChild(e)),delete this.surfaces[t]},SpiceDisplayConn.prototype.draw_copy_helper=function(t){var e=this.surfaces[t.base.surface_id].canvas;if(t.has_alpha?this.surfaces[t.base.surface_id].format==SPICE_SURFACE_FMT_32_xRGB?(stripAlpha(t.image_data),e.context.putImageData(t.image_data,t.base.box.left,t.base.box.top)):putImageDataWithAlpha(e.context,t.image_data,t.base.box.left,t.base.box.top):e.context.putImageData(t.image_data,t.base.box.left,t.base.box.top),(t.src_area.left>0||t.src_area.top>0)&&this.log_warn("FIXME: DrawCopy not shifting draw copies just yet..."),t.descriptor&&t.descriptor.flags&SPICE_IMAGE_FLAGS_CACHE_ME&&("cache"in this||(this.cache={}),this.cache[t.descriptor.id]=t.image_data),DUMP_DRAWS&&this.parent.dump_id){var a=document.createElement("canvas");a.setAttribute("width",t.image_data.width),a.setAttribute("height",t.image_data.height),a.setAttribute("id",t.tag+"."+this.surfaces[t.base.surface_id].draw_count+"."+t.base.surface_id+"@"+t.base.box.left+"x"+t.base.box.top),a.getContext("2d").putImageData(t.image_data,0,0),document.getElementById(this.parent.dump_id).appendChild(a)}return this.surfaces[t.base.surface_id].draw_count++,!0},SpiceDisplayConn.prototype.log_draw=function(t,e){var a=t+"."+e.base.surface_id+"."+this.surfaces[e.base.surface_id].draw_count+": ";a+="base.box "+e.base.box.left+", "+e.base.box.top+" to "+e.base.box.right+", "+e.base.box.bottom,a+="; clip.type "+e.base.clip.type,e.data&&(e.data.src_area&&(a+="; src_area "+e.data.src_area.left+", "+e.data.src_area.top+" to "+e.data.src_area.right+", "+e.data.src_area.bottom),e.data.src_bitmap&&null!=e.data.src_bitmap?(a+="; src_bitmap id: "+e.data.src_bitmap.descriptor.id,a+="; src_bitmap width "+e.data.src_bitmap.descriptor.width+", height "+e.data.src_bitmap.descriptor.height,a+="; src_bitmap type "+e.data.src_bitmap.descriptor.type+", flags "+e.data.src_bitmap.descriptor.flags,void 0!==e.data.src_bitmap.surface_id&&(a+="; src_bitmap surface_id "+e.data.src_bitmap.surface_id),e.data.src_bitmap.quic&&(a+="; QUIC type "+e.data.src_bitmap.quic.type+"; width "+e.data.src_bitmap.quic.width+"; height "+e.data.src_bitmap.quic.height),e.data.src_bitmap.lz_rgb&&(a+="; LZ_RGB length "+e.data.src_bitmap.lz_rgb.length+"; magic "+e.data.src_bitmap.lz_rgb.magic+"; version 0x"+e.data.src_bitmap.lz_rgb.version.toString(16)+"; type "+e.data.src_bitmap.lz_rgb.type+"; width "+e.data.src_bitmap.lz_rgb.width+"; height "+e.data.src_bitmap.lz_rgb.height+"; stride "+e.data.src_bitmap.lz_rgb.stride+"; top down "+e.data.src_bitmap.lz_rgb.top_down)):a+="; src_bitmap is null",e.data.brush&&(e.data.brush.type==SPICE_BRUSH_TYPE_SOLID&&(a+="; brush.color 0x"+e.data.brush.color.toString(16)),e.data.brush.type==SPICE_BRUSH_TYPE_PATTERN&&(a+="; brush.pat ",a+=null!=e.data.brush.pattern.pat?"[SpiceImage]":"[null]",a+=" at "+e.data.brush.pattern.pos.x+", "+e.data.brush.pattern.pos.y)),a+="; rop_descriptor "+e.data.rop_descriptor,void 0!==e.data.scale_mode&&(a+="; scale_mode "+e.data.scale_mode),a+="; mask.flags "+e.data.mask.flags,a+="; mask.pos "+e.data.mask.pos.x+", "+e.data.mask.pos.y,null!=e.data.mask.bitmap?(a+="; mask.bitmap width "+e.data.mask.bitmap.descriptor.width+", height "+e.data.mask.bitmap.descriptor.height,a+="; mask.bitmap type "+e.data.mask.bitmap.descriptor.type+", flags "+e.data.mask.bitmap.descriptor.flags):a+="; mask.bitmap is null"),console.log(a)},SpiceDisplayConn.prototype.hook_events=function(){if(void 0!==this.primary_surface){var t=this.surfaces[this.primary_surface].canvas;t.sc=this.parent,t.addEventListener("mousemove",handle_mousemove),t.addEventListener("mousedown",handle_mousedown),t.addEventListener("contextmenu",handle_contextmenu),t.addEventListener("mouseup",handle_mouseup),t.addEventListener("keydown",handle_keydown),t.addEventListener("keyup",handle_keyup),t.addEventListener("mouseout",handle_mouseout),t.addEventListener("mouseover",handle_mouseover),t.addEventListener("wheel",handle_mousewheel),t.focus()}},SpiceDisplayConn.prototype.unhook_events=function(){if(void 0!==this.primary_surface){var t=this.surfaces[this.primary_surface].canvas;t.removeEventListener("mousemove",handle_mousemove),t.removeEventListener("mousedown",handle_mousedown),t.removeEventListener("contextmenu",handle_contextmenu),t.removeEventListener("mouseup",handle_mouseup),t.removeEventListener("keydown",handle_keydown),t.removeEventListener("keyup",handle_keyup),t.removeEventListener("mouseout",handle_mouseout),t.removeEventListener("mouseover",handle_mouseover),t.removeEventListener("wheel",handle_mousewheel)
}},SpiceDisplayConn.prototype.destroy_surfaces=function(){for(var t in this.surfaces)this.delete_surface(this.surfaces[t].surface_id);this.surfaces=void 0},define("spice-display",["spice-spiceconn"],function(){});var Shift_state=-1,Ctrl_state=-1,Alt_state=-1,Meta_state=-1;SpiceInputsConn.prototype=Object.create(SpiceConn.prototype),SpiceInputsConn.prototype.process_channel_message=function(t){if(t.type==SPICE_MSG_INPUTS_INIT){var e=new SpiceMsgInputsInit(t.data);return this.keyboard_modifiers=e.keyboard_modifiers,DEBUG>1&&console.log("MsgInputsInit - modifier "+this.keyboard_modifiers),!0}if(t.type==SPICE_MSG_INPUTS_KEY_MODIFIERS){var a=new SpiceMsgInputsKeyModifiers(t.data);return this.keyboard_modifiers=a.keyboard_modifiers,DEBUG>1&&console.log("MsgInputsKeyModifiers - modifier "+this.keyboard_modifiers),!0}return t.type==SPICE_MSG_INPUTS_MOUSE_MOTION_ACK?(DEBUG>1&&console.log("mouse motion ack"),this.waiting_for_ack-=SPICE_INPUT_MOTION_ACK_BUNCH,!0):!1},define("spice-inputs",["spice-spiceconn"],function(){});var EBML_HEADER=[26,69,223,163],EBML_HEADER_VERSION=[66,134],EBML_HEADER_READ_VERSION=[66,247],EBML_HEADER_MAX_ID_LENGTH=[66,242],EBML_HEADER_MAX_SIZE_LENGTH=[66,243],EBML_HEADER_DOC_TYPE=[66,130],EBML_HEADER_DOC_TYPE_VERSION=[66,135],EBML_HEADER_DOC_TYPE_READ_VERSION=[66,133],WEBM_SEGMENT_HEADER=[24,83,128,103],WEBM_SEGMENT_INFORMATION=[21,73,169,102],WEBM_TIMECODE_SCALE=[42,215,177],WEBM_MUXING_APP=[77,128],WEBM_WRITING_APP=[87,65],WEBM_SEEK_HEAD=[17,77,155,116],WEBM_SEEK=[77,187],WEBM_SEEK_ID=[83,171],WEBM_SEEK_POSITION=[83,172],WEBM_TRACKS=[22,84,174,107],WEBM_TRACK_ENTRY=[174],WEBM_TRACK_NUMBER=[215],WEBM_TRACK_UID=[115,197],WEBM_TRACK_TYPE=[131],WEBM_FLAG_ENABLED=[185],WEBM_FLAG_DEFAULT=[136],WEBM_FLAG_FORCED=[85,170],WEBM_FLAG_LACING=[156],WEBM_MIN_CACHE=[109,231],WEBM_MAX_BLOCK_ADDITION_ID=[85,238],WEBM_CODEC_DECODE_ALL=[170],WEBM_SEEK_PRE_ROLL=[86,187],WEBM_CODEC_DELAY=[86,170],WEBM_CODEC_PRIVATE=[99,162],WEBM_CODEC_ID=[134],WEBM_AUDIO=[225],WEBM_SAMPLING_FREQUENCY=[181],WEBM_CHANNELS=[159],WEBM_CLUSTER=[31,67,182,117],WEBM_TIME_CODE=[231],WEBM_SIMPLE_BLOCK=[163],CLUSTER_SIMPLEBLOCK_FLAG_KEYFRAME=128,OPUS_FREQUENCY=48e3,OPUS_CHANNELS=2,SPICE_PLAYBACK_CODEC='audio/webm; codecs="opus"',MAX_CLUSTER_TIME=1e3,GAP_DETECTION_THRESHOLD=50;EBMLHeader.prototype={to_buffer:function(t,e){e=e||0;var a=new DataView(t);return e=EBML_write_array(this.id,a,e),e=EBML_write_u64_data_len(31,a,e),e=EBML_write_u8_value(EBML_HEADER_VERSION,this.Version,a,e),e=EBML_write_u8_value(EBML_HEADER_READ_VERSION,this.ReadVersion,a,e),e=EBML_write_u8_value(EBML_HEADER_MAX_ID_LENGTH,this.MaxIDLength,a,e),e=EBML_write_u8_value(EBML_HEADER_MAX_SIZE_LENGTH,this.MaxSizeLength,a,e),e=EBML_write_data(EBML_HEADER_DOC_TYPE,this.DocType,a,e),e=EBML_write_u8_value(EBML_HEADER_DOC_TYPE_VERSION,this.DocTypeVersion,a,e),e=EBML_write_u8_value(EBML_HEADER_DOC_TYPE_READ_VERSION,this.DocTypeReadVersion,a,e)},buffer_size:function(){return 39+this.id.length}},webm_Segment.prototype={to_buffer:function(t,e){e=e||0;var a=new DataView(t);return e=EBML_write_array(this.id,a,e),a.setUint8(e++,255),e},buffer_size:function(){return this.id.length+1}},webm_SegmentInformation.prototype={to_buffer:function(t,e){e=e||0;var a=new DataView(t);return e=EBML_write_array(this.id,a,e),e=EBML_write_u64_data_len(this.buffer_size()-8-this.id.length,a,e),e=EBML_write_u32_value(WEBM_TIMECODE_SCALE,this.timecode_scale,a,e),e=EBML_write_data(WEBM_MUXING_APP,this.muxing_app,a,e),e=EBML_write_data(WEBM_WRITING_APP,this.writing_app,a,e)},buffer_size:function(){return this.id.length+8+WEBM_TIMECODE_SCALE.length+1+4+WEBM_MUXING_APP.length+1+this.muxing_app.length+WEBM_WRITING_APP.length+1+this.writing_app.length}},webm_Audio.prototype={to_buffer:function(t,e){e=e||0;var a=new DataView(t);return e=EBML_write_array(this.id,a,e),e=EBML_write_u64_data_len(this.buffer_size()-8-this.id.length,a,e),e=EBML_write_u8_value(WEBM_CHANNELS,this.channels,a,e),e=EBML_write_float_value(WEBM_SAMPLING_FREQUENCY,this.sampling_frequency,a,e)},buffer_size:function(){return this.id.length+8+WEBM_SAMPLING_FREQUENCY.length+1+4+WEBM_CHANNELS.length+1+1}},webm_Seek.prototype={to_buffer:function(t,e){e=e||0;var a=new DataView(t);return e=EBML_write_array(this.id,a,e),e=EBML_write_u1_data_len(this.buffer_size()-1-this.id.length,a,e),e=EBML_write_data(WEBM_SEEK_ID,this.seekid,a,e),e=EBML_write_u16_value(WEBM_SEEK_POSITION,this.pos,a,e)},buffer_size:function(){return this.id.length+1+WEBM_SEEK_ID.length+1+this.seekid.length+WEBM_SEEK_POSITION.length+1+2}},webm_SeekHead.prototype={to_buffer:function(t,e){e=e||0;var a=new DataView(t);return e=EBML_write_array(this.id,a,e),e=EBML_write_u64_data_len(this.buffer_size()-8-this.id.length,a,e),e=this.info.to_buffer(t,e),e=this.track.to_buffer(t,e)},buffer_size:function(){return this.id.length+8+this.info.buffer_size()+this.track.buffer_size()}},webm_TrackEntry.prototype={to_buffer:function(t,e){e=e||0;var a=new DataView(t);return e=EBML_write_array(this.id,a,e),e=EBML_write_u64_data_len(this.buffer_size()-8-this.id.length,a,e),e=EBML_write_u8_value(WEBM_TRACK_NUMBER,this.number,a,e),e=EBML_write_u8_value(WEBM_TRACK_UID,this.uid,a,e),e=EBML_write_u8_value(WEBM_FLAG_ENABLED,this.flag_enabled,a,e),e=EBML_write_u8_value(WEBM_FLAG_DEFAULT,this.flag_default,a,e),e=EBML_write_u8_value(WEBM_FLAG_FORCED,this.flag_forced,a,e),e=EBML_write_u8_value(WEBM_FLAG_LACING,this.flag_lacing,a,e),e=EBML_write_data(WEBM_CODEC_ID,this.codec_id,a,e),e=EBML_write_u8_value(WEBM_MIN_CACHE,this.min_cache,a,e),e=EBML_write_u8_value(WEBM_MAX_BLOCK_ADDITION_ID,this.max_block_addition_id,a,e),e=EBML_write_u8_value(WEBM_CODEC_DECODE_ALL,this.codec_decode_all,a,e),e=EBML_write_u32_value(WEBM_CODEC_DELAY,this.codec_delay,a,e),e=EBML_write_u32_value(WEBM_SEEK_PRE_ROLL,this.seek_pre_roll,a,e),e=EBML_write_u8_value(WEBM_TRACK_TYPE,this.type,a,e),e=EBML_write_data(WEBM_CODEC_PRIVATE,this.codec_private,a,e),e=this.audio.to_buffer(t,e)},buffer_size:function(){return this.id.length+8+WEBM_TRACK_NUMBER.length+1+1+WEBM_TRACK_UID.length+1+1+WEBM_TRACK_TYPE.length+1+1+WEBM_FLAG_ENABLED.length+1+1+WEBM_FLAG_DEFAULT.length+1+1+WEBM_FLAG_FORCED.length+1+1+WEBM_FLAG_LACING.length+1+1+WEBM_MIN_CACHE.length+1+1+WEBM_MAX_BLOCK_ADDITION_ID.length+1+1+WEBM_CODEC_DECODE_ALL.length+1+1+WEBM_SEEK_PRE_ROLL.length+1+4+WEBM_CODEC_DELAY.length+1+4+WEBM_CODEC_ID.length+this.codec_id.length+1+WEBM_CODEC_PRIVATE.length+1+this.codec_private.length+this.audio.buffer_size()}},webm_Tracks.prototype={to_buffer:function(t,e){e=e||0;var a=new DataView(t);return e=EBML_write_array(this.id,a,e),e=EBML_write_u64_data_len(this.buffer_size()-8-this.id.length,a,e),e=this.track_entry.to_buffer(t,e)},buffer_size:function(){return this.id.length+8+this.track_entry.buffer_size()}},webm_Cluster.prototype={to_buffer:function(t,e){e=e||0;var a=new DataView(t);return e=EBML_write_array(this.id,a,e),a.setUint8(e++,255),e=EBML_write_u32_value(WEBM_TIME_CODE,this.timecode,a,e)},buffer_size:function(){return this.id.length+1+WEBM_TIME_CODE.length+1+4}},webm_SimpleBlock.prototype={to_buffer:function(t,e){e=e||0;var a=new DataView(t);e=EBML_write_array(this.id,a,e),e=EBML_write_u64_data_len(this.data.byteLength+4,a,e),e=EBML_write_u1_data_len(1,a,e),a.setUint16(e,this.timecode),e+=2,a.setUint8(e,this.keyframe?CLUSTER_SIMPLEBLOCK_FLAG_KEYFRAME:0),e+=1;for(var n=new Uint8Array(this.data),s=0;s<this.data.byteLength;s++)a.setUint8(e++,n[s]);return e},buffer_size:function(){return this.id.length+8+1+2+1+this.data.byteLength}},webm_Header.prototype={to_buffer:function(t,e){return e=e||0,e=this.ebml.to_buffer(t,e),e=this.segment.to_buffer(t,e),e=this.info.to_buffer(t,e),e=this.tracks.to_buffer(t,e)},buffer_size:function(){return this.ebml.buffer_size()+this.segment.buffer_size()+this.info.buffer_size()+this.tracks.buffer_size()}},define("spice-webm",function(){}),SpicePlaybackConn.prototype=Object.create(SpiceConn.prototype),SpicePlaybackConn.prototype.process_channel_message=function(t){if(!window.MediaSource)return this.log_err("MediaSource API is not available"),!1;if(t.type==SPICE_MSG_PLAYBACK_START){var e=new SpiceMsgPlaybackStart(t.data);if(DEBUG>0&&console.log("PlaybackStart; frequency "+e.frequency),e.frequency!=OPUS_FREQUENCY)return this.log_err("This player cannot handle frequency "+e.frequency),!1;if(e.channels!=OPUS_CHANNELS)return this.log_err("This player cannot handle "+e.channels+" channels"),!1;if(e.format!=SPICE_AUDIO_FMT_S16)return this.log_err("This player cannot format "+e.format),!1;if(!this.source_buffer)return this.media_source=new MediaSource,this.media_source.spiceconn=this,this.audio=document.createElement("audio"),this.audio.setAttribute("autoplay",!0),this.audio.src=window.URL.createObjectURL(this.media_source),document.getElementById(this.parent.screen_id).appendChild(this.audio),this.media_source.addEventListener("sourceopen",handle_source_open,!1),this.media_source.addEventListener("sourceended",handle_source_ended,!1),this.media_source.addEventListener("sourceclosed",handle_source_closed,!1),this.bytes_written=0,!0}if(t.type==SPICE_MSG_PLAYBACK_DATA){var a=new SpiceMsgPlaybackData(t.data);return this.last_data_time&&a.time<=this.last_data_time&&(DEBUG>1&&console.log("Hacking time of "+a.time+" to "+this.last_data_time+1),a.time=this.last_data_time+1),this.last_data_time&&a.time>=this.last_data_time+GAP_DETECTION_THRESHOLD&&(this.skip_until=a.time,this.gap_time=a.time-this.start_time-(1e3*this.source_buffer.buffered.end(this.source_buffer.buffered.end.length-1)).toFixed(0)),this.last_data_time=a.time,DEBUG>1&&console.log("PlaybackData; time "+a.time+"; length "+a.data.byteLength),this.source_buffer?(0==this.start_time?this.start_playback(a):a.time-this.cluster_time>=MAX_CLUSTER_TIME||this.skip_until>0?this.new_cluster(a):this.simple_block(a,!1),this.skip_until>0&&(this.audio.currentTime=(this.skip_until-this.start_time-this.gap_time)/1e3,this.skip_until=0),this.audio.paused&&this.audio.play(),!0):!0}if(t.type==SPICE_MSG_PLAYBACK_MODE){var n=new SpiceMsgPlaybackMode(t.data);return n.mode!=SPICE_AUDIO_DATA_MODE_OPUS&&(this.log_err("This player cannot handle mode "+n.mode),delete this.source_buffer),!0}return t.type==SPICE_MSG_PLAYBACK_STOP?!0:!1},SpicePlaybackConn.prototype.start_playback=function(t){this.start_time=t.time;var e=new webm_Header,a=new ArrayBuffer(e.buffer_size());this.bytes_written=e.to_buffer(a),this.source_buffer.addEventListener("error",handle_sourcebuffer_error,!1),this.source_buffer.addEventListener("updateend",handle_append_buffer_done,!1),playback_append_buffer(this,a),this.new_cluster(t)},SpicePlaybackConn.prototype.new_cluster=function(t){this.cluster_time=t.time;var e=new webm_Cluster(t.time-this.start_time-this.gap_time),a=new ArrayBuffer(e.buffer_size());this.bytes_written+=e.to_buffer(a),this.append_okay?playback_append_buffer(this,a):this.queue.push(a),this.simple_block(t,!0)},SpicePlaybackConn.prototype.simple_block=function(t,e){var a=new webm_SimpleBlock(t.time-this.cluster_time,t.data,e),n=new ArrayBuffer(a.buffer_size());this.bytes_written+=a.to_buffer(n),this.append_okay?playback_append_buffer(this,n):this.queue.push(n)},define("spice-playback",["spice-spiceconn"],function(){});var SpiceSimulateCursor={cursors:new Array,unknown_cursors:new Array,warned:!1,add_cursor:function(t,e){SpiceSimulateCursor.cursors[t]=e},unknown_cursor:function(t,e){SpiceSimulateCursor.warned||(SpiceSimulateCursor.warned=!0,alert("Internet Explorer does not support dynamic cursors.  This page will now simulate cursors with images, which will be imperfect.  We recommend using Chrome or Firefox instead.  \n\nIf you need to use Internet Explorer, you can create a static cursor file for each cursor your application uses.  View the console log for more information on creating static cursors for your environment.")),SpiceSimulateCursor.unknown_cursors[t]||(SpiceSimulateCursor.unknown_cursors[t]=e,console.log("Unknown cursor.  Simulation required.  To avoid simulation for this cursor, create and include a custom javascript file, and add the following line:"),console.log('SpiceCursorSimulator.add_cursor("'+t+'"), "<your filename here>.cur");'),console.log("And then run following command, redirecting output into <your filename here>.cur:"),console.log("php -r \"echo urldecode('"+e+"');\""))},simulate_cursor:function(t,e,a,n){var s=hex_sha1(n+" "+e.header.hot_spot_x+" "+e.header.hot_spot_y);if("undefined"!=typeof SpiceSimulateCursor.cursors&&"undefined"!=typeof SpiceSimulateCursor.cursors[s]){var i="url("+SpiceSimulateCursor.cursors[s]+"), default";a.style.cursor=i}"auto"==window.getComputedStyle(a,null).cursor?(SpiceSimulateCursor.unknown_cursor(s,SpiceSimulateCursor.create_icondir(e.header.width,e.header.height,e.data.byteLength,e.header.hot_spot_x,e.header.hot_spot_y)+n),document.getElementById(t.parent.screen_id).style.cursor="none",t.spice_simulated_cursor||(t.spice_simulated_cursor=document.createElement("img"),t.spice_simulated_cursor.style.position="absolute",t.spice_simulated_cursor.style.display="none",t.spice_simulated_cursor.style.overflow="hidden",t.spice_simulated_cursor.spice_screen=document.getElementById(t.parent.screen_id),t.spice_simulated_cursor.addEventListener("mousemove",SpiceSimulateCursor.handle_sim_mousemove),t.spice_simulated_cursor.spice_screen.appendChild(t.spice_simulated_cursor)),t.spice_simulated_cursor.src="data:image/png,"+n,t.spice_simulated_cursor.spice_hot_x=e.header.hot_spot_x,t.spice_simulated_cursor.spice_hot_y=e.header.hot_spot_y,t.spice_simulated_cursor.style.pointerEvents="none"):t.spice_simulated_cursor&&(t.spice_simulated_cursor.spice_screen.removeChild(t.spice_simulated_cursor),delete t.spice_simulated_cursor)},handle_sim_mousemove:function(t){var e=SpiceSimulateCursor.duplicate_mouse_event(t,this.spice_screen);return this.spice_screen.dispatchEvent(e)},duplicate_mouse_event:function(t){var e=document.createEvent("mouseevent");return e.initMouseEvent(t.type,!0,!0,t.view,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget),e},ICONDIR:function(){},ICONDIRENTRY:function(t,e,a,n,s){this.width=t,this.height=e,this.bytes=a,this.hot_x=n,this.hot_y=s},create_icondir:function(t,e,a,n,s){var i,r=new SpiceSimulateCursor.ICONDIR,o=new SpiceSimulateCursor.ICONDIRENTRY(t,e,a,n,s),l=new ArrayBuffer(r.buffer_size()+o.buffer_size()),c=r.to_buffer(l);c=o.to_buffer(l,c);var d=new Uint8Array(l),u="";for(i=0;c>i;i++)u+="%",d[i]<16&&(u+="0"),u+=d[i].toString(16);return u}};SpiceSimulateCursor.ICONDIR.prototype={to_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);return a.setUint16(e,0,!0),e+=2,a.setUint16(e,2,!0),e+=2,a.setUint16(e,1,!0),e+=2},buffer_size:function(){return 6}},SpiceSimulateCursor.ICONDIRENTRY.prototype={to_buffer:function(t,e){e=e||0;var a=new SpiceDataView(t);return a.setUint8(e,this.width),e++,a.setUint8(e,this.height),e++,a.setUint8(e,0),e++,a.setUint8(e,0),e++,a.setUint16(e,this.hot_x,!0),e+=2,a.setUint16(e,this.hot_y,!0),e+=2,a.setUint32(e,this.bytes,!0),e+=4,a.setUint32(e,e+4,!0),e+=4},buffer_size:function(){return 16}},define("spice-simulatecursor",function(){}),SpiceCursorConn.prototype=Object.create(SpiceConn.prototype),SpiceCursorConn.prototype.process_channel_message=function(t){if(t.type==SPICE_MSG_CURSOR_INIT){var e=new SpiceMsgCursorInit(t.data);return DEBUG>1&&console.log("SpiceMsgCursorInit"),this.parent&&this.parent.inputs&&this.parent.inputs.mouse_mode==SPICE_MOUSE_MODE_SERVER&&(this.parent.inputs.mousex=e.position.x,this.parent.inputs.mousey=e.position.y),!0}if(t.type==SPICE_MSG_CURSOR_SET){var a=new SpiceMsgCursorSet(t.data);return DEBUG>1&&console.log("SpiceMsgCursorSet"),a.flags&SPICE_CURSOR_FLAGS_NONE?(document.getElementById(this.parent.screen_id).style.cursor="none",!0):(a.flags>0&&this.log_warn("FIXME: No support for cursor flags "+a.flags),a.cursor.header.type!=SPICE_CURSOR_TYPE_ALPHA?(this.log_warn("FIXME: No support for cursor type "+a.cursor.header.type),!1):(this.set_cursor(a.cursor),!0))}return t.type==SPICE_MSG_CURSOR_HIDE?(DEBUG>1&&console.log("SpiceMsgCursorHide"),document.getElementById(this.parent.screen_id).style.cursor="none",!0):t.type==SPICE_MSG_CURSOR_RESET?(DEBUG>1&&console.log("SpiceMsgCursorReset"),document.getElementById(this.parent.screen_id).style.cursor="auto",!0):t.type==SPICE_MSG_CURSOR_INVAL_ALL?(DEBUG>1&&console.log("SpiceMsgCursorInvalAll"),!0):!1},SpiceCursorConn.prototype.set_cursor=function(t){var e=create_rgba_png(t.header.height,t.header.width,t.data),a="url(data:image/png,"+e+") "+t.header.hot_spot_x+" "+t.header.hot_spot_y+", default",n=document.getElementById(this.parent.screen_id);n.style.cursor="auto",n.style.cursor=a,"auto"==window.getComputedStyle(n,null).cursor&&SpiceSimulateCursor.simulate_cursor(this,t,n,e)},define("spice-cursor",["spice-spiceconn"],function(){});var dbits,canary=0xdeadbeefcafe,j_lm=15715070==(16777215&canary);j_lm&&"Microsoft Internet Explorer"==navigator.appName?(BigInteger.prototype.am=am2,dbits=30):j_lm&&"Netscape"!=navigator.appName?(BigInteger.prototype.am=am1,dbits=26):(BigInteger.prototype.am=am3,dbits=28),BigInteger.prototype.DB=dbits,BigInteger.prototype.DM=(1<<dbits)-1,BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP),BigInteger.prototype.F1=BI_FP-dbits,BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz",BI_RC=new Array,rr,vv;for(rr="0".charCodeAt(0),vv=0;9>=vv;++vv)BI_RC[rr++]=vv;for(rr="a".charCodeAt(0),vv=10;36>vv;++vv)BI_RC[rr++]=vv;for(rr="A".charCodeAt(0),vv=10;36>vv;++vv)BI_RC[rr++]=vv;Classic.prototype.convert=cConvert,Classic.prototype.revert=cRevert,Classic.prototype.reduce=cReduce,Classic.prototype.mulTo=cMulTo,Classic.prototype.sqrTo=cSqrTo,Montgomery.prototype.convert=montConvert,Montgomery.prototype.revert=montRevert,Montgomery.prototype.reduce=montReduce,Montgomery.prototype.mulTo=montMulTo,Montgomery.prototype.sqrTo=montSqrTo,BigInteger.prototype.copyTo=bnpCopyTo,BigInteger.prototype.fromInt=bnpFromInt,BigInteger.prototype.fromString=bnpFromString,BigInteger.prototype.clamp=bnpClamp,BigInteger.prototype.dlShiftTo=bnpDLShiftTo,BigInteger.prototype.drShiftTo=bnpDRShiftTo,BigInteger.prototype.lShiftTo=bnpLShiftTo,BigInteger.prototype.rShiftTo=bnpRShiftTo,BigInteger.prototype.subTo=bnpSubTo,BigInteger.prototype.multiplyTo=bnpMultiplyTo,BigInteger.prototype.squareTo=bnpSquareTo,BigInteger.prototype.divRemTo=bnpDivRemTo,BigInteger.prototype.invDigit=bnpInvDigit,BigInteger.prototype.isEven=bnpIsEven,BigInteger.prototype.exp=bnpExp,BigInteger.prototype.toString=bnToString,BigInteger.prototype.negate=bnNegate,BigInteger.prototype.abs=bnAbs,BigInteger.prototype.compareTo=bnCompareTo,BigInteger.prototype.bitLength=bnBitLength,BigInteger.prototype.mod=bnMod,BigInteger.prototype.modPowInt=bnModPowInt,BigInteger.ZERO=nbv(0),BigInteger.ONE=nbv(1),define("spice-jsbn",function(){}),RSAKey.prototype.doPublic=RSADoPublic,RSAKey.prototype.setPublic=RSASetPublic,RSAKey.prototype.encrypt=RSAEncrypt,define("spice-rsa",function(){}),Arcfour.prototype.init=ARC4init,Arcfour.prototype.next=ARC4next;var rng_psize=256;define("spice-prng4",function(){});var rng_state,rng_pool,rng_pptr;if(null==rng_pool){rng_pool=new Array,rng_pptr=0;var t;if("Netscape"==navigator.appName&&navigator.appVersion<"5"&&window.crypto){var z=window.crypto.random(32);for(t=0;t<z.length;++t)rng_pool[rng_pptr++]=255&z.charCodeAt(t)}for(;rng_psize>rng_pptr;)t=Math.floor(65536*Math.random()),rng_pool[rng_pptr++]=t>>>8,rng_pool[rng_pptr++]=255&t;rng_pptr=0,rng_seed_time()}SecureRandom.prototype.nextBytes=rng_get_bytes,define("spice-rng",function(){});var hexcase=0,b64pad="";define("spice-sha1",function(){});var SHA_DIGEST_LENGTH=20;define("spice-ticket",function(){}),define("spice-resize",function(){}),SpiceFileXferTask.prototype.create_progressbar=function(){var t=this,e=document.createElement("input");this.progressbar_container=document.createElement("div"),this.progressbar=document.createElement("progress"),e.type="button",e.value="Cancel",e.style["float"]="right",e.onclick=function(){t.cancelled=!0,t.remove_progressbar()},this.progressbar.setAttribute("max",this.file.size),this.progressbar.setAttribute("value",0),this.progressbar.style.width="100%",this.progressbar.style.margin="4px auto",this.progressbar.style.display="inline-block",this.progressbar_container.style.width="90%",this.progressbar_container.style.margin="auto",this.progressbar_container.style.padding="4px",this.progressbar_container.textContent=this.file.name,this.progressbar_container.appendChild(e),this.progressbar_container.appendChild(this.progressbar),document.getElementById("spice-xfer-area").appendChild(this.progressbar_container)},SpiceFileXferTask.prototype.update_progressbar=function(t){this.progressbar.setAttribute("value",t)},SpiceFileXferTask.prototype.remove_progressbar=function(){this.progressbar_container&&this.progressbar_container.parentNode&&this.progressbar_container.parentNode.removeChild(this.progressbar_container)},define("spice-filexfer",function(){}),SpiceMainConn.prototype=Object.create(SpiceConn.prototype),SpiceMainConn.prototype.process_channel_message=function(t){if(t.type==SPICE_MSG_MAIN_INIT){this.log_info("Connected to "+this.ws.url),this.report_success("Connected"),this.main_init=new SpiceMsgMainInit(t.data),this.connection_id=this.main_init.session_id,this.agent_tokens=this.main_init.agent_tokens,DEBUG>0&&this.log_info("session id "+this.main_init.session_id+" ; display_channels_hint "+this.main_init.display_channels_hint+" ; supported_mouse_modes "+this.main_init.supported_mouse_modes+" ; current_mouse_mode "+this.main_init.current_mouse_mode+" ; agent_connected "+this.main_init.agent_connected+" ; agent_tokens "+this.main_init.agent_tokens+" ; multi_media_time "+this.main_init.multi_media_time+" ; ram_hint "+this.main_init.ram_hint),this.handle_mouse_mode(this.main_init.current_mouse_mode,this.main_init.supported_mouse_modes),this.main_init.agent_connected&&this.connect_agent();var e=new SpiceMiniData;return e.type=SPICE_MSGC_MAIN_ATTACH_CHANNELS,e.size=e.buffer_size(),this.send_msg(e),!0}if(t.type==SPICE_MSG_MAIN_MOUSE_MODE){var a=new SpiceMsgMainMouseMode(t.data);return DEBUG>0&&this.log_info("Mouse supported modes "+a.supported_modes+"; current "+a.current_mode),this.handle_mouse_mode(a.current_mode,a.supported_modes),!0}if(t.type==SPICE_MSG_MAIN_CHANNELS_LIST){var n,s;for(DEBUG>0&&console.log("channels"),s=new SpiceMsgChannels(t.data),n=0;n<s.channels.length;n++){var i={uri:this.ws.url,parent:this,connection_id:this.connection_id,type:s.channels[n].type,chan_id:s.channels[n].id};s.channels[n].type==SPICE_CHANNEL_DISPLAY?this.display=new SpiceDisplayConn(i):s.channels[n].type==SPICE_CHANNEL_INPUTS?(this.inputs=new SpiceInputsConn(i),this.inputs.mouse_mode=this.mouse_mode):s.channels[n].type==SPICE_CHANNEL_CURSOR?this.cursor=new SpiceCursorConn(i):s.channels[n].type==SPICE_CHANNEL_PLAYBACK?this.cursor=new SpicePlaybackConn(i):(this.log_err("Channel type "+s.channels[n].type+" unknown."),"extra_channels"in this||(this.extra_channels=[]),this.extra_channels[n]=new SpiceConn(i))}return!0}if(t.type==SPICE_MSG_MAIN_AGENT_CONNECTED)return this.connect_agent(),!0;if(t.type==SPICE_MSG_MAIN_AGENT_CONNECTED_TOKENS){var r=new SpiceMsgMainAgentTokens(t.data);return this.agent_tokens=r.num_tokens,this.connect_agent(),!0}if(t.type==SPICE_MSG_MAIN_AGENT_TOKEN){var o,l=new SpiceMsgMainAgentTokens(t.data);for(this.agent_tokens+=l.num_tokens,this.send_agent_message_queue(),o=this.agent_tokens;o>0&&this.file_xfer_read_queue.length>0;){var c=this.file_xfer_read_queue.shift();this.file_xfer_read(c,c.read_bytes),o--}return!0}if(t.type==SPICE_MSG_MAIN_AGENT_DISCONNECTED)return this.agent_connected=!1,!0;if(t.type==SPICE_MSG_MAIN_AGENT_DATA){var d=new SpiceMsgMainAgentData(t.data);if(d.type==VD_AGENT_ANNOUNCE_CAPABILITIES){var u=new VDAgentAnnounceCapabilities(d.data);return u.request&&this.announce_agent_capabilities(0),!0}return d.type==VD_AGENT_FILE_XFER_STATUS?(this.handle_file_xfer_status(new VDAgentFileXferStatusMessage(d.data)),!0):!1}return!1},SpiceMainConn.prototype.stop=function(){if(this.state="closing",this.inputs&&(this.inputs.cleanup(),this.inputs=void 0),this.cursor&&(this.cursor.cleanup(),this.cursor=void 0),this.display&&(this.display.cleanup(),this.display.destroy_surfaces(),this.display=void 0),this.cleanup(),"extra_channels"in this)for(var t in this.extra_channels)this.extra_channels[t].cleanup();this.extra_channels=void 0},SpiceMainConn.prototype.send_agent_message_queue=function(t){if(this.agent_connected)for(t&&this.agent_msg_queue.push(t);this.agent_tokens>0&&this.agent_msg_queue.length>0;){var e=this.agent_msg_queue.shift();this.send_msg(e),this.agent_tokens--}},SpiceMainConn.prototype.send_agent_message=function(t,e){var a=new SpiceMsgcMainAgentData(t,e),n=0,s=VD_AGENT_MAX_DATA_SIZE-SpiceMiniData.prototype.buffer_size(),i=new ArrayBuffer(a.buffer_size());for(a.to_buffer(i);n<a.buffer_size();){var r=Math.min(n+s,a.buffer_size()),o=new SpiceMiniData;o.type=SPICE_MSGC_MAIN_AGENT_DATA,o.size=r-n,o.data=i.slice(n,r),this.send_agent_message_queue(o),n=r}},SpiceMainConn.prototype.announce_agent_capabilities=function(t){var e=new VDAgentAnnounceCapabilities(t,1<<VD_AGENT_CAP_MOUSE_STATE|1<<VD_AGENT_CAP_MONITORS_CONFIG|1<<VD_AGENT_CAP_REPLY);this.send_agent_message(VD_AGENT_ANNOUNCE_CAPABILITIES,e)},SpiceMainConn.prototype.resize_window=function(t,e,a,n,s,i){var r=new VDAgentMonitorsConfig(t,e,a,n,s,i);this.send_agent_message(VD_AGENT_MONITORS_CONFIG,r)},SpiceMainConn.prototype.file_xfer_start=function(t){var e,a,n;e=this.file_xfer_task_id++,n=new SpiceFileXferTask(e,t),n.create_progressbar(),this.file_xfer_tasks[e]=n,a=new VDAgentFileXferStartMessage(e,t.name,t.size),this.send_agent_message(VD_AGENT_FILE_XFER_START,a)},SpiceMainConn.prototype.handle_file_xfer_status=function(t){var e,a;if(this.file_xfer_tasks[t.id]){switch(a=this.file_xfer_tasks[t.id],t.result){case VD_AGENT_FILE_XFER_STATUS_CAN_SEND_DATA:return void this.file_xfer_read(a);case VD_AGENT_FILE_XFER_STATUS_CANCELLED:e="transfer is cancelled by spice agent";break;case VD_AGENT_FILE_XFER_STATUS_ERROR:e="some errors occurred in the spice agent";break;case VD_AGENT_FILE_XFER_STATUS_SUCCESS:break;default:e="unhandled status type: "+t.result}this.file_xfer_completed(a,e)}},SpiceMainConn.prototype.file_xfer_read=function(t,e){var a,n,s,i,r=32*VD_AGENT_MAX_DATA_SIZE,o=this;if(t&&this.file_xfer_tasks[t.id]&&!(e>0&&e==t.file.size)){if(t.cancelled){var l=new VDAgentFileXferStatusMessage(t.id,VD_AGENT_FILE_XFER_STATUS_CANCELLED);return this.send_agent_message(VD_AGENT_FILE_XFER_STATUS,l),void delete this.file_xfer_tasks[t.id]}if(a=e||0,n=Math.min(a+r,t.file.size),!this.agent_tokens)return t.read_bytes=a,void this.file_xfer_read_queue.push(t);i=new FileReader,i.onload=function(e){var a=new VDAgentFileXferDataMessage(t.id,e.target.result.byteLength,e.target.result);o.send_agent_message(VD_AGENT_FILE_XFER_DATA,a),o.file_xfer_read(t,n),t.update_progressbar(n)},s=t.file.slice(a,n),i.readAsArrayBuffer(s)}},SpiceMainConn.prototype.file_xfer_completed=function(t,e){e?this.log_err(e):this.log_info("transfer of '"+t.file.name+"' was successful"),t.remove_progressbar(),delete this.file_xfer_tasks[t.id]},SpiceMainConn.prototype.connect_agent=function(){this.agent_connected=!0;var t=new SpiceMsgcMainAgentStart(-1),e=new SpiceMiniData;e.build_msg(SPICE_MSGC_MAIN_AGENT_START,t),this.send_msg(e),this.announce_agent_capabilities(1),void 0!==this.onagent&&this.onagent(this)},SpiceMainConn.prototype.handle_mouse_mode=function(t,e){if(this.mouse_mode=t,t!=SPICE_MOUSE_MODE_CLIENT&&e&SPICE_MOUSE_MODE_CLIENT){var a=new SpiceMsgcMainMouseModeRequest(SPICE_MOUSE_MODE_CLIENT),n=new SpiceMiniData;n.build_msg(SPICE_MSGC_MAIN_MOUSE_MODE_REQUEST,a),this.send_msg(n)}this.inputs&&(this.inputs.mouse_mode=t)},define("spice-main",["spice-spiceconn","spice-spicearraybuffer","spice-enums","spice-atKeynames","spice-utils","spice-png","spice-lz","spice-quic","spice-bitmap","spice-spicedataview","spice-spicetype","spice-spicemsg","spice-wire","spice-display","spice-inputs","spice-webm","spice-playback","spice-simulatecursor","spice-cursor","spice-jsbn","spice-rsa","spice-prng4","spice-rng","spice-sha1","spice-ticket","spice-resize","spice-filexfer"],function(t){return function(){var e;return e||t.SpiceMainConn}}(this)),define("utils/spice",["require","spice-main","sunstone-config","utils/notifier"],function(t){function e(){return d}function a(){d=!0}function n(){d=!1}function s(){i()}function i(){l&&l.stop()}function r(){window.addEventListener("resize",handle_resize),window.spice_connection=this,resize_helper(this)}function o(t){var e,a,n,i,o,d,u="ws://";if(c.vncWSS&&(u="wss://"),e=window.location.hostname,a=c.vncProxyPort,n=t.password,o=t.token,d=t.vm_name,!e||!a)return void console.log("must specify host and port in URL");l&&l.stop(),i=u+e+":"+a+"?token="+o;try{l=new SpiceMainConn({uri:i,screen_id:"spice-screen",dump_id:"debug-div",message_id:"message-div",password:n,onerror:s,onagent:r})}catch(p){s(p)}var h="spice?";h+="host="+e,h+="&port="+a,h+="&token="+o,h+="&password="+n,h+="&encrypt="+config.user_config.vnc_wss,h+="&title="+d,$("#open_in_a_new_window_spice").attr("href",h)}t("spice-main");var l,c=t("sunstone-config"),d=(t("utils/notifier"),!1);return{lockStatus:e,lock:a,unlock:n,spiceCallback:o,disconnect:i}}),define("tabs/vms-tab/dialogs/deploy/dialogId",["require"],function(){return"deployVMDialog"}),define("tabs/vms-tab/dialogs/migrate/dialogId",["require"],function(){return"migrateVMDialog"}),define("tabs/vms-tab/dialogs/vnc/dialogId",["require"],function(){return"vncVMDialog"}),define("tabs/vms-tab/dialogs/spice/dialogId",["require"],function(){return"spiceVMDialog"}),define("tabs/vms-tab/actions",["require","sunstone","utils/notifier","utils/locale","opennebula/vm","utils/common-actions","utils/vnc","utils/spice","./tabId","./form-panels/create/formPanelId","./dialogs/deploy/dialogId","./dialogs/migrate/dialogId","./dialogs/vnc/dialogId","./dialogs/spice/dialogId"],function(t){var e=t("sunstone"),a=t("utils/notifier"),n=t("utils/locale"),s=t("opennebula/vm"),i=t("utils/common-actions"),r=t("utils/vnc"),o=t("utils/spice"),l=t("./tabId"),c=t("./form-panels/create/formPanelId"),d=t("./dialogs/deploy/dialogId"),u=t("./dialogs/migrate/dialogId"),p=t("./dialogs/vnc/dialogId"),h=t("./dialogs/spice/dialogId"),f="VM",m=new i(s,f,l),_={"VM.list":m.list(),"VM.show":m.show(),"VM.refresh":m.refresh(),"VM.delete":m["delete"](),"VM.chown":m.multipleAction("chown"),"VM.chgrp":m.multipleAction("chgrp"),"VM.hold":m.multipleAction("hold"),"VM.release":m.multipleAction("release"),"VM.suspend":m.multipleAction("suspend"),"VM.resume":m.multipleAction("resume"),"VM.stop":m.multipleAction("stop"),"VM.reboot_hard":m.multipleAction("reset"),"VM.delete_recreate":m.multipleAction("resubmit"),"VM.reboot":m.multipleAction("reboot"),"VM.poweroff":m.multipleAction("poweroff"),"VM.poweroff_hard":m.multipleAction("poweroff_hard"),"VM.undeploy":m.multipleAction("undeploy"),"VM.undeploy_hard":m.multipleAction("undeploy_hard"),"VM.shutdown":m.multipleAction("shutdown"),"VM.shutdown_hard":m.multipleAction("shutdown_hard"),"VM.recover":m.multipleAction("recover"),"VM.resched":m.multipleAction("resched"),"VM.unresched":m.multipleAction("unresched"),"VM.chmod":m.singleAction("chmod"),"VM.rename":m.singleAction("rename"),"VM.update_template":m.singleAction("update"),"VM.deploy_action":m.singleAction("deploy"),"VM.migrate_action":m.singleAction("migrate"),"VM.migrate_live_action":m.singleAction("livemigrate"),"VM.attachdisk":m.singleAction("attachdisk"),"VM.detachdisk":m.singleAction("detachdisk"),"VM.attachnic":m.singleAction("attachnic"),"VM.detachnic":m.singleAction("detachnic"),"VM.resize":m.singleAction("resize"),"VM.snapshot_create":m.singleAction("snapshot_create"),"VM.snapshot_revert":m.singleAction("snapshot_revert"),"VM.snapshot_delete":m.singleAction("snapshot_delete"),"VM.create_dialog":{type:"custom",call:function(){e.showFormPanel(l,c,"create")
}},"VM.create":{type:"custom",call:function(t,a){e.runAction("Template.instantiate",[t],a),e.runAction("VM.refresh")},callback:function(t,a){e.getDataTable(l).addElement(t,a)},error:a.onError},"VM.deploy":{type:"custom",call:function(){e.getDialog(d).show()}},"VM.silent_deploy_action":{type:"single",call:s.deploy,error:a.onError},"VM.migrate":{type:"custom",call:function(){var t=e.getDialog(u);t.setLive(!1),t.show()}},"VM.migrate_live":{type:"custom",call:function(){var t=e.getDialog(u);t.setLive(!0),t.show()}},"VM.startvnc":{type:"custom",call:function(){$.each(e.getDataTable(l).elements(),function(t,s){return r.lockStatus()?(a.notifyError(n.tr("VNC Connection in progress")),!1):(r.lock(),void e.runAction("VM.startvnc_action",s))})}},"VM.startvnc_action":{type:"single",call:s.vnc,callback:function(t,a){var n=e.getDialog(p);n.setElement(a),n.show()},error:function(t,e){a.onError(t,e),r.unlock()},notify:!0},"VM.startspice":{type:"custom",call:function(){$.each(e.getDataTable(l).elements(),function(t,s){return o.lockStatus()?(a.notifyError(n.tr("VNC Connection in progress")),!1):(o.lock(),void e.runAction("VM.startspice_action",s))})}},"VM.startspice_action":{type:"single",call:s.vnc,callback:function(t,a){var n=e.getDialog(h);n.setElement(a),n.show()},error:function(t,e){a.onError(t,e),o.unlock()},notify:!0}};return _}),define("tabs/vms-tab/utils/datatable-common",["require","opennebula/vm","utils/locale","utils/humanize","utils/template-utils"],function(t){function e(t){var e=t[l],a=n.stateStr(e.STATE);"ACTIVE"==a&&(a=n.shortLcmStateStr(e.LCM_STATE));var s;return s=n.isVNCSupported(e)?'<a class="vnc" href="#" vm_id="'+e.ID+'"><i class="fa fa-desktop"/></a>':n.isSPICESupported(e)?'<a class="spice" href="#" vm_id="'+e.ID+'"><i class="fa fa-desktop"/></a>':"",['<input class="check_item" type="checkbox" id="'+o.toLowerCase()+"_"+e.ID+'" name="selected_items" value="'+e.ID+'"/>',e.ID,e.UNAME,e.GNAME,e.NAME,a,e.CPU,i.size(e.MEMORY),n.hostnameStr(e),n.ipsStr(e),i.prettyTime(e.STIME),s,r.templateToString(e)]}function a(t){return['<input class="check_item" type="checkbox" id="'+o.toLowerCase()+"_"+t+'" name="selected_items" value="'+t+'"/>',t,"","","","","","","","","","",""]}var n=t("opennebula/vm"),s=t("utils/locale"),i=t("utils/humanize"),r=t("utils/template-utils"),o="VM",l="VM",c=[s.tr("ID"),s.tr("Owner"),s.tr("Group"),s.tr("Name"),s.tr("Status"),s.tr("Used CPU"),s.tr("Used Memory"),s.tr("Host"),s.tr("IPs"),s.tr("Start Time"),s.tr(""),s.tr("Hidden Template")];return{elementArray:e,emptyElementArray:a,columns:c}}),define("tabs/vms-tab/utils/state-actions",["require","opennebula/vm"],function(t){function e(){$(".state-dependent").prop("disabled",!0).removeClass("vm-action-enabled").addClass("vm-action-disabled").on("click.stateaction",function(){return!1})}function a(){$(".state-dependent").addClass("vm-action-enabled").removeClass("vm-action-disabled").off("click.stateaction")}function n(t){$(".state-dependent[href='"+t+"']").removeAttr("disabled").addClass("vm-action-enabled").removeClass("vm-action-disabled").off("click.stateaction")}function s(t,e){var t=parseInt(t),e=parseInt(e);$.each(o[t],function(t,e){n(e)}),t==r.state.ACTIVE&&$.each(l[e],function(t,e){n(e)})}function i(t,e,a){var e=parseInt(e),a=parseInt(a);return-1!=o[e].indexOf(t)||e==r.state.ACTIVE&&-1!=l[a].indexOf(t)}var r=t("opennebula/vm"),o={0:["VM.delete","VM.delete_recreate","VM.resize"],1:["VM.delete","VM.delete_recreate","VM.hold","VM.deploy"],2:["VM.delete","VM.delete_recreate","VM.release","VM.deploy"],3:["VM.delete","VM.delete_recreate","VM.recover"],4:["VM.delete","VM.delete_recreate","VM.resume","VM.deploy"],5:["VM.delete","VM.resume","VM.saveas","VM.disk_snapshot_cancel","VM.stop","VM.shutdown_hard"],6:[],7:["VM.delete","VM.delete_recreate","VM.resize"],8:["VM.delete","VM.resume","VM.resize","VM.attachdisk","VM.detachdisk","VM.attachnic","VM.detachnic","VM.saveas","VM.disk_snapshot_cancel","VM.migrate","VM.undeploy","VM.undeploy_hard","VM.shutdown_hard"],9:["VM.delete","VM.delete_recreate","VM.resume","VM.resize","VM.deploy"]},l={0:[],1:[],2:[],3:["VM.shutdown","VM.shutdown_hard","VM.stop","VM.suspend","VM.reboot","VM.reboot_hard","VM.resched","VM.unresched","VM.poweroff","VM.poweroff_hard","VM.undeploy","VM.undeploy_hard","VM.migrate","VM.migrate_live","VM.attachdisk","VM.detachdisk","VM.attachnic","VM.detachnic","VM.saveas","VM.disk_snapshot_cancel"],4:[],5:[],6:[],7:[],8:[],9:[],10:[],11:[],12:[],13:[],14:[],15:[],16:["VM.shutdown","VM.shutdown_hard","VM.resched","VM.unresched","VM.poweroff","VM.poweroff_hard","VM.undeploy","VM.undeploy_hard","VM.migrate","VM.migrate_live","VM.disk_snapshot_cancel","VM.resume"],17:[],18:[],19:[],20:[],21:[],22:[],23:[],24:[],25:[],26:[],27:[],28:[],29:[],30:[],31:[],32:[],33:[],34:[],35:[],36:[],37:[],38:[],39:[],40:[],41:[],42:[],43:[],44:[],45:[],46:[],47:[],48:[],49:[],50:[]};return{disableAllStateActions:e,resetStateButtons:a,enableStateButton:n,enableStateActions:s,enabledStateAction:i}}),define("tabs/vms-tab/datatable",["require","utils/tab-datatable","./utils/datatable-common","opennebula/vm","sunstone-config","utils/locale","./utils/state-actions","sunstone","utils/vnc","utils/spice","utils/notifier","./tabId"],function(t){function e(t,e){this.conf=e||{},this.tabId=v,this.dataTableId=t,this.resource=_,this.xmlRoot=b,this.dataTableOptions={bAutoWidth:!1,bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:["check",6,7,11]},{sWidth:"35px",aTargets:[0]},{bVisible:!0,aTargets:c.tabTableColumns(v)},{bVisible:!1,aTargets:["_all"]}]},this.columns=o.columns,this.selectOptions={id_index:1,name_index:4,select_resource:d.tr("Please select a VM from the list"),you_selected:d.tr("You selected the following VM:"),select_resource_multiple:d.tr("Please select one or more VMs from the list"),you_selected_multiple:d.tr("You selected the following VMs:")},this.totalVms=0,this.activeVms=0,this.pendingVms=0,this.failedVms=0,this.offVms=0,r.call(this)}function a(t){var e=t[b],a=l.stateStr(e.STATE);switch(this.totalVms++,a){case"INIT":case"PENDING":case"HOLD":this.pendingVms++;break;case"FAILED":this.failedVms++;break;case"ACTIVE":this.activeVms++;break;case"STOPPED":case"SUSPENDED":case"POWEROFF":this.offVms++}return o.elementArray(t)}function n(){u.resetStateButtons(),this.totalVms=0,this.activeVms=0,this.pendingVms=0,this.failedVms=0,this.offVms=0}function s(){$(".total_vms").text(this.totalVms),$(".active_vms").text(this.activeVms),$(".pending_vms").text(this.pendingVms),$(".failed_vms").text(this.failedVms),$(".off_vms").text(this.offVms)}function i(t){r.prototype.initialize.call(this,t),$("#"+this.dataTableId).on("click",".vnc",function(){var t=$(this).attr("vm_id");return h.lockStatus()?m.notifyError(tr("VNC Connection in progress")):(f.lock(),p.runAction("VM.startvnc_action",t)),!1}),$("#"+this.dataTableId).on("click",".spice",function(){var t=$(this).attr("vm_id");return f.lockStatus()?m.notifyError(tr("SPICE Connection in progress")):(f.lock(),p.runAction("VM.startspice_action",t)),!1})}var r=t("utils/tab-datatable"),o=t("./utils/datatable-common"),l=t("opennebula/vm"),c=t("sunstone-config"),d=t("utils/locale"),u=t("./utils/state-actions"),p=t("sunstone"),h=t("utils/vnc"),f=t("utils/spice"),m=t("utils/notifier"),_="VM",b="VM",v=t("./tabId");return e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype.elementArray=a,e.prototype.initialize=i,e.prototype.preUpdateView=n,e.prototype.postUpdateView=s,e}),define("hbs!tabs/vms-tab/dialogs/deploy/html",["hbs","hbs/handlebars","templates/helpers/tr","templates/helpers/advancedSection"],function(t,e){var a=e.template({1:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l="function",c='        <div class="row">\n          <div class="large-6 columns">\n            <input type="checkbox" name="enforce" id="enforce"/>\n            <label for="enforce">\n              '+o((e.tr||t&&t.tr||r).call(t,"Enforce",{name:"tr",hash:{},data:n}))+'\n              <span class="tip">\n                '+o((e.tr||t&&t.tr||r).call(t,"If it is set to true, the host capacity will be checked. This will only affect oneadmin requests, regular users resize requests will always be enforced",{name:"tr",hash:{},data:n}))+"\n              </span>\n            </label>\n          </div>\n        </div>\n        <br>\n        <fieldset>\n          <legend>"+o((e.tr||t&&t.tr||r).call(t,"Select a datastore",{name:"tr",hash:{},data:n}))+"</legend>\n          ";return i=null!=(i=e.datastoresTableHTML||(null!=t?t.datastoresTableHTML:t))?i:r,s=typeof i===l?i.call(t,{name:"datastoresTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+"\n        </fieldset>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<div id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'" class="reveal-modal large" role="dialog" data-reveal >\n  <div class="row">\n    <div class="large-12 columns">\n      <h3 id="deploy_vm_header" class="subheader">'+l((e.tr||t&&t.tr||o).call(t,"Deploy Virtual Machine",{name:"tr",hash:{},data:n}))+'</h3>\n    </div>\n  </div>\n  <div class="reveal-body">\n    <form id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'Form" action="">\n      <div class="row">\n        <fieldset>\n          <legend>'+l((e.tr||t&&t.tr||o).call(t,"Select a Host",{name:"tr",hash:{},data:n}))+"</legend>\n          ";return i=null!=(i=e.hostsTableHTML||(null!=t?t.hostsTableHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"hostsTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+="\n        </fieldset>\n      </div>\n",s=(e.advancedSection||t&&t.advancedSection||o).call(t,(e.tr||t&&t.tr||o).call(t,"Advanced Options",{name:"tr",hash:{},data:n}),{name:"advancedSection",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+'      <div class="form_buttons reveal-footer">\n        <div class="form_buttons">\n          <button class="button radius right success" id="deploy_vm_proceed" value="VM.deploy">'+l((e.tr||t&&t.tr||o).call(t,"Deploy",{name:"tr",hash:{},data:n}))+'</button>\n        </div>\n      </div>\n      <a class="close-reveal-modal">&#215;</a>\n    </form>\n  </div>\n</div>'},useData:!0});return e.registerPartial("tabs/vms-tab/dialogs/deploy/html",a),a}),define("tabs/vms-tab/dialogs/deploy",["require","utils/dialogs/dialog","hbs!./deploy/html","sunstone","tabs/datastores-tab/datatable","tabs/hosts-tab/datatable","utils/notifier","utils/tips","./deploy/dialogId","../tabId"],function(t){function e(){this.dialogId=p,this.hostsTable=new c("deploy_vm",{select:!0}),this.datastoresTable=new l("deploy_vm_ds",{select:!0,selectOptions:{filter_fn:function(t){return 1==t.TYPE}}}),i.call(this)}function a(){return r({dialogId:this.dialogId,hostsTableHTML:this.hostsTable.dataTableHTML,datastoresTableHTML:this.datastoresTable.dataTableHTML})}function n(t){var e=this;return e.hostsTable.initialize(),e.datastoresTable.initialize(),u.setup(t),$("#"+p+"Form",t).submit(function(){var e={};return $("#selected_resource_id_deploy_vm",t).val()?(e.host_id=$("#selected_resource_id_deploy_vm",t).val(),e.ds_id=$("#selected_resource_id_deploy_vm_ds",t).val()||-1,e.enforce=$("#enforce",this).is(":checked")?!0:!1,$.each(o.getDataTable(h).elements(),function(t,a){o.runAction("VM.deploy_action",a,e)}),o.getDialog(p).hide(),o.getDialog(p).reset(),!1):(d.notifyError(tr("You have not selected a host")),!1)}),!1}function s(){return this.datastoresTable.resetResourceTableSelect(),this.hostsTable.resetResourceTableSelect(),!1}var i=t("utils/dialogs/dialog"),r=t("hbs!./deploy/html"),o=t("sunstone"),l=t("tabs/datastores-tab/datatable"),c=t("tabs/hosts-tab/datatable"),d=t("utils/notifier"),u=t("utils/tips"),p=t("./deploy/dialogId"),h=t("../tabId");return e.DIALOG_ID=p,e.prototype=Object.create(i.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=s,e.prototype.setup=n,e}),define("hbs!tabs/vms-tab/dialogs/migrate/html",["hbs","hbs/handlebars","templates/helpers/tr","templates/helpers/advancedSection"],function(t,e){var a=e.template({1:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l="function",c='        <div class="row">\n          <div class="large-6 columns">\n            <input type="checkbox" name="enforce" id="enforce"/>\n            <label for="vm_id">\n              '+o((e.tr||t&&t.tr||r).call(t,"Enforce",{name:"tr",hash:{},data:n}))+'\n              <span class="tip">\n                '+o((e.tr||t&&t.tr||r).call(t,"If it is set to true, the host capacity will be checked. This will only affect oneadmin requests, regular users resize requests will always be enforced",{name:"tr",hash:{},data:n}))+'\n              </span>\n            </label>\n          </div>\n        </div>\n        <br>\n        <fieldset class="migrate_vm_ds_selection">\n          <legend>'+o((e.tr||t&&t.tr||r).call(t,"Select a datastore",{name:"tr",hash:{},data:n}))+"</legend>\n          ";return i=null!=(i=e.datastoresTableHTML||(null!=t?t.datastoresTableHTML:t))?i:r,s=typeof i===l?i.call(t,{name:"datastoresTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+"\n        </fieldset>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<div id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'" class="reveal-modal large" role="dialog" data-reveal >\n  <div class="row">\n    <div class="large-12 columns">\n      <h3 id="migrate_vm_header" class="subheader">'+l((e.tr||t&&t.tr||o).call(t,"Migrate Virtual Machine",{name:"tr",hash:{},data:n}))+'</h3>\n    </div>\n  </div>\n  <div class="reveal-body">\n    <form id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'Form" action="">\n      <div id="current_hosts_of_vms" class="row"></div>\n      <br>\n      <br>\n      <div class="row">\n        <fieldset>\n          <legend>'+l((e.tr||t&&t.tr||o).call(t,"Select a Host",{name:"tr",hash:{},data:n}))+"</legend>\n          ";return i=null!=(i=e.hostsTableHTML||(null!=t?t.hostsTableHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"hostsTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+="\n        </fieldset>\n",s=(e.advancedSection||t&&t.advancedSection||o).call(t,(e.tr||t&&t.tr||o).call(t,"Advanced Options",{name:"tr",hash:{},data:n}),{name:"advancedSection",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+'        <div class="form_buttons reveal-footer">\n          <div class="form_buttons">\n            <button class="button radius right success" id="migrate_vm_proceed" value="VM.migrate">'+l((e.tr||t&&t.tr||o).call(t,"Migrate",{name:"tr",hash:{},data:n}))+'</button>\n          </div>\n        </div>\n        <a class="close-reveal-modal">&#215;</a>\n      </form>\n    </div>\n  </div>'},useData:!0});return e.registerPartial("tabs/vms-tab/dialogs/migrate/html",a),a}),define("tabs/vms-tab/dialogs/migrate",["require","utils/dialogs/dialog","hbs!./migrate/html","sunstone","tabs/datastores-tab/datatable","tabs/hosts-tab/datatable","utils/notifier","utils/tips","utils/locale","opennebula/vm","./migrate/dialogId","../tabId"],function(t){function e(){this.dialogId=f,this.hostsTable=new d("migrate_vm",{select:!0}),this.datastoresTable=new c("migrate_vm_ds",{select:!0,selectOptions:{filter_fn:function(t){return 1==t.TYPE}}}),r.call(this)}function a(){return o({dialogId:this.dialogId,hostsTableHTML:this.hostsTable.dataTableHTML,datastoresTableHTML:this.datastoresTable.dataTableHTML})}function n(t){var e=this;return e.hostsTable.initialize(),e.datastoresTable.initialize(),u.setup(t),$("#"+f+"Form",t).submit(function(){var a={};return $("#selected_resource_id_migrate_vm",t).val()?(a.host_id=$("#selected_resource_id_migrate_vm",t).val(),a.ds_id=$("#selected_resource_id_migrate_vm_ds",t).val()||-1,a.enforce=$("#enforce",t).is(":checked"),$.each(l.getDataTable(m).elements(),function(t,n){e.live?l.runAction("VM.migrate_live_action",n,a):l.runAction("VM.migrate_action",n,a)}),l.getDialog(f).hide(),l.getDialog(f).reset(),!1):(notifyError(tr("You have not selected a host")),!1)}),!1}function s(t){return this.datastoresTable.resetResourceTableSelect(),this.hostsTable.resetResourceTableSelect(),this.live&&$(".migrate_vm_ds_selection",t).hide(),$.each(l.getDataTable(m).elements(),function(){var t=""+this;h.show({data:{id:t},timeout:!0,success:function(t,e){var a=e.VM,n=h.hostnameStr(a);$("#current_hosts_of_vms").append('<span class="radius secondary label">'+p.tr("VM")+" ["+a.ID+"] "+p.tr("is currently running on Host")+" ["+n+"]</span><br>")}})}),!1}function i(t){this.live=t}var r=t("utils/dialogs/dialog"),o=t("hbs!./migrate/html"),l=t("sunstone"),c=t("tabs/datastores-tab/datatable"),d=t("tabs/hosts-tab/datatable"),u=(t("utils/notifier"),t("utils/tips")),p=t("utils/locale"),h=t("opennebula/vm"),f=t("./migrate/dialogId"),m=t("../tabId");return e.DIALOG_ID=f,e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=s,e.prototype.setup=n,e.prototype.setLive=i,e}),define("hbs!tabs/vms-tab/dialogs/resize/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<div id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'" class="reveal-modal large" role="dialog" data-reveal >\n<div class="row">\n  <div class="large-12 columns">\n    <h3 class="subheader" id="">'+l((e.tr||t&&t.tr||o).call(t,"Resize VM capacity",{name:"tr",hash:{},data:n}))+'</h3>\n  </div>\n</div>\n<div class="reveal-body">\n  <form id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'Form" action="">\n    <div class="row centered">\n      <div class="large-6 columns">\n        <label for="vm_id">'+l((e.tr||t&&t.tr||o).call(t,"Virtual Machine ID",{name:"tr",hash:{},data:n}))+':</label>\n        <label style="border-style: inset; background-color: lightgrey" type="text" name="vm_id" id="vm_id" disabled/>\n      </div>\n      <div class="large-6 columns">\n        <input type="checkbox" name="enforce" id="enforce"/>\n        <label class="inline" for="vm_id">\n          '+l((e.tr||t&&t.tr||o).call(t,"Enforce",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+l((e.tr||t&&t.tr||o).call(t,"If it is set to true, the host capacity will be checked. This will only affect oneadmin requests, regular users resize requests will always be enforced",{name:"tr",hash:{},data:n}))+"\n          </span>\n        </label>\n      </div>\n    </div>\n    ";return i=null!=(i=e.capacityInputsHTML||(null!=t?t.capacityInputsHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"capacityInputsHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+'\n    <div class="reveal-footer">\n      <div class="form_buttons">\n        <button class="button radius right success" id="resize_capacity_button" type="submit" value="VM.resize">'+l((e.tr||t&&t.tr||o).call(t,"Resize",{name:"tr",hash:{},data:n}))+'</button>\n      </div>\n    </div>\n    <a class="close-reveal-modal">&#215;</a>\n  </form>\n</div>\n</div>'},useData:!0});return e.registerPartial("tabs/vms-tab/dialogs/resize/html",a),a}),function(t){t.fn.noUiSlider=function(e,a){function n(t,e,a){var n=e.data("setup"),s=n.handles;return e=n.settings,n=n.pos,t=0>t?0:t>100?100:t,2==e.handles&&(a.is(":first-child")?(a=parseFloat(s[1][0].style[n])-e.margin,t=t>a?a:t):(a=parseFloat(s[0][0].style[n])+e.margin,t=a>t?a:t)),e.step&&(a=o.from(e.range,e.step),t=Math.round(t/a)*a),t}function s(t){return[t.clientX||t.originalEvent.clientX||t.originalEvent.touches[0].clientX,t.clientY||t.originalEvent.clientY||t.originalEvent.touches[0].clientY]}var i=jQuery.fn.val;jQuery.fn.val=function(){return this.data("_isnS_")?methods.val.call(this,arguments[0]):i.apply(this,arguments)};var r=window.navigator.msPointerEnabled?2:"ontouchstart"in document.documentElement?3:1,o={to:function(t,e){return e=0>t[0]?e+Math.abs(t[0]):e-t[0],100*e/this._length(t)},from:function(t,e){return 100*e/this._length(t)},is:function(t,e){return e*this._length(t)/100+t[0]},_length:function(t){return t[0]>t[1]?t[0]-t[1]:t[1]-t[0]}},l={handles:2,serialization:{to:["",""],resolution:.01}};return methods={create:function(){return this.each(function(){var a,i,c=t.extend(l,e),d=t(this).data("_isnS_",!0),u=[],p="",h=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},f=(c.serialization.resolution=c.serialization.resolution||.01).toString().split("."),m=1==f[0]?0:f[1].length;for(c.start=h(c.start)?[c.start,0]:c.start,t.each(c,function(t,e){h(e)&&(c[t]=parseFloat(e));var a=!1;switch(t){case"range":case"start":a=2!=e.length||!h(e[0])||!h(e[1]);break;case"handles":a=1>e||e>2||!h(e);break;case"connect":a="lower"!=e&&"upper"!=e&&"boolean"!=typeof e;break;case"orientation":a="vertical"!=e&&"horizontal"!=e;break;case"margin":case"step":a="undefined"!=typeof e&&!h(e);break;case"serialization":a="object"!=typeof e||!h(e.resolution)||"object"==typeof e.to&&e.to.length<c.handles;break;case"slide":a="function"!=typeof e}a&&console&&console.error("Bad input for "+t+" on slider:",d)}),c.margin=c.margin?o.from(c.range,c.margin):0,(c.serialization.to instanceof jQuery||"string"==typeof c.serialization.to||!1===c.serialization.to)&&(c.serialization.to=[c.serialization.to]),"vertical"==c.orientation?(p+="vertical",a="top",i=1):(p+="horizontal",a="left",i=0),p+=c.connect?"lower"==c.connect?" connect lower":" connect":"",d.addClass(p),p=0;p<c.handles;p++){u[p]=d.append("<a><div></div></a>").children(":last"),u[p].css(a,o.to(c.range,c.start[p])+"%");var f=(1===r?"mousedown":2===r?"MSPointerDown":"touchstart")+".noUiSliderX",_=(1===r?"mousemove":2===r?"MSPointerMove":"touchmove")+".noUiSlider",b=(1===r?"mouseup":2===r?"MSPointerUp":"touchend")+".noUiSlider";u[p].find("div").on(f,function(e){if(t("body").bind("selectstart.noUiSlider",function(){return!1}),!d.hasClass("disabled")){var r=t(this).addClass("active").parent();t("body").addClass("TOUCH");var l=r.add(t(document)).add("body"),p=parseFloat(r[0].style[a]),h=s(e),f=h,v=!1;t(document).on(_,function(t){t.preventDefault(),t=s(t),t[0]-=h[0],t[1]-=h[1];var e=[f[0]!=t[0],f[1]!=t[1]],l=p+100*t[i]/(i?d.height():d.width()),l=n(l,d,r);if(e[i]&&l!=v){r.css(a,l+"%").data("input").val(o.is(c.range,l).toFixed(m));var e=c.slide,_=d.data("_n",!0);"function"==typeof e&&e.call(_,void 0),v=l,r.css("z-index",2==u.length&&100==l&&r.is(":first-child")?2:1)}f=t}),t(document).on(b+" mouseLeave.noUiSlider",function(){l.off(".noUiSlider"),t("body").removeClass("TOUCH"),d.find(".active").removeClass("active"),d.data("_n")&&d.data("_n",!1).change()})}}).on("click",function(t){t.stopPropagation()})}for(1==r&&d.on("click",function(t){if(!d.hasClass("disabled")){var e=s(t);t=100*(e[i]-d.offset()[a])/(i?d.height():d.width()),e=1<u.length?e[i]<(u[0].offset()[a]+u[1].offset()[a])/2?u[0]:u[1]:u[0],t=n(t,d,e),e.css(a,t+"%").data("input").val(o.is(c.range,t).toFixed(m)),t=c.slide,"function"==typeof t&&t.call(d,void 0),d.change()}}),p=0;p<u.length;p++)f=o.is(c.range,parseFloat(u[p][0].style[a])).toFixed(m),"string"==typeof c.serialization.to[p]?u[p].data("input",d.append('<input type="hidden" name="'+c.serialization.to[p]+'">').find("input:last").val(f).change(function(t){t.stopPropagation()})):0==c.serialization.to[p]?u[p].data("input",{val:function(t){return"undefined"==typeof t?this.handle.data("noUiVal"):void this.handle.data("noUiVal",t)},handle:u[p]}):u[p].data("input",c.serialization.to[p].data("handleNR",p).val(f).change(function(){var e=[null,null];e[t(this).data("handleNR")]=t(this).val(),d.val(e)}));t(this).data("setup",{settings:c,handles:u,pos:a,res:m})})},val:function(e){if(e){var a="number"==typeof e?[e]:e;return this.each(function(){for(var e=t(this).data("setup"),s=0;s<e.handles.length;s++)if(null!=a[s]){var i=n(o.to(e.settings.range,a[s]),t(this),e.handles[s]);e.handles[s].css(e.pos,i+"%").data("input").val(o.is(e.settings.range,i).toFixed(e.res))}})}e=t(this).data("setup").handles;for(var s=[],i=0;i<e.length;i++)s.push(parseFloat(e[i].data("input").val()));return 1==s.length?s[0]:s},disabled:function(){return a?t(this).addClass("disabled"):t(this).removeClass("disabled")}},"disabled"==e?methods.disabled.apply(this):methods.create.apply(this)}}(jQuery),define("nouislider",["jquery"],function(){}),define("hbs!tabs/templates-tab/form-panels/create/wizard-tabs/general/capacity-inputs/html",["hbs","hbs/handlebars","templates/helpers/tr","templates/helpers/isFeatureEnabled"],function(t,e){var a=e.template({1:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'  <div class="large-2 columns">\n    <label  for="MEMORY_COST">\n      '+i((e.tr||t&&t.tr||s).call(t,"Cost",{name:"tr",hash:{},data:n}))+'\n      <span class="tip">'+i((e.tr||t&&t.tr||s).call(t,"Cost of each MB per hour",{name:"tr",hash:{},data:n}))+'</span>\n    </label>\n    <input type="text" wizard_field="MEMORY_COST" id="MEMORY_COST" name="name"/>\n  </div>\n  <div class="large-3 columns"></div>\n'},3:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'  <div class="large-2 columns">\n    <label  for="CPU_COST">\n      '+i((e.tr||t&&t.tr||s).call(t,"Cost",{name:"tr",hash:{},data:n}))+'\n      <span class="tip">'+i((e.tr||t&&t.tr||s).call(t,"Cost of each CPU per hour",{name:"tr",hash:{},data:n}))+'</span>\n\n    </label>\n    <input type="text" wizard_field="CPU_COST" id="CPU_COST" name="name"/>\n  </div>\n  <div class="large-3 columns"></div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o='<div class="">\n  <input type="hidden" wizard_field="MEMORY" id="MEMORY" name="memory" />\n</div>\n<div class="row">\n  <div class="large-7 columns">\n    <label class="" for="MEMORY">\n      '+r((e.tr||t&&t.tr||i).call(t,"Memory",{name:"tr",hash:{},data:n}))+'\n      <span class="tip ">'+r((e.tr||t&&t.tr||i).call(t,"Amount of RAM required for the VM, in Megabytes.",{name:"tr",hash:{},data:n}))+'</span>\n\n    </label>\n    <div class="large-8 columns">\n      <div id="memory_slider" class="large-7 columns"></div>\n    </div>\n    <div class="large-2 columns">\n      <input type="text" id="MEMORY_TMP" name="memory_tmp" size="4" />\n    </div>\n    <div class="large-2 columns">\n      <select id="memory_unit" name="MEMORY_UNIT">\n        <option value="MB">'+r((e.tr||t&&t.tr||i).call(t,"MB",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="GB">'+r((e.tr||t&&t.tr||i).call(t,"GB",{name:"tr",hash:{},data:n}))+"</option>\n      </select>\n    </div>\n  </div>\n";return s=(e.isFeatureEnabled||t&&t.isFeatureEnabled||i).call(t,"showback",{name:"isFeatureEnabled",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(o+=s),o+='</div>\n<div class="row">\n  <div class="large-7 columns">\n    <label class="" for="CPU">\n      '+r((e.tr||t&&t.tr||i).call(t,"CPU",{name:"tr",hash:{},data:n}))+'\n      <span class="tip">\n        '+r((e.tr||t&&t.tr||i).call(t,"Percentage of CPU divided by 100 required for the Virtual Machine. Half a processor is written 0.5.",{name:"tr",hash:{},data:n}))+'\n      </span>\n    </label>\n    <div class="large-10 columns">\n      <div id="cpu_slider"></div>\n    </div>\n    <div class="large-2 columns">\n      <input type="text" wizard_field="CPU" id="CPU" name="cpu"/>\n    </div>\n  </div>\n',s=(e.isFeatureEnabled||t&&t.isFeatureEnabled||i).call(t,"showback",{name:"isFeatureEnabled",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(o+=s),o+'</div>\n<div class="row">\n  <div class="large-7 columns">\n    <label class="" for="VCPU">\n      '+r((e.tr||t&&t.tr||i).call(t,"VCPU",{name:"tr",hash:{},data:n}))+'\n      <span class="tip">\n        '+r((e.tr||t&&t.tr||i).call(t,"Number of virtual cpus. This value is optional, the default hypervisor behavior is used, usually one virtual CPU.",{name:"tr",hash:{},data:n}))+'\n      </span>\n    </label>\n    <div class="large-10 columns">\n      <div id="vcpu_slider"></div>\n    </div>\n    <div class="large-2 columns">\n      <input type="text" wizard_field="VCPU" id="VCPU" name="vcpu"/>\n    </div>\n  </div>\n  <div class="large-5 columns"></div>\n</div>'},useData:!0});return e.registerPartial("tabs/templates-tab/form-panels/create/wizard-tabs/general/capacity-inputs/html",a),a}),define("tabs/templates-tab/form-panels/create/wizard-tabs/general/capacity-inputs",["require","nouislider","utils/locale","utils/tips","hbs!./capacity-inputs/html"],function(t){function e(){return s()}function a(t){n.setup(t);var e=$("#CPU",t),a=$("#cpu_slider",t).noUiSlider({handles:1,connect:"lower",range:[0,1600],step:50,start:1,slide:function(t){if("move"!=t){var a=$(this).val();e.val(a/100)}}});a.addClass("noUiSlider"),e.change(function(){a.val(100*this.value)}),e.val(1),a.val(100);var s=$("#MEMORY",t),i=$("#MEMORY_TMP",t),r=$("#memory_unit",t),o=r.val(),l=function(){s.val("MB"==o?Math.floor(i.val()):Math.floor(1024*i.val()))},c=function(t){if("move"!=t){var e=$(this).val();i.val(e/100),l()}},d=$("#memory_slider",t).noUiSlider({handles:1,connect:"lower",range:[0,409600],step:12800,start:51200,value:512,slide:c});d.addClass("noUiSlider"),i.change(function(){d.val(100*this.value),l()}),s.change(function(){d.val(100*this.value),i.val(Math.floor(s.val()))}),r.change(function(){var e=$("#memory_unit :selected",t).val();if(o!=e){if(o=e,"GB"==e){d.empty().noUiSlider({handles:1,connect:"lower",range:[0,1600],start:1,step:50,value:51200,slide:c});var a=i.val()/1024;i.val(a),d.val(100*a)}else if("MB"==e){d.empty().noUiSlider({handles:1,connect:"lower",range:[0,409600],start:1,value:51200,step:12800,slide:c});var a=Math.floor(1024*i.val());i.val(a),d.val(100*a)}l()}}),i.val(512).change();var u=$("#VCPU",t),p=$("#vcpu_slider",t).noUiSlider({handles:1,connect:"lower",range:[1,16],start:1,step:1,slide:function(t){if("move"!=t){var e=$(this).val();u.val(e)}}});p.addClass("noUiSlider"),u.change(function(){p.val(this.value)}),p.val(0)}t("nouislider");var n=(t("utils/locale"),t("utils/tips")),s=t("hbs!./capacity-inputs/html");return{html:e,setup:a}}),define("tabs/vms-tab/dialogs/resize/dialogId",["require"],function(){return"resizeVMDialog"}),define("tabs/vms-tab/dialogs/resize",["require","utils/dialogs/dialog","hbs!./resize/html","sunstone","utils/notifier","utils/tips","tabs/templates-tab/form-panels/create/wizard-tabs/general/capacity-inputs","utils/wizard-fields","./resize/dialogId","../tabId"],function(t){function e(){this.dialogId=p,r.call(this)}function a(){return o({dialogId:this.dialogId,capacityInputsHTML:d.html()})}function n(t){var e=this;return d.setup(),c.setup(t),$("#"+p+"Form",t).submit(function(){var a=u.retrieve(t);a.CPU==e.element.TEMPLATE.CPU&&delete a.CPU,a.MEMORY==e.element.TEMPLATE.MEMORY&&delete a.MEMORY,a.VCPU==e.element.TEMPLATE.VCPU&&delete a.VCPU;var n=$("#enforce",this).is(":checked"),s={vm_template:a,enforce:n};return l.runAction("VM.resize",e.element.ID,s),l.getDialog(p).hide(),l.getDialog(p).reset(),!1}),!1}function s(t){var e=this;return $("#vm_id",t).text(e.element.ID),$("#CPU",t).val(e.element.TEMPLATE.CPU),$("#MEMORY_TMP",t).val(e.element.TEMPLATE.MEMORY),e.element.VCPU&&$("#VCPU",t).val(e.element.TEMPLATE.VCPU),!1}function i(t){this.element=t}{var r=t("utils/dialogs/dialog"),o=t("hbs!./resize/html"),l=t("sunstone"),c=(t("utils/notifier"),t("utils/tips")),d=t("tabs/templates-tab/form-panels/create/wizard-tabs/general/capacity-inputs"),u=t("utils/wizard-fields"),p=t("./resize/dialogId");t("../tabId")}return e.DIALOG_ID=p,e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=s,e.prototype.setup=n,e.prototype.setElement=i,e
}),define("hbs!tabs/vms-tab/dialogs/attach-disk/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<div id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'" class="reveal-modal large" role="dialog" data-reveal >\n  <div class="row">\n    <div class="large-12 columns">\n      <h3 class="subheader" id="">'+l((e.tr||t&&t.tr||o).call(t,"Attach new disk",{name:"tr",hash:{},data:n}))+'</h3>\n    </div>\n  </div>\n  <div class="reveal-body">\n    <form id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'Form" action="">\n      <div class="row">\n        <div class="large-6 columns">\n          <label for="vm_id">'+l((e.tr||t&&t.tr||o).call(t,"Virtual Machine ID",{name:"tr",hash:{},data:n}))+':</label>\n          <input style="border-style: inset; background-color: lightgrey" type="text" name="vm_id" id="vm_id" disabled/>\n        </div>\n      </div>\n      ';return i=null!=(i=e.diskTabHTML||(null!=t?t.diskTabHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"diskTabHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+'\n      <div class="reveal-footer">\n        <div class="form_buttons">\n          <button class="button radius right success" id="attach_disk_button" type="submit" value="VM.attachdisk">'+l((e.tr||t&&t.tr||o).call(t,"Attach",{name:"tr",hash:{},data:n}))+'</button>\n        </div>\n      </div>\n      <a class="close-reveal-modal">&#215;</a>\n    </form>\n  </div>\n</div>'},useData:!0});return e.registerPartial("tabs/vms-tab/dialogs/attach-disk/html",a),a}),define("tabs/images-tab/datatable",["require","utils/tab-datatable","sunstone-config","utils/locale","utils/humanize","utils/notifier","opennebula/image","./tabId"],function(t){function e(t,e){this.conf=e||{},this.tabId=p,this.dataTableId=t,this.resource=d,this.xmlRoot=u,this.dataTableOptions={bAutoWidth:!1,bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:["check"]},{sWidth:"35px",aTargets:[0]},{bVisible:!0,aTargets:r.tabTableColumns(p)},{bVisible:!1,aTargets:["_all"]}]},this.columns=[o.tr("ID"),o.tr("Owner"),o.tr("Group"),o.tr("Name"),o.tr("Datastore"),o.tr("Size"),o.tr("Type"),o.tr("Registration time"),o.tr("Persistent"),o.tr("Status"),o.tr("#VMS"),o.tr("Target")],this.selectOptions={id_index:1,name_index:4,uname_index:2,select_resource:o.tr("Please select an image from the list"),you_selected:o.tr("You selected the following image:"),select_resource_multiple:o.tr("Please select one or more images from the list"),you_selected_multiple:o.tr("You selected the following images:")},this.totalImages=0,this.sizeImages=0,i.call(this)}function a(t){var e=t.IMAGE;return"3"==e.TYPE||"4"==e.TYPE||"5"==e.TYPE?!1:(this.sizeImages=this.sizeImages+parseInt(e.SIZE),this.totalImages++,['<input class="check_item" type="checkbox" id="image_'+e.ID+'" name="selected_items" value="'+e.ID+'"/>',e.ID,e.UNAME,e.GNAME,e.NAME,e.DATASTORE,e.SIZE,c.typeStr(e.TYPE),l.prettyTime(e.REGTIME),parseInt(e.PERSISTENT)?"yes":"no",c.stateStr(e.STATE),e.RUNNING_VMS,e.TEMPLATE.TARGET?e.TEMPLATE.TARGET:"--"])}function n(){this.totalImages=0,this.sizeImages=0}function s(){var t=l.sizeFromMB(this.sizeImages);$(".total_images").text(this.totalImages),$(".size_images").text(t)}var i=t("utils/tab-datatable"),r=t("sunstone-config"),o=t("utils/locale"),l=t("utils/humanize"),c=(t("utils/notifier"),t("opennebula/image")),d="Image",u="IMAGE",p=t("./tabId"),h={DATASTORE:5};return e.prototype=Object.create(i.prototype),e.prototype.constructor=e,e.prototype.elementArray=a,e.prototype.preUpdateView=n,e.prototype.postUpdateView=s,e.COLUMN_IDS=h,e}),define("hbs!tabs/templates-tab/form-panels/create/wizard-tabs/storage/disk-tab/html",["hbs","hbs/handlebars","templates/helpers/tr","templates/helpers/advancedSection"],function(t,e){var a=e.template({1:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return"  <fieldset>\n    <legend>"+i((e.tr||t&&t.tr||s).call(t,"Image",{name:"tr",hash:{},data:n}))+'</legend>\n    <div class="row">\n      <div class="large-6 columns">\n        <label for="IMAGE_ID">\n          '+i((e.tr||t&&t.tr||s).call(t,"ID",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">'+i((e.tr||t&&t.tr||s).call(t,"Image ID to be used in the Virtual Image disk.",{name:"tr",hash:{},data:n}))+'</span>\n        </label>\n        <input type="text" wizard_field="IMAGE_ID" id="IMAGE_ID" name="IMAGE_ID"/>\n      </div>\n      <div class="large-6 columns">\n        <label for="IMAGE">\n          '+i((e.tr||t&&t.tr||s).call(t,"Name",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+i((e.tr||t&&t.tr||s).call(t,"Name of the image to be used in the Virtual Image disk.",{name:"tr",hash:{},data:n}))+'\n          </span>\n        </label>\n        <input type="text" wizard_field="IMAGE" id="IMAGE" name="IMAGE"/>\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-6 columns">\n        <label for="IMAGE_UID">\n          '+i((e.tr||t&&t.tr||s).call(t,"User ID",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+i((e.tr||t&&t.tr||s).call(t,"Identifier of the user owner of the image to reduce ambiguity.",{name:"tr",hash:{},data:n}))+'\n          </span>\n        </label>\n        <input type="text" wizard_field="IMAGE_UID" id="IMAGE_UID" name="IMAGE_UID"/>\n      </div>\n      <div class="large-6 columns">\n        <label for="IMAGE_UNAME">\n          '+i((e.tr||t&&t.tr||s).call(t,"User Name",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+i((e.tr||t&&t.tr||s).call(t,"Name of the user owner of the image to reduce ambiguity.",{name:"tr",hash:{},data:n}))+'\n          </span>\n        </label>\n        <input type="text" wizard_field="IMAGE_UNAME" id="IMAGE_UNAME" name="IMAGE_UNAME"/>\n      </div>\n    </div>\n  </fieldset>\n  <div class="row">\n    <div class="large-6 columns">\n      <label for="TARGET">\n        '+i((e.tr||t&&t.tr||s).call(t,"Target",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+i((e.tr||t&&t.tr||s).call(t,"Device to map image disk. If set, it will overwrite the default device mapping",{name:"tr",hash:{},data:n}))+"\n          <br>\n          <br>\n          "+i((e.tr||t&&t.tr||s).call(t,"Xen: Optional",{name:"tr",hash:{},data:n}))+"\n          <br>\n          "+i((e.tr||t&&t.tr||s).call(t,"KVM: Optional",{name:"tr",hash:{},data:n}))+"\n          <br>"+i((e.tr||t&&t.tr||s).call(t,"VMWare: Optional",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n      <input type="text" wizard_field="TARGET" id="TARGET" name="target"/>\n    </div>\n    <div class="large-6 columns hypervisor only_xen only_kvm">\n      <label for="DRIVER">\n        '+i((e.tr||t&&t.tr||s).call(t,"Driver",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+i((e.tr||t&&t.tr||s).call(t,"Specific image mapping driver",{name:"tr",hash:{},data:n}))+"\n          <br>\n          <br>\n          "+i((e.tr||t&&t.tr||s).call(t,"Xen: Optional (tap:aio:, file:)",{name:"tr",hash:{},data:n}))+"\n          <br>\n          "+i((e.tr||t&&t.tr||s).call(t,"KVM: Optional (raw, qcow2)",{name:"tr",hash:{},data:n}))+"\n          <br>"+i((e.tr||t&&t.tr||s).call(t,"VMWare: Not supported",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n      <input type="text" wizard_field="DRIVER" id="DRIVER" name="driver" />\n    </div>\n  </div>\n  <div class="row">\n    <div class="large-6 columns">\n      <label for="DEV_PREFIX">\n        '+i((e.tr||t&&t.tr||s).call(t,"Device Prefix",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+i((e.tr||t&&t.tr||s).call(t,"Prefix for the emulated device this image will be mounted at. For instance, hd, sd, or vd for KVM virtio. If omitted, the dev_prefix attribute of the Image will be used",{name:"tr",hash:{},data:n}))+"\n          <br>\n          <br>\n          "+i((e.tr||t&&t.tr||s).call(t,"Xen: Optional",{name:"tr",hash:{},data:n}))+"\n          <br>\n          "+i((e.tr||t&&t.tr||s).call(t,"KVM: Optional",{name:"tr",hash:{},data:n}))+"\n          <br>"+i((e.tr||t&&t.tr||s).call(t,"VMWare: Optional",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n      <input type="text" wizard_field="DEV_PREFIX" id="DEV_PREFIX" name="DEV_PREFIX"/>\n    </div>\n    <div class="large-6 columns">\n      <label for="READONLY">\n        '+i((e.tr||t&&t.tr||s).call(t,"Read Only",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+i((e.tr||t&&t.tr||s).call(t,"Set how the image is exposed by the hypervisor",{name:"tr",hash:{},data:n}))+"\n          <br>\n          <br>\n          "+i((e.tr||t&&t.tr||s).call(t,"Xen: Optional",{name:"tr",hash:{},data:n}))+"\n          <br>\n          "+i((e.tr||t&&t.tr||s).call(t,"KVM: Optional",{name:"tr",hash:{},data:n}))+"\n          <br>"+i((e.tr||t&&t.tr||s).call(t,"VMWare: Optional",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n      <select wizard_field="READONLY" id="READONLY" name="READONLY">\n        <option value=""></option>\n        <option value="yes">'+i((e.tr||t&&t.tr||s).call(t,"yes",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="no">'+i((e.tr||t&&t.tr||s).call(t,"no",{name:"tr",hash:{},data:n}))+'</option>\n      </select>\n    </div>\n  </div>\n  <div class="row vm_param">\n    <div class="large-6 columns hypervisor only_kvm">\n      <label for="CACHE">\n        '+i((e.tr||t&&t.tr||s).call(t,"Cache",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">'+i((e.tr||t&&t.tr||s).call(t,"Selects the cache mechanism for the disk.",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n      <select wizard_field="CACHE" id="CACHE" name="CACHE">\n        <option value=""></option>\n        <option value="default">'+i((e.tr||t&&t.tr||s).call(t,"default",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="none">'+i((e.tr||t&&t.tr||s).call(t,"none",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="writethrough">'+i((e.tr||t&&t.tr||s).call(t,"writethrough",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="writeback">'+i((e.tr||t&&t.tr||s).call(t,"writeback",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="directsync">'+i((e.tr||t&&t.tr||s).call(t,"directsync",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="unsafe">'+i((e.tr||t&&t.tr||s).call(t,"unsafe",{name:"tr",hash:{},data:n}))+'</option>\n      </select>\n    </div>\n    <div class="large-6 columns hypervisor only_kvm">\n      <label for="IO">\n        '+i((e.tr||t&&t.tr||s).call(t,"IO",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">'+i((e.tr||t&&t.tr||s).call(t,"Set IO policy.",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n      <select wizard_field="IO" id="IO" name="IO">\n        <option value=""></option>\n        <option value="threads">'+i((e.tr||t&&t.tr||s).call(t,"threads",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="native">'+i((e.tr||t&&t.tr||s).call(t,"native",{name:"tr",hash:{},data:n}))+'</option>\n      </select>\n    </div>\n    <div class="large-6 columns hypervisor only_kvm">\n      <label for="TOTAL_BYTES_SEC">\n        '+i((e.tr||t&&t.tr||s).call(t,"Total Bytes Sec",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+i((e.tr||t&&t.tr||s).call(t,"IO throttling attributes for the disk. They are specified in bytes or IOPS (IO Operations) and can be specified for the total (read+write) or specific for read or write. Total and read or write can not be used at the same time. By default these parameters are only allowed to be used by oneadmin.",{name:"tr",hash:{},data:n}))+'\n        </span>\n      </label>\n      <input wizard_field="TOTAL_BYTES_SEC" type="text" id="TOTAL_BYTES_SEC" name="TOTAL_BYTES_SEC" />\n    </div>\n    <div class="large-6 columns hypervisor only_kvm">\n      <label for="READ_BYTES_SEC">\n        '+i((e.tr||t&&t.tr||s).call(t,"Read Bytes Sec",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+i((e.tr||t&&t.tr||s).call(t,"IO throttling attributes for the disk. They are specified in bytes or IOPS (IO Operations) and can be specified for the total (read+write) or specific for read or write. Total and read or write can not be used at the same time. By default these parameters are only allowed to be used by oneadmin.",{name:"tr",hash:{},data:n}))+'\n        </span>\n      </label>\n      <input wizard_field="READ_BYTES_SEC" type="text" id="READ_BYTES_SEC" name="READ_BYTES_SEC" />\n    </div>\n    <div class="large-6 columns hypervisor only_kvm">\n      <label for="WRITE_BYTES_SEC">\n        '+i((e.tr||t&&t.tr||s).call(t,"Write Bytes Sec",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+i((e.tr||t&&t.tr||s).call(t,"IO throttling attributes for the disk. They are specified in bytes or IOPS (IO Operations) and can be specified for the total (read+write) or specific for read or write. Total and read or write can not be used at the same time. By default these parameters are only allowed to be used by oneadmin.",{name:"tr",hash:{},data:n}))+'\n        </span>\n      </label>\n      <input wizard_field="WRITE_BYTES_SEC" type="text" id="WRITE_BYTES_SEC" name="WRITE_BYTES_SEC" />\n    </div>\n    <div class="large-6 columns hypervisor only_kvm">\n      <label for="TOTAL_IOPS_SEC">\n        '+i((e.tr||t&&t.tr||s).call(t,"Total IOPS Sec",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+i((e.tr||t&&t.tr||s).call(t,"IO throttling attributes for the disk. They are specified in bytes or IOPS (IO Operations) and can be specified for the total (read+write) or specific for read or write. Total and read or write can not be used at the same time. By default these parameters are only allowed to be used by oneadmin.",{name:"tr",hash:{},data:n}))+'\n        </span>\n      </label>\n      <input wizard_field="TOTAL_IOPS_SEC" type="text" id="TOTAL_IOPS_SEC" name="TOTAL_IOPS_SEC" />\n    </div>\n    <div class="large-6 columns hypervisor only_kvm">\n      <label for="READ_IOPS_SEC">\n        '+i((e.tr||t&&t.tr||s).call(t,"Read IOPS Sec",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+i((e.tr||t&&t.tr||s).call(t,"IO throttling attributes for the disk. They are specified in bytes or IOPS (IO Operations) and can be specified for the total (read+write) or specific for read or write. Total and read or write can not be used at the same time. By default these parameters are only allowed to be used by oneadmin.",{name:"tr",hash:{},data:n}))+'\n        </span>\n      </label>\n      <input wizard_field="READ_IOPS_SEC" type="text" id="READ_IOPS_SEC" name="READ_IOPS_SEC" />\n    </div>\n    <div class="large-6 columns hypervisor only_kvm">\n      <label for="WRITE_IOPS_SEC">\n        '+i((e.tr||t&&t.tr||s).call(t,"Write IOPS Sec",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+i((e.tr||t&&t.tr||s).call(t,"IO throttling attributes for the disk. They are specified in bytes or IOPS (IO Operations) and can be specified for the total (read+write) or specific for read or write. Total and read or write can not be used at the same time. By default these parameters are only allowed to be used by oneadmin.",{name:"tr",hash:{},data:n}))+'\n        </span>\n      </label>\n      <input wizard_field="WRITE_IOPS_SEC" type="text" id="WRITE_IOPS_SEC" name="WRITE_IOPS_SEC" />\n    </div>\n  </div>\n'},3:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'  <div class="row">\n    <div class="large-6 columns">\n      <label for="TARGET">\n        '+i((e.tr||t&&t.tr||s).call(t,"Target",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+i((e.tr||t&&t.tr||s).call(t,"Device to map image disk. If set, it will overwrite the default device mapping",{name:"tr",hash:{},data:n}))+"\n          <br>\n          <br>\n          "+i((e.tr||t&&t.tr||s).call(t,"Xen: Optional",{name:"tr",hash:{},data:n}))+"\n          <br>\n          "+i((e.tr||t&&t.tr||s).call(t,"KVM: Optional",{name:"tr",hash:{},data:n}))+"\n          <br>"+i((e.tr||t&&t.tr||s).call(t,"VMWare: Optional",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n      <input wizard_field="TARGET" type="text"  id="TARGET" name="target"/>\n    </div>\n    <div class="large-6 columns hypervisor only_xen only_kvm">\n      <label for="DRIVER">\n        '+i((e.tr||t&&t.tr||s).call(t,"Driver",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+i((e.tr||t&&t.tr||s).call(t,"Specific image mapping driver",{name:"tr",hash:{},data:n}))+"\n          <br>\n          <br>\n          "+i((e.tr||t&&t.tr||s).call(t,"Xen: Optional (tap:aio:, file:)",{name:"tr",hash:{},data:n}))+"\n          <br>\n          "+i((e.tr||t&&t.tr||s).call(t,"KVM: Optional (raw, qcow2)",{name:"tr",hash:{},data:n}))+"\n          <br>"+i((e.tr||t&&t.tr||s).call(t,"VMWare: Not supported",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n      <input wizard_field="DRIVER" type="text" id="DRIVER" name="driver" />\n    </div>\n  </div>\n  <div class="row">\n    <div class="large-6 columns">\n      <label for="DEV_PREFIX">\n        '+i((e.tr||t&&t.tr||s).call(t,"Device Prefix",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+i((e.tr||t&&t.tr||s).call(t,"Prefix for the emulated device this image will be mounted at. For instance, hd, sd, or vd for KVM virtio. If omitted, the dev_prefix attribute of the Image will be used",{name:"tr",hash:{},data:n}))+"\n          <br>\n          <br>\n          "+i((e.tr||t&&t.tr||s).call(t,"Xen: Optional",{name:"tr",hash:{},data:n}))+"\n          <br>\n          "+i((e.tr||t&&t.tr||s).call(t,"KVM: Optional",{name:"tr",hash:{},data:n}))+"\n          <br>"+i((e.tr||t&&t.tr||s).call(t,"VMWare: Optional",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n      <input wizard_field="DEV_PREFIX" type="text" id="DEV_PREFIX" name="DEV_PREFIX"/>\n    </div>\n    <div class="large-6 columns">\n      <label for="READONLY">\n        '+i((e.tr||t&&t.tr||s).call(t,"Read Only",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+i((e.tr||t&&t.tr||s).call(t,"Set how the image is exposed by the hypervisor",{name:"tr",hash:{},data:n}))+"\n          <br>\n          <br>\n          "+i((e.tr||t&&t.tr||s).call(t,"Xen: Optional",{name:"tr",hash:{},data:n}))+"\n          <br>\n          "+i((e.tr||t&&t.tr||s).call(t,"KVM: Optional",{name:"tr",hash:{},data:n}))+"\n          <br>"+i((e.tr||t&&t.tr||s).call(t,"VMWare: Optional",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n      <select wizard_field="READONLY" id="READONLY" name="READONLY">\n        <option value=""></option>\n        <option value="yes">'+i((e.tr||t&&t.tr||s).call(t,"yes",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="no">'+i((e.tr||t&&t.tr||s).call(t,"no",{name:"tr",hash:{},data:n}))+'</option>\n      </select>\n    </div>\n  </div>\n  <div class="row  vm_param">\n    <div class="large-6 columns hypervisor only_kvm">\n      <label for="CACHE">\n        '+i((e.tr||t&&t.tr||s).call(t,"Cache",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">'+i((e.tr||t&&t.tr||s).call(t,"Selects the cache mechanism for the disk.",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n      <select wizard_field="CACHE" id="CACHE" name="CACHE">\n        <option value=""></option>\n        <option value="default">'+i((e.tr||t&&t.tr||s).call(t,"default",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="none">'+i((e.tr||t&&t.tr||s).call(t,"none",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="writethrough">'+i((e.tr||t&&t.tr||s).call(t,"writethrough",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="writeback">'+i((e.tr||t&&t.tr||s).call(t,"writeback",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="directsync">'+i((e.tr||t&&t.tr||s).call(t,"directsync",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="unsafe">'+i((e.tr||t&&t.tr||s).call(t,"unsafe",{name:"tr",hash:{},data:n}))+'</option>\n      </select>\n    </div>\n    <div class="large-6 columns hypervisor only_kvm">\n      <label for="IO">\n        '+i((e.tr||t&&t.tr||s).call(t,"IO",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">'+i((e.tr||t&&t.tr||s).call(t,"Set IO policy.",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n      <select wizard_field="IO" id="IO" name="IO">\n        <option value=""></option>\n        <option value="threads">'+i((e.tr||t&&t.tr||s).call(t,"threads",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="native">'+i((e.tr||t&&t.tr||s).call(t,"native",{name:"tr",hash:{},data:n}))+'</option>\n      </select>\n    </div>\n    <div class="large-6 columns hypervisor only_kvm">\n      <label for="TOTAL_BYTES_SEC">\n        '+i((e.tr||t&&t.tr||s).call(t,"Total Bytes Sec",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+i((e.tr||t&&t.tr||s).call(t,"IO throttling attributes for the disk. They are specified in bytes or IOPS (IO Operations) and can be specified for the total (read+write) or specific for read or write. Total and read or write can not be used at the same time. By default these parameters are only allowed to be used by oneadmin.",{name:"tr",hash:{},data:n}))+'\n        </span>\n      </label>\n      <input wizard_field="TOTAL_BYTES_SEC" type="text" id="TOTAL_BYTES_SEC" name="TOTAL_BYTES_SEC" />\n    </div>\n    <div class="large-6 columns hypervisor only_kvm">\n      <label for="READ_BYTES_SEC">\n        '+i((e.tr||t&&t.tr||s).call(t,"Read Bytes Sec",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+i((e.tr||t&&t.tr||s).call(t,"IO throttling attributes for the disk. They are specified in bytes or IOPS (IO Operations) and can be specified for the total (read+write) or specific for read or write. Total and read or write can not be used at the same time. By default these parameters are only allowed to be used by oneadmin.",{name:"tr",hash:{},data:n}))+'\n        </span>\n      </label>\n      <input wizard_field="READ_BYTES_SEC" type="text" id="READ_BYTES_SEC" name="READ_BYTES_SEC" />\n    </div>\n    <div class="large-6 columns hypervisor only_kvm">\n      <label for="WRITE_BYTES_SEC">\n        '+i((e.tr||t&&t.tr||s).call(t,"Write Bytes Sec",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+i((e.tr||t&&t.tr||s).call(t,"IO throttling attributes for the disk. They are specified in bytes or IOPS (IO Operations) and can be specified for the total (read+write) or specific for read or write. Total and read or write can not be used at the same time. By default these parameters are only allowed to be used by oneadmin.",{name:"tr",hash:{},data:n}))+'\n        </span>\n      </label>\n      <input wizard_field="WRITE_BYTES_SEC" type="text" id="WRITE_BYTES_SEC" name="WRITE_BYTES_SEC" />\n    </div>\n    <div class="large-6 columns hypervisor only_kvm">\n      <label for="TOTAL_IOPS_SEC">\n        '+i((e.tr||t&&t.tr||s).call(t,"Total IOPS Sec",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+i((e.tr||t&&t.tr||s).call(t,"IO throttling attributes for the disk. They are specified in bytes or IOPS (IO Operations) and can be specified for the total (read+write) or specific for read or write. Total and read or write can not be used at the same time. By default these parameters are only allowed to be used by oneadmin.",{name:"tr",hash:{},data:n}))+'\n        </span>\n      </label>\n      <input wizard_field="TOTAL_IOPS_SEC" type="text" id="TOTAL_IOPS_SEC" name="TOTAL_IOPS_SEC" />\n    </div>\n    <div class="large-6 columns hypervisor only_kvm">\n      <label for="READ_IOPS_SEC">\n        '+i((e.tr||t&&t.tr||s).call(t,"Read IOPS Sec",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+i((e.tr||t&&t.tr||s).call(t,"IO throttling attributes for the disk. They are specified in bytes or IOPS (IO Operations) and can be specified for the total (read+write) or specific for read or write. Total and read or write can not be used at the same time. By default these parameters are only allowed to be used by oneadmin.",{name:"tr",hash:{},data:n}))+'\n        </span>\n      </label>\n      <input wizard_field="READ_IOPS_SEC" type="text" id="READ_IOPS_SEC" name="READ_IOPS_SEC" />\n    </div>\n    <div class="large-6 columns hypervisor only_kvm">\n      <label for="WRITE_IOPS_SEC">\n        '+i((e.tr||t&&t.tr||s).call(t,"Write IOPS Sec",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+i((e.tr||t&&t.tr||s).call(t,"IO throttling attributes for the disk. They are specified in bytes or IOPS (IO Operations) and can be specified for the total (read+write) or specific for read or write. Total and read or write can not be used at the same time. By default these parameters are only allowed to be used by oneadmin.",{name:"tr",hash:{},data:n}))+'\n        </span>\n      </label>\n      <input wizard_field="WRITE_IOPS_SEC" type="text" id="WRITE_IOPS_SEC" name="WRITE_IOPS_SEC" />\n    </div>\n  </div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<div class="row">\n  <div class="large-12 columns">\n    <input id="'+l((i=null!=(i=e.diskTabId||(null!=t?t.diskTabId:t))?i:o,typeof i===r?i.call(t,{name:"diskTabId",hash:{},data:n}):i))+'radioImage" type="radio" name="'+l((i=null!=(i=e.diskTabId||(null!=t?t.diskTabId:t))?i:o,typeof i===r?i.call(t,{name:"diskTabId",hash:{},data:n}):i))+'" value="image" checked>\n    <label for="'+l((i=null!=(i=e.diskTabId||(null!=t?t.diskTabId:t))?i:o,typeof i===r?i.call(t,{name:"diskTabId",hash:{},data:n}):i))+'radioImage">'+l((e.tr||t&&t.tr||o).call(t,"Image",{name:"tr",hash:{},data:n}))+'</label>\n    <input id="'+l((i=null!=(i=e.diskTabId||(null!=t?t.diskTabId:t))?i:o,typeof i===r?i.call(t,{name:"diskTabId",hash:{},data:n}):i))+'radioVolatile" type="radio" name="'+l((i=null!=(i=e.diskTabId||(null!=t?t.diskTabId:t))?i:o,typeof i===r?i.call(t,{name:"diskTabId",hash:{},data:n}):i))+'" value="volatile">\n    <label for="'+l((i=null!=(i=e.diskTabId||(null!=t?t.diskTabId:t))?i:o,typeof i===r?i.call(t,{name:"diskTabId",hash:{},data:n}):i))+'radioVolatile">'+l((e.tr||t&&t.tr||o).call(t,"Volatile Disk",{name:"tr",hash:{},data:n}))+'</label>\n  </div>\n</div>\n<div id="disk_type" class="image">\n  ';return i=null!=(i=e.imageTableSelectHTML||(null!=t?t.imageTableSelectHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"imageTableSelectHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+="\n  <br>\n",s=(e.advancedSection||t&&t.advancedSection||o).call(t,(e.tr||t&&t.tr||o).call(t,"Advanced Options",{name:"tr",hash:{},data:n}),{name:"advancedSection",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+='</div>\n<div id="disk_type" class="volatile" style="display: none;">\n  <div>\n    <input wizard_field="SIZE" type="hidden" id="SIZE" name="size" />\n  </div>\n  <div class="row">\n    <div class="large-2 columns">\n      <label class="inline" for="SIZE_TMP">\n        '+l((e.tr||t&&t.tr||o).call(t,"Size",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Size of the new disk",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n    </div>\n    <div class="large-6 columns">\n      <div id="size_slider" class="large-7 columns"></div>\n    </div>\n    <div class="large-2 columns">\n      <input type="text" id="SIZE_TMP" name="size_tmp" size="4" />\n    </div>\n    <div class="large-2 columns">\n      <select id="size_unit" name="SIZE_UNIT">\n        <option value="GB">'+l((e.tr||t&&t.tr||o).call(t,"GB",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="MB">'+l((e.tr||t&&t.tr||o).call(t,"MB",{name:"tr",hash:{},data:n}))+'</option>\n      </select>\n    </div>\n  </div>\n  <div class="row">\n    <div class="large-6 columns">\n      <label for="TYPE">\n        '+l((e.tr||t&&t.tr||o).call(t,"Type",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Disk type",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n      <select wizard_field="TYPE" id="TYPE" name="type">\n        <option value="fs">'+l((e.tr||t&&t.tr||o).call(t,"FS",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="swap">'+l((e.tr||t&&t.tr||o).call(t,"Swap",{name:"tr",hash:{},data:n}))+'</option>\n      </select>\n    </div>\n    <div class="large-6 columns">\n      <label for="FORMAT">\n        '+l((e.tr||t&&t.tr||o).call(t,"Format",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Filesystem type for the fs images",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n      <input wizard_field="FORMAT" type="text" id="FORMAT" name="format" />\n    </div>\n  </div>\n  <br>\n',s=(e.advancedSection||t&&t.advancedSection||o).call(t,(e.tr||t&&t.tr||o).call(t,"Advanced Options",{name:"tr",hash:{},data:n}),{name:"advancedSection",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+"</div>"},useData:!0});return e.registerPartial("tabs/templates-tab/form-panels/create/wizard-tabs/storage/disk-tab/html",a),a}),define("tabs/templates-tab/form-panels/create/wizard-tabs/storage/disk-tab",["require","nouislider","sunstone-config","utils/locale","utils/tips","tabs/images-tab/datatable","utils/wizard-fields","hbs!./disk-tab/html"],function(t){function e(t){this.diskTabId="diskTab"+t,this.imageTable=new l(this.diskTabId+"Table",{select:!0})}function a(){return d({diskTabId:this.diskTabId,imageTableSelectHTML:this.imageTable.dataTableHTML})}function n(){this.imageTable.refreshResourceTableSelect()}function s(t){var e=this;o.setup(t),e.imageTable.initialize({selectOptions:{select_callback:function(e,a){$("#IMAGE_ID",t).val()!=e[a.id_index]&&($("#IMAGE_ID",t).val(""),$("#IMAGE",t).val(e[a.name_index]),$("#IMAGE_UNAME",t).val(e[a.uname_index]),$("#IMAGE_UID",t).val(""))}}}),e.imageTable.refreshResourceTableSelect();var a=$("div.image",t),n=$("div.volatile",t);$("input[name='"+e.diskTabId+"']",t).change(function(){"image"==$("input[name='"+e.diskTabId+"']:checked",t).val()?(a.toggle(),n.hide(),$("[wizard_field]",a).prop("wizard_field_disabled",!1),$("[wizard_field]",n).prop("wizard_field_disabled",!0)):(a.hide(),n.toggle(),$("[wizard_field]",n).prop("wizard_field_disabled",!1),$("[wizard_field]",a).prop("wizard_field_disabled",!0))}),$("[wizard_field]",a).prop("wizard_field_disabled",!1),$("[wizard_field]",n).prop("wizard_field_disabled",!0);var s=$("#SIZE",t),i=$("#SIZE_TMP",t),r=$("#size_unit",t),l=r.val(),c=function(){s.val("MB"==l?Math.floor(i.val()):Math.floor(1024*i.val()))},d=function(t){if("move"!=t){var e=$(this).val();i.val(e/100),c()}},u=$("#size_slider",t).noUiSlider({handles:1,connect:"lower",range:[0,5e3],start:1,step:50,slide:d});u.addClass("noUiSlider"),i.change(function(){u.val(100*this.value),c()}),i.val(10),c(),u.val(1e3),r.change(function(){var e=$("#size_unit :selected",t).val();if(l!=e){if(l=e,"GB"==e){u.empty().noUiSlider({handles:1,connect:"lower",range:[0,5e3],start:1,step:50,slide:d});var a=i.val()/1024;i.val(a),u.val(100*a)}else if("MB"==e){u.empty().noUiSlider({handles:1,connect:"lower",range:[0,204800],start:1,step:12800,slide:d});var a=Math.round(1024*i.val());i.val(a),u.val(100*a)}c()}})}function i(t){return c.retrieve(t)}function r(t,e){if(e.IMAGE_ID||e.IMAGE){if($("input#"+this.diskTabId+"radioImage",t).click(),void 0!=e.IMAGE_ID){var a={ids:e.IMAGE_ID};this.imageTable.selectResourceTableSelect(a)}else if(void 0!=e.IMAGE&&void 0!=e.IMAGE_UNAME){var a={names:{name:e.IMAGE,uname:e.IMAGE_UNAME}};this.imageTable.selectResourceTableSelect(a)}c.fill($(".image",t),e)}else $("input#"+this.diskTabId+"radioVolatile",t).click(),e.SIZE&&$("#SIZE_TMP",t).val(e.SIZE/1024),c.fill($(".volatile",t),e)
}t("nouislider");var o=(t("sunstone-config"),t("utils/locale"),t("utils/tips")),l=t("tabs/images-tab/datatable"),c=t("utils/wizard-fields"),d=t("hbs!./disk-tab/html");return e.prototype.constructor=e,e.prototype.html=a,e.prototype.setup=s,e.prototype.onShow=n,e.prototype.retrieve=i,e.prototype.fill=r,e}),define("tabs/vms-tab/dialogs/attach-disk/dialogId",["require"],function(){return"attachDiskVMDialog"}),define("tabs/vms-tab/dialogs/attach-disk",["require","utils/dialogs/dialog","hbs!./attach-disk/html","sunstone","utils/notifier","utils/tips","tabs/templates-tab/form-panels/create/wizard-tabs/storage/disk-tab","utils/wizard-fields","./attach-disk/dialogId","../tabId"],function(t){function e(){this.dialogId=u,this.diskTab=new d(u+"DiskTab"),r.call(this)}function a(){return o({dialogId:this.dialogId,diskTabHTML:this.diskTab.html()})}function n(t){var e=this;return e.diskTab.setup(),c.setup(t),$("#"+u+"Form",t).submit(function(){var a=e.diskTab.retrieve(t),n={DISK:a};return l.runAction("VM.attachdisk",e.element.ID,n),l.getDialog(u).hide(),l.getDialog(u).reset(),!1}),!1}function s(t){return this.diskTab.onShow(t),$("#vm_id",t).val(this.element.ID),!1}function i(t){this.element=t}{var r=t("utils/dialogs/dialog"),o=t("hbs!./attach-disk/html"),l=t("sunstone"),c=(t("utils/notifier"),t("utils/tips")),d=t("tabs/templates-tab/form-panels/create/wizard-tabs/storage/disk-tab"),u=(t("utils/wizard-fields"),t("./attach-disk/dialogId"));t("../tabId")}return e.DIALOG_ID=u,e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=s,e.prototype.setup=n,e.prototype.setElement=i,e}),define("hbs!tabs/vms-tab/dialogs/attach-nic/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<div id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'" class="reveal-modal large" role="dialog" data-reveal >\n  <div class="row">\n    <div class="large-12 columns">\n      <h3 class="subheader" id="">'+l((e.tr||t&&t.tr||o).call(t,"Attach new nic",{name:"tr",hash:{},data:n}))+'</h3>\n    </div>\n  </div>\n  <div class="reveal-body">\n    <form id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'Form" action="">\n      <div class="row">\n        <div class="large-6 columns">\n          <label for="vm_id">'+l((e.tr||t&&t.tr||o).call(t,"Virtual Machine ID",{name:"tr",hash:{},data:n}))+':</label>\n          <input style="border-style: inset; background-color: lightgrey" type="text" name="vm_id" id="vm_id" disabled/>\n        </div>\n      </div>\n      ';return i=null!=(i=e.nicTabHTML||(null!=t?t.nicTabHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"nicTabHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+'\n      <div class="reveal-footer">\n        <div class="form_buttons">\n          <button class="button radius right success" id="attach_nic_button" type="submit" value="VM.attachdisk">'+l((e.tr||t&&t.tr||o).call(t,"Attach",{name:"tr",hash:{},data:n}))+'</button>\n        </div>\n      </div>\n      <a class="close-reveal-modal">&#215;</a>\n    </form>\n  </div>\n</div>'},useData:!0});return e.registerPartial("tabs/vms-tab/dialogs/attach-nic/html",a),a}),define("tabs/secgroups-tab/tabId",["require"],function(){return"secgroups-tab"}),define("tabs/secgroups-tab/datatable",["require","utils/tab-datatable","sunstone-config","utils/locale","./tabId"],function(t){function e(t,e){this.conf=e||{},this.tabId=l,this.dataTableId=t,this.resource=r,this.xmlRoot=o,this.dataTableOptions={bAutoWidth:!1,bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:["check"]},{sWidth:"35px",aTargets:[0]},{bVisible:!0,aTargets:s.tabTableColumns(l)},{bVisible:!1,aTargets:["_all"]}]},this.columns=[i.tr("ID"),i.tr("Owner"),i.tr("Group"),i.tr("Name")],this.selectOptions={id_index:1,name_index:4,select_resource:i.tr("Please select a security group from the list"),you_selected:i.tr("You selected the following security group:"),select_resource_multiple:i.tr("Please select one or more security groups from the list"),you_selected_multiple:i.tr("You selected the following security groups:")},n.call(this)}function a(t){var e=t[o];return['<input class="check_item" type="checkbox" id="'+r.toLowerCase()+"_"+e.ID+'" name="selected_items" value="'+e.ID+'"/>',e.ID,e.UNAME,e.GNAME,e.NAME]}var n=t("utils/tab-datatable"),s=t("sunstone-config"),i=t("utils/locale"),r="SecurityGroup",o="SECURITY_GROUP",l=t("./tabId");return e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.elementArray=a,e}),define("hbs!tabs/templates-tab/form-panels/create/wizard-tabs/network/nic-tab/html",["hbs","hbs/handlebars","templates/helpers/advancedSection","templates/helpers/tr"],function(t,e){var a=e.template({1:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l="function",c="  <fieldset>\n    <legend>"+o((e.tr||t&&t.tr||r).call(t,"Choose Network",{name:"tr",hash:{},data:n}))+'</legend>\n    <div class="row">\n      <div class="large-6 columns">\n        <label for="NETWORK_ID">\n          '+o((e.tr||t&&t.tr||r).call(t,"ID",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+o((e.tr||t&&t.tr||r).call(t,"Identifier of the virtual network from which to lease an IP and MAC address to this Virtual Machine network interface.",{name:"tr",hash:{},data:n}))+'\n          </span>\n        </label>\n        <input type="text" wizard_field="NETWORK_ID" id="NETWORK_ID" name="NETWORK_ID"/>\n      </div>\n      <div class="large-6 columns">\n        <label for="NETWORK">\n          '+o((e.tr||t&&t.tr||r).call(t,"Name",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+o((e.tr||t&&t.tr||r).call(t,"Name of the virtual network from which to lease an IP and MAC address to this Virtual Machine network interface.",{name:"tr",hash:{},data:n}))+'\n          </span>\n        </label>\n        <input type="text" wizard_field="NETWORK" id="NETWORK" name="NETWORK" />\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-6 columns">\n        <label for="NETWORK_UID">\n          '+o((e.tr||t&&t.tr||r).call(t,"User ID",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+o((e.tr||t&&t.tr||r).call(t,"Identifier of the user owner of the virtual network from which to lease an IP and MAC address to this Virtual Machine network interface.",{name:"tr",hash:{},data:n}))+'\n          </span>\n        </label>\n        <input type="text" wizard_field="NETWORK_UID" id="NETWORK_UID" name="NETWORK_UID"/>\n      </div>\n      <div class="large-6 columns">\n        <label for="NETWORK_UNAME">\n          '+o((e.tr||t&&t.tr||r).call(t,"User Name",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+o((e.tr||t&&t.tr||r).call(t,"Name of the user owner of the virtual network from which to lease an IP and MAC address to this Virtual Machine network interface.",{name:"tr",hash:{},data:n}))+'\n          </span>\n        </label>\n        <input type="text" wizard_field="NETWORK_UNAME" id="NETWORK_UNAME" name="NETWORK_UNAME"/>\n      </div>\n    </div>\n  </fieldset>\n  <fieldset>\n    <legend>'+o((e.tr||t&&t.tr||r).call(t,"Override Network Values IPv4",{name:"tr",hash:{},data:n}))+'</legend>\n    <div class="row">\n      <div class="large-6 columns">\n        <label for="IP">\n          '+o((e.tr||t&&t.tr||r).call(t,"IP",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Request an specific IP from the Network",{name:"tr",hash:{},data:n}))+'</span>\n        </label>\n        <input type="text" wizard_field="IP" id="IP" name="IP" size="3" />\n      </div>\n      <div class="large-6 columns">\n        <label for="MAC">\n          '+o((e.tr||t&&t.tr||r).call(t,"MAC",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Set a specific MAC to the NIC",{name:"tr",hash:{},data:n}))+'</span>\n        </label>\n        <input type="text" wizard_field="MAC" id="MAC" name="MAC"/>\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-6 columns">\n        <label for="NETWORK_MASK">\n          '+o((e.tr||t&&t.tr||r).call(t,"Network Mask",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+o((e.tr||t&&t.tr||r).call(t,"Override the network mask of the network. For example, 255.255.255.0",{name:"tr",hash:{},data:n}))+'\n          </span>\n        </label>\n        <input type="text" wizard_field="NETWORK_MASK" id="NETWORK_MASK" name="NETWORK_MASK"/>\n      </div>\n      <div class="large-6 columns">\n        <label for="NETWORK_ADDRESS">\n          '+o((e.tr||t&&t.tr||r).call(t,"Network Address",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+o((e.tr||t&&t.tr||r).call(t,"Override the base network address. For example, 192.168.1.0",{name:"tr",hash:{},data:n}))+'\n          </span>\n        </label>\n        <input type="text" wizard_field="NETWORK_ADDRESS" id="NETWORK_ADDRESS" name="NETWORK_ADDRESS"/>\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-6 columns">\n        <label for="GATEWAY">\n          '+o((e.tr||t&&t.tr||r).call(t,"Gateway",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Override the Router of the network.",{name:"tr",hash:{},data:n}))+'</span>\n        </label>\n        <input type="text" wizard_field="GATEWAY" id="GATEWAY" name="GATEWAY"/>\n      </div>\n      <div class="large-6 columns">\n        <label for="DNS">\n          '+o((e.tr||t&&t.tr||r).call(t,"DNS",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Override the specific DNS for this network",{name:"tr",hash:{},data:n}))+'</span>\n        </label>\n        <input type="text" wizard_field="DNS" id="DNS" name="DNS"/>\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-6 columns">\n        <label for="SEARCH_DOMAIN">\n          '+o((e.tr||t&&t.tr||r).call(t,"Search Domain",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Override the Search Domain for this network.",{name:"tr",hash:{},data:n}))+'</span>\n        </label>\n        <input type="text" wizard_field="SEARCH_DOMAIN" id="SEARCH_DOMAIN" name="SEARCH_DOMAIN"/>\n      </div>\n    </div>\n  </fieldset>\n  <fieldset>\n    <legend>'+o((e.tr||t&&t.tr||r).call(t,"Override Network Values IPv6",{name:"tr",hash:{},data:n}))+'</legend>\n    <div class="row">\n      <div class="large-6 columns">\n        <label for="IP6_GLOBAL">\n          '+o((e.tr||t&&t.tr||r).call(t,"IP6 Global",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Request an specific IP from the IPv6 Network",{name:"tr",hash:{},data:n}))+'</span>\n        </label>\n        <input type="text" wizard_field="IP6_GLOBAL" id="IP6_GLOBAL" name="IP6_GLOBAL" size="3" />\n      </div>\n      <div class="large-6 columns">\n        <label for="GATEWAY6">\n          '+o((e.tr||t&&t.tr||r).call(t,"GATEWAY6",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Override the Router of the IPv6 network.",{name:"tr",hash:{},data:n}))+'</span>\n        </label>\n        <input type="text" wizard_field="GATEWAY6" id="GATEWAY6" name="GATEWAY6"/>\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-6 columns">\n        <label for="CONTEXT_FORCE_IPV4">\n          '+o((e.tr||t&&t.tr||r).call(t,"Network Mask",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+o((e.tr||t&&t.tr||r).call(t,"Override force IPv4 for this IPv6 network. Values: Yes or No.",{name:"tr",hash:{},data:n}))+'\n          </span>\n        </label>\n        <input type="text" wizard_field="CONTEXT_FORCE_IPV4" id="CONTEXT_FORCE_IPV4" name="CONTEXT_FORCE_IPV4"/>\n      </div>\n    </div>\n  </fieldset>\n  <fieldset>\n    <legend>'+o((e.tr||t&&t.tr||r).call(t,"Harware",{name:"tr",hash:{},data:n}))+'</legend>\n    <div class="row">\n      <div class="large-6 columns">\n        <label for="MODEL">\n          '+o((e.tr||t&&t.tr||r).call(t,"Model",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+o((e.tr||t&&t.tr||r).call(t,"Hardware that will emulate this network interface. With Xen this is the type attribute of the vif.",{name:"tr",hash:{},data:n}))+'\n          </span>\n        </label>\n        <input type="text" wizard_field="MODEL" id="MODEL" name="MODEL" />\n      </div>\n    </div>\n  </fieldset>\n  <br>\n  <fieldset>\n    <legend>'+o((e.tr||t&&t.tr||r).call(t,"Security Groups",{name:"tr",hash:{},data:n}))+'</legend>\n    <div name="str_nic_tab_id" str_nic_tab_id="'+o((i=null!=(i=e.nicTabId||(null!=t?t.nicTabId:t))?i:r,typeof i===l?i.call(t,{name:"nicTabId",hash:{},data:n}):i))+'">\n      ';return i=null!=(i=e.secgroupsTableSelectHTML||(null!=t?t.secgroupsTableSelectHTML:t))?i:r,s=typeof i===l?i.call(t,{name:"secgroupsTableSelectHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+'\n    </div>\n  </fieldset>\n  <div style="display: none;">\n    <fieldset>\n      <legend>'+o((e.tr||t&&t.tr||r).call(t,"TCP Firewall",{name:"tr",hash:{},data:n}))+'</legend>\n      <div class="row">\n        <div class="large-12 columns text-center">\n          <input type="radio" class="tcp_type" name="tcp_type" id="'+o((i=null!=(i=e.nicTabId||(null!=t?t.nicTabId:t))?i:r,typeof i===l?i.call(t,{name:"nicTabId",hash:{},data:n}):i))+'white_tcp_type" value="WHITE_PORTS_TCP">\n          <label for="'+o((i=null!=(i=e.nicTabId||(null!=t?t.nicTabId:t))?i:r,typeof i===l?i.call(t,{name:"nicTabId",hash:{},data:n}):i))+'white_tcp_type">'+o((e.tr||t&&t.tr||r).call(t,"Whitelist",{name:"tr",hash:{},data:n}))+'</label>\n          <input type="radio" class="tcp_type" name="tcp_type" id="'+o((i=null!=(i=e.nicTabId||(null!=t?t.nicTabId:t))?i:r,typeof i===l?i.call(t,{name:"nicTabId",hash:{},data:n}):i))+'black_tcp_type" value="BLACK_PORTS_TCP">\n          <label for="'+o((i=null!=(i=e.nicTabId||(null!=t?t.nicTabId:t))?i:r,typeof i===l?i.call(t,{name:"nicTabId",hash:{},data:n}):i))+'black_tcp_type">'+o((e.tr||t&&t.tr||r).call(t,"Blacklist",{name:"tr",hash:{},data:n}))+'</label>\n        </div>\n      </div>\n      <div class="row">\n        <div class="large-12 columns">\n          <label for="TCP_PORTS">\n            '+o((e.tr||t&&t.tr||r).call(t,"PORTS",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">\n              '+o((e.tr||t&&t.tr||r).call(t,"A list of ports separated by commas or a ranges separated by semicolons, e.g.: 22,80,5900:6000",{name:"tr",hash:{},data:n}))+'\n            </span>\n          </label>\n          <input type="text" id="TCP_PORTS" name="ports" />\n        </div>\n      </div>\n    </fieldset>\n    <fieldset>\n      <legend>'+o((e.tr||t&&t.tr||r).call(t,"UDP Firewall",{name:"tr",hash:{},data:n}))+'</legend>\n      <div class="row">\n        <div class="large-12 columns text-center">\n          <input type="radio" class="udp_type" name="udp_type" id="'+o((i=null!=(i=e.nicTabId||(null!=t?t.nicTabId:t))?i:r,typeof i===l?i.call(t,{name:"nicTabId",hash:{},data:n}):i))+'white_udp_type" value="WHITE_PORTS_UDP">\n          <label for="'+o((i=null!=(i=e.nicTabId||(null!=t?t.nicTabId:t))?i:r,typeof i===l?i.call(t,{name:"nicTabId",hash:{},data:n}):i))+'white_udp_type">'+o((e.tr||t&&t.tr||r).call(t,"Whitelist",{name:"tr",hash:{},data:n}))+'</label>\n          <input type="radio" class="udp_type" name="udp_type" id="'+o((i=null!=(i=e.nicTabId||(null!=t?t.nicTabId:t))?i:r,typeof i===l?i.call(t,{name:"nicTabId",hash:{},data:n}):i))+'black_udp_type" value="BLACK_PORTS_UDP">\n          <label for="'+o((i=null!=(i=e.nicTabId||(null!=t?t.nicTabId:t))?i:r,typeof i===l?i.call(t,{name:"nicTabId",hash:{},data:n}):i))+'black_udp_type">'+o((e.tr||t&&t.tr||r).call(t,"Blacklist",{name:"tr",hash:{},data:n}))+'</label>\n        </div>\n      </div>\n      <div class="row">\n        <div class="large-12 columns">\n          <label for="UDP_PORTS">\n            '+o((e.tr||t&&t.tr||r).call(t,"PORTS",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">\n              '+o((e.tr||t&&t.tr||r).call(t,"A list of ports separated by commas or a ranges separated by semicolons, e.g.: 22,80,5900:6000",{name:"tr",hash:{},data:n}))+'\n            </span>\n          </label>\n          <input type="text" id="UDP_PORTS" name="ports" />\n        </div>\n      </div>\n    </fieldset>\n    <fieldset>\n      <legend>'+o((e.tr||t&&t.tr||r).call(t,"ICMP",{name:"tr",hash:{},data:n}))+'</legend>\n      <div class="row">\n        <div class="large-12 columns">\n          <label>\n            <input type="checkbox" name="icmp_type" value="ICMP" id="icmp_type">'+o((e.tr||t&&t.tr||r).call(t,"Drop",{name:"tr",hash:{},data:n}))+"</label>\n        </div>\n      </div>\n    </fieldset>\n  </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l='<div class="row">\n  ';return i=null!=(i=e.vnetsTableSelectHTML||(null!=t?t.vnetsTableSelectHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"vnetsTableSelectHTML",hash:{},data:n}):i,null!=s&&(l+=s),l+="\n  <br>\n",s=(e.advancedSection||t&&t.advancedSection||o).call(t,(e.tr||t&&t.tr||o).call(t,"Advanced Options",{name:"tr",hash:{},data:n}),{name:"advancedSection",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(l+=s),l+"</div>"},useData:!0});return e.registerPartial("tabs/templates-tab/form-panels/create/wizard-tabs/network/nic-tab/html",a),a}),define("tabs/templates-tab/form-panels/create/wizard-tabs/network/nic-tab",["require","nouislider","sunstone-config","utils/locale","utils/tips","tabs/vnets-tab/datatable","tabs/secgroups-tab/datatable","utils/wizard-fields","hbs!./nic-tab/html"],function(t){function e(t){this.nicTabId="nicTab"+t,this.vnetsTable=new l(this.nicTabId+"Table",{select:!0});var e={select:!0,selectOptions:{multiple_choice:!0}};this.secgroupsTable=new c(this.nicTabId+"SGTable",e)}function a(){return u({nicTabId:this.nicTabId,vnetsTableSelectHTML:this.vnetsTable.dataTableHTML,secgroupsTableSelectHTML:this.secgroupsTable.dataTableHTML})}function n(){this.vnetsTable.refreshResourceTableSelect()}function s(t){var e=this;o.setup(t),e.vnetsTable.initialize({selectOptions:{select_callback:function(e,a){$("#NETWORK_ID",t).val()!=e[a.id_index]&&($("#NETWORK_ID",t).val(""),$("#NETWORK",t).val(e[a.name_index]),$("#NETWORK_UNAME",t).val(e[a.uname_index]),$("#NETWORK_UID",t).val(""))}}}),e.vnetsTable.refreshResourceTableSelect(),e.secgroupsTable.initialize(),e.secgroupsTable.refreshResourceTableSelect()}function i(t){var e=d.retrieve(t),a=$("input.tcp_type:checked",t).val();a&&(e[a]=$("#TCP_PORTS",t).val());var n=$("input.udp_type:checked",t).val();n&&(e[n]=$("#UDP_PORTS",t).val()),$("#icmp_type",t).is(":checked")&&(e.ICMP="drop");var s=this.secgroupsTable.retrieveResourceTableSelect();return void 0!=s&&0!=s.length&&(e.SECURITY_GROUPS=s.join(",")),e}function r(t,e){if(void 0!=e.NETWORK_ID){var a={ids:e.NETWORK_ID};this.vnetsTable.selectResourceTableSelect(a)}else if(void 0!=e.NETWORK&&void 0!=e.NETWORK_UNAME){var a={names:{name:e.NETWORK,uname:e.NETWORK_UNAME}};this.vnetsTable.selectResourceTableSelect(a)}if(e.WHITE_PORTS_TCP){var n=$("input.tcp_type[value='WHITE_PORTS_TCP']",t);n.click(),$("#TCP_PORTS",t).val(e.WHITE_PORTS_TCP)}else if(e.BLACK_PORTS_TCP){var n=$("input.tcp_type[value='BLACK_PORTS_TCP']",t);n.click(),$("#TCP_PORTS",t).val(e.BLACK_PORTS_TCP)}if(e.WHITE_PORTS_UDP){var n=$("input.udp_type[value='WHITE_PORTS_UDP']",t);n.click(),$("#UDP_PORTS",t).val(e.WHITE_PORTS_UDP)}else if(e.BLACK_PORTS_UDP){var n=$("input.udp_type[value='BLACK_PORTS_UDP']",t);n.click(),$("#UDP_PORTS",t).val(e.BLACK_PORTS_UDP)}if(e.ICMP){var n=$("#icmp_type",t);$("#icmp_type",t).attr("checked","checked")}if(void 0!=e.SECURITY_GROUPS&&0!=e.SECURITY_GROUPS.length){var a={ids:e.SECURITY_GROUPS.split(",")};this.secgroupsTable.selectResourceTableSelect(a)}else this.secgroupsTable.refreshResourceTableSelect();d.fill(t,e)}t("nouislider");var o=(t("sunstone-config"),t("utils/locale"),t("utils/tips")),l=t("tabs/vnets-tab/datatable"),c=t("tabs/secgroups-tab/datatable"),d=t("utils/wizard-fields"),u=t("hbs!./nic-tab/html");return e.prototype.constructor=e,e.prototype.html=a,e.prototype.setup=s,e.prototype.onShow=n,e.prototype.retrieve=i,e.prototype.fill=r,e}),define("tabs/vms-tab/dialogs/attach-nic/dialogId",["require"],function(){return"attachNICVMDialog"}),define("tabs/vms-tab/dialogs/attach-nic",["require","utils/dialogs/dialog","hbs!./attach-nic/html","sunstone","utils/notifier","utils/tips","tabs/templates-tab/form-panels/create/wizard-tabs/network/nic-tab","utils/wizard-fields","./attach-nic/dialogId","../tabId"],function(t){function e(){this.dialogId=u,this.nicTab=new d(u+"NickTab"),r.call(this)}function a(){return o({dialogId:this.dialogId,nicTabHTML:this.nicTab.html()})}function n(t){var e=this;return e.nicTab.setup(),c.setup(t),$("#"+u+"Form",t).submit(function(){var a=e.nicTab.retrieve(t),n={NIC:a};return l.runAction("VM.attachnic",e.element.ID,n),l.getDialog(u).hide(),l.getDialog(u).reset(),!1}),!1}function s(t){return this.nicTab.onShow(t),$("#vm_id",t).val(this.element.ID),!1}function i(t){this.element=t}{var r=t("utils/dialogs/dialog"),o=t("hbs!./attach-nic/html"),l=t("sunstone"),c=(t("utils/notifier"),t("utils/tips")),d=t("tabs/templates-tab/form-panels/create/wizard-tabs/network/nic-tab"),u=(t("utils/wizard-fields"),t("./attach-nic/dialogId"));t("../tabId")}return e.DIALOG_ID=u,e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=s,e.prototype.setup=n,e.prototype.setElement=i,e}),define("hbs!tabs/vms-tab/dialogs/snapshot/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<div id="'+o((s=null!=(s=e.dialogId||(null!=t?t.dialogId:t))?s:r,typeof s===i?s.call(t,{name:"dialogId",hash:{},data:n}):s))+'" class="reveal-modal small" role="dialog" data-reveal >\n  <div class="row">\n    <div class="large-12 columns">\n      <h3 class="subheader" id="">'+o((e.tr||t&&t.tr||r).call(t,"Snapshot",{name:"tr",hash:{},data:n}))+'</h3>\n    </div>\n  </div>\n  <div class="reveal-body">\n    <form id="'+o((s=null!=(s=e.dialogId||(null!=t?t.dialogId:t))?s:r,typeof s===i?s.call(t,{name:"dialogId",hash:{},data:n}):s))+'Form" action="">\n      <div class="row">\n        <div class="large-6 columns">\n          <label for="vm_id">'+o((e.tr||t&&t.tr||r).call(t,"Virtual Machine ID",{name:"tr",hash:{},data:n}))+':</label>\n          <input style="border-style: inset; background-color: lightgrey" type="text" name="vm_id" id="vm_id" disabled/>\n        </div>\n      </div>\n      <div class="row">\n        <div class="large-12 columns">\n          <label for="snapshot_name">'+o((e.tr||t&&t.tr||r).call(t,"Snapshot name",{name:"tr",hash:{},data:n}))+':</label>\n          <input type="text" name="snapshot_name" id="snapshot_name" />\n        </div>\n      </div>\n      <div class="form_buttons">\n        <button class="button radius right success" id="snapshot_live_button" type="submit" value="VM.saveas">'+o((e.tr||t&&t.tr||r).call(t,"Take snapshot",{name:"tr",hash:{},data:n}))+'</button>\n      </div>\n      <a class="close-reveal-modal">&#215;</a>\n    </form>\n  </div>\n</div>'},useData:!0});return e.registerPartial("tabs/vms-tab/dialogs/snapshot/html",a),a}),define("tabs/vms-tab/dialogs/snapshot/dialogId",["require"],function(){return"snapshotVMDialog"}),define("tabs/vms-tab/dialogs/snapshot",["require","utils/dialogs/dialog","hbs!./snapshot/html","sunstone","utils/tips","./snapshot/dialogId","../tabId"],function(t){function e(){this.dialogId=d,r.call(this)}function a(){return o({dialogId:this.dialogId})}function n(t){var e=this;return c.setup(t),$("#"+d+"Form",t).submit(function(){var t=$("#snapshot_name",this).val(),a={snapshot_name:t};return l.runAction("VM.snapshot_create",e.element.ID,a),l.getDialog(d).hide(),l.getDialog(d).reset(),!1}),!1}function s(t){return $("#vm_id",t).val(this.element.ID),$("#snapshot_name",t).focus(),!1}function i(t){this.element=t}{var r=t("utils/dialogs/dialog"),o=t("hbs!./snapshot/html"),l=t("sunstone"),c=t("utils/tips"),d=t("./snapshot/dialogId");t("../tabId")}return e.DIALOG_ID=d,e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=s,e.prototype.setup=n,e.prototype.setElement=i,e}),define("hbs!tabs/vms-tab/dialogs/vnc/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<div id="'+o((s=null!=(s=e.dialogId||(null!=t?t.dialogId:t))?s:r,typeof s===i?s.call(t,{name:"dialogId",hash:{},data:n}):s))+'" class="reveal-modal large max-height" style="width:auto; max-width:70%" data-reveal >\n  <div class="row">\n    <div class="large-12 columns">\n      <h3 class="subheader" id="vnc_dialog">\n        '+o((e.tr||t&&t.tr||r).call(t,"VNC",{name:"tr",hash:{},data:n}))+'\n        <span id="VNC_status">'+o((e.tr||t&&t.tr||r).call(t,"Loading",{name:"tr",hash:{},data:n}))+'</span>\n        <a id="open_in_a_new_window" href="" target="_blank" title="'+o((e.tr||t&&t.tr||r).call(t,"Open in a new window",{name:"tr",hash:{},data:n}))+'"> <i class="fa fa-external-link detach-vnc-icon"/></a>\n        <span id="VNC_buttons" class="right">\n          <input type="button" value="Send CtrlAltDel" id="sendCtrlAltDelButton"></span>\n      </h3>\n    </div>\n  </div>\n  <div class="reveal-body" style="width:100%; overflow-x:overlay">\n    <canvas id="VNC_canvas" width="640px">'+o((e.tr||t&&t.tr||r).call(t,"Canvas not supported.",{name:"tr",hash:{},data:n}))+'</canvas>\n    <div id="VNC_status_bar" class="VNC_status_bar"></div>\n  </div>\n  <a class="close-reveal-modal">&#215;</a>\n</div>'},useData:!0});return e.registerPartial("tabs/vms-tab/dialogs/vnc/html",a),a}),define("tabs/vms-tab/dialogs/vnc",["require","utils/dialogs/dialog","hbs!./vnc/html","sunstone","utils/vnc","./vnc/dialogId","../tabId"],function(t){function e(){this.dialogId=u,o.call(this)}function a(){return l({dialogId:this.dialogId})}function n(t){return $("#open_in_a_new_window",t).on("click",function(){var t=c.getDialog(u);t.hide()}),$("#sendCtrlAltDelButton",t).click(function(){return d.sendCtrlAltDel(),!1}),!1}function s(){return d.vncCallback(this.element),!1}function i(){return d.disconnect(),d.unlock(),!1}function r(t){this.element=t}{var o=t("utils/dialogs/dialog"),l=t("hbs!./vnc/html"),c=t("sunstone"),d=t("utils/vnc"),u=t("./vnc/dialogId");t("../tabId")}return e.DIALOG_ID=u,e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=s,e.prototype.onClose=i,e.prototype.setup=n,e.prototype.setElement=r,e}),define("hbs!tabs/vms-tab/dialogs/spice/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<div id="'+o((s=null!=(s=e.dialogId||(null!=t?t.dialogId:t))?s:r,typeof s===i?s.call(t,{name:"dialogId",hash:{},data:n}):s))+'" class="reveal-modal large max-height" style="width:auto; max-width:70%" data-reveal >\n  <div class="row">\n    <div class="large-12 columns">\n      <h3 class="subheader" id="spice_dialog">\n        '+o((e.tr||t&&t.tr||r).call(t,"SPICE",{name:"tr",hash:{},data:n}))+'\n        <span id="vnc_buttons">\n          <a id="open_in_a_new_window_spice" href="" target="_blank" title="'+o((e.tr||t&&t.tr||r).call(t,"Open in a new window",{name:"tr",hash:{},data:n}))+'"> <i class="fa fa-external-link detach-spice-icon"/></a>\n        </span>\n      </h3>\n    </div>\n  </div>\n  <div class="reveal-body" style="width:100%; overflow-x:overlay">\n    <div id="spice-area">\n      <div id="spice-screen" class="spice-screen"></div>\n    </div>\n  </div>\n  <div id="message-div" class="spice-message"></div>\n  <a class="close-reveal-modal">&#215;</a>\n</div>'},useData:!0});return e.registerPartial("tabs/vms-tab/dialogs/spice/html",a),a}),define("tabs/vms-tab/dialogs/spice",["require","utils/dialogs/dialog","hbs!./spice/html","sunstone","utils/spice","./spice/dialogId","../tabId"],function(t){function e(){this.dialogId=u,o.call(this)}function a(){return l({dialogId:this.dialogId})}function n(t){return $("#open_in_a_new_window_spice",t).on("click",function(){var t=c.getDialog(u);t.hide()}),!1}function s(){return d.spiceCallback(this.element),!1}function i(){return d.disconnect(),d.unlock(),!1}function r(t){this.element=t}{var o=t("utils/dialogs/dialog"),l=t("hbs!./spice/html"),c=t("sunstone"),d=t("utils/spice"),u=t("./spice/dialogId");t("../tabId")}return e.DIALOG_ID=u,e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=s,e.prototype.onClose=i,e.prototype.setup=n,e.prototype.setElement=r,e}),define("hbs!utils/panel/permissions-table/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<table  class="'+l((i=null!=(i=e.resourceType||(null!=t?t.resourceType:t))?i:o,typeof i===r?i.call(t,{name:"resourceType",hash:{},data:n}):i))+'_permissions_table dataTable extended_table">\n  ';return i=null!=(i=e.permissionsHTML||(null!=t?t.permissionsHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"permissionsHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+='\n  <thead>\n    <tr>\n      <th colspan="4" style="width:130px">'+l((e.tr||t&&t.tr||o).call(t,"Ownership",{name:"tr",hash:{},data:n}))+"</th>\n    </tr>\n  </thead>\n  ",i=null!=(i=e.ownerHTML||(null!=t?t.ownerHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"ownerHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+="\n  ",i=null!=(i=e.groupHTML||(null!=t?t.groupHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"groupHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+"\n</table>"},useData:!0});return e.registerPartial("utils/panel/permissions-table/html",a),a}),define("hbs!utils/panel/permissions-table/permissions",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<thead>\n  <tr>\n    <th style="width:130px">'+i((e.tr||t&&t.tr||s).call(t,"Permissions",{name:"tr",hash:{},data:n}))+':</th>\n    <th style="width:40px;text-align:center;">'+i((e.tr||t&&t.tr||s).call(t,"Use",{name:"tr",hash:{},data:n}))+'</th>\n    <th style="width:40px;text-align:center;">'+i((e.tr||t&&t.tr||s).call(t,"Manage",{name:"tr",hash:{},data:n}))+'</th>\n    <th style="width:40px;text-align:center;">'+i((e.tr||t&&t.tr||s).call(t,"Admin",{name:"tr",hash:{},data:n}))+'</th>\n  </tr>\n</thead>\n<tr>\n  <td class="key_td">'+i((e.tr||t&&t.tr||s).call(t,"Owner",{name:"tr",hash:{},data:n}))+'</td>\n  <td style="text-align:center">\n    <input type="checkbox" class="permission_check owner_u" />\n  </td>\n  <td style="text-align:center">\n    <input type="checkbox" class="permission_check owner_m" />\n  </td>\n  <td style="text-align:center">\n    <input type="checkbox" class="permission_check owner_a" />\n  </td>\n</tr>\n<tr>\n  <td class="key_td">'+i((e.tr||t&&t.tr||s).call(t,"Group",{name:"tr",hash:{},data:n}))+'</td>\n  <td style="text-align:center">\n    <input type="checkbox" class="permission_check group_u" />\n  </td>\n  <td style="text-align:center">\n    <input type="checkbox" class="permission_check group_m" />\n  </td>\n  <td style="text-align:center">\n    <input type="checkbox" class="permission_check group_a" />\n  </td>\n</tr>\n<tr>\n  <td class="key_td">'+i((e.tr||t&&t.tr||s).call(t,"Other",{name:"tr",hash:{},data:n}))+'</td>\n  <td style="text-align:center">\n    <input type="checkbox" class="permission_check other_u" />\n  </td>\n  <td style="text-align:center">\n    <input type="checkbox" class="permission_check other_m" />\n  </td>\n  <td style="text-align:center">\n    <input type="checkbox" class="permission_check other_a" />\n  </td>\n</tr>'
},useData:!0});return e.registerPartial("utils/panel/permissions-table/permissions",a),a}),define("hbs!utils/panel/permissions-table/owner",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o=this.lambda;return'<tr>\n  <td class="key_td">'+r((e.tr||t&&t.tr||i).call(t,"Owner",{name:"tr",hash:{},data:n}))+'</td>\n  <td colspan="2" id="value_td_owner">'+r(o(null!=(s=null!=t?t.element:t)?s.UNAME:s,t))+'</td>\n  <td>\n    <div id="div_edit_chg_owner">\n      <a id="div_edit_chg_owner_link" class="edit_e" href="#"> <i class="fa fa-pencil-square-o right"/></a>\n    </div>\n  </td>\n</tr>'},useData:!0});return e.registerPartial("utils/panel/permissions-table/owner",a),a}),define("hbs!utils/panel/permissions-table/group",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o=this.lambda;return'<tr>\n  <td class="key_td">'+r((e.tr||t&&t.tr||i).call(t,"Group",{name:"tr",hash:{},data:n}))+'</td>\n  <td colspan="2" id="value_td_group">'+r(o(null!=(s=null!=t?t.element:t)?s.GNAME:s,t))+'</td>\n  <td>\n    <div id="div_edit_chg_group">\n      <a id="div_edit_chg_group_link" class="edit_e" href="#"> <i class="fa fa-pencil-square-o right"/></a>\n    </div>\n  </td>\n</tr>'},useData:!0});return e.registerPartial("utils/panel/permissions-table/group",a),a}),define("utils/panel/permissions-table",["require","hbs!./permissions-table/html","hbs!./permissions-table/permissions","hbs!./permissions-table/owner","hbs!./permissions-table/group","utils/resource-select","sunstone","sunstone-config"],function(t){var e=t("hbs!./permissions-table/html"),a=t("hbs!./permissions-table/permissions"),n=t("hbs!./permissions-table/owner"),s=t("hbs!./permissions-table/group"),i=t("utils/resource-select"),r=t("sunstone"),o=t("sunstone-config"),l=function(t,i,r){var l="";o.isTabActionEnabled(t,i+".chmod")&&(l=a({element:r}));var c="";o.isTabActionEnabled(t,i+".chown")&&(c=n({element:r}));var d="";o.isTabActionEnabled(t,i+".chgrp")&&(d=s({element:r}));var u=e({resourceType:i.toLowerCase(),permissionsHTML:l,ownerHTML:c,groupHTML:d});return u},c=function(t,e,a,n){var s=a.ID;return o.isTabActionEnabled(t,e+".chmod")&&(y(a,n),n.off("change",".permission_check"),n.on("change",".permission_check",function(){var t={octet:d(n)};r.runAction(e+".chmod",s,t)})),o.isTabActionEnabled(t,e+".chown")&&(n.off("click","#div_edit_chg_owner_link"),n.on("click","#div_edit_chg_owner_link",function(){$(this).parents("tr");i.insert("#value_td_owner",n,"User",a.UID,!1)}),n.off("change","#value_td_owner .resource_list_select"),n.on("change","#value_td_owner .resource_list_select",function(){var t=$(this).val();""!=t&&r.runAction(e+".chown",[s],t)})),o.isTabActionEnabled(t,e+".chgrp")&&(n.off("click","#div_edit_chg_group_link"),n.on("click","#div_edit_chg_group_link",function(){i.insert("#value_td_group",n,"Group",a.GID,!1)}),n.off("change","#value_td_group .resource_list_select"),n.on("change","#value_td_group .resource_list_select",function(){var t=$(this).val();""!=t&&r.runAction(e+".chgrp",[s],t)})),!1},d=function(t){var e=0,a=0,n=0;return $(".owner_u",t).is(":checked")&&(e+=4),$(".owner_m",t).is(":checked")&&(e+=2),$(".owner_a",t).is(":checked")&&(e+=1),$(".group_u",t).is(":checked")&&(a+=4),$(".group_m",t).is(":checked")&&(a+=2),$(".group_a",t).is(":checked")&&(a+=1),$(".other_u",t).is(":checked")&&(n+=4),$(".other_m",t).is(":checked")&&(n+=2),$(".other_a",t).is(":checked")&&(n+=1),""+e+a+n},u=function(t){return parseInt(t.PERMISSIONS.OWNER_U)},p=function(t){return parseInt(t.PERMISSIONS.OWNER_M)},h=function(t){return parseInt(t.PERMISSIONS.OWNER_A)},f=function(t){return parseInt(t.PERMISSIONS.GROUP_U)},m=function(t){return parseInt(t.PERMISSIONS.GROUP_M)},_=function(t){return parseInt(t.PERMISSIONS.GROUP_A)},b=function(t){return parseInt(t.PERMISSIONS.OTHER_U)},v=function(t){return parseInt(t.PERMISSIONS.OTHER_M)},g=function(t){return parseInt(t.PERMISSIONS.OTHER_A)},y=function(t,e){u(t)&&$(".owner_u",e).attr("checked","checked"),p(t)&&$(".owner_m",e).attr("checked","checked"),h(t)&&$(".owner_a",e).attr("checked","checked"),f(t)&&$(".group_u",e).attr("checked","checked"),m(t)&&$(".group_m",e).attr("checked","checked"),_(t)&&$(".group_a",e).attr("checked","checked"),b(t)&&$(".other_u",e).attr("checked","checked"),v(t)&&$(".other_m",e).attr("checked","checked"),g(t)&&$(".other_a",e).attr("checked","checked")};return{html:l,setup:c}}),define("hbs!tabs/vms-tab/panels/info/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,c="function",d='<div class="row">\n  <div class="large-6 columns">\n    <table class="dataTable extended_table">\n      <thead>\n        <tr>\n          <th colspan="3">'+o((e.tr||t&&t.tr||r).call(t,"Information",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"ID",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td" colspan="2">'+o(l(null!=(s=null!=t?t.element:t)?s.ID:s,t))+"</td>\n        </tr>\n        ";return i=null!=(i=e.renameTrHTML||(null!=t?t.renameTrHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"renameTrHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+='\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"State",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o((i=null!=(i=e.stateStr||(null!=t?t.stateStr:t))?i:r,typeof i===c?i.call(t,{name:"stateStr",hash:{},data:n}):i))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"LCM State",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o((i=null!=(i=e.lcmStateStr||(null!=t?t.lcmStateStr:t))?i:r,typeof i===c?i.call(t,{name:"lcmStateStr",hash:{},data:n}):i))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Host",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o((i=null!=(i=e.hostname||(null!=t?t.hostname:t))?i:r,typeof i===c?i.call(t,{name:"hostname",hash:{},data:n}):i))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Start time",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o((i=null!=(i=e.prettyStartTime||(null!=t?t.prettyStartTime:t))?i:r,typeof i===c?i.call(t,{name:"prettyStartTime",hash:{},data:n}):i))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Deploy ID",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o((i=null!=(i=e.deployId||(null!=t?t.deployId:t))?i:r,typeof i===c?i.call(t,{name:"deployId",hash:{},data:n}):i))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Reschedule",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o((i=null!=(i=e.resched||(null!=t?t.resched:t))?i:r,typeof i===c?i.call(t,{name:"resched",hash:{},data:n}):i))+'</td>\n          <td></td>\n        </tr>\n      </tr>\n    </tbody>\n  </table>\n</div>\n<div class="large-6 columns">',i=null!=(i=e.permissionsTableHTML||(null!=t?t.permissionsTableHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"permissionsTableHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+='</div>\n</div>\n<div class="row">\n<div class="large-9 columns">',i=null!=(i=e.templateTableHTML||(null!=t?t.templateTableHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"templateTableHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+"</div>\n</div>"},useData:!0});return e.registerPartial("tabs/vms-tab/panels/info/html",a),a}),define("tabs/vms-tab/panels/info/panelId",["require"],function(){return"vm_info_tab"}),define("tabs/vms-tab/panels/info",["require","utils/locale","utils/humanize","utils/panel/rename-tr","utils/panel/permissions-table","utils/panel/template-table","opennebula/vm","../utils/state-actions","hbs!./info/html","../tabId","./info/panelId"],function(t){function e(t){return this.title=s.tr("Info"),this.icon="fa-info-circle",this.element=t[m],this}function a(){var t=r.html(f,this.element.NAME),e=o.html(p,f,this.element),a=i.prettyTime(this.element.STIME),n=c.stateStr(this.element.STATE),d=c.lcmStateStr(this.element.LCM_STATE),h=c.hostnameStr(this.element),m="object"==typeof this.element.DEPLOY_ID?"-":this.element.DEPLOY_ID,_=s.tr(parseInt(this.element.RESCHED)?"yes":"no"),b=l.html(this.element.USER_TEMPLATE,f,s.tr("Attributes"));return u({element:this.element,renameTrHTML:t,stateStr:n,lcmStateStr:d,hostname:h,prettyStartTime:a,deployId:m,resched:_,permissionsTableHTML:e,templateTableHTML:b,renameTrHTML:t})}function n(t){d.disableAllStateActions(),d.enableStateActions(this.element.STATE,this.element.LCM_STATE),c.isVNCSupported(this.element)?$(".vnc-right-info").show():$(".vnc-right-info").hide(),c.isSPICESupported(this.element)?$(".spice-right-info").show():$(".spice-right-info").hide(),r.setup(f,this.element.ID,t),o.setup(p,f,this.element,t);var e=this,a={},n={};$.each(e.element.USER_TEMPLATE,function(t,e){t.match(/^SCHED_*/)?n[t]=e:a[t]=e}),l.setup(a,f,this.element.ID,t,n)}var s=t("utils/locale"),i=t("utils/humanize"),r=t("utils/panel/rename-tr"),o=t("utils/panel/permissions-table"),l=t("utils/panel/template-table"),c=t("opennebula/vm"),d=t("../utils/state-actions"),u=t("hbs!./info/html"),p=t("../tabId"),h=t("./info/panelId"),f="VM",m="VM";return e.PANEL_ID=h,e.prototype.html=a,e.prototype.setup=n,e}),define("templates/helpers/humanizeSize",["require","hbs/handlebars","utils/humanize"],function(t){var e=t("hbs/handlebars"),a=t("utils/humanize"),n=function(t,e){switch(t.toUpperCase()){case"B":return a.sizeFromB(e);case"K":case"KB":return a.sizeFromKB(e);case"M":case"MB":return a.sizeFromMB(e);default:return e}};return e.registerHelper("humanizeSize",n),n}),define("hbs!tabs/vms-tab/panels/capacity/html",["hbs","hbs/handlebars","templates/helpers/tr","templates/helpers/valOrDefault","templates/helpers/humanizeSize","templates/helpers/isTabActionEnabled"],function(t,e){var a=e.template({1:function(t,e,a,n){var s,i="";return s=e["if"].call(t,null!=t?t.resizeStateEnabled:t,{name:"if",hash:{},fn:this.program(2,n),inverse:this.program(4,n),data:n}),null!=s&&(i+=s),i},2:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'            <button id="resize_capacity" class="button tiny success right radius" >'+i((e.tr||t&&t.tr||s).call(t,"Resize",{name:"tr",hash:{},data:n}))+"</button>\n"},4:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'            <button id="resize_capacity" class="button tiny success right radius" disabled="disabled">'+i((e.tr||t&&t.tr||s).call(t,"Resize",{name:"tr",hash:{},data:n}))+"</button>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o='<div class="row">\n  <div class="large-9 columns">\n    <table class="info_table dataTable extended_table">\n      <thead>\n        <tr>\n          <th>'+r((e.tr||t&&t.tr||i).call(t,"CPU",{name:"tr",hash:{},data:n}))+"</th>\n          <th>"+r((e.tr||t&&t.tr||i).call(t,"VCPU",{name:"tr",hash:{},data:n}))+"</th>\n          <th>"+r((e.tr||t&&t.tr||i).call(t,"MEMORY",{name:"tr",hash:{},data:n}))+"</th>\n          <th>"+r((e.tr||t&&t.tr||i).call(t,"Cost / CPU",{name:"tr",hash:{},data:n}))+"</th>\n          <th>"+r((e.tr||t&&t.tr||i).call(t,"Cost / MByte",{name:"tr",hash:{},data:n}))+'</th>\n          <th></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td id="cpu_info">'+r((e.valOrDefault||t&&t.valOrDefault||i).call(t,null!=(s=null!=(s=null!=t?t.element:t)?s.TEMPLATE:s)?s.CPU:s,"-",{name:"valOrDefault",hash:{},data:n}))+'</td>\n          <td id="vcpu_info">'+r((e.valOrDefault||t&&t.valOrDefault||i).call(t,null!=(s=null!=(s=null!=t?t.element:t)?s.TEMPLATE:s)?s.VCPU:s,"-",{name:"valOrDefault",hash:{},data:n}))+'</td>\n          <td id="memory_info">'+r((e.humanizeSize||t&&t.humanizeSize||i).call(t,"MB",null!=(s=null!=(s=null!=t?t.element:t)?s.TEMPLATE:s)?s.MEMORY:s,{name:"humanizeSize",hash:{},data:n}))+'</td>\n          <td id="cpu_cost_info">'+r((e.valOrDefault||t&&t.valOrDefault||i).call(t,null!=(s=null!=(s=null!=t?t.element:t)?s.TEMPLATE:s)?s.CPU_COST:s,"-",{name:"valOrDefault",hash:{},data:n}))+'</td>\n          <td id="memory_cost_info" >'+r((e.valOrDefault||t&&t.valOrDefault||i).call(t,null!=(s=null!=(s=null!=t?t.element:t)?s.TEMPLATE:s)?s.MEMORY_COST:s,"-",{name:"valOrDefault",hash:{},data:n}))+"</td>\n          <td>\n";return s=(e.isTabActionEnabled||t&&t.isTabActionEnabled||i).call(t,"vms-tab","VM.resize",{name:"isTabActionEnabled",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(o+=s),o+'          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n<div class="row">\n  <div class="large-6 columns">\n    <div class="row text-center">\n      <div class="large-12 columns">\n        <h3 class="subheader">\n          <small>'+r((e.tr||t&&t.tr||i).call(t,"REAL CPU",{name:"tr",hash:{},data:n}))+'</small>\n        </h3>\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-12 columns">\n        <div class="large-12 columns centered graph vm_cpu_graph text-center" style="height: 100px;">\n          <span  id="provision_dashboard_total" style="font-size:80px">\n            <i class="fa fa-spinner fa-spin"></i>\n          </span>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="large-6 columns">\n    <div class="row text-center">\n      <h3 class="subheader">\n        <small>'+r((e.tr||t&&t.tr||i).call(t,"REAL MEMORY",{name:"tr",hash:{},data:n}))+'</small>\n      </h3>\n    </div>\n    <div class="row">\n      <div class="large-12 columns centered graph vm_memory_graph text-center" style="height: 100px;">\n        <span  id="provision_dashboard_total" style="font-size:80px">\n          <i class="fa fa-spinner fa-spin"></i>\n        </span>\n      </div>\n    </div>\n  </div>\n</div>'},useData:!0});return e.registerPartial("tabs/vms-tab/panels/capacity/html",a),a}),define("tabs/vms-tab/panels/capacity/panelId",["require"],function(){return"vm_capacity_tab"}),define("tabs/vms-tab/panels/capacity",["require","utils/locale","sunstone-config","sunstone","opennebula/vm","utils/notifier","utils/graphs","hbs!./capacity/html","../tabId","./capacity/panelId","../dialogs/resize/dialogId"],function(t){function e(t){return this.panelId=p,this.title=i.tr("Capacity"),this.icon="fa-laptop",this.element=t[f],this}function a(){var t=m.indexOf(this.element.STATE)>-1;return u({element:this.element,resizeStateEnabled:t})}function n(t){var e=this;r.isTabActionEnabled("vms-tab","VM.resize")&&(t.off("click","#resize_capacity"),t.on("click","#resize_capacity",function(){var t=o.getDialog(h);return t.setElement(e.element),t.show(),!1}))}function s(){var t=this;l.monitor({data:{id:t.element.ID,monitor:{monitor_resources:"CPU,MEMORY"}},success:function(t,e){for(var a=[{monitor_resources:"CPU",labels:i.tr("Real CPU"),humanize_figures:!1,div_graph:$(".vm_cpu_graph")},{monitor_resources:"MEMORY",labels:i.tr("Real MEM"),humanize_figures:!0,div_graph:$(".vm_memory_graph")}],n=0;n<a.length;n++)d.plot(e,a[n])},error:c.onError})}var i=t("utils/locale"),r=t("sunstone-config"),o=t("sunstone"),l=t("opennebula/vm"),c=t("utils/notifier"),d=t("utils/graphs"),u=t("hbs!./capacity/html"),p=(t("../tabId"),t("./capacity/panelId")),h=t("../dialogs/resize/dialogId"),f="VM",m=["0","1","2","7","8","9"];return e.PANEL_ID=p,e.prototype.html=a,e.prototype.setup=n,e.prototype.onShow=s,e}),define("tabs/vms-tab/panels/storage/panelId",["require"],function(){return"vm_hotplugging_tab"}),define("tabs/vms-tab/panels/storage",["require","utils/locale","sunstone-config","sunstone","utils/humanize","../utils/state-actions","../tabId","./storage/panelId","../dialogs/attach-disk/dialogId"],function(t){function e(t){return this.panelId=c,this.title=s.tr("Storage"),this.icon="fa-tasks",this.element=t[u],this}function a(){var t=this,e='<form id="hotplugging_form" vmid="'+t.element.ID+'" >       <div class="row">       <div class="large-12 columns">          <table class="info_table dataTable extended_table">            <thead>              <tr>                 <th>'+s.tr("ID")+"</th>                 <th>"+s.tr("Target")+"</th>                 <th>"+s.tr("Image / Format-Size")+"</th>                 <th>"+s.tr("Persistent")+"</th>                 <th>"+s.tr("Save as")+'</th>                 <th colspan="">'+s.tr("Actions")+"</th>                 <th>";i.isTabActionEnabled("vms-tab","VM.attachdisk")&&(e+=l.enabledStateAction("VM.attachdisk",t.element.STATE,t.element.LCM_STATE)?'            <button id="attach_disk" class="button tiny success right radius" >'+s.tr("Attach disk")+"</button>":'            <button id="attach_disk" class="button tiny success right radius" disabled="disabled">'+s.tr("Attach disk")+"</button>"),e+="</th>               </tr>            </thead>            <tbody>";var a=[];if($.isArray(t.element.TEMPLATE.DISK)?a=t.element.TEMPLATE.DISK:$.isEmptyObject(t.element.TEMPLATE.DISK)||(a=[t.element.TEMPLATE.DISK]),!$.isEmptyObject(t.element.TEMPLATE.CONTEXT)){var n=t.element.TEMPLATE.CONTEXT;n.IMAGE=s.tr("Context"),n.CONTEXT=!0,a.push(n)}if(a.length)for(var r=0;r<a.length;r++){var c,d=a[r];"3"!=t.element.STATE||"26"!=t.element.LCM_STATE&&"27"!=t.element.LCM_STATE&&"28"!=t.element.LCM_STATE||"YES"!=d.SAVE_AS_ACTIVE?"3"!=t.element.STATE||"26"!=t.element.LCM_STATE&&"27"!=t.element.LCM_STATE&&"28"!=t.element.LCM_STATE||"YES"!=d.HOTPLUG_SAVE_AS_ACTIVE?"3"==t.element.STATE&&"17"==t.element.LCM_STATE&&(d.ATTACH="YES")?(c=d.SAVE_AS?d.SAVE_AS:"-",actions=s.tr("attach/detach in progress")):(c=d.SAVE_AS?d.SAVE_AS:"-",actions="","YES"==d.SAVE,i.isTabActionEnabled("vms-tab","VM.detachdisk")&&l.enabledStateAction("VM.detachdisk",t.element.STATE,t.element.LCM_STATE)&&!d.CONTEXT&&(actions+='<a href="VM.detachdisk" class="detachdisk" ><i class="fa fa-times"/>'+s.tr("Detach")+"</a>")):(c=d.SAVE_AS?d.SAVE_AS:"-",actions=s.tr("hot snapshot in progress")):(c=s.tr("in progress"),actions=s.tr("deferred snapshot in progress")),e+='               <tr disk_id="'+d.DISK_ID+'">                 <td>'+d.DISK_ID+"</td>                 <td>"+d.TARGET+"</td>                 <td>"+(d.IMAGE?d.IMAGE:o.sizeFromMB(d.SIZE)+(d.FORMAT?" - "+d.FORMAT:""))+"</td>                 <td>"+s.tr(d.SAVE&&"YES"==d.SAVE?"YES":"NO")+"</td>                 <td>"+c+"</td>                 <td>"+actions+"</td>             </tr>"}else e+='           <tr id="no_disks_tr">             <td colspan="6">'+s.tr("No disks to show")+"</td>           </tr>";return e+="               </tbody>             </table>           </div>         </div>       </form>"}function n(t){var e=this;i.isTabActionEnabled("vms-tab","VM.attachdisk")&&(t.off("click","#attach_disk"),t.on("click","#attach_disk",function(){var t=r.getDialog(d);return t.setElement(e.element),t.show(),!1})),i.isTabActionEnabled("vms-tab","VM.detachdisk")&&(t.off("click",".detachdisk"),t.on("click",".detachdisk",function(){var t=$(this).parents("tr").attr("disk_id");return r.runAction("VM.detachdisk",e.element.ID,t),!1}))}var s=t("utils/locale"),i=t("sunstone-config"),r=t("sunstone"),o=t("utils/humanize"),l=t("../utils/state-actions"),c=(t("../tabId"),t("./storage/panelId")),d=t("../dialogs/attach-disk/dialogId"),u="VM";return e.PANEL_ID=c,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/secgroups-tab/utils/common",["require","utils/locale"],function(t){function e(t){var e={};if(void 0!=t.PROTOCOL)switch(t.PROTOCOL.toUpperCase()){case"TCP":e.PROTOCOL=s.tr("TCP");break;case"UDP":e.PROTOCOL=s.tr("UDP");break;case"ICMP":e.PROTOCOL=s.tr("ICMP");break;case"IPSEC":e.PROTOCOL=s.tr("IPsec");break;case"ALL":e.PROTOCOL=s.tr("All");break;default:e.PROTOCOL=""}else e.PROTOCOL="";if(void 0!=t.RULE_TYPE)switch(t.RULE_TYPE.toUpperCase()){case"OUTBOUND":e.RULE_TYPE=s.tr("Outbound");break;case"INBOUND":e.RULE_TYPE=s.tr("Inbound");break;default:e.RULE_TYPE=""}else e.RULE_TYPE="";e.ICMP_TYPE=void 0!=t.ICMP_TYPE?a(t.ICMP_TYPE):"",e.RANGE=void 0!=t.RANGE&&""!=t.RANGE?t.RANGE:s.tr("All");var n="";return void 0!=t.NETWORK_ID&&""!=t.NETWORK_ID&&(n+=s.tr("Virtual Network")+" "+t.NETWORK_ID),void 0!=t.SIZE&&""!=t.SIZE&&(""!=n&&(n+=":<br>"),void 0!=t.IP&&""!=t.IP?n+=s.tr("Start")+": "+t.IP+", ":void 0!=t.MAC&&""!=t.MAC&&(n+=s.tr("Start")+": "+t.MAC+", "),n+=s.tr("Size")+": "+t.SIZE),""==n&&(n=s.tr("Any")),e.NETWORK=n,e}function a(t){switch(t){case"":return tr("All");case"0":return"0: Echo Reply";case"3":return"3: Destination Unreachable";case"4":return"4: Source Quench";case"5":return"5: Redirect";case"6":return"6: Alternate Host Address";case"8":return"8: Echo";case"9":return"9: Router Advertisement";case"10":return"10: Router Solicitation";case"11":return"11: Time Exceeded";case"12":return"12: Parameter Problem";case"13":return"13: Timestamp";case"14":return"14: Timestamp Reply";case"15":return"15: Information Request";case"16":return"16: Information Reply";case"17":return"17: Address Mask Request";case"18":return"18: Address Mask Reply";case"30":return"30: Traceroute";case"31":return"31: Datagram Conversion Error";case"32":return"32: Mobile Host Redirect";case"33":return"33: IPv6 Where-Are-You";case"34":return"34: IPv6 I-Am-Here";case"35":return"35: Mobile Registration Request";case"36":return"36: Mobile Registration Reply";case"37":return"37: Domain Name Request";case"38":return"38: Domain Name Reply";case"39":return"39: SKIP";case"40":return"40: Photuris";case"41":return"41: ICMP messages utilized by experimental mobility protocols such as Seamoby";case"253":return"253: RFC3692-style Experiment 1";case"254":return"254: RFC3692-style Experiment 2";default:return""+t}}function n(t){var e=t.TEMPLATE.RULE;return e?e.constructor!=Array&&(e=[e]):e=[],e}var s=t("utils/locale");return{sgRuleToSt:e,getRules:n}}),define("tabs/vms-tab/panels/network/panelId",["require"],function(){return"vm_network_tab"}),define("tabs/vms-tab/panels/network",["require","utils/locale","sunstone-config","sunstone","utils/humanize","utils/notifier","utils/graphs","../utils/state-actions","opennebula/vm","tabs/secgroups-tab/utils/common","../tabId","./network/panelId","../dialogs/attach-nic/dialogId"],function(t){function e(t){return this.panelId=h,this.title=i.tr("Network"),this.icon="fa-globe",this.element=t[m],this}function a(){var t=this,e='<form id="tab_network_form" vmid="'+t.element.ID+'" >        <div class="row">        <div class="large-12 columns">           <table class="nics_table no-hover info_table dataTable extended_table">             <thead>               <tr>                  <th></th>                  <th>'+i.tr("ID")+"</th>                  <th>"+i.tr("Network")+"</th>                  <th>"+i.tr("IP")+"</th>                  <th>"+i.tr("MAC")+"</th>                  <th>"+i.tr("IPv6 ULA")+"</th>                  <th>"+i.tr("IPv6 Global")+'</th>                  <th colspan="">'+i.tr("Actions")+"</th>                  <th>";r.isTabActionEnabled("vms-tab","VM.attachnic")&&(e+=d.enabledStateAction("VM.attachnic",t.element.STATE,t.element.LCM_STATE)&&u.isNICAttachSupported(t.element)?'             <button id="attach_nic" class="button tiny success right radius" >'+i.tr("Attach nic")+"</button>":'             <button id="attach_nic" class="button tiny success right radius" disabled="disabled">'+i.tr("Attach nic")+"</button>"),e+="</th>                </tr>             </thead>             <tbody>             </tbody>            </table>          </div>        </div>";var a=u.retrieveExternalNetworkAttrs(t.element);return $.isEmptyObject(a)||(e+='<div class="row"><div class="large-12 columns"><table class="dataTable extended_table"><thead><tr><th colspan=2>'+i.tr("Network Monitoring Attributes")+"</th></tr></thead><tbody>",$.each(a,function(t,a){e+="<tr><td>"+t+"</td><td>"+a+"</td></tr>"}),e+="</tbody></table></div></div>"),u.isNICGraphsSupported(t.element)&&(e+='          <div class="row">              <div class="large-6 columns">                <div class="row text-center">                  <h3 class="subheader"><small>'+i.tr("NET RX")+'</small></h3>                </div>                <div class="row">                  <div class="large-12 columns centered graph text-center" id="vm_net_rx_graph" style="height: 100px;">                    <span  id="provision_dashboard_total" style="font-size:80px">                      <i class="fa fa-spinner fa-spin"></i>                    </span>                  </div>                </div>                <div class="row graph_legend">                  <div class="large-12 columns centered" id="vm_net_rx_legend">                  </div>                </div>              </div>              <div class="large-6 columns">                <div class="row text-center">                  <h3 class="subheader"><small>'+i.tr("NET TX")+'</small></h3>                </div>                <div class="row">                  <div class="large-12 columns centered graph text-center" id="vm_net_tx_graph" style="height: 100px;">                    <span  id="provision_dashboard_total" style="font-size:80px">                      <i class="fa fa-spinner fa-spin"></i>                    </span>                  </div>                </div>                <div class="row graph_legend">                  <div class="large-12 columns centered" id="vm_net_tx_legend">                  </div>                </div>              </div>              <div class="large-6 columns">                <div class="row text-center">                  <h3 class="subheader"><small>'+i.tr("NET DOWNLOAD SPEED")+'</small></h3>                </div>                <div class="row">                  <div class="large-12 columns centered graph text-center" id="vm_net_rx_speed_graph" style="height: 100px;">                    <span  id="provision_dashboard_total" style="font-size:80px">                      <i class="fa fa-spinner fa-spin"></i>                    </span>                  </div>                </div>                <div class="row graph_legend">                  <div class="large-12 columns centered" id="vm_net_rx_speed_legend">                  </div>                </div>              </div>              <div class="large-6 columns">                <div class="row text-center">                  <h3 class="subheader"><small>'+i.tr("NET UPLOAD SPEED")+'</small></h3>                </div>                <div class="row">                  <div class="large-12 columns centered graph text-center" id="vm_net_tx_speed_graph" style="height: 100px;">                    <span  id="provision_dashboard_total" style="font-size:80px">                      <i class="fa fa-spinner fa-spin"></i>                    </span>                  </div>                </div>                <div class="row graph_legend">                  <div class="large-12 columns centered" id="vm_net_tx_speed_legend">                  </div>                </div>              </div>          </div>        </form>'),e}function n(t){var e=this,a=[];$.isArray(e.element.TEMPLATE.NIC)?a=e.element.TEMPLATE.NIC:$.isEmptyObject(e.element.TEMPLATE.NIC)||(a=[e.element.TEMPLATE.NIC]);var n=[];if(a.length)for(var n=[],s=0;s<a.length;s++){var l,c=a[s];"3"==e.element.STATE&&"25"==e.element.LCM_STATE&&"YES"==c.ATTACH?l=i.tr("attach/detach in progress"):(l="",r.isTabActionEnabled("vms-tab","VM.detachnic")&&d.enabledStateAction("VM.detachnic",e.element.STATE,e.element.LCM_STATE)&&(l+='<a href="VM.detachnic" class="detachnic" ><i class="fa fa-times"/>'+i.tr("Detach")+"</a>"));var u=[],h={};void 0!=c.SECURITY_GROUPS&&$.each(c.SECURITY_GROUPS.split(","),function(){h[this]=!0}),void 0!=e.element.TEMPLATE.SECURITY_GROUP_RULE&&$.each(e.element.TEMPLATE.SECURITY_GROUP_RULE,function(){h[this.SECURITY_GROUP_ID]&&u.push(this)}),n.push({NIC_ID:c.NIC_ID,NETWORK:c.NETWORK,IP:c.IP?c.IP:"--",MAC:c.MAC,IP6_ULA:c.IP6_ULA?c.IP6_ULA:"--",IP6_GLOBAL:c.IP6_GLOBAL?c.IP6_GLOBAL:"--",ACTIONS:l,SECURITY_GROUP_RULES:u})}$("#tab_network_form .nics_table",t).DataTable({bDeferRender:!0,data:n,columns:[{"class":"open-control",orderable:!1,data:null,defaultContent:'<span class="fa fa-fw fa-chevron-down"></span>'},{data:"NIC_ID",defaultContent:""},{data:"NETWORK",defaultContent:""},{data:"IP",defaultContent:""},{data:"MAC",defaultContent:""},{data:"IP6_ULA",defaultContent:""},{data:"IP6_GLOBAL",defaultContent:""},{data:"ACTIONS",defaultContent:""},{defaultContent:""}],fnRowCallback:function(t,e){(void 0==e.SECURITY_GROUP_RULES||0==e.SECURITY_GROUP_RULES.length)&&$("td.open-control",t).html("").removeClass("open-control"),$(t).attr("nic_id",e.NIC_ID)}});$("#tab_network_form .nics_table",t).dataTable().fnSort([[1,"asc"]]),t.off("click","#tab_network_form .nics_table td.open-control"),t.on("click","#tab_network_form .nics_table td.open-control",function(){var t=$(this).closest("table").DataTable().row($(this).closest("tr"));if(t.child.isShown())t.child.hide(),$(this).children("span").addClass("fa-chevron-down"),$(this).children("span").removeClass("fa-chevron-up");else{var e='<div style="padding-left: 30px;">              <table class="extended_table dataTable">                <thead>                  <tr>                    <th colspan="2">'+i.tr("Security Group")+"</th>                    <th>"+i.tr("Protocol")+"</th>                    <th>"+i.tr("Type")+"</th>                    <th>"+i.tr("Range")+"</th>                    <th>"+i.tr("Network")+"</th>                    <th>"+i.tr("ICMP Type")+"</th>                  </tr>                <thead>                <tbody>";$.each(t.data().SECURITY_GROUP_RULES,function(){var t=p.sgRuleToSt(this),a="<tr>                  <td>"+this.SECURITY_GROUP_ID+"</td>                  <td>"+this.SECURITY_GROUP_NAME+"</td>                  <td>"+t.PROTOCOL+"</td>                  <td>"+t.RULE_TYPE+"</td>                  <td>"+t.RANGE+"</td>                  <td>"+t.NETWORK+"</td>                  <td>"+t.ICMP_TYPE+"</td>                </tr>";e+=a}),t.child(e).show(),$(this).children("span").removeClass("fa-chevron-down"),$(this).children("span").addClass("fa-chevron-up")}}),r.isTabActionEnabled("vms-tab","VM.attachnic")&&(t.off("click","#attach_nic"),t.on("click","#attach_nic",function(){var t=o.getDialog(f);return t.setElement(e.element),t.show(),!1})),r.isTabActionEnabled("vms-tab","VM.detachnic")&&(t.off("click",".detachnic"),t.on("click",".detachnic",function(){var t=$(this).parents("tr").attr("nic_id");return o.runAction("VM.detachnic",e.element.ID,t),!1}))}function s(){var t=this;u.isNICGraphsSupported(t.element)&&u.monitor({data:{id:t.element.ID,monitor:{monitor_resources:"NET_TX,NET_RX"}},success:function(t,e){for(var a=[{labels:i.tr("Network reception"),monitor_resources:"NET_RX",humanize_figures:!0,convert_from_bytes:!0,div_graph:$("#vm_net_rx_graph")},{labels:i.tr("Network transmission"),monitor_resources:"NET_TX",humanize_figures:!0,convert_from_bytes:!0,div_graph:$("#vm_net_tx_graph")},{labels:i.tr("Network reception speed"),monitor_resources:"NET_RX",humanize_figures:!0,convert_from_bytes:!0,y_sufix:"B/s",derivative:!0,div_graph:$("#vm_net_rx_speed_graph")},{labels:i.tr("Network transmission speed"),monitor_resources:"NET_TX",humanize_figures:!0,convert_from_bytes:!0,y_sufix:"B/s",derivative:!0,div_graph:$("#vm_net_tx_speed_graph")}],n=0;n<a.length;n++)c.plot(e,a[n])},error:l.onError})}var i=t("utils/locale"),r=t("sunstone-config"),o=t("sunstone"),l=(t("utils/humanize"),t("utils/notifier")),c=t("utils/graphs"),d=t("../utils/state-actions"),u=t("opennebula/vm"),p=t("tabs/secgroups-tab/utils/common"),h=(t("../tabId"),t("./network/panelId")),f=t("../dialogs/attach-nic/dialogId"),m="VM";
return e.PANEL_ID=h,e.prototype.html=a,e.prototype.setup=n,e.prototype.onShow=s,e}),define("tabs/vms-tab/panels/snapshots/panelId",["require"],function(){return"vm_snapshot_tab"}),define("tabs/vms-tab/panels/snapshots",["require","utils/locale","sunstone-config","sunstone","utils/humanize","utils/notifier","../tabId","./snapshots/panelId","../dialogs/snapshot/dialogId"],function(t){function e(t){return this.panelId=l,this.title=s.tr("Snapshots"),this.icon="fa-laptop",this.element=t[d],this}function a(){var t=this,e='<form id="snapshot_form" vmid="'+t.element.ID+'" >      <div class="row">      <div class="large-12 columns">         <table class="info_table dataTable extended_table">           <thead>             <tr>                <th>'+s.tr("ID")+"</th>                <th>"+s.tr("Name")+"</th>                <th>"+s.tr("Timestamp")+"</th>                <th>"+s.tr("Actions")+"</th>                <th>";i.isTabActionEnabled("vms-tab","VM.snapshot_create")&&(e+="3"==t.element.STATE&&"3"==t.element.LCM_STATE?'           <button id="take_snapshot" class="button tiny success right radius" >'+s.tr("Take snapshot")+"</button>":'           <button id="take_snapshot" class="button tiny success right radius" disabled="disabled">'+s.tr("Take snapshot")+"</button>"),e+="</th>              </tr>           </thead>           <tbody>";var a=[];if($.isArray(t.element.TEMPLATE.SNAPSHOT)?a=t.element.TEMPLATE.SNAPSHOT:$.isEmptyObject(t.element.TEMPLATE.SNAPSHOT)||(a=[t.element.TEMPLATE.SNAPSHOT]),a.length)for(var n=0;n<a.length;n++){var r=a[n];"3"==t.element.STATE&&"24"==t.element.LCM_STATE?actions="snapshot in progress":(actions="","3"==t.element.STATE&&"3"==t.element.LCM_STATE&&(i.isTabActionEnabled("vms-tab","VM.snapshot_revert")&&(actions+='<a href="VM.snapshot_revert" class="snapshot_revert" ><i class="fa fa-reply"/>'+s.tr("Revert")+"</a> &emsp;"),i.isTabActionEnabled("vms-tab","VM.snapshot_delete")&&(actions+='<a href="VM.snapshot_delete" class="snapshot_delete" ><i class="fa fa-times"/>'+s.tr("Delete")+"</a>"))),e+='              <tr snapshot_id="'+r.SNAPSHOT_ID+'">                <td>'+r.SNAPSHOT_ID+"</td>                <td>"+r.NAME+"</td>                <td>"+o.prettyTime(r.TIME)+"</td>                <td>"+actions+"</td>            </tr>"}else e+='          <tr id="no_snapshots_tr">            <td colspan="6">'+s.tr("No snapshots to show")+"</td>          </tr>";return e+="            </tbody>          </table>        </div>        </div>      </form>"}function n(t){var e=this;i.isTabActionEnabled("vms-tab","VM.snapshot_create")&&(t.off("click","#take_snapshot"),t.on("click","#take_snapshot",function(){var t=r.getDialog(c);return t.setElement(e.element),t.show(),!1})),i.isTabActionEnabled("vms-tab","VM.snapshot_revert")&&(t.off("click",".snapshot_revert"),t.on("click",".snapshot_revert",function(){var t=$(this).parents("tr").attr("snapshot_id");return r.runAction("VM.snapshot_revert",e.element.ID,{snapshot_id:t}),!1})),i.isTabActionEnabled("vms-tab","VM.snapshot_delete")&&(t.off("click",".snapshot_delete"),t.on("click",".snapshot_delete",function(){var t=$(this).parents("tr").attr("snapshot_id");return r.runAction("VM.snapshot_delete",e.element.ID,{snapshot_id:t}),!1}))}var s=t("utils/locale"),i=t("sunstone-config"),r=t("sunstone"),o=t("utils/humanize"),l=(t("utils/notifier"),t("../tabId"),t("./snapshots/panelId")),c=t("../dialogs/snapshot/dialogId"),d="VM";return e.PANEL_ID=l,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/vms-tab/panels/placement/panelId",["require"],function(){return"vm_placement_tab"}),define("tabs/vms-tab/panels/placement",["require","utils/locale","utils/humanize","opennebula/vm","../tabId","./placement/panelId"],function(t){function e(t){return this.panelId=o,this.title=s.tr("Placement"),this.icon="fa-sitemap",this.element=t[l],this}function a(){var t=this,e='<div class="row"><div class="large-12 columns">           <table id="vm_history_table" class="extended_table dataTable">                    <thead>                      <tr>                          <th>'+s.tr("#")+"</th>                          <th>"+s.tr("Host")+"</th>                          <th>"+s.tr("Datastore")+"</th>                          <th>"+s.tr("Action")+"</th>                          <th>"+s.tr("Reason")+"</th>                          <th>"+s.tr("Chg time")+"</th>                          <th>"+s.tr("Total time")+'</th>                          <th colspan="2">'+s.tr("Prolog time")+"</th>                      </tr>                    </thead>                    <tbody>",a=[];t.element.HISTORY_RECORDS.HISTORY?$.isArray(t.element.HISTORY_RECORDS.HISTORY)?a=t.element.HISTORY_RECORDS.HISTORY:t.element.HISTORY_RECORDS.HISTORY.SEQ&&(a=[t.element.HISTORY_RECORDS.HISTORY]):e+='     <tr>                <td colspan="8" style="width:5%">'+s.tr("No data available in table")+"</td>               </tr>";for(var n=Math.round((new Date).getTime()/1e3),o=0;o<a.length;o++){var l=parseInt(a[o].STIME,10),c=parseInt(a[o].ETIME,10);c=0==c?n:c;var d,u=c-l,p=parseInt(a[o].PSTIME,10),h=parseInt(a[o].PETIME,10);d=0==p?0:0==h?n:h;var f=d-p;e+='     <tr>                        <td style="width:5%">'+a[o].SEQ+'</td>                        <td style="width:15%">'+a[o].HOSTNAME+'</td>                        <td style="width:5%">'+a[o].DS_ID+'</td>                        <td style="width:16%">'+r.migrateActionStr(parseInt(a[o].ACTION,10))+'</td>                        <td style="width:10%">'+r.migrateReasonStr(parseInt(a[o].REASON,10))+'</td>                        <td style="width:16%">'+i.prettyTime(a[o].STIME)+'</td>                        <td style="width:16%">'+i.prettyDuration(u)+'</td>                        <td style="width:16%">'+i.prettyDuration(f)+"</td>                        <td></td>                       </tr>"}e+="</tbody>                 </table>           </div>         </div>",t.element.USER_TEMPLATE.SCHED_MESSAGE&&(e+='<div class="row">         <div class="large-12 columns">           <table id="vm_ds_placement_table" class="extended_table dataTable">                    <thead>                      <tr>                          <th align="center">'+s.tr("Sched Message")+"</th>                      </tr>                    </thead>                    <tbody>                       <tr>                        <td>"+t.element.USER_TEMPLATE.SCHED_MESSAGE+"</td>                      </tr>                    </tbody>           </table>           </div>         </div>");var m=t.element.USER_TEMPLATE.SCHED_REQUIREMENTS?t.element.USER_TEMPLATE.SCHED_REQUIREMENTS:"-",_=t.element.USER_TEMPLATE.SCHED_RANK?t.element.USER_TEMPLATE.SCHED_RANK:"-",b=t.element.USER_TEMPLATE.SCHED_DS_REQUIREMENTS?t.element.USER_TEMPLATE.SCHED_DS_REQUIREMENTS:"-",v=t.element.USER_TEMPLATE.SCHED_DS_RANK?t.element.USER_TEMPLATE.SCHED_DS_RANK:"-";return e+='<div class="row">       <div class="large-9 columns">           <table id="vm_placement_table" class="extended_table dataTable">                    <thead>                      <tr>                          <th colspan="2" align="center">'+s.tr("Placement - Host")+"</th>                      </tr>                    </thead>                    <tbody>                       <tr>                        <td>"+s.tr("Requirements")+"</td>                        <td>"+m+"</td>                      </tr>                       <tr>                        <td>"+s.tr("Rank")+"</td>                        <td>"+_+'</td>                      </tr>                    </tbody>           </table>           <table id="vm_ds_placement_table" class="extended_table dataTable">                    <thead>                      <tr>                          <th colspan="2" align="center">'+s.tr("Placement - Datastore")+"</th>                      </tr>                    </thead>                    <tbody>                       <tr>                        <td>"+s.tr("DS Requirements")+"</td>                        <td>"+b+"</td>                      </tr>                       <tr>                        <td>"+s.tr("DS Rank")+"</td>                        <td>"+v+"</td>                      </tr>                    </tbody>           </table>           </div>         </div>"}function n(){}var s=t("utils/locale"),i=t("utils/humanize"),r=t("opennebula/vm"),o=(t("../tabId"),t("./placement/panelId")),l="VM";return e.PANEL_ID=o,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/vms-tab/panels/actions/panelId",["require"],function(){return"vm_actions_tab"}),define("tabs/vms-tab/panels/actions",["require","utils/locale","sunstone","utils/humanize","utils/template-utils","../tabId","./actions/panelId"],function(t){function e(t){return this.panelId=d,this.title=r.tr("Actions"),this.icon="fa-calendar",this.element=t[u],this}function a(){var t=this,e='<div class="row">      <div class="large-12 columns">        <table id="scheduling_actions_table" class="info_table dataTable extended_table">         <thead>           <tr>              <th>'+r.tr("ID")+"</th>              <th>"+r.tr("ACTION")+"</th>              <th>"+r.tr("TIME")+"</th>              <th>"+r.tr("DONE")+"</th>              <th>"+r.tr("MESSAGE")+'</th>              <th colspan="">'+r.tr("Actions")+'</th>              <th><button id="add_scheduling_action" class="button tiny success right radius" >'+r.tr("Add action")+"</button></th>           </tr>          </thead>"+s(t.element.USER_TEMPLATE.SCHED_ACTION)+"</table>        </div>      </div>";return e}function n(t){var e=this;t.off("click","#add_scheduling_action"),t.on("click","#add_scheduling_action",function(){return $("#add_scheduling_action",t).attr("disabled","disabled"),$("#scheduling_actions_table").append('<tr>          <td></td>          <td class="columns">            <select id="select_new_action" class="select_new_action" name="select_action">              <option value="shutdown">'+r.tr("shutdown")+'</option>              <option value="shutdown-hard">'+r.tr("shutdown-hard")+'</option>              <option value="hold">'+r.tr("hold")+'</option>              <option value="release">'+r.tr("release")+'</option>              <option value="stop">'+r.tr("stop")+'</option>              <option value="suspend">'+r.tr("suspend")+'</option>              <option value="resume">'+r.tr("resume")+'</option>              <option value="delete">'+r.tr("delete")+'</option>              <option value="delete-recreate">'+r.tr("delete-recreate")+'</option>              <option value="reboot">'+r.tr("reboot")+'</option>              <option value="reboot-hard">'+r.tr("reboot-hard")+'</option>              <option value="poweroff">'+r.tr("poweroff")+'</option>              <option value="poweroff-hard">'+r.tr("poweroff-hard")+'</option>              <option value="undeploy">'+r.tr("undeploy")+'</option>              <option value="undeploy-hard">'+r.tr("undeploy-hard")+'</option>              <option value="snapshot-create">'+r.tr("snapshot-create")+'</option>            </select>          </td>         <td>            <input id="date_input" type="date" placeholder="2013/12/30"/>            <input id="time_input" type="time" placeholder="12:30"/>         </td>         <td>            <button id="submit_scheduling_action" class="button small secondary radius" >'+r.tr("Add")+"</button>         </td>         <td colspan=2></td>       </tr>"),!1}),t.off("click","#submit_scheduling_action"),t.on("click","#submit_scheduling_action",function(){var a=$("#date_input",t).val(),n=$("#time_input",t).val();if(""==a||""==n)return!1;var s=a+" "+n,i=-1;if(e.element.USER_TEMPLATE.SCHED_ACTION){if(!e.element.USER_TEMPLATE.SCHED_ACTION.length){var r=e.element.USER_TEMPLATE.SCHED_ACTION;e.element.USER_TEMPLATE.SCHED_ACTION=new Array,e.element.USER_TEMPLATE.SCHED_ACTION.push(r)}$.each(e.element.USER_TEMPLATE.SCHED_ACTION,function(t,e){i<e.ID&&(i=e.ID)})}else e.element.USER_TEMPLATE.SCHED_ACTION=new Array;var l={};l.ID=parseInt(i)+1,l.ACTION=$("#select_new_action",t).val();var d=new Date(s);l.TIME=parseInt(d.getTime())/1e3,e.element.USER_TEMPLATE.SCHED_ACTION.push(l);var u=c.templateToString(e.element.USER_TEMPLATE);return o.runAction("VM.update_template",e.element.ID,u),$("#add_scheduling_action",t).removeAttr("disabled"),!1}),t.off("click",".remove_action_x"),t.on("click",".remove_action_x",function(){var t=this.id.substring(6,this.id.length),a=new Array;$.each(e.element.USER_TEMPLATE.SCHED_ACTION,function(e,n){n.ID!=t&&(a[e]=n)}),e.element.USER_TEMPLATE.SCHED_ACTION=a;var n=c.templateToString(e.element.USER_TEMPLATE);o.runAction("VM.update_template",e.element.ID,n)})}function s(t){var e="",a='      <tr id="no_actions_tr">          <td colspan="6">'+r.tr("No actions to show")+"</td>      </tr>";if(!t)return a;if(!$.isArray(t)){var n=new Array;n[0]=t,t=n}return t.length?($.each(t,function(t,a){e+=i(a)}),e):a}function i(t){var e=t.DONE?l.prettyTime(t.DONE):"",a=t.MESSAGE?t.MESSAGE:"",n=l.prettyTime(t.TIME),s="";return s+='<tr class="tr_action_'+t.ID+'">       <td class="id_row">'+t.ID+'</td>       <td class="action_row">'+t.ACTION+'</td>       <td nowrap class="time_row">'+n+'</td>       <td class="done_row">'+e+'</td>       <td class="message_row">'+a+'</td>       <td>         <div>           <a id="minus_'+t.ID+'" class="remove_action_x" href="#"><i class="fa fa-trash-o"/></a>         </div>       </td>     </tr>'}var r=t("utils/locale"),o=t("sunstone"),l=t("utils/humanize"),c=t("utils/template-utils"),d=(t("../tabId"),t("./actions/panelId")),u="VM";return e.PANEL_ID=d,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/vms-tab/panels/template/panelId",["require"],function(){return"vm_template_tab"}),define("tabs/vms-tab/panels/template",["require","utils/locale","utils/humanize","../tabId","./template/panelId"],function(t){function e(t){return this.title=s.tr("Template"),this.icon="fa-file-o",this.element=t[o],this}function a(){return'<div class="row">      <div class="large-12 columns">        <table id="vm_template_table" class="info_table dataTable">'+i.prettyPrintJSON(this.element.TEMPLATE)+"</table>      </div>    </div>"}function n(){}var s=t("utils/locale"),i=t("utils/humanize"),r=(t("../tabId"),t("./template/panelId")),o="VM";return e.PANEL_ID=r,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/vms-tab/panels/log/panelId",["require"],function(){return"vm_log_tab"}),define("tabs/vms-tab/panels/log",["require","utils/locale","utils/notifier","opennebula/vm","../tabId","./log/panelId"],function(t){function e(t){return this.panelId=l,this.title=i.tr("Log"),this.icon="fa-file-text",this.element=t[c],this}function a(){return'<div class="row"><div class="large-12 columns vm_log_container"><div class="text-center" style="height: 100px;"><span id="provision_dashboard_total" style="font-size:80px"><i class="fa fa-spinner fa-spin"></i></span></div></div></div>'}function n(){}function s(t){var e=this;o.log({data:{id:e.element.ID},success:function(e,a){for(var n=a.vm_log.split("\n"),s="",i=0;i<n.length;i++){var r=n[i];r.match(/\[E\]/)&&(r='<span class="vm_log_error">'+r+"</span>"),s+=r+"<br>"}$(".vm_log_container",t).html('<div class="row"><div class="large-11 small-centered columns log-tab">'+s+"</div></div>")},error:function(e,a){$(".vm_log_container",t).html(""),r.onError(e,a)}})}var i=t("utils/locale"),r=t("utils/notifier"),o=t("opennebula/vm"),l=(t("../tabId"),t("./log/panelId")),c="VM";return e.PANEL_ID=l,e.prototype.html=a,e.prototype.setup=n,e.prototype.onShow=s,e}),define("utils/user-inputs",["require","utils/locale","utils/template-utils","tabs/vnets-tab/datatable"],function(t){function e(t,e,a){return n(t,e.VMTEMPLATE.TEMPLATE.USER_INPUTS,a)}function a(t,e,a){return n(t,e.DOCUMENT.TEMPLATE.BODY.custom_attrs,a)}function n(t,e,a){if(t.empty(),void 0==e)return!1;void 0==a&&(a={}),void 0==a.text_header&&(a.text_header=s.tr("Custom Attributes")),void 0==a.network_header&&(a.network_header=s.tr("Network"));var n=[],o=[];if($.each(e,function(t,e){var a=e.split("|"),s={name:t,mandatory:a[0],type:a[1],description:a[2]};switch(a[1]){case"vnet_id":n.push(s);break;case"text":o.push(s);break;case"password":o.push(s)}}),n.length>0){a.network_header.length>0&&t.append('<br><div class="row"><div class="large-12 large-centered columns"><h3 class="subheader">'+a.network_header+"</h3></div></div>"),t.append('<div class="instantiate_user_inputs"/>');var l,c="";$.each(n,function(e,a){var n="user_input_"+a.name.replace(/ /g,"_");l=new r(n,{select:!0}),$(".instantiate_user_inputs",t).append('<div class="row"><div class="large-12 large-centered columns">'+c+"<h5>"+i.htmlDecode(a.description)+"</h5>"+l.dataTableHTML+"</div></div>"),c="<hr/>",l.initialize(),$("#refresh_button_"+n).click(),$("input#selected_resource_id_"+n,t).attr("wizard_field",a.name),$("input#selected_resource_id_"+n,t).attr("required","")})}return o.length>0&&(a.text_header.length>0&&t.append('<br><div class="row"><div class="large-12 large-centered columns"><h3 class="subheader">'+a.text_header+"</h3></div></div>"),t.append('<div class="instantiate_user_inputs"/>'),$.each(o,function(e,a){$(".instantiate_user_inputs",t).append('<div class="row"><div class="large-12 large-centered columns"><label>'+i.htmlDecode(a.description)+'<input type="'+a.type+'" wizard_field="'+a.name+'" required/></label></div></div>')})),n.length>0||o.length>0}var s=t("utils/locale"),i=t("utils/template-utils"),r=t("tabs/vnets-tab/datatable");return{vmTemplateInsert:e,serviceTemplateInsert:a}}),define("tabs/templates-tab/tabId",["require"],function(){return"templates-tab"}),define("tabs/templates-tab/datatable",["require","utils/tab-datatable","sunstone-config","utils/locale","utils/humanize","./tabId"],function(t){function e(t,e){this.conf=e||{},this.tabId=c,this.dataTableId=t,this.resource=o,this.xmlRoot=l,this.dataTableOptions={bAutoWidth:!1,bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:["check"]},{sWidth:"35px",aTargets:[0]},{bVisible:!0,aTargets:s.tabTableColumns(c)},{bVisible:!1,aTargets:["_all"]}]},this.columns=[i.tr("ID"),i.tr("Owner"),i.tr("Group"),i.tr("Name"),i.tr("Registration time")],this.selectOptions={id_index:1,name_index:4,select_resource:i.tr("Please select a Template from the list"),you_selected:i.tr("You selected the following Template:"),select_resource_multiple:i.tr("Please select one or more Templates from the list"),you_selected_multiple:i.tr("You selected the following Templates:")},n.call(this)}function a(t){var e=t[l];return['<input class="check_item" type="checkbox" id="'+o.toLowerCase()+"_"+e.ID+'" name="selected_items" value="'+e.ID+'"/>',e.ID,e.UNAME,e.GNAME,e.NAME,r.prettyTime(e.REGTIME)]}var n=t("utils/tab-datatable"),s=t("sunstone-config"),i=t("utils/locale"),r=t("utils/humanize"),o="Template",l="VMTEMPLATE",c=t("./tabId");return e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.elementArray=a,e}),define("hbs!tabs/vms-tab/form-panels/create/wizard",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<form data-abide="ajax" id="'+l((i=null!=(i=e.formPanelId||(null!=t?t.formPanelId:t))?i:o,typeof i===r?i.call(t,{name:"formPanelId",hash:{},data:n}):i))+'Wizard" class="custom creation">\n  <fieldset>\n    <legend>'+l((e.tr||t&&t.tr||o).call(t,"Step 1: Specify a name and the number of instances",{name:"tr",hash:{},data:n}))+'</legend>\n    <div class="row">\n      <div class="large-5 columns">\n        <label for="create_vm_name">\n          '+l((e.tr||t&&t.tr||o).call(t,"VM Name",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+l((e.tr||t&&t.tr||o).call(t,"Defaults to template name when emtpy. You can use the wildcard &#37;i. When creating several VMs, &#37;i will be replaced with a different number starting from 0 in each of them",{name:"tr",hash:{},data:n}))+'.\n          </span>\n        </label>\n        <input type="text" name="create_vm_name" id="create_vm_name" />\n      </div>\n      <div class="large-4 columns">\n        <label for="create_vm_n_times">\n          '+l((e.tr||t&&t.tr||o).call(t,"Number of instances",{name:"tr",hash:{},data:n}))+':\n          <span class="tip">\n            '+l((e.tr||t&&t.tr||o).call(t,"Number of Virtual Machines that will be created using this template",{name:"tr",hash:{},data:n}))+'.\n          </span>\n        </label>\n        <input type="text" name="create_vm_n_times" id="create_vm_n_times" value="1"></div>\n      <div class="large-3 columns">\n        <input type="checkbox" name="create_vm_hold" id="create_vm_hold"/>\n        <label for="create_vm_hold">\n          '+l((e.tr||t&&t.tr||o).call(t,"Hold",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+l((e.tr||t&&t.tr||o).call(t,"Sets the new VM to hold state, instead of pending. The scheduler will not deploy VMs in this state. It can be released later, or deployed manually.",{name:"tr",hash:{},data:n}))+"\n          </span>\n        </label>\n      </div>\n    </div>\n  </fieldset>\n  <fieldset>\n    <legend>"+l((e.tr||t&&t.tr||o).call(t,"Step 2: Select a template",{name:"tr",hash:{},data:n}))+"</legend>\n    ";return i=null!=(i=e.templatesTableHTML||(null!=t?t.templatesTableHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"templatesTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+'\n  </fieldset>\n  <div id="create_vm_inputs_step">\n    <fieldset>\n      <legend>'+l((e.tr||t&&t.tr||o).call(t,"Step 3: Fill the required inputs",{name:"tr",hash:{},data:n}))+'</legend>\n      <div id="create_vm_user_inputs"></div>\n    </fieldset>\n  </div>\n</form>'},useData:!0});return e.registerPartial("tabs/vms-tab/form-panels/create/wizard",a),a}),define("tabs/vms-tab/form-panels/create",["require","foundation.tab","utils/form-panels/form-panel","sunstone","utils/locale","utils/tips","utils/notifier","utils/wizard-fields","utils/user-inputs","opennebula/template","tabs/templates-tab/datatable","hbs!./create/wizard","./create/formPanelId","../tabId"],function(t){function e(){this.formPanelId=_,this.tabId=b,this.actions={create:{title:l.tr("Create Virtual Machine"),buttonText:l.tr("Create"),resetButton:!0}},this.templatesTable=new f("vm_create",{select:!0}),r.call(this)}function a(){return m({formPanelId:this.formPanelId,templatesTableHTML:this.templatesTable.dataTableHTML})}function n(t){$("#create_vm_template_proceed",t).attr("disabled","disabled"),$("#create_vm_inputs_step",t).hide(),this.templatesTable.initialize(),$("#selected_resource_id_vm_create",t).on("change",function(){var e=$(this).val();$("#create_vm_inputs_step",t).hide(),$("#create_vm_user_inputs",t).empty(),h.show({data:{id:e},timeout:!0,success:function(e,a){$("#create_vm_inputs_step",t).hide(),$("#create_vm_user_inputs",t).empty();var n=p.vmTemplateInsert($("#create_vm_user_inputs",t),a,{text_header:""});n&&$("#create_vm_inputs_step",t).show(),$("#create_vm_template_proceed",t).removeAttr("disabled")},error:function(t,e,a){d.onError(t,e,a)}})}),c.setup(t)}function s(t){$("input#vm_name",t).focus(),this.templatesTable.resetResourceTableSelect()}function i(t){var e=$("#create_vm_name",t).val(),a=$("#selected_resource_id_vm_create",t).val(),n=$("#create_vm_n_times",t).val(),s=1,i=$("#create_vm_hold",t).prop("checked");if(!a.length)return d.notifyError(tr("You have not selected a template")),!1;n.length&&(s=parseInt(n,10));var r="";s>1&&(r=s+" times"),d.notifySubmit("Template.instantiate",a,r);var l={hold:i},c=u.retrieve(t);if(l.template=c,e.length)if(-1==e.indexOf("%i"))for(var p=0;s>p;p++)l.vm_name=e,o.runAction("Template.instantiate_quiet",a,l);else for(var p=0;s>p;p++)l.vm_name=e.replace(/%i/gi,p),o.runAction("Template.instantiate_quiet",a,l);else for(var p=0;s>p;p++)l.vm_name="",o.runAction("Template.instantiate_quiet",a,l);return setTimeout(function(){o.resetFormPanel(b,_),o.hideFormPanel(b),o.runAction("VM.list")},1500),!1}t("foundation.tab");var r=t("utils/form-panels/form-panel"),o=t("sunstone"),l=t("utils/locale"),c=t("utils/tips"),d=t("utils/notifier"),u=t("utils/wizard-fields"),p=t("utils/user-inputs"),h=t("opennebula/template"),f=t("tabs/templates-tab/datatable"),m=t("hbs!./create/wizard"),_=t("./create/formPanelId"),b=t("../tabId");return e.FORM_PANEL_ID=_,e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype.htmlWizard=a,e.prototype.setup=n,e.prototype.onShow=s,e.prototype.submitWizard=i,e}),define("tabs/vms-tab",["require","utils/locale","./vms-tab/buttons","./vms-tab/actions","./vms-tab/datatable","utils/vnc","./vms-tab/tabId","./vms-tab/dialogs/deploy","./vms-tab/dialogs/migrate","./vms-tab/dialogs/resize","./vms-tab/dialogs/attach-disk","./vms-tab/dialogs/attach-nic","./vms-tab/dialogs/snapshot","./vms-tab/dialogs/vnc","./vms-tab/dialogs/spice","./vms-tab/panels/info","./vms-tab/panels/capacity","./vms-tab/panels/storage","./vms-tab/panels/network","./vms-tab/panels/snapshots","./vms-tab/panels/placement","./vms-tab/panels/actions","./vms-tab/panels/template","./vms-tab/panels/log","./vms-tab/form-panels/create"],function(t){var e=t("utils/locale"),a=t("./vms-tab/buttons"),n=t("./vms-tab/actions"),s=t("./vms-tab/datatable");t("utils/vnc");var i=t("./vms-tab/tabId"),r="dataTableVms",o=[t("./vms-tab/dialogs/deploy"),t("./vms-tab/dialogs/migrate"),t("./vms-tab/dialogs/resize"),t("./vms-tab/dialogs/attach-disk"),t("./vms-tab/dialogs/attach-nic"),t("./vms-tab/dialogs/snapshot"),t("./vms-tab/dialogs/vnc"),t("./vms-tab/dialogs/spice")],l=[t("./vms-tab/panels/info"),t("./vms-tab/panels/capacity"),t("./vms-tab/panels/storage"),t("./vms-tab/panels/network"),t("./vms-tab/panels/snapshots"),t("./vms-tab/panels/placement"),t("./vms-tab/panels/actions"),t("./vms-tab/panels/template"),t("./vms-tab/panels/log")],c=[t("./vms-tab/form-panels/create")],d={tabId:i,title:e.tr("Virtual Machines"),tabClass:"subTab",parentTab:"vresources-tab",listHeader:'<i class="fa fa-fw fa-th"></i>&emsp;'+e.tr("Virtual Machines"),infoHeader:'<i class="fa fa-fw fa-th"></i>&emsp;'+e.tr("VM"),subheader:'<span class="total_vms"/> <small>'+e.tr("TOTAL")+'</small>&emsp;        <span class="active_vms"/> <small>'+e.tr("ACTIVE")+'</small>&emsp;        <span class="off_vms"/> <small>'+e.tr("OFF")+'</small>&emsp;        <span class="pending_vms"/> <small>'+e.tr("PENDING")+'</small>&emsp;        <span class="failed_vms"/> <small>'+e.tr("FAILED")+"</small>",resource:"VM",buttons:a,actions:n,dataTable:new s(r,{actions:!0,info:!0}),panels:l,formPanels:c,dialogs:o};return d}),define("tabs/templates-tab/buttons",["require","utils/locale"],function(t){var e=t("utils/locale"),a={"Template.refresh":{type:"action",layout:"refresh",alwaysActive:!0},"Template.create_dialog":{type:"create_dialog",layout:"create"},"Template.import_dialog":{type:"create_dialog",layout:"create",text:e.tr("Import"),icon:'<i class="fa fa-download">',alwaysActive:!0},"Template.update_dialog":{type:"action",layout:"main",text:e.tr("Update")},"Template.instantiate_vms":{type:"action",layout:"main",text:e.tr("Instantiate")},"Template.chown":{type:"confirm_with_select",text:e.tr("Change owner"),layout:"user_select",select:"User",tip:e.tr("Select the new owner")+":"},"Template.chgrp":{type:"confirm_with_select",text:e.tr("Change group"),layout:"user_select",select:"Group",tip:e.tr("Select the new group")+":"},"Template.clone_dialog":{type:"action",layout:"main",text:e.tr("Clone")},"Template.delete":{type:"confirm",layout:"del"}};return a}),define("tabs/templates-tab/form-panels/create/formPanelId",["require"],function(){return"createVMTemplateForm"}),define("tabs/templates-tab/dialogs/clone/dialogId",["require"],function(){return"cloneTemplateDialog"}),define("tabs/templates-tab/dialogs/instantiate/dialogId",["require"],function(){return"instantiateTemplateDialog"}),define("tabs/templates-tab/actions",["require","sunstone","utils/notifier","utils/locale","opennebula/template","utils/common-actions","opennebula/action","./tabId","./form-panels/create/formPanelId","./dialogs/clone/dialogId","./dialogs/instantiate/dialogId"],function(t){var e=t("sunstone"),a=t("utils/notifier"),n=t("utils/locale"),s=t("opennebula/template"),i=t("utils/common-actions"),r=t("opennebula/action"),o=t("./tabId"),l=t("./form-panels/create/formPanelId"),c=t("./dialogs/clone/dialogId"),d=t("./dialogs/instantiate/dialogId"),u="VMTEMPLATE",p="Template",h=new i(s,p,o),f={"Template.list":h.list(),"Template.show":h.show(),"Template.refresh":h.refresh(),"Template.delete":h["delete"](),"Template.create":{type:"create",call:s.create,callback:function(t,a){e.resetFormPanel(o,l),e.hideFormPanel(o),e.getDataTable(o).addElement(t,a)},error:function(t,n){e.hideFormPanelLoading(o),a.onError(t,n)},notify:!0},"Template.create_dialog":{type:"custom",call:function(){e.showFormPanel(o,l,"create")}},"Template.import_dialog":{type:"create",call:function(){}},"Template.update_dialog":{type:"custom",call:function(){var t=e.getDataTable(o).elements();if(1!=t.length)return a.notifyMessage("Please select one (and just one) Virtual Template to update."),!1;var n=""+t[0];e.runAction("Template.show_to_update",n)}},"Template.show_to_update":{type:"single",call:s.show,callback:function(t,a){e.showFormPanel(o,l,"update",function(t,e){t.fill(e,a[u])})},error:a.onError},"Template.update":{type:"single",call:s.update,callback:function(){e.hideFormPanel(o),a.notifyMessage(n.tr("Virtual Template updated correctly"))},error:function(t,n){e.hideFormPanelLoading(o),a.onError(t,n)}},"Template.rename":{type:"single",call:s.rename,callback:function(t){e.runAction("Template.show",t.request.data[0][0])},error:a.onError,notify:!0},"Template.instantiate":{type:"multiple",call:s.instantiate,callback:function(){r.clear_cache("VM")},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"Template.instantiate_quiet":{type:"single",call:s.instantiate,callback:function(){r.clear_cache("VM")},error:a.onError},"Template.instantiate_vms":{type:"custom",call:function(){e.getDialog(d).show()}},"Template.clone_dialog":{type:"custom",call:function(){e.getDialog(c).show()}},"Template.clone":{type:"single",call:s.clone,error:a.onError,notify:!0},"Template.chown":{type:"multiple",call:s.chown,callback:function(t){e.runAction("Template.show",t.request.data[0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"Template.chgrp":{type:"multiple",call:s.chgrp,callback:function(t){e.runAction("Template.show",t.request.data[0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"Template.chmod":{type:"single",call:s.chmod,callback:function(t){e.runAction("Template.show",t.request.data[0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0}};return f}),define("hbs!tabs/templates-tab/dialogs/clone/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<div id="'+o((s=null!=(s=e.dialogId||(null!=t?t.dialogId:t))?s:r,typeof s===i?s.call(t,{name:"dialogId",hash:{},data:n}):s))+'" class="reveal-modal" role="dialog" data-reveal >\n  <div class="row">\n    <h3 id="create_vnet_header" class="subheader">'+o((e.tr||t&&t.tr||r).call(t,"Clone Template",{name:"tr",hash:{},data:n}))+'</h3>\n  </div>\n  <form id="'+o((s=null!=(s=e.dialogId||(null!=t?t.dialogId:t))?s:r,typeof s===i?s.call(t,{name:"dialogId",hash:{},data:n}):s))+'Form" action="" class="custom creation">\n    <div class="row">\n      <div class="large-12 columns">\n        <div class="clone_one"></div>\n        <div class="clone_several">\n          '+o((e.tr||t&&t.tr||r).call(t,"Several templates are selected, please choose prefix to name the new copies",{name:"tr",hash:{},data:n}))+'\n          <br></div>\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-12 columns">\n        <label class="clone_one">'+o((e.tr||t&&t.tr||r).call(t,"Name",{name:"tr",hash:{},data:n}))+'</label>\n        <label class="clone_several">'+o((e.tr||t&&t.tr||r).call(t,"Prefix",{name:"tr",hash:{},data:n}))+'</label>\n        <input type="text" name="name"/>\n      </div>\n    </div>\n    <div class="form_buttons row">\n      <button class="button radius right" id="template_clone_button" value="Template.clone">'+o((e.tr||t&&t.tr||r).call(t,"Clone",{name:"tr",hash:{},data:n}))+'</button>\n    </div>\n    <a class="close-reveal-modal">&#215;</a>\n  </form>\n</div>'
},useData:!0});return e.registerPartial("tabs/templates-tab/dialogs/clone/html",a),a}),define("tabs/templates-tab/dialogs/clone",["require","utils/dialogs/dialog","hbs!./clone/html","sunstone","utils/notifier","opennebula/template","./clone/dialogId","tabs/templates-tab/tabId"],function(t){function e(){this.dialogId=d,i.call(this)}function a(){return r({dialogId:this.dialogId})}function n(t){return $("#"+d+"Form",t).submit(function(){var t,e=$('input[name="name"]',this).val(),a=o.getDataTable(u).elements();if(e&&a.length||l.notifyError("A name or prefix is needed!"),a.length>1)for(var n=0;n<a.length;n++)t=e+c.getName(a[n]),o.runAction("Template.clone",a[n],t);else t=e,o.runAction("Template.clone",a[0],t);return o.getDialog(d).hide(),o.getDialog(d).reset(),setTimeout(function(){o.runAction("Template.refresh")},1500),!1}),!1}function s(t){var e=o.getDataTable(u).elements();return e.length>1?($(".clone_one",t).hide(),$(".clone_several",t).show(),$('input[name="name"]',t).val("Copy of ")):($(".clone_one",t).show(),$(".clone_several",t).hide(),$('input[name="name"]',t).val("Copy of "+c.getName(e[0]))),$("input[name='name']",t).focus(),!1}var i=t("utils/dialogs/dialog"),r=t("hbs!./clone/html"),o=t("sunstone"),l=t("utils/notifier"),c=t("opennebula/template"),d=t("./clone/dialogId"),u=t("tabs/templates-tab/tabId");return e.DIALOG_ID=d,e.prototype=Object.create(i.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=s,e.prototype.setup=n,e}),define("hbs!tabs/templates-tab/dialogs/instantiate/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<div id="'+o((s=null!=(s=e.dialogId||(null!=t?t.dialogId:t))?s:r,typeof s===i?s.call(t,{name:"dialogId",hash:{},data:n}):s))+'" class="reveal-modal" role="dialog" data-reveal >\n  <div class="row">\n    <h3 id="create_vnet_header" class="subheader">'+o((e.tr||t&&t.tr||r).call(t,"Instantiate VM Template",{name:"tr",hash:{},data:n}))+'</h3>\n  </div>\n  <form data-abide="ajax" id="'+o((s=null!=(s=e.dialogId||(null!=t?t.dialogId:t))?s:r,typeof s===i?s.call(t,{name:"dialogId",hash:{},data:n}):s))+'Form" action="" class="custom creation">\n    <div class="row">\n      <div class="large-12 columns">\n        <label for="vm_name">\n          '+o((e.tr||t&&t.tr||r).call(t,"VM Name",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+o((e.tr||t&&t.tr||r).call(t,"Defaults to template name when emtpy. You can use the wildcard &#37;i. When creating several VMs, &#37;i will be replaced with a different number starting from 0 in each of them",{name:"tr",hash:{},data:n}))+'.\n          </span>\n        </label>\n        <input type="text" name="vm_name" id="vm_name" />\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-12 columns">\n        <label for="vm_n_times">\n          '+o((e.tr||t&&t.tr||r).call(t,"Number of instances",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+o((e.tr||t&&t.tr||r).call(t,"Number of Virtual Machines that will be created using this template",{name:"tr",hash:{},data:n}))+'.\n          </span>\n        </label>\n        <input type="text" name="vm_n_times" id="vm_n_times" value="1"></div>\n    </div>\n    <div class="row">\n      <div class="large-12 columns">\n        <input type="checkbox" name="hold" id="hold"/>\n        <label for="hold">\n          '+o((e.tr||t&&t.tr||r).call(t,"Hold",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+o((e.tr||t&&t.tr||r).call(t,"Sets the new VM to hold state, instead of pending. The scheduler will not deploy VMs in this state. It can be released later, or deployed manually.",{name:"tr",hash:{},data:n}))+'\n          </span>\n        </label>\n      </div>\n    </div>\n    <div id="instantiate_vm_user_inputs"> <i class="fa fa-spinner fa-spin"></i>\n    </div>\n    <div class="form_buttons">\n      <button class="button radius right success" id="instantiate_vm_template_proceed" value="Template.instantiate_vms">'+o((e.tr||t&&t.tr||r).call(t,"Instantiate",{name:"tr",hash:{},data:n}))+'</button>\n    </div>\n    <a class="close-reveal-modal">&#215;</a>\n  </form>\n</div>'},useData:!0});return e.registerPartial("tabs/templates-tab/dialogs/instantiate/html",a),a}),define("tabs/templates-tab/dialogs/instantiate",["require","utils/dialogs/dialog","hbs!./instantiate/html","sunstone","utils/notifier","opennebula/template","utils/locale","utils/tips","utils/user-inputs","utils/wizard-fields","./instantiate/dialogId","tabs/templates-tab/tabId"],function(t){function e(){this.dialogId=f,i.call(this)}function a(){return r({dialogId:this.dialogId})}function n(t){t.off("invalid.fndtn.abide","#"+f+"Form"),t.off("valid.fndtn.abide","#"+f+"Form"),t.on("invalid.fndtn.abide","#"+f+"Form",function(t){return"abide.fndtn"==t.namespace?(l.notifyError(d.tr("One or more required fields are missing or malformed.")),!1):void 0}).on("valid.fndtn.abide","#"+f+"Form",function(e){if("abide.fndtn"==e.namespace){var a=$("#vm_name",this).val(),n=$("#vm_n_times",this).val(),s=1,i=$("#hold",this).prop("checked"),r=o.getDataTable(m).elements();return $.each(r,function(e,r){n.length&&(s=parseInt(n,10));var c="";s>1&&(c=s+" times"),l.notifySubmit("Template.instantiate",r,c);var d={hold:i},u=h.retrieve($(".template_user_inputs"+r,t));if(d.template=u,a.length)if(-1==a.indexOf("%i")){d.vm_name=a;for(var p=0;s>p;p++)o.runAction("Template.instantiate_quiet",r,d)}else for(var p=0;s>p;p++)d.vm_name=a.replace(/%i/gi,p),o.runAction("Template.instantiate_quiet",r,d);else for(var p=0;s>p;p++)d.vm_name="",o.runAction("Template.instantiate_quiet",r,d)}),o.getDialog(f).hide(),o.getDialog(f).reset(),!1}})}function s(t){$("#instantiate_vm_template_proceed",t).attr("disabled","disabled");var e=o.getDataTable(m).elements();return $("#instantiate_vm_user_inputs",t).html('<br><div class="row"><div class="large-12 large-centered columns"><div class="subheader">'+d.tr("Templates to be instantiated")+'</div><ul class="disc list_of_templates"></ul></div></div>'),$.each(e,function(e,a){c.show({data:{id:a},timeout:!0,success:function(e,a){$(".list_of_templates",t).append("<li>"+a.VMTEMPLATE.NAME+"</li>");var n=$("<div class='template_user_inputs"+a.VMTEMPLATE.ID+"'></div>").appendTo($("#instantiate_vm_user_inputs",t));p.vmTemplateInsert(n,a,{text_header:a.VMTEMPLATE.NAME}),n.data("opennebula_id",a.VMTEMPLATE.ID)},error:function(e,a,n){l.onError(e,a,n),$("#instantiate_vm_user_inputs",t).empty()}})}),$("#instantiate_vm_template_proceed",t).removeAttr("disabled"),u.setup(t),!1}var i=t("utils/dialogs/dialog"),r=t("hbs!./instantiate/html"),o=t("sunstone"),l=t("utils/notifier"),c=t("opennebula/template"),d=t("utils/locale"),u=t("utils/tips"),p=t("utils/user-inputs"),h=t("utils/wizard-fields"),f=t("./instantiate/dialogId"),m=t("tabs/templates-tab/tabId");return e.DIALOG_ID=f,e.prototype=Object.create(i.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=s,e.prototype.setup=n,e}),define("hbs!tabs/templates-tab/panels/info/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,c="function",d='<div class="row">\n  <div class="large-6 columns">\n    <table class="dataTable extended_table">\n      <thead>\n        <tr>\n          <th colspan="3">'+o((e.tr||t&&t.tr||r).call(t,"Information",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"ID",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td" colspan="2">'+o(l(null!=(s=null!=t?t.element:t)?s.ID:s,t))+"</td>\n        </tr>\n        ";return i=null!=(i=e.renameTrHTML||(null!=t?t.renameTrHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"renameTrHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+='\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Register time",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o((i=null!=(i=e.prettyRegTime||(null!=t?t.prettyRegTime:t))?i:r,typeof i===c?i.call(t,{name:"prettyRegTime",hash:{},data:n}):i))+'</td>\n          <td></td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <div class="large-6 columns">',i=null!=(i=e.permissionsTableHTML||(null!=t?t.permissionsTableHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"permissionsTableHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+"</div>\n</div>"},useData:!0});return e.registerPartial("tabs/templates-tab/panels/info/html",a),a}),define("tabs/templates-tab/panels/info/panelId",["require"],function(){return"template_info_tab"}),define("tabs/templates-tab/panels/info",["require","utils/locale","utils/humanize","utils/panel/rename-tr","utils/panel/permissions-table","hbs!./info/html","../tabId","./info/panelId"],function(t){function e(t){return this.title=s.tr("Info"),this.icon="fa-info-circle",this.element=t[p],this}function a(){var t=r.html(u,this.element.NAME),e=o.html(c,u,this.element),a=i.prettyTime(this.element.REGTIME);return l({element:this.element,renameTrHTML:t,permissionsTableHTML:e,prettyRegTime:a})}function n(t){r.setup(u,this.element.ID,t),o.setup(c,u,this.element,t)}var s=t("utils/locale"),i=t("utils/humanize"),r=t("utils/panel/rename-tr"),o=t("utils/panel/permissions-table"),l=t("hbs!./info/html"),c=t("../tabId"),d=t("./info/panelId"),u="Template",p="VMTEMPLATE";return e.PANEL_ID=d,e.prototype.html=a,e.prototype.setup=n,e}),define("hbs!tabs/templates-tab/panels/template/html",["hbs","hbs/handlebars"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l='<div class="row">\n  <div class="large-12 columns">\n    <table  class="info_table dataTable" style="width:80%">';return i=null!=(i=e.prettyTemplateHTML||(null!=t?t.prettyTemplateHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"prettyTemplateHTML",hash:{},data:n}):i,null!=s&&(l+=s),l+"</table>\n  </div>\n</div>"},useData:!0});return e.registerPartial("tabs/templates-tab/panels/template/html",a),a}),define("tabs/templates-tab/panels/template/panelId",["require"],function(){return"template_template_tab"}),define("tabs/templates-tab/panels/template",["require","utils/locale","utils/humanize","hbs!./template/html","../tabId","./template/panelId"],function(t){function e(t){return this.title=s.tr("Template"),this.icon="fa-file-o",this.element=t[l],this}function a(){var t=i.prettyPrintJSON(this.element.TEMPLATE);return r({element:this.element,prettyTemplateHTML:t})}function n(){}var s=t("utils/locale"),i=t("utils/humanize"),r=t("hbs!./template/html"),o=(t("../tabId"),t("./template/panelId")),l="VMTEMPLATE";return e.PANEL_ID=o,e.prototype.html=a,e.prototype.setup=n,e}),define("hbs!tabs/templates-tab/form-panels/create/wizard",["hbs","hbs/handlebars"],function(t,e){var a=e.template({1:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return"      <dd class='"+o((s=null!=(s=e.classes||(null!=t?t.classes:t))?s:r,typeof s===i?s.call(t,{name:"classes",hash:{},data:n}):s))+"'>\n        <a href='#"+o((s=null!=(s=e.wizardTabId||(null!=t?t.wizardTabId:t))?s:r,typeof s===i?s.call(t,{name:"wizardTabId",hash:{},data:n}):s))+"'> <i class='fa "+o((s=null!=(s=e.icon||(null!=t?t.icon:t))?s:r,typeof s===i?s.call(t,{name:"icon",hash:{},data:n}):s))+"'></i>\n          <br>"+o((s=null!=(s=e.title||(null!=t?t.title:t))?s:r,typeof s===i?s.call(t,{name:"title",hash:{},data:n}):s))+"</a>\n      </dd>\n"},3:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='        <div id="'+l((i=null!=(i=e.wizardTabId||(null!=t?t.wizardTabId:t))?i:o,typeof i===r?i.call(t,{name:"wizardTabId",hash:{},data:n}):i))+'" class="wizard_tab content">\n          ';return i=null!=(i=e.contentHTML||(null!=t?t.contentHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"contentHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+"\n        </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<form data-abide="ajax" id="'+l((i=null!=(i=e.formPanelId||(null!=t?t.formPanelId:t))?i:o,typeof i===r?i.call(t,{name:"formPanelId",hash:{},data:n}):i))+'Wizard" class="custom creation">\n  <div class="bordered-tabs">\n    <dl id="template_create_tabs" class="tabs right-info-tabs text-center" data-tab>\n';return s=e.each.call(t,null!=t?t.wizardTabs:t,{name:"each",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+='    </dl>\n    <div id="template_create_tabs_content" class="tabs-content" style="min-height: 300px">\n',s=e.each.call(t,null!=t?t.wizardTabs:t,{name:"each",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+"    </div>\n  </div>\n</form>"},useData:!0});return e.registerPartial("tabs/templates-tab/form-panels/create/wizard",a),a}),define("hbs!tabs/templates-tab/form-panels/create/advanced",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<form data-abide="ajax" id="'+o((s=null!=(s=e.formPanelId||(null!=t?t.formPanelId:t))?s:r,typeof s===i?s.call(t,{name:"formPanelId",hash:{},data:n}):s))+'Advanced" class="custom creation">\n   <div class="row">\n     <div class="large-12 columns">\n       <p>'+o((e.tr||t&&t.tr||r).call(t,"Write the Virtual Machine template here",{name:"tr",hash:{},data:n}))+'</p>\n     </div>\n   </div>\n   <div class="row">\n     <div class="large-12 columns">\n       <textarea id="template" rows="15" required></textarea>\n     </div>\n   </div>\n </form>'},useData:!0});return e.registerPartial("tabs/templates-tab/form-panels/create/advanced",a),a}),define("hbs!tabs/templates-tab/form-panels/create/wizard-tabs/general/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({1:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'          <option value="'+o((s=null!=(s=e.path||(null!=t?t.path:t))?s:r,typeof s===i?s.call(t,{name:"path",hash:{},data:n}):s))+'">'+o((s=null!=(s=e.title||(null!=t?t.title:t))?s:r,typeof s===i?s.call(t,{name:"title",hash:{},data:n}):s))+"</option>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l="function",c='<div class="row">\n  <div id="template_name_form"  class="large-6 columns">\n    <label  for="NAME">\n      '+o((e.tr||t&&t.tr||r).call(t,"Name",{name:"tr",hash:{},data:n}))+'\n      <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Name that the VM will get for description purposes.",{name:"tr",hash:{},data:n}))+'</span>\n      <input type="text" wizard_field="NAME" id="NAME" name="name" required/>\n    </label>\n  </div>\n  <div  id="template_hypervisor_form" class="large-6 columns">\n    <label>'+o((e.tr||t&&t.tr||r).call(t,"Hypervisor",{name:"tr",hash:{},data:n}))+'</label>\n    <input type="radio" wizard_field="HYPERVISOR" name="hypervisor" value="kvm" id="kvmRadio">\n    <label for="kvmRadio">'+o((e.tr||t&&t.tr||r).call(t,"KVM",{name:"tr",hash:{},data:n}))+'</label>\n    <input type="radio" wizard_field="HYPERVISOR" name="hypervisor" value="vmware" id="vmwareRadio">\n    <label for="vmwareRadio">'+o((e.tr||t&&t.tr||r).call(t,"VMware",{name:"tr",hash:{},data:n}))+'</label>\n    <input type="radio" wizard_field="HYPERVISOR" name="hypervisor" value="xen" id="xenRadio">\n    <label for="xenRadio">'+o((e.tr||t&&t.tr||r).call(t,"Xen",{name:"tr",hash:{},data:n}))+'</label>\n    <input type="radio" wizard_field="HYPERVISOR" name="hypervisor" value="vcenter" id="vcenterRadio">\n    <label for="vcenterRadio">'+o((e.tr||t&&t.tr||r).call(t,"vCenter",{name:"tr",hash:{},data:n}))+'</label>\n  </div>\n</div>\n<div class="row">\n  <div class="large-6 columns">\n    <label  for="DESCRIPTION">\n      '+o((e.tr||t&&t.tr||r).call(t,"Description",{name:"tr",hash:{},data:n}))+'\n      <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Description of the template",{name:"tr",hash:{},data:n}))+'</span>\n    </label>\n    <textarea type="text" wizard_field="DESCRIPTION" id="DESCRIPTION" name="DESCRIPTION" style="height: 70px;"/>\n  </div>\n  <div class="large-6 columns">\n    <div class="row">\n      <div class="large-6 columns">\n        <label  for="LOGO">\n          '+o((e.tr||t&&t.tr||r).call(t,"Logo",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Logo for the template.",{name:"tr",hash:{},data:n}))+'</span>\n        </label>\n        <select wizard_field="LOGO" id="LOGO" name="LOGO">\n          <option value=""></option>\n';return s=e.each.call(t,null!=t?t.logos:t,{name:"each",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+='        </select>\n      </div>\n      <div id="template_create_logo" class="text-center large-6 columns" style="margin-bottom: 15px"></div>\n      <br></div>\n  </div>\n</div>\n<div class="row hypervisor only_vcenter" style="display: none;">\n  <div class="large-6 columns">\n    <label  for="vcenter_template_uuid">\n      '+o((e.tr||t&&t.tr||r).call(t,"vCenter Template UUID",{name:"tr",hash:{},data:n}))+'\n      <span class="tip"></span>\n    </label>\n    <input type="text" id="vcenter_template_uuid" name="name"/>\n  </div>\n</div>\n',i=null!=(i=e.capacityInputsHTML||(null!=t?t.capacityInputsHTML:t))?i:r,s=typeof i===l?i.call(t,{name:"capacityInputsHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+'\n<div class="row">\n  <div class="large-6 columns">\n    <input type="checkbox" id="sunstone_capacity_select" name="name"/>\n    <label  for="sunstone_capacity_select">\n      '+o((e.tr||t&&t.tr||r).call(t,"Do not allow to change capacity",{name:"tr",hash:{},data:n}))+'\n      <span class="tip">\n        '+o((e.tr||t&&t.tr||r).call(t,"Users using the cloud view will not be able to select a new capacity for this template",{name:"tr",hash:{},data:n}))+'\n      </span>\n    </label>\n  </div>\n</div>\n<div class="row">\n  <div class="large-6 columns">\n    <input type="checkbox" id="sunstone_network_select" name="name"/>\n    <label  for="sunstone_network_select">\n      '+o((e.tr||t&&t.tr||r).call(t,"Do not allow to modify network configuration",{name:"tr",hash:{},data:n}))+'\n      <span class="tip">\n        '+o((e.tr||t&&t.tr||r).call(t,"Users using the cloud view will not be able to remove or add new NICs",{name:"tr",hash:{},data:n}))+"\n      </span>\n    </label>\n  </div>\n</div>"},useData:!0});return e.registerPartial("tabs/templates-tab/form-panels/create/wizard-tabs/general/html",a),a}),define("tabs/templates-tab/form-panels/create/wizard-tabs/general/wizardTabId",["require"],function(){return"generalTab"}),define("tabs/templates-tab/form-panels/create/wizard-tabs/general",["require","utils/locale","utils/tips","./general/capacity-inputs","utils/wizard-fields","hbs!./general/html","./general/wizardTabId"],function(t){function e(){this.wizardTabId=p,this.icon="fa-laptop",this.title=o.tr("General")}function a(){return u({capacityInputsHTML:c.html(),logos:h})}function n(t,e){"create"==e.action?($("#template_name_form",t).show(),$("#template_hypervisor_form",t).removeClass("left"),$("#NAME",t).removeAttr("disabled"),$("#NAME",t).attr("required","")):"update"==e.action&&($("#template_name_form",t).hide(),$("#template_hypervisor_form",t).addClass("left"),$("#NAME",t).attr("disabled","disabled"),$("#NAME",t).removeAttr("required"))}function s(t){l.setup(t),t.on("change","#LOGO",function(){$("#template_create_logo",t).show(),$("#template_create_logo",t).html('<span  class=""><img src="'+$(this).val()+'"></span>')}),t.on("change","input[name='hypervisor']",function(){$(".hypervisor").hide(),$(".only_"+this.value).show()}),c.setup(t)}function i(t){var e=d.retrieve(t);return"vcenter"==e.HYPERVISOR&&(e.PUBLIC_CLOUD={TYPE:"vcenter",VM_TEMPLATE:$("#vcenter_template_uuid",t).val()}),$("#sunstone_capacity_select:checked",t).length>0&&(e.SUNSTONE_CAPACITY_SELECT="NO"),$("#sunstone_network_select:checked",t).length>0&&(e.SUNSTONE_NETWORK_SELECT="NO"),e}function r(t,e){e.SUNSTONE_CAPACITY_SELECT&&"NO"==e.SUNSTONE_CAPACITY_SELECT.toUpperCase()&&($("#sunstone_capacity_select",t).attr("checked","checked"),delete e.SUNSTONE_CAPACITY_SELECT),e.SUNSTONE_NETWORK_SELECT&&"NO"==e.SUNSTONE_NETWORK_SELECT.toUpperCase()&&($("#sunstone_network_select",t).attr("checked","checked"),delete e.SUNSTONE_NETWORK_SELECT),e.HYPERVISOR&&($("input[name='hypervisor'][value='"+e.HYPERVISOR+"']",t).trigger("click"),delete e.HYPERVISOR),d.fill(t,e)}var o=t("utils/locale"),l=t("utils/tips"),c=t("./general/capacity-inputs"),d=t("utils/wizard-fields"),u=t("hbs!./general/html"),p=t("./general/wizardTabId"),h=[{path:"images/logos/arch.png",title:o.tr("Arch Linux")},{path:"images/logos/centos.png",title:o.tr("CentOS")},{path:"images/logos/debian.png",title:o.tr("Debian")},{path:"images/logos/fedora.png",title:o.tr("Fedora")},{path:"images/logos/linux.png",title:o.tr("Linux")},{path:"images/logos/redhat.png",title:o.tr("Redhat")},{path:"images/logos/ubuntu.png",title:o.tr("Ubuntu")},{path:"images/logos/windowsxp.png",title:o.tr("Windows XP/2003")},{path:"images/logos/windows8.png",title:o.tr("Windows 8")}];return e.prototype.constructor=e,e.prototype.html=a,e.prototype.setup=s,e.prototype.onShow=n,e.prototype.retrieve=i,e.prototype.fill=r,e}),define("hbs!tabs/templates-tab/form-panels/create/wizard-tabs/storage/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<dl class="tabs vertical" id="'+o((s=null!=(s=e.linksContainerId||(null!=t?t.linksContainerId:t))?s:r,typeof s===i?s.call(t,{name:"linksContainerId",hash:{},data:n}):s))+'" data-tab>\n  <dt class="text-center">\n    <button href="#" class="button tiny radius" id="tf_btn_disks">\n      <span class="fa fa-plus"></span>\n      '+o((e.tr||t&&t.tr||r).call(t,"Add another disk",{name:"tr",hash:{},data:n}))+'\n    </button>\n  </dt>\n</dl>\n<div class="tabs-content vertical" id="'+o((s=null!=(s=e.contentsContainerId||(null!=t?t.contentsContainerId:t))?s:r,typeof s===i?s.call(t,{name:"contentsContainerId",hash:{},data:n}):s))+'"></div>'},useData:!0});return e.registerPartial("tabs/templates-tab/form-panels/create/wizard-tabs/storage/html",a),a}),define("tabs/templates-tab/form-panels/create/wizard-tabs/storage/wizardTabId",["require"],function(){return"storageTab"}),define("tabs/templates-tab/form-panels/create/wizard-tabs/storage",["require","foundation.tab","sunstone-config","utils/locale","utils/tips","utils/wizard-fields","./storage/disk-tab","hbs!./storage/html","./storage/wizardTabId"],function(t){function e(){if(!c.isTemplateCreationTabEnabled("storage"))throw"Wizard Tab not enabled";this.wizardTabId=f,this.icon="fa-tasks",this.title=d.tr("Storage"),this.classes="hypervisor only_kvm only_vmware only_xen"}function a(){return h({linksContainerId:m,contentsContainerId:_})}function n(){}function s(t){var e=this;e.numberOfDisks=0,e.diskTabObjects={},u.setup(t),t.foundation("reflow","tab"),t.on("click","i.remove-tab",function(){var a=$(this).parent().attr("href"),n=$(this).closest("dd"),s=$(this).closest("dl"),i=$(a);n.remove(),i.remove();var r=i.attr("diskId");delete e.diskTabObjects[r],"active"==n.attr("class")&&$("a",s.children("dd").last()).click(),e.renameTabLinks(t)}),t.on("click","#tf_btn_disks",function(){return e.addDiskTab(t),!1}),e.addDiskTab(t)}function i(t){var e,a={},n=[];return $.each(this.diskTabObjects,function(a,s){e=s.retrieve($("#"+s.diskTabId,t)),$.isEmptyObject(e)||n.push(e)}),$.isEmptyObject(n)||(a.DISK=n),a}function r(t,e){var a=this,n=e.DISK;if(n instanceof Array)$.each(n,function(e,n){e>0&&a.addDiskTab(t);var s=a.diskTabObjects[a.numberOfDisks],i=$("#"+s.diskTabId,t);s.fill(i,n)});else if(n instanceof Object){var s=a.diskTabObjects[a.numberOfDisks],i=$("#"+s.diskTabId,t);s.fill(i,n)}}function o(t){this.numberOfDisks++;var e=new p(this.numberOfDisks),a=$('<div id="'+e.diskTabId+'" class="active disk wizard_internal_tab content">'+e.html()+"</div>").appendTo($("#"+_,t)),n=$("<dd class='active'><a href='#"+e.diskTabId+"'>"+d.tr("DISK")+"</a></dd>").appendTo($("#"+m,t));$("a",n).trigger("click"),e.setup(a),a.attr("diskId",this.numberOfDisks),this.renameTabLinks(t),this.diskTabObjects[this.numberOfDisks]=e}function l(t){$("#"+m+" dd",t).each(function(t){$("a",this).html(d.tr("Disk")+" "+t+" <i class='fa fa-times-circle remove-tab'></i>")})}t("foundation.tab");var c=t("sunstone-config"),d=t("utils/locale"),u=t("utils/tips"),p=(t("utils/wizard-fields"),t("./storage/disk-tab")),h=t("hbs!./storage/html"),f=t("./storage/wizardTabId"),m="template_create_storage_tabs",_="template_create_storage_tabs_content";return e.prototype.constructor=e,e.prototype.html=a,e.prototype.setup=s,e.prototype.onShow=n,e.prototype.retrieve=i,e.prototype.fill=r,e.prototype.renameTabLinks=l,e.prototype.addDiskTab=o,e}),define("hbs!tabs/templates-tab/form-panels/create/wizard-tabs/network/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<dl class="tabs vertical" id="'+o((s=null!=(s=e.linksContainerId||(null!=t?t.linksContainerId:t))?s:r,typeof s===i?s.call(t,{name:"linksContainerId",hash:{},data:n}):s))+'" data-tab>\n  <dt class="text-center">\n    <button href="#" class="button tiny radius" id="tf_btn_nics">\n      <span class="fa fa-plus"></span>\n      '+o((e.tr||t&&t.tr||r).call(t,"Add another interface",{name:"tr",hash:{},data:n}))+'\n    </button>\n  </dt>\n</dl>\n<div class="tabs-content vertical" id="'+o((s=null!=(s=e.contentsContainerId||(null!=t?t.contentsContainerId:t))?s:r,typeof s===i?s.call(t,{name:"contentsContainerId",hash:{},data:n}):s))+'"></div>\n<div class="row">\n  <div class="large-6 columns">\n    <label for="DEFAULT_MODEL">\n      '+o((e.tr||t&&t.tr||r).call(t,"Default model",{name:"tr",hash:{},data:n}))+'\n      <span class="tip">\n        '+o((e.tr||t&&t.tr||r).call(t,"Default value for all NICs. Hardware that will emulate the network interface. With Xen this is the type attribute of the vif.",{name:"tr",hash:{},data:n}))+'\n      </span>\n    </label>\n    <input type="text" id="DEFAULT_MODEL" name="DEFAULT_MODEL"/>\n  </div>\n</div>'},useData:!0});return e.registerPartial("tabs/templates-tab/form-panels/create/wizard-tabs/network/html",a),a}),define("tabs/templates-tab/form-panels/create/wizard-tabs/network/wizardTabId",["require"],function(){return"networkTab"}),define("tabs/templates-tab/form-panels/create/wizard-tabs/network",["require","foundation.tab","sunstone-config","utils/locale","utils/tips","utils/wizard-fields","./network/nic-tab","hbs!./network/html","./network/wizardTabId"],function(t){function e(){if(!c.isTemplateCreationTabEnabled("network"))throw"Wizard Tab not enabled";this.wizardTabId=f,this.icon="fa-globe",this.title=d.tr("Network"),this.classes="hypervisor only_kvm only_vmware only_xen only_vcenter"}function a(){return h({linksContainerId:m,contentsContainerId:_})}function n(){}function s(t){var e=this;e.numberOfNics=0,e.nicTabObjects={},u.setup(t),t.foundation("reflow","tab"),t.on("click","i.remove-tab",function(){var a=$(this).parent().attr("href"),n=$(this).closest("dd"),s=$(this).closest("dl"),i=$(a);n.remove(),i.remove();var r=i.attr("nicId");delete e.nicTabObjects[r],"active"==n.attr("class")&&$("a",s.children("dd").last()).click(),e.renameTabLinks(t)}),t.on("click","#tf_btn_nics",function(){return e.addNicTab(t),!1}),e.addNicTab(t)}function i(t){var e,a={},n=[];$.each(this.nicTabObjects,function(a,s){e=s.retrieve($("#"+s.nicTabId,t)),$.isEmptyObject(e)||n.push(e)}),$.isEmptyObject(n)||(a.NIC=n);var s=$("#DEFAULT_MODEL",t).val();return s&&(a.NIC_DEFAULT={MODEL:s}),a}function r(t,e){var a=this,n=e.NIC;if(n instanceof Array)$.each(n,function(e,n){e>0&&a.addNicTab(t);var s=a.nicTabObjects[a.numberOfNics],i=$("#"+s.nicTabId,t);s.fill(i,n)});else if(n instanceof Object){var s=a.nicTabObjects[a.numberOfNics],i=$("#"+s.nicTabId,t);s.fill(i,n)}var r=e.NIC_DEFAULT;void 0!=r&&(r.MODEL&&$("#DEFAULT_MODEL",t).val(r.MODEL),delete template.NIC_DEFAULT)}function o(t){this.numberOfNics++;var e=new p(this.numberOfNics),a=$('<div id="'+e.nicTabId+'" class="active nic wizard_internal_tab content">'+e.html()+"</div>").appendTo($("#"+_,t)),n=$("<dd class='active'><a href='#"+e.nicTabId+"'>"+d.tr("NIC")+"</a></dd>").appendTo($("#"+m,t));$("a",n).trigger("click"),e.setup(a),a.attr("nicId",this.numberOfNics),this.renameTabLinks(t),this.nicTabObjects[this.numberOfNics]=e}function l(t){$("#"+m+" dd",t).each(function(t){$("a",this).html(d.tr("NIC")+" "+t+" <i class='fa fa-times-circle remove-tab'></i>")})}t("foundation.tab");var c=t("sunstone-config"),d=t("utils/locale"),u=t("utils/tips"),p=(t("utils/wizard-fields"),t("./network/nic-tab")),h=t("hbs!./network/html"),f=t("./network/wizardTabId"),m="template_create_network_tabs",_="template_create_network_tabs_content";return e.prototype.constructor=e,e.prototype.html=a,e.prototype.setup=s,e.prototype.onShow=n,e.prototype.retrieve=i,e.prototype.fill=r,e.prototype.renameTabLinks=l,e.prototype.addNicTab=o,e}),define("tabs/files-tab/tabId",["require"],function(){return"files-tab"}),define("tabs/files-tab/datatable",["require","utils/tab-datatable","sunstone-config","utils/locale","utils/humanize","utils/notifier","opennebula/image","./tabId"],function(t){function e(t,e){this.conf=e||{},this.tabId=d,this.dataTableId=t,this.resource=l,this.xmlRoot=c,this.dataTableOptions={bAutoWidth:!1,bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:["check"]},{sWidth:"35px",aTargets:[0]},{bVisible:!0,aTargets:s.tabTableColumns(d)},{bVisible:!1,aTargets:["_all"]}]},this.columns=[i.tr("ID"),i.tr("Owner"),i.tr("Group"),i.tr("Name"),i.tr("Datastore"),i.tr("Size"),i.tr("Type"),i.tr("Registration time"),i.tr("Persistent"),i.tr("Status"),i.tr("#VMS"),i.tr("Target")],this.selectOptions={id_index:1,name_index:4,uname_index:2,select_resource:i.tr("Please select an file from the list"),you_selected:i.tr("You selected the following file:"),select_resource_multiple:i.tr("Please select one or more files from the list"),you_selected_multiple:i.tr("You selected the following files:")},n.call(this)}function a(t){var e=t.IMAGE;return"0"==e.TYPE||"1"==e.TYPE||"2"==e.TYPE?!1:['<input class="check_item" type="checkbox" id="'+l.toLowerCase()+"_"+e.ID+'" name="selected_items" value="'+e.ID+'"/>',e.ID,e.UNAME,e.GNAME,e.NAME,e.DATASTORE,e.SIZE,o.typeStr(e.TYPE),r.prettyTime(e.REGTIME),parseInt(e.PERSISTENT)?"yes":"no",o.stateStr(e.STATE),e.RUNNING_VMS,e.TEMPLATE.TARGET?e.TEMPLATE.TARGET:"--"]}var n=t("utils/tab-datatable"),s=t("sunstone-config"),i=t("utils/locale"),r=t("utils/humanize"),o=(t("utils/notifier"),t("opennebula/image")),l="File",c="IMAGE",d=t("./tabId"),u={DATASTORE:5,TYPE:7};return e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.elementArray=a,e.COLUMN_IDS=u,e}),define("hbs!tabs/templates-tab/form-panels/create/wizard-tabs/os/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({1:function(t){var e=this.lambda,a=this.escapeExpression;return'            <option value="'+a(e(t,t))+'">'+a(e(t,t))+"</option>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l="function",c='<div id="tabs-bootos">\n  <dl class="tabs vertical" data-tab>\n    <dd class="active">\n      <a href="#bootTab">'+o((e.tr||t&&t.tr||r).call(t,"Boot",{name:"tr",hash:{},data:n}))+'</a>\n    </dd>\n    <dd>\n      <a href="#kernelTab">'+o((e.tr||t&&t.tr||r).call(t,"Kernel",{name:"tr",hash:{},data:n}))+'</a>\n    </dd>\n    <dd>\n      <a href="#ramdiskTab">'+o((e.tr||t&&t.tr||r).call(t,"Ramdisk",{name:"tr",hash:{},data:n}))+'</a>\n    </dd>\n    <dd>\n      <a href="#featuresTab">'+o((e.tr||t&&t.tr||r).call(t,"Features",{name:"tr",hash:{},data:n}))+'</a>\n    </dd>\n  </dl>\n  <div class="tabs-content vertical">\n    <div class="wizard_internal_tab active content" id="bootTab">\n      <div class="row">\n        <div class="large-4 columns">\n          <label for="ARCH">\n            '+o((e.tr||t&&t.tr||r).call(t,"Arch",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"CPU architecture to virtualization",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <select wizard_field="ARCH" id="ARCH" name="arch">\n            <option id="no_arch" name="no_arch" value=""></option>\n            <option value="i686">i686</option>\n            <option value="x86_64">x86_64</option>\n          </select>\n        </div>\n        <div class="large-8 columns hypervisor only_kvm">\n          <label for="MACHINE">\n            '+o((e.tr||t&&t.tr||r).call(t,"Machine type",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"libvirt machine type, only for KVM",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <input type="text" wizard_field="MACHINE" id="MACHINE" name="machine" />\n        </div>\n      </div>\n      <div class="row">\n        <div class="large-4 columns">\n          <label for="ROOT">\n            '+o((e.tr||t&&t.tr||r).call(t,"Root",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Device to be mounted as root",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <input type="text" wizard_field="ROOT" id="ROOT" name="root"/>\n        </div>\n        <div class="large-8 columns hypervisor only_vmware">\n          <label for="GUESTOS">\n            '+o((e.tr||t&&t.tr||r).call(t,"Guest OS",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Set the OS of the VM, only for VMware",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <select wizard_field="GUESTOS" id="GUESTOS" name="GUESTOS">\n            <option id="no_guestos" name="no_guestos" value=""></option>\n';
return s=e.each.call(t,null!=t?t.guestOS:t,{name:"each",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+='          </select>\n        </div>\n      </div>\n      <br>\n      <div class="row">\n        <div class="large-4 columns">\n          <label for="BOOT_0">\n            '+o((e.tr||t&&t.tr||r).call(t,"1st Boot",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"1st Boot device type",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <select id="BOOT_0" name="boot">\n            <option id="no_boot" name="no_boot" value=""></option>\n            <option value="hd">'+o((e.tr||t&&t.tr||r).call(t,"HD",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="fd">'+o((e.tr||t&&t.tr||r).call(t,"FD",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="cdrom">'+o((e.tr||t&&t.tr||r).call(t,"CDROM",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="network">'+o((e.tr||t&&t.tr||r).call(t,"NETWORK",{name:"tr",hash:{},data:n}))+'</option>\n          </select>\n        </div>\n        <div class="large-4 columns">\n          <label for="BOOT_1">\n            '+o((e.tr||t&&t.tr||r).call(t,"2nd Boot",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"2nd Boot device type",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <select id="BOOT_1" name="boot">\n            <option id="no_boot" name="no_boot" value=""></option>\n            <option value="hd">'+o((e.tr||t&&t.tr||r).call(t,"HD",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="fd">'+o((e.tr||t&&t.tr||r).call(t,"FD",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="cdrom">'+o((e.tr||t&&t.tr||r).call(t,"CDROM",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="network">'+o((e.tr||t&&t.tr||r).call(t,"NETWORK",{name:"tr",hash:{},data:n}))+'</option>\n          </select>\n        </div>\n        <div class="large-4 columns">\n          <label for="BOOT_2">\n            '+o((e.tr||t&&t.tr||r).call(t,"3rd Boot",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"3rd Boot device type",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <select id="BOOT_2" name="boot">\n            <option id="no_boot" name="no_boot" value=""></option>\n            <option value="hd">'+o((e.tr||t&&t.tr||r).call(t,"HD",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="fd">'+o((e.tr||t&&t.tr||r).call(t,"FD",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="cdrom">'+o((e.tr||t&&t.tr||r).call(t,"CDROM",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="network">'+o((e.tr||t&&t.tr||r).call(t,"NETWORK",{name:"tr",hash:{},data:n}))+'</option>\n          </select>\n        </div>\n      </div>\n      <div class="row">\n        <div class="large-12 columns">\n          <label for="KERNEL_CMD">\n            '+o((e.tr||t&&t.tr||r).call(t,"Kernel cmd",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Arguments for the booting kernel",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <input type="text" wizard_field="KERNEL_CMD" id="KERNEL_CMD" name="kernel_cmd" />\n        </div>\n      </div>\n      <div class="row">\n        <div class="large-12 columns">\n          <label for="BOOTLOADER">\n            '+o((e.tr||t&&t.tr||r).call(t,"Bootloader",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Path to the bootloader executable",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <input type="text" wizard_field="BOOTLOADER" id="BOOTLOADER" name="bootloader" />\n        </div>\n      </div>\n    </div>\n    <div id="kernelTab" class="wizard_internal_tab content">\n      <div class="row">\n        <div class="large-12 columns text-center">\n          <input id="radioKernelDs" type="radio" name="kernel_type" value="kernel_ds" checked/>\n          <label for="radioKernelDs">'+o((e.tr||t&&t.tr||r).call(t,"Registered Image",{name:"tr",hash:{},data:n}))+'</label>\n          <input id="radioKernelPath" type="radio" name="kernel_type" value="kernel_path"/>\n          <label for="radioKernelPath">'+o((e.tr||t&&t.tr||r).call(t,"Remote PATH",{name:"tr",hash:{},data:n}))+'</label>\n        </div>\n      </div>\n      <br>\n      <div class="kernel_ds">\n        ',i=null!=(i=e.kernelFilesTableHTML||(null!=t?t.kernelFilesTableHTML:t))?i:r,s=typeof i===l?i.call(t,{name:"kernelFilesTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+='\n        <div id="kernel_ds_inputs" class="row">\n          <div class="large-12 columns">\n            <label for="KERNEL_DS">'+o((e.tr||t&&t.tr||r).call(t,"KERNEL_DS",{name:"tr",hash:{},data:n}))+'</label>\n            <input type="text" wizard_field="KERNEL_DS" id="KERNEL_DS" name="KERNEL_DS"/>\n          </div>\n        </div>\n      </div>\n      <div id="kernel_path_inputs" class="kernel_path hidden row">\n        <div class="large-12 columns">\n          <label for="KERNEL">\n            '+o((e.tr||t&&t.tr||r).call(t,"PATH",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Path to the OS kernel to boot the image",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <input type="text" wizard_field="KERNEL" id="KERNEL" name="kernel" />\n        </div>\n      </div>\n    </div>\n    <div id="ramdiskTab" class="wizard_internal_tab content">\n      <div class="row">\n        <div class="large-12 columns text-center">\n          <input id="radioInintrdDs" type="radio" name="initrd_type" value="initrd_ds" checked>\n          <label for="radioInintrdDs">'+o((e.tr||t&&t.tr||r).call(t,"Registered Image ",{name:"tr",hash:{},data:n}))+'</label>\n          <input id="radioInitrdPath" type="radio" name="initrd_type" value="initrd_path">\n          <label for="radioInitrdPath">'+o((e.tr||t&&t.tr||r).call(t,"Remote PATH",{name:"tr",hash:{},data:n}))+'</label>\n        </div>\n      </div>\n      <br>\n      <div class="initrd_ds">\n        ',i=null!=(i=e.initrdFilesTableHTML||(null!=t?t.initrdFilesTableHTML:t))?i:r,s=typeof i===l?i.call(t,{name:"initrdFilesTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+'\n        <div class="row">\n          <div class="large-12 columns">\n            <label for="INITRD_DS">'+o((e.tr||t&&t.tr||r).call(t,"INITRD_DS",{name:"tr",hash:{},data:n}))+'</label>\n            <input type="text" wizard_field="INITRD_DS" id="INITRD_DS" name="initrd_id"/>\n          </div>\n        </div>\n      </div>\n      <div id="initrd_path_inputs" class="initrd_path hidden">\n        <div class="row">\n          <div class="large-12 columns">\n            <label for="INITRD">\n              '+o((e.tr||t&&t.tr||r).call(t,"PATH",{name:"tr",hash:{},data:n}))+'\n              <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Path to the initrd image",{name:"tr",hash:{},data:n}))+'</span>\n            </label>\n            <input type="text" wizard_field="INITRD" id="INITRD" name="initrd"/>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class="wizard_internal_tab content" id="featuresTab">\n      <div class="row">\n        <div class="large-6 columns">\n          <label for="ACPI">\n            '+o((e.tr||t&&t.tr||r).call(t,"ACPI",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">\n              '+o((e.tr||t&&t.tr||r).call(t,"Add support in the VM for Advanced Configuration and Power Interface (ACPI)",{name:"tr",hash:{},data:n}))+'\n            </span>\n          </label>\n          <select wizard_field="ACPI" id="ACPI" name="acpi">\n            <option id="no_apci" name="no_apci" value=""></option>\n            <option value="yes">'+o((e.tr||t&&t.tr||r).call(t,"Yes",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="no">'+o((e.tr||t&&t.tr||r).call(t,"No",{name:"tr",hash:{},data:n}))+'</option>\n          </select>\n        </div>\n        <div class="large-6 columns">\n          <label for="PAE">\n            '+o((e.tr||t&&t.tr||r).call(t,"PAE",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">\n              '+o((e.tr||t&&t.tr||r).call(t,"Add support in the VM for Physical Address Extension (PAE)",{name:"tr",hash:{},data:n}))+'\n            </span>\n          </label>\n          <select wizard_field="PAE" id="PAE" name="pae">\n            <option id="no_pae" name="no_pae" value=""></option>\n            <option value="yes">'+o((e.tr||t&&t.tr||r).call(t,"Yes",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="no">'+o((e.tr||t&&t.tr||r).call(t,"No",{name:"tr",hash:{},data:n}))+'</option>\n          </select>\n        </div>\n      </div>\n      <div class="row">\n        <div class="large-6 columns">\n          <label for="APIC">\n            '+o((e.tr||t&&t.tr||r).call(t,"APIC",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Enables the advanced programmable IRQ management.",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <select wizard_field="APIC" id="APIC" name="apic">\n            <option id="no_apic" name="no_apic" value=""></option>\n            <option value="yes">'+o((e.tr||t&&t.tr||r).call(t,"Yes",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="no">'+o((e.tr||t&&t.tr||r).call(t,"No",{name:"tr",hash:{},data:n}))+'</option>\n          </select>\n        </div>\n        <div class="large-6 columns">\n          <label for="HYPERV">\n            '+o((e.tr||t&&t.tr||r).call(t,"HYPERV",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Add support in the VM for hyper-v features (HYPERV)",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <select wizard_field="HYPERV" id="HYPERV" name="hyperv">\n            <option id="no_hyperv" name="no_hyperv" value=""></option>\n            <option value="yes">'+o((e.tr||t&&t.tr||r).call(t,"Yes",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="no">'+o((e.tr||t&&t.tr||r).call(t,"No",{name:"tr",hash:{},data:n}))+'</option>\n          </select>\n        </div>\n      </div>\n      <div class="row">\n        <div class="large-6 columns">\n          <label for="LOCALTIME">\n            '+o((e.tr||t&&t.tr||r).call(t,"Localtime",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">\n              '+o((e.tr||t&&t.tr||r).call(t,"The guest clock will be synchronized to the hosts configured timezone when booted.",{name:"tr",hash:{},data:n}))+'\n            </span>\n          </label>\n          <select wizard_field="LOCALTIME" id="LOCALTIME" name="localtime">\n            <option id="no_localtime" name="no_localtime" value=""></option>\n            <option value="yes">'+o((e.tr||t&&t.tr||r).call(t,"Yes",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="no">'+o((e.tr||t&&t.tr||r).call(t,"No",{name:"tr",hash:{},data:n}))+'</option>\n          </select>\n        </div>\n        <div class="large-6 columns hypervisor only_xen">\n          <label for="DEVICE_MODEL">\n            '+o((e.tr||t&&t.tr||r).call(t,"Device model",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">\n              '+o((e.tr||t&&t.tr||r).call(t,"Used to change the IO emulator in Xen HVM. Only XEN.",{name:"tr",hash:{},data:n}))+'\n            </span>\n          </label>\n          <input type="text" wizard_field="DEVICE_MODEL" id="DEVICE_MODEL" name="device_model"/>\n        </div>\n      </div>\n      <div class="row">\n        <div class="large-6 columns hypervisor only_vmware">\n          <label for="PCIBRIDGE">\n            '+o((e.tr||t&&t.tr||r).call(t,"PCI BRIDGE",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">\n              '+o((e.tr||t&&t.tr||r).call(t," Adds a PCI Controller that provides bridge-to-bridge capability, only for VMware.",{name:"tr",hash:{},data:n}))+'\n            </span>\n          </label>\n          <select wizard_field="PCIBRIDGE" id="PCIBRIDGE" name="PCIBRIDGE">\n            <option id="no_pcibridge" name="no_pcibridge" value=""></option>\n            <option value="0">0</option>\n            <option value="1">1</option>\n            <option value="2">2</option>\n            <option value="3">3</option>\n            <option value="4">4</option>\n            <option value="5">5</option>\n            <option value="6">6</option>\n            <option value="7">7</option>\n            <option value="8">8</option>\n            <option value="9">9</option>\n            <option value="10">10</option>\n          </select>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>'},useData:!0});return e.registerPartial("tabs/templates-tab/form-panels/create/wizard-tabs/os/html",a),a}),define("tabs/templates-tab/form-panels/create/wizard-tabs/os/wizardTabId",["require"],function(){return"osTab"}),define("tabs/templates-tab/form-panels/create/wizard-tabs/os",["require","foundation.tab","sunstone-config","utils/locale","utils/tips","utils/wizard-fields","tabs/files-tab/datatable","hbs!./os/html","./os/wizardTabId"],function(t){function e(){if(!o.isTemplateCreationTabEnabled("os_booting"))throw"Wizard Tab not enabled";this.wizardTabId=h,this.icon="fa-power-off",this.title=l.tr("OS Booting"),this.classes="hypervisor only_kvm only_vmware only_xen",this.kernelFilesTable=new u(this.wizardTabId+"KernelTable",{select:!0,selectOptions:{filter_fn:function(t){return 3==t.TYPE}}}),this.initrdFilesTable=new u(this.wizardTabId+"InitrdTable",{select:!0,selectOptions:{filter_fn:function(t){return 4==t.TYPE}}})}function a(){return p({guestOS:f,kernelFilesTableHTML:this.kernelFilesTable.dataTableHTML,initrdFilesTableHTML:this.initrdFilesTable.dataTableHTML})}function n(){}function s(t){var e=this;c.setup(t),t.foundation("reflow","tab");var a=$(".kernel_ds",t),n=$("#kernel_path_inputs",t);$("input[name='kernel_type']",t).change(function(){"kernel_ds"==$("input[name='kernel_type']:checked",t).val()?(a.toggle(),n.hide(),$("[wizard_field]",a).prop("wizard_field_disabled",!1),$("[wizard_field]",n).prop("wizard_field_disabled",!0)):(a.hide(),n.toggle(),$("[wizard_field]",n).prop("wizard_field_disabled",!1),$("[wizard_field]",a).prop("wizard_field_disabled",!0))});var s=$(".initrd_ds",t),i=$("#initrd_path_inputs",t);$("input[name='initrd_type']",t).change(function(){"initrd_ds"==$("input[name='initrd_type']:checked",t).val()?(s.toggle(),i.hide(),$("[wizard_field]",s).prop("wizard_field_disabled",!1),$("[wizard_field]",i).prop("wizard_field_disabled",!0)):(s.hide(),i.toggle(),$("[wizard_field]",i).prop("wizard_field_disabled",!1),$("[wizard_field]",s).prop("wizard_field_disabled",!0))}),e.kernelFilesTable.initialize({selectOptions:{select_callback:function(e,a){$("#KERNEL_DS",t).val("$FILE[IMAGE_ID="+e[a.id_index]+"]")}}}),e.kernelFilesTable.refreshResourceTableSelect(),e.initrdFilesTable.initialize({selectOptions:{select_callback:function(e,a){$("#INITRD_DS",t).val("$FILE[IMAGE_ID="+e[a.id_index]+"]")}}}),e.initrdFilesTable.refreshResourceTableSelect()}function i(t){var e={},a={};$.extend(a,d.retrieve("#bootTab",t)),$.extend(a,d.retrieve("#kernelTab",t)),$.extend(a,d.retrieve("#ramdiskTab",t));for(var n,s="",i=0;3>i;i++)n=$("#BOOT_"+i,t).val(),void 0!=n&&n.length>0&&(s.length>0&&(s+=","),s+=n);s.length>0&&(a.BOOT=s),$.isEmptyObject(a)||(e.OS=a);var r=d.retrieve("#featuresTab",t);return $.isEmptyObject(r)||(e.FEATURES=r),e}function r(t,e){var a=e.OS;if(a){if(d.fill(t,a),a&&a.BOOT)for(var n=a.BOOT.split(","),s=0;3>s&&s<n.length;s++)$("#BOOT_"+s,t).val(n[s]);delete e.OS}var i=e.FEATURES;i&&(d.fill(t,i),delete e.FEATURES)}t("foundation.tab");var o=t("sunstone-config"),l=t("utils/locale"),c=t("utils/tips"),d=t("utils/wizard-fields"),u=t("tabs/files-tab/datatable"),p=t("hbs!./os/html"),h=t("./os/wizardTabId"),f=["asianux3_64Guest","asianux3Guest","asianux4_64Guest","asianux4Guest","centos64Guest","centosGuest","darwin64Guest","darwinGuest","debian4_64Guest","debian4Guest","debian5_64Guest","debian5Guest","dosGuest","eComStationGuest","freebsd64Guest","freebsdGuest","mandriva64Guest","mandrivaGuest","netware4Guest","netware5Guest","netware6Guest","nld9Guest","oesGuest","openServer5Guest","openServer6Guest","oracleLinux64Guest","oracleLinuxGuest","os2Guest","other24xLinux64Guest","other24xLinuxGuest","other26xLinux64Guest","other26xLinuxGuest","otherGuest","otherGuest64","otherLinux64Guest","otherLinuxGuest","redhatGuest","rhel2Guest","rhel3_64Guest","rhel3Guest","rhel4_64Guest","rhel4Guest","rhel5_64Guest","rhel5Guest","rhel6_64Guest","rhel6Guest","sjdsGuest","sles10_64Guest","sles10Guest","sles11_64Guest","sles11Guest","sles64Guest","slesGuest","solaris10_64Guest","solaris10Guest","solaris6Guest","solaris7Guest","solaris8Guest","solaris9Guest","suse64Guest","suseGuest","turboLinux64Guest","turboLinuxGuest","ubuntu64Guest","ubuntuGuest","unixWare7Guest","win2000AdvServGuest","win2000ProGuest","win2000ServGuest","win31Guest","win95Guest","win98Guest","windows7_64Guest","windows7Guest","windows7Server64Guest","winLonghorn64Guest","winLonghornGuest","winMeGuest","winNetBusinessGuest","winNetDatacenter64Guest","winNetDatacenterGuest","winNetEnterprise64Guest","winNetEnterpriseGuest","winNetStandard64Guest","winNetStandardGuest","winNetWebGuest","winNTGuest","winVista64Guest","winVistaGuest","winXPHomeGuest","winXPPro64Guest","winXPProGues"];return e.prototype.constructor=e,e.prototype.html=a,e.prototype.setup=s,e.prototype.onShow=n,e.prototype.retrieve=i,e.prototype.fill=r,e}),define("hbs!tabs/templates-tab/form-panels/create/wizard-tabs/io/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<div class="row">\n  <div class="large-6 columns graphics">\n    <fieldset>\n      <legend>'+i((e.tr||t&&t.tr||s).call(t,"Graphics",{name:"tr",hash:{},data:n}))+'</legend>\n      <div class="row">\n        <div class="large-12 columns text-center">\n          <input type="radio" name="graphics_type" ID="radioVncType" value="VNC">\n          <label for="radioVncType">VNC</label>\n          <input type="radio" name="graphics_type" ID="radioSdlType" value="SDL" class="hypervisor only_kvm only_vmware only_xen" >\n          <label class="hypervisor only_kvm only_vmware only_xen"  for="radioSdlType">SDL</label>\n          <input type="radio" name="graphics_type" ID="radioSpiceType" value="SPICE" class="hypervisor only_kvm only_vmware only_xen" >\n          <label  class="hypervisor only_kvm only_vmware only_xen" for="radioSpiceType">SPICE</label>\n        </div>\n      </div>\n      <br>\n      <div class="row">\n        <input type="hidden" wizard_field="TYPE" name="graphics_type" ID="TYPE">\n        <div class="large-12 columns">\n          <label for="LISTEN">\n            '+i((e.tr||t&&t.tr||s).call(t,"Listen IP",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+i((e.tr||t&&t.tr||s).call(t,"IP to listen on",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <input type="text" wizard_field="LISTEN" id="LISTEN" name="graphics_ip" />\n        </div>\n      </div>\n      <div class="row">\n        <div class="large-6 columns">\n          <label for="PORT">\n            '+i((e.tr||t&&t.tr||s).call(t,"Port",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+i((e.tr||t&&t.tr||s).call(t,"Port for the VNC/SPICE server",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <input type="text" wizard_field="PORT" id="PORT" name="port" />\n        </div>\n        <div class="large-6 columns">\n          <label for="KEYMAP">\n            '+i((e.tr||t&&t.tr||s).call(t,"Keymap",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">\n              '+i((e.tr||t&&t.tr||s).call(t,"Keyboard configuration locale to use in the VNC/SPICE display",{name:"tr",hash:{},data:n}))+'\n            </span>\n          </label>\n          <input type="text" wizard_field="KEYMAP" id="KEYMAP" name="keymap" />\n        </div>\n      </div>\n      <div class="row hypervisor only_kvm only_vmware only_xen">\n        <div class="large-12 columns">\n          <label for="PASSWD">\n            '+i((e.tr||t&&t.tr||s).call(t,"Password",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+i((e.tr||t&&t.tr||s).call(t,"Password for the VNC/SPICE server",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <input type="text" wizard_field="PASSWD" id="PASSWD" name="graphics_pw" />\n        </div>\n      </div>\n      <div class="row hypervisor only_kvm only_vmware only_xen">\n        <div class="columns large-12">\n          <input type="checkbox" name="RANDOM_PASSWD" id="RANDOM_PASSWD">\n          <label for="RANDOM_PASSWD">\n            '+i((e.tr||t&&t.tr||s).call(t,"Generate Random Password",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">\n              '+i((e.tr||t&&t.tr||s).call(t,"A random password will be generated for each VM, and will be included in the VM information",{name:"tr",hash:{},data:n}))+'\n            </span>\n          </label>\n        </div>\n      </div>\n    </fieldset>\n  </div>\n  <div class="large-6 columns inputs hypervisor only_kvm only_vmware only_xen">\n    <fieldset>\n      <legend>'+i((e.tr||t&&t.tr||s).call(t,"Inputs",{name:"tr",hash:{},data:n}))+'</legend>\n      <div class="row">\n        <div class="large-5 columns">\n          <select id="INPUT_TYPE" name="input_type">\n            <option id="no_type" name="no_type" value=""></option>\n            <option value="mouse">'+i((e.tr||t&&t.tr||s).call(t,"Mouse",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="tablet">'+i((e.tr||t&&t.tr||s).call(t,"Tablet",{name:"tr",hash:{},data:n}))+'</option>\n          </select>\n        </div>\n        <div class="large-4 columns">\n          <select id="INPUT_BUS" name="input_bus">\n            <option id="no_input" name="no_input" value=""></option>\n            <option value="usb">'+i((e.tr||t&&t.tr||s).call(t,"USB",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="ps2">'+i((e.tr||t&&t.tr||s).call(t,"PS2",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="xen">'+i((e.tr||t&&t.tr||s).call(t,"XEN",{name:"tr",hash:{},data:n}))+'</option>\n          </select>\n        </div>\n        <div class="large-3 columns">\n          <a href="#" class="button small radius secondary" id="add_input">'+i((e.tr||t&&t.tr||s).call(t,"Add",{name:"tr",hash:{},data:n}))+'</a>\n        </div>\n      </div>\n      <div class="row">\n        <div class="large-12 columns">\n          <table id="input_table" class="dataTable policies_table">\n            <thead>\n              <tr>\n                <th>'+i((e.tr||t&&t.tr||s).call(t,"TYPE",{name:"tr",hash:{},data:n}))+"</th>\n                <th>"+i((e.tr||t&&t.tr||s).call(t,"BUS",{name:"tr",hash:{},data:n}))+'</th>\n                <th></th>\n              </tr>\n            </thead>\n            <tbody id="tbodyinput">\n              <tr></tr>\n              <tr></tr>\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </fieldset>\n  </div>\n</div>'},useData:!0});return e.registerPartial("tabs/templates-tab/form-panels/create/wizard-tabs/io/html",a),a}),define("tabs/templates-tab/form-panels/create/wizard-tabs/io/wizardTabId",["require"],function(){return"ioTab"}),define("tabs/templates-tab/form-panels/create/wizard-tabs/io",["require","sunstone-config","utils/locale","utils/tips","utils/wizard-fields","utils/template-utils","hbs!./io/html","./io/wizardTabId"],function(t){function e(){if(!o.isTemplateCreationTabEnabled("input_output"))throw"Wizard Tab not enabled";this.wizardTabId=h,this.icon="fa-exchange",this.title=l.tr("Input/Output")}function a(){return p()}function n(){}function s(t){c.setup(t),$("input[name='graphics_type']",t).change(function(){$("#TYPE",t).val($(this).attr("value")),$("#LISTEN",t).val("0.0.0.0")}),t.off("click","#add_input"),t.on("click","#add_input",function(){var e=$("#input_table",t)[0],a=(e.rows.length,e.insertRow(-1));$(a).addClass("vm_param");var n=a.insertCell(0),s=document.createElement("input");s.id="INPUT_TYPE",s.type="text",s.value=$("select#INPUT_TYPE",t).val(),n.appendChild(s);var i=a.insertCell(1),r=document.createElement("input");r.id="INPUT_BUS",r.type="text",r.value=$("select#INPUT_BUS",t).val(),i.appendChild(r);var o=a.insertCell(2);o.innerHTML="<i class='fa fa-times-circle fa fa-lg remove-tab'></i>"}),t.off("click","i.remove-tab"),t.on("click","i.remove-tab",function(){$(this).closest("tr").remove()})}function i(t){var e={},a=d.retrieve(t);!$.isEmptyObject(a)&&$("#RANDOM_PASSWD:checked",t).length>0&&(a.RANDOM_PASSWD="YES"),$.isEmptyObject(a)||(e.GRAPHICS=a);var n=[];return $("#input_table tr",t).each(function(){$("#INPUT_TYPE",$(this)).val()&&n.push({TYPE:$("#INPUT_TYPE",$(this)).val(),BUS:$("#INPUT_BUS",$(this)).val()})}),$.isEmptyObject(n)||(e.INPUTS=n),e}function r(t,e){var a=e.GRAPHICS;if(a){var n=a.TYPE;n&&$("input[value='"+n.toUpperCase()+"']").click(),"YES"==a.RANDOM_PASSWD&&$("#RANDOM_PASSWD",t).attr("checked","checked"),d.fill(t,a),delete e.GRAPHICS}var s=e.INPUTS;s&&(s instanceof Array||(s=[s]),$.each(s,function(){var e=$("#input_table",t)[0],a=e.rows.length,n=e.insertRow(a),s=n.insertCell(0),i=document.createElement("input");i.id="INPUT_TYPE",i.type="text",i.value=u.htmlDecode(this.TYPE),s.appendChild(i);var r=n.insertCell(1),o=document.createElement("input");o.id="INPUT_BUS",o.type="text",o.value=u.htmlDecode(this.BUS),r.appendChild(o);var l=n.insertCell(2);l.innerHTML="<i class='fa fa-times-circle fa fa-lg remove-tab'></i>"}),delete e.INPUTS)}var o=t("sunstone-config"),l=t("utils/locale"),c=t("utils/tips"),d=t("utils/wizard-fields"),u=t("utils/template-utils"),p=t("hbs!./io/html"),h=t("./io/wizardTabId");return e.prototype.constructor=e,e.prototype.html=a,e.prototype.setup=s,e.prototype.onShow=n,e.prototype.retrieve=i,e.prototype.fill=r,e}),define("hbs!tabs/templates-tab/form-panels/create/wizard-tabs/context/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l="function",c='<dl id="context_tabs" class="tabs vertical" data-tab>\n  <dd class="active">\n    <a href="#netsshTab">'+o((e.tr||t&&t.tr||r).call(t,"Network & SSH",{name:"tr",hash:{},data:n}))+'</a>\n  </dd>\n  <dd>\n    <a href="#filesTab">'+o((e.tr||t&&t.tr||r).call(t,"Files",{name:"tr",hash:{},data:n}))+'</a>\n  </dd>\n  <dd>\n    <a href="#userinputsTab">'+o((e.tr||t&&t.tr||r).call(t,"User Inputs",{name:"tr",hash:{},data:n}))+'</a>\n  </dd>\n  <dd>\n    <a href="#zcustomTab">'+o((e.tr||t&&t.tr||r).call(t,"Custom vars",{name:"tr",hash:{},data:n}))+'</a>\n  </dd>\n</dl>\n<div class="tabs-content vertical">\n  <div class="wizard_internal_tab active content" id="netsshTab">\n    <div class="row">\n      <div class="columns large-12">\n        <input type="checkbox" name="ssh_context" id="ssh_context" checked>\n        <label for="ssh_context">\n          '+o((e.tr||t&&t.tr||r).call(t,"  Add SSH contextualization",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+o((e.tr||t&&t.tr||r).call(t,"Add an ssh public key to the context. If the Public Key textarea is empty then the user variable SSH_PUBLIC_KEY will be used.",{name:"tr",hash:{},data:n}))+'\n          </span>\n        </label>\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-12 columns">\n        <label for="ssh_public_key">'+o((e.tr||t&&t.tr||r).call(t,"Public Key",{name:"tr",hash:{},data:n}))+':</label>\n        <textarea rows="4" type="text" id="ssh_public_key" name="ssh_public_key" />\n      </div>\n    </div>\n    <br>\n    <div class="row">\n      <div class="columns large-12">\n        <input type="checkbox" name="network_context" id="network_context" checked>\n        <label class="inline" for="network_context">\n          '+o((e.tr||t&&t.tr||r).call(t,"  Add Network contextualization",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+o((e.tr||t&&t.tr||r).call(t,"Add network contextualization parameters. For each NIC defined in the NETWORK section, ETH$i_IP, ETH$i_NETWORK... parameters will be included in the CONTEXT section and will be available in the Virtual Machine",{name:"tr",hash:{},data:n}))+'\n          </span>\n        </label>\n      </div>\n    </div>\n    <div class="row">\n      <div class="columns large-12">\n        <input type="checkbox" name="token_context" id="token_context">\n        <label class="inline" for="token_context">\n          '+o((e.tr||t&&t.tr||r).call(t,"  Add OneGate token",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+o((e.tr||t&&t.tr||r).call(t,"Add a file (token.txt) to the context contaning the token to push custom metrics to the VirtualMachine through OneGate",{name:"tr",hash:{},data:n}))+'\n          </span>\n        </label>\n      </div>\n    </div>\n  </div>\n  <div class="wizard_internal_tab content" id="filesTab">\n    ';return i=null!=(i=e.contextFilesTableHTML||(null!=t?t.contextFilesTableHTML:t))?i:r,s=typeof i===l?i.call(t,{name:"contextFilesTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+='\n    <div class="row">\n      <div class="large-12 columns">\n        <label for="FILES_DS">\n          '+o((e.tr||t&&t.tr||r).call(t,"FILES_DS",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+o((e.tr||t&&t.tr||r).call(t,"Raw String for the FILE_DS attribute of the VM template, representing files that will be included in the contextualization image. Each file must be stored in a FILE_DS Datastore and must be of type CONTEXT",{name:"tr",hash:{},data:n}))+'\n          </span>\n        </label>\n        <input type="text" wizard_field="FILES_DS" id="FILES_DS" name="FILES_DS" />\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-12 columns">\n        <label for="INIT_SCRIPTS">\n          '+o((e.tr||t&&t.tr||r).call(t,"Init scripts",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+o((e.tr||t&&t.tr||r).call(t,"If the VM uses the OpenNebula contextualization package the init.sh file is executed by default. When the init script added is not called init.sh or more than one init script is added, this list contains the scripts to run and the order. Ex. init.sh users.sh mysql.sh",{name:"tr",hash:{},data:n}))+'\n          </span>\n        </label>\n        <input type="text" wizard_field="FILES_DS" id="INIT_SCRIPTS" name="INIT_SCRIPTS" />\n      </div>\n    </div>\n  </div>\n  <div class="wizard_internal_tab content" id="zcustomTab">\n    ',i=null!=(i=e.customTagsTableHTML||(null!=t?t.customTagsTableHTML:t))?i:r,s=typeof i===l?i.call(t,{name:"customTagsTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+'\n  </div>\n  <div class="wizard_internal_tab content" id="userinputsTab">\n    <div class="row">\n      <div class="large-12 columns">\n        <table class="service_custom_attrs policies_table dataTable">\n          <thead>\n            <tr>\n              <th colspan="4" style="font-size: 16px !important"> <i class="fa fa-lg fa-fw fa-cogs off-color"/>'+o((e.tr||t&&t.tr||r).call(t,"User Inputs",{name:"tr",hash:{},data:n}))+'\n                <span class="tip">\n                  '+o((e.tr||t&&t.tr||r).call(t,"These attributes must be provided by the user when a new VM is intantatiated using each template. They will be included in the VM context",{name:"tr",hash:{},data:n}))+'\n                </span>\n              </th>\n            </tr>\n          </thead>\n          <thead>\n            <tr>\n              <th style="width:30%">'+o((e.tr||t&&t.tr||r).call(t,"Name",{name:"tr",hash:{},data:n}))+'</th>\n              <th style="width:20%">'+o((e.tr||t&&t.tr||r).call(t,"Type",{name:"tr",hash:{},data:n}))+'</th>\n              <th style="width:50%">'+o((e.tr||t&&t.tr||r).call(t,"Description",{name:"tr",hash:{},data:n}))+'</th>\n              <th style="width:3%"></th>\n            </tr>\n          </thead>\n          <tbody></tbody>\n          <tfoot>\n            <tr>\n              <td colspan="4">\n                <a href="#" class="add_service_custom_attr button small large-12 secondary radius">\n                  <i class="fa fa-plus"></i>\n                  '+o((e.tr||t&&t.tr||r).call(t,"Add another attribute",{name:"tr",hash:{},data:n}))+"\n                </a>\n              </td>\n            </tr>\n          </tfoot>\n        </table>\n      </div>\n    </div>\n  </div>\n</div>"
},useData:!0});return e.registerPartial("tabs/templates-tab/form-panels/create/wizard-tabs/context/html",a),a}),define("tabs/templates-tab/form-panels/create/wizard-tabs/context/wizardTabId",["require"],function(){return"contextTab"}),define("tabs/templates-tab/form-panels/create/wizard-tabs/context",["require","sunstone-config","utils/locale","utils/tips","utils/wizard-fields","utils/template-utils","utils/custom-tags-table","tabs/files-tab/datatable","hbs!./context/html","./context/wizardTabId"],function(t){function e(){if(!l.isTemplateCreationTabEnabled("context"))throw"Wizard Tab not enabled";this.wizardTabId=_,this.icon="fa-folder",this.title=c.tr("Context"),this.classes="hypervisor only_kvm only_vmware only_xen only_vcenter",this.contextFilesTable=new f(this.wizardTabId+"ContextTable",{select:!0,selectOptions:{multiple_choice:!0,filter_fn:function(t){return 5==t.TYPE}}})}function a(){return m({customTagsTableHTML:h.html(),contextFilesTableHTML:this.contextFilesTable.dataTableHTML})}function n(){}function s(t){var e=this;d.setup(t),h.setup(t);var a={selectOptions:{select_callback:function(){e.generateContextFiles(t)},unselect_callback:function(){e.generateContextFiles(t)}}};e.contextFilesTable.initialize(a),e.contextFilesTable.refreshResourceTableSelect(),t.on("click",".add_service_custom_attr",function(){$(".service_custom_attrs tbody").append('<tr><td><input class="user_input_name" type="text" pattern="[\\w]+"/><small class="error">'+c.tr("Only word characters are allowed")+'</small></td><td><select class="user_input_type" ><option value="text">'+c.tr("text")+'</option><option value="password">'+c.tr("password")+'</option></select></td><td><textarea class="user_input_description"/></td><td><a href="#"><i class="fa fa-times-circle remove-tab"></i></a></td></tr>')}),t.on("click",".service_custom_attrs i.remove-tab",function(){var t=$(this).closest("tr");t.remove()})}function i(t){var e={},a=u.retrieve(t);if($.extend(a,h.retrieve(t)),$("#ssh_context",t).is(":checked")){var n=$("#ssh_public_key",t).val();a.SSH_PUBLIC_KEY=n?n:"$USER[SSH_PUBLIC_KEY]"}$("#network_context",t).is(":checked")&&(a.NETWORK="YES"),$("#token_context",t).is(":checked")&&(a.TOKEN="YES");var s={};return $(".service_custom_attrs tbody tr",t).each(function(){if($(".user_input_name",$(this)).val()){var t=$(".user_input_name",$(this)).val(),e=$(".user_input_type",$(this)).val(),n=$(".user_input_description",$(this)).val();s[t]="M|"+e+"|"+n,a[t]="$"+t.toUpperCase()}}),$.isEmptyObject(a)||(e.CONTEXT=a),$.isEmptyObject(s)||(e.USER_INPUTS=s),e}function r(t,e){var a=this;$("#ssh_context",t).removeAttr("checked"),$("#network_context",t).removeAttr("checked");var n=e.CONTEXT,s=e.USER_INPUTS;if(s&&($.each(s,function(t,e){$(".add_service_custom_attr",a).trigger("click");var a=$(".service_custom_attrs tbody tr",a).last(),s=e.split("|");$(".user_input_name",a).val(t),$(".user_input_type",a).val(s[1]),$(".user_input_description",a).val(p.escapeDoubleQuotes(p.htmlDecode(s[2]))),n&&delete n[t]}),delete e.USER_INPUTS),n){var i=/\$FILE\[IMAGE_ID=([0-9]+)+/g,r=/^NETWORK$/,o=/^SSH_PUBLIC_KEY$/,l=/^TOKEN$/,c=/\$USER\[SSH_PUBLIC_KEY\]/,d={};$.each(n,function(e,s){if(o.test(e))$("#ssh_context",t).prop("checked","checked"),c.test(s)||$("#ssh_public_key",t).val(p.htmlDecode(s));else if(l.test(e))$("#token_context",t).prop("checked","checked");else if(r.test(e))$("#network_context",t).prop("checked","checked");else if("INIT_SCRIPTS"==e)$("input#INIT_SCRIPTS").val(p.htmlDecode(s));else if("FILES_DS"==e){$("#FILES_DS",t).val(p.escapeDoubleQuotes(p.htmlDecode(n.FILES_DS)));for(var u=[];match=i.exec(s);)u.push(match[1]);var h={ids:u};a.contextFilesTable.selectResourceTableSelect(h)}else d[e]=s}),h.fill(t,d),delete e.CONTEXT}}function o(t){var e=[],a=this.contextFilesTable.retrieveResourceTableSelect();$.each(a,function(t,a){e.push("$FILE[IMAGE_ID="+a+"]")}),$("#FILES_DS",t).val(e.join(" "))}var l=t("sunstone-config"),c=t("utils/locale"),d=t("utils/tips"),u=t("utils/wizard-fields"),p=t("utils/template-utils"),h=t("utils/custom-tags-table"),f=t("tabs/files-tab/datatable"),m=t("hbs!./context/html"),_=t("./context/wizardTabId");return e.prototype.constructor=e,e.prototype.html=a,e.prototype.setup=s,e.prototype.onShow=n,e.prototype.retrieve=i,e.prototype.fill=r,e.prototype.generateContextFiles=o,e}),define("hbs!tabs/templates-tab/form-panels/create/wizard-tabs/scheduling/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l="function",c='<dl class="tabs vertical" data-tab>\n  <dd class="active">\n    <a href="#placementTab">'+o((e.tr||t&&t.tr||r).call(t,"Placement",{name:"tr",hash:{},data:n}))+'</a>\n  </dd>\n  <dd>\n    <a href="#policyTab">'+o((e.tr||t&&t.tr||r).call(t,"Policy",{name:"tr",hash:{},data:n}))+'</a>\n  </dd>\n</dl>\n<div class="tabs-content vertical">\n  <div class="requirements wizard_internal_tab active content" id="placementTab">\n    <fieldset>\n      <legend>'+o((e.tr||t&&t.tr||r).call(t,"Host Requirements",{name:"tr",hash:{},data:n}))+'</legend>\n      <div class="row">\n        <div class="large-12 columns text-center">\n          <input type="radio" id="hosts_req" name="req_select" value="host_select">\n          <label for="hosts_req">'+o((e.tr||t&&t.tr||r).call(t,"Select Hosts ",{name:"tr",hash:{},data:n}))+'</label>\n          <input type="radio" id="clusters_req"  name="req_select" value="cluster_select">\n          <label for="clusters_req">'+o((e.tr||t&&t.tr||r).call(t,"Select Clusters ",{name:"tr",hash:{},data:n}))+'</label>\n        </div>\n      </div>\n      <br>\n      <div id="req_type" class="host_select" hidden>\n      ';return i=null!=(i=e.hostsTableSelectHTML||(null!=t?t.hostsTableSelectHTML:t))?i:r,s=typeof i===l?i.call(t,{name:"hostsTableSelectHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+='\n      </div>\n      <div id="req_type" class="cluster_select hidden">\n      ',i=null!=(i=e.clustersTableSelectHTML||(null!=t?t.clustersTableSelectHTML:t))?i:r,s=typeof i===l?i.call(t,{name:"clustersTableSelectHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+'\n      </div>\n      <br>\n      <div class="row">\n        <div class="large-12 columns">\n          <label for="SCHED_REQUIREMENTS">\n            '+o((e.tr||t&&t.tr||r).call(t,"Expression",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">\n              '+o((e.tr||t&&t.tr||r).call(t,"Boolean expression that rules out provisioning hosts from list of machines suitable to run this VM",{name:"tr",hash:{},data:n}))+'.\n            </span>\n          </label>\n          <input type="text" wizard_field="SCHED_REQUIREMENTS" id="SCHED_REQUIREMENTS" name="requirements" />\n        </div>\n      </div>\n    </fieldset>\n    <fieldset class="hypervisor only_kvm only_vmware only_xen">\n      <legend>'+o((e.tr||t&&t.tr||r).call(t,"Datastore Requirements",{name:"tr",hash:{},data:n}))+'</legend>\n      <div class="row">\n        <div class="large-12 columns">\n          <label for="SCHED_DS_REQUIREMENTS">\n            '+o((e.tr||t&&t.tr||r).call(t,"Expression",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">\n              '+o((e.tr||t&&t.tr||r).call(t,"Boolean expression that rules out entries from the pool of datastores suitable to run this VM.",{name:"tr",hash:{},data:n}))+'.\n            </span>\n          </label>\n          <input type="text" wizard_field="SCHED_DS_REQUIREMENTS" id="SCHED_DS_REQUIREMENTS" name="requirements" />\n        </div>\n      </div>\n    </fieldset>\n  </div>\n  <div id="policyTab" class="wizard_internal_tab content">\n    <fieldset class="host_rank">\n      <legend>'+o((e.tr||t&&t.tr||r).call(t,"Host Rank",{name:"tr",hash:{},data:n}))+'</legend>\n      <div class="row">\n        <div class="large-12 columns text-center">\n          <input type="radio" id="packingRadio" name="rank_select" value="RUNNING_VMS">\n          <label for="packingRadio">\n            '+o((e.tr||t&&t.tr||r).call(t,"Packing",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">\n              '+o((e.tr||t&&t.tr||r).call(t,"Pack the VMs in the cluster nodes to reduce VM fragmentation",{name:"tr",hash:{},data:n}))+'\n            </span>\n          </label>\n          <input type="radio"  id="stripingRadio" name="rank_select" value="-RUNNING_VMS">\n          <label for="stripingRadio">\n            '+o((e.tr||t&&t.tr||r).call(t,"Stripping",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Spread the VMs in the cluster nodes",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <input type="radio"  id="loadawareRadio" name="rank_select" value="FREE_CPU">\n          <label for="loadawareRadio">\n            '+o((e.tr||t&&t.tr||r).call(t,"Load-aware",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Maximize the resources available to VMs in a node",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n        </div>\n      </div>\n      <br>\n      <div class="row">\n        <div class="large-12 columns">\n          <label for="SCHED_RANK">\n            '+o((e.tr||t&&t.tr||r).call(t,"Expression",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">\n              '+o((e.tr||t&&t.tr||r).call(t,"This field sets which attribute will be used to sort the suitable hosts for this VM",{name:"tr",hash:{},data:n}))+'.\n            </span>\n          </label>\n          <input type="text" wizard_field="SCHED_RANK" id="SCHED_RANK" name="RANK" />\n        </div>\n      </div>\n    </fieldset>\n    <fieldset class="ds_rank hypervisor only_kvm only_vmware only_xen">\n      <legend>'+o((e.tr||t&&t.tr||r).call(t,"Datastore Rank",{name:"tr",hash:{},data:n}))+'</legend>\n      <div class="row">\n        <div class="large-12 columns text-center">\n          <input type="radio" id="packingDSRadio" name="ds_rank_select" value="-FREE_MB">\n          <label for="packingDSRadio">\n            '+o((e.tr||t&&t.tr||r).call(t,"Packing",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">\n              '+o((e.tr||t&&t.tr||r).call(t,"Tries to optimize storage usage by selecting the DS with less free space",{name:"tr",hash:{},data:n}))+'\n            </span>\n          </label>\n          <input type="radio"  id="stripingDSRadio" name="ds_rank_select" value="FREE_MB">\n          <label for="stripingDSRadio">\n            '+o((e.tr||t&&t.tr||r).call(t,"Stripping",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">\n              '+o((e.tr||t&&t.tr||r).call(t,"Striping. Tries to optimize I/O by distributing the VMs across datastores.",{name:"tr",hash:{},data:n}))+'\n            </span>\n          </label>\n        </div>\n      </div>\n      <br>\n      <div class="row">\n        <div class="large-12 columns">\n          <label for="SCHED_DS_RANK">\n            '+o((e.tr||t&&t.tr||r).call(t,"Expression",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">\n              '+o((e.tr||t&&t.tr||r).call(t,"This field sets which attribute will be used to sort the suitable datastores for this VM",{name:"tr",hash:{},data:n}))+'.\n            </span>\n          </label>\n          <input type="text" wizard_field="SCHED_DS_RANK" id="SCHED_DS_RANK" name="RANK" />\n        </div>\n      </div>\n    </fieldset>\n  </div>\n</div>'},useData:!0});return e.registerPartial("tabs/templates-tab/form-panels/create/wizard-tabs/scheduling/html",a),a}),define("tabs/templates-tab/form-panels/create/wizard-tabs/scheduling/wizardTabId",["require"],function(){return"schedulingTab"}),define("tabs/templates-tab/form-panels/create/wizard-tabs/scheduling",["require","foundation.tab","sunstone-config","utils/locale","utils/tips","utils/wizard-fields","utils/template-utils","tabs/hosts-tab/datatable","tabs/clusters-tab/datatable","hbs!./scheduling/html","./scheduling/wizardTabId"],function(t){function e(){if(!l.isTemplateCreationTabEnabled("scheduling"))throw"Wizard Tab not enabled";this.wizardTabId=_,this.icon="fa-sitemap",this.title=c.tr("Scheduling");var t={select:!0,selectOptions:{multiple_choice:!0}};this.hostsTable=new h(this.wizardTabId+"HostsTable",t),this.clustersTable=new f(this.wizardTabId+"ClustersTable",t)}function a(){return m({hostsTableSelectHTML:this.hostsTable.dataTableHTML,clustersTableSelectHTML:this.clustersTable.dataTableHTML})}function n(){}function s(t){var e=this;d.setup(t),t.foundation("reflow","tab"),t.on("change","input[name='req_select']",function(){"host_select"==$("input[name='req_select']:checked").val()?($("div.host_select",t).toggle(),$("div.cluster_select",t).hide()):($("div.host_select",t).hide(),$("div.cluster_select",t).toggle())}),t.on("change","input[name='rank_select']",function(){$("#SCHED_RANK",t).val(this.value)}),t.on("change","input[name='ds_rank_select']",function(){$("#SCHED_DS_RANK",t).val(this.value)});var a={selectOptions:{select_callback:function(){e.generateRequirements(t)},unselect_callback:function(){e.generateRequirements(t)}}};e.hostsTable.initialize(a),e.hostsTable.refreshResourceTableSelect(),e.clustersTable.initialize(a),e.clustersTable.refreshResourceTableSelect()}function i(t){return u.retrieve(t)}function r(t,e){var a=e.SCHED_REQUIREMENTS;if(a){for(var n=p.escapeDoubleQuotes(a),s=/(\s|\||\b)ID=\\"([0-9]+)\\"/g,i=/CLUSTER_ID=\\"([0-9]+)\\"/g,r=[];match=s.exec(n);)r.push(match[2]);for(var o=[];match=i.exec(n);)o.push(match[1]);var l={ids:r};this.hostsTable.selectResourceTableSelect(l);var l={ids:o};this.clustersTable.selectResourceTableSelect(l),$("input#SCHED_REQUIREMENTS",t).val(p.htmlDecode(n)),delete e.SCHED_REQUIREMENTS}var c=e.SCHED_DS_REQUIREMENTS;if(c){var d=p.escapeDoubleQuotes(c);$("input#SCHED_DS_REQUIREMENTS",t).val(p.htmlDecode(d)),delete e.SCHED_DS_REQUIREMENTS}var u=e.SCHED_RANK;if(u){var h=/^-RUNNING_VMS$/,f=/^RUNNING_VMS$/,m=/^FREE_CPU$/;h.test(u)?$('input[name="rank_select"]#stripingRadio',t).click():f.test(u)?$('input[name="rank_select"]#packingRadio',t).click():m.test(u)&&$('input[name="rank_select"]#loadawareRadio',t).click(),$("input#SCHED_RANK",t).val(p.htmlDecode(u)),delete e.SCHED_RANK}var _=e.SCHED_DS_RANK;if(_){var h=/^FREE_MB$/,f=/^-FREE_MB$/;h.test(_)?$('input[name="ds_rank_select"]#stripingDSRadio',t).click():f.test(_)&&$('input[name="ds_rank_select"]#packingDSRadio',t).click(),$("input#SCHED_DS_RANK",t).val(p.htmlDecode(_)),delete e.SCHED_DS_RANK}}function o(t){var e=[],a=this.hostsTable.retrieveResourceTableSelect(),n=this.clustersTable.retrieveResourceTableSelect();$.each(a,function(t,a){e.push('ID=\\"'+a+'\\"')}),$.each(n,function(t,a){e.push('CLUSTER_ID=\\"'+a+'\\"')}),$("#SCHED_REQUIREMENTS",t).val(e.join(" | "))}t("foundation.tab");var l=t("sunstone-config"),c=t("utils/locale"),d=t("utils/tips"),u=t("utils/wizard-fields"),p=t("utils/template-utils"),h=t("tabs/hosts-tab/datatable"),f=t("tabs/clusters-tab/datatable"),m=t("hbs!./scheduling/html"),_=t("./scheduling/wizardTabId");return e.prototype.constructor=e,e.prototype.html=a,e.prototype.setup=s,e.prototype.onShow=n,e.prototype.retrieve=i,e.prototype.fill=r,e.prototype.generateRequirements=o,e}),define("hbs!tabs/templates-tab/form-panels/create/wizard-tabs/hybrid/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<dl class="tabs vertical" id="template_create_hybrid_tabs" data-tab>\n  <dt class="text-center">\n    <a href="" class="button tiny radius" id="tf_btn_hybrid">\n      <span class="fa fa-plus"></span>\n      '+i((e.tr||t&&t.tr||s).call(t,"Add another provider",{name:"tr",hash:{},data:n}))+'\n    </a>\n  </dt>\n</dl>\n<div class="tabs-content vertical" id="template_create_hybrid_tabs_content"></div>'},useData:!0});return e.registerPartial("tabs/templates-tab/form-panels/create/wizard-tabs/hybrid/html",a),a}),define("tabs/templates-tab/form-panels/create/wizard-tabs/hybrid/wizardTabId",["require"],function(){return"hybridTab"}),define("tabs/templates-tab/form-panels/create/wizard-tabs/hybrid",["require","foundation.tab","sunstone-config","utils/locale","utils/tips","utils/wizard-fields","hbs!./hybrid/html","./hybrid/wizardTabId"],function(t){function e(){if(!c.isTemplateCreationTabEnabled("hybrid"))throw"Wizard Tab not enabled";this.wizardTabId=f,this.icon="fa-cloud",this.title=d.tr("Hybrid")}function a(){return h()}function n(){}function s(t){var e=this;t.foundation("reflow","tab"),e.numberOfProviders=0,t.on("click","i.remove-tab",function(){var e=$(this).parent().attr("href"),a=$(this).closest("dd"),n=$(this).closest("dl"),s=$(e);a.remove(),s.remove(),"active"==a.attr("class")&&$("a",n.children("dd").last()).click(),$("dl#template_create_hybrid_tabs dd",t).each(function(t){$("a",this).html(d.tr("Provider")+" "+t+" <i class='fa fa-times-circle remove-tab'></i>")})}),t.on("click","#tf_btn_hybrid",function(){return e.addProviderTab(e.numberOfProviders,t),e.numberOfProviders++,!1}),$("#tf_btn_hybrid",t).trigger("click")}function i(t){var e={},a=[],n=[];return"vcenter"==$("[wizard_field='HYPERVISOR']:checked").val()&&a.push({TYPE:"vcenter",VM_TEMPLATE:$("#vcenter_template_uuid").val()}),$(".provider",t).each(function(){var t=p.retrieve(this);if(!$.isEmptyObject(t)){var e=$("input.hybridRadio:checked",this).val();switch(e){case"ec2":n.push(t);break;case"softlayer":t.TYPE=e.toUpperCase(),a.push(t);break;case"azure":t.TYPE=e.toUpperCase(),a.push(t)}}}),$.isEmptyObject(a)||(e.PUBLIC_CLOUD=a),$.isEmptyObject(n)||(e.EC2=n),e}function r(t,e){var a=this,n=!1;if(e.PUBLIC_CLOUD){var s=e.PUBLIC_CLOUD;s instanceof Array?$.each(s,function(e,s){n=e>0,a.fillProviderTab(t,s,s.TYPE.toLowerCase(),n)}):s instanceof Object&&(a.fillProviderTab(t,s,s.TYPE.toLowerCase(),n),n=!0),delete e.PUBLIC_CLOUD}if(e.EC2){var s=e.EC2;s instanceof Array?$.each(s,function(e,s){n=n||e>0,a.fillProviderTab(t,s,"ec2",n)}):s instanceof Object&&a.fillProviderTab(t,s,"ec2",n),delete e.EC2}}function o(t,e){var a="provider"+t,n='<div id="'+a+'Tab" class="provider wizard_internal_tab content"><div class="row"><div class="large-12 columns"><label>'+d.tr("Hybrid Cloud")+'</label><input type="radio" class="hybridRadio" name="hybrid'+a+'" value="ec2" id="amazonRadio'+a+'"><label for="amazonRadio'+a+'">Amazon EC2</label><input type="radio" class="hybridRadio" name="hybrid'+a+'" value="softlayer" id="softlayerRadio'+a+'"><label for="softlayerRadio'+a+'">IBM Softlayer</label><input type="radio" class="hybridRadio" name="hybrid'+a+'" value="azure" id="azureRadio'+a+'"><label for="azureRadio'+a+'">Microsoft Azure</label></div></div><div class="row hybrid_inputs vm_param"></div></div>';$(n).appendTo($("#template_create_hybrid_tabs_content",e));var s=$("<dd>        <a id='provider_tab"+a+"' href='#"+a+"Tab'>"+d.tr("PROVIDER")+"</a>      </dd>").appendTo($("dl#template_create_hybrid_tabs",e));$("dl#template_create_hybrid_tabs dd",e).each(function(t){$("a",this).html(d.tr("Provider")+" "+t+" <i class='fa fa-times-circle remove-tab'></i>")}),$("a",s).trigger("click");var i=$("#"+a+"Tab",e);i.on("change","input.hybridRadio",function(){$(".hybrid_inputs",i).html("");var t="",e="";$.each(m[this.value],function(a,n){n.required?t+='<div class="large-6 columns"><label>'+n.label+'<span class="tip">'+n.tooltip+'</span></label><input wizard_field="'+n.name+'" type="text" id="'+n.name+'"></div>':e+='<div class="large-6 columns"><label>'+n.label+'<span class="tip">'+n.tooltip+'</span></label><input wizard_field="'+n.name+'" type="text" id="'+n.name+'"></div>'}),$(".hybrid_inputs",i).append(t+"<br><hr><br>"+e),u.setup($(".hybrid_inputs",i))})}function l(t,e,a,n){if("vcenter"==a)$("#vcenter_template_uuid").val(e.VM_TEMPLATE);else{n&&$("#tf_btn_hybrid",t).trigger("click");var s=$(".provider",t).last();$("input.hybridRadio[value='"+a+"']",s).trigger("click"),p.fill(s,e)}}t("foundation.tab");var c=t("sunstone-config"),d=t("utils/locale"),u=t("utils/tips"),p=t("utils/wizard-fields"),h=t("hbs!./hybrid/html"),f=t("./hybrid/wizardTabId"),m={ec2:[{name:"AKI",label:d.tr("AKI"),tooltip:d.tr("The ID of the kernel with which to launch the instance.")},{name:"AMI",label:d.tr("AMI"),tooltip:d.tr("Unique ID of a machine image, returned by a call to ec2-describe-images."),required:!0},{name:"AVAILABILITYZONE",label:d.tr("Availability Zone"),tooltip:d.tr("The Availability Zone in which to run the instance.")},{name:"BLOCKDEVICEMAPPING",label:d.tr("Block Device Mapping"),tooltip:d.tr("The block device mapping for the instance. More than one can be specified in a space-separated list. Check the block-device-mapping option of the EC2 CLI Reference for the syntax")},{name:"CLIENTTOKEN",label:d.tr("Client Token"),tooltip:d.tr("Unique, case-sensitive identifier you provide to ensure idempotency of the request.")},{name:"EBS_OPTIMIZED",label:d.tr("EBS Optimized"),tooltip:d.tr("Obtain a better I/O throughput for VMs with EBS provisioned volumes")},{name:"ELASTICIP",label:d.tr("Elastic IP"),tooltip:d.tr("EC2 Elastic IP address to assign to the instance. This parameter is passed to the command ec2-associate-address -i i-0041230 elasticip.")},{name:"HOST",label:d.tr("OpenNebula Host"),tooltip:d.tr("Defines which OpenNebula host will use this template")},{name:"INSTANCETYPE",label:d.tr("Instance Type"),tooltip:d.tr("Specifies the instance type."),required:!0},{name:"KEYPAIR",label:d.tr("Keypair"),tooltip:d.tr("The name of the key pair, later will be used to execute commands like ssh -i id_keypair or scp -i id_keypair")},{name:"LICENSEPOOL",label:d.tr("License Pool"),tooltip:d.tr("Name of the license pool.")},{name:"PLACEMENTGROUP",label:d.tr("Placement Group"),tooltip:d.tr("Name of the placement group.")},{name:"PRIVATEIP",label:d.tr("Private IP"),tooltip:d.tr("If youre using Amazon Virtual Private Cloud, you can optionally use this parameter to assign the instance a specific available IP address from the subnet.")},{name:"RAMDISK",label:d.tr("Ramdisk"),tooltip:d.tr("The ID of the RAM disk to select.")},{name:"SECURITYGROUPS",label:d.tr("Security Groups"),tooltip:d.tr("Name of the security group. You can specify more than one security group (comma separated).")},{name:"SUBNETID",label:d.tr("Subnet ID"),tooltip:d.tr("If youre using Amazon Virtual Private Cloud, this specifies the ID of the subnet you want to launch the instance into. This parameter is also passed to the command ec2-associate-address -i i-0041230 -a elasticip.")},{name:"TAGS",label:d.tr("Tags"),tooltip:d.tr("Key and optional value of the tag, separated by an equals sign ( = ).You can specify more than one tag (comma separated).")},{name:"TENANCY",label:d.tr("Tenancy"),tooltip:d.tr("The tenancy of the instance you want to launch.")},{name:"USERDATA",label:d.tr("User Data"),tooltip:d.tr("Specifies Base64-encoded MIME user data to be made available to the instance(s) in this reservation.")}],softlayer:[{name:"BLOCKDEVICETEMPLATE",label:d.tr("Block Device Template"),tooltip:d.tr("A global identifier for the template to be used to provision the computing instance")},{name:"BLOCKDEVICE",label:d.tr("Block Device Size"),tooltip:d.tr("Size of the block device size to be presented to the VM")},{name:"DATACENTER",label:d.tr("Datacenter"),tooltip:d.tr("Specifies which datacenter the instance is to be provisioned in")},{name:"DEDICATEDHOST",label:d.tr("Dedicated Host"),tooltip:d.tr("Specifies whether or not the instance must only run on hosts with instances from the same account")},{name:"DOMAIN",label:d.tr("Domain"),tooltip:d.tr("Domain for the computing instance"),required:!0},{name:"HOSTNAME",label:d.tr("Hostname"),tooltip:d.tr("Hostname for the computing instance"),required:!0},{name:"HOURLYBILLING",label:d.tr("Hourly Billing"),tooltip:d.tr("Specifies the billing type for the instance . When true the computing instance will be billed on hourly usage, otherwise it will be billed on a monthly basis"),required:!0},{name:"INSTANCE_TYPE",label:d.tr("Instance Type"),tooltip:d.tr("Specifies the capacity of the VM in terms of CPU and memory. If both STARTCPUS and MAXMEMORY are used, then this parameter is disregarded"),required:!0},{name:"LOCALDISK",label:d.tr("Local Disk"),tooltip:d.tr("Name of the placement group. When true the disks for the computing instance will be provisioned on the host which it runs, otherwise SAN disks will be provisioned"),required:!0},{name:"MAXMEMORY",label:d.tr("Max Memory"),tooltip:d.tr("The amount of memory to allocate in megabytes")},{name:"NETWORKCOMPONENTSMAXSPEED",label:d.tr("Network Components Max Speed"),tooltip:d.tr("Specifies the connection speed for the instance's network components")},{name:"OPERATINGSYSTEM",label:d.tr("Operating System"),tooltip:d.tr("An identifier for the operating system to provision the computing instance with. A non exhaustive list of identifiers can be found here"),required:!0},{name:"POSTSCRIPT",label:d.tr("Postscript"),tooltip:d.tr("Specifies the uri location of the script to be downloaded and run after installation is complete")},{name:"PRIVATENETWORKONLY",label:d.tr("Private Netwrok Only"),tooltip:d.tr("Specifies whether or not the instance only has access to the private network  (ie, if it is going to have a public IP interface or not)")},{name:"PRIMARYNETWORKVLAN",label:d.tr("Primary Network VLAN"),tooltip:d.tr("Specifies the network vlan which is to be used for the frontend interface of the computing instance")},{name:"PRIMARYBACKENDNETWORKVLAN",label:d.tr("Primary Backed Network VLAN"),tooltip:d.tr("Specifies the network vlan which is to be used for the backend interface of the computing instance")},{name:"SSHKEYS",label:d.tr("SSH Keys"),tooltip:d.tr("SSH keys to install on the computing instance upon provisioning")},{name:"STARTCPUS",label:d.tr("Start CPUs"),tooltip:d.tr("The number of CPU cores to allocate to the VM")},{name:"USERDATA",label:d.tr("User Data"),tooltip:d.tr("Arbitrary data to be made available to the computing instance")}],azure:[{name:"AFFINITY_GROUP",label:d.tr("Affinity Group"),tooltip:d.tr("Affinity groups allow you to group your Azure services to optimize performance. All services and VMs within an affinity group will be located in the same region")},{name:"AVAILABILITY_SET",label:d.tr("Availability Set"),tooltip:d.tr("Name of the availability set to which this VM will belong")},{name:"CLOUD_SERVICE",label:d.tr("Cloud Service"),tooltip:d.tr("Specifies the name of the cloud service where this VM will be linked. Defaults to 'OpennebulaDefaultCloudServiceName'")},{name:"IMAGE",label:d.tr("Image"),tooltip:d.tr("Specifies the base OS of the VM."),required:!0},{name:"INSTANCE_TYPE",label:d.tr("Instance Type"),tooltip:d.tr("Specifies the capacity of the VM in terms of CPU and memory"),required:!0},{name:"LOCATION",label:d.tr("Location"),tooltip:d.tr("Azure datacenter where the VM will be sent. See /etc/one/az_driver.conf for possible values (under region_name)"),required:!0},{name:"SSHPORT",label:d.tr("SSH Port"),tooltip:d.tr("Port where the VMs ssh server will listen on")},{name:"STORAGE_ACCOUNT",label:d.tr("Storage Account"),tooltip:d.tr("Specify the storage account where this VM will belong")},{name:"SUBNET",label:d.tr("Subnet"),tooltip:d.tr("Name of the particular Subnet where this VM will be connected to")},{name:"TCP_ENDPOINTS",label:d.tr("TCP Endpoints"),tooltip:d.tr("Comma-separated list of TCP ports to be accesible from the public internet to this VM")},{name:"VIRTUAL_NETWORK_NAME",label:d.tr("Virtual Network Name"),tooltip:d.tr("Name of the virtual network to which this VM will be connected")},{name:"VM_USER",label:d.tr("VM User"),tooltip:d.tr("If the selected IMAGE is prepared for Azure provisioning, a username can be specified here to access the VM once booted"),required:!0},{name:"VM_PASSWORD",label:d.tr("VM Password"),tooltip:d.tr("Password for VM_USER"),required:!0},{name:"WIN_RM",label:d.tr("Win RM"),tooltip:d.tr("Comma-separated list of possible protocols to access this Windows VM")}]};return e.prototype.constructor=e,e.prototype.html=a,e.prototype.setup=s,e.prototype.onShow=n,e.prototype.retrieve=i,e.prototype.fill=r,e.prototype.addProviderTab=o,e.prototype.fillProviderTab=l,e}),define("hbs!tabs/templates-tab/form-panels/create/wizard-tabs/other/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l="function",c='<div class="row">\n  <div class="large-12 columns">\n    <fieldset class="hypervisor only_xen only_kvm only_vmware">\n      <legend>'+o((e.tr||t&&t.tr||r).call(t,"RAW data",{name:"tr",hash:{},data:n}))+'</legend>\n      <div class="row">\n        <div class="large-4 columns">\n          <label for="raw_type">'+o((e.tr||t&&t.tr||r).call(t,"TYPE",{name:"tr",hash:{},data:n}))+'</label>\n          <select id="raw_type" name="raw_type">\n            <option value=""></option>\n            <option value="kvm">'+o((e.tr||t&&t.tr||r).call(t,"kvm",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="xen">'+o((e.tr||t&&t.tr||r).call(t,"xen",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="vmware">'+o((e.tr||t&&t.tr||r).call(t,"vmware",{name:"tr",hash:{},data:n}))+'</option>\n          </select>\n        </div>\n        <div class="large-8 columns">\n          <label class="" for="raw_data">\n            '+o((e.tr||t&&t.tr||r).call(t,"DATA",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Raw data to be passed directly to the hypervisor",{name:"tr",hash:{},data:n}))+'.</span>\n          </label>\n          <textarea rows="2" type="text" id="raw_data" name="raw_data" />\n        </div>\n      </div>\n      <div id="data_vmx_div" class="row hidden">\n        <div class="large-4 columns"></div>\n        <div class="large-8 columns">\n          <label class="" for="raw_data_vmx">\n            '+o((e.tr||t&&t.tr||r).call(t,"DATA_VMX",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Raw data to be added directly to the .vmx file.",{name:"tr",hash:{},data:n}))+'.</span>\n          </label>\n          <textarea rows="2" type="text" id="raw_data_vmx" name="raw_data_vmx" />\n        </div>\n      </div>\n    </fieldset>\n    <fieldset>\n      <legend>'+o((e.tr||t&&t.tr||r).call(t,"Custom Tags",{name:"tr",hash:{},data:n}))+"</legend>\n      ";return i=null!=(i=e.customTagsTableHTML||(null!=t?t.customTagsTableHTML:t))?i:r,s=typeof i===l?i.call(t,{name:"customTagsTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+"\n    </fieldset>\n  </div>\n</div>"},useData:!0});return e.registerPartial("tabs/templates-tab/form-panels/create/wizard-tabs/other/html",a),a}),define("tabs/templates-tab/form-panels/create/wizard-tabs/other/wizardTabId",["require"],function(){return"otherTab"}),define("tabs/templates-tab/form-panels/create/wizard-tabs/other",["require","sunstone-config","utils/locale","utils/tips","utils/wizard-fields","utils/template-utils","utils/custom-tags-table","hbs!./other/html","./other/wizardTabId"],function(e){function a(){if(!l.isTemplateCreationTabEnabled("other"))throw"Wizard Tab not enabled";this.wizardTabId=f,this.icon="fa-ellipsis-h",this.title=c.tr("Other")}function n(){return h({customTagsTableHTML:p.html()})}function s(){}function i(t){d.setup(t),p.setup(t),t.on("change","#raw_type",function(){var e=$(this).val();switch(e){case"vmware":$("#data_vmx_div",t).show();break;default:$("#data_vmx_div",t).hide()}})}function r(e){var a=p.retrieve(e),n={};return t=$("#raw_type",e).val(),t&&(n.TYPE=t),t=u.escapeDoubleQuotes($("#raw_data",e).val()),t&&(n.DATA=t),t=u.escapeDoubleQuotes($("#raw_data_vmx",e).val()),t&&(n.DATA_VMX=t),$.isEmptyObject(n)||(a.RAW=n),a}function o(t,e){var a=e.RAW;a&&($("#raw_type",t).val(a.TYPE),$("#raw_type",t).change(),$("#raw_data",t).val(u.htmlDecode(a.DATA)),$("#raw_data_vmx",t).val(u.htmlDecode(a.DATA_VMX)),delete e.RAW),p.fill(t,e)
}var l=e("sunstone-config"),c=e("utils/locale"),d=e("utils/tips"),u=(e("utils/wizard-fields"),e("utils/template-utils")),p=e("utils/custom-tags-table"),h=e("hbs!./other/html"),f=e("./other/wizardTabId");return a.prototype.constructor=a,a.prototype.html=n,a.prototype.setup=i,a.prototype.onShow=s,a.prototype.retrieve=r,a.prototype.fill=o,a}),define("tabs/templates-tab/form-panels/create",["require","foundation.tab","utils/form-panels/form-panel","sunstone","utils/locale","utils/tips","utils/template-utils","hbs!./create/wizard","hbs!./create/advanced","./create/formPanelId","../tabId","./create/wizard-tabs/general","./create/wizard-tabs/storage","./create/wizard-tabs/network","./create/wizard-tabs/os","./create/wizard-tabs/io","./create/wizard-tabs/context","./create/wizard-tabs/scheduling","./create/wizard-tabs/hybrid","./create/wizard-tabs/other"],function(t){function e(){this.formPanelId=m,this.tabId=_,this.actions={create:{title:u.tr("Create VM Template"),buttonText:u.tr("Create"),resetButton:!0},update:{title:u.tr("Update VM Template"),buttonText:u.tr("Update"),resetButton:!1}};var t=this;t.wizardTabs=[];var e;$.each(b,function(a,n){try{e=new n,e.contentHTML=e.html(),t.wizardTabs.push(e)}catch(s){console.log(s)}}),c.call(this)}function a(){return h({formPanelId:this.formPanelId,wizardTabs:this.wizardTabs})}function n(){return f({formPanelId:this.formPanelId})}function s(t){$.each(this.wizardTabs,function(e,a){a.setup($("#"+a.wizardTabId,t))}),t.foundation("reflow","tab")}function i(t){var e=this;$('a[href="#'+e.wizardTabs[0].wizardTabId+'"]',t).trigger("click"),$.each(e.wizardTabs,function(a,n){n.onShow($("#"+n.wizardTabId,t),e)})}function r(t){var e={};return $.each(this.wizardTabs,function(a,n){$.extend(!0,e,n.retrieve($("#"+n.wizardTabId,t)))}),"create"==this.action?(d.runAction("Template.create",{vmtemplate:e}),!1):"update"==this.action?(d.runAction("Template.update",this.resourceId,JSON.stringify({vmtemplate:e})),!1):void 0}function o(t){var e=$("textarea#template",t).val();return"create"==this.action?(d.runAction("Template.create",{vmtemplate:{template_raw:e}}),!1):"update"==this.action?(d.runAction("Template.update",this.resourceId,JSON.stringify({vmtemplate:{template_raw:e}})),!1):void 0}function l(t,e){if("update"==this.action){this.resourceId=e.ID;var a=e.TEMPLATE;$("#template",t).val(p.templateToString(a).replace(/^[\r\n]+$/g,"")),$.each(this.wizardTabs,function(e,n){n.fill($("#"+n.wizardTabId,t),a)})}}t("foundation.tab");var c=t("utils/form-panels/form-panel"),d=t("sunstone"),u=t("utils/locale"),p=(t("utils/tips"),t("utils/template-utils")),h=t("hbs!./create/wizard"),f=t("hbs!./create/advanced"),m=t("./create/formPanelId"),_=t("../tabId"),b=[t("./create/wizard-tabs/general"),t("./create/wizard-tabs/storage"),t("./create/wizard-tabs/network"),t("./create/wizard-tabs/os"),t("./create/wizard-tabs/io"),t("./create/wizard-tabs/context"),t("./create/wizard-tabs/scheduling"),t("./create/wizard-tabs/hybrid"),t("./create/wizard-tabs/other")];return e.FORM_PANEL_ID=m,e.prototype=Object.create(c.prototype),e.prototype.constructor=e,e.prototype.htmlWizard=a,e.prototype.htmlAdvanced=n,e.prototype.setup=s,e.prototype.onShow=i,e.prototype.submitWizard=r,e.prototype.submitAdvanced=o,e.prototype.fill=l,e}),define("tabs/templates-tab",["require","utils/locale","./templates-tab/buttons","./templates-tab/actions","./templates-tab/datatable","./templates-tab/tabId","./templates-tab/dialogs/clone","./templates-tab/dialogs/instantiate","./templates-tab/panels/info","./templates-tab/panels/template","./templates-tab/form-panels/create"],function(t){var e=t("utils/locale"),a=t("./templates-tab/buttons"),n=t("./templates-tab/actions"),s=t("./templates-tab/datatable"),i=t("./templates-tab/tabId"),r="dataTableTemplates",o=[t("./templates-tab/dialogs/clone"),t("./templates-tab/dialogs/instantiate")],l=[t("./templates-tab/panels/info"),t("./templates-tab/panels/template")],c=[t("./templates-tab/form-panels/create")],d={tabId:i,title:e.tr("Templates"),tabClass:"subTab",parentTab:"vresources-tab",listHeader:'<i class="fa fa-fw fa-file-o"></i>&emsp;'+e.tr("Templates"),infoHeader:'<i class="fa fa-fw fa-file-o"></i>&emsp;'+e.tr("Template"),subheader:"",resource:"Template",buttons:a,actions:n,dataTable:new s(r,{actions:!0,info:!0}),panels:l,formPanels:c,dialogs:o};return d}),define("tabs/images-tab/buttons",["require","utils/locale"],function(t){var e=t("utils/locale"),a={"Image.refresh":{type:"action",layout:"refresh",alwaysActive:!0},"Image.create_dialog":{type:"create_dialog",layout:"create"},"Image.chown":{type:"confirm_with_select",text:e.tr("Change owner"),layout:"user_select",select:"User",tip:e.tr("Select the new owner")+":"},"Image.chgrp":{type:"confirm_with_select",text:e.tr("Change group"),layout:"user_select",select:"Group",tip:e.tr("Select the new group")+":"},"Image.enable":{type:"action",layout:"more_select",text:e.tr("Enable")},"Image.disable":{type:"action",layout:"more_select",text:e.tr("Disable")},"Image.persistent":{type:"action",layout:"more_select",text:e.tr("Make persistent")},"Image.nonpersistent":{type:"action",layout:"more_select",text:e.tr("Make non persistent")},"Image.clone_dialog":{type:"action",layout:"main",text:e.tr("Clone")},"Image.delete":{type:"confirm",layout:"del",text:e.tr("Delete")}};return a}),define("tabs/images-tab/dialogs/clone/dialogId",["require"],function(){return"cloneImageDialog"}),define("tabs/images-tab/actions",["require","sunstone","utils/notifier","utils/locale","opennebula/image","./tabId","./form-panels/create/formPanelId","./dialogs/clone/dialogId"],function(t){var e=t("sunstone"),a=t("utils/notifier"),n=t("utils/locale"),s=t("opennebula/image"),i="Image",r="IMAGE",o=t("./tabId"),l=t("./form-panels/create/formPanelId"),c=t("./dialogs/clone/dialogId"),d={"Image.create":{type:"create",call:s.create,callback:function(t,s){e.resetFormPanel(o,l),e.hideFormPanel(o),e.getDataTable(o).addElement(t,s),a.notifyCustom(n.tr("Image created")," ID: "+s[r].ID,!1)},error:function(t,n){e.hideFormPanelLoading(o),a.onError(t,n)}},"Image.create_dialog":{type:"custom",call:function(){e.showFormPanel(o,l,"create")}},"Image.list":{type:"list",call:s.list,callback:function(t,a){e.getDataTable(o).updateView(t,a)},error:a.onError},"Image.show":{type:"single",call:s.show,callback:function(t,a){e.getDataTable(o).updateElement(t,a),e.rightInfoVisible($("#"+o))&&e.insertPanels(o,a)},error:a.onError},"Image.refresh":{type:"custom",call:function(){var t=$("#"+o);e.rightInfoVisible(t)?e.runAction(i+".show",e.rightInfoResourceId(t)):(e.getDataTable(o).waitingNodes(),e.runAction(i+".list",{force:!0}))}},"Image.update_template":{type:"single",call:s.update,callback:function(t){e.runAction(i+".show",t.request.data[0][0])},error:a.onError},"Image.enable":{type:"multiple",call:s.enable,callback:function(t){e.runAction(i+".show",t.request.data[0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"Image.disable":{type:"multiple",call:s.disable,callback:function(t){e.runAction(i+".show",t.request.data[0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"Image.persistent":{type:"multiple",call:s.persistent,callback:function(t){e.runAction(i+".show",t.request.data[0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"Image.nonpersistent":{type:"multiple",call:s.nonpersistent,callback:function(t){e.runAction(i+".show",t.request.data[0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"Image.delete":{type:"multiple",call:s.del,callback:function(t,a){e.getDataTable(o).deleteElement(t,a)},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"Image.chown":{type:"multiple",call:s.chown,callback:function(t){e.runAction(i+".show",t.request.data[0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"Image.chgrp":{type:"multiple",call:s.chgrp,callback:function(t){e.runAction(i+".show",t.request.data[0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"Image.chmod":{type:"single",call:s.chmod,callback:function(t){e.runAction(i+".show",t.request.data[0])},error:a.onError,notify:!0},"Image.chtype":{type:"single",call:s.chtype,callback:function(t){e.runAction(i+".show",t.request.data[0][0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"Image.clone_dialog":{type:"custom",call:function(){e.getDialog(c).show()}},"Image.clone":{type:"single",call:s.clone,error:a.onError,notify:!0},"Image.rename":{type:"single",call:s.rename,callback:function(t){e.runAction(i+".show",t.request.data[0][0])},error:a.onError,notify:!0}};return d}),define("hbs!tabs/images-tab/dialogs/clone/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<div id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'" class="reveal-modal large" role="dialog" data-reveal >\n  <div class="row">\n    <h3 class="subheader">'+l((e.tr||t&&t.tr||o).call(t,"Clone Image",{name:"tr",hash:{},data:n}))+'</h3>\n  </div>\n  <form id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'Form" action="" class="custom creation">\n    <div class="row">\n      <div class="columns large-12">\n        <label class="clone_one">'+l((e.tr||t&&t.tr||o).call(t,"Name",{name:"tr",hash:{},data:n}))+':</label>\n        <label class="clone_several">\n          '+l((e.tr||t&&t.tr||o).call(t,"Several images are selected, please choose a prefix to name the new copies",{name:"tr",hash:{},data:n}))+':\n        </label>\n        <input type="text" name="image_clone_name"/>\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-12 columns">\n        <dl class="accordion" id="image_clone_advanced_toggle" data-accordion>\n          <dd class="accordion-navigation">\n            <a href="#image_clone_advanced">'+l((e.tr||t&&t.tr||o).call(t,"Advanced options",{name:"tr",hash:{},data:n}))+'</a>\n          </dd>\n        </dl>\n        <div id="image_clone_advanced" class="row collapse content">\n          <br>\n          <div class="large-12 columns">\n            <span>'+l((e.tr||t&&t.tr||o).call(t,"You can select a different target datastore",{name:"tr",hash:{},data:n}))+"</span>\n            <br/>\n            <br/>\n          </div>\n          ";return i=null!=(i=e.datastoreTableSelectHTML||(null!=t?t.datastoreTableSelectHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"datastoreTableSelectHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+'\n        </div>\n      </div>\n    </div>\n    <div class="form_buttons row">\n      <button class="button radius right" id="image_clone_button" value="Image.clone">'+l((e.tr||t&&t.tr||o).call(t,"Clone",{name:"tr",hash:{},data:n}))+'</button>\n    </div>\n    <a class="close-reveal-modal">&#215;</a>\n  </form>\n</div>'},useData:!0});return e.registerPartial("tabs/images-tab/dialogs/clone/html",a),a}),define("tabs/images-tab/dialogs/clone",["require","utils/dialogs/dialog","hbs!./clone/html","sunstone","tabs/datastores-tab/datatable","utils/notifier","opennebula/image","./clone/dialogId","tabs/images-tab/tabId"],function(t){function e(){this.dialogId=u,this.datastoreTable=new l("image_clone",{select:!0,selectOptions:{filter_fn:function(t){return 0==t.TYPE}}}),i.call(this)}function a(){return r({dialogId:this.dialogId,datastoreTableSelectHTML:this.datastoreTable.dataTableHTML})}function n(t){var e=this;return e.datastoreTable.initialize(),$("#image_clone_advanced_toggle",t).click(function(){return $("#image_clone_advanced",t).toggle(),!1}),$("#"+u+"Form",t).submit(function(){var t=$('input[name="image_clone_name"]',this).val(),a=o.getDataTable(p).elements();t&&a.length||c.notifyError("A name or prefix is needed!");var n={},s=e.datastoreTable.retrieveResourceTableSelect();if(s&&(n.target_ds=s),a.length>1)for(var i=0;i<a.length;i++)n.name=t+d.getName(a[i]),o.runAction("Image.clone",a[i],n);else n.name=t,o.runAction("Image.clone",a[0],n);return o.getDialog(u).hide(),o.getDialog(u).reset(),setTimeout(function(){o.runAction("Image.refresh")},1500),!1}),!1}function s(t){var e=o.getDataTable(p).elements();return e.length>1?($(".clone_one",t).hide(),$(".clone_several",t).show(),$('input[name="image_clone_name"]',t).val("Copy of ")):($(".clone_one",t).show(),$(".clone_several",t).hide(),$('input[name="image_clone_name"]',t).val("Copy of "+d.getName(e[0]))),$("#image_clone_advanced",t).hide(),this.datastoreTable.resetResourceTableSelect(),$("input[name='image_clone_name']",t).focus(),!1}var i=t("utils/dialogs/dialog"),r=t("hbs!./clone/html"),o=t("sunstone"),l=t("tabs/datastores-tab/datatable"),c=t("utils/notifier"),d=t("opennebula/image"),u=t("./clone/dialogId"),p=t("tabs/images-tab/tabId");return e.DIALOG_ID=u,e.prototype=Object.create(i.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=s,e.prototype.setup=n,e}),define("hbs!tabs/images-tab/panels/info/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({1:function(){return'              <a id="div_edit_persistency_link" class="edit_e" href="#"> <i class="fa fa-pencil-square-o right"/></a>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,c="function",d='<div class="row">\n  <div class="large-6 columns">\n    <table class="dataTable extended_table">\n      <thead>\n        <tr>\n          <th colspan="3">'+o((e.tr||t&&t.tr||r).call(t,"Information",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"ID",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td" colspan="2">'+o(l(null!=(s=null!=t?t.element:t)?s.ID:s,t))+"</td>\n        </tr>\n        ";return i=null!=(i=e.renameTrHTML||(null!=t?t.renameTrHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"renameTrHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+='\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Datastore",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s.DATASTORE:s,t))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Register time",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o((i=null!=(i=e.prettyRegTime||(null!=t?t.prettyRegTime:t))?i:r,typeof i===c?i.call(t,{name:"prettyRegTime",hash:{},data:n}):i))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Type",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td_type">'+o((i=null!=(i=e.typeStr||(null!=t?t.typeStr:t))?i:r,typeof i===c?i.call(t,{name:"typeStr",hash:{},data:n}):i))+'</td>\n          <td>\n            <div id="div_edit_chg_type">\n              <a id="div_edit_chg_type_link" class="edit_e" href="#"> <i class="fa fa-pencil-square-o right"/></a>\n            </div>\n          </td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Persistent",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td_persistency">'+o((i=null!=(i=e.persistentStr||(null!=t?t.persistentStr:t))?i:r,typeof i===c?i.call(t,{name:"persistentStr",hash:{},data:n}):i))+'</td>\n          <td>\n            <div id="div_edit_persistency">\n',s=e["if"].call(t,null!=t?t.persistentActionEnabled:t,{name:"if",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(d+=s),d+='            </div>\n          </td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Filesystem type",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o((i=null!=(i=e.fsTypeStr||(null!=t?t.fsTypeStr:t))?i:r,typeof i===c?i.call(t,{name:"fsTypeStr",hash:{},data:n}):i))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Size",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o((i=null!=(i=e.sizeStr||(null!=t?t.sizeStr:t))?i:r,typeof i===c?i.call(t,{name:"sizeStr",hash:{},data:n}):i))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"State",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o((i=null!=(i=e.stateStr||(null!=t?t.stateStr:t))?i:r,typeof i===c?i.call(t,{name:"stateStr",hash:{},data:n}):i))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Running VMS",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s.RUNNING_VMS:s,t))+'</td>\n          <td></td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <div class="large-6 columns">',i=null!=(i=e.permissionsTableHTML||(null!=t?t.permissionsTableHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"permissionsTableHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+='</div>\n</div>\n<div class="row">\n  <div class="large-9 columns">',i=null!=(i=e.templateTableHTML||(null!=t?t.templateTableHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"templateTableHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+"</div>\n</div>"},useData:!0});return e.registerPartial("tabs/images-tab/panels/info/html",a),a}),define("tabs/images-tab/panels/info/panelId",["require"],function(){return"image_info_tab"}),define("tabs/images-tab/panels/info",["require","utils/locale","utils/humanize","utils/panel/rename-tr","utils/panel/template-table","utils/panel/permissions-table","opennebula/image","sunstone-config","sunstone","hbs!./info/html","../tabId","./info/panelId"],function(t){function e(t){return this.title=s.tr("Info"),this.icon="fa-info-circle",this.element=t[m.toUpperCase()],this}function a(){var t=r.html(m,this.element.NAME),e=o.html(this.element.TEMPLATE,m,s.tr("Attributes")),a=l.html(h,m,this.element),n=s.tr(c.stateStr(this.element.STATE)),u=i.prettyTime(this.element.REGTIME),f=void 0!=this.element.FS_TYPE?this.element.FS_TYPE:"-",_=i.sizeFromMB(this.element.SIZE),b=s.tr(parseInt(this.element.PERSISTENT)?"yes":"no"),v=s.tr(c.typeStr(this.element.TYPE));return p({element:this.element,renameTrHTML:t,templateTableHTML:e,permissionsTableHTML:a,stateStr:n,prettyRegTime:u,fsTypeStr:f,persistentActionEnabled:d.isTabActionEnabled("images-tab","Image.persistent"),persistentStr:b,typeStr:v,sizeStr:_})}function n(t){r.setup(m,this.element.ID,t),o.setup(this.element.TEMPLATE,m,this.element.ID,t),l.setup(h,m,this.element,t);var e=this;return t.off("click","#div_edit_chg_type_link"),t.on("click","#div_edit_chg_type_link",function(){$(".value_td_type",t).html('<select id="chg_type_select">                      <option value="OS">OS</option>                      <option value="CDROM">CDROM</option>                      <option value="DATABLOCK">DATABLOCK</option>                  </select>'),$("#chg_type_select",t).val(c.typeStr(e.element.TYPE))}),t.off("change","#chg_type_select"),t.on("change","#chg_type_select",function(){var t=$(this).val();u.runAction("Image.chtype",e.element.ID,t)}),t.off("click","#div_edit_persistency"),t.on("click","#div_edit_persistency",function(){$(".value_td_persistency",t).html('<select id="persistency_select">                      <option value="yes">'+s.tr("yes")+'</option>                      <option value="no">'+s.tr("no")+"</option>                  </select>"),$("#persistency_select",t).val(parseInt(e.element.PERSISTENT)?"yes":"no")}),t.off("change","#persistency_select"),t.on("change","#persistency_select",function(){var t=$(this).val();"yes"==t?u.runAction("Image.persistent",[e.element.ID]):u.runAction("Image.nonpersistent",[e.element.ID])}),!1}var s=t("utils/locale"),i=t("utils/humanize"),r=t("utils/panel/rename-tr"),o=t("utils/panel/template-table"),l=t("utils/panel/permissions-table"),c=t("opennebula/image"),d=t("sunstone-config"),u=t("sunstone"),p=t("hbs!./info/html"),h=t("../tabId"),f=t("./info/panelId"),m="Image";return e.PANEL_ID=f,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/images-tab/panels/vms/panelId",["require"],function(){return"image_vms_tab"}),define("tabs/images-tab/panels/vms",["require","utils/locale","tabs/vms-tab/datatable","./vms/panelId"],function(t){function e(t){return this.title=s.tr("VMs"),this.icon="fa-cloud",this.element=t[l],this}function a(){var t=[];void 0!=this.element.VMS.ID&&(t=this.element.VMS.ID,$.isArray(t)||(t=[t]));var e={info:!0,select:!0,selectOptions:{read_only:!0,fixed_ids:t}};return this.vmsTable=new i(o,e),this.vmsTable.dataTableHTML}function n(){return this.vmsTable.initialize(),this.vmsTable.refreshResourceTableSelect(),!1}var s=t("utils/locale"),i=t("tabs/vms-tab/datatable"),r=t("./vms/panelId"),o=r+"VMsTable",l="IMAGE";return e.PANEL_ID=r,e.prototype.html=a,e.prototype.setup=n,e}),function(){"use strict";var t=function(e){function a(t,e){var a=this;a.opts={},a.getOpt=t.getOpt,a._prevProgress=0,a.resumableObj=t,a.file=e,a.fileName=e.fileName||e.name,a.size=e.size,a.relativePath=e.webkitRelativePath||e.relativePath||a.fileName,a.uniqueIdentifier=i.generateUniqueIdentifier(e),a._pause=!1,a.container="";var s=!1,r=function(t,e){switch(t){case"progress":a.resumableObj.fire("fileProgress",a);break;case"error":a.abort(),s=!0,a.chunks=[],a.resumableObj.fire("fileError",a,e);break;case"success":if(s)return;a.resumableObj.fire("fileProgress",a),a.isComplete()&&a.resumableObj.fire("fileSuccess",a,e);break;case"retry":a.resumableObj.fire("fileRetry",a)}};return a.chunks=[],a.abort=function(){var t=0;i.each(a.chunks,function(e){"uploading"==e.status()&&(e.abort(),t++)}),t>0&&a.resumableObj.fire("fileProgress",a)},a.cancel=function(){var t=a.chunks;a.chunks=[],i.each(t,function(t){"uploading"==t.status()&&(t.abort(),a.resumableObj.uploadNextChunk())}),a.resumableObj.removeFile(a),a.resumableObj.fire("fileProgress",a)},a.retry=function(){a.bootstrap();var t=!1;a.resumableObj.on("chunkingComplete",function(){t||a.resumableObj.upload(),t=!0})},a.bootstrap=function(){a.abort(),s=!1,a.chunks=[],a._prevProgress=0;for(var t=a.getOpt("forceChunkSize")?Math.ceil:Math.floor,e=Math.max(t(a.file.size/a.getOpt("chunkSize")),1),i=0;e>i;i++)!function(t){window.setTimeout(function(){a.chunks.push(new n(a.resumableObj,a,t,r)),a.resumableObj.fire("chunkingProgress",a,t/e)},0)}(i);window.setTimeout(function(){a.resumableObj.fire("chunkingComplete",a)},0)},a.progress=function(){if(s)return 1;var t=0,e=!1;return i.each(a.chunks,function(a){"error"==a.status()&&(e=!0),t+=a.progress(!0)}),t=e?1:t>.99999?1:t,t=Math.max(a._prevProgress,t),a._prevProgress=t,t},a.isUploading=function(){var t=!1;return i.each(a.chunks,function(e){return"uploading"==e.status()?(t=!0,!1):void 0}),t},a.isComplete=function(){var t=!1;return i.each(a.chunks,function(e){var a=e.status();return"pending"==a||"uploading"==a||1===e.preprocessState?(t=!0,!1):void 0}),!t},a.pause=function(t){a._pause="undefined"==typeof t?a._pause?!1:!0:t},a.isPaused=function(){return a._pause},a.resumableObj.fire("chunkingStart",a),a.bootstrap(),this}function n(t,e,a,n){var s=this;s.opts={},s.getOpt=t.getOpt,s.resumableObj=t,s.fileObj=e,s.fileObjSize=e.size,s.fileObjType=e.file.type,s.offset=a,s.callback=n,s.lastProgressCallback=new Date,s.tested=!1,s.retries=0,s.pendingRetry=!1,s.preprocessState=0;var r=s.getOpt("chunkSize");return s.loaded=0,s.startByte=s.offset*r,s.endByte=Math.min(s.fileObjSize,(s.offset+1)*r),s.fileObjSize-s.endByte<r&&!s.getOpt("forceChunkSize")&&(s.endByte=s.fileObjSize),s.xhr=null,s.test=function(){s.xhr=new XMLHttpRequest;var t=function(){s.tested=!0;var t=s.status();"success"==t?(s.callback(t,s.message()),s.resumableObj.uploadNextChunk()):s.send()};s.xhr.addEventListener("load",t,!1),s.xhr.addEventListener("error",t,!1),s.xhr.addEventListener("timeout",t,!1);var e=[],a=s.getOpt("query");"function"==typeof a&&(a=a(s.fileObj,s)),i.each(a,function(t,a){e.push([encodeURIComponent(t),encodeURIComponent(a)].join("="))}),e.push(["resumableChunkNumber",encodeURIComponent(s.offset+1)].join("=")),e.push(["resumableChunkSize",encodeURIComponent(s.getOpt("chunkSize"))].join("=")),e.push(["resumableCurrentChunkSize",encodeURIComponent(s.endByte-s.startByte)].join("=")),e.push(["resumableTotalSize",encodeURIComponent(s.fileObjSize)].join("=")),e.push(["resumableType",encodeURIComponent(s.fileObjType)].join("=")),e.push(["resumableIdentifier",encodeURIComponent(s.fileObj.uniqueIdentifier)].join("=")),e.push(["resumableFilename",encodeURIComponent(s.fileObj.fileName)].join("=")),e.push(["resumableRelativePath",encodeURIComponent(s.fileObj.relativePath)].join("=")),e.push(["resumableTotalChunks",encodeURIComponent(s.fileObj.chunks.length)].join("=")),s.xhr.open("GET",i.getTarget(e)),s.xhr.timeout=s.getOpt("xhrTimeout"),s.xhr.withCredentials=s.getOpt("withCredentials"),i.each(s.getOpt("headers"),function(t,e){s.xhr.setRequestHeader(t,e)}),s.xhr.send(null)},s.preprocessFinished=function(){s.preprocessState=2,s.send()},s.send=function(){var t=s.getOpt("preprocess");if("function"==typeof t)switch(s.preprocessState){case 0:return t(s),void(s.preprocessState=1);case 1:return;case 2:}if(s.getOpt("testChunks")&&!s.tested)return void s.test();s.xhr=new XMLHttpRequest,s.xhr.upload.addEventListener("progress",function(t){new Date-s.lastProgressCallback>1e3*s.getOpt("throttleProgressCallbacks")&&(s.callback("progress"),s.lastProgressCallback=new Date),s.loaded=t.loaded||0},!1),s.loaded=0,s.pendingRetry=!1,s.callback("progress");var e=function(){var t=s.status();if("success"==t||"error"==t)s.callback(t,s.message()),s.resumableObj.uploadNextChunk();else{s.callback("retry",s.message()),s.abort(),s.retries++;var e=s.getOpt("chunkRetryInterval");void 0!==e?(s.pendingRetry=!0,setTimeout(s.send,e)):s.send()}};s.xhr.addEventListener("load",e,!1),s.xhr.addEventListener("error",e,!1),s.xhr.addEventListener("timeout",e,!1);var a={resumableChunkNumber:s.offset+1,resumableChunkSize:s.getOpt("chunkSize"),resumableCurrentChunkSize:s.endByte-s.startByte,resumableTotalSize:s.fileObjSize,resumableType:s.fileObjType,resumableIdentifier:s.fileObj.uniqueIdentifier,resumableFilename:s.fileObj.fileName,resumableRelativePath:s.fileObj.relativePath,resumableTotalChunks:s.fileObj.chunks.length},n=s.getOpt("query");"function"==typeof n&&(n=n(s.fileObj,s)),i.each(n,function(t,e){a[t]=e});var r=s.fileObj.file.slice?"slice":s.fileObj.file.mozSlice?"mozSlice":s.fileObj.file.webkitSlice?"webkitSlice":"slice",o=s.fileObj.file[r](s.startByte,s.endByte),l=null,c=s.getOpt("target");if("octet"===s.getOpt("method")){l=o;var d=[];i.each(a,function(t,e){d.push([encodeURIComponent(t),encodeURIComponent(e)].join("="))}),c=i.getTarget(d)}else l=new FormData,i.each(a,function(t,e){l.append(t,e)}),l.append(s.getOpt("fileParameterName"),o);s.xhr.open("POST",c),s.xhr.timeout=s.getOpt("xhrTimeout"),s.xhr.withCredentials=s.getOpt("withCredentials"),i.each(s.getOpt("headers"),function(t,e){s.xhr.setRequestHeader(t,e)}),s.xhr.send(l)},s.abort=function(){s.xhr&&s.xhr.abort(),s.xhr=null},s.status=function(){return s.pendingRetry?"uploading":s.xhr?s.xhr.readyState<4?"uploading":200==s.xhr.status?"success":i.contains(s.getOpt("permanentErrors"),s.xhr.status)||s.retries>=s.getOpt("maxChunkRetries")?"error":(s.abort(),"pending"):"pending"},s.message=function(){return s.xhr?s.xhr.responseText:""},s.progress=function(t){"undefined"==typeof t&&(t=!1);var e=t?(s.endByte-s.startByte)/s.fileObjSize:1;if(s.pendingRetry)return 0;var a=s.status();switch(a){case"success":case"error":return 1*e;case"pending":return 0*e;default:return s.loaded/(s.endByte-s.startByte)*e}},this}if(!(this instanceof t))return new t(e);if(this.version=1,this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice&&!Blob.prototype.slice),!this.support)return!1;var s=this;s.files=[],s.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,fileParameterName:"file",throttleProgressCallbacks:.5,query:{},headers:{},preprocess:null,method:"multipart",prioritizeFirstAndLastChunk:!1,target:"/",testChunks:!0,generateUniqueIdentifier:null,maxChunkRetries:void 0,chunkRetryInterval:void 0,permanentErrors:[400,404,415,500,501],maxFiles:void 0,withCredentials:!1,xhrTimeout:0,maxFilesErrorCallback:function(){var t=s.getOpt("maxFiles");alert("Please upload "+t+" file"+(1===t?"":"s")+" at a time.")},minFileSize:1,minFileSizeErrorCallback:function(t){alert(t.fileName||t.name+" is too small, please upload files larger than "+i.formatSize(s.getOpt("minFileSize"))+".")},maxFileSize:void 0,maxFileSizeErrorCallback:function(t){alert(t.fileName||t.name+" is too large, please upload files less than "+i.formatSize(s.getOpt("maxFileSize"))+".")},fileType:[],fileTypeErrorCallback:function(t){alert(t.fileName||t.name+" has type not allowed, please upload files of type "+s.getOpt("fileType")+".")}},s.opts=e||{},s.getOpt=function(e){var s=this;if(e instanceof Array){var r={};return i.each(e,function(t){r[t]=s.getOpt(t)}),r}if(s instanceof n){if("undefined"!=typeof s.opts[e])return s.opts[e];s=s.fileObj}if(s instanceof a){if("undefined"!=typeof s.opts[e])return s.opts[e];s=s.resumableObj}return s instanceof t?"undefined"!=typeof s.opts[e]?s.opts[e]:s.defaults[e]:void 0},s.events=[],s.on=function(t,e){s.events.push(t.toLowerCase(),e)},s.fire=function(){for(var t=[],e=0;e<arguments.length;e++)t.push(arguments[e]);for(var a=t[0].toLowerCase(),e=0;e<=s.events.length;e+=2)s.events[e]==a&&s.events[e+1].apply(s,t.slice(1)),"catchall"==s.events[e]&&s.events[e+1].apply(null,t);"fileerror"==a&&s.fire("error",t[2],t[1]),"fileprogress"==a&&s.fire("progress")};var i={stopEvent:function(t){t.stopPropagation(),t.preventDefault()},each:function(t,e){if("undefined"!=typeof t.length){for(var a=0;a<t.length;a++)if(e(t[a])===!1)return}else for(a in t)if(e(a,t[a])===!1)return},generateUniqueIdentifier:function(t){var e=s.getOpt("generateUniqueIdentifier");if("function"==typeof e)return e(t);var a=t.webkitRelativePath||t.fileName||t.name,n=t.size;return n+"-"+a.replace(/[^0-9a-zA-Z_-]/gim,"")},contains:function(t,e){var a=!1;return i.each(t,function(t){return t==e?(a=!0,!1):!0}),a},formatSize:function(t){return 1024>t?t+" bytes":1048576>t?(t/1024).toFixed(0)+" KB":1073741824>t?(t/1024/1024).toFixed(1)+" MB":(t/1024/1024/1024).toFixed(1)+" GB"},getTarget:function(t){var e=s.getOpt("target");return e+=e.indexOf("?")<0?"?":"&",e+t.join("&")}},r=function(t){i.stopEvent(t),t.dataTransfer&&t.dataTransfer.items?l(t.dataTransfer.items,t):t.dataTransfer&&t.dataTransfer.files&&l(t.dataTransfer.files,t)},o=function(t){t.preventDefault()},l=function(t,e,a,n){a||(a={total:0,files:[],event:e}),c(t.length,a);for(var s=0;s<t.length;s++){var i,r,o=t[s];if(o.isFile||o.isDirectory)i=o;else if(o.getAsEntry)i=o.getAsEntry();else{if(!o.webkitGetAsEntry){if("function"==typeof o.getAsFile){d(o.getAsFile(),a,n);continue}if(File&&o instanceof File){d(o,a,n);continue}c(-1,a);continue}i=o.webkitGetAsEntry()}if(i){if(i.isFile)i.file(function(t){d(t,a,n)},function(t){console.warn(t)});else if(i.isDirectory){r=i.createReader();var u=function(t){return function(n){l(n,e,a,t),c(-1,a)}};r.readEntries(u(i.fullPath),function(t){console.warn(t)})}}else c(-1,a)}},c=function(t,e){e.total+=t,e.files.length===e.total&&u(e.files,e.event)},d=function(t,e,a){a&&(t.relativePath=a+"/"+t.name),e.files.push(t),e.files.length===e.total&&u(e.files,e.event)},u=function(t,e){var n=0,r=s.getOpt(["maxFiles","minFileSize","maxFileSize","maxFilesErrorCallback","minFileSizeErrorCallback","maxFileSizeErrorCallback","fileType","fileTypeErrorCallback"]);if("undefined"!=typeof r.maxFiles&&r.maxFiles<t.length+s.files.length){if(1!==r.maxFiles||1!==s.files.length||1!==t.length)return r.maxFilesErrorCallback(t,n++),!1;
s.removeFile(s.files[0])}var o=[];i.each(t,function(t){var l=t.name.split("."),c=l[l.length-1].toLowerCase();return r.fileType.length>0&&!i.contains(r.fileType,c)?(r.fileTypeErrorCallback(t,n++),!1):"undefined"!=typeof r.minFileSize&&t.size<r.minFileSize?(r.minFileSizeErrorCallback(t,n++),!1):"undefined"!=typeof r.maxFileSize&&t.size>r.maxFileSize?(r.maxFileSizeErrorCallback(t,n++),!1):void(s.getFromUniqueIdentifier(i.generateUniqueIdentifier(t))||!function(){var n=new a(s,t);window.setTimeout(function(){s.files.push(n),o.push(n),n.container="undefined"!=typeof e?e.srcElement:null,s.fire("fileAdded",n,e)},0)}())}),window.setTimeout(function(){s.fire("filesAdded",o)},0)};return s.uploadNextChunk=function(){var t=!1;if(s.getOpt("prioritizeFirstAndLastChunk")&&(i.each(s.files,function(e){return e.chunks.length&&"pending"==e.chunks[0].status()&&0===e.chunks[0].preprocessState?(e.chunks[0].send(),t=!0,!1):e.chunks.length>1&&"pending"==e.chunks[e.chunks.length-1].status()&&0===e.chunks[e.chunks.length-1].preprocessState?(e.chunks[e.chunks.length-1].send(),t=!0,!1):void 0}),t))return!0;if(i.each(s.files,function(e){return e.isPaused()===!1&&i.each(e.chunks,function(e){return"pending"==e.status()&&0===e.preprocessState?(e.send(),t=!0,!1):void 0}),t?!1:void 0}),t)return!0;var e=!1;return i.each(s.files,function(t){return t.isComplete()?void 0:(e=!0,!1)}),e||s.fire("complete"),!1},s.assignBrowse=function(t,e){"undefined"==typeof t.length&&(t=[t]),i.each(t,function(t){var a;"INPUT"===t.tagName&&"file"===t.type?a=t:(a=document.createElement("input"),a.setAttribute("type","file"),a.style.display="none",t.addEventListener("click",function(){a.style.opacity=0,a.style.display="block",a.focus(),a.click(),a.style.display="none"},!1),t.appendChild(a));var n=s.getOpt("maxFiles");"undefined"==typeof n||1!=n?a.setAttribute("multiple","multiple"):a.removeAttribute("multiple"),e?a.setAttribute("webkitdirectory","webkitdirectory"):a.removeAttribute("webkitdirectory"),a.addEventListener("change",function(t){u(t.target.files,t),t.target.value=""},!1)})},s.assignDrop=function(t){"undefined"==typeof t.length&&(t=[t]),i.each(t,function(t){t.addEventListener("dragover",o,!1),t.addEventListener("drop",r,!1)})},s.unAssignDrop=function(t){"undefined"==typeof t.length&&(t=[t]),i.each(t,function(t){t.removeEventListener("dragover",o),t.removeEventListener("drop",r)})},s.isUploading=function(){var t=!1;return i.each(s.files,function(e){return e.isUploading()?(t=!0,!1):void 0}),t},s.upload=function(){if(!s.isUploading()){s.fire("uploadStart");for(var t=1;t<=s.getOpt("simultaneousUploads");t++)s.uploadNextChunk()}},s.pause=function(){i.each(s.files,function(t){t.abort()}),s.fire("pause")},s.cancel=function(){for(var t=s.files.length-1;t>=0;t--)s.files[t].cancel();s.fire("cancel")},s.progress=function(){var t=0,e=0;return i.each(s.files,function(a){t+=a.progress()*a.size,e+=a.size}),e>0?t/e:0},s.addFile=function(t,e){u([t],e)},s.removeFile=function(t){for(var e=s.files.length-1;e>=0;e--)s.files[e]===t&&s.files.splice(e,1)},s.getFromUniqueIdentifier=function(t){var e=!1;return i.each(s.files,function(a){a.uniqueIdentifier==t&&(e=a)}),e},s.getSize=function(){var t=0;return i.each(s.files,function(e){t+=e.size}),t},this};"undefined"!=typeof module?module.exports=t:"function"==typeof define&&define.amd?define("resumable",[],function(){return t}):window.Resumable=t}(),define("utils/browser-info",["require"],function(){function t(){var t=-1;if("Microsoft Internet Explorer"==navigator.appName){var e=navigator.userAgent,a=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=a.exec(e)&&(t=parseFloat(RegExp.$1))}return t}return{getInternetExplorerVersion:t}}),define("hbs!tabs/images-tab/form-panels/create/wizard",["hbs","hbs/handlebars","templates/helpers/tr","templates/helpers/isTabActionEnabled","templates/helpers/advancedSection"],function(t,e){var a=e.template({1:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'    <div class="row">\n      <div class="large-4 columns">\n        <input type="checkbox" id="img_persistent" name="img_persistent" value="YES" />\n        <label for="img_persistent">\n          '+i((e.tr||t&&t.tr||s).call(t,"Persistent",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">'+i((e.tr||t&&t.tr||s).call(t,"Persistence of the image",{name:"tr",hash:{},data:n}))+"</span>\n        </label>\n      </div>\n    </div>\n"},3:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l="function",c='    <div class="row">\n      <div class="medium-6 columns">\n        <div class="row">\n          <div class="large-12 columns">\n            <label for="img_dev_prefix">\n              '+o((e.tr||t&&t.tr||r).call(t,"Device prefix",{name:"tr",hash:{},data:n}))+'\n              <span class="tip">\n                '+o((e.tr||t&&t.tr||r).call(t,"Prefix for the emulated device this image will be mounted at. For instance, hd, sd. If omitted, the default value is the one defined in oned.conf (installation default is hd).",{name:"tr",hash:{},data:n}))+'\n              </span>\n            </label>\n            <input type="text" name="img_dev_prefix" id="img_dev_prefix" />\n          </div>\n        </div>\n        <div class="row">\n          <div class="large-12 columns">\n            <label for="img_driver">\n              '+o((e.tr||t&&t.tr||r).call(t,"Driver",{name:"tr",hash:{},data:n}))+'\n              <span class="tip">\n                '+o((e.tr||t&&t.tr||r).call(t,"Specific image mapping driver. KVM: raw, qcow2. XEN: tap:aio, file:",{name:"tr",hash:{},data:n}))+'\n              </span>\n            </label>\n            <input type="text" name="img_driver" id="img_driver" />\n          </div>\n        </div>\n      </div>\n      <div class="medium-6 columns">\n        <div class="row">\n          <div class="large-12 columns">\n            <label for="img_target">\n              '+o((e.tr||t&&t.tr||r).call(t,"Target",{name:"tr",hash:{},data:n}))+'\n              <span class="tip">\n                '+o((e.tr||t&&t.tr||r).call(t,"Target on which the image will be mounted at. For example: hda, sdb...",{name:"tr",hash:{},data:n}))+'\n              </span>\n            </label>\n            <input type="text" name="img_target" id="img_target" />\n          </div>\n        </div>\n      </div>\n    </div>\n    <br>\n    <div class="row">\n      <div class="large-12 columns">\n        <span>'+o((e.tr||t&&t.tr||r).call(t,"Custom attributes",{name:"tr",hash:{},data:n}))+"</span>\n        <br>\n        <br>\n      </div>\n    </div>\n    ";return i=null!=(i=e.customTagsHTML||(null!=t?t.customTagsHTML:t))?i:r,s=typeof i===l?i.call(t,{name:"customTagsHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<form data-abide="ajax" id="'+l((i=null!=(i=e.formPanelId||(null!=t?t.formPanelId:t))?i:o,typeof i===r?i.call(t,{name:"formPanelId",hash:{},data:n}):i))+'Wizard" class="custom creation">\n  <div class="row">\n    <div class="medium-4 columns">\n      <label for="img_name">\n        '+l((e.tr||t&&t.tr||o).call(t,"Name",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+l((e.tr||t&&t.tr||o).call(t,"Name that the Image will get. Every image must have a unique name.",{name:"tr",hash:{},data:n}))+'\n        </span>\n      </label>\n      <input required type="text" name="img_name" id="img_name" />\n    </div>\n    <div class="medium-8 columns">\n      <label for="img_desc">\n        '+l((e.tr||t&&t.tr||o).call(t,"Description",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+l((e.tr||t&&t.tr||o).call(t,"Human readable description of the image for other users.",{name:"tr",hash:{},data:n}))+'\n        </span>\n      </label>\n      <textarea name="img_desc" id="img_desc" rows="4"></textarea>\n    </div>\n  </div>\n  <div class="row">\n    <div class="large-4 columns">\n      <label for="img_type">\n        '+l((e.tr||t&&t.tr||o).call(t,"Type",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+l((e.tr||t&&t.tr||o).call(t,"Type of the image.",{name:"tr",hash:{},data:n}))+"\n          <br/>\n          <br/>\n          "+l((e.tr||t&&t.tr||o).call(t,"OS images contain a working operative system.",{name:"tr",hash:{},data:n}))+"\n          <br/>\n          <br/>\n          "+l((e.tr||t&&t.tr||o).call(t,"CDROM images are readonly data.",{name:"tr",hash:{},data:n}))+"\n          <br/>\n          <br/>\n          "+l((e.tr||t&&t.tr||o).call(t,"DATABLOCK images are a storage for data. They can be created from previous existing data, or as an empty drive.",{name:"tr",hash:{},data:n}))+'\n        </span>\n      </label>\n      <select name="img_type" id="img_type">\n        <option value="OS">'+l((e.tr||t&&t.tr||o).call(t,"OS",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="CDROM">'+l((e.tr||t&&t.tr||o).call(t,"CDROM",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="DATABLOCK">'+l((e.tr||t&&t.tr||o).call(t,"DATABLOCK",{name:"tr",hash:{},data:n}))+'</option>\n      </select>\n    </div>\n    <div class="large-8 columns">\n      <label for="img_datastore">\n        '+l((e.tr||t&&t.tr||o).call(t,"Datastore",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Select the datastore for this image",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n      <div id="img_datastore" name="img_datastore"></div>\n    </div>\n  </div>\n';return s=(e.isTabActionEnabled||t&&t.isTabActionEnabled||o).call(t,"images-tab","Image.persistent",{name:"isTabActionEnabled",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+="  <br>\n  <fieldset>\n    <legend>"+l((e.tr||t&&t.tr||o).call(t,"Image location",{name:"tr",hash:{},data:n}))+':</legend>\n    <div class="row" id="src_path_select">\n      <div class="large-12 columns text-center">\n        <input type="radio" name="src_path" id="path_image" value="path">\n        <label for="path_image">'+l((e.tr||t&&t.tr||o).call(t,"Provide a path",{name:"tr",hash:{},data:n}))+'</label>\n        <input type="radio" name="src_path" id="upload_image" value="upload">\n        <label for="upload_image">'+l((e.tr||t&&t.tr||o).call(t,"Upload",{name:"tr",hash:{},data:n}))+'</label>\n        <input type="radio" name="src_path" id="datablock_img" value="datablock" disabled>\n        <label for="datablock_img">'+l((e.tr||t&&t.tr||o).call(t,"Empty datablock",{name:"tr",hash:{},data:n}))+'</label>\n      </div>\n    </div>\n    <br>\n    <div class="row">\n      <div class="large-12 columns">\n        <label for="img_path">\n          '+l((e.tr||t&&t.tr||o).call(t,"Path",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+l((e.tr||t&&t.tr||o).call(t,"Path to the original file that will be copied to the image repository. If not specified for a DATABLOCK type image, an empty image will be created.",{name:"tr",hash:{},data:n}))+'\n          </span>\n        </label>\n        <input type="text" name="img_path" id="img_path" />\n      </div>\n    </div>\n    <div class="row">\n      <div id="file-uploader" class="large-12 columns text-center">\n        <label id="file-uploader-label" for="file-uploader-input"></label>\n        <input id="file-uploader-input" type="file"/>\n      </div>\n    </div>\n    <div class="img_size row">\n      <div class="large-6 columns">\n        <label for="img_size">\n          '+l((e.tr||t&&t.tr||o).call(t,"Size",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Size of the datablock in MB.",{name:"tr",hash:{},data:n}))+'</span>\n        </label>\n        <input type="text" name="img_size" id="img_size" />\n      </div>\n      <div class="large-6 columns">\n        <label for="img_fstype">\n          '+l((e.tr||t&&t.tr||o).call(t,"FS type",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+l((e.tr||t&&t.tr||o).call(t,"Type of file system to be built.",{name:"tr",hash:{},data:n}))+"\n            <br>\n            <br>\n            "+l((e.tr||t&&t.tr||o).call(t,"Plain. When the disk image is used directly by the hypervisor we can format the image, and so it is ready to be used by the guest OS. Values: ext2, ext3, ext4, ntfs, reiserfs, jfs, swap. Any other fs supported by mkfs will work if no special option is needed.",{name:"tr",hash:{},data:n}))+"\n            <br>\n            <br>\n            "+l((e.tr||t&&t.tr||o).call(t,"Formatted. The disk image is stored in a hypervisor specific format VMDK or Qcow2. Then we cannot really make a filesystem on the image, just create the device and let the guest OS format the disk. Use raw to not to format the new image. Values: raw, qcow2, vmdk_*.",{name:"tr",hash:{},data:n}))+'\n          </span>\n        </label>\n        <input type="text" name="img_fstype" id="img_fstype" />\n      </div>\n    </div>\n  </fieldset>\n',s=(e.advancedSection||t&&t.advancedSection||o).call(t,(e.tr||t&&t.tr||o).call(t,"Advanced Options",{name:"tr",hash:{},data:n}),{name:"advancedSection",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+"</form>"},useData:!0});return e.registerPartial("tabs/images-tab/form-panels/create/wizard",a),a}),define("hbs!tabs/images-tab/form-panels/create/advanced",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<form data-abide="ajax" id="'+o((s=null!=(s=e.formPanelId||(null!=t?t.formPanelId:t))?s:r,typeof s===i?s.call(t,{name:"formPanelId",hash:{},data:n}):s))+'Advanced" class="custom creation">\n  <div class="row">\n    <div class="columns large-12">\n      <label for="img_datastores_raw">'+o((e.tr||t&&t.tr||r).call(t,"Datastore",{name:"tr",hash:{},data:n}))+':</label>\n      <div id="img_datastore_raw" name="img_datastore_raw"></div>\n    </div>\n  </div>\n  <div class="row">\n    <div class="large-12 columns">\n      <p>'+o((e.tr||t&&t.tr||r).call(t,"Write the Image template here",{name:"tr",hash:{},data:n}))+'</p>\n    </div>\n  </div>\n  <div class="row">\n    <div class="large-12 columns">\n      <textarea id="template" rows="15" required></textarea>\n    </div>\n  </div>\n</form>'},useData:!0});return e.registerPartial("tabs/images-tab/form-panels/create/advanced",a),a}),define("tabs/images-tab/form-panels/create",["require","utils/form-panels/form-panel","resumable","sunstone","opennebula/error","utils/notifier","utils/locale","utils/tips","utils/resource-select","utils/custom-tags-table","utils/browser-info","hbs!./create/wizard","hbs!./create/advanced","./create/formPanelId","../tabId"],function(t){function e(){this.formPanelId=y,this.tabId=w,this.actions={create:{title:h.tr("Create Image"),buttonText:h.tr("Create"),resetButton:!0}},l.call(this)}function a(){return v({formPanelId:this.formPanelId,customTagsHTML:_.html()})}function n(){return g({formPanelId:this.formPanelId})}function s(t){$("#img_name",t).focus();var e=$("#img_datastore .resource_list_select",t).val(),a=$("#img_datastore_raw .resource_list_select",t).val(),n=["TYPE","TYPE"],s=["1","2"];return m.insert("div#img_datastore",t,"Datastore",e,!1,null,n,s),m.insert("div#img_datastore_raw",t,"Datastore",a,!1,null,n,s),!1}function i(t){var e=this;if(f.setup(t),$("select#img_type",t).change(function(){var e=$(this).val();switch(e){case"DATABLOCK":$("#datablock_img",t).removeAttr("disabled");break;default:$("#datablock_img",t).attr("disabled","disabled"),$("#path_image",t).click()}}),$("#img_path,#img_fstype,#img_size,#file-uploader",t).closest(".row").hide(),$("input[name='src_path']",t).change(function(){var e=$(this).val();switch(e){case"path":$("#img_fstype,#img_size,#file-uploader",t).closest(".row").hide(),$("#img_path",t).closest(".row").show(),$("#img_path",t).attr("required",""),$("#img_size",t).removeAttr("required");break;case"datablock":$("#img_path,#file-uploader",t).closest(".row").hide(),$("#img_fstype,#img_size",t).closest(".row").show(),$("#img_path",t).removeAttr("required"),$("#img_size",t).attr("required","");break;case"upload":$("#img_path,#img_fstype,#img_size",t).closest(".row").hide(),$("#file-uploader",t).closest(".row").show(),$("#img_path",t).removeAttr("required"),$("#img_size",t).removeAttr("required")}}),$("#path_image",t).click(),_.setup(t),b.getInternetExplorerVersion()>-1)$("#upload_image").attr("disabled","disabled");else{e.uploader=new c({target:"upload_chunk",chunkSize:10485760,maxFiles:1,testChunks:!1,query:{csrftoken:""}}),e.uploader.assignBrowse($("#file-uploader-input",t));var a="",n=!1;e.uploader.on("fileAdded",function(e){a=e.fileName,n=a,$("#file-uploader-input",t).hide(),$("#file-uploader-label",t).html(e.fileName)}),e.uploader.on("uploadStart",function(){$("#upload_progress_bars").append('<div id="'+a+'progressBar" class="row" style="margin-bottom:10px">            <div id="'+a+'-info" class="large-2 columns dataTables_info">              '+h.tr("Uploading...")+'            </div>            <div class="large-10 columns">              <div id="upload_progress_container" class="progress nine radius" style="height:25px !important">                <span class="meter" style="width:0%"></span>              </div>              <div class="progress-text" style="margin-left:15px">'+a+"</div>            </div>          </div>")}),e.uploader.on("progress",function(){$("span.meter",$('div[id="'+a+'progressBar"]')).css("width",100*e.uploader.progress()+"%")})}return!1}function r(t){var e=this,a=!1,n=$("#img_datastore .resource_list_select",t).val();if(!n)return d.hideFormPanelLoading(w),p.notifyError(h.tr("Please select a datastore for this image")),!1;var s={},i=$("#img_name",t).val();s.NAME=i;var r=$("#img_desc",t).val();r.length&&(s.DESCRIPTION=r);var o=$("#img_type",t).val();s.TYPE=o,s.PERSISTENT=$("#img_persistent:checked",t).length?"YES":"NO";var l=$("#img_dev_prefix",t).val();l.length&&(s.DEV_PREFIX=l);var c=$("#img_driver",t).val();c.length&&(s.DRIVER=c);var f=$("#img_target",t).val();switch(f&&(s.TARGET=f),$("#src_path_select input:checked",t).val()){case"path":path=$("#img_path",t).val(),path&&(s.PATH=path);break;case"datablock":size=$("#img_size",t).val(),fstype=$("#img_fstype",t).val(),size&&(s.SIZE=size),fstype&&(s.FSTYPE=fstype);break;case"upload":a=!0}$.extend(s,_.retrieve(t));var m={image:s,ds_id:n};if(a){if(0==e.uploader.files.length)return d.hideFormPanelLoading(w),p.notifyError(h.tr("Please select a file to upload")),!1;d.resetFormPanel(e.tabId,e.formPanelId),d.hideFormPanel(e.tabId),e.uploader.on("fileSuccess",function(t){$('div[id="'+t.fileName+'-info"]').text(h.tr("Registering in OpenNebula")),$.ajax({url:"upload",type:"POST",data:{csrftoken:csrftoken,img:JSON.stringify(m),file:t.fileName,tempfile:t.uniqueIdentifier},success:function(){p.notifyMessage("Image uploaded correctly"),$('div[id="'+t.fileName+'progressBar"]').remove(),d.runAction("Image.refresh")},error:function(e){p.onError({},u(e)),$('div[id="'+t.fileName+'progressBar"]').remove()}})}),e.uploader.upload()}else d.runAction("Image.create",m);return!1}function o(t){var e=$("#template",t).val(),a=$("#img_datastore_raw .resource_list_select",t).val();if(!a)return p.notifyError(h.tr("Please select a datastore for this image")),!1;var n={image:{image_raw:e},ds_id:a};return d.runAction("Image.create",n),!1}var l=t("utils/form-panels/form-panel"),c=t("resumable"),d=t("sunstone"),u=t("opennebula/error"),p=t("utils/notifier"),h=t("utils/locale"),f=t("utils/tips"),m=t("utils/resource-select"),_=t("utils/custom-tags-table"),b=t("utils/browser-info"),v=t("hbs!./create/wizard"),g=t("hbs!./create/advanced"),y=t("./create/formPanelId"),w=t("../tabId");return e.FORM_PANEL_ID=y,e.prototype=Object.create(l.prototype),e.prototype.constructor=e,e.prototype.htmlWizard=a,e.prototype.htmlAdvanced=n,e.prototype.submitWizard=r,e.prototype.submitAdvanced=o,e.prototype.onShow=s,e.prototype.setup=i,e}),define("tabs/images-tab",["require","utils/locale","./images-tab/buttons","./images-tab/actions","./images-tab/datatable","./images-tab/tabId","./images-tab/dialogs/clone","./images-tab/panels/info","./images-tab/panels/vms","./images-tab/form-panels/create"],function(t){var e=t("utils/locale"),a=t("./images-tab/buttons"),n=t("./images-tab/actions"),s=t("./images-tab/datatable"),i=t("./images-tab/tabId"),r="dataTableImages",o=[t("./images-tab/dialogs/clone")],l=[t("./images-tab/panels/info"),t("./images-tab/panels/vms")],c=[t("./images-tab/form-panels/create")],d={tabId:i,title:e.tr("Images"),tabClass:"subTab",parentTab:"vresources-tab",listHeader:'<i class="fa fa-fw fa-upload"></i>&emsp;'+e.tr("Images"),infoHeader:'<i class="fa fa-fw fa-upload"></i>&emsp;'+e.tr("Image"),subheader:"",resource:"Image",content:'<div id="upload_progress_bars" class="large-12 columns"></div>',buttons:a,actions:n,dataTable:new s(r,{actions:!0,info:!0}),panels:l,formPanels:c,dialogs:o};return d}),define("tabs/files-tab/buttons",["require","utils/locale"],function(t){var e=t("utils/locale"),a={"File.refresh":{type:"action",layout:"refresh",alwaysActive:!0},"File.create_dialog":{type:"create_dialog",layout:"create"},"File.chown":{type:"confirm_with_select",text:e.tr("Change owner"),layout:"user_select",select:"User",tip:e.tr("Select the new owner")+":"},"File.chgrp":{type:"confirm_with_select",text:e.tr("Change group"),layout:"user_select",select:"Group",tip:e.tr("Select the new group")+":"},"File.enable":{type:"action",layout:"more_select",text:e.tr("Enable")},"File.disable":{type:"action",layout:"more_select",text:e.tr("Disable")},"File.delete":{type:"confirm",layout:"del",text:e.tr("Delete")}};return a}),define("tabs/files-tab/form-panels/create/formPanelId",["require"],function(){return"createFileForm"}),define("tabs/files-tab/actions",["require","sunstone","utils/notifier","utils/locale","opennebula/image","./tabId","./form-panels/create/formPanelId"],function(t){var e=t("sunstone"),a=t("utils/notifier"),n=t("utils/locale"),s=t("opennebula/image"),i="File",r="IMAGE",o=t("./tabId"),l=t("./form-panels/create/formPanelId"),c={"File.create":{type:"create",call:s.create,callback:function(t,s){e.resetFormPanel(o,l),e.hideFormPanel(o),e.getDataTable(o).addElement(t,s),a.notifyCustom(n.tr("File created")," ID: "+s[r].ID,!1)},error:function(t,n){e.hideFormPanelLoading(o),a.onError(t,n)}},"File.create_dialog":{type:"custom",call:function(){e.showFormPanel(o,l,"create")}},"File.list":{type:"list",call:s.list,callback:function(t,a){e.getDataTable(o).updateView(t,a)},error:a.onError},"File.show":{type:"single",call:s.show,callback:function(t,a){e.getDataTable(o).updateElement(t,a),e.rightInfoVisible($("#"+o))&&e.insertPanels(o,a)},error:a.onError},"File.refresh":{type:"custom",call:function(){var t=$("#"+o);e.rightInfoVisible(t)?e.runAction(i+".show",e.rightInfoResourceId(t)):(e.getDataTable(o).waitingNodes(),e.runAction(i+".list",{force:!0}))}},"File.update_template":{type:"single",call:s.update,callback:function(t){e.runAction(i+".show",t.request.data[0][0])},error:a.onError},"File.enable":{type:"multiple",call:s.enable,callback:function(t){e.runAction(i+".show",t.request.data[0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"File.disable":{type:"multiple",call:s.disable,callback:function(t){e.runAction(i+".show",t.request.data[0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"File.delete":{type:"multiple",call:s.del,callback:function(t,a){e.getDataTable(o).deleteElement(t,a)},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"File.chown":{type:"multiple",call:s.chown,callback:function(t){e.runAction(i+".show",t.request.data[0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"File.chgrp":{type:"multiple",call:s.chgrp,callback:function(t){e.runAction(i+".show",t.request.data[0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"File.chmod":{type:"single",call:s.chmod,callback:function(t){e.runAction(i+".show",t.request.data[0])},error:a.onError,notify:!0},"File.chtype":{type:"single",call:s.chtype,callback:function(t){e.runAction(i+".show",t.request.data[0][0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"File.rename":{type:"single",call:s.rename,callback:function(t){e.runAction(i+".show",t.request.data[0][0])},error:a.onError,notify:!0}};return c}),define("hbs!tabs/files-tab/panels/info/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,c="function",d='<div class="row">\n  <div class="large-6 columns">\n    <table class="dataTable extended_table">\n      <thead>\n        <tr>\n          <th colspan="3">'+o((e.tr||t&&t.tr||r).call(t,"Information",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"ID",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td" colspan="2">'+o(l(null!=(s=null!=t?t.element:t)?s.ID:s,t))+"</td>\n        </tr>\n        ";return i=null!=(i=e.renameTrHTML||(null!=t?t.renameTrHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"renameTrHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+='\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Datastore",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s.DATASTORE:s,t))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Register time",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o((i=null!=(i=e.prettyRegTime||(null!=t?t.prettyRegTime:t))?i:r,typeof i===c?i.call(t,{name:"prettyRegTime",hash:{},data:n}):i))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Type",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td_type">'+o((i=null!=(i=e.typeStr||(null!=t?t.typeStr:t))?i:r,typeof i===c?i.call(t,{name:"typeStr",hash:{},data:n}):i))+'</td>\n          <td>\n            <div id="div_edit_chg_type">\n              <a id="div_edit_chg_type_link" class="edit_e" href="#"> <i class="fa fa-pencil-square-o right"/></a>\n            </div>\n          </td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Filesystem type",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o((i=null!=(i=e.fsTypeStr||(null!=t?t.fsTypeStr:t))?i:r,typeof i===c?i.call(t,{name:"fsTypeStr",hash:{},data:n}):i))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Size",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o((i=null!=(i=e.sizeStr||(null!=t?t.sizeStr:t))?i:r,typeof i===c?i.call(t,{name:"sizeStr",hash:{},data:n}):i))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"State",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o((i=null!=(i=e.stateStr||(null!=t?t.stateStr:t))?i:r,typeof i===c?i.call(t,{name:"stateStr",hash:{},data:n}):i))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Running VMS",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s.RUNNING_VMS:s,t))+'</td>\n          <td></td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <div class="large-6 columns">',i=null!=(i=e.permissionsTableHTML||(null!=t?t.permissionsTableHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"permissionsTableHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+='</div>\n</div>\n<div class="row">\n  <div class="large-9 columns">',i=null!=(i=e.templateTableHTML||(null!=t?t.templateTableHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"templateTableHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+"</div>\n</div>"},useData:!0});return e.registerPartial("tabs/files-tab/panels/info/html",a),a}),define("tabs/files-tab/panels/info/panelId",["require"],function(){return"file_info_tab"}),define("tabs/files-tab/panels/info",["require","utils/locale","utils/humanize","utils/panel/rename-tr","utils/panel/template-table","utils/panel/permissions-table","opennebula/image","sunstone-config","sunstone","hbs!./info/html","../tabId","./info/panelId"],function(t){function e(t){return this.title=s.tr("Info"),this.icon="fa-info-circle",this.element=t[m],this}function a(){var t=r.html(f,this.element.NAME),e=o.html(this.element.TEMPLATE,f,s.tr("Attributes")),a=l.html(p,f,this.element),n=s.tr(c.stateStr(this.element.STATE)),d=i.prettyTime(this.element.REGTIME),h=void 0!=this.element.FS_TYPE?this.element.FS_TYPE:"-",m=i.sizeFromMB(this.element.SIZE),_=s.tr(c.typeStr(this.element.TYPE));return u({element:this.element,renameTrHTML:t,templateTableHTML:e,permissionsTableHTML:a,stateStr:n,prettyRegTime:d,fsTypeStr:h,typeStr:_,sizeStr:m})}function n(t){r.setup(f,this.element.ID,t),o.setup(this.element.TEMPLATE,f,this.element.ID,t),l.setup(p,f,this.element,t);var e=this;return t.off("click","#div_edit_chg_type_link"),t.on("click","#div_edit_chg_type_link",function(){$(".value_td_type",t).html('<select id="chg_type_select">                      <option value="KERNEL">KERNEL</option>                      <option value="RAMDISK">RAMDISK</option>                      <option value="CONTEXT">CONTEXT</option>                  </select>'),$("#chg_type_select",t).val(c.typeStr(e.element.TYPE))}),t.off("change","#chg_type_select"),t.on("change","#chg_type_select",function(){var t=$(this).val();d.runAction("File.chtype",e.element.ID,t)}),!1}var s=t("utils/locale"),i=t("utils/humanize"),r=t("utils/panel/rename-tr"),o=t("utils/panel/template-table"),l=t("utils/panel/permissions-table"),c=t("opennebula/image"),d=(t("sunstone-config"),t("sunstone")),u=t("hbs!./info/html"),p=t("../tabId"),h=t("./info/panelId"),f="File",m="IMAGE";return e.PANEL_ID=h,e.prototype.html=a,e.prototype.setup=n,e}),define("hbs!tabs/files-tab/form-panels/create/wizard",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<form data-abide="ajax" id="'+o((s=null!=(s=e.formPanelId||(null!=t?t.formPanelId:t))?s:r,typeof s===i?s.call(t,{name:"formPanelId",hash:{},data:n}):s))+'Wizard" class="custom creation">\n  <div class="row">\n    <div class="medium-4 columns">\n      <label for="file_name">\n        '+o((e.tr||t&&t.tr||r).call(t,"Name",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+o((e.tr||t&&t.tr||r).call(t,"Name that the File will get. Every file must have a unique name.",{name:"tr",hash:{},data:n}))+'\n        </span>\n      </label>\n      <input required type="text" name="file_name" id="file_name" />\n    </div>\n    <div class="medium-8 columns">\n      <label for="file_desc">\n        '+o((e.tr||t&&t.tr||r).call(t,"Description",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+o((e.tr||t&&t.tr||r).call(t,"Human readable description of the file for other users.",{name:"tr",hash:{},data:n}))+'\n        </span>\n      </label>\n      <textarea name="file_desc" id="file_desc" rows="4"></textarea>\n    </div>\n  </div>\n  <div class="row">\n    <div class="large-4 columns">\n      <label for="file_type">\n        '+o((e.tr||t&&t.tr||r).call(t,"Type",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">\n          '+o((e.tr||t&&t.tr||r).call(t,"Type of the file.",{name:"tr",hash:{},data:n}))+"\n          <br/>\n          <br/>\n          "+o((e.tr||t&&t.tr||r).call(t," KERNEL & RAMDISK files can be used in the OS Booting section of the Template wizard.",{name:"tr",hash:{},data:n}))+"\n          <br/>\n          <br/>\n          "+o((e.tr||t&&t.tr||r).call(t," CONTEXT files can be included in the context CD-ROM, from the Context/Files section of the Template wizard.",{name:"tr",hash:{},data:n}))+'\n        </span>\n      </label>\n      <select name="file_type" id="file_type">\n        <option value="CONTEXT">'+o((e.tr||t&&t.tr||r).call(t,"Context",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="KERNEL">'+o((e.tr||t&&t.tr||r).call(t,"Kernel",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="RAMDISK">'+o((e.tr||t&&t.tr||r).call(t,"Ramdisk",{name:"tr",hash:{},data:n}))+'</option>\n      </select>\n    </div>\n    <div class="large-8 columns">\n      <label for="file_datastore">\n        '+o((e.tr||t&&t.tr||r).call(t,"Datastore",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Select the datastore for this file",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n      <div id="file_datastore" name="file_datastore"></div>\n    </div>\n  </div>\n  <br>\n  <fieldset>\n    <legend>'+o((e.tr||t&&t.tr||r).call(t,"Image location",{name:"tr",hash:{},data:n}))+':</legend>\n    <div class="row" id="src_path_select">\n      <div class="large-12 columns text-center">\n        <input type="radio" name="src_path" id="path_file" value="path">\n          <label for="path_file">'+o((e.tr||t&&t.tr||r).call(t,"Provide a path",{name:"tr",hash:{},data:n}))+'</label>\n        </input>\n        <input type="radio" name="src_path" id="upload_file" value="upload">\n          <label for="upload_file">'+o((e.tr||t&&t.tr||r).call(t,"Upload",{name:"tr",hash:{},data:n}))+'</label>\n        </input>\n      </div>\n    </div>\n    <br>\n    <div class="row">\n      <div class="large-12 columns">\n        <label for="file_path">\n          '+o((e.tr||t&&t.tr||r).call(t,"Path",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">\n            '+o((e.tr||t&&t.tr||r).call(t,"Path to the original file that will be copied to the file repository.",{name:"tr",hash:{},data:n}))+'\n          </span>\n        </label>\n        <input type="text" name="file_path" id="file_path" />\n      </div>\n    </div>\n    <div class="row">\n      <div id="files_file-uploader" class="large-12 columns text-center">\n        <label id="files_file-uploader-label" for="files_file-uploader-input"></label>\n        <input id="files_file-uploader-input" type="file"/>\n      </div>\n    </div>\n  </fieldset>\n</form>'
},useData:!0});return e.registerPartial("tabs/files-tab/form-panels/create/wizard",a),a}),define("hbs!tabs/files-tab/form-panels/create/advanced",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<form data-abide="ajax" id="'+o((s=null!=(s=e.formPanelId||(null!=t?t.formPanelId:t))?s:r,typeof s===i?s.call(t,{name:"formPanelId",hash:{},data:n}):s))+'Advanced" class="custom creation">\n  <div class="row">\n    <div class="columns large-12">\n      <label for="file_datastores_raw">'+o((e.tr||t&&t.tr||r).call(t,"Datastore",{name:"tr",hash:{},data:n}))+':</label>\n      <div id="file_datastore_raw" name="file_datastore_raw"></div>\n    </div>\n  </div>\n  <div class="row">\n    <div class="large-12 columns">\n      <p>'+o((e.tr||t&&t.tr||r).call(t,"Write the Image template here",{name:"tr",hash:{},data:n}))+'</p>\n    </div>\n  </div>\n  <div class="row">\n    <div class="large-12 columns">\n      <textarea id="template" rows="15" required></textarea>\n    </div>\n  </div>\n</form>'},useData:!0});return e.registerPartial("tabs/files-tab/form-panels/create/advanced",a),a}),define("tabs/files-tab/form-panels/create",["require","utils/form-panels/form-panel","resumable","sunstone","opennebula/error","utils/notifier","utils/locale","utils/tips","utils/resource-select","utils/browser-info","hbs!./create/wizard","hbs!./create/advanced","./create/formPanelId","../tabId"],function(t){function e(){this.formPanelId=g,this.tabId=y,this.actions={create:{title:h.tr("Create File"),buttonText:h.tr("Create"),resetButton:!0}},l.call(this)}function a(){return b({formPanelId:this.formPanelId})}function n(){return v({formPanelId:this.formPanelId})}function s(t){$("#file_name",t).focus();var e=$("#file_datastore .resource_list_select",t).val(),a=$("#file_datastore_raw .resource_list_select",t).val(),n=["TYPE","TYPE"],s=["0","1"];return m.insert("div#file_datastore",t,"Datastore",e,!1,null,n,s),m.insert("div#file_datastore_raw",t,"Datastore",a,!1,null,n,s),!1}function i(t){var e=this;if(f.setup(t),$("#file_path,#files_file-uploader",t).closest(".row").hide(),$("input[name='src_path']",t).change(function(){var e=$(this).val();switch(e){case"path":$("#files_file-uploader",t).closest(".row").hide(),$("#file_path",t).closest(".row").show(),$("#file_path",t).attr("required","");break;case"upload":$("#file_path",t).closest(".row").hide(),$("#files_file-uploader",t).closest(".row").show(),$("#file_path",t).removeAttr("required")}}),$("#path_file",t).click(),_.getInternetExplorerVersion()>-1)$("#upload_file").attr("disabled","disabled");else{e.uploader=new c({target:"upload_chunk",chunkSize:10485760,maxFiles:1,testChunks:!1,query:{csrftoken:""}}),e.uploader.assignBrowse($("#files_file-uploader-input",t));var a="",n=!1;e.uploader.on("fileAdded",function(e){a=e.fileName,n=a,$("#files_file-uploader-input",t).hide(),$("#files_file-uploader-label",t).html(e.fileName)}),e.uploader.on("uploadStart",function(){$("#files_upload_progress_bars").append('<div id="files-'+a+'progressBar" class="row" style="margin-bottom:10px">            <div id="files-'+a+'-info" class="large-2 columns dataTables_info">              '+h.tr("Uploading...")+'            </div>            <div class="large-10 columns">              <div id="upload_progress_container" class="progress nine radius" style="height:25px !important">                <span class="meter" style="width:0%"></span>              </div>              <div class="progress-text" style="margin-left:15px">'+a+"</div>            </div>          </div>")}),e.uploader.on("progress",function(){$("span.meter",$('div[id="files-'+a+'progressBar"]')).css("width",100*e.uploader.progress()+"%")})}return!1}function r(t){var e=this,a=!1,n=$("#file_datastore .resource_list_select",t).val();if(!n)return d.hideFormPanelLoading(y),p.notifyError(h.tr("Please select a datastore for this file")),!1;var s={},i=$("#file_name",t).val();s.NAME=i;var r=$("#file_desc",t).val();r.length&&(s.DESCRIPTION=r);var o=$("#file_type",t).val();switch(s.TYPE=o,$("#src_path_select input:checked",t).val()){case"path":path=$("#file_path",t).val(),path&&(s.PATH=path);break;case"upload":a=!0}var l={image:s,ds_id:n};if(a){if(0==e.uploader.files.length)return d.hideFormPanelLoading(y),p.notifyError(h.tr("Please select a file to upload")),!1;d.resetFormPanel(e.tabId,e.formPanelId),d.hideFormPanel(e.tabId),e.uploader.on("fileSuccess",function(t){$('div[id="files-'+t.fileName+'-info"]').text(h.tr("Registering in OpenNebula")),$.ajax({url:"upload",type:"POST",data:{csrftoken:csrftoken,img:JSON.stringify(l),file:t.fileName,tempfile:t.uniqueIdentifier},success:function(){p.notifyMessage("Image uploaded correctly"),$('div[id="files-'+t.fileName+'progressBar"]').remove(),d.runAction("File.refresh")},error:function(e){p.onError({},u(e)),$('div[id="files-'+t.fileName+'progressBar"]').remove()}})}),e.uploader.upload()}else d.runAction("File.create",l);return!1}function o(t){var e=$("#template",t).val(),a=$("#file_datastore_raw .resource_list_select",t).val();if(!a)return p.notifyError(h.tr("Please select a datastore for this file")),!1;var n={image:{image_raw:e},ds_id:a};return d.runAction("File.create",n),!1}var l=t("utils/form-panels/form-panel"),c=t("resumable"),d=t("sunstone"),u=t("opennebula/error"),p=t("utils/notifier"),h=t("utils/locale"),f=t("utils/tips"),m=t("utils/resource-select"),_=t("utils/browser-info"),b=t("hbs!./create/wizard"),v=t("hbs!./create/advanced"),g=t("./create/formPanelId"),y=t("../tabId");return e.FORM_PANEL_ID=g,e.prototype=Object.create(l.prototype),e.prototype.constructor=e,e.prototype.htmlWizard=a,e.prototype.htmlAdvanced=n,e.prototype.submitWizard=r,e.prototype.submitAdvanced=o,e.prototype.onShow=s,e.prototype.setup=i,e}),define("tabs/files-tab",["require","utils/locale","./files-tab/buttons","./files-tab/actions","./files-tab/datatable","./files-tab/tabId","./files-tab/panels/info","./files-tab/form-panels/create"],function(t){var e=t("utils/locale"),a=t("./files-tab/buttons"),n=t("./files-tab/actions"),s=t("./files-tab/datatable"),i=t("./files-tab/tabId"),r="dataTableFiles",o=[],l=[t("./files-tab/panels/info")],c=[t("./files-tab/form-panels/create")],d={tabId:i,title:e.tr("Files & Kernels"),tabClass:"subTab",parentTab:"vresources-tab",listHeader:'<i class="fa fa-fw fa-folder-open"></i>&emsp;'+e.tr("Files & Kernels"),infoHeader:'<i class="fa fa-fw fa-folder-open"></i>&emsp;'+e.tr("File"),subheader:"",resource:"File",content:'<div class="large-12 columns">                <div id="files_upload_progress_bars"></div>              </div>',buttons:a,actions:n,dataTable:new s(r,{actions:!0,info:!0}),panels:l,formPanels:c,dialogs:o};return d}),define("tabs/infra-tab",["require","utils/locale"],function(t){var e=t("utils/locale"),a="infra-tab",n={tabId:a,title:'<i class="fa fa-lg fa-fw fa-sitemap"></i>&emsp;'+e.tr("Infrastructure"),no_content:!0};return n}),define("tabs/clusters-tab/buttons",["require","utils/locale"],function(t){var e=t("utils/locale"),a={"Cluster.refresh":{type:"action",layout:"refresh",alwaysActive:!0},"Cluster.create_dialog":{type:"create_dialog",layout:"create"},"Cluster.update_dialog":{type:"action",layout:"main",text:e.tr("Update")},"Cluster.delete":{type:"confirm",layout:"del",text:e.tr("Delete")}};return a}),define("tabs/clusters-tab/form-panels/create/formPanelId",["require"],function(){return"createClusterForm"}),define("tabs/clusters-tab/actions",["require","sunstone","utils/notifier","utils/locale","./datatable","opennebula/cluster","opennebula/action","./tabId","./form-panels/create/formPanelId"],function(t){var e=t("sunstone"),a=t("utils/notifier"),n=t("utils/locale"),s=(t("./datatable"),t("opennebula/cluster")),i=t("opennebula/action"),r="Cluster",o="CLUSTER",l=t("./tabId"),c=t("./form-panels/create/formPanelId"),d={"Cluster.create":{type:"create",call:s.create,callback:function(t,s){e.resetFormPanel(l,c),e.hideFormPanel(l),e.getDataTable(l).addElement(t,s);for(var i in t.request.data[0].cluster.hosts)t.request.data[0].cluster.hosts[i]&&e.runAction("Cluster.addhost",s[o].ID,i);for(var r in t.request.data[0].cluster.vnets)t.request.data[0].cluster.vnets[r]&&e.runAction("Cluster.addvnet",s[o].ID,r);for(var d in t.request.data[0].cluster.datastores)t.request.data[0].cluster.datastores[d]&&e.runAction("Cluster.adddatastore",s[o].ID,d);a.notifyCustom(n.tr("Cluster created")," ID: "+s[o].ID,!1)},error:a.onError},"Cluster.create_dialog":{type:"custom",call:function(){e.showFormPanel(l,c,"create")}},"Cluster.list":{type:"list",call:s.list,callback:function(t,a){e.getDataTable(l).updateView(t,a)},error:a.onError},"Cluster.show":{type:"single",call:s.show,callback:function(t,a){e.getDataTable(l).updateElement(t,a),e.rightInfoVisible($("#"+l))&&e.insertPanels(l,a)},error:a.onError},"Cluster.show_to_update":{type:"single",call:s.show,callback:function(t,a){e.showFormPanel(l,c,"update",function(t,e){t.fill(e,a[o])})},error:a.onError},"Cluster.refresh":{type:"custom",call:function(){var t=$("#"+l);e.rightInfoVisible(t)?e.runAction(r+".show",e.rightInfoResourceId(t)):(e.getDataTable(l).waitingNodes(),e.runAction(r+".list",{force:!0}))},error:a.onError},"Cluster.addhost":{type:"single",call:s.addhost,callback:function(t){i.clear_cache("HOST"),e.runAction("Cluster.show",t.request.data[0][0])},error:a.onError},"Cluster.delhost":{type:"single",call:s.delhost,callback:function(t){i.clear_cache("HOST"),e.runAction("Cluster.show",t.request.data[0][0])},error:a.onError},"Cluster.adddatastore":{type:"single",call:s.adddatastore,callback:function(t){i.clear_cache("DATASTORE"),e.runAction("Cluster.show",t.request.data[0][0])},error:a.onError},"Cluster.deldatastore":{type:"single",call:s.deldatastore,callback:function(t){i.clear_cache("DATASTORE"),e.runAction("Cluster.show",t.request.data[0][0])},error:a.onError},"Cluster.addvnet":{type:"single",call:s.addvnet,callback:function(t){i.clear_cache("VNET"),e.runAction("Cluster.show",t.request.data[0][0])},error:a.onError},"Cluster.delvnet":{type:"single",call:s.delvnet,callback:function(t){i.clear_cache("VNET"),e.runAction("Cluster.show",t.request.data[0][0])},error:a.onError},"Cluster.delete":{type:"multiple",call:s.del,callback:function(t,a){e.getDataTable(l).deleteElement(t,a)},elements:function(){return e.getDataTable(l).elements()},error:a.onError},"Cluster.update_template":{type:"single",call:s.update,callback:function(t){e.runAction(r+".show",t.request.data[0][0])},error:a.onError},"Cluster.update_dialog":{type:"single",call:function(){var t=e.getDataTable(l).elements();if(1!=t.length)return a.notifyMessage("Please select one (and just one) cluster to update."),!1;var n=""+t[0];e.runAction(r+".show_to_update",n)}},"Cluster.rename":{type:"single",call:s.rename,callback:function(t){e.runAction(r+".show",t.request.data[0][0])},error:a.onError}};return d}),define("hbs!tabs/clusters-tab/panels/info/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,c="function",d='<div class="row">\n  <div class="large-6 columns">\n    <table class="dataTable extended_table">\n      <thead>\n        <tr>\n          <th colspan="3">'+o((e.tr||t&&t.tr||r).call(t,"Information",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <tbody>\n       <tr>\n        <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"ID",{name:"tr",hash:{},data:n}))+'</td>\n        <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s.ID:s,t))+"</td>\n        <td></td>\n      </tr>\n      ";return i=null!=(i=e.renameTrHTML||(null!=t?t.renameTrHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"renameTrHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+='\n    </tbody>\n  </table>\n</div>\n</div>\n<div class="row">\n  <div class="large-9 columns">\n    ',i=null!=(i=e.templateTableHTML||(null!=t?t.templateTableHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"templateTableHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+"\n  </div>\n</div>"},useData:!0});return e.registerPartial("tabs/clusters-tab/panels/info/html",a),a}),define("tabs/clusters-tab/panels/info/panelId",["require"],function(){return"cluster_info_tab"}),define("tabs/clusters-tab/panels/info",["require","hbs!./info/html","utils/locale","utils/panel/rename-tr","utils/panel/template-table","../tabId","./info/panelId"],function(t){function e(t){return this.title=i.tr("Info"),this.icon="fa-info-circle",this.element=t[d],this}function a(){var t=r.html(c,this.element.NAME),e=o.html(this.element.TEMPLATE,c,i.tr("Attributes"));return s({element:this.element,renameTrHTML:t,templateTableHTML:e})}function n(t){r.setup(c,this.element.ID,t),o.setup(this.element.TEMPLATE,c,this.element.ID,t)}var s=t("hbs!./info/html"),i=t("utils/locale"),r=t("utils/panel/rename-tr"),o=t("utils/panel/template-table"),l=(t("../tabId"),t("./info/panelId")),c="Cluster",d="CLUSTER";return e.PANEL_ID=l,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/clusters-tab/panels/hosts/panelId",["require"],function(){return"cluster_host_tab"}),define("tabs/clusters-tab/panels/hosts",["require","utils/locale","tabs/hosts-tab/datatable","./hosts/panelId"],function(t){function e(t){return this.title=s.tr("Hosts"),this.icon="fa-hdd-o",this.element=t[l],this}function a(){var t=[];void 0!=this.element.HOSTS.ID&&(t=this.element.HOSTS.ID,$.isArray(t)||(t=[t]));var e={info:!0,select:!0,selectOptions:{read_only:!0,fixed_ids:t}};return this.HostsTable=new i(o,e),this.HostsTable.dataTableHTML}function n(){return this.HostsTable.initialize(),this.HostsTable.refreshResourceTableSelect(),!1}var s=t("utils/locale"),i=t("tabs/hosts-tab/datatable"),r=t("./hosts/panelId"),o=r+"HostsTable",l="CLUSTER";return e.PANEL_ID=r,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/clusters-tab/panels/vnets/panelId",["require"],function(){return"cluster_vnet_tab"}),define("tabs/clusters-tab/panels/vnets",["require","utils/locale","tabs/vnets-tab/datatable","./vnets/panelId"],function(t){function e(t){return this.title=s.tr("VNets"),this.icon="fa-globe",this.element=t[l],this}function a(){var t=[];void 0!=this.element.VNETS.ID&&(t=this.element.VNETS.ID,$.isArray(t)||(t=[t]));var e={info:!0,select:!0,selectOptions:{read_only:!0,fixed_ids:t}};return this.VNetsTable=new i(o,e),this.VNetsTable.dataTableHTML}function n(){return this.VNetsTable.initialize(),this.VNetsTable.refreshResourceTableSelect(),!1}var s=t("utils/locale"),i=t("tabs/vnets-tab/datatable"),r=t("./vnets/panelId"),o=r+"VNetsTable",l="CLUSTER";return e.PANEL_ID=r,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/clusters-tab/panels/datastores/panelId",["require"],function(){return"cluster_datastore_tab"}),define("tabs/clusters-tab/panels/datastores",["require","utils/locale","tabs/datastores-tab/datatable","./datastores/panelId"],function(t){function e(t){return this.title=s.tr("Datastores"),this.icon="fa-folder-open",this.element=t[l],this}function a(){var t=[];void 0!=this.element.DATASTORES.ID&&(t=this.element.DATASTORES.ID,$.isArray(t)||(t=[t]));var e={info:!0,select:!0,selectOptions:{read_only:!0,fixed_ids:t}};return this.DatastoresTable=new i(o,e),this.DatastoresTable.dataTableHTML}function n(){return this.DatastoresTable.initialize(),this.DatastoresTable.refreshResourceTableSelect(),!1}var s=t("utils/locale"),i=t("tabs/datastores-tab/datatable"),r=t("./datastores/panelId"),o=r+"DatastoresTable",l="CLUSTER";return e.PANEL_ID=r,e.prototype.html=a,e.prototype.setup=n,e}),define("hbs!tabs/clusters-tab/form-panels/create/wizard",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<form data-abide="ajax" id="'+l((i=null!=(i=e.formPanelId||(null!=t?t.formPanelId:t))?i:o,typeof i===r?i.call(t,{name:"formPanelId",hash:{},data:n}):i))+'Wizard" class="custom creation">\n  <div class="row">\n    <div class="medium-6 columns">\n      <label for="name">'+l((e.tr||t&&t.tr||o).call(t,"Name",{name:"tr",hash:{},data:n}))+'</label>\n      <input type="text" required name="name" id="name" />\n    </div>\n    <div class="medium-6 columns">\n      <dl class="tabs right-info-tabs text-center right" data-tab>\n        <dd class="active">\n          <a href="#tab-hostsTab">\n            <i class="fa fa-hdd-o"></i><br>'+l((e.tr||t&&t.tr||o).call(t,"Hosts",{name:"tr",hash:{},data:n}))+'\n          </a>\n        </dd>\n        <dd>\n          <a href="#tab-vnetsTab">\n            <i class="fa fa-globe"></i><br>'+l((e.tr||t&&t.tr||o).call(t,"VNets",{name:"tr",hash:{},data:n}))+'\n          </a>\n        </dd>\n        <dd>\n          <a href="#tab-datastoresTab">\n            <i class="fa fa-folder-open"></i><br>'+l((e.tr||t&&t.tr||o).call(t,"Datastores",{name:"tr",hash:{},data:n}))+'\n          </a>\n        </dd>\n      </dl>\n    </div>\n  </div>\n  <div class="tabs-content">\n    <div id="tab-hostsTab" class="active content">\n      ';return i=null!=(i=e.hostsTableHTML||(null!=t?t.hostsTableHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"hostsTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+='\n    </div>\n    <div id="tab-vnetsTab" class="content">\n      ',i=null!=(i=e.vnetsTableHTML||(null!=t?t.vnetsTableHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"vnetsTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+='\n    </div>\n    <div id="tab-datastoresTab" class="content">\n      ',i=null!=(i=e.datastoresTableHTML||(null!=t?t.datastoresTableHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"datastoresTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+"\n    </div>\n  </div>\n</form>"},useData:!0});return e.registerPartial("tabs/clusters-tab/form-panels/create/wizard",a),a}),define("tabs/clusters-tab/form-panels/create",["require","foundation.tab","utils/form-panels/form-panel","sunstone","utils/locale","tabs/hosts-tab/datatable","tabs/vnets-tab/datatable","tabs/datastores-tab/datatable","hbs!./create/wizard","./create/formPanelId","../tabId"],function(t){function e(){this.formPanelId=f,this.tabId=m,this.actions={create:{title:c.tr("Create Cluster"),buttonText:c.tr("Create"),resetButton:!0},update:{title:c.tr("Update Cluster"),buttonText:c.tr("Update"),resetButton:!1}},o.call(this)}function a(){var t={info:!1,select:!0,selectOptions:{multiple_choice:!0}};return this.hostsTable=new d("cluster_wizard_hosts",t),this.vnetsTable=new u("cluster_wizard_vnets",t),this.datastoresTable=new p("cluster_wizard_datastores",t),h({formPanelId:this.formPanelId,hostsTableHTML:this.hostsTable.dataTableHTML,vnetsTableHTML:this.vnetsTable.dataTableHTML,datastoresTableHTML:this.datastoresTable.dataTableHTML})}function n(){this.hostsTable.initialize(),this.vnetsTable.initialize(),this.datastoresTable.initialize()}function s(t){var e=this,a=e.hostsTable.retrieveResourceTableSelect(),n=e.vnetsTable.retrieveResourceTableSelect(),s=e.datastoresTable.retrieveResourceTableSelect();if("create"==e.action){var i={};$.each(a,function(t,e){i[e]=1});var r={};$.each(n,function(t,e){r[e]=1});var o={};$.each(s,function(t,e){o[e]=1});var c={cluster:{name:$("#name",t).val(),hosts:i,vnets:r,datastores:o}};return l.runAction("Cluster.create",c),!1}return"update"==e.action?($.each(a,function(t,a){-1==e.originalHostsList.indexOf(a)&&l.runAction("Cluster.addhost",e.clusterUpdateId,a)}),$.each(e.originalHostsList,function(t,n){-1==a.indexOf(n)&&l.runAction("Cluster.delhost",e.clusterUpdateId,n)}),$.each(n,function(t,a){-1==e.originalVNetsList.indexOf(a)&&l.runAction("Cluster.addvnet",e.clusterUpdateId,a)}),$.each(e.originalVNetsList,function(t,a){-1==n.indexOf(a)&&l.runAction("Cluster.delvnet",e.clusterUpdateId,a)}),$.each(s,function(t,a){-1==e.originalDatastoresList.indexOf(a)&&l.runAction("Cluster.adddatastore",e.clusterUpdateId,a)}),$.each(e.originalDatastoresList,function(t,a){-1==s.indexOf(a)&&l.runAction("Cluster.deldatastore",e.clusterUpdateId,a)}),l.hideFormPanel(m),!1):void 0}function i(t){$("input#name",t).focus(),this.hostsTable.refreshResourceTableSelect(),this.vnetsTable.refreshResourceTableSelect(),this.datastoresTable.refreshResourceTableSelect()}function r(t,e){var a=e.NAME,n=e.HOSTS.ID,s=e.VNETS.ID,i=e.DATASTORES.ID;"string"==typeof n&&(n=[n]),"string"==typeof s&&(s=[s]),"string"==typeof i&&(i=[i]),$("#name",t).val(a),$("#name",t).attr("disabled","disabled"),this.originalHostsList=[],n&&(this.originalHostsList=n,this.hostsTable.selectResourceTableSelect({ids:n})),this.originalVNetsList=[],s&&(this.originalVNetsList=s,this.vnetsTable.selectResourceTableSelect({ids:s})),this.originalDatastoresList=[],i&&(this.originalDatastoresList=i,this.datastoresTable.selectResourceTableSelect({ids:i})),this.clusterUpdateId=e.ID}t("foundation.tab");var o=t("utils/form-panels/form-panel"),l=t("sunstone"),c=t("utils/locale"),d=t("tabs/hosts-tab/datatable"),u=t("tabs/vnets-tab/datatable"),p=t("tabs/datastores-tab/datatable"),h=t("hbs!./create/wizard"),f=t("./create/formPanelId"),m=t("../tabId");return e.FORM_PANEL_ID=f,e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.htmlWizard=a,e.prototype.submitWizard=s,e.prototype.onShow=i,e.prototype.fill=r,e.prototype.setup=n,e}),define("tabs/clusters-tab",["require","utils/locale","./clusters-tab/buttons","./clusters-tab/actions","./clusters-tab/datatable","./clusters-tab/tabId","./clusters-tab/panels/info","./clusters-tab/panels/hosts","./clusters-tab/panels/vnets","./clusters-tab/panels/datastores","./clusters-tab/form-panels/create"],function(t){var e=t("utils/locale"),a=t("./clusters-tab/buttons"),n=t("./clusters-tab/actions"),s=t("./clusters-tab/datatable"),i=t("./clusters-tab/tabId"),r="dataTableClusters",o=[],l=[t("./clusters-tab/panels/info"),t("./clusters-tab/panels/hosts"),t("./clusters-tab/panels/vnets"),t("./clusters-tab/panels/datastores")],c=[t("./clusters-tab/form-panels/create")],d={tabId:i,title:e.tr("Clusters"),tabClass:"subTab",parentTab:"infra-tab",listHeader:'<i class="fa fa-fw fa-th"></i>&emsp;'+e.tr("Clusters"),infoHeader:'<i class="fa fa-fw fa-th"></i>&emsp;'+e.tr("Cluster"),subheader:"<span/> <small></small>&emsp;",resource:"Cluster",buttons:a,actions:n,dataTable:new s(r,{actions:!0,info:!0}),panels:l,formPanels:c,dialogs:o};return d}),define("tabs/hosts-tab/buttons",["require","utils/locale"],function(t){var e=t("utils/locale"),a={"Host.refresh":{type:"action",layout:"refresh",alwaysActive:!0},"Host.create_dialog":{type:"create_dialog",layout:"create"},"Host.addtocluster":{type:"confirm_with_select",text:e.tr("Select cluster"),select:"Cluster",tip:e.tr("Select the destination cluster:"),layout:"main"},"Host.enable":{type:"action",text:e.tr("Enable"),layout:"main"},"Host.disable":{type:"action",text:e.tr("Disable"),layout:"main"},"Host.delete":{type:"confirm",text:e.tr("Delete host"),layout:"del"}};return a}),define("tabs/hosts-tab/actions",["require","sunstone","utils/notifier","utils/locale","./datatable","opennebula/host","opennebula/cluster","opennebula/action","./tabId","./form-panels/create/formPanelId"],function(t){var e=t("sunstone"),a=t("utils/notifier"),n=(t("utils/locale"),t("./datatable"),t("opennebula/host")),s=t("opennebula/cluster"),i=t("opennebula/action"),r=t("./tabId"),o=t("./form-panels/create/formPanelId"),l={"Host.create":{type:"create",call:n.create,callback:function(t,a){e.resetFormPanel(r,o),e.hideFormPanel($("#"+r)),e.getDataTable(r).addElement(t,a)},error:function(t,n){e.hideFormPanelLoading($("#"+r)),a.onError(t,n)},notify:!0},"Host.create_dialog":{type:"custom",call:function(){e.showFormPanel(r,o,"create")}},"Host.list":{type:"list",call:n.list,callback:function(t,a){e.getDataTable(r).updateView(t,a)},error:a.onError},"Host.show":{type:"single",call:n.show,callback:function(t,a){e.getDataTable(r).updateElement(t,a),e.rightInfoVisible($("#"+r))&&e.insertPanels(r,a)},error:a.onError},"Host.refresh":{type:"custom",call:function(){var t=$("#"+r);e.rightInfoVisible(t)?e.runAction("Host.show",e.rightInfoResourceId(t)):(e.getDataTable(r).waitingNodes(),e.runAction("Host.list",{force:!0}))},error:a.onError},"Host.enable":{type:"multiple",call:n.enable,callback:function(t){e.runAction("Host.show",t.request.data[0])},elements:function(){return e.getDataTable(r).elements()},error:a.onError,notify:!0},"Host.disable":{type:"multiple",call:n.disable,callback:function(t){e.runAction("Host.show",t.request.data[0])},elements:function(){return e.getDataTable(r).elements()},error:a.onError,notify:!0},"Host.delete":{type:"multiple",call:n.del,callback:function(t,a){e.getDataTable(r).deleteElement(t,a)},elements:function(){return e.getDataTable(r).elements()},error:a.onError,notify:!0},"Host.update_template":{type:"single",call:n.update,callback:function(t){e.runAction("Host.show",t.request.data[0][0])},error:a.onError},"Host.addtocluster":{type:"multiple",call:function(t){var r=t.data.extra_param,o=t.data.id;-1==r?n.show({data:{id:o},success:function(t,n){var r=n.HOST,l=r.CLUSTER_ID;-1!=l?s.delhost({data:{id:l,extra_param:o},success:function(){i.clear_cache("HOST"),e.runAction("Host.show",o)},error:a.onError}):(i.clear_cache("HOST"),e.runAction("Host.show",o))},error:a.onError}):s.addhost({data:{id:r,extra_param:o},success:function(){i.clear_cache("HOST"),e.runAction("Host.show",o)},error:a.onError})},elements:function(){return e.getDataTable(r).elements()}},"Host.rename":{type:"single",call:n.rename,callback:function(t){e.runAction("Host.show",t.request.data[0][0])},error:a.onError,notify:!0}};return l}),define("hbs!utils/panel/cluster-tr/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o="function";return'<tr>\n  <td class="key_td">'+r((e.tr||t&&t.tr||i).call(t,"Cluster",{name:"tr",hash:{},data:n}))+'</td>\n  <td class="value_td_cluster">'+r((s=null!=(s=e.clusterName||(null!=t?t.clusterName:t))?s:i,typeof s===o?s.call(t,{name:"clusterName",hash:{},data:n}):s))+'</td>\n  <td>\n    <div id="div_edit_chg_cluster">\n      <a id="div_edit_chg_cluster_link" class="edit_e" href="#"> <i class="fa fa-pencil-square-o right"/></a>\n    </div>\n  </td>\n</tr>'},useData:!0});return e.registerPartial("utils/panel/cluster-tr/html",a),a}),define("utils/panel/cluster-tr",["require","hbs!./cluster-tr/html","utils/resource-select","sunstone"],function(t){var e=t("hbs!./cluster-tr/html"),a=t("utils/resource-select"),n=t("sunstone"),s=function(t){var a=e({clusterName:t.length?t:"-"});return a},i=function(t,e,s,i){return i.off("click","#div_edit_chg_cluster_link"),i.on("click","#div_edit_chg_cluster_link",function(){$(this).parents("tr");a.insert(".value_td_cluster",i,"Cluster",s,!1)}),i.off("change",".value_td_cluster .resource_list_select"),i.on("change",".value_td_cluster .resource_list_select",function(){var a=$(this).val();""!=a&&n.runAction(t+".addtocluster",[e],a)}),!1};return{html:s,setup:i}}),define("hbs!tabs/hosts-tab/utils/datastore-capacity-table/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({1:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='    <tr>\n      <td class="key_td">'+l((i=null!=(i=e.datastoreId||(null!=t?t.datastoreId:t))?i:o,typeof i===r?i.call(t,{name:"datastoreId",hash:{},data:n}):i))+'</td>\n      <td class="value_td" colspan="2">';return i=null!=(i=e.datastoreBar||(null!=t?t.datastoreBar:t))?i:o,s=typeof i===r?i.call(t,{name:"datastoreBar",hash:{},data:n}):i,null!=s&&(c+=s),c+"</td>\n    </tr>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o='<table class="dataTable extended_table">\n  <thead>\n    <tr>\n      <th>'+r((e.tr||t&&t.tr||i).call(t,"Datastore ID",{name:"tr",hash:{},data:n}))+'</th>\n      <th style="width:70%">'+r((e.tr||t&&t.tr||i).call(t,"Capacity",{name:"tr",hash:{},data:n}))+"</th>\n    </tr>\n  </thead>\n  <tbody>\n";return s=e.each.call(t,null!=t?t.datastoreBars:t,{name:"each",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(o+=s),o+"  </tbody>\n</table>"},useData:!0});return e.registerPartial("tabs/hosts-tab/utils/datastore-capacity-table/html",a),a}),define("tabs/hosts-tab/utils/datastores-capacity-table",["require","tabs/datastores-tab/utils/datastore-capacity-bar","hbs!./datastore-capacity-table/html"],function(t){function e(t){var e=t.HOST_SHARE,s=[];if($.isArray(e.DATASTORES.DS))s=e.DATASTORES.DS;else{if($.isEmptyObject(e.DATASTORES.DS))return"";s=[e.DATASTORES.DS]}var i=[];return $.each(s,function(t,e){i.push({datastoreId:e.ID,datastoreBar:a.html(e)})}),n({datastoreBars:i})}var a=t("tabs/datastores-tab/utils/datastore-capacity-bar"),n=t("hbs!./datastore-capacity-table/html");return{html:e}}),define("tabs/hosts-tab/utils/can-import-wilds",["require"],function(){function t(t){var e=!1;if(t.TEMPLATE.VM){var a=t.TEMPLATE.VM;$.isArray(a)||(a=[a]),$.each(a,function(){return this.IMPORT_TEMPLATE?(e=!0,!1):void 0})}return e}return t}),define("hbs!tabs/hosts-tab/panels/info/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,c="function",d='<div class="row">\n  <div class="large-6 columns">\n    <table class="dataTable extended_table">\n      <thead>\n        <tr>\n          <th colspan="3">'+o((e.tr||t&&t.tr||r).call(t,"Information",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"ID",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td" colspan="2">'+o(l(null!=(s=null!=t?t.element:t)?s.ID:s,t))+"</td>\n        </tr>\n        ";return i=null!=(i=e.renameTrHTML||(null!=t?t.renameTrHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"renameTrHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+="\n        ",i=null!=(i=e.clusterTrHTML||(null!=t?t.clusterTrHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"clusterTrHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+='\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"State",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o((i=null!=(i=e.stateStr||(null!=t?t.stateStr:t))?i:r,typeof i===c?i.call(t,{name:"stateStr",hash:{},data:n}):i))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"IM MAD",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s.IM_MAD:s,t))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"VM MAD",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s.VM_MAD:s,t))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"VN MAD",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s.VN_MAD:s,t))+'</td>\n          <td></td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <div class="large-6 columns">\n    <table class="dataTable extended_table">\n      <thead>\n        <tr>\n          <th colspan="3">'+o((e.tr||t&&t.tr||r).call(t,"Capacity",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Allocated Memory",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td" colspan="2" style="width:50%;">',s=l(null!=(s=null!=t?t.memoryBars:t)?s.allocated:s,t),null!=s&&(d+=s),d+='</td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Allocated CPU",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td" colspan="2" style="width:50%;">',s=l(null!=(s=null!=t?t.cpuBars:t)?s.allocated:s,t),null!=s&&(d+=s),d+='</td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Real Memory",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td" colspan="2" style="width:50%;">',s=l(null!=(s=null!=t?t.memoryBars:t)?s.real:s,t),null!=s&&(d+=s),d+='</td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Real CPU",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td" colspan="2" style="width:50%;">',s=l(null!=(s=null!=t?t.cpuBars:t)?s.real:s,t),null!=s&&(d+=s),d+="</td>\n        </tr>\n      </tbody>\n    </table>\n    ",i=null!=(i=e.datastoresCapacityTableHTML||(null!=t?t.datastoresCapacityTableHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"datastoresCapacityTableHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+='\n  </div>\n</div>\n<div class="row">\n  <div class="large-9 columns">',i=null!=(i=e.templateTableHTML||(null!=t?t.templateTableHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"templateTableHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+"</div>\n</div>"
},useData:!0});return e.registerPartial("tabs/hosts-tab/panels/info/html",a),a}),define("tabs/hosts-tab/panels/info/panelId",["require"],function(){return"host_info_tab"}),define("tabs/hosts-tab/panels/info",["require","utils/locale","utils/humanize","utils/panel/rename-tr","utils/panel/template-table","utils/panel/permissions-table","utils/panel/cluster-tr","opennebula/host","../utils/cpu-bars","../utils/memory-bars","../utils/datastores-capacity-table","../utils/can-import-wilds","hbs!./info/html","../tabId","./info/panelId"],function(t){function e(t){var e=this;e.title=s.tr("Info"),e.icon="fa-info-circle",e.element=t[v],e.canImportWilds=h(e.element),e.unshownTemplate={},e.strippedTemplate={};var a=["HOST","VM","WILDS"];return $.each(e.element.TEMPLATE,function(t,n){$.inArray(t,a)>-1?e.unshownTemplate[t]=n:e.strippedTemplate[t]=n}),this}function a(){var t=r.html(this.strippedTemplate,b,s.tr("Attributes")),e=i.html(b,this.element.NAME),a=l.html(this.element.CLUSTER),n=o.html(m,b,this.element),h=d.html(this.element),_=u.html(this.element),v=s.tr(c.stateStr(this.element.STATE)),g=p.html(this.element);return f({element:this.element,renameTrHTML:e,clusterTrHTML:a,templateTableHTML:t,permissionsTableHTML:n,cpuBars:h,memoryBars:_,stateStr:v,datastoresCapacityTableHTML:g})}function n(t){return i.setup(b,this.element.ID,t),l.setup(b,this.element.ID,this.element.CLUSTER_ID,t),r.setup(this.strippedTemplate,b,this.element.ID,t,this.unshownTemplate),o.setup(m,b,this.element,t),!1}var s=t("utils/locale"),i=(t("utils/humanize"),t("utils/panel/rename-tr")),r=t("utils/panel/template-table"),o=t("utils/panel/permissions-table"),l=t("utils/panel/cluster-tr"),c=t("opennebula/host"),d=t("../utils/cpu-bars"),u=t("../utils/memory-bars"),p=t("../utils/datastores-capacity-table"),h=t("../utils/can-import-wilds"),f=t("hbs!./info/html"),m=t("../tabId"),_=t("./info/panelId"),b="Host",v="HOST";return e.PANEL_ID=_,e.prototype.html=a,e.prototype.setup=n,e}),define("hbs!tabs/hosts-tab/panels/monitor/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<div class="">\n  <div class="large-6 columns">\n    <div class="row graph_legend">\n      <h3 class="subheader">\n        <small>'+i((e.tr||t&&t.tr||s).call(t,"CPU",{name:"tr",hash:{},data:n}))+'</small>\n      </h3>\n    </div>\n    <div class="row">\n      <div class="large-10 columns centered graph text-center" id="host_cpu_graph" style="height: 100px;">\n        <span  id="provision_dashboard_total" style="font-size:80px">\n          <i class="fa fa-spinner fa-spin"></i>\n        </span>\n      </div>\n    </div>\n    <div class="row graph_legend">\n      <div class="large-10 columns centered" id="host_cpu_legend"></div>\n    </div>\n  </div>\n  <div class="large-6 columns">\n    <div class="row graph_legend">\n      <h3 class="subheader">\n        <small>'+i((e.tr||t&&t.tr||s).call(t,"MEMORY",{name:"tr",hash:{},data:n}))+'</small>\n      </h3>\n    </div>\n    <div class="row">\n      <div class="large-10 columns centered graph text-center" id="host_mem_graph" style="height: 100px;">\n        <span  id="provision_dashboard_total" style="font-size:80px">\n          <i class="fa fa-spinner fa-spin"></i>\n        </span>\n      </div>\n    </div>\n    <div class="row graph_legend">\n      <div class="large-10 columns centered" id="host_mem_legend"></div>\n    </div>\n  </div>\n</div>'},useData:!0});return e.registerPartial("tabs/hosts-tab/panels/monitor/html",a),a}),define("tabs/hosts-tab/panels/monitor/panelId",["require"],function(){return"host_monitoring_tab"}),define("tabs/hosts-tab/panels/monitor",["require","opennebula/host","utils/notifier","utils/locale","utils/graphs","hbs!./monitor/html","../tabId","./monitor/panelId"],function(t){function e(t){return this.panelId=d,this.title=o.tr("Graphs"),this.icon="fa-bar-chart-o",this.element=t[u],this}function a(){return c()}function n(){return!1}function s(){return i.monitor({data:{id:this.element.ID,monitor:{monitor_resources:"HOST_SHARE/CPU_USAGE,HOST_SHARE/USED_CPU,HOST_SHARE/MAX_CPU,HOST_SHARE/MEM_USAGE,HOST_SHARE/USED_MEM,HOST_SHARE/MAX_MEM"}},success:function(t,e){for(var a=[{monitor_resources:"HOST_SHARE/CPU_USAGE,HOST_SHARE/USED_CPU,HOST_SHARE/MAX_CPU",labels:o.tr("Allocated")+","+o.tr("Real")+","+o.tr("Total"),humanize_figures:!1,div_graph:$("#host_cpu_graph"),div_legend:$("#host_cpu_legend")},{monitor_resources:"HOST_SHARE/MEM_USAGE,HOST_SHARE/USED_MEM,HOST_SHARE/MAX_MEM",labels:o.tr("Allocated")+","+o.tr("Real")+","+o.tr("Total"),humanize_figures:!0,div_graph:$("#host_mem_graph"),div_legend:$("#host_mem_legend")}],n=0;n<a.length;n++)l.plot(e,a[n])},error:r.onError}),!1}var i=t("opennebula/host"),r=t("utils/notifier"),o=t("utils/locale"),l=t("utils/graphs"),c=t("hbs!./monitor/html"),d=(t("../tabId"),t("./monitor/panelId")),u="HOST";return e.PANEL_ID=d,e.prototype.html=a,e.prototype.setup=n,e.prototype.onShow=s,e}),define("tabs/hosts-tab/panels/vms/panelId",["require"],function(){return"host_vms_tab"}),define("tabs/hosts-tab/panels/vms",["require","utils/locale","tabs/vms-tab/datatable","./vms/panelId"],function(t){function e(t){return this.title=s.tr("VMs"),this.icon="fa-cloud",this.element=t[l],this}function a(){var t=[];void 0!=this.element.VMS.ID&&(t=this.element.VMS.ID,$.isArray(t)||(t=[t]));var e={info:!0,select:!0,selectOptions:{read_only:!0,fixed_ids:t}};return this.vmsTable=new i(o,e),this.vmsTable.dataTableHTML}function n(){return this.vmsTable.initialize(),this.vmsTable.refreshResourceTableSelect(),!1}var s=t("utils/locale"),i=t("tabs/vms-tab/datatable"),r=t("./vms/panelId"),o=r+"VMsTable",l="HOST";return e.PANEL_ID=r,e.prototype.html=a,e.prototype.setup=n,e}),define("hbs!tabs/hosts-tab/panels/wilds/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<div class="row">\n  <div class="large-12 columns">\n    <button id="import_wilds" class="button tiny success right radius" >'+i((e.tr||t&&t.tr||s).call(t,"Import Wilds",{name:"tr",hash:{},data:n}))+'</button>\n    <table id="datatable_host_wilds" class="datatable twelve">\n      <thead>\n        <tr>\n          <th></th>\n          <th>'+i((e.tr||t&&t.tr||s).call(t,"VM name",{name:"tr",hash:{},data:n}))+"</th>\n          <th>"+i((e.tr||t&&t.tr||s).call(t,"Remote ID",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <tbody id="tbody_host_wilds"></tbody>\n    </table>\n  </div>\n</div>'},useData:!0});return e.registerPartial("tabs/hosts-tab/panels/wilds/html",a),a}),define("tabs/hosts-tab/panels/wilds/panelId",["require"],function(){return"host_wilds_tab"}),define("tabs/hosts-tab/panels/wilds",["require","foundation-datatables","utils/locale","../utils/can-import-wilds","opennebula/vm","opennebula/action","sunstone","utils/notifier","hbs!./wilds/html","./wilds/panelId"],function(t){function e(t){return this.title=s.tr("Wilds"),this.icon="fa-hdd-o",this.element=t[p.toUpperCase()],this}function a(){return d()}function n(t){var e=this;return i(this.element)||$("#import_wilds").hide(),e.dataTableWildHosts=$("#datatable_host_wilds",t).dataTable({bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:[0]},{sWidth:"35px",aTargets:[0]}]}),e.element.TEMPLATE.VM&&(wilds=e.element.TEMPLATE.VM,$.isArray(wilds)||(wilds=[wilds]),$.each(wilds,function(){var t=this.VM_NAME,a=t.replace(/ /g,"_").replace(/\./g,"_"),n=this.DEPLOY_ID,s=[['<input type="checkbox" class="import_wild_checker import_'+a+'" unchecked/>',t,n]];e.dataTableWildHosts.fnAddData(s),$(".import_"+a,e.dataTableWildHosts).data("wild_template",atob(this.IMPORT_TEMPLATE))})),delete e.element.TEMPLATE.WILDS,delete e.element.TEMPLATE.VM,$("#import_wilds",t).attr("disabled","disabled").on("click.disable",function(){return!1}),$(".import_wild_checker",t).off("change"),$(".import_wild_checker",t).on("change",function(){0==$(".import_wild_checker:checked",t).length?$("#import_wilds",t).attr("disabled","disabled").on("click.disable",function(){return!1}):$("#import_wilds",t).removeAttr("disabled").off("click.disable")}),t.off("click","#import_wilds"),t.on("click","#import_wilds",function(){$("#import_wilds",t).attr("disabled","disabled").on("click.disable",function(){return!1}),$("#import_wilds",t).html('<i class="fa fa-spinner fa-spin"></i>'),$(".import_wild_checker:checked","#datatable_host_wilds").each(function(){var a={vm:{vm_raw:$(this).data("wild_template")}},n=e.element.ID,i=$(this).closest("tr");r.create({timeout:!0,data:a,success:function(a,r){o.clear_cache("VM");var d={};d.host_id=n,d.ds_id=-1,d.enforce=!1,l.runAction("VM.silent_deploy_action",r.VM.ID,d),c.notifyCustom(s.tr("VM imported")," ID: "+r.VM.ID,!1),e.dataTableWildHosts.fnDeleteRow(i),$("#import_wilds",t).removeAttr("disabled").off("click.disable"),$("#import_wilds",t).html(s.tr("Import Wilds"))},error:function(e,a){var n;n=a.error.message?a.error.message:s.tr("Cannot contact server: is it running and reachable?"),c.notifyError(n),$("#import_wilds",t).removeAttr("disabled").off("click.disable"),$("#import_wilds",t).html(s.tr("Import Wilds"))}})})}),!1}t("foundation-datatables");var s=t("utils/locale"),i=t("../utils/can-import-wilds"),r=t("opennebula/vm"),o=t("opennebula/action"),l=t("sunstone"),c=t("utils/notifier"),d=t("hbs!./wilds/html"),u=t("./wilds/panelId"),p="Host";return e.PANEL_ID=u,e.prototype.html=a,e.prototype.setup=n,e}),define("hbs!tabs/hosts-tab/panels/esx/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<div id="datatable_host_esx_info_div" class="row">\n  <div class="large-12 columns">\n    <table id="datatable_host_esx" class="datatable twelve">\n      <thead>\n        <tr>\n          <th>'+i((e.tr||t&&t.tr||s).call(t,"Hostname",{name:"tr",hash:{},data:n}))+"</th>\n          <th>"+i((e.tr||t&&t.tr||s).call(t,"Status",{name:"tr",hash:{},data:n}))+"</th>\n          <th>"+i((e.tr||t&&t.tr||s).call(t,"Real CPU",{name:"tr",hash:{},data:n}))+"</th>\n          <th>"+i((e.tr||t&&t.tr||s).call(t,"Real Memory",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <tbody id="tbody_host_esx"></tbody>\n    </table>\n  </div>\n</div>'},useData:!0});return e.registerPartial("tabs/hosts-tab/panels/esx/html",a),a}),define("tabs/hosts-tab/panels/esx/panelId",["require"],function(){return"host_esx_tab"}),define("tabs/hosts-tab/panels/esx",["require","foundation-datatables","utils/locale","../utils/cpu-bars","../utils/memory-bars","hbs!./esx/html","./esx/panelId"],function(t){function e(t){if(this.title=s.tr("ESX"),this.icon="fa-hdd-o",this.element=t[c.toUpperCase()],"vcenter"!=this.element.TEMPLATE.HYPERVISOR)throw"Panel not available for this element";return this}function a(){return o()}function n(t){var e=this,a=$("#datatable_host_esx",t).dataTable({bSortClasses:!1,bDeferRender:!0}),n=[];e.element.TEMPLATE.HOST&&(e.element.TEMPLATE.HOST instanceof Array||(e.element.TEMPLATE.HOST=[e.element.TEMPLATE.HOST]),e.element.TEMPLATE.HOST instanceof Array&&$.each(e.element.TEMPLATE.HOST,function(){var t=i.html(this.element),e=r.html(this.element);n.push([this.HOSTNAME,this.STATE,t.real,e.real])}),a.fnAddData(n),delete e.element.TEMPLATE.HOST)}t("foundation-datatables");var s=t("utils/locale"),i=t("../utils/cpu-bars"),r=t("../utils/memory-bars"),o=t("hbs!./esx/html"),l=t("./esx/panelId"),c="Host";return e.PANEL_ID=l,e.prototype.html=a,e.prototype.setup=n,e}),define("hbs!tabs/hosts-tab/form-panels/create/wizard",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<form data-abide="ajax" id="'+o((s=null!=(s=e.formPanelId||(null!=t?t.formPanelId:t))?s:r,typeof s===i?s.call(t,{name:"formPanelId",hash:{},data:n}):s))+'Wizard" class="custom creation">\n  <div class="row">\n    <div class="large-6 columns">\n      <label for="host_type">'+o((e.tr||t&&t.tr||r).call(t,"Type",{name:"tr",hash:{},data:n}))+'</label>\n      <select id="host_type_mad" name="host_type">\n        <option value="kvm">'+o((e.tr||t&&t.tr||r).call(t,"KVM",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="xen">'+o((e.tr||t&&t.tr||r).call(t,"XEN",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="vmware">'+o((e.tr||t&&t.tr||r).call(t,"VMware",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="vcenter">'+o((e.tr||t&&t.tr||r).call(t,"vCenter",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="az">'+o((e.tr||t&&t.tr||r).call(t,"Microsoft Azure",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="ec2">'+o((e.tr||t&&t.tr||r).call(t,"Amazon EC2",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="sl">'+o((e.tr||t&&t.tr||r).call(t,"IBM Softlayer",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="dummy">'+o((e.tr||t&&t.tr||r).call(t,"Dummy",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="custom">'+o((e.tr||t&&t.tr||r).call(t,"Custom",{name:"tr",hash:{},data:n}))+'</option>\n      </select>\n    </div>\n    <div class="large-6 columns" id="cluster_select">\n      <label for="host_cluster_id">'+o((e.tr||t&&t.tr||r).call(t,"Cluster",{name:"tr",hash:{},data:n}))+'</label>\n      <div id="host_cluster_id" name="host_cluster_id"></div>\n    </div>\n  </div>\n  <div class="row">\n    <div class="large-6 columns" id="name_container">\n      <label for="name">'+o((e.tr||t&&t.tr||r).call(t,"Hostname",{name:"tr",hash:{},data:n}))+'</label>\n      <input type="text" name="name" id="name" />\n    </div>\n    <div class="large-6 columns">\n      <div class="manager clear row" id="vnm_mads">\n        <div class="large-12 columns">\n          <label for="vn">'+o((e.tr||t&&t.tr||r).call(t,"Networking",{name:"tr",hash:{},data:n}))+'</label>\n          <select id="vnm_mad" name="vn">\n            <option value="dummy">'+o((e.tr||t&&t.tr||r).call(t,"Default (dummy)",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="fw">'+o((e.tr||t&&t.tr||r).call(t,"Firewall",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="802.1Q">'+o((e.tr||t&&t.tr||r).call(t,"802.1Q",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="vxlan">'+o((e.tr||t&&t.tr||r).call(t,"VXLAN",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="ebtables">'+o((e.tr||t&&t.tr||r).call(t,"ebtables",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="ovswitch">'+o((e.tr||t&&t.tr||r).call(t,"Open vSwitch",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="vmware">'+o((e.tr||t&&t.tr||r).call(t,"VMware",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="custom">'+o((e.tr||t&&t.tr||r).call(t,"Custom",{name:"tr",hash:{},data:n}))+'</option>\n          </select>\n        </div>\n        <div class="large-12 columns">\n          <label>'+o((e.tr||t&&t.tr||r).call(t,"Custom VNM_MAD",{name:"tr",hash:{},data:n}))+'</label>\n          <input type="text" name="custom_vnm_mad" />\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="drivers">\n    <fieldset>\n      <legend>'+o((e.tr||t&&t.tr||r).call(t,"Drivers",{name:"tr",hash:{},data:n}))+'</legend>\n      <div class="row">\n        <div class="large-6 columns">\n          <div class="manager clear row" id="vmm_mads">\n            <div class="large-12 columns">\n              <label for="vmm">'+o((e.tr||t&&t.tr||r).call(t,"Virtualization",{name:"tr",hash:{},data:n}))+'</label>\n              <select id="vmm_mad" name="vmm">\n                <option value="kvm">'+o((e.tr||t&&t.tr||r).call(t,"KVM",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="xen">'+o((e.tr||t&&t.tr||r).call(t,"XEN",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="vmware">'+o((e.tr||t&&t.tr||r).call(t,"VMware",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="vcenter">'+o((e.tr||t&&t.tr||r).call(t,"vCenter",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="az">'+o((e.tr||t&&t.tr||r).call(t,"Microsoft Azure",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="ec2">'+o((e.tr||t&&t.tr||r).call(t,"Amazon EC2",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="sl">'+o((e.tr||t&&t.tr||r).call(t,"IBM Softlayer",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="dummy">'+o((e.tr||t&&t.tr||r).call(t,"Dummy",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="custom">'+o((e.tr||t&&t.tr||r).call(t,"Custom",{name:"tr",hash:{},data:n}))+'</option>\n              </select>\n            </div>\n            <div class="large-12 columns">\n              <label>'+o((e.tr||t&&t.tr||r).call(t,"Custom VMM_MAD",{name:"tr",hash:{},data:n}))+'</label>\n              <input type="text" name="custom_vmm_mad" />\n            </div>\n          </div>\n        </div>\n        <div class="large-6 columns">\n          <div class="manager clear row" id="im_mads">\n            <div class="large-12 columns">\n              <label for="im">'+o((e.tr||t&&t.tr||r).call(t,"Information",{name:"tr",hash:{},data:n}))+'</label>\n              <select id="im_mad" name="im">\n                <option value="kvm">'+o((e.tr||t&&t.tr||r).call(t,"KVM",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="xen">'+o((e.tr||t&&t.tr||r).call(t,"XEN",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="vmware">'+o((e.tr||t&&t.tr||r).call(t,"VMware",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="vcenter">'+o((e.tr||t&&t.tr||r).call(t,"vCenter",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="az">'+o((e.tr||t&&t.tr||r).call(t,"Microsoft Azure",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="ec2">'+o((e.tr||t&&t.tr||r).call(t,"Amazon EC2",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="sl">'+o((e.tr||t&&t.tr||r).call(t,"IBM Softlayer",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="dummy">'+o((e.tr||t&&t.tr||r).call(t,"Dummy",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="custom">'+o((e.tr||t&&t.tr||r).call(t,"Custom",{name:"tr",hash:{},data:n}))+'</option>\n              </select>\n            </div>\n            <div class="large-12 columns">\n              <label>'+o((e.tr||t&&t.tr||r).call(t,"Custom IM_MAD",{name:"tr",hash:{},data:n}))+':</label>\n              <input type="text" name="custom_im_mad" />\n            </div>\n          </div>\n        </div>\n      </div>\n    </fieldset>\n  </div>\n  <div class="row vcenter_credentials hidden">\n    <fieldset>\n      <legend>'+o((e.tr||t&&t.tr||r).call(t,"vCenter",{name:"tr",hash:{},data:n}))+'</legend>\n      <div class="row">\n        <div class="large-6 columns">\n          <label for="vcenter_user">'+o((e.tr||t&&t.tr||r).call(t,"User",{name:"tr",hash:{},data:n}))+'</label>\n          <input type="text" name="vcenter_user" id="vcenter_user" />\n        </div>\n        <div class="large-6 columns">\n          <label for="vcenter_host">'+o((e.tr||t&&t.tr||r).call(t,"Hostname",{name:"tr",hash:{},data:n}))+'</label>\n          <input type="text" name="vcenter_host" id="vcenter_host" />\n        </div>\n      </div>\n      <div class="row">\n        <div class="large-6 columns">\n          <label for="vcenter_password">'+o((e.tr||t&&t.tr||r).call(t,"Password",{name:"tr",hash:{},data:n}))+'</label>\n          <input type="password" name="vcenter_password" id="vcenter_password" />\n        </div>\n        <div class="large-6 columns">\n          <br>\n          <a class="button radius small right" id="get_vcenter_clusters">'+o((e.tr||t&&t.tr||r).call(t,"Get vCenter Clusters",{name:"tr",hash:{},data:n}))+'</a>\n        </div>\n      </div>\n      <div class="vcenter_clusters"></div>\n      <br>\n      <div class="vcenter_templates"></div>\n      <br>\n      <br>\n      <div class="vcenter_vms"></div>\n      <br>\n      <div class="vcenter_networks"></div>\n      <div class="row import_vcenter_clusters_div hidden">\n        <div class="large-12 columns">\n          <br>\n          <a class="button radius small right success" id="import_vcenter_clusters">'+o((e.tr||t&&t.tr||r).call(t,"Import",{name:"tr",hash:{},data:n}))+"</a>\n        </div>\n      </div>\n    </fieldset>\n  </div>\n</form>"},useData:!0});return e.registerPartial("tabs/hosts-tab/form-panels/create/wizard",a),a}),define("tabs/hosts-tab/form-panels/create",["require","utils/form-panels/form-panel","sunstone","utils/locale","utils/tips","utils/notifier","utils/resource-select","hbs!./create/wizard","./create/formPanelId","../tabId"],function(t){function e(){this.formPanelId=h,this.tabId=f,this.actions={create:{title:l.tr("Create Host"),buttonText:l.tr("Create"),resetButton:!0}},r.call(this)}function a(){return p({formPanelId:this.formPanelId})}function n(t){return $(".drivers",t).hide(),$("#host_type_mad",t).on("change",function(){$("#vmm_mad",t).val(this.value).change(),$("#im_mad",t).val(this.value).change(),"custom"==this.value?($(".vcenter_credentials",t).hide(),$("#vnm_mads",t).show(),$("#name_container",t).show(),$("#create_host_submit",t).show(),$(".drivers",t).show()):"vcenter"==this.value?($("#vnm_mads",t).hide(),$("#name_container",t).hide(),$(".vcenter_credentials",t).show(),$("#create_host_submit",t).hide(),$(".drivers",t).hide()):($(".vcenter_credentials",t).hide(),$("#vnm_mads",t).show(),$("#name_container",t).show(),$("#create_host_submit",t).show(),$(".drivers",t).hide())}),$('input[name="custom_vmm_mad"],input[name="custom_im_mad"],input[name="custom_vnm_mad"]',t).parent().hide(),$("select#vmm_mad",t).change(function(){"custom"==$(this).val()?$('input[name="custom_vmm_mad"]').parent().show():$('input[name="custom_vmm_mad"]').parent().hide()}),$("select#im_mad",t).change(function(){"custom"==$(this).val()?$('input[name="custom_im_mad"]').parent().show():$('input[name="custom_im_mad"]').parent().hide()}),$("select#vnm_mad",t).change(function(){"custom"==$(this).val()?$('input[name="custom_vnm_mad"]').parent().show():$('input[name="custom_vnm_mad"]').parent().hide()}),$("#create_host_form").on("keyup keypress",function(t){var e=t.keyCode||t.which;return 13==e?(t.preventDefault(),!1):void 0}),c.setup(),!1}function s(t){var e=$("#name",t).val();if(!e)return o.hideFormPanelLoading(this.tabId),d.notifyError(l.tr("Host name missing!")),!1;var a=$("#host_cluster_id .resource_list_select",t).val();a||(a="-1");var n=$("select#vmm_mad",t).val();n="custom"==n?$('input[name="custom_vmm_mad"]').val():n;var s=$("select#im_mad",t).val();s="custom"==s?$('input[name="custom_im_mad"]').val():s;var i=$("select#vnm_mad",t).val();i="custom"==i?$('input[name="custom_vnm_mad"]').val():i;var r={host:{name:e,vm_mad:n,vnm_mad:i,im_mad:s,cluster_id:a}};return o.runAction("Host.create",r),!1}function i(t){$("#name",t).focus();var e=$("#host_cluster_id .resource_list_select",t).val();return e||(e="-1"),u.insert("#host_cluster_id",t,"Cluster",e,!1),!1}var r=t("utils/form-panels/form-panel"),o=t("sunstone"),l=t("utils/locale"),c=t("utils/tips"),d=t("utils/notifier"),u=t("utils/resource-select"),p=t("hbs!./create/wizard"),h=t("./create/formPanelId"),f=t("../tabId");return e.FORM_PANEL_ID=h,e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype.htmlWizard=a,e.prototype.submitWizard=s,e.prototype.onShow=i,e.prototype.setup=n,e}),define("tabs/hosts-tab",["require","utils/locale","./hosts-tab/buttons","./hosts-tab/actions","./hosts-tab/datatable","./hosts-tab/tabId","./hosts-tab/panels/info","./hosts-tab/panels/monitor","./hosts-tab/panels/vms","./hosts-tab/panels/wilds","./hosts-tab/panels/esx","./hosts-tab/form-panels/create"],function(t){var e=t("utils/locale"),a=t("./hosts-tab/buttons"),n=t("./hosts-tab/actions"),s=t("./hosts-tab/datatable"),i=t("./hosts-tab/tabId"),r="dataTableHosts",o=[t("./hosts-tab/panels/info"),t("./hosts-tab/panels/monitor"),t("./hosts-tab/panels/vms"),t("./hosts-tab/panels/wilds"),t("./hosts-tab/panels/esx")],l=[t("./hosts-tab/form-panels/create")],c={tabId:i,title:e.tr("Hosts"),tabClass:"subTab",parentTab:"infra-tab",listHeader:'<i class="fa fa-fw fa-hdd-o"></i>&emsp;'+e.tr("Hosts"),infoHeader:'<i class="fa fa-fw fa-hdd-o"></i>&emsp;'+e.tr("Host"),subheader:'<span class="total_hosts"/> <small>'+e.tr("TOTAL")+'</small>&emsp;        <span class="on_hosts"/> <small>'+e.tr("ON")+'</small>&emsp;        <span class="off_hosts"/> <small>'+e.tr("OFF")+'</small>&emsp;        <span class="error_hosts"/> <small>'+e.tr("ERROR")+"</small>",resource:"Host",content:"",buttons:a,actions:n,dataTable:new s(r,{actions:!0,info:!0}),panels:o,formPanels:l};return c}),define("tabs/datastores-tab/buttons",["require","utils/locale"],function(t){var e=t("utils/locale"),a={"Datastore.refresh":{type:"action",layout:"refresh",alwaysActive:!0},"Datastore.create_dialog":{type:"create_dialog",layout:"create"},"Datastore.addtocluster":{type:"confirm_with_select",text:e.tr("Select cluster"),select:"Cluster",layout:"main",tip:e.tr("Select the destination cluster:")},"Datastore.chown":{type:"confirm_with_select",text:e.tr("Change owner"),select:"User",layout:"user_select",tip:e.tr("Select the new owner")+":"},"Datastore.chgrp":{type:"confirm_with_select",text:e.tr("Change group"),select:"Group",layout:"user_select",tip:e.tr("Select the new group")+":"},"Datastore.delete":{type:"confirm",text:e.tr("Delete"),layout:"del"},"Datastore.enable":{type:"action",layout:"more_select",text:e.tr("Enable")},"Datastore.disable":{type:"action",layout:"more_select",text:e.tr("Disable")}};return a}),define("tabs/datastores-tab/dialogs/create/dialogId",["require"],function(){return"createDatastoreDialog"}),define("tabs/datastores-tab/actions",["require","sunstone","utils/notifier","utils/locale","opennebula/datastore","opennebula/cluster","opennebula/action","./tabId","./dialogs/create/dialogId"],function(t){var e=t("sunstone"),a=t("utils/notifier"),n=t("utils/locale"),s=t("opennebula/datastore"),i=t("opennebula/cluster"),r=t("opennebula/action"),o=t("./tabId"),l=t("./dialogs/create/dialogId"),c={"Datastore.create":{type:"create",call:s.create,callback:function(t,s){e.getDialog(l).hide(),e.getDialog(l).reset(),e.getDataTable(o).addElement(t,s),a.notifyCustom(n.tr("Datastore created")," ID: "+s.DATASTORE.ID,!1)},error:a.onError},"Datastore.create_dialog":{type:"custom",call:function(){e.getDialog(l).show()}},"Datastore.list":{type:"list",call:s.list,callback:function(t,a){e.getDataTable(o).updateView(t,a)},error:a.onError},"Datastore.show":{type:"single",call:s.show,callback:function(t,a){e.getDataTable(o).updateElement(t,a),e.rightInfoVisible($("#"+o))&&e.insertPanels(o,a)},error:a.onError},"Datastore.refresh":{type:"custom",call:function(){var t=$("#"+o);e.rightInfoVisible(t)?e.runAction("Datastore.show",e.rightInfoResourceId(t)):(e.getDataTable(o).waitingNodes(),e.runAction("Datastore.list",{force:!0}))},error:a.onError},"Datastore.fetch_permissions":{type:"single",call:s.show,callback:function(){},error:a.onError},"Datastore.update_template":{type:"single",call:s.update,callback:function(t){e.runAction("Datastore.show",t.request.data[0][0])},error:a.onError},"Datastore.update":{type:"single",call:s.update,callback:function(){e.runAction("Datastore.show",request.request.data[0][0])},error:a.onError},"Datastore.delete":{type:"multiple",call:s.del,callback:function(t,a){e.getDataTable(o).deleteElement(t,a)},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"Datastore.chown":{type:"multiple",call:s.chown,callback:function(t){e.runAction("Datastore.show",t.request.data[0][0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError},"Datastore.chgrp":{type:"multiple",call:s.chgrp,callback:function(t){e.runAction("Datastore.show",t.request.data[0][0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError},"Datastore.chmod":{type:"single",call:s.chmod,callback:function(t){e.runAction("Datastore.show",t.request.data[0])},error:a.onError},"Datastore.addtocluster":{type:"multiple",call:function(t){var n=t.data.extra_param,o=t.data.id;-1==n?s.show({data:{id:o},success:function(t,n){var s=n.DATASTORE.CLUSTER_ID;-1!=s?i.deldatastore({data:{id:s,extra_param:o},success:function(){r.clear_cache("DATASTORE"),e.runAction("Datastore.show",o)},error:a.onError}):(r.clear_cache("DATASTORE"),e.runAction("Datastore.show",o))},error:a.onError}):i.adddatastore({data:{id:n,extra_param:o},success:function(){r.clear_cache("DATASTORE"),e.runAction("Datastore.show",o)},error:a.onError})},elements:function(){return e.getDataTable(o).elements()}},"Datastore.rename":{type:"single",call:s.rename,callback:function(t){e.runAction("Datastore.show",t.request.data[0][0])},error:a.onError,notify:!0},"Datastore.enable":{type:"multiple",call:s.enable,callback:function(t){e.runAction("Datastore.show",t.request.data[0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"Datastore.disable":{type:"multiple",call:s.disable,callback:function(t){e.runAction("Datastore.show",t.request.data[0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0}};return c}),define("hbs!tabs/datastores-tab/dialogs/create/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<div id="'+o((s=null!=(s=e.dialogId||(null!=t?t.dialogId:t))?s:r,typeof s===i?s.call(t,{name:"dialogId",hash:{},data:n}):s))+'" class="reveal-modal medium max-height" role="dialog" data-reveal>\n  <div class="row">\n    <div class="large-5 columns">\n      <h3 id="create_cluster_header" class="subheader">'+o((e.tr||t&&t.tr||r).call(t,"Create Datastore",{name:"tr",hash:{},data:n}))+'</h3>\n    </div>\n    <div class="large-7 columns">\n      <dl class="tabs right wizard_tabs" data-tab>\n        <dd class="active">\n          <a href="#datastore_easyTab">'+o((e.tr||t&&t.tr||r).call(t,"Wizard",{name:"tr",hash:{},data:n}))+'</a>\n        </dd>\n        <dd>\n          <a href="#datastore_manualTab">'+o((e.tr||t&&t.tr||r).call(t,"Advanced mode",{name:"tr",hash:{},data:n}))+'</a>\n        </dd>\n      </dl>\n    </div>\n  </div>\n  <div class="reveal-body">\n    <form id="'+o((s=null!=(s=e.dialogId||(null!=t?t.dialogId:t))?s:r,typeof s===i?s.call(t,{name:"dialogId",hash:{},data:n}):s))+'Form" action="" class="creation">\n      <div class="tabs-content">\n        <div id="datastore_easyTab" class="active content">\n          <div class="row">\n            <div class="large-6 columns">\n              <label for="name" >'+o((e.tr||t&&t.tr||r).call(t,"Name",{name:"tr",hash:{},data:n}))+':</label>\n              <input type="text" name="name" id="name"/>\n            </div>\n          </div>\n          <div class="row">\n            <div class="large-6 columns">\n              <label for="presets">'+o((e.tr||t&&t.tr||r).call(t,"Presets",{name:"tr",hash:{},data:n}))+'</label>\n              <select id="presets" name="presets">\n                <option value="fs">'+o((e.tr||t&&t.tr||r).call(t,"Filesystem",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="vmware_vmfs">'+o((e.tr||t&&t.tr||r).call(t,"VMware VMFS",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="block_lvm">'+o((e.tr||t&&t.tr||r).call(t,"Block LVM",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="fs_lvm">'+o((e.tr||t&&t.tr||r).call(t,"FS LVM",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="ceph">'+o((e.tr||t&&t.tr||r).call(t,"Ceph",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="gluster">'+o((e.tr||t&&t.tr||r).call(t,"Gluster",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="dev">'+o((e.tr||t&&t.tr||r).call(t,"Devices",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="custom">'+o((e.tr||t&&t.tr||r).call(t,"Custom",{name:"tr",hash:{},data:n}))+'</option>\n              </select>\n            </div>\n            <div class="large-6 columns">\n              <label for="cluster">'+o((e.tr||t&&t.tr||r).call(t,"Cluster",{name:"tr",hash:{},data:n}))+'</label>\n              <div id="cluster_id" name="cluster_id"></div>\n            </div>\n          </div>\n          <div class="row">\n            <div class="large-12 columns">\n              <fieldset>\n                <legend>'+o((e.tr||t&&t.tr||r).call(t,"Type",{name:"tr",hash:{},data:n}))+'</legend>\n                <div class="large-12 columns text-center">\n                  <input id="image_ds_type" type="radio" name="ds_type" value="IMAGE_DS" checked/>\n                  <label for="image_ds_type">'+o((e.tr||t&&t.tr||r).call(t,"Images",{name:"tr",hash:{},data:n}))+'</label>\n                  <input id="system_ds_type" type="radio" name="ds_type" value="SYSTEM_DS" />\n                  <label for="system_ds_type">'+o((e.tr||t&&t.tr||r).call(t,"System",{name:"tr",hash:{},data:n}))+'</label>\n                  <input id="file_ds_type" type="radio" name="ds_type" value="FILE_DS" />\n                  <label for="file_ds_type">'+o((e.tr||t&&t.tr||r).call(t,"Files",{name:"tr",hash:{},data:n}))+'</label>\n                </div>\n              </fieldset>\n            </div>\n          </div>\n          <div class="row">\n            <div class="large-12 columns">\n              <fieldset>\n                <legend>'+o((e.tr||t&&t.tr||r).call(t,"Managers",{name:"tr",hash:{},data:n}))+'</legend>\n                <div class="large-6 columns">\n                  <label for="ds_mad">'+o((e.tr||t&&t.tr||r).call(t,"Datastore",{name:"tr",hash:{},data:n}))+'</label>\n                  <select id="ds_mad" name="ds_mad">\n                    <option value="fs">'+o((e.tr||t&&t.tr||r).call(t,"Filesystem",{name:"tr",hash:{},data:n}))+'</option>\n                    <option value="vmware">'+o((e.tr||t&&t.tr||r).call(t,"VMware",{name:"tr",hash:{},data:n}))+'</option>\n                    <option value="lvm">'+o((e.tr||t&&t.tr||r).call(t,"LVM",{name:"tr",hash:{},data:n}))+'</option>\n                    <option value="vmfs">'+o((e.tr||t&&t.tr||r).call(t,"VMFS",{name:"tr",hash:{},data:n}))+'</option>\n                    <option value="ceph">'+o((e.tr||t&&t.tr||r).call(t,"Ceph",{name:"tr",hash:{},data:n}))+'</option>\n                    <option value="dev">'+o((e.tr||t&&t.tr||r).call(t,"Devices",{name:"tr",hash:{},data:n}))+'</option>\n                    <option value="custom">'+o((e.tr||t&&t.tr||r).call(t,"Custom",{name:"tr",hash:{},data:n}))+"</option>\n                  </select>\n                  <div>\n                    <label>"+o((e.tr||t&&t.tr||r).call(t,"Custom DS_MAD",{name:"tr",hash:{},data:n}))+':</label>\n                    <input type="text" name="ds_tab_custom_ds_mad" />\n                  </div>\n                </div>\n                <div class="large-6 columns">\n                  <label for="tm_mad">'+o((e.tr||t&&t.tr||r).call(t,"Transfer",{name:"tr",hash:{},data:n}))+':</label>\n                  <select id="tm_mad" name="tm_mad">\n                    <option value="shared">'+o((e.tr||t&&t.tr||r).call(t,"Shared",{name:"tr",hash:{},data:n}))+'</option>\n                    <option value="ssh">'+o((e.tr||t&&t.tr||r).call(t,"SSH",{name:"tr",hash:{},data:n}))+'</option>\n                    <option value="qcow2">'+o((e.tr||t&&t.tr||r).call(t,"qcow2",{name:"tr",hash:{},data:n}))+'</option>\n                    <option value="lvm">'+o((e.tr||t&&t.tr||r).call(t,"LVM",{name:"tr",hash:{},data:n}))+'</option>\n                    <option value="fs_lvm">'+o((e.tr||t&&t.tr||r).call(t,"FS LVM",{name:"tr",hash:{},data:n}))+'</option>\n                    <option value="vmfs">'+o((e.tr||t&&t.tr||r).call(t,"VMFS",{name:"tr",hash:{},data:n}))+'</option>\n                    <option value="ceph">'+o((e.tr||t&&t.tr||r).call(t,"Ceph",{name:"tr",hash:{},data:n}))+'</option>\n                    <option value="dev">'+o((e.tr||t&&t.tr||r).call(t,"Devices",{name:"tr",hash:{},data:n}))+'</option>\n                    <option value="custom">'+o((e.tr||t&&t.tr||r).call(t,"Custom",{name:"tr",hash:{},data:n}))+"</option>\n                  </select>\n                  <div>\n                    <label>"+o((e.tr||t&&t.tr||r).call(t,"Custom TM_MAD",{name:"tr",hash:{},data:n}))+':</label>\n                    <input type="text" name="ds_tab_custom_tm_mad" />\n                  </div>\n                </div>\n              </fieldset>\n            </div>\n          </div>\n          <div class="row">\n            <div class="large-6 columns">\n              <label for="disk_type">'+o((e.tr||t&&t.tr||r).call(t,"Disk type",{name:"tr",hash:{},data:n}))+':</label>\n              <select id="disk_type" name="disk_type">\n                <option value="file">'+o((e.tr||t&&t.tr||r).call(t,"File",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="block">'+o((e.tr||t&&t.tr||r).call(t,"Block",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="RBD">'+o((e.tr||t&&t.tr||r).call(t,"RBD",{name:"tr",hash:{},data:n}))+'</option>\n                <option value="gluster">'+o((e.tr||t&&t.tr||r).call(t,"Gluster",{name:"tr",hash:{},data:n}))+'</option>\n              </select>\n            </div>\n          </div>\n          <div class="row">\n            <div class="large-12 columns">\n              <label for="safe_dirs">\n                '+o((e.tr||t&&t.tr||r).call(t,"Safe Directories",{name:"tr",hash:{},data:n}))+'\n                <span class="tip">\n                  '+o((e.tr||t&&t.tr||r).call(t,"If you need to un-block a directory under one of the RESTRICTED_DIRS",{name:"tr",hash:{},data:n}))+'\n                </span>\n              </label>\n              <input type="text" name="safe_dirs" id="safe_dirs" />\n            </div>\n            <div class="large-12 columns">\n              <label for="restricted_dirs">\n                '+o((e.tr||t&&t.tr||r).call(t,"Restricted Directories",{name:"tr",hash:{},data:n}))+'\n                <span class="tip">\n                  '+o((e.tr||t&&t.tr||r).call(t,"Paths that can not be used to register images. A space separated list of paths. This will prevent users registering important files as VM images and accessing them thourgh their VMs. OpenNebula will automatically add its configuration directories: /var/lib/one, /etc/one and oneadmin's home ($HOME).",{name:"tr",hash:{},data:n}))+'\n                </span>\n              </label>\n              <input type="text" name="restricted_dirs" id="restricted_dirs" />\n            </div>\n            <div class="large-6 columns">\n              <label for="base_path">\n                '+o((e.tr||t&&t.tr||r).call(t,"Base Path",{name:"tr",hash:{},data:n}))+'\n                <span class="tip">\n                  '+o((e.tr||t&&t.tr||r).call(t,"When needed, the front-end will access the datastores using BASE_PATH (defaults to /var/lib/one/datastores).",{name:"tr",hash:{},data:n}))+'\n                </span>\n              </label>\n              <input type="text" name="base_path" id="base_path" />\n            </div>\n            <div class="large-6 columns">\n              <label for="limit_transfer_bw">\n                '+o((e.tr||t&&t.tr||r).call(t,"Transfer BW Limit",{name:"tr",hash:{},data:n}))+'\n                <span class="tip">\n                  '+o((e.tr||t&&t.tr||r).call(t,"Specify the maximum transfer rate in bytes/second when downloading images from a http/https URL. Suffixes K, M or G can be used.",{name:"tr",hash:{},data:n}))+'\n                </span>\n              </label>\n              <input type="text" name="limit_transfer_bw" id="limit_transfer_bw" />\n            </div>\n            <div class="large-6 columns">\n              <label for="limit_mb">\n                '+o((e.tr||t&&t.tr||r).call(t,"Limit",{name:"tr",hash:{},data:n}))+'\n                <span class="tip">\n                  '+o((e.tr||t&&t.tr||r).call(t,"Optional limit, in MB. If set, OpenNebula will only use this amount of storage, instead of the whole free disk.",{name:"tr",hash:{},data:n}))+'\n                </span>\n              </label>\n              <input type="text" name="limit_mb" id="limit_mb" />\n            </div>\n            <div class="large-12 columns">\n              <input id="no_decompress" type="checkbox" name="no_decompress" value="YES" />\n              <label for="no_decompress">'+o((e.tr||t&&t.tr||r).call(t,"Do not try to untar or decompress",{name:"tr",hash:{},data:n}))+'</label>\n            </div>\n            <div class="large-12 columns">\n              <input id="datastore_capacity_check" type="checkbox" name="datastore_capacity_check" value="YES" />\n              <label for="datastore_capacity_check">\n                '+o((e.tr||t&&t.tr||r).call(t,"Check available capacity of the datastore before creating a new image",{name:"tr",hash:{},data:n}))+'\n              </label>\n            </div>\n            <div class="large-12 columns">\n              <label for="bridge_list">\n                '+o((e.tr||t&&t.tr||r).call(t,"Host Bridge List",{name:"tr",hash:{},data:n}))+'\n                <span class="tip">\n                  '+o((e.tr||t&&t.tr||r).call(t,"Space separated list of Server names or IPs where OpenNebula will be staging the new images into. This server will act as the entry point for new inmages in the datastore.",{name:"tr",hash:{},data:n}))+'\n                </span>\n              </label>\n              <input type="text" name="bridge_list" id="bridge_list" />\n            </div>\n            <div class="large-6 columns">\n              <label for="ds_tmp_dir">\n                '+o((e.tr||t&&t.tr||r).call(t,"DS Tmp Dir",{name:"tr",hash:{},data:n}))+'\n                <span class="tip">\n                  '+o((e.tr||t&&t.tr||r).call(t,"Path in the OpenNebula front-end to be used as a buffer to stage in files in vmfs datastores.",{name:"tr",hash:{},data:n}))+'\n                </span>\n              </label>\n              <input type="text" name="ds_tmp_dir" id="ds_tmp_dir" />\n            </div>\n            <div class="large-6 columns">\n              <label for="vg_name">'+o((e.tr||t&&t.tr||r).call(t,"Volume Group Name",{name:"tr",hash:{},data:n}))+'</label>\n              <input type="text" name="vg_name" id="vg_name" />\n            </div>\n            <div class="large-6 columns">\n              <label for="gluster_host">\n                '+o((e.tr||t&&t.tr||r).call(t,"Gluster Host",{name:"tr",hash:{},data:n}))+'\n                <span class="tip">\n                  '+o((e.tr||t&&t.tr||r).call(t,"Host and port of one (and only one) Gluster server (host:port)",{name:"tr",hash:{},data:n}))+'\n                </span>\n              </label>\n              <input type="text" name="gluster_host" id="gluster_host" />\n            </div>\n            <div class="large-6 columns">\n              <label for="gluster_volume">\n                '+o((e.tr||t&&t.tr||r).call(t,"Gluster Volume",{name:"tr",hash:{},data:n}))+'\n                <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Gluster volume to use for the datastore",{name:"tr",hash:{},data:n}))+'</span>\n              </label>\n              <input type="text" name="gluster_volume" id="gluster_volume" />\n            </div>\n            <div class="large-6 columns">\n              <label for="pool_name">\n                '+o((e.tr||t&&t.tr||r).call(t,"Pool Name",{name:"tr",hash:{},data:n}))+'\n                <span class="tip">\n                  '+o((e.tr||t&&t.tr||r).call(t,"The OpenNebula Ceph pool name. Defaults to 'one' (this pool must exist before using the drivers).",{name:"tr",hash:{},data:n}))+'\n                </span>\n              </label>\n              <input type="text" name="pool_name" id="pool_name" />\n            </div>\n            <div class="large-6 columns">\n              <label for="ceph_host">\n                '+o((e.tr||t&&t.tr||r).call(t,"Ceph Host",{name:"tr",hash:{},data:n}))+'\n                <span class="tip">\n                  '+o((e.tr||t&&t.tr||r).call(t,"Space-separated list of Ceph monitors. Example: host1 host2:port2 host3 host4:port4 (if no port is specified, the default one is chosen) (Required for Libvirt 1.x when cephx is enabled).",{name:"tr",hash:{},data:n}))+'\n                </span>\n              </label>\n              <input type="text" name="ceph_host" id="ceph_host" />\n            </div>\n            <div class="large-6 columns">\n              <label for="ceph_user">\n                '+o((e.tr||t&&t.tr||r).call(t,"Ceph User",{name:"tr",hash:{},data:n}))+'\n                <span class="tip">\n                  '+o((e.tr||t&&t.tr||r).call(t,"The OpenNebula Ceph user name. If set it is used by RBD commands. This ceph user must exist before using the drivers. Required for Libvirt 1.x when cephx is enabled .",{name:"tr",hash:{},data:n}))+'\n                </span>\n              </label>\n              <input type="text" name="ceph_user" id="ceph_user" />\n            </div>\n            <div class="large-6 columns">\n              <label for="ceph_secret">\n                '+o((e.tr||t&&t.tr||r).call(t,"Ceph Secret",{name:"tr",hash:{},data:n}))+'\n                <span class="tip">\n                  '+o((e.tr||t&&t.tr||r).call(t,"A generated UUID for a LibVirt secret (to hold the CephX authentication key in Libvirt on each hypervisor). This should be generated when creating the Ceph datastore in OpenNebula. (Required for Libvirt 1.x when cephx is enabled).",{name:"tr",hash:{},data:n}))+'\n                </span>\n              </label>\n              <input type="text" name="ceph_secret" id="ceph_secret" />\n            </div>\n            <div class="large-6 columns">\n              <label class="fs" for="staging_dir">\n                '+o((e.tr||t&&t.tr||r).call(t,"Staging Dir",{name:"tr",hash:{},data:n}))+'\n                <span class="tip">\n                  '+o((e.tr||t&&t.tr||r).call(t,"FS: Default path where images will be temporarily copied to in the host carrying out the registration operation (chosen from the bridge list). If empty, defaults to /var/tmp.",{name:"tr",hash:{},data:n}))+"\n                  <br>\n                  <br>\n                  "+o((e.tr||t&&t.tr||r).call(t,"Ceph: Default path for image operations in the OpenNebula Ceph frontend.",{name:"tr",hash:{},data:n}))+'\n                </span>\n              </label>\n              <input type="text" name="staging_dir" id="staging_dir" />\n            </div>\n            <div class="large-6 columns">\n              <label for="rbd_format">\n                '+o((e.tr||t&&t.tr||r).call(t,"RBD Format",{name:"tr",hash:{},data:n}))+'\n                <span class="tip">\n                  '+o((e.tr||t&&t.tr||r).call(t,"By default RBD Format 2 will be used. If RBD_FORMAT=2 is specified then when instantiating non-persistent images the Ceph driver will perform rbd snap instead of rbd copy.",{name:"tr",hash:{},data:n}))+'\n                </span>\n              </label>\n              <input type="text" name="rbd_format" id="rbd_format" />\n            </div>\n          </div>\n          <div class="reveal-footer">\n            <div class="form_buttons">\n              <button class="button radius right success" type="submit" id="create_datastore_submit" value="OpenNebula.Datastore.create">'+o((e.tr||t&&t.tr||r).call(t,"Create",{name:"tr",hash:{},data:n}))+'</button>\n              <button class="button radius secondary resetDialog" type="reset" value="reset">'+o((e.tr||t&&t.tr||r).call(t,"Reset",{name:"tr",hash:{},data:n}))+'</button>\n            </div>\n          </div>\n        </div>\n        <div id="datastore_manualTab" class="content">\n          <div class="row">\n            <div class="columns large-6">\n              <label for="datastore_cluster_raw">'+o((e.tr||t&&t.tr||r).call(t,"Cluster",{name:"tr",hash:{},data:n}))+'</label>\n              <div id="datastore_cluster_raw" name="datastore_cluster_raw"></div>\n            </div>\n          </div>\n          <div class="row">\n            <div class="columns large-12">\n              <textarea id="template" rows="15"></textarea>\n            </div>\n          </div>\n          <div class="reveal-footer">\n            <div class="form_buttons">\n              <button class="button success radius right" id="create_datastore_submit_manual" value="datastore/create">'+o((e.tr||t&&t.tr||r).call(t,"Create",{name:"tr",hash:{},data:n}))+'</button>\n              <button class="button secondary radius resetDialog" type="reset" value="reset">'+o((e.tr||t&&t.tr||r).call(t,"Reset",{name:"tr",hash:{},data:n}))+'</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </form>\n    <a class="close-reveal-modal">&#215;</a>\n  </div>\n</div>'
},useData:!0});return e.registerPartial("tabs/datastores-tab/dialogs/create/html",a),a}),define("tabs/datastores-tab/dialogs/create",["require","utils/dialogs/dialog","hbs!./create/html","sunstone","utils/notifier","utils/tips","utils/resource-select","./create/dialogId"],function(t){function e(){this.dialogId=y,f.call(this)}function a(){return m({dialogId:y})}function n(t){$("#name",t).focus();var e=$("div#cluster_id .resource_list_select",t).val();e||(e="-1");var a=$("div#datastore_cluster_raw .resource_list_select",t).val();return a||(a="-1"),g.insert("div#cluster_id",t,"Cluster",e,!1),g.insert("div#datastore_cluster_raw",t,"Cluster",a,!1),!1}function s(t){v.setup(t),$('input[name="ds_tab_custom_ds_mad"],input[name="ds_tab_custom_tm_mad"]',t).parent().hide(),$("select#ds_mad",t).change(function(){"custom"==$(this).val()?$('input[name="ds_tab_custom_ds_mad"]').parent().show():$('input[name="ds_tab_custom_ds_mad"]').parent().hide()}),$("select#tm_mad",t).change(function(){"custom"==$(this).val()?$('input[name="ds_tab_custom_tm_mad"]').parent().show():$('input[name="ds_tab_custom_tm_mad"]').parent().hide()}),$("#presets").change(function(){i(t);var e=$(this).val();switch(e){case"fs":r();break;case"vmware_vmfs":o();break;case"block_lvm":c();break;case"fs_lvm":d();break;case"ceph":l();break;case"gluster":u();break;case"dev":p();break;case"custom":h()}}),$("#create_datastore_submit",t).click(function(){var e=$("#name",t).val(),a=$(".resource_list_select",$("#cluster_id",t)).val(),n=$("input[name=ds_type]:checked",t).val(),s=$("#ds_mad",t).val();s="custom"==s?$('input[name="ds_tab_custom_ds_mad"]').val():s;var i=$("#tm_mad",t).val();i="custom"==i?$('input[name="ds_tab_custom_tm_mad"]').val():i;var r=$("#disk_type",t).val(),o=$("#safe_dirs",t).val(),l=$("#base_path",t).val(),c=$("#restricted_dirs",t).val(),d=$("#limit_transfer_bw",t).val(),u=$("#datastore_capacity_check",t).is(":checked"),p=$("#no_decompress",t).is(":checked"),h=$("#bridge_list",t).val(),f=$("#ds_tmp_dir",t).val(),m=$("#vg_name",t).val(),v=$("#limit_mb",t).val(),g=$("#gluster_host",t).val(),y=$("#gluster_volume",t).val(),w=$("#pool_name",t).val(),T=$("#ceph_host",t).val(),E=$("#ceph_secret",t).val(),S=$("#ceph_user",t).val(),I=$("#rbd_format",t).val(),x=$("#staging_dir",t).val();if(!e)return b.notifyError("Please provide a name"),!1;var A={datastore:{name:e,tm_mad:i,disk_type:r,type:n},cluster_id:a};return"SYSTEM_DS"!=n&&(A.datastore.ds_mad=s),l&&(A.datastore.base_path=l),o&&(A.datastore.safe_dirs=o),c&&(A.datastore.restricted_dirs=c),d&&(A.datastore.limit_transfer_bw=d),p&&(A.datastore.no_decompress="YES"),u&&(A.datastore.datastore_capacity_check="YES"),h&&(A.datastore.bridge_list=h),f&&(A.datastore.ds_tmp_dir=f),m&&(A.datastore.vg_name=m),v&&(A.datastore.limit_mb=v),g&&(A.datastore.gluster_host=g),y&&(A.datastore.gluster_volume=y),w&&(A.datastore.pool_name=w),T&&(A.datastore.ceph_host=T),E&&(A.datastore.ceph_secret=E),S&&(A.datastore.ceph_user=S),I&&(A.datastore.rbd_format=I),x&&(A.datastore.staging_dir=x),_.runAction("Datastore.create",A),!1}),$("#create_datastore_submit_manual",t).click(function(){var e=$("#template",t).val(),a=$(".resource_list_select",$("#datastore_cluster_raw",t)).val();if(!a)return b.notifyError(tr("Please select a cluster for this datastore")),!1;var n={datastore:{datastore_raw:e},cluster_id:a};return _.runAction("Datastore.create",n),!1}),$("select#disk_type").parent().hide(),i(t),r()}function i(t){$("input#image_ds_type").attr("checked","true"),$("input[name=ds_type]").removeAttr("disabled","disabled"),$('label[for="bridge_list"],input#bridge_list',t).parent().hide(),$('label[for="ds_tmp_dir"],input#ds_tmp_dir',t).parent().hide(),$('label[for="vg_name"],input#vg_name',t).hide(),$('label[for="gluster_host"],input#gluster_host',t).parent().hide(),$('label[for="gluster_volume"],input#gluster_volume',t).parent().hide(),$('label[for="pool_name"],input#pool_name',t).parent().hide(),$('label[for="ceph_host"],input#ceph_host',t).parent().hide(),$('label[for="ceph_secret"],input#ceph_secret',t).parent().hide(),$('label[for="ceph_user"],input#ceph_user',t).parent().hide(),$('label[for="rbd_format"],input#rbd_format',t).parent().hide(),$('label[for="staging_dir"],input#staging_dir',t).parent().hide(),$('label[for="limit_transfer_bw"],input#limit_transfer_bw',t).parent().hide(),$('label[for="no_decompress"],input#no_decompress',t).parent().hide(),$("select#ds_mad").removeAttr("disabled"),$("select#tm_mad").removeAttr("disabled"),$("select#tm_mad").children("option").each(function(){$(this).removeAttr("disabled")}),$("select#disk_type").removeAttr("disabled"),$("select#disk_type").children("option").each(function(){$(this).removeAttr("disabled")}),$('input[name="ds_tab_custom_ds_mad"]',t).parent().hide(),$('input[name="ds_tab_custom_tm_mad"]',t).parent().hide()}function r(){$("select#ds_mad").val("fs"),$("select#tm_mad").val("shared"),$("select#ds_mad").attr("disabled","disabled"),$("select#tm_mad").children("option").each(function(){var t=$(this).val();$(this).attr("disabled","disabled"),("qcow2"==t||"shared"==t||"ssh"==t)&&$(this).removeAttr("disabled")}),$("select#disk_type").val("file"),$("select#disk_type").attr("disabled","disabled"),$('label[for="limit_transfer_bw"],input#limit_transfer_bw').parent().fadeIn(),$('label[for="no_decompress"],input#no_decompress').parent().fadeIn(),$('label[for="datastore_capacity_check"],input#datastore_capacity_check').parent().fadeIn(),$("input#safe_dirs").removeAttr("disabled"),$("select#disk_type").removeAttr("disabled"),$("input#base_path").removeAttr("disabled"),$("input#limit_mb").removeAttr("disabled"),$("input#restricted_dirs").removeAttr("disabled"),$('label[for="bridge_list"],input#bridge_list').parent().fadeIn(),$('label[for="staging_dir"],input#staging_dir').parent().fadeIn()}function o(){$('label[for="bridge_list"],input#bridge_list').parent().fadeIn(),$('label[for="ds_tmp_dir"],input#ds_tmp_dir').parent().fadeIn(),$("select#ds_mad").val("vmfs"),$("select#ds_mad").attr("disabled","disabled"),$("select#tm_mad").val("vmfs"),$("select#tm_mad").attr("disabled","disabled"),$('label[for="limit_transfer_bw"],input#limit_transfer_bw').parent().fadeIn(),$('label[for="no_decompress"],input#no_decompress').parent().fadeIn(),$('label[for="datastore_capacity_check"],input#datastore_capacity_check').parent().fadeIn(),$("select#disk_type").val("file"),$("select#disk_type").attr("disabled","disabled"),$("input#safe_dirs").removeAttr("disabled"),$("input#base_path").removeAttr("disabled"),$("input#limit_mb").removeAttr("disabled"),$("input#restricted_dirs").removeAttr("disabled")}function l(){$("input#image_ds_type").attr("checked","true"),$("input[name=ds_type]").attr("disabled","disabled"),$("select#ds_mad").val("ceph"),$("select#ds_mad").attr("disabled","disabled"),$("select#tm_mad").val("ceph"),$("select#tm_mad").attr("disabled","disabled"),$('label[for="bridge_list"],input#bridge_list').parent().fadeIn(),$('label[for="pool_name"],input#pool_name').parent().fadeIn(),$('label[for="ceph_host"],input#ceph_host').parent().fadeIn(),$('label[for="ceph_secret"],input#ceph_secret').parent().fadeIn(),$('label[for="ceph_user"],input#ceph_user').parent().fadeIn(),$('label[for="rbd_format"],input#rbd_format').parent().fadeIn(),$('label[for="staging_dir"],input#staging_dir').parent().fadeIn(),$('label[for="limit_transfer_bw"],input#limit_transfer_bw').parent().fadeIn(),$('label[for="no_decompress"],input#no_decompress').parent().fadeIn(),$('label[for="datastore_capacity_check"],input#datastore_capacity_check').parent().fadeIn(),$("select#disk_type").val("RBD"),$("select#disk_type").attr("disabled","disabled"),$("input#safe_dirs").removeAttr("disabled"),$("input#base_path").removeAttr("disabled"),$("input#limit_mb").removeAttr("disabled"),$("input#restricted_dirs").removeAttr("disabled")}function c(){$("select#ds_mad").val("lvm"),$("select#ds_mad").attr("disabled","disabled"),$("select#tm_mad").val("lvm"),$("select#tm_mad").attr("disabled","disabled"),$("input#image_ds_type").attr("checked","true"),$("input[name=ds_type]").attr("disabled","disabled"),$('label[for="bridge_list"],input#bridge_list').parent().fadeIn(),$('label[for="vg_name"],input#vg_name').fadeIn(),$('label[for="limit_transfer_bw"],input#limit_transfer_bw').parent().fadeIn(),$('label[for="no_decompress"],input#no_decompress').parent().fadeIn(),$('label[for="datastore_capacity_check"],input#datastore_capacity_check').parent().fadeIn(),$("select#disk_type").val("block"),$("select#disk_type").attr("disabled","disabled"),$("input#safe_dirs").removeAttr("disabled"),$("input#base_path").removeAttr("disabled"),$("input#limit_mb").removeAttr("disabled"),$("input#restricted_dirs").removeAttr("disabled")}function d(){$("select#ds_mad").val("fs"),$("select#ds_mad").attr("disabled","disabled"),$("select#tm_mad").val("fs_lvm"),$("select#tm_mad").attr("disabled","disabled"),$("input#image_ds_type").attr("checked","true"),$("input[name=ds_type]").attr("disabled","disabled"),$('label[for="limit_transfer_bw"],input#limit_transfer_bw').parent().fadeIn(),$('label[for="no_decompress"],input#no_decompress').parent().fadeIn(),$('label[for="datastore_capacity_check"],input#datastore_capacity_check').parent().fadeIn(),$("select#disk_type").val("block"),$("select#disk_type").attr("disabled","disabled"),$("input#safe_dirs").removeAttr("disabled"),$("input#base_path").removeAttr("disabled"),$("input#limit_mb").removeAttr("disabled"),$("input#restricted_dirs").removeAttr("disabled")}function u(){$("select#ds_mad").val("fs"),$("select#ds_mad").attr("disabled","disabled"),$("select#tm_mad").val("shared"),$("select#tm_mad").children("option").each(function(){var t=$(this).val();$(this).attr("disabled","disabled"),("shared"==t||"ssh"==t)&&$(this).removeAttr("disabled")}),$("input#image_ds_type").attr("checked","true"),$("input[name=ds_type]").attr("disabled","disabled"),$("select#disk_type").val("gluster"),$("select#disk_type").attr("disabled","disabled"),$('label[for="gluster_host"],input#gluster_host').parent().fadeIn(),$('label[for="gluster_volume"],input#gluster_volume').parent().fadeIn(),$('label[for="limit_transfer_bw"],input#limit_transfer_bw').parent().fadeIn(),$('label[for="no_decompress"],input#no_decompress').parent().fadeIn(),$('label[for="datastore_capacity_check"],input#datastore_capacity_check').parent().fadeIn(),$("input#safe_dirs").removeAttr("disabled"),$("input#base_path").removeAttr("disabled"),$("input#limit_mb").removeAttr("disabled"),$("input#restricted_dirs").removeAttr("disabled")}function p(){$("select#ds_mad").val("dev"),$("select#ds_mad").attr("disabled","disabled"),$("select#tm_mad").val("dev"),$("select#tm_mad").attr("disabled","disabled"),$("input#image_ds_type").attr("checked","true"),$("input[name=ds_type]").attr("disabled","disabled"),$("select#disk_type").val("block"),$("select#disk_type").attr("disabled","disabled"),$('label[for="limit_transfer_bw"],input#limit_transfer_bw').parent().hide(),$('label[for="no_decompress"],input#no_decompress').parent().hide(),$('label[for="datastore_capacity_check"],input#datastore_capacity_check').parent().hide(),$("input#safe_dirs").attr("disabled","disabled"),$("input#base_path").attr("disabled","disabled"),$("input#limit_mb").attr("disabled","disabled"),$("input#restricted_dirs").attr("disabled","disabled")}function h(t){i(t),$("select#ds_mad").val("fs"),$("select#tm_mad").val("shared"),$("input#safe_dirs").removeAttr("disabled"),$("select#disk_type").removeAttr("disabled"),$("input#base_path").removeAttr("disabled"),$("input#limit_mb").removeAttr("disabled"),$("input#restricted_dirs").removeAttr("disabled"),$('label[for="limit_transfer_bw"],input#limit_transfer_bw').parent().fadeIn(),$('label[for="no_decompress"],input#no_decompress').parent().fadeIn(),$('label[for="datastore_capacity_check"],input#datastore_capacity_check').parent().fadeIn()}var f=t("utils/dialogs/dialog"),m=t("hbs!./create/html"),_=t("sunstone"),b=t("utils/notifier"),v=t("utils/tips"),g=t("utils/resource-select"),y=t("./create/dialogId");return e.DIALOG_ID=y,e.prototype=Object.create(f.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=n,e.prototype.setup=s,e}),define("hbs!tabs/datastores-tab/panels/info/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,c="function",d='<div class="row">\n  <div class="large-6 columns">\n    <table class="dataTable extended_table">\n      <thead>\n        <tr>\n          <th colspan="3">'+o((e.tr||t&&t.tr||r).call(t,"Information",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"ID",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td" colspan="2">'+o(l(null!=(s=null!=t?t.element:t)?s.ID:s,t))+"</td>\n        </tr>\n        ";return i=null!=(i=e.renameTrHTML||(null!=t?t.renameTrHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"renameTrHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+="\n        ",i=null!=(i=e.clusterTrHTML||(null!=t?t.clusterTrHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"clusterTrHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+='\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"State",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o((i=null!=(i=e.stateStr||(null!=t?t.stateStr:t))?i:r,typeof i===c?i.call(t,{name:"stateStr",hash:{},data:n}):i))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Base path",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s.BASE_PATH:s,t))+'</td>\n          <td></td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Capacity",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td" colspan="2">',i=null!=(i=e.capacityBar||(null!=t?t.capacityBar:t))?i:r,s=typeof i===c?i.call(t,{name:"capacityBar",hash:{},data:n}):i,null!=s&&(d+=s),d+='</td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Limit",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td" colspan="2">'+o((i=null!=(i=e.limitStr||(null!=t?t.limitStr:t))?i:r,typeof i===c?i.call(t,{name:"limitStr",hash:{},data:n}):i))+'</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <div class="large-6 columns">\n    ',i=null!=(i=e.permissionsTableHTML||(null!=t?t.permissionsTableHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"permissionsTableHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+='\n  </div>\n</div>\n<div class="row">\n  <div class="large-9 columns">',i=null!=(i=e.templateTableHTML||(null!=t?t.templateTableHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"templateTableHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+"</div>\n</div>"},useData:!0});return e.registerPartial("tabs/datastores-tab/panels/info/html",a),a}),define("tabs/datastores-tab/panels/info/panelId",["require"],function(){return"datastore_info_tab"}),define("tabs/datastores-tab/panels/info",["require","utils/locale","utils/humanize","utils/panel/rename-tr","utils/panel/template-table","utils/panel/permissions-table","utils/panel/cluster-tr","opennebula/datastore","../utils/datastore-capacity-bar","hbs!./info/html","../tabId","./info/panelId"],function(t){function e(t){return this.title=s.tr("Info"),this.icon="fa-info-circle",this.element=t[m.toUpperCase()],this}function a(){var t=r.html(m,this.element.NAME),e=c.html(this.element.CLUSTER),a=o.html(this.element.TEMPLATE,m,s.tr("Attributes")),n=l.html(h,m,this.element),f=u.html(this.element),_=s.tr(d.stateStr(this.element.STATE)),b="-";return("NO"==this.element.TEMPLATE.SHARED||void 0!=this.element.TEMPLATE.LIMIT_MB)&&(b=i.sizeFromMB(this.element.TEMPLATE.LIMIT_MB)),p({element:this.element,renameTrHTML:t,clusterTrHTML:e,templateTableHTML:a,permissionsTableHTML:n,capacityBar:f,stateStr:_,limitStr:b})}function n(t){return r.setup(m,this.element.ID,t),c.setup(m,this.element.ID,this.element.CLUSTER_ID,t),o.setup(this.element.TEMPLATE,m,this.element.ID,t),l.setup(h,m,this.element,t),!1}var s=t("utils/locale"),i=t("utils/humanize"),r=t("utils/panel/rename-tr"),o=t("utils/panel/template-table"),l=t("utils/panel/permissions-table"),c=t("utils/panel/cluster-tr"),d=t("opennebula/datastore"),u=t("../utils/datastore-capacity-bar"),p=t("hbs!./info/html"),h=t("../tabId"),f=t("./info/panelId"),m="Datastore";return e.PANEL_ID=f,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/datastores-tab/panels/images/panelId",["require"],function(){return"datastore_image_tab"}),define("tabs/datastores-tab/panels/images",["require","utils/locale","tabs/images-tab/datatable","./images/panelId"],function(t){function e(t){return this.title=s.tr("Images"),this.icon="fa-upload",this.element=t[l.toUpperCase()],this.imagesDataTable=new i(o,{info:!0}),this}function a(){return this.imagesDataTable.dataTableHTML}function n(){return this.imagesDataTable.initialize(),this.imagesDataTable.filter(this.element.NAME,i.COLUMN_IDS.DATASTORE),this.imagesDataTable.list(),!1}var s=t("utils/locale"),i=t("tabs/images-tab/datatable"),r=t("./images/panelId"),o=r+"ImagesTable",l="Datastore";return e.PANEL_ID=r,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/datastores-tab",["require","utils/locale","./datastores-tab/buttons","./datastores-tab/actions","./datastores-tab/datatable","./datastores-tab/tabId","./datastores-tab/dialogs/create","./datastores-tab/panels/info","./datastores-tab/panels/images"],function(t){var e=t("utils/locale"),a=t("./datastores-tab/buttons"),n=t("./datastores-tab/actions"),s=t("./datastores-tab/datatable"),i=t("./datastores-tab/tabId"),r="dataTableDatastores",o=[t("./datastores-tab/dialogs/create")],l=[t("./datastores-tab/panels/info"),t("./datastores-tab/panels/images")],c={tabId:i,title:e.tr("Datastores"),tabClass:"subTab",parentTab:"infra-tab",listHeader:'<i class="fa fa-fw fa-folder-open"></i>&emsp;'+e.tr("Datastores"),infoHeader:'<i class="fa fa-fw fa-folder-open"></i>&emsp;'+e.tr("Datastore"),subheader:"",resource:"Datastore",buttons:a,actions:n,dataTable:new s(r,{actions:!0,info:!0}),panels:l,dialogs:o};return c}),define("tabs/vnets-tab/buttons",["require","utils/locale"],function(t){var e=t("utils/locale"),a={"Network.refresh":{type:"action",layout:"refresh",alwaysActive:!0},"Network.create_dialog":{type:"create_dialog",layout:"create"},"Network.import_dialog":{type:"create_dialog",layout:"create",text:e.tr("Import"),icon:'<i class="fa fa-download">',alwaysActive:!0},"Network.update_dialog":{type:"action",layout:"main",text:e.tr("Update")},"Network.reserve_dialog":{type:"action",layout:"main",text:e.tr("Reserve"),custom_classes:"only-right-info reserve-right-info"},"Network.addtocluster":{type:"confirm_with_select",text:e.tr("Select cluster"),layout:"main",select:"Cluster",tip:e.tr("Select the destination cluster:")},"Network.chown":{type:"confirm_with_select",text:e.tr("Change owner"),layout:"user_select",select:"User",tip:e.tr("Select the new owner")+":"},"Network.chgrp":{type:"confirm_with_select",text:e.tr("Change group"),layout:"user_select",select:"Group",tip:e.tr("Select the new group")+":"},"Network.delete":{type:"confirm",layout:"del",text:e.tr("Delete")}};return a}),define("tabs/vnets-tab/dialogs/add-ar/dialogId",["require"],function(){return"add_ar_dialog"}),define("tabs/vnets-tab/dialogs/update-ar/dialogId",["require"],function(){return"update_ar_dialog"}),define("tabs/vnets-tab/dialogs/reserve/dialogId",["require"],function(){return"reserve_dialog"}),define("tabs/vnets-tab/actions",["require","sunstone","utils/notifier","utils/locale","./datatable","opennebula/network","opennebula/cluster","opennebula/action","./tabId","./form-panels/create/formPanelId","./dialogs/add-ar/dialogId","./dialogs/update-ar/dialogId","./dialogs/reserve/dialogId"],function(t){var e=t("sunstone"),a=t("utils/notifier"),n=t("utils/locale"),s=(t("./datatable"),t("opennebula/network")),i=t("opennebula/cluster"),r=t("opennebula/action"),o=t("./tabId"),l=t("./form-panels/create/formPanelId"),c=t("./dialogs/add-ar/dialogId"),d=t("./dialogs/update-ar/dialogId"),u=t("./dialogs/reserve/dialogId"),p={"Network.create":{type:"create",call:s.create,callback:function(t,a){e.resetFormPanel(o,l),e.hideFormPanel(o),e.getDataTable(o).addElement(t,a)},error:function(t,n){e.hideFormPanelLoading(o),a.onError(t,n)},notify:!0},"Network.create_dialog":{type:"custom",call:function(){e.showFormPanel(o,l,"create")}},"Network.list":{type:"list",call:s.list,callback:function(t,a){e.getDataTable(o).updateView(t,a)},error:a.onError},"Network.show":{type:"single",call:s.show,callback:function(t,a){e.getDataTable(o).updateElement(t,a),e.rightInfoVisible($("#"+o))&&e.insertPanels(o,a)},error:a.onError},"Network.refresh":{type:"custom",call:function(){var t=$("#"+o);e.rightInfoVisible(t)?e.runAction("Network.show",e.rightInfoResourceId(t)):(e.getDataTable(o).waitingNodes(),e.runAction("Network.list",{force:!0}))},error:a.onError},"Network.delete":{type:"multiple",call:s.del,callback:function(t,a){e.getDataTable(o).deleteElement(t,a)},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"Network.hold":{type:"single",call:s.hold,callback:function(t){e.runAction("Network.show",t.request.data[0][0])},error:a.onError},"Network.release":{type:"single",call:s.release,callback:function(t){e.runAction("Network.show",t.request.data[0][0])},error:a.onError},"Network.add_ar":{type:"single",call:s.add_ar,callback:function(t){e.getDialog(c).hide(),e.getDialog(c).reset(),e.runAction("Network.show",t.request.data[0][0])},error:a.onError},"Network.rm_ar":{type:"single",call:s.rm_ar,callback:function(t){r.clear_cache("VNET"),e.runAction("Network.show",t.request.data[0][0])},error:a.onError},"Network.update_ar":{type:"single",call:s.update_ar,callback:function(t){e.getDialog(d).hide(),e.getDialog(d).reset(),e.runAction("Network.show",t.request.data[0][0])},error:a.onError},"Network.reserve_dialog":{type:"custom",call:function(){var t=e.getDataTable(o).elements();if(1!=t.length)return a.notifyMessage("Please select one (and just one) Virtual Network."),!1;var n=""+t[0];e.getDialog(u).setParams({vnetId:n}),e.getDialog(u).reset(),e.getDialog(u).show()}},"Network.reserve":{type:"single",call:s.reserve,callback:function(t){e.getDialog(u).hide(),e.getDialog(u).reset(),r.clear_cache("VNET"),e.runAction("Network.show",t.request.data[0][0])},error:a.onError},"Network.chown":{type:"multiple",call:s.chown,callback:function(t){e.runAction("Network.show",t.request.data[0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"Network.chgrp":{type:"multiple",call:s.chgrp,callback:function(t){e.runAction("Network.show",t.request.data[0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"Network.chmod":{type:"single",call:s.chmod,callback:function(t){e.runAction("Network.show",t.request.data[0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"Network.rename":{type:"single",call:s.rename,callback:function(t){e.runAction("Network.show",t.request.data[0][0])},error:a.onError,notify:!0},"Network.update_dialog":{type:"custom",call:function(){var t=e.getDataTable(o).elements();if(1!=t.length)return a.notifyMessage("Please select one (and just one) Virtual Network to update."),!1;var n=""+t[0];e.runAction("Network.show_to_update",n)}},"Network.show_to_update":{type:"single",call:s.show,callback:function(t,a){e.showFormPanel(o,l,"update",function(t,e){t.fill(e,a.VNET)})},error:a.onError},"Network.update":{type:"single",call:s.update,callback:function(){e.hideFormPanel(o),a.notifyMessage(n.tr("Virtual Network updated correctly"))},error:function(t,n){e.hideFormPanelLoading(o),a.onError(t,n)}},"Network.update_template":{type:"single",call:s.update,callback:function(t){e.runAction("Network.show",t.request.data[0][0])},error:a.onError},"Network.addtocluster":{type:"multiple",call:function(t){var n=t.data.extra_param,o=t.data.id;-1==n?s.show({data:{id:o},success:function(t,n){var s=n.VNET,l=s.CLUSTER_ID;-1!=l?i.delvnet({data:{id:l,extra_param:o},success:function(){r.clear_cache("VNET"),e.runAction("Network.show",o)},error:a.onError}):(r.clear_cache("VNET"),e.runAction("Network.show",o))},error:a.onError}):i.addvnet({data:{id:n,extra_param:o},success:function(){r.clear_cache("VNET"),e.runAction("Network.show",o)},error:a.onError})},elements:function(){return e.getDataTable(o).elements()}}};return p}),define("hbs!tabs/vnets-tab/dialogs/add-ar/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<div id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'" class="reveal-modal large max-height" data-reveal >\n  <div class="reveal-body">\n    <form data-abide="ajax" id="add_ar_form" action="">\n      <div class="row">\n        <div class="large-12 columns">\n          <h3 class="subheader" id="">\n            '+l((e.tr||t&&t.tr||o).call(t,"Virtual Network",{name:"tr",hash:{},data:n}))+' <span id="vnet_id"/>\n            <br>\n            '+l((e.tr||t&&t.tr||o).call(t,"New Address Range",{name:"tr",hash:{},data:n}))+"\n          </h3>\n        </div>\n      </div>\n      ";return i=null!=(i=e.arTabHTML||(null!=t?t.arTabHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"arTabHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+'\n      <div class="reveal-footer">\n        <div class="form_buttons">\n          <button class="button radius right success" id="submit_ar_button" type="submit" value="Network.add_ar">\n            '+l((e.tr||t&&t.tr||o).call(t,"Add",{name:"tr",hash:{},data:n}))+'\n          </button>\n          <button id="submit_ar_reset_button" class="button secondary radius" type="reset" value="reset">\n            '+l((e.tr||t&&t.tr||o).call(t,"Reset",{name:"tr",hash:{},data:n}))+'\n          </button>\n        </div>\n      </div>\n      <a class="close-reveal-modal">&#215;</a>\n    </form>\n  </div>\n</div>'},useData:!0});return e.registerPartial("tabs/vnets-tab/dialogs/add-ar/html",a),a}),define("hbs!tabs/vnets-tab/utils/ar-tab/html",["hbs","hbs/handlebars","templates/helpers/tr","templates/helpers/advancedSection"],function(t,e){var a=e.template({1:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l="function",c='  <div class="row">\n    <div class="large-12 columns">\n      <span>'+o((e.tr||t&&t.tr||r).call(t,"Custom attributes",{name:"tr",hash:{},data:n}))+'</span>\n      <br>\n      <br>\n    </div>\n  </div>\n  <div class="row" id="'+o((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:r,typeof i===l?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_custom_tags">\n    <div class="12 columns">\n      ';return i=null!=(i=e.customTagsHTML||(null!=t?t.customTagsHTML:t))?i:r,s=typeof i===l?i.call(t,{name:"customTagsHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+='\n    </div>\n  </div>\n  <div class="row">\n    <br>\n    <br>\n    <hr>\n    <div class="large-12 columns">\n      <span>'+o((e.tr||t&&t.tr||r).call(t,"Security Groups",{name:"tr",hash:{},data:n}))+'</span>\n      <br>\n      <br>\n    </div>\n  </div>\n  <div class="row" id="'+o((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:r,typeof i===l?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_security_groups">\n    ',i=null!=(i=e.securityGroupsTableHTML||(null!=t?t.securityGroupsTableHTML:t))?i:r,s=typeof i===l?i.call(t,{name:"securityGroupsTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+"\n  </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<div class="row" name="str_ar_tab_id" str_ar_tab_id="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'">\n  <div class="large-12 columns">\n    <input wizard_field="TYPE" type="radio" name="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_ar_type" id="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_ar_type_ip4" value="IP4"/><label for="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_ar_type_ip4">'+l((e.tr||t&&t.tr||o).call(t,"IPv4",{name:"tr",hash:{},data:n}))+'</label>\n    <input wizard_field="TYPE" type="radio" name="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_ar_type" id="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_ar_type_ip4_6" value="IP4_6"/><label for="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_ar_type_ip4_6">'+l((e.tr||t&&t.tr||o).call(t,"IPv4/6",{name:"tr",hash:{},data:n}))+'</label>\n    <input wizard_field="TYPE" type="radio" name="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_ar_type" id="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_ar_type_ip6" value="IP6"/><label for="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_ar_type_ip6">'+l((e.tr||t&&t.tr||o).call(t,"IPv6",{name:"tr",hash:{},data:n}))+'</label>\n    <input wizard_field="TYPE" type="radio" name="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_ar_type" id="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_ar_type_ether" value="ETHER"/><label for="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_ar_type_ether">'+l((e.tr||t&&t.tr||o).call(t,"Ethernet",{name:"tr",hash:{},data:n}))+'</label>\n  </div>\n</div>\n<div class="row">\n  <div class="large-6 columns">\n    <div class="row collapse ar_input type_ip4 type_ip4_6">\n      <label for="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_ip_start">'+l((e.tr||t&&t.tr||o).call(t,"IP Start",{name:"tr",hash:{},data:n}))+':\n        <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"First IP address",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n      <input wizard_field="IP" type="text" name="IP" id="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_ip_start"/>\n    </div>\n    <div class="row collapse ar_input type_ip4 type_ip4_6 type_ip6 type_ether">\n      <label for="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_mac_start">'+l((e.tr||t&&t.tr||o).call(t,"MAC Start",{name:"tr",hash:{},data:n}))+':\n        <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"First MAC address",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n      <input wizard_field="MAC" type="text" name="MAC" id="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_mac_start" />\n    </div>\n  </div>\n  <div class="large-6 columns ar_input type_ip4 type_ip4_6 type_ip6 type_ether">\n    <label for="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_size">'+l((e.tr||t&&t.tr||o).call(t,"Size",{name:"tr",hash:{},data:n}))+':\n      <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Number of addresses in the range",{name:"tr",hash:{},data:n}))+'</span>\n    </label>\n    <input wizard_field="SIZE" required type="text" name="SIZE" id="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_size" />\n  </div>\n</div>\n<div class="row">\n  <div class="large-6 columns ar_input type_ip4_6 type_ip6">\n    <label for="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_global_prefix">'+l((e.tr||t&&t.tr||o).call(t,"Global prefix",{name:"tr",hash:{},data:n}))+':\n      <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"IPv6 global address prefix to create leases",{name:"tr",hash:{},data:n}))+'</span>\n    </label>\n    <input wizard_field="GLOBAL_PREFIX" type="text" name="GLOBAL_PREFIX" id="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_global_prefix"/>\n  </div>\n  <div class="large-6 columns ar_input type_ip4_6 type_ip6">\n    <label for="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_ula_prefix">'+l((e.tr||t&&t.tr||o).call(t,"ULA prefix",{name:"tr",hash:{},data:n}))+':\n      <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"IPv6 unique local address (ULA) prefix to create leases",{name:"tr",hash:{},data:n}))+'</span>\n    </label>\n    <input wizard_field="ULA_PREFIX" type="text" name="ULA_PREFIX" id="'+l((i=null!=(i=e.str_ar_tab_id||(null!=t?t.str_ar_tab_id:t))?i:o,typeof i===r?i.call(t,{name:"str_ar_tab_id",hash:{},data:n}):i))+'_ula_prefix"/>\n  </div>\n</div>\n';
return s=(e.advancedSection||t&&t.advancedSection||o).call(t,(e.tr||t&&t.tr||o).call(t,"Advanced Options",{name:"tr",hash:{},data:n}),{name:"advancedSection",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c},useData:!0});return e.registerPartial("tabs/vnets-tab/utils/ar-tab/html",a),a}),define("tabs/vnets-tab/utils/ar-tab",["require","utils/locale","utils/tips","utils/custom-tags-table","utils/wizard-fields","tabs/secgroups-tab/datatable","hbs!./ar-tab/html"],function(t){function e(){return this}function a(t){var e={info:!1,select:!0,selectOptions:{multiple_choice:!0}};return this.securityGroupsTable=new d(t,e),u({str_ar_tab_id:t,customTagsHTML:l.html(),securityGroupsTableHTML:this.securityGroupsTable.dataTableHTML})}function n(t,e){this.ar_section=t,$('input[name$="ar_type"]',t).change(function(){switch($("div.ar_input",t).hide(),$('input[wizard_field="IP"]',t).removeAttr("required"),$(this).val()){case"IP4":$("div.type_ip4",t).show(),$('input[wizard_field="IP"]',t).attr("required","");break;case"IP4_6":$("div.type_ip4_6",t).show(),$('input[wizard_field="IP"]',t).attr("required","");break;case"IP6":$("div.type_ip6",t).show();break;case"ETHER":$("div.type_ether",t).show()}}),$("input#"+e+"_ar_type_ip4",t).prop("checked",!0),$("input#"+e+"_ar_type_ip4",t).change(),l.setup($("#"+e+"_custom_tags",t)),this.securityGroupsTable.initialize(),o.setup(t)}function s(){this.securityGroupsTable.refreshResourceTableSelect()}function i(){var t={},e=$('input[name$="ar_type"]:checked',this.ar_section).val(),a=[];switch(e){case"IP4":a=$("div.type_ip4",this.ar_section).children("input");break;case"IP4_6":a=$("div.type_ip4_6",this.ar_section).children("input");break;case"IP6":a=$("div.type_ip6",this.ar_section).children("input");break;case"ETHER":a=$("div.type_ether",this.ar_section).children("input")}a.each(function(){var e=$(this);null!=e.val()&&e.val().length&&(t[e.attr("name")]=e.val())}),$.isEmptyObject(t)||(t.TYPE=e),$.extend(t,l.retrieve(this.ar_section));var n=($('div[name="str_ar_tab_id"]',this.ar_section).attr("str_ar_tab_id"),this.securityGroupsTable.retrieveResourceTableSelect());return void 0!=n&&0!=n.length&&(t.SECURITY_GROUPS=n.join(",")),t}function r(t){c.fill(this.ar_section,t);var e=$("[wizard_field]",this.ar_section);if(e.each(function(){var e=$(this),a=e.attr("wizard_field");delete t[a]}),delete t.AR_ID,delete t.USED_LEASES,delete t.LEASES,delete t.MAC_END,delete t.IP_END,delete t.IP6_ULA,delete t.IP6_ULA_END,delete t.IP6_GLOBAL,delete t.IP6_GLOBAL_END,void 0!=t.SECURITY_GROUPS&&0!=t.SECURITY_GROUPS.length){var a=t.SECURITY_GROUPS.split(",");this.securityGroupsTable.selectResourceTableSelect({ids:a})}delete t.SECURITY_GROUPS,l.fill(this.ar_section,t),$('input[name$="ar_type"]',this.ar_section).prop("disabled",!0),$('input[wizard_field="IP"]',this.ar_section).prop("disabled",!0),$('input[wizard_field="MAC"]',this.ar_section).prop("disabled",!0)}var o=(t("utils/locale"),t("utils/tips")),l=t("utils/custom-tags-table"),c=t("utils/wizard-fields"),d=t("tabs/secgroups-tab/datatable"),u=t("hbs!./ar-tab/html");return e.prototype={html:a,setup:n,onShow:s,fill:r,retrieve:i},e.prototype.constructor=e,e}),define("tabs/vnets-tab/dialogs/add-ar",["require","utils/dialogs/dialog","hbs!./add-ar/html","tabs/vnets-tab/utils/ar-tab","sunstone","utils/notifier","utils/locale","./add-ar/dialogId"],function(t){function e(){this.dialogId=p,this.arTab=new l,r.call(this)}function a(){return o({arTabHTML:this.arTab.html("add_ar")})}function n(t){var e=this;e.arTab.setup(t,"add_ar"),$("#submit_ar_reset_button",t).click(function(){c.getDialog(p).reset(),c.getDialog(p).show()}),$("#add_ar_form",t).on("invalid",function(){d.notifyError(u.tr("One or more required fields are missing."))}).on("valid",function(){var t=e.arTab.retrieve(),a={AR:t};return c.runAction("Network.add_ar",e.vnetId,a),!1})}function s(){this.arTab.onShow(),$("#vnet_id",this.dialogElement).text(this.vnetId)}function i(t){this.vnetId=t}var r=t("utils/dialogs/dialog"),o=t("hbs!./add-ar/html"),l=t("tabs/vnets-tab/utils/ar-tab"),c=t("sunstone"),d=t("utils/notifier"),u=t("utils/locale"),p=t("./add-ar/dialogId");return e.DIALOG_ID=p,e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=s,e.prototype.setup=n,e.prototype.setId=i,e}),define("hbs!tabs/vnets-tab/dialogs/update-ar/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<div id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'" class="reveal-modal large max-height" data-reveal >\n  <div class="reveal-body">\n    <form data-abide="ajax" id="update_ar_form" action="">\n      <div class="row">\n        <div class="large-12 columns">\n          <h3 class="subheader" id="">\n            '+l((e.tr||t&&t.tr||o).call(t,"Virtual Network",{name:"tr",hash:{},data:n}))+' <span id="vnet_id"/>\n            <br>\n            '+l((e.tr||t&&t.tr||o).call(t,"Edit Address Range",{name:"tr",hash:{},data:n}))+' <span id="ar_id"/>\n          </h3>\n        </div>\n      </div>\n      ';return i=null!=(i=e.arTabHTML||(null!=t?t.arTabHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"arTabHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+'\n      <div class="reveal-footer">\n        <div class="form_buttons">\n          <button class="button radius right success" id="submit_ar_button" type="submit" value="Network.update_ar">\n            '+l((e.tr||t&&t.tr||o).call(t,"Update",{name:"tr",hash:{},data:n}))+'\n          </button>\n        </div>\n      </div>\n      <a class="close-reveal-modal">&#215;</a>\n    </form>\n  </div>\n</div>'},useData:!0});return e.registerPartial("tabs/vnets-tab/dialogs/update-ar/html",a),a}),define("tabs/vnets-tab/dialogs/update-ar",["require","utils/dialogs/dialog","hbs!./update-ar/html","tabs/vnets-tab/utils/ar-tab","sunstone","utils/notifier","utils/locale","./update-ar/dialogId"],function(t){function e(){this.dialogId=u,this.arTab=new l,r.call(this)}function a(){return o({arTabHTML:this.arTab.html("update_ar")})}function n(t){var e=this;e.arTab.setup(t,"update_ar"),$("#update_ar_form",t).on("invalid",function(){d.notifyError(tr("One or more required fields are missing."))}).on("valid",function(){var t=e.arTab.retrieve();t.AR_ID=e.arId;var a={AR:t};return c.runAction("Network.update_ar",e.vnetId,a),!1})}function s(){this.arTab.onShow()}function i(t){this.vnetId=t.vnetId,this.arId=t.arId,$("#vnet_id",this.dialogElement).text(t.vnetId),$("#ar_id",this.dialogElement).text(t.arId),this.arTab.fill(t.arData)}var r=t("utils/dialogs/dialog"),o=t("hbs!./update-ar/html"),l=t("tabs/vnets-tab/utils/ar-tab"),c=t("sunstone"),d=t("utils/notifier"),u=(t("utils/locale"),t("./update-ar/dialogId"));return e.DIALOG_ID=u,e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=s,e.prototype.setup=n,e.prototype.setParams=i,e}),define("hbs!tabs/vnets-tab/dialogs/reserve/html",["hbs","hbs/handlebars","templates/helpers/tr","templates/helpers/advancedSection"],function(t,e){var a=e.template({1:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l="function",c='        <div class="content" id="advanced_reserve">\n          <div class="row">\n            <div class="large-12 columns">\n              <p>'+o((e.tr||t&&t.tr||r).call(t,"You can select the addresses from an specific Address Range",{name:"tr",hash:{},data:n}))+'</p>\n            </div>\n          </div>\n          <div class="row">\n            <div class="large-12 columns">\n              ';return i=null!=(i=e.arsTableHTML||(null!=t?t.arsTableHTML:t))?i:r,s=typeof i===l?i.call(t,{name:"arsTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+'\n            </div>\n          </div>\n          <br>\n          <div class="row">\n            <div class="large-6 columns">\n              <label for="reserve_addr">'+o((e.tr||t&&t.tr||r).call(t,"First address",{name:"tr",hash:{},data:n}))+':</label>\n              <input wizard_field="addr" type="text" id="reserve_addr" placeholder="'+o((e.tr||t&&t.tr||r).call(t,"IPv4 or MAC",{name:"tr",hash:{},data:n}))+'"/>\n            </div>\n          </div>\n        </div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<div id="'+l((i=null!=(i=e.dialogId||(null!=t?t.dialogId:t))?i:o,typeof i===r?i.call(t,{name:"dialogId",hash:{},data:n}):i))+'" class="reveal-modal large max-height" data-reveal >\n  <div class="reveal-body">\n    <form id="reserve_form" action="">\n      <div class="row">\n        <div class="large-12 columns">\n          <h3 class="subheader" id="">\n            '+l((e.tr||t&&t.tr||o).call(t,"Reservation from Virtual Network",{name:"tr",hash:{},data:n}))+' <span id="vnet_id"/>\n          </h3>\n        </div>\n      </div>\n      <div class="row">\n        <div class="large-6 columns">\n          <label for="reserve_size">'+l((e.tr||t&&t.tr||o).call(t,"Number of addresses",{name:"tr",hash:{},data:n}))+':</label>\n          <input wizard_field="size" type="text" id="reserve_size"/>\n        </div>\n      </div>\n      <div class="row">\n        <div class="large-12 columns">\n          <input type="radio" name="reserve_target" id="reserve_new" value="NEW"/>\n          <label for="reserve_new">\n            '+l((e.tr||t&&t.tr||o).call(t,"Add to a new Virtual Network",{name:"tr",hash:{},data:n}))+'\n          </label>\n          <input type="radio" name="reserve_target" id="reserve_add" value="ADD"/>\n          <label for="reserve_add">\n            '+l((e.tr||t&&t.tr||o).call(t,"Add to an existing Reservation",{name:"tr",hash:{},data:n}))+'\n          </label>\n        </div>\n      </div>\n      <div id="reserve_new_body">\n        <div class="row">\n          <div class="large-6 columns">\n            <label for="reserve_name">'+l((e.tr||t&&t.tr||o).call(t,"Virtual Network Name",{name:"tr",hash:{},data:n}))+':</label>\n            <input wizard_field="name" type="text" id="reserve_name"/>\n          </div>\n        </div>\n      </div>\n      <div id="reserve_add_body">\n        ';return i=null!=(i=e.vnetsTableHTML||(null!=t?t.vnetsTableHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"vnetsTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+="\n      </div>\n      <br>\n",s=(e.advancedSection||t&&t.advancedSection||o).call(t,(e.tr||t&&t.tr||o).call(t,"Advanced Options",{name:"tr",hash:{},data:n}),{name:"advancedSection",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+'      <div class="reveal-footer">\n        <div class="form_buttons">\n          <button class="button radius right success" id="submit_reserve_button" type="submit" value="Network.reserve">\n            '+l((e.tr||t&&t.tr||o).call(t,"Reserve",{name:"tr",hash:{},data:n}))+'\n          </button>\n        </div>\n      </div>\n      <a class="close-reveal-modal">&#215;</a>\n    </form>\n  </div>\n</div>'},useData:!0});return e.registerPartial("tabs/vnets-tab/dialogs/reserve/html",a),a}),define("tabs/vnets-tab/dialogs/reserve/ar-datatable",["require","utils/tab-datatable","sunstone-config","utils/locale","opennebula/network","tabs/vnets-tab/utils/common","utils/notifier","utils/progress-bar"],function(t){function e(t,e){this.conf=e||{},this.dataTableId=t,this.vnetId=e.vnetId,this.dataTableOptions={bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[]},this.columns=[i.tr("Address Range"),i.tr("Type"),i.tr("Start"),i.tr("IPv6 Prefix"),i.tr("Leases")],this.selectOptions={id_index:1,name_index:1,select_resource:i.tr("Please select an Address Range from the list"),you_selected:i.tr("You selected the following Address Range:")},s.call(this)}function a(){var t=this;r.show({data:{id:t.vnetId},timeout:!0,success:function(e,a){var n=[],s=o.getARList(a.VNET);$.each(s,function(){var t,e=this,a=e.AR_ID;t="IP4"==e.TYPE||"IP4_6"==e.TYPE?e.IP?e.IP:"--":e.MAC?e.MAC:"--";var s="";e.GLOBAL_PREFIX&&e.ULA_PREFIX?s+=e.GLOBAL_PREFIX+"<br>"+e.ULA_PREFIX:e.GLOBAL_PREFIX?s+=e.GLOBAL_PREFIX:e.ULA_PREFIX?s+=e.ULA_PREFIX:s="--",n.push([null,a,e.TYPE?e.TYPE:"--",t,s,c.html(e.USED_LEASES,e.SIZE)])}),t.updateView(null,n,!0)},error:l.onError})}function n(){return[]}var s=t("utils/tab-datatable"),i=(t("sunstone-config"),t("utils/locale")),r=t("opennebula/network"),o=t("tabs/vnets-tab/utils/common"),l=t("utils/notifier"),c=t("utils/progress-bar");return e.prototype=Object.create(s.prototype),e.prototype.constructor=e,e.prototype.elementArray=n,e.prototype.updateFn=a,e}),define("tabs/vnets-tab/dialogs/reserve",["require","utils/dialogs/dialog","hbs!./reserve/html","sunstone","utils/locale","utils/tips","utils/wizard-fields","tabs/vnets-tab/datatable","./reserve/ar-datatable","./reserve/dialogId"],function(t){function e(){this.dialogId=h,r.call(this)}function a(){var t=this,e={info:!1,select:!0,selectOptions:{filter_fn:function(e){return e.PARENT_NETWORK_ID==t.vnetId}}};this.vnetsTable=new u("reserve",e);var a={info:!1,select:!0,vnetId:this.vnetId};return this.arsTable=new p("ar_reserve",a),o({vnetsTableHTML:this.vnetsTable.dataTableHTML,arsTableHTML:this.arsTable.dataTableHTML})}function n(t){var e=this;$('input[name="reserve_target"]',t).change(function(){switch($("div#reserve_new_body",t).hide(),$("div#reserve_add_body",t).hide(),$("input",$("div#reserve_new_body",t)).prop("wizard_field_disabled",!0),$("input",$("div#reserve_add_body",t)).prop("wizard_field_disabled",!0),$(this).val()){case"NEW":$("div#reserve_new_body",t).show(),$("input",$("div#reserve_new_body",t)).prop("wizard_field_disabled",!1);break;case"ADD":$("div#reserve_add_body",t).show(),$("input",$("div#reserve_add_body",t)).prop("wizard_field_disabled",!1)}}),$("input#reserve_new",t).prop("checked",!0),$("input#reserve_new",t).change(),e.vnetsTable.idInput().attr("wizard_field","vnet"),e.arsTable.idInput().attr("wizard_field","ar_id"),this.vnetsTable.initialize(),this.arsTable.initialize(),c.setup(t),$("#reserve_form",t).submit(function(){var a=d.retrieve(t);return l.runAction("Network.reserve",e.vnetId,a),!1})}function s(){this.vnetsTable.refreshResourceTableSelect(),this.arsTable.refreshResourceTableSelect()}function i(t){this.vnetId=t.vnetId,$("#vnet_id",this.dialogElement).text(t.vnetId)}var r=t("utils/dialogs/dialog"),o=t("hbs!./reserve/html"),l=t("sunstone"),c=(t("utils/locale"),t("utils/tips")),d=t("utils/wizard-fields"),u=t("tabs/vnets-tab/datatable"),p=t("./reserve/ar-datatable"),h=t("./reserve/dialogId");return e.DIALOG_ID=h,e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=s,e.prototype.setup=n,e.prototype.setParams=i,e}),define("hbs!tabs/vnets-tab/panels/info/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,c="function",d='<div class="row">\n  <div class="large-6 columns">\n    <table id="info_vnet_table" class="dataTable extended_table">\n      <thead>\n        <tr>\n          <th colspan="3">'+o((e.tr||t&&t.tr||r).call(t,"Information",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"ID",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s.ID:s,t))+"</td>\n          <td></td>\n        </tr>\n        ";return i=null!=(i=e.renameTrHTML||(null!=t?t.renameTrHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"renameTrHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+="\n        <tr>\n          ",i=null!=(i=e.clusterTrHTML||(null!=t?t.clusterTrHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"clusterTrHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+="\n        </tr>\n        ",i=null!=(i=e.reservationTrHTML||(null!=t?t.reservationTrHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"reservationTrHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+='\n      <tbody>\n    </table>\n  </div>\n  <div class="large-6 columns">\n    ',i=null!=(i=e.permissionsTableHTML||(null!=t?t.permissionsTableHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"permissionsTableHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+='\n  </div>\n</div>\n<div class="row">\n  <div class="large-9 columns">\n    ',i=null!=(i=e.templateTableHTML||(null!=t?t.templateTableHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"templateTableHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+"\n  </div>\n</div>\n"},useData:!0});return e.registerPartial("tabs/vnets-tab/panels/info/html",a),a}),define("tabs/vnets-tab/panels/info/panelId",["require"],function(){return"vnet_info_tab"}),define("tabs/vnets-tab/panels/info",["require","hbs!./info/html","utils/locale","utils/panel/permissions-table","utils/panel/cluster-tr","utils/panel/rename-tr","opennebula/network","utils/panel/template-table","../tabId","./info/panelId"],function(t){function e(t){return this.title=i.tr("Info"),this.icon="fa-info-circle",this.element=t[h],this}function a(){var t=l.html(p,this.element.NAME),e=o.html(this.element.CLUSTER),a=r.html(d,p,this.element),n=$.extend({},this.element.TEMPLATE);delete n.SECURITY_GROUPS;var u=c.html(n,p,i.tr("Attributes")),h="";return this.element.PARENT_NETWORK_ID.length>0?(h='<tr>          <td class="key_td">'+i.tr("Reservation parent")+'</td>          <td class="value_td">'+this.element.PARENT_NETWORK_ID+"</td>          <td></td>        </tr>",$(".reserve-right-info").prop("disabled",!0),$(".reserve-right-info").addClass("has-tip"),$(".reserve-right-info").attr("title",i.tr("This Network is already a reservation"))):($(".reserve-right-info").prop("disabled",!1),$(".reserve-right-info").removeClass("has-tip"),$(".reserve-right-info").removeAttr("title")),s({element:this.element,renameTrHTML:t,clusterTrHTML:e,reservationTrHTML:h,permissionsTableHTML:a,templateTableHTML:u})}function n(t){l.setup(p,this.element.ID,t),o.setup(p,this.element.ID,this.element.CLUSTER_ID,t),r.setup(d,p,this.element,t);var e=$.extend({},this.element.TEMPLATE);delete e.SECURITY_GROUPS;var a={};return void 0!=this.element.TEMPLATE.SECURITY_GROUPS&&(a.SECURITY_GROUPS=this.element.TEMPLATE.SECURITY_GROUPS),c.setup(e,p,this.element.ID,t,a),!1}var s=t("hbs!./info/html"),i=t("utils/locale"),r=t("utils/panel/permissions-table"),o=t("utils/panel/cluster-tr"),l=t("utils/panel/rename-tr"),c=(t("opennebula/network"),t("utils/panel/template-table")),d=t("../tabId"),u=t("./info/panelId"),p="Network",h="VNET";return e.PANEL_ID=u,e.prototype.html=a,e.prototype.setup=n,e}),define("hbs!tabs/vnets-tab/panels/ar/html",["hbs","hbs/handlebars","templates/helpers/isTabActionEnabled","templates/helpers/tr"],function(t,e){var a=e.template({1:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'        <button class="button success small radius" id="add_ar_button">\n          <span class="fa fa-plus"></span>'+i((e.tr||t&&t.tr||s).call(t,"Add",{name:"tr",hash:{},data:n}))+"\n        </button>\n"},3:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'          <button class="button secondary small radius" id="update_ar_button" ar_id="" disabled="disabled">\n            <span class="fa fa-pencil-square-o"></span>'+i((e.tr||t&&t.tr||s).call(t,"Update",{name:"tr",hash:{},data:n}))+"\n          </button>\n"},5:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'          <button class="button secondary small radius" id="rm_ar_button" ar_id="" disabled="disabled">\n            <span class="fa fa-trash-o"></span>'+i((e.tr||t&&t.tr||s).call(t,"Remove",{name:"tr",hash:{},data:n}))+"\n          </button>\n"},7:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='            <tr ar="'+l((i=null!=(i=e.id||(null!=t?t.id:t))?i:o,typeof i===r?i.call(t,{name:"id",hash:{},data:n}):i))+'">\n              <td style="white-space: nowrap" class="value_td">'+l((i=null!=(i=e.id||(null!=t?t.id:t))?i:o,typeof i===r?i.call(t,{name:"id",hash:{},data:n}):i))+'</td>\n              <td style="white-space: nowrap" class="value_td">'+l((i=null!=(i=e.type||(null!=t?t.type:t))?i:o,typeof i===r?i.call(t,{name:"type",hash:{},data:n}):i))+'</td>\n              <td style="white-space: nowrap" class="value_td">'+l((i=null!=(i=e.start||(null!=t?t.start:t))?i:o,typeof i===r?i.call(t,{name:"start",hash:{},data:n}):i))+'</td>\n              <td style="white-space: nowrap" class="value_td">';return i=null!=(i=e.prefixHTML||(null!=t?t.prefixHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"prefixHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+='</td>\n              <td style="white-space: nowrap" class="value_td">',i=null!=(i=e.leasesHTML||(null!=t?t.leasesHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"leasesHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+"</td>\n            </tr>\n"},9:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'      <div class="text-center">\n        <span class="fa-stack fa-5x" style="color: #dfdfdf">\n          <i class="fa fa-cloud fa-stack-2x"></i>\n          <i class="fa fa-info-circle fa-stack-1x fa-inverse"></i>\n        </span>\n        <br>\n        <br>\n        <span style="font-size: 18px; color: #999">\n          '+i((e.tr||t&&t.tr||s).call(t,"Select an Address Range to see more information",{name:"tr",hash:{},data:n}))+"\n        </span>\n      </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o='<form id="ar_list_form">\n  <div class="row collapse">\n    <div class="large-12 columns">\n';return s=(e.isTabActionEnabled||t&&t.isTabActionEnabled||i).call(t,"vnets-tab","Network.add_ar",{name:"isTabActionEnabled",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(o+=s),o+='      <span class="right">\n',s=(e.isTabActionEnabled||t&&t.isTabActionEnabled||i).call(t,"vnets-tab","Network.update_ar",{name:"isTabActionEnabled",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(o+=s),s=(e.isTabActionEnabled||t&&t.isTabActionEnabled||i).call(t,"vnets-tab","Network.remove_ar",{name:"isTabActionEnabled",hash:{},fn:this.program(5,n),inverse:this.noop,data:n}),null!=s&&(o+=s),o+='      </span>\n    </div>\n  </div>\n  <div class="row collapse">\n    <div class="large-12 columns" style="overflow:auto">\n      <table id="ar_list_datatable" class="datatable twelve">\n        <thead>\n          <tr>\n            <th>'+r((e.tr||t&&t.tr||i).call(t,"Address Range",{name:"tr",hash:{},data:n}))+"</th>\n            <th>"+r((e.tr||t&&t.tr||i).call(t,"Type",{name:"tr",hash:{},data:n}))+"</th>\n            <th>"+r((e.tr||t&&t.tr||i).call(t,"Start",{name:"tr",hash:{},data:n}))+"</th>\n            <th>"+r((e.tr||t&&t.tr||i).call(t,"IPv6 Prefix",{name:"tr",hash:{},data:n}))+"</th>\n            <th>"+r((e.tr||t&&t.tr||i).call(t,"Leases",{name:"tr",hash:{},data:n}))+"</th>\n          </tr>\n        </thead>\n        <tbody>\n",s=e.each.call(t,null!=t?t.arList:t,{name:"each",hash:{},fn:this.program(7,n),inverse:this.noop,data:n}),null!=s&&(o+=s),o+='        </tbody>\n      </table>\n    </div>\n  </div>\n  <div id="ar_show_info">\n',s=e["if"].call(t,null!=t?t.arList:t,{name:"if",hash:{},fn:this.program(9,n),inverse:this.noop,data:n}),null!=s&&(o+=s),o+"  </div>\n</form>"},useData:!0});return e.registerPartial("tabs/vnets-tab/panels/ar/html",a),a}),define("hbs!tabs/vnets-tab/panels/ar/arInfo",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({1:function(t,e,a,n){var s,i="";return s=e["if"].call(t,null!=t?t.value:t,{name:"if",hash:{},fn:this.program(2,n),inverse:this.noop,data:n}),null!=s&&(i+=s),i},2:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'            <tr>\n              <td class="key_td">'+o((s=null!=(s=e.key||(null!=t?t.key:t))?s:r,typeof s===i?s.call(t,{name:"key",hash:{},data:n}):s))+'</td>\n              <td class="value_td">'+o((s=null!=(s=e.value||(null!=t?t.value:t))?s:r,typeof s===i?s.call(t,{name:"value",hash:{},data:n}):s))+"</td>\n            </tr>\n"},4:function(t,e,a,n){var s=this.lambda,i=this.escapeExpression;return'          <tr>\n           <td class="key_td">'+i(s(n&&n.key,t))+'</td>\n           <td class="value_td">'+i(s(t,t))+"</td>\n         </tr>\n"},6:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o="function";return'          <tr>\n            <td class="key_td">'+r((e.tr||t&&t.tr||i).call(t,"IP",{name:"tr",hash:{},data:n}))+'</td>\n            <td class="value_td">'+r((s=null!=(s=e.first_ip||(null!=t?t.first_ip:t))?s:i,typeof s===o?s.call(t,{name:"first_ip",hash:{},data:n}):s))+'</td>\n            <td class="value_td">'+r((s=null!=(s=e.last_ip||(null!=t?t.last_ip:t))?s:i,typeof s===o?s.call(t,{name:"last_ip",hash:{},data:n}):s))+"</td>\n          </tr>\n"},8:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o="function";return'          <tr>\n            <td class="key_td">'+r((e.tr||t&&t.tr||i).call(t,"IP6_GLOBAL",{name:"tr",hash:{},data:n}))+'</td>\n            <td class="value_td">'+r((s=null!=(s=e.first_ip6_global||(null!=t?t.first_ip6_global:t))?s:i,typeof s===o?s.call(t,{name:"first_ip6_global",hash:{},data:n}):s))+'</td>\n            <td class="value_td">'+r((s=null!=(s=e.last_ip6_global||(null!=t?t.last_ip6_global:t))?s:i,typeof s===o?s.call(t,{name:"last_ip6_global",hash:{},data:n}):s))+"</td>\n          </tr>\n"},10:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o="function";return'          <tr>\n            <td class="key_td">'+r((e.tr||t&&t.tr||i).call(t,"IP6_ULA",{name:"tr",hash:{},data:n}))+'</td>\n            <td class="value_td">'+r((s=null!=(s=e.first_ip6_ula||(null!=t?t.first_ip6_ula:t))?s:i,typeof s===o?s.call(t,{name:"first_ip6_ula",hash:{},data:n}):s))+'</td>\n            <td class="value_td">'+r((s=null!=(s=e.last_ip6_ula||(null!=t?t.last_ip6_ula:t))?s:i,typeof s===o?s.call(t,{name:"last_ip6_ula",hash:{},data:n}):s))+"</td>\n          </tr>\n"},12:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l="function",c='  <div class="row collapse">\n    <div class="large-12 columns">\n      <table class="dataTable extended_table">\n        <thead>\n          <tr><th>'+o((e.tr||t&&t.tr||r).call(t,"Security Groups",{name:"tr",hash:{},data:n}))+'</th></tr>\n        </thead>\n        <tbody/>\n      </table>\n    </div>\n    <div class="large-12 columns">\n      ';return i=null!=(i=e.secgroupTableHTML||(null!=t?t.secgroupTableHTML:t))?i:r,s=typeof i===l?i.call(t,{name:"secgroupTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+"\n    </div>\n  </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l="function",c='<div class="row collapse">\n  <div class="large-6 columns">\n    <table class="dataTable extended_table">\n      <thead>\n        <tr><th colspan="2">'+o((e.tr||t&&t.tr||r).call(t,"Address Range",{name:"tr",hash:{},data:n}))+" "+o((i=null!=(i=e.arId||(null!=t?t.arId:t))?i:r,typeof i===l?i.call(t,{name:"arId",hash:{},data:n}):i))+"</th></tr>\n      </thead>\n      <tbody>\n";return s=e.each.call(t,null!=t?t.arKnownAttr:t,{name:"each",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+='      </tbody>\n    </table>\n  </div>\n  <div class="large-6 columns">\n    <table class="dataTable extended_table">\n      <thead>\n        <tr><th colspan="2">&nbsp;</th></tr>\n      </thead>\n      <tbody>\n',s=e.each.call(t,null!=t?t.arExtraAttr:t,{name:"each",hash:{},fn:this.program(4,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+='      </tbody>\n    </table>\n  </div>\n</div>\n<div class="row collapse">\n  <div class="large-12 columns">\n    <table class="dataTable extended_table">\n      <thead>\n        <tr>\n          <th>'+o((e.tr||t&&t.tr||r).call(t,"Range",{name:"tr",hash:{},data:n}))+"</th>\n          <th>"+o((e.tr||t&&t.tr||r).call(t,"First",{name:"tr",hash:{},data:n}))+"</th>\n          <th>"+o((e.tr||t&&t.tr||r).call(t,"Last",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"MAC",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o((i=null!=(i=e.first_mac||(null!=t?t.first_mac:t))?i:r,typeof i===l?i.call(t,{name:"first_mac",hash:{},data:n}):i))+'</td>\n          <td class="value_td">'+o((i=null!=(i=e.last_mac||(null!=t?t.last_mac:t))?i:r,typeof i===l?i.call(t,{name:"last_mac",hash:{},data:n}):i))+"</td>\n        </tr>\n",s=e["if"].call(t,null!=t?t.first_ip:t,{name:"if",hash:{},fn:this.program(6,n),inverse:this.noop,data:n}),null!=s&&(c+=s),s=e["if"].call(t,null!=t?t.first_ip6_global:t,{name:"if",hash:{},fn:this.program(8,n),inverse:this.noop,data:n}),null!=s&&(c+=s),s=e["if"].call(t,null!=t?t.first_ip6_ula:t,{name:"if",hash:{},fn:this.program(10,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+="      </tbody>\n    </table>\n  </div>\n</div>\n",s=e["if"].call(t,null!=t?t.secgroupTableHTML:t,{name:"if",hash:{},fn:this.program(12,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c},useData:!0});return e.registerPartial("tabs/vnets-tab/panels/ar/arInfo",a),a}),define("tabs/vnets-tab/panels/ar/panelId",["require"],function(){return"vnet_ar_list_tab"}),define("tabs/vnets-tab/panels/ar",["require","hbs!./ar/html","hbs!./ar/arInfo","utils/locale","utils/progress-bar","sunstone-config","../utils/common","tabs/secgroups-tab/datatable","sunstone","opennebula/network","utils/notifier","../tabId","./ar/panelId","../dialogs/add-ar/dialogId","../dialogs/update-ar/dialogId"],function(t){function e(t){return this.title=c.tr("Addresses"),this.icon="fa-align-justify",this.element=t[g],this.last_selected_row_ar="",this.secgroupTable=void 0,this}function a(){for(var t=p.getARList(this.element),e=[],a=0;a<t.length;a++){var n=t[a],s=n.AR_ID,i=n.TYPE?n.TYPE:"--",r="";r="IP4"==n.TYPE||"IP4_6"==n.TYPE?n.IP?n.IP:"--":n.MAC?n.MAC:"--";var l="";n.GLOBAL_PREFIX&&n.ULA_PREFIX?l+=n.GLOBAL_PREFIX+"<br>"+n.ULA_PREFIX:n.GLOBAL_PREFIX?l+=n.GLOBAL_PREFIX:n.ULA_PREFIX?l+=n.ULA_PREFIX:l="--";var c=d.html(n.USED_LEASES,n.SIZE);e.push({id:s,type:i,start:r,prefixHTML:l,leasesHTML:c})}return o({element:this.element,arList:e})}function n(t){var e=this,a=$("#ar_list_datatable",t).dataTable({bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[]});return a.fnSort([[0,config.user_config.table_order]]),a.off("click","tbody tr"),a.on("click","tbody tr",function(){var n=a.fnGetData(this);if(!n)return!0;var s=n[0];return s?(e.last_selected_row_ar&&e.last_selected_row_ar.children().each(function(){$(this).removeClass("markrowchecked")}),e.last_selected_row_ar=$(this),$(this).children().each(function(){$(this).addClass("markrowchecked")}),$("#update_ar_button",t).attr("ar_id",s),$("#update_ar_button",t).prop("disabled",!1),$("#rm_ar_button",t).attr("ar_id",s).removeAttr("disabled"),$("#ar_show_info",t).html(i(e.element,s)),r($("#ar_show_info",t),e.element,s),!1):!0}),u.isTabActionEnabled("vnets-tab","Network.remove_ar")&&(t.off("click","button#rm_ar_button"),t.on("click","button#rm_ar_button",function(){var t=$(this).attr("ar_id"),a={ar_id:t};return f.runAction("Network.rm_ar",e.element.ID,a),!1})),u.isTabActionEnabled("vnets-tab","Network.add_ar")&&(t.off("click","button#add_ar_button"),t.on("click","button#add_ar_button",function(){var t=e.element.ID;return f.getDialog(y).setId(t),f.getDialog(y).show(),!1})),u.isTabActionEnabled("vnets-tab","Network.update_ar")&&(t.off("click","button#update_ar_button"),t.on("click","button#update_ar_button",function(){var t=e.element.ID,a=$(this).attr("ar_id");return m.show({data:{id:t},timeout:!0,success:function(e,n){var i=n.VNET,r=s(i,a);void 0!=r?(f.getDialog(w).reset(),f.getDialog(w).setParams({vnetId:t,arId:a,arData:$.extend({},r)}),f.getDialog(w).show()):(_.notifyError(c.tr("The Adress Range was not found")),f.runAction("Network.show",t))},error:_.onError}),!1})),!1}function s(t,e){for(var a=p.getARList(t),n=void 0,s=0;s<a.length;s++)if(e==a[s].AR_ID){n=$.extend({},a[s]);
break}return n}function i(t,e){var a=s(t,e);if(void 0==a)return"";var n=a.MAC,i=a.MAC_END,r=a.IP,o=a.IP_END,d=a.IP6_GLOBAL,u=a.IP6_GLOBAL_END,p=a.IP6_ULA,f=a.IP6_ULA_END,m=[{key:c.tr("Type"),value:a.TYPE},{key:c.tr("MAC Start"),value:a.MAC},{key:c.tr("IP Start"),value:a.IP},{key:c.tr("Global prefix"),value:a.GLOBAL_PREFIX},{key:c.tr("ULA prefix"),value:a.ULA_PREFIX},{key:c.tr("Size"),value:a.SIZE},{key:c.tr("Used leases"),value:a.USED_LEASES},{key:c.tr("Reservation parent AR"),value:a.PARENT_NETWORK_AR_ID}];delete a.MAC_END,delete a.IP_END,delete a.IP6_ULA,delete a.IP6_ULA_END,delete a.IP6_GLOBAL,delete a.IP6_GLOBAL_END,delete a.AR_ID,delete a.TYPE,delete a.MAC,delete a.IP,delete a.GLOBAL_PREFIX,delete a.ULA_PREFIX,delete a.SIZE,delete a.USED_LEASES,delete a.LEASES,delete a.PARENT_NETWORK_AR_ID,this.secgroupTable=void 0;var _=void 0;if(void 0!=a.SECURITY_GROUPS&&0!=a.SECURITY_GROUPS.length){var b=a.SECURITY_GROUPS.split(","),g={info:!0,select:!0,selectOptions:{read_only:!0,fixed_ids:b}};this.secgroupTable=new h(v,g),_=this.secgroupTable.dataTableHTML}delete a.SECURITY_GROUPS;var y=a;return l({arId:e,arKnownAttr:m,arExtraAttr:y,first_mac:n,last_mac:i,first_ip:r,last_ip:o,first_ip6_global:d,last_ip6_global:u,first_ip6_ula:p,last_ip6_ula:f,secgroupTableHTML:_})}function r(t,e,a){var n=s(e,a);void 0!=n&&void 0!=this.secgroupTable&&(this.secgroupTable.initialize(),this.secgroupTable.refreshResourceTableSelect())}var o=t("hbs!./ar/html"),l=t("hbs!./ar/arInfo"),c=t("utils/locale"),d=t("utils/progress-bar"),u=t("sunstone-config"),p=t("../utils/common"),h=t("tabs/secgroups-tab/datatable"),f=t("sunstone"),m=t("opennebula/network"),_=t("utils/notifier"),b=(t("../tabId"),t("./ar/panelId")),v=b+"SecurityGroupsTable",g="VNET",y=t("../dialogs/add-ar/dialogId"),w=t("../dialogs/update-ar/dialogId");return e.PANEL_ID=b,e.prototype.html=a,e.prototype.setup=n,e}),define("hbs!tabs/vnets-tab/panels/leases/html",["hbs","hbs/handlebars","templates/helpers/isTabActionEnabled","templates/helpers/tr"],function(t,e){var a=e.template({1:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'    <div class="row collapse">\n      <div class="large-4 columns">\n        <input type="text" id="panel_hold_lease"/>\n      </div>\n      <div class="large-2 columns end">\n        <button class="button small secondary radius" id="panel_hold_lease_button">\n          '+i((e.tr||t&&t.tr||s).call(t,"Hold IP",{name:"tr",hash:{},data:n}))+"\n        </button>\n      </div>\n    </div>\n"},3:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='            <tr ip="'+l((i=null!=(i=e.IP||(null!=t?t.IP:t))?i:o,typeof i===r?i.call(t,{name:"IP",hash:{},data:n}):i))+'" mac="'+l((i=null!=(i=e.MAC||(null!=t?t.MAC:t))?i:o,typeof i===r?i.call(t,{name:"MAC",hash:{},data:n}):i))+'">\n              <td class="key_td">';return i=null!=(i=e.col0HTML||(null!=t?t.col0HTML:t))?i:o,s=typeof i===r?i.call(t,{name:"col0HTML",hash:{},data:n}):i,null!=s&&(c+=s),c+="</td>\n              <td>",i=null!=(i=e.col1HTML||(null!=t?t.col1HTML:t))?i:o,s=typeof i===r?i.call(t,{name:"col1HTML",hash:{},data:n}):i,null!=s&&(c+=s),c+'</td>\n              <td style="white-space: nowrap" class="value_td">'+l((i=null!=(i=e.IP||(null!=t?t.IP:t))?i:o,typeof i===r?i.call(t,{name:"IP",hash:{},data:n}):i))+'</td>\n              <td style="white-space: nowrap" class="value_td">'+l((i=null!=(i=e.MAC||(null!=t?t.MAC:t))?i:o,typeof i===r?i.call(t,{name:"MAC",hash:{},data:n}):i))+'</td>\n              <td style="white-space: nowrap" class="value_td">'+l((i=null!=(i=e.IP6_LINK||(null!=t?t.IP6_LINK:t))?i:o,typeof i===r?i.call(t,{name:"IP6_LINK",hash:{},data:n}):i))+'</td>\n              <td style="white-space: nowrap" class="value_td">'+l((i=null!=(i=e.IP6_ULA||(null!=t?t.IP6_ULA:t))?i:o,typeof i===r?i.call(t,{name:"IP6_ULA",hash:{},data:n}):i))+'</td>\n              <td style="white-space: nowrap" class="value_td">'+l((i=null!=(i=e.IP6_GLOBAL||(null!=t?t.IP6_GLOBAL:t))?i:o,typeof i===r?i.call(t,{name:"IP6_GLOBAL",hash:{},data:n}):i))+'</td>\n              <td style="white-space: nowrap" class="value_td">'+l((i=null!=(i=e.AR_ID||(null!=t?t.AR_ID:t))?i:o,typeof i===r?i.call(t,{name:"AR_ID",hash:{},data:n}):i))+"</td>\n            </tr>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o='<form id="leases_form">\n';return s=(e.isTabActionEnabled||t&&t.isTabActionEnabled||i).call(t,"vnets-tab","Network.hold_lease",{name:"isTabActionEnabled",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(o+=s),o+='  <div class="row collapse">\n    <div class="large-12 columns" style="overflow:auto">\n      <table id="leases_datatable" class="datatable twelve">\n        <thead>\n          <tr>\n            <th></th>\n            <th></th>\n            <th>'+r((e.tr||t&&t.tr||i).call(t,"IP",{name:"tr",hash:{},data:n}))+"</th>\n            <th>"+r((e.tr||t&&t.tr||i).call(t,"MAC",{name:"tr",hash:{},data:n}))+"</th>\n            <th>"+r((e.tr||t&&t.tr||i).call(t,"IPv6 Link",{name:"tr",hash:{},data:n}))+"</th>\n            <th>"+r((e.tr||t&&t.tr||i).call(t,"IPv6 ULA",{name:"tr",hash:{},data:n}))+"</th>\n            <th>"+r((e.tr||t&&t.tr||i).call(t,"IPv6 Global",{name:"tr",hash:{},data:n}))+"</th>\n            <th>"+r((e.tr||t&&t.tr||i).call(t,"Address Range",{name:"tr",hash:{},data:n}))+"</th>\n          </tr>\n        </thead>\n        <tbody>\n",s=e.each.call(t,null!=t?t.leases:t,{name:"each",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(o+=s),o+"        </tbody>\n      </table>\n    </div>\n  </div>\n</form>"},useData:!0});return e.registerPartial("tabs/vnets-tab/panels/leases/html",a),a}),define("tabs/vnets-tab/panels/leases/panelId",["require"],function(){return"vnet_leases_tab"}),define("tabs/vnets-tab/panels/leases",["require","hbs!./leases/html","utils/locale","sunstone-config","sunstone","../utils/common","../tabId","./leases/panelId"],function(t){function e(t){return this.title=i.tr("Leases"),this.icon="fa-list-ul",this.element=t[d],this}function a(){for(var t=l.getARList(this.element),e=[],a=0;a<t.length;a++){var n=t[a],o=n.AR_ID,c=n.LEASES.LEASE;if(c){c.constructor!=Array&&(c=[c]);for(var d=0;d<c.length;d++){var u=c[d],p="",h="";"-1"==u.VM?(p='<span type="text" class="alert radius label"></span>',r.isTabActionEnabled("vnets-tab","Network.release_lease")&&(h='<a class="release_lease" href="#"><i class="fa fa-play"/></a>')):void 0!=u.VM?(p='<span type="text" class="radius label "></span>',h=i.tr("VM:")+u.VM):void 0!=u.VNET?(p='<span type="text" class="radius label "></span>',h=i.tr("NET:")+u.VNET):(p='<span type="text" class="radius label "></span>',h="--"),e.push({col0HTML:p,col1HTML:h,IP:u.IP?u.IP:"--",MAC:u.MAC?u.MAC:"--",IP6_LINK:u.IP6_LINK?u.IP6_LINK:"--",IP6_ULA:u.IP6_ULA?u.IP6_ULA:"--",IP6_GLOBAL:u.IP6_GLOBAL?u.IP6_GLOBAL:"--",AR_ID:o})}}}return s({element:this.element,leases:e})}function n(t){{var e=this;$("#leases_datatable",t).dataTable({bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:[0,1]}]})}return r.isTabActionEnabled("vnets-tab","Network.hold_lease")&&(t.off("click","button#panel_hold_lease_button"),t.on("click","button#panel_hold_lease_button",function(){var t=$("input#panel_hold_lease").val();if(t.length){var a={ip:t};o.runAction("Network.hold",e.element.ID,a)}return!1}),t.off("click","a.hold_lease"),t.on("click","a.hold_lease",function(){var t=$(this).parents("tr").attr("ip"),a={ip:t};return o.runAction("Network.hold",e.element.ID,a),$(this).parents("tr").html('<td class="key_td">'+spinner+'</td><td class="value_td"></td>'),!1})),r.isTabActionEnabled("vnets-tab","Network.release_lease")&&(t.off("click","a.release_lease"),t.on("click","a.release_lease",function(){var t=$(this).parents("tr").attr("ip");"undefined"==t&&(t=$(this).parents("tr").attr("mac"));var a={ip:t};return o.runAction("Network.release",e.element.ID,a),$(this).parents("tr").html('<td class="key_td">'+spinner+'</td><td class="value_td"></td>'),!1})),!1}var s=t("hbs!./leases/html"),i=t("utils/locale"),r=t("sunstone-config"),o=t("sunstone"),l=t("../utils/common"),c=(t("../tabId"),t("./leases/panelId")),d="VNET";return e.PANEL_ID=c,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/vnets-tab/panels/secgroups/panelId",["require"],function(){return"vnet_sg_list_tab"}),define("tabs/vnets-tab/panels/secgroups",["require","utils/locale","tabs/secgroups-tab/datatable","./secgroups/panelId"],function(t){function e(t){return this.title=s.tr("Security"),this.icon="fa-shield",this.element=t[l],this}function a(){var t=[];void 0!=this.element.TEMPLATE.SECURITY_GROUPS&&0!=this.element.TEMPLATE.SECURITY_GROUPS.length&&(t=this.element.TEMPLATE.SECURITY_GROUPS.split(","));var e={info:!0,select:!0,selectOptions:{read_only:!0,fixed_ids:t}};return this.secgroupTable=new i(o,e),this.secgroupTable.dataTableHTML}function n(){return this.secgroupTable.initialize(),this.secgroupTable.refreshResourceTableSelect(),!1}var s=t("utils/locale"),i=t("tabs/secgroups-tab/datatable"),r=t("./secgroups/panelId"),o=r+"SecurityGroupsTable",l="VNET";return e.PANEL_ID=r,e.prototype.html=a,e.prototype.setup=n,e}),define("hbs!tabs/vnets-tab/form-panels/create/wizard",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<form data-abide="ajax" id="'+l((i=null!=(i=e.formPanelId||(null!=t?t.formPanelId:t))?i:o,typeof i===r?i.call(t,{name:"formPanelId",hash:{},data:n}):i))+'Wizard" class="custom creation">\n  <div>\n    <dl id="vnet_create_tabs" class="tabs right-info-tabs text-center" data-tab>\n      <dd class="active">\n        <a href="#vnetCreateGeneralTab"> <i class="fa fa-globe"></i>\n          <br>'+l((e.tr||t&&t.tr||o).call(t,"General",{name:"tr",hash:{},data:n}))+'</a>\n      </dd>\n      <dd>\n        <a href="#vnetCreateBridgeTab"> <i class="fa fa-cog"></i>\n          <br>'+l((e.tr||t&&t.tr||o).call(t,"Conf",{name:"tr",hash:{},data:n}))+'</a>\n      </dd>\n      <dd>\n        <a href="#vnetCreateARTab">\n          <i class="fa fa-align-justify"></i>\n          <br>'+l((e.tr||t&&t.tr||o).call(t,"Addresses",{name:"tr",hash:{},data:n}))+'</a>\n      </dd>\n      <dd>\n        <a href="#vnetCreateSecurityTab">\n          <i class="fa fa-shield"></i>\n          <br>'+l((e.tr||t&&t.tr||o).call(t,"Security",{name:"tr",hash:{},data:n}))+'</a>\n      </dd>\n      <dd>\n        <a href="#vnetCreateContextTab">\n          <i class="fa fa-folder"></i>\n          <br>'+l((e.tr||t&&t.tr||o).call(t,"Context",{name:"tr",hash:{},data:n}))+'</a>\n      </dd>\n    </dl>\n    <div id="vnet_create_tabs_content" class="tabs-content">\n      <div class="content active" id="vnetCreateGeneralTab">\n        <div class="row">\n          <div class="large-6 columns">\n            <label for="name" >\n              '+l((e.tr||t&&t.tr||o).call(t,"Name",{name:"tr",hash:{},data:n}))+':\n              <span class="tip">\n                '+l((e.tr||t&&t.tr||o).call(t,"Name that the Virtual Network will get for description purposes.",{name:"tr",hash:{},data:n}))+'\n              </span>\n            </label>\n            <input type="text" wizard_field="NAME" required name="name" id="name"/>\n          </div>\n        </div>\n        <div class="row">\n          <div class="large-6 columns">\n            <label for="DESCRIPTION" >\n              '+l((e.tr||t&&t.tr||o).call(t,"Description",{name:"tr",hash:{},data:n}))+':\n              <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Description of the Virtual Network",{name:"tr",hash:{},data:n}))+'</span>\n            </label>\n            <textarea type="text" wizard_field="DESCRIPTION" id="DESCRIPTION" name="DESCRIPTION"/>\n          </div>\n        </div>\n      </div>\n      <div class="content" id="vnetCreateBridgeTab">\n        <div class="row">\n          <div class="large-6 columns">\n            <label for="bridge">\n              '+l((e.tr||t&&t.tr||o).call(t,"Bridge",{name:"tr",hash:{},data:n}))+':\n              <span class="tip">\n                '+l((e.tr||t&&t.tr||o).call(t,"Name of the physical bridge in the physical host where the VM should connect its network interface",{name:"tr",hash:{},data:n}))+'\n              </span>\n            </label>\n            <input type="text" wizard_field="BRIDGE" name="bridge" id="bridge" />\n          </div>\n        </div>\n        <div class="row">\n          <div class="large-6 columns">\n            <label for="network_mode">\n              '+l((e.tr||t&&t.tr||o).call(t,"Network model",{name:"tr",hash:{},data:n}))+':\n              <span class="tip">\n                '+l((e.tr||t&&t.tr||o).call(t,"Choose the same networking model you chose for the hosts that will use this newtork",{name:"tr",hash:{},data:n}))+'\n              </span>\n            </label>\n            <select name="network_mode" id="network_mode">\n              <option value="default">'+l((e.tr||t&&t.tr||o).call(t,"Default",{name:"tr",hash:{},data:n}))+'</option>\n              <option value="802.1Q">'+l((e.tr||t&&t.tr||o).call(t,"802.1Q",{name:"tr",hash:{},data:n}))+'</option>\n              <option value="vxlan">'+l((e.tr||t&&t.tr||o).call(t,"VXLAN",{name:"tr",hash:{},data:n}))+'</option>\n              <option value="ebtables">'+l((e.tr||t&&t.tr||o).call(t,"ebtables",{name:"tr",hash:{},data:n}))+'</option>\n              <option value="openvswitch">'+l((e.tr||t&&t.tr||o).call(t,"Open vSwitch",{name:"tr",hash:{},data:n}))+'</option>\n              <option value="vmware">'+l((e.tr||t&&t.tr||o).call(t,"VMware",{name:"tr",hash:{},data:n}))+'</option>\n            </select>\n          </div>\n          <div class="large-12 columns">\n            <div class="network_mode_description" value="default">\n              '+l((e.tr||t&&t.tr||o).call(t,"Default: dummy driver that doesnt perform any network operation. Firewalling rules are also ignored.",{name:"tr",hash:{},data:n}))+'\n            </div>\n            <div class="network_mode_description" value="802.1Q">\n              '+l((e.tr||t&&t.tr||o).call(t,"802.1Q: restrict network access through VLAN tagging, which also requires support from the hardware switches.",{name:"tr",hash:{},data:n}))+'\n            </div>\n            <div class="network_mode_description" value="vxlan">\n              '+l((e.tr||t&&t.tr||o).call(t,"VXLAN: creates a L2 network overlay based on the VXLAN protocol, each VLAN has associated a multicast address in the 239.0.0.0/8 range.",{name:"tr",hash:{},data:n}))+'\n            </div>\n            <div class="network_mode_description" value="ebtables">\n              '+l((e.tr||t&&t.tr||o).call(t,"ebtables: restrict network access through Ebtables rules. No special hardware configuration required.",{name:"tr",hash:{},data:n}))+'\n            </div>\n            <div class="network_mode_description" value="openvswitch">\n              '+l((e.tr||t&&t.tr||o).call(t,"Open vSwitch: restrict network access with Open vSwitch Virtual Switch.",{name:"tr",hash:{},data:n}))+'\n            </div>\n            <div class="network_mode_description" value="vmware">\n              '+l((e.tr||t&&t.tr||o).call(t,"VMware: uses the VMware networking infrastructure to provide an isolated and 802.1Q compatible network for VMs launched with the VMware hypervisor.",{name:"tr",hash:{},data:n}))+'\n            </div>\n          </div>\n        </div>\n        <br>\n        <div class="row">\n          <div class="large-6 columns">\n            <label for="mac_spoofing">\n              <input type="checkbox" wizard_field="FILTER_MAC_SPOOFING" value="YES" name="mac_spoofing" id="mac_spoofing" />\n              '+l((e.tr||t&&t.tr||o).call(t,"Filter MAC spoofing",{name:"tr",hash:{},data:n}))+'\n              <span class="tip">\n                '+l((e.tr||t&&t.tr||o).call(t,"Activate the filter to prevent mac spoofing. Only works with FW, 802.1Q, VXLAN and Ebtables network drivers.",{name:"tr",hash:{},data:n}))+'\n              </span>\n            </label>\n          </div>\n        </div>\n        <div class="row">\n          <div class="large-6 columns">\n            <label for="ip_spoofing">\n              <input type="checkbox" wizard_field="FILTER_IP_SPOOFING" value="YES" name="ip_spoofing" id="ip_spoofing" />\n              '+l((e.tr||t&&t.tr||o).call(t,"Filter IP spoofing",{name:"tr",hash:{},data:n}))+'\n              <span class="tip">\n                '+l((e.tr||t&&t.tr||o).call(t,"Activate the filter to prevent IP spoofing. Only works with FW, 802.1Q, VXLAN and Ebtables network drivers.",{name:"tr",hash:{},data:n}))+'\n              </span>\n            </label>\n          </div>\n        </div>\n        <div class="row">\n          <div class="large-6 columns">\n            <div class="row">\n              <div class="large-6 columns">\n                <label for="vlan">\n                  '+l((e.tr||t&&t.tr||o).call(t,"VLAN",{name:"tr",hash:{},data:n}))+':\n                  <span class="tip">\n                    '+l((e.tr||t&&t.tr||o).call(t,"Whether or not to isolate this virtual network using the Virtual Network Manager drivers",{name:"tr",hash:{},data:n}))+'\n                  </span>\n                </label>\n                <select wizard_field="VLAN" name="vlan" id="vlan">\n                  <option value="YES" selected="selected">'+l((e.tr||t&&t.tr||o).call(t,"Yes",{name:"tr",hash:{},data:n}))+'</option>\n                  <option value="NO">'+l((e.tr||t&&t.tr||o).call(t,"No",{name:"tr",hash:{},data:n}))+'</option>\n                </select>\n              </div>\n              <div class="large-6 columns">\n                <label for="vlan_id">\n                  '+l((e.tr||t&&t.tr||o).call(t,"VLAN ID",{name:"tr",hash:{},data:n}))+':\n                  <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Optional: Set a specific VLAN id",{name:"tr",hash:{},data:n}))+'</span>\n                </label>\n                <input type="text" wizard_field="VLAN_ID" name="vlan_id" id="vlan_id" />\n              </div>\n            </div>\n          </div>\n          <div class="large-6 columns">\n            <div class="row">\n              <div class="large-12 columns">\n                <label for="phydev">\n                  '+l((e.tr||t&&t.tr||o).call(t,"Physical device",{name:"tr",hash:{},data:n}))+':\n                  <span class="tip">\n                    '+l((e.tr||t&&t.tr||o).call(t,"Name of the physical network device that will be attached to the bridge",{name:"tr",hash:{},data:n}))+'\n                  </span>\n                </label>\n                <input type="text" wizard_field="PHYDEV" name="phydev" id="phydev" />\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class="row">\n          <div class="large-3 columns">\n            <label for="mtu">\n              '+l((e.tr||t&&t.tr||o).call(t,"MTU",{name:"tr",hash:{},data:n}))+':\n              <span class="tip">\n                '+l((e.tr||t&&t.tr||o).call(t,"Set the MTU for the tagged interface. This MTU will be then inherited by the bridge and by the tagged interface.",{name:"tr",hash:{},data:n}))+'\n              </span>\n            </label>\n            <input type="text" wizard_field="MTU" name="mtu" id="mtu" />\n          </div>\n        </div>\n      </div>\n      <div class="content" id="vnetCreateARTab">\n        <div class="row" id="vnetCreateARTabCreate">\n          <div class="large-12 columns">\n            <div class="row">\n              <dl class="tabs vertical" id="vnet_wizard_ar_tabs" data-tab>\n                <dt class="text-center">\n                  <button type="button" class="button tiny radius" id="vnet_wizard_ar_btn">\n                    <span class="fa fa-plus"></span>\n                    '+l((e.tr||t&&t.tr||o).call(t,"Add another Address Range",{name:"tr",hash:{},data:n}))+'\n                  </button>\n                </dt>\n              </dl>\n              <div class="tabs-content vertical" id="vnet_wizard_ar_tabs_content"></div>\n            </div>\n          </div>\n        </div>\n        <div class="row" id="vnetCreateARTabUpdate">\n          <div class="large-12 columns">\n            <p>\n              '+l((e.tr||t&&t.tr||o).call(t,"Address Ranges need to be managed in the individual Virtual Network panel",{name:"tr",hash:{},data:n}))+'\n            </p>\n          </div>\n        </div>\n      </div>\n      <div class="content" id="vnetCreateSecurityTab">\n        ';return i=null!=(i=e.securityGroupsTableHTML||(null!=t?t.securityGroupsTableHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"securityGroupsTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+='\n        <div class="row" id="default_sg_warning">\n          <div class="large-12 columns">\n            <span class="radius secondary label">\n              <i class="fa fa-warning"/>'+l((e.tr||t&&t.tr||o).call(t,"The default Security Group 0 is automatically added to new Virtual Networks",{name:"tr",hash:{},data:n}))+'\n            </span>\n          </div>\n        </div>\n      </div>\n      <div class="content" id="vnetCreateContextTab">\n        <div class="row">\n          <div class="large-6 columns">\n            <label for="net_address">\n              '+l((e.tr||t&&t.tr||o).call(t,"Network address",{name:"tr",hash:{},data:n}))+':\n              <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Base network address. For example, 192.168.1.0",{name:"tr",hash:{},data:n}))+'</span>\n            </label>\n            <input type="text" wizard_field="NETWORK_ADDRESS" name="net_address" id="net_address" />\n          </div>\n          <div class="large-6 columns">\n            <label for="net_mask">\n              '+l((e.tr||t&&t.tr||o).call(t,"Network mask",{name:"tr",hash:{},data:n}))+':\n              <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Network mask. For example, 255.255.255.0",{name:"tr",hash:{},data:n}))+'</span>\n            </label>\n            <input type="text" wizard_field="NETWORK_MASK" name="net_mask" id="net_mask" />\n          </div>\n        </div>\n        <div class="row">\n          <div class="large-6 columns">\n            <label for="net_gateway">\n              '+l((e.tr||t&&t.tr||o).call(t,"Gateway",{name:"tr",hash:{},data:n}))+':\n              <span class="tip">\n                '+l((e.tr||t&&t.tr||o).call(t,"Router for this network. Leave empty if the network is not routable",{name:"tr",hash:{},data:n}))+'\n              </span>\n            </label>\n            <input type="text" wizard_field="GATEWAY" name="net_gateway" id="net_gateway" />\n          </div>\n          <div class="large-6 columns">\n            <label for="net_gateway6">\n              '+l((e.tr||t&&t.tr||o).call(t,"IPv6 Gateway",{name:"tr",hash:{},data:n}))+':\n              <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"IPv6 Router for this network",{name:"tr",hash:{},data:n}))+'</span>\n            </label>\n            <input type="text" wizard_field="GATEWAY6" name="net_gateway6" id="net_gateway6" />\n          </div>\n        </div>\n        <div class="row">\n          <div class="large-6 columns">\n            <label for="net_dns">\n              '+l((e.tr||t&&t.tr||o).call(t,"DNS",{name:"tr",hash:{},data:n}))+':\n              <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Specific DNS for this network",{name:"tr",hash:{},data:n}))+'</span>\n            </label>\n            <input type="text" wizard_field="DNS" name="net_dns" id="net_dns" />\n          </div>\n        </div>\n        <br>\n        <div class="row">\n          <div class="large-12 columns">\n            <span>'+l((e.tr||t&&t.tr||o).call(t,"Custom attributes",{name:"tr",hash:{},data:n}))+"</span>\n            <br>\n            <br>\n          </div>\n        </div>\n        ",i=null!=(i=e.customTagsHTML||(null!=t?t.customTagsHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"customTagsHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+"\n      </div>\n    </div>\n  </div>\n</form>"},useData:!0});return e.registerPartial("tabs/vnets-tab/form-panels/create/wizard",a),a}),define("hbs!tabs/vnets-tab/form-panels/create/advanced",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<form data-abide="ajax" id="'+o((s=null!=(s=e.formPanelId||(null!=t?t.formPanelId:t))?s:r,typeof s===i?s.call(t,{name:"formPanelId",hash:{},data:n}):s))+'Advanced" class="custom creation">\n  <div class="row">\n    <div class="large-12 columns">\n      <p>'+o((e.tr||t&&t.tr||r).call(t,"Write the Virtual Network template here",{name:"tr",hash:{},data:n}))+'</p>\n    </div>\n  </div>\n  <div class="row">\n    <div class="large-12 columns">\n      <textarea id="template" rows="15" required></textarea>\n    </div>\n  </div>\n</form>'},useData:!0});return e.registerPartial("tabs/vnets-tab/form-panels/create/advanced",a),a}),define("tabs/vnets-tab/form-panels/create",["require","foundation.tab","utils/form-panels/form-panel","sunstone","utils/locale","utils/tips","utils/custom-tags-table","tabs/vnets-tab/utils/ar-tab","tabs/secgroups-tab/datatable","utils/template-utils","utils/wizard-fields","hbs!./create/wizard","hbs!./create/advanced","./create/formPanelId","../tabId"],function(t){function e(){this.formPanelId=w,this.tabId=T,this.actions={create:{title:p.tr("Create Virtual Network"),buttonText:p.tr("Create"),resetButton:!0},update:{title:p.tr("Update Virtual Network"),buttonText:p.tr("Update"),resetButton:!1}},d.call(this)}function a(){var t={info:!1,select:!0,selectOptions:{multiple_choice:!0}};return this.securityGroupsTable=new _("vnet_create",t),g({formPanelId:this.formPanelId,customTagsHTML:f.html(),securityGroupsTableHTML:this.securityGroupsTable.dataTableHTML})}function n(){return y({formPanelId:this.formPanelId})}function s(t){this.arTabObjects={};var e=this,a=0;return $("#vnet_wizard_ar_btn",t).bind("click",function(){return e.addARTab(a,t),a++,t.foundation(),!1}),$("#vnetCreateARTab",t).on("click","i.remove-tab",function(){var t=$(this).parent().attr("href"),a=$(this).closest("dd"),n=$(this).closest("dl"),s=$(t),i=s.attr("ar_id");return a.remove(),s.remove(),"active"==a.attr("class")&&$("a",n.children("dd").last()).click(),delete e.arTabObjects[i],!1}),$("#vnetCreateARTab #vnetCreateARTabUpdate",t).hide(),$("#network_mode",t).change(function(){switch($('input,select#vlan,label[for!="network_mode"]',$(this).parent()).hide(),$("input",$(this).parent()).val(""),$(this).val()){case"default":$('input#bridge,label[for="bridge"]',t).show().prop("wizard_field_disabled",!1),$('input#phydev,label[for="phydev"]',t).hide().prop("wizard_field_disabled",!0),$('select#vlan,label[for="vlan"]',t).hide().prop("wizard_field_disabled",!0),$('input#vlan_id,label[for="vlan_id"]',t).hide().prop("wizard_field_disabled",!0),$('input#ip_spoofing,label[for="ip_spoofing"]',t).show().prop("wizard_field_disabled",!1),$('input#mac_spoofing,label[for="mac_spoofing"]',t).show().prop("wizard_field_disabled",!1),$('input#mtu,label[for="mtu"]',t).hide().prop("wizard_field_disabled",!1),$("input#phydev",t).removeAttr("required"),$("input#bridge",t).attr("required","");break;case"802.1Q":$('input#bridge,label[for="bridge"]',t).show().prop("wizard_field_disabled",!1),$('input#phydev,label[for="phydev"]',t).show().prop("wizard_field_disabled",!1),$('select#vlan,label[for="vlan"]',t).show().prop("wizard_field_disabled",!1),$('input#vlan_id,label[for="vlan_id"]',t).show().prop("wizard_field_disabled",!1),$('input#ip_spoofing,label[for="ip_spoofing"]',t).show().prop("wizard_field_disabled",!1),$('input#mac_spoofing,label[for="mac_spoofing"]',t).show().prop("wizard_field_disabled",!1),$('input#mtu,label[for="mtu"]',t).show().prop("wizard_field_disabled",!1),$("input#phydev",t).removeAttr("required"),$("input#bridge",t).removeAttr("required");break;case"vxlan":$('input#bridge,label[for="bridge"]',t).show().prop("wizard_field_disabled",!1),$('input#phydev,label[for="phydev"]',t).show().prop("wizard_field_disabled",!1),$('select#vlan,label[for="vlan"]',t).show().prop("wizard_field_disabled",!1),$('input#vlan_id,label[for="vlan_id"]',t).show().prop("wizard_field_disabled",!1),$('input#ip_spoofing,label[for="ip_spoofing"]',t).show().prop("wizard_field_disabled",!1),$('input#mac_spoofing,label[for="mac_spoofing"]',t).show().prop("wizard_field_disabled",!1),$('input#mtu,label[for="mtu"]',t).show().prop("wizard_field_disabled",!1),$("input#phydev",t).removeAttr("required"),$("input#bridge",t).removeAttr("required");break;case"ebtables":$('input#bridge,label[for="bridge"]',t).show().prop("wizard_field_disabled",!1),$('input#phydev,label[for="phydev"]',t).hide().prop("wizard_field_disabled",!0),$('select#vlan,label[for="vlan"]',t).show().prop("wizard_field_disabled",!1),$('input#vlan_id,label[for="vlan_id"]',t).hide().prop("wizard_field_disabled",!0),$('input#ip_spoofing,label[for="ip_spoofing"]',t).show().prop("wizard_field_disabled",!1),$('input#mac_spoofing,label[for="mac_spoofing"]',t).show().prop("wizard_field_disabled",!1),$('input#mtu,label[for="mtu"]',t).hide().prop("wizard_field_disabled",!1),$("input#phydev",t).removeAttr("required"),$("input#bridge",t).attr("required","");break;case"openvswitch":$('input#bridge,label[for="bridge"]',t).show().prop("wizard_field_disabled",!1),$('input#phydev,label[for="phydev"]',t).hide().prop("wizard_field_disabled",!0),$('select#vlan,label[for="vlan"]',t).show().prop("wizard_field_disabled",!1),$('input#vlan_id,label[for="vlan_id"]',t).show().prop("wizard_field_disabled",!1),$('input#ip_spoofing,label[for="ip_spoofing"]',t).hide().prop("wizard_field_disabled",!0),$('input#mac_spoofing,label[for="mac_spoofing"]',t).show().prop("wizard_field_disabled",!1),$('input#mtu,label[for="mtu"]',t).hide().prop("wizard_field_disabled",!1),$("input#phydev",t).removeAttr("required"),$("input#bridge",t).attr("required","");break;case"vmware":$('input#bridge,label[for="bridge"]',t).show(),$('input#phydev,label[for="phydev"]',t).hide(),$('select#vlan,label[for="vlan"]',t).show(),$('input#vlan_id,label[for="vlan_id"]',t).show(),$('input#ip_spoofing,label[for="ip_spoofing"]',t).hide().prop("wizard_field_disabled",!0),$('input#mac_spoofing,label[for="mac_spoofing"]',t).hide().prop("wizard_field_disabled",!0),$('input#mtu,label[for="mtu"]',t).hide().prop("wizard_field_disabled",!1),$("input#phydev",t).removeAttr("required"),$("input#bridge",t).attr("required","")}$("div.network_mode_description").hide(),$('div.network_mode_description[value="'+$(this).val()+'"]').show()}),$("#network_mode",t).trigger("change"),this.securityGroupsTable.initialize(),f.setup($("#vnetCreateContextTab",t)),$("#vnet_wizard_ar_btn",t).trigger("click"),$(document).foundation("reflow","tab"),h.setup(),!1}function i(t,e){var a="ar"+t,n=new m;this.arTabObjects[t]=n;var s='<div id="'+a+'Tab" class="ar_tab content" ar_id="'+t+'">'+n.html(a)+"</div>",i=$("<dd><a id='ar_tab"+a+"' href='#"+a+"Tab'>"+p.tr("Address Range")+" <i class='fa fa-times-circle remove-tab'></i></a></dd>").appendTo($("dl#vnet_wizard_ar_tabs",e));$(s).appendTo($("#vnet_wizard_ar_tabs_content",e)),$("a",i).trigger("click");var r=$("#"+a+"Tab",e);n.setup(r,a),n.onShow()}function r(t){var e=this,a={};$.extend(a,v.retrieve($("#vnetCreateGeneralTab",t))),$.extend(a,v.retrieve($("#vnetCreateBridgeTab",t))),$.extend(a,v.retrieve($("#vnetCreateContextTab",t)));var n=this.securityGroupsTable.retrieveResourceTableSelect();return void 0!=n&&0!=n.length&&(a.SECURITY_GROUPS=n.join(",")),$.extend(a,f.retrieve($("#vnetCreateContextTab",t))),$(".ar_tab",t).each(function(){var t=$(this).attr("ar_id"),n=e.arTabObjects[t].retrieve();$.isEmptyObject(n)||(a.AR||(a.AR=[]),a.AR.push(n))}),"create"==this.action?(a={vnet:a},u.runAction("Network.create",a),!1):"update"==this.action?(u.runAction("Network.update",this.resourceId,b.templateToString(a)),!1):void 0}function o(t){if("create"==this.action){var e=$("textarea#template",t).val(),a={vnet:{vnet_raw:e}};
return u.runAction("Network.create",a),!1}if("update"==this.action){var n=$("textarea#template",t).val();return u.runAction("Network.update",this.resourceId,n),!1}}function l(t){var e=this;this.securityGroupsTable.refreshResourceTableSelect(),$(".ar_tab",t).each(function(){var t=$(this).attr("ar_id");e.arTabObjects[t].onShow()})}function c(t,e){if("update"==this.action){if(this.resourceId=e.ID,$("#default_sg_warning").hide(),$("#template",t).val(b.templateToString(e.TEMPLATE).replace(/^[\r\n]+$/g,"")),$('[wizard_field="NAME"]',t).val(b.escapeDoubleQuotes(b.htmlDecode(e.NAME))).prop("disabled",!0).prop("wizard_field_disabled",!0),v.fill($("#vnetCreateGeneralTab",t),e.TEMPLATE),v.fill($("#vnetCreateBridgeTab",t),e.TEMPLATE),v.fill($("#vnetCreateContextTab",t),e.TEMPLATE),$('input#bridge,label[for="bridge"]',t).show().prop("wizard_field_disabled",!1).removeAttr("required"),$('input#phydev,label[for="phydev"]',t).show().prop("wizard_field_disabled",!1).removeAttr("required"),$('select#vlan,label[for="vlan"]',t).show().prop("wizard_field_disabled",!1).removeAttr("required"),$('input#vlan_id,label[for="vlan_id"]',t).show().prop("wizard_field_disabled",!1).removeAttr("required"),$('input#ip_spoofing,label[for="ip_spoofing"]',t).show().prop("wizard_field_disabled",!1),$('input#mac_spoofing,label[for="mac_spoofing"]',t).show().prop("wizard_field_disabled",!1),void 0!=e.TEMPLATE.SECURITY_GROUPS&&0!=e.TEMPLATE.SECURITY_GROUPS.length){var a=e.TEMPLATE.SECURITY_GROUPS.split(",");this.securityGroupsTable.selectResourceTableSelect({ids:a})}else this.securityGroupsTable.refreshResourceTableSelect();delete e.TEMPLATE.SECURITY_GROUPS;var n=$("[wizard_field]",t);n.each(function(){var t=$(this),a=t.attr("wizard_field");delete e.TEMPLATE[a]}),f.fill($("#vnetCreateContextTab",t),e.TEMPLATE),$("#vnetCreateARTab i.remove-tab",t).trigger("click"),$("#vnetCreateARTab #vnetCreateARTabUpdate",t).show(),$("#vnetCreateARTab #vnetCreateARTabCreate",t).hide()}}t("foundation.tab");var d=t("utils/form-panels/form-panel"),u=t("sunstone"),p=t("utils/locale"),h=t("utils/tips"),f=t("utils/custom-tags-table"),m=t("tabs/vnets-tab/utils/ar-tab"),_=t("tabs/secgroups-tab/datatable"),b=t("utils/template-utils"),v=t("utils/wizard-fields"),g=t("hbs!./create/wizard"),y=t("hbs!./create/advanced"),w=t("./create/formPanelId"),T=t("../tabId");return e.FORM_PANEL_ID=w,e.prototype=Object.create(d.prototype),e.prototype.constructor=e,e.prototype.htmlWizard=a,e.prototype.htmlAdvanced=n,e.prototype.submitWizard=r,e.prototype.submitAdvanced=o,e.prototype.onShow=l,e.prototype.fill=c,e.prototype.setup=s,e.prototype.addARTab=i,e}),define("tabs/vnets-tab",["require","utils/locale","./vnets-tab/buttons","./vnets-tab/actions","./vnets-tab/datatable","./vnets-tab/tabId","./vnets-tab/dialogs/add-ar","./vnets-tab/dialogs/update-ar","./vnets-tab/dialogs/reserve","./vnets-tab/panels/info","./vnets-tab/panels/ar","./vnets-tab/panels/leases","./vnets-tab/panels/secgroups","./vnets-tab/form-panels/create"],function(t){var e=t("utils/locale"),a=t("./vnets-tab/buttons"),n=t("./vnets-tab/actions"),s=t("./vnets-tab/datatable"),i=t("./vnets-tab/tabId"),r="dataTableVNets",o=[t("./vnets-tab/dialogs/add-ar"),t("./vnets-tab/dialogs/update-ar"),t("./vnets-tab/dialogs/reserve")],l=[t("./vnets-tab/panels/info"),t("./vnets-tab/panels/ar"),t("./vnets-tab/panels/leases"),t("./vnets-tab/panels/secgroups")],c=[t("./vnets-tab/form-panels/create")],d={tabId:i,title:e.tr("Virtual Networks"),tabClass:"subTab",parentTab:"infra-tab",listHeader:'<i class="fa fa-fw fa-globe"></i>&emsp;'+e.tr("Virtual Networks"),infoHeader:'<i class="fa fa-fw fa-globe"></i>&emsp;'+e.tr("Virtual Network"),subheader:'<span class="total_vnets"/> <small>'+e.tr("TOTAL")+'</small>&emsp;        <span class="addresses_vnets"/> <small>'+e.tr("USED IPs")+"</small>",resource:"Network",buttons:a,actions:n,dataTable:new s(r,{actions:!0,info:!0}),panels:l,formPanels:c,dialogs:o};return d}),define("tabs/secgroups-tab/buttons",["require","utils/locale"],function(t){var e=t("utils/locale"),a={"SecurityGroup.refresh":{type:"action",layout:"refresh",alwaysActive:!0},"SecurityGroup.create_dialog":{type:"create_dialog",layout:"create"},"SecurityGroup.update_dialog":{type:"action",layout:"main",text:e.tr("Update")},"SecurityGroup.chown":{type:"confirm_with_select",text:e.tr("Change owner"),layout:"user_select",select:"User",tip:e.tr("Select the new owner")+":"},"SecurityGroup.chgrp":{type:"confirm_with_select",text:e.tr("Change group"),layout:"user_select",select:"Group",tip:e.tr("Select the new group")+":"},"SecurityGroup.clone_dialog":{type:"action",layout:"main",text:e.tr("Clone")},"SecurityGroup.delete":{type:"confirm",layout:"del",text:e.tr("Delete")}};return a}),define("tabs/secgroups-tab/form-panels/create/formPanelId",["require"],function(){return"createSecurityGroupForm"}),define("tabs/secgroups-tab/dialogs/clone/dialogId",["require"],function(){return"cloneSecurityGroupDialog"}),define("tabs/secgroups-tab/actions",["require","sunstone","utils/notifier","utils/locale","./datatable","opennebula/securitygroup","./tabId","./form-panels/create/formPanelId","./dialogs/clone/dialogId"],function(t){var e=t("sunstone"),a=t("utils/notifier"),n=t("utils/locale"),s=(t("./datatable"),t("opennebula/securitygroup")),i="SecurityGroup",r="SECURITY_GROUP",o=t("./tabId"),l=t("./form-panels/create/formPanelId"),c=t("./dialogs/clone/dialogId"),d={"SecurityGroup.create":{type:"create",call:s.create,callback:function(t,a){e.resetFormPanel(o,l),e.hideFormPanel(o),e.getDataTable(o).addElement(t,a)},error:function(t,n){e.hideFormPanelLoading(o),a.onError(t,n)},notify:!0},"SecurityGroup.create_dialog":{type:"custom",call:function(){e.showFormPanel(o,l,"create")}},"SecurityGroup.list":{type:"list",call:s.list,callback:function(t,a){e.getDataTable(o).updateView(t,a)},error:a.onError},"SecurityGroup.show":{type:"single",call:s.show,callback:function(t,a){e.getDataTable(o).updateElement(t,a),e.rightInfoVisible($("#"+o))&&e.insertPanels(o,a)},error:a.onError},"SecurityGroup.refresh":{type:"custom",call:function(){var t=$("#"+o);e.rightInfoVisible(t)?e.runAction(i+".show",e.rightInfoResourceId(t)):(e.getDataTable(o).waitingNodes(),e.runAction(i+".list",{force:!0}))},error:a.onError},"SecurityGroup.delete":{type:"multiple",call:s.del,callback:function(t,a){e.getDataTable(o).deleteElement(t,a)},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"SecurityGroup.update_dialog":{type:"custom",call:function(){var t=e.getDataTable(o).elements();if(1!=t.length)return a.notifyMessage("Please select one (and just one) Security Group to update."),!1;var n=""+t[0];e.runAction(i+".show_to_update",n)}},"SecurityGroup.show_to_update":{type:"single",call:s.show,callback:function(t,a){e.showFormPanel(o,l,"update",function(t,e){t.fill(e,a[r])})},error:a.onError},"SecurityGroup.update":{type:"single",call:s.update,callback:function(){e.hideFormPanel(o),a.notifyMessage(n.tr("Security Group updated correctly"))},error:function(t,n){e.hideFormPanelLoading(o),a.onError(t,n)}},"SecurityGroup.update_template":{type:"single",call:s.update,callback:function(t){e.runAction("SecurityGroup.show",t.request.data[0][0])},error:a.onError},"SecurityGroup.chown":{type:"multiple",call:s.chown,callback:function(t){e.runAction(i+".show",t.request.data[0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"SecurityGroup.chgrp":{type:"multiple",call:s.chgrp,callback:function(t){e.runAction(i+".show",t.request.data[0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"SecurityGroup.chmod":{type:"single",call:s.chmod,callback:function(t){e.runAction(i+".show",t.request.data[0])},elements:function(){return e.getDataTable(o).elements()},error:a.onError,notify:!0},"SecurityGroup.clone_dialog":{type:"custom",call:function(){e.getDialog(c).show()}},"SecurityGroup.clone":{type:"single",call:s.clone,callback:function(){e.getDialog(c).hide(),e.getDialog(c).reset(),e.runAction("SecurityGroup.refresh")},error:a.onError,notify:!0},"SecurityGroup.rename":{type:"single",call:s.rename,callback:function(t){e.runAction("SecurityGroup.show",t.request.data[0][0])},error:a.onError,notify:!0}};return d}),define("hbs!tabs/secgroups-tab/dialogs/clone/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<div id="'+o((s=null!=(s=e.dialogId||(null!=t?t.dialogId:t))?s:r,typeof s===i?s.call(t,{name:"dialogId",hash:{},data:n}):s))+'" class="reveal-modal" role="dialog" data-reveal >\n  <div class="row">\n    <h3 class="subheader">'+o((e.tr||t&&t.tr||r).call(t,"Clone Security Group",{name:"tr",hash:{},data:n}))+'</h3>\n  </div>\n  <form data-abide="ajax" id="'+o((s=null!=(s=e.dialogId||(null!=t?t.dialogId:t))?s:r,typeof s===i?s.call(t,{name:"dialogId",hash:{},data:n}):s))+'Form">\n    <div class="row">\n      <div class="large-12 columns">\n        <div class="clone_one"></div>\n        <div class="clone_several">\n          '+o((e.tr||t&&t.tr||r).call(t,"Several security groups are selected, please choose a prefix to name the new copies",{name:"tr",hash:{},data:n}))+'\n          <br>\n        </div>\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-12 columns">\n        <label class="clone_one">'+o((e.tr||t&&t.tr||r).call(t,"Name",{name:"tr",hash:{},data:n}))+'</label>\n        <label class="clone_several">'+o((e.tr||t&&t.tr||r).call(t,"Prefix",{name:"tr",hash:{},data:n}))+'</label>\n        <input required type="text" name="name"></input>\n      </div>\n    </div>\n    <div class="form_buttons row">\n      <button type="submit" class="button radius right">\n        '+o((e.tr||t&&t.tr||r).call(t,"Clone",{name:"tr",hash:{},data:n}))+'\n      </button>\n    </div>\n    <a class="close-reveal-modal">&#215;</a>\n  </form>\n</div>'},useData:!0});return e.registerPartial("tabs/secgroups-tab/dialogs/clone/html",a),a}),define("tabs/secgroups-tab/dialogs/clone",["require","utils/dialogs/dialog","hbs!./clone/html","sunstone","utils/notifier","utils/locale","opennebula/securitygroup","./clone/dialogId","../tabId"],function(t){function e(){this.dialogId=u,i.call(this)}function a(){return r({dialogId:this.dialogId})}function n(t){return t.off("invalid.fndtn.abide","#"+u+"Form"),t.off("valid.fndtn.abide","#"+u+"Form"),t.on("invalid.fndtn.abide","#"+u+"Form",function(t){"abide.fndtn"==t.namespace&&l.notifyError(c.tr("One or more required fields are missing or malformed."))}).on("valid.fndtn.abide","#"+u+"Form",function(t){if("abide.fndtn"==t.namespace){var e=$("input",this).val(),a=o.getDataTable(p).elements();if(a.length>1)for(var n=0;n<a.length;n++)o.runAction("SecurityGroup.clone",a[n],e+d.getName(a[n]));else o.runAction("SecurityGroup.clone",a[0],e);return!1}}),t.foundation("reflow","abide"),!1}function s(t){var e=o.getDataTable(p).elements();return e.length>1?($(".clone_one",t).hide(),$(".clone_several",t).show(),$("input",t).val("Copy of ")):($(".clone_one",t).show(),$(".clone_several",t).hide(),$("input",t).val("Copy of "+d.getName(e[0]))),$("input[name='name']",t).focus(),!1}var i=t("utils/dialogs/dialog"),r=t("hbs!./clone/html"),o=t("sunstone"),l=t("utils/notifier"),c=t("utils/locale"),d=t("opennebula/securitygroup"),u=t("./clone/dialogId"),p=t("../tabId");return e.DIALOG_ID=u,e.prototype=Object.create(i.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=s,e.prototype.setup=n,e}),define("hbs!tabs/secgroups-tab/panels/info/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({1:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return"          <tr>\n            <td>"+o((s=null!=(s=e.PROTOCOL||(null!=t?t.PROTOCOL:t))?s:r,typeof s===i?s.call(t,{name:"PROTOCOL",hash:{},data:n}):s))+"</td>\n            <td>"+o((s=null!=(s=e.RULE_TYPE||(null!=t?t.RULE_TYPE:t))?s:r,typeof s===i?s.call(t,{name:"RULE_TYPE",hash:{},data:n}):s))+"</td>\n            <td>"+o((s=null!=(s=e.RANGE||(null!=t?t.RANGE:t))?s:r,typeof s===i?s.call(t,{name:"RANGE",hash:{},data:n}):s))+"</td>\n            <td>"+o((s=null!=(s=e.NETWORK||(null!=t?t.NETWORK:t))?s:r,typeof s===i?s.call(t,{name:"NETWORK",hash:{},data:n}):s))+"</td>\n            <td>"+o((s=null!=(s=e.ICMP_TYPE||(null!=t?t.ICMP_TYPE:t))?s:r,typeof s===i?s.call(t,{name:"ICMP_TYPE",hash:{},data:n}):s))+"</td>\n          </tr>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,c="function",d='<div class="row">\n  <div class="large-6 columns">\n    <table id="info_security_group_table" class="dataTable extended_table">\n      <thead>\n         <tr>\n          <th colspan="3">'+o((e.tr||t&&t.tr||r).call(t,"Information",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"ID",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td" colspan="2">'+o(l(null!=(s=null!=t?t.element:t)?s.ID:s,t))+"</td>\n        </tr>\n        ";return i=null!=(i=e.renameTrHTML||(null!=t?t.renameTrHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"renameTrHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+='\n      </tbody>\n    </table>\n  </div>\n  <div class="large-6 columns">\n    ',i=null!=(i=e.permissionsTableHTML||(null!=t?t.permissionsTableHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"permissionsTableHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+='\n  </div>\n</div>\n<div class="row">\n  <div class="large-9 columns">\n    <table class="dataTable extended_table">\n      <thead>\n        <tr>\n          <th>'+o((e.tr||t&&t.tr||r).call(t,"Rules",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n    </table>\n    <table class="policies_table dataTable">\n      <thead>\n        <tr>\n          <th>'+o((e.tr||t&&t.tr||r).call(t,"Protocol",{name:"tr",hash:{},data:n}))+"</th>\n          <th>"+o((e.tr||t&&t.tr||r).call(t,"Type",{name:"tr",hash:{},data:n}))+"</th>\n          <th>"+o((e.tr||t&&t.tr||r).call(t,"Port Range",{name:"tr",hash:{},data:n}))+"</th>\n          <th>"+o((e.tr||t&&t.tr||r).call(t,"Network",{name:"tr",hash:{},data:n}))+"</th>\n          <th>"+o((e.tr||t&&t.tr||r).call(t,"ICMP Type",{name:"tr",hash:{},data:n}))+"</th>\n        </tr>\n      </thead>\n      <tbody>\n",s=e.each.call(t,null!=t?t.ruleList:t,{name:"each",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(d+=s),d+='      </tbody>\n    </table>\n  </div>\n</div>\n<div class="row">\n  <div class="large-9 columns">\n    ',i=null!=(i=e.templateTableHTML||(null!=t?t.templateTableHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"templateTableHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+"\n  </div>\n</div>"},useData:!0});return e.registerPartial("tabs/secgroups-tab/panels/info/html",a),a}),define("tabs/secgroups-tab/panels/info/panelId",["require"],function(){return"security_group_info_tab"}),define("tabs/secgroups-tab/panels/info",["require","hbs!./info/html","utils/locale","utils/panel/permissions-table","utils/panel/rename-tr","opennebula/securitygroup","../utils/common","utils/panel/template-table","../tabId","./info/panelId"],function(t){function e(t){return this.title=i.tr("Info"),this.icon="fa-info-circle",this.element=t[h],this}function a(){var t=o.html(p,this.element.NAME),e=r.html(d,p,this.element),a=l.getRules(this.element),n=[];$.each(a,function(){n.push(l.sgRuleToSt(this))});var u=$.extend({},this.element.TEMPLATE);delete u.RULE;var h=c.html(u,p,i.tr("Attributes"));return s({element:this.element,renameTrHTML:t,permissionsTableHTML:e,ruleList:n,templateTableHTML:h})}function n(t){o.setup(p,this.element.ID,t),r.setup(d,p,this.element,t);var e=$.extend({},this.element.TEMPLATE);delete e.RULE;var a={RULE:this.element.TEMPLATE.RULE};return c.setup(e,p,this.element.ID,t,a),!1}var s=t("hbs!./info/html"),i=t("utils/locale"),r=t("utils/panel/permissions-table"),o=t("utils/panel/rename-tr"),l=(t("opennebula/securitygroup"),t("../utils/common")),c=t("utils/panel/template-table"),d=t("../tabId"),u=t("./info/panelId"),p="SecurityGroup",h="SECURITY_GROUP";return e.PANEL_ID=u,e.prototype.html=a,e.prototype.setup=n,e}),define("hbs!tabs/secgroups-tab/form-panels/create/wizard",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<div id="create_security_group_form_wrapper">\n  <form data-abide="ajax" id="'+l((i=null!=(i=e.formPanelId||(null!=t?t.formPanelId:t))?i:o,typeof i===r?i.call(t,{name:"formPanelId",hash:{},data:n}):i))+'Wizard" class="custom creation">\n    <div class="row">\n      <div class="medium-4 columns">\n        <label for="security_group_name">'+l((e.tr||t&&t.tr||o).call(t,"Security Group Name",{name:"tr",hash:{},data:n}))+':</label>\n        <input required type="text" name="security_group_name" id="security_group_name"/>\n      </div>\n      <div class="medium-8 columns">\n        <label for="security_group_description">'+l((e.tr||t&&t.tr||o).call(t,"Description",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Description for the Security Group",{name:"tr",hash:{},data:n}))+'</span>\n        </label>\n        <textarea type="text" id="security_group_description" name="security_group_description" style="height: 70px;"/>\n      </div>\n    </div>\n    <hr/>\n  </form>\n  <form data-abide="ajax" id="rules_form_wizard" action="">\n    <div class="row collapse" id="new_rule_wizard">\n      <div class="row">\n        <div class="medium-4 columns">\n          <label>'+l((e.tr||t&&t.tr||o).call(t,"Type",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Defines the direction of the rule.",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <select class="security_group_rule_type">\n            <option value="inbound" selected="selected">'+l((e.tr||t&&t.tr||o).call(t,"Inbound",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="outbound">'+l((e.tr||t&&t.tr||o).call(t,"Outbound",{name:"tr",hash:{},data:n}))+'</option>\n          </select>\n        </div>\n        <div class="medium-4 columns">\n          <label>'+l((e.tr||t&&t.tr||o).call(t,"Protocol",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Defines the protocol of the rule.",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <select class="security_group_rule_protocol">\n            <option value="TCP" selected="selected">'+l((e.tr||t&&t.tr||o).call(t,"TCP",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="UDP">'+l((e.tr||t&&t.tr||o).call(t,"UDP",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="ICMP">'+l((e.tr||t&&t.tr||o).call(t,"ICMP",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="IPSEC">'+l((e.tr||t&&t.tr||o).call(t,"IPsec",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="ALL">'+l((e.tr||t&&t.tr||o).call(t,"All",{name:"tr",hash:{},data:n}))+'</option>\n          </select>\n        </div>\n        <div class="medium-4 columns icmp_type_wrapper">\n          <label>'+l((e.tr||t&&t.tr||o).call(t,"ICMP Type",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Specific ICMP type of the rule. If a type has multiple codes, it includes all the codes within.",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <select class="security_group_rule_icmp_type">\n            <option value="" selected="selected">'+l((e.tr||t&&t.tr||o).call(t,"All",{name:"tr",hash:{},data:n}))+'</option>\n            <option value = "0">0/0: Echo Reply (pong)</option>\n            <option value = "3">3: Destination Unreachable</option>\n            <option value = "4">4/0: Source Quench</option>\n            <option value = "5">5: Redirect</option>\n            <option value = "8">8/0: Echo Request (ping)</option>\n            <option value = "9">9/0: Router Advertisement</option>\n            <option value = "10">10/0: Router Solicitation</option>\n            <option value = "11">11: Time Exceeded</option>\n            <option value = "12">12: Parameter Problem</option>\n            <option value = "13">13/0: Timestamp Request</option>\n            <option value = "14">14/0: Timestamp Reply</option>\n            <option value = "17">17/0: Address Mask Request</option>\n            <option value = "18">18/0: Address Mask Reply</option>\n          </select>\n        </div>\n      </div>\n      <div class="row range_row">\n        <div class="medium-4 columns">\n          <label>'+l((e.tr||t&&t.tr||o).call(t,"Port range",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Selects whether to apply this TCP or UDP rule to all the ports or just a specific set.",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <select class="security_group_rule_range_sel">\n            <option value="ALL" selected="selected">'+l((e.tr||t&&t.tr||o).call(t,"All",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="RANGE">'+l((e.tr||t&&t.tr||o).call(t,"Port range",{name:"tr",hash:{},data:n}))+'</option>\n          </select>\n        </div>\n        <div class="medium-4 columns end security_group_rule_range">\n          <label>'+l((e.tr||t&&t.tr||o).call(t,"Iptables range",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"A Port Range to filter specific ports. Uses the iptables port syntax: port[,port|,port:port]...",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <input type="text" placeholder="22,53,80:90,110,1024:65535"/>\n        </div>\n      </div>\n      <div class="row">\n        <div class="medium-4 columns">\n          <label>'+l((e.tr||t&&t.tr||o).call(t,"Network",{name:"tr",hash:{},data:n}))+'\n            <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Any: apply this rule to any connection regardless of its source or destination. Network: Apply this rule only to a custom defined network range. Virtual Network: Apply this rule only to connections with origin or destination in one of the already defined VNETs.",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <select class="security_group_rule_network_sel">\n            <option value="ANY" selected="selected">'+l((e.tr||t&&t.tr||o).call(t,"Any",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="NETWORK">'+l((e.tr||t&&t.tr||o).call(t,"Network",{name:"tr",hash:{},data:n}))+'</option>\n            <option value="VNET">'+l((e.tr||t&&t.tr||o).call(t,"Virtual Network",{name:"tr",hash:{},data:n}))+'</option>\n          </select>\n        </div>\n        <div class="medium-4 columns security_group_rule_network">\n          <label for="security_group_rule_first_ip">'+l((e.tr||t&&t.tr||o).call(t,"IP Start",{name:"tr",hash:{},data:n}))+':\n            <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"First IP address",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <input id="security_group_rule_first_ip" type="text" placeholder="192.168.10.1"/>\n        </div>\n        <div class="medium-4 columns security_group_rule_network">\n          <label for="security_group_rule_size">'+l((e.tr||t&&t.tr||o).call(t,"Size",{name:"tr",hash:{},data:n}))+':\n            <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Number of addresses in the range",{name:"tr",hash:{},data:n}))+'</span>\n          </label>\n          <input id="security_group_rule_size" type="text" placeholder="254"/>\n        </div>\n      </div>\n      <div class="row">\n        <div class="small-12 columns vnet_select">\n          ';return i=null!=(i=e.vnetsTableHTML||(null!=t?t.vnetsTableHTML:t))?i:o,s=typeof i===r?i.call(t,{name:"vnetsTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+'\n          <br/>\n        </div>\n      </div>\n    </div>\n    <div class="row">\n      <div class="medium-8 small-centered columns">\n        <button type="submit" class="add_security_group_rule button small small-12 radius">\n          <i class="fa fa-angle-double-down"></i> '+l((e.tr||t&&t.tr||o).call(t,"Add Rule",{name:"tr",hash:{},data:n}))+'\n        </button>\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-12 columns">\n        <table class="security_group_rules policies_table dataTable">\n          <thead>\n            <tr>\n              <th>'+l((e.tr||t&&t.tr||o).call(t,"Protocol",{name:"tr",hash:{},data:n}))+"</th>\n              <th>"+l((e.tr||t&&t.tr||o).call(t,"Type",{name:"tr",hash:{},data:n}))+"</th>\n              <th>"+l((e.tr||t&&t.tr||o).call(t,"Port Range",{name:"tr",hash:{},data:n}))+"</th>\n              <th>"+l((e.tr||t&&t.tr||o).call(t,"Network",{name:"tr",hash:{},data:n}))+"</th>\n              <th>"+l((e.tr||t&&t.tr||o).call(t,"ICMP Type",{name:"tr",hash:{},data:n}))+'</th>\n              <th style="width:3%"></th>\n            </tr>\n          </thead>\n          <tbody>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </form>\n</div>'},useData:!0});return e.registerPartial("tabs/secgroups-tab/form-panels/create/wizard",a),a}),define("hbs!tabs/secgroups-tab/form-panels/create/advanced",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<form data-abide="ajax" id="'+o((s=null!=(s=e.formPanelId||(null!=t?t.formPanelId:t))?s:r,typeof s===i?s.call(t,{name:"formPanelId",hash:{},data:n}):s))+'Advanced" class="custom creation">\n  <div class="row">\n    <div class="large-12 columns">\n      <p>'+o((e.tr||t&&t.tr||r).call(t,"Write the Security Group template here",{name:"tr",hash:{},data:n}))+'</p>\n    </div>\n  </div>\n  <div class="row">\n    <div class="large-12 columns">\n      <textarea id="template" rows="15" required></textarea>\n    </div>\n  </div>\n</form>'},useData:!0});return e.registerPartial("tabs/secgroups-tab/form-panels/create/advanced",a),a}),define("tabs/secgroups-tab/form-panels/create",["require","foundation.tab","utils/form-panels/form-panel","sunstone","utils/locale","utils/tips","utils/template-utils","utils/wizard-fields","tabs/vnets-tab/datatable","../utils/common","hbs!./create/wizard","hbs!./create/advanced","./create/formPanelId","../tabId"],function(t){function e(){this.formPanelId=v,this.tabId=g,this.actions={create:{title:u.tr("Create Security Group"),buttonText:u.tr("Create"),resetButton:!0},update:{title:u.tr("Update Security Group"),buttonText:u.tr("Update"),resetButton:!1}},c.call(this)}function a(){var t={info:!1,select:!0};return this.vnetsTable=new f("new_sg_rule",t),_({formPanelId:this.formPanelId,vnetsTableHTML:this.vnetsTable.dataTableHTML})}function n(){return b({formPanelId:this.formPanelId})}function s(t){var e=this;return t.off("change",".security_group_rule_protocol"),t.on("change",".security_group_rule_protocol",function(){switch($(".range_row",t).hide(),$(".range_row input",t).removeAttr("required"),$(".icmp_type_wrapper",t).hide(),$(this).val()){case"TCP":case"UDP":$(".range_row",t).show(),$(".range_row select",t).trigger("change");break;case"ICMP":$(".icmp_type_wrapper",t).show();break;case"IPSEC":case"ALL":}}),t.off("change",".security_group_rule_network_sel"),t.on("change",".security_group_rule_network_sel",function(){switch($(".security_group_rule_network",t).hide(),$("div.security_group_rule_network input",t).removeAttr("required"),e.vnetsTable.idInput().removeAttr("required"),$(".vnet_select",t).hide(),$(this).val()){case"ANY":break;case"NETWORK":$(".security_group_rule_network",t).show(),$("div.security_group_rule_network input",t).attr("required","");break;case"VNET":$(".vnet_select",t).show(),e.vnetsTable.idInput().attr("required",""),e.vnetsTable.refreshResourceTableSelect()}}),t.off("change",".security_group_rule_range_sel"),t.on("change",".security_group_rule_range_sel",function(){switch($(this).val()){case"ALL":$(".security_group_rule_range",t).hide(),$(".security_group_rule_range input",t).removeAttr("required");break;case"RANGE":$(".security_group_rule_range",t).show(),$(".security_group_rule_range input",t).attr("required","")}}),$("#rules_form_wizard",t).off("invalid"),$("#rules_form_wizard",t).off("valid"),$("#rules_form_wizard",t).on("invalid",function(){}).on("valid",function(){var a={};switch(a.PROTOCOL=$(".security_group_rule_protocol",t).val(),a.RULE_TYPE=$(".security_group_rule_type",t).val(),$(".security_group_rule_range_sel",t).val()){case"ALL":break;case"RANGE":a.RANGE=$(".security_group_rule_range input",t).val()}switch($(".security_group_rule_network_sel",t).val()){case"ANY":break;case"NETWORK":a.IP=$("#security_group_rule_first_ip",t).val(),a.SIZE=$("#security_group_rule_size",t).val();break;case"VNET":a.NETWORK_ID=e.vnetsTable.retrieveResourceTableSelect()}if("ICMP"==a.PROTOCOL){var n=$(".security_group_rule_icmp_type",t).val();""!=n&&(a.ICMP_TYPE=n)}var s=m.sgRuleToSt(a);$(".security_group_rules tbody",t).append("<tr>            <td>"+s.PROTOCOL+"</td>            <td>"+s.RULE_TYPE+"</td>            <td>"+s.RANGE+"</td>            <td>"+s.NETWORK+"</td>            <td>"+s.ICMP_TYPE+'</td>            <td>              <a href="#"><i class="fa fa-times-circle remove-tab"></i></a>            </td>          </tr>'),$(".security_group_rules tbody",t).children("tr").last().data("rule",a),$("#new_rule_wizard select option",t).prop("selected",function(){return this.defaultSelected}),$("#new_rule_wizard select",t).trigger("change"),$("#new_rule_wizard input",t).val(""),e.vnetsTable.resetResourceTableSelect()}),t.off("click",".security_group_rules i.remove-tab"),t.on("click",".security_group_rules i.remove-tab",function(){var t=$(this).closest("tr");t.remove()}),t.foundation(),this.vnetsTable.initialize(),p.setup(),$("#new_rule_wizard select",t).trigger("change"),!1}function i(t){var e=$("#security_group_name",t).val(),a=$("#security_group_description",t).val(),n=[];$(".security_group_rules tbody tr").each(function(){n.push($(this).data("rule"))});var s={NAME:e,DESCRIPTION:a,RULE:n};return"create"==this.action?(s={security_group:s},d.runAction("SecurityGroup.create",s),!1):"update"==this.action?(delete s.NAME,d.runAction("SecurityGroup.update",this.resourceId,h.templateToString(s)),!1):void 0}function r(t){if("create"==this.action){var e=$("textarea#template",t).val(),a={security_group:{security_group_raw:e}};return d.runAction("SecurityGroup.create",a),!1}if("update"==this.action){var n=$("textarea#template",t).val();return d.runAction("SecurityGroup.update",this.resourceId,n),!1}}function o(){this.vnetsTable.refreshResourceTableSelect()}function l(t,e){this.resourceId=e.ID,$("#template",t).val(h.templateToString(e.TEMPLATE).replace(/^[\r\n]+$/g,"")),$("#security_group_name",t).val(h.escapeDoubleQuotes(h.htmlDecode(e.NAME))).prop("disabled",!0),$("#security_group_description",t).val(h.escapeDoubleQuotes(h.htmlDecode(e.TEMPLATE.DESCRIPTION)));var a=e.TEMPLATE.RULE;a?a.constructor!=Array&&(a=[a]):a=[],$.each(a,function(){var e=m.sgRuleToSt(this);$(".security_group_rules tbody",t).append("<tr>        <td>"+e.PROTOCOL+"</td>        <td>"+e.RULE_TYPE+"</td>        <td>"+e.RANGE+"</td>        <td>"+e.NETWORK+"</td>        <td>"+e.ICMP_TYPE+'</td>        <td>        <a href="#"><i class="fa fa-times-circle remove-tab"></i></a>        </td>        </tr>'),$(".security_group_rules tbody",t).children("tr").last().data("rule",this)})}t("foundation.tab");var c=t("utils/form-panels/form-panel"),d=t("sunstone"),u=t("utils/locale"),p=t("utils/tips"),h=t("utils/template-utils"),f=(t("utils/wizard-fields"),t("tabs/vnets-tab/datatable")),m=t("../utils/common"),_=t("hbs!./create/wizard"),b=t("hbs!./create/advanced"),v=t("./create/formPanelId"),g=t("../tabId");
return e.FORM_PANEL_ID=v,e.prototype=Object.create(c.prototype),e.prototype.constructor=e,e.prototype.htmlWizard=a,e.prototype.htmlAdvanced=n,e.prototype.submitWizard=i,e.prototype.submitAdvanced=r,e.prototype.onShow=o,e.prototype.fill=l,e.prototype.setup=s,e}),define("tabs/secgroups-tab",["require","utils/locale","./secgroups-tab/buttons","./secgroups-tab/actions","./secgroups-tab/datatable","./secgroups-tab/tabId","./secgroups-tab/dialogs/clone","./secgroups-tab/panels/info","./secgroups-tab/form-panels/create"],function(t){var e=t("utils/locale"),a=t("./secgroups-tab/buttons"),n=t("./secgroups-tab/actions"),s=t("./secgroups-tab/datatable"),i=t("./secgroups-tab/tabId"),r="dataTableSecurityGroups",o=[t("./secgroups-tab/dialogs/clone")],l=[t("./secgroups-tab/panels/info")],c=[t("./secgroups-tab/form-panels/create")],d={tabId:i,title:e.tr("Security Groups"),tabClass:"subTab",parentTab:"infra-tab",listHeader:'<i class="fa fa-fw fa-shield"></i>&emsp;'+e.tr("Security Groups"),infoHeader:'<i class="fa fa-fw fa-shield"></i>&emsp;'+e.tr("Security Group"),subheader:"<span/> <small></small>&emsp;",resource:"SecurityGroup",buttons:a,actions:n,dataTable:new s(r,{actions:!0,info:!0}),panels:l,formPanels:c,dialogs:o};return d}),define("tabs/zones-tab/buttons",["require","utils/locale"],function(t){var e=t("utils/locale"),a={"Zone.refresh":{type:"action",layout:"refresh",alwaysActive:!0},"Zone.create_dialog":{type:"create_dialog",layout:"create"},"Zone.delete":{type:"confirm",layout:"del",text:e.tr("Delete")}};return a}),define("tabs/zones-tab/tabId",["require"],function(){return"zones-tab"}),define("tabs/zones-tab/datatable",["require","utils/tab-datatable","sunstone-config","utils/locale","./tabId"],function(t){function e(t,e){this.conf=e||{},this.tabId=l,this.dataTableId=t,this.resource=r,this.xmlRoot=o,this.dataTableOptions={bAutoWidth:!1,bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:["check"]},{sWidth:"35px",aTargets:[0]},{bVisible:!0,aTargets:s.tabTableColumns(l)},{bVisible:!1,aTargets:["_all"]}]},this.columns=[i.tr("ID"),i.tr("Name"),i.tr("Endpoint")],this.selectOptions={id_index:1,name_index:2,select_resource:i.tr("Please select a Zone from the list"),you_selected:i.tr("You selected the following Zone:"),select_resource_multiple:i.tr("Please select one or more Zones from the list"),you_selected_multiple:i.tr("You selected the following Zones:")},n.call(this)}function a(t){var e=t.ZONE;return['<input class="check_item" type="checkbox" id="'+r.toLowerCase()+"_"+e.ID+'" name="selected_items" value="'+e.ID+'"/>',e.ID,e.NAME,e.TEMPLATE.ENDPOINT]}var n=t("utils/tab-datatable"),s=t("sunstone-config"),i=t("utils/locale"),r="Zone",o="ZONE",l=t("./tabId");return e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.elementArray=a,e}),define("tabs/zones-tab/dialogs/create/dialogId",["require"],function(){return"createZoneDialog"}),define("tabs/zones-tab/actions",["require","sunstone","utils/notifier","utils/locale","./datatable","opennebula/zone","./tabId","./dialogs/create/dialogId"],function(t){var e=t("sunstone"),a=t("utils/notifier"),n=t("utils/locale"),s=(t("./datatable"),t("opennebula/zone")),i=t("./tabId"),r=t("./dialogs/create/dialogId"),o={"Zone.create":{type:"create",call:s.create,callback:function(t,a){e.getDialog(r).hide(),e.getDialog(r).reset(),e.getDataTable(i).addElement(t,a)},error:a.onError,notify:!0},"Zone.create_dialog":{type:"custom",call:function(){e.getDialog(r).show()}},"Zone.list":{type:"list",call:s.list,callback:function(t,a){e.getDataTable(i).updateView(t,a)},error:a.onError},"Zone.show":{type:"single",call:s.show,callback:function(t,a){e.getDataTable(i).updateElement(t,a),e.rightInfoVisible($("#"+i))&&e.insertPanels(i,a)},error:a.onError},"Zone.show_to_update":{type:"single",call:s.show,error:a.onError},"Zone.refresh":{type:"custom",call:function(){var t=$("#"+i);e.rightInfoVisible(t)?e.runAction("Zone.show",e.rightInfoResourceId(t)):(e.getDataTable(i).waitingNodes(),e.runAction("Zone.list",{force:!0}))},error:a.onError},"Zone.delete":{type:"multiple",call:s.del,callback:function(t,a){e.getDataTable(i).deleteElement(t,a)},elements:function(){return e.getDataTable(i).elements()},error:a.onError,notify:!0},"Zone.update_template":{type:"single",call:s.update,callback:function(t){a.notifyMessage(n.tr("Zone updated correctly")),e.runAction("Zone.show",t.request.data[0][0])},error:a.onError},"Zone.fetch_template":{type:"single",call:s.fetch_template,callback:function(t,e){$("#template_update_dialog #template_update_textarea").val(e.template)},error:a.onError},"Zone.rename":{type:"single",call:s.rename,callback:function(t){a.notifyMessage(n.tr("Zone renamed correctly")),e.runAction("Zone.show",t.request.data[0][0])},error:a.onError,notify:!0}};return o}),define("hbs!tabs/zones-tab/dialogs/create/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<div id="'+o((s=null!=(s=e.dialogId||(null!=t?t.dialogId:t))?s:r,typeof s===i?s.call(t,{name:"dialogId",hash:{},data:n}):s))+'" class="row reveal-modal" role="dialog" data-reveal >\n  <div class="row">\n    <div class="large-12 columns">\n      <h3 id="create_zone_header" class="subheader">'+o((e.tr||t&&t.tr||r).call(t,"Create Zone",{name:"tr",hash:{},data:n}))+'</h3>\n    </div>\n  </div>\n  <form id="'+o((s=null!=(s=e.dialogId||(null!=t?t.dialogId:t))?s:r,typeof s===i?s.call(t,{name:"dialogId",hash:{},data:n}):s))+'Form" action="">\n    <div class="row">\n      <div class="large-12 columns">\n        <label for="zonename">'+o((e.tr||t&&t.tr||r).call(t,"Zone Name",{name:"tr",hash:{},data:n}))+':</label>\n        <input type="text" name="zonename" id="zonename" />\n      </div>\n    </div>\n    <div class="row centered">\n      <div class="large-12 columns">\n        <label for="endpoint">'+o((e.tr||t&&t.tr||r).call(t,"Endpoint",{name:"tr",hash:{},data:n}))+':</label>\n        <input type="text" name="endpoint" id="endpoint" />\n      </div>\n    </div>\n    <div class="form_buttons">\n      <button class="button radius right success" id="create_zone_submit" value="zone/create">'+o((e.tr||t&&t.tr||r).call(t,"Create",{name:"tr",hash:{},data:n}))+'</button>\n    </div>\n    <a class="close-reveal-modal">&#215;</a>\n  </form>\n</div>'},useData:!0});return e.registerPartial("tabs/zones-tab/dialogs/create/html",a),a}),define("tabs/zones-tab/dialogs/create",["require","utils/dialogs/dialog","hbs!./create/html","sunstone","./create/dialogId"],function(t){function e(){this.dialogId=c,r.call(this)}function a(){return o({dialogId:this.dialogId})}function n(t){return $("#"+c+"Form",t).submit(s),!1}function s(){var t=$("#zonename",this).val(),e=$("#endpoint",this).val(),a={zone:{name:t,endpoint:e}};return l.runAction("Zone.create",a),!1}function i(t){return $("#zonename",t).focus(),!1}var r=t("utils/dialogs/dialog"),o=t("hbs!./create/html"),l=t("sunstone"),c=t("./create/dialogId");return e.DIALOG_ID=c,e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=i,e.prototype.setup=n,e}),define("hbs!tabs/zones-tab/panels/info/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,c="function",d='<div class="row">\n  <div class="large-6 columns">\n    <table id="info_zone_table" class="dataTable extended_table">\n      <thead>\n        <tr>\n          <th colspan="3">'+o((e.tr||t&&t.tr||r).call(t,"Information",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"ID",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td" colspan="2">'+o(l(null!=(s=null!=t?t.element:t)?s.ID:s,t))+"</td>\n        </tr>\n        ";return i=null!=(i=e.renameTrHTML||(null!=t?t.renameTrHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"renameTrHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+='\n      </tbody>\n    </table>\n  </div>\n  <div class="large-6 columns"></div>\n</div>\n<div class="row">\n  <div class="large-9 columns">\n    ',i=null!=(i=e.templateTableHTML||(null!=t?t.templateTableHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"templateTableHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+"\n  </div>\n</div>"},useData:!0});return e.registerPartial("tabs/zones-tab/panels/info/html",a),a}),define("tabs/zones-tab/panels/info/panelId",["require"],function(){return"zone_info_tab"}),define("tabs/zones-tab/panels/info",["require","hbs!./info/html","utils/locale","utils/panel/rename-tr","utils/panel/template-table","./info/panelId"],function(t){function e(t){return this.title=i.tr("Info"),this.icon="fa-info-circle",this.element=t[c.toUpperCase()],this}function a(){var t=r.html(c,this.element.NAME),e=o.html(this.element.TEMPLATE,c,i.tr("Attributes"));return s({element:this.element,renameTrHTML:t,templateTableHTML:e})}function n(t){return r.setup(c,this.element.ID,t),o.setup(this.element.TEMPLATE,c,this.element.ID,t),!1}var s=t("hbs!./info/html"),i=t("utils/locale"),r=t("utils/panel/rename-tr"),o=t("utils/panel/template-table"),l=t("./info/panelId"),c="Zone";return e.PANEL_ID=l,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/zones-tab",["require","utils/locale","./zones-tab/buttons","./zones-tab/actions","./zones-tab/datatable","./zones-tab/tabId","./zones-tab/dialogs/create","./zones-tab/panels/info"],function(t){var e=t("utils/locale"),a=t("./zones-tab/buttons"),n=t("./zones-tab/actions"),s=t("./zones-tab/datatable"),i=t("./zones-tab/tabId"),r="dataTableZones",o=[t("./zones-tab/dialogs/create")],l=[t("./zones-tab/panels/info")],c={tabId:i,title:e.tr("Zones"),tabClass:"subTab",parentTab:"infra-tab",listHeader:'<i class="fa fa-fw fa-files-o"></i>&emsp;'+e.tr("Zones"),infoHeader:'<i class="fa fa-fw fa-files-o"></i>&emsp;'+e.tr("Zone"),subheader:"",resource:"Zone",buttons:a,actions:n,dataTable:new s(r,{actions:!0,info:!0}),panels:l,dialogs:o};return c}),define("tabs/marketplace-tab/buttons",["require","utils/locale"],function(t){var e=t("utils/locale"),a={"Marketplace.refresh":{type:"action",layout:"refresh",alwaysActive:!0},"Marketplace.import":{type:"action",layout:"main",text:e.tr("Import")}};return a}),define("tabs/marketplace-tab/tabId",["require"],function(){return"marketplace-tab"}),define("tabs/marketplace-tab/datatable",["require","utils/tab-datatable","sunstone-config","utils/locale","./tabId"],function(t){function e(t,e){this.conf=e||{},this.tabId=o,this.dataTableId=t,this.resource=r,this.dataTableOptions={bAutoWidth:!1,bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:["check"]},{sWidth:"35px",aTargets:[0]},{bVisible:!0,aTargets:s.tabTableColumns(o)},{bVisible:!1,aTargets:["_all"]}]},this.columns=[i.tr("ID"),i.tr("Name"),i.tr("Publisher"),i.tr("Hypervisor"),i.tr("Arch"),i.tr("Format"),i.tr("Tags")],n.call(this)}function a(t){var e="-",a="-",n="-",s="-",i="-";return void 0!=t.publisher&&(e=t.publisher),void 0!=t.files&&t.files.length>0&&(void 0!=t.files[0].hypervisor&&(a=t.files[0].hypervisor),void 0!=t.files[0]["os-arch"]&&(n=t.files[0]["os-arch"]),void 0!=t.files[0].format&&(s=t.files[0].format)),void 0!=t.tags&&(i=t.tags),['<input class="check_item" type="checkbox" id="'+r.toLowerCase()+"_"+t._id.$oid+'" name="selected_items" value="'+t._id.$oid+'"/>',t._id.$oid,t.name,e,a,n,s,i]}var n=t("utils/tab-datatable"),s=t("sunstone-config"),i=t("utils/locale"),r="Marketplace",o=t("./tabId");return e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.elementArray=a,e}),define("tabs/marketplace-tab/dialogs/import/dialogId",["require"],function(){return"importMarketplaceDialog"}),define("tabs/marketplace-tab/actions",["require","sunstone","utils/notifier","utils/locale","./datatable","opennebula/marketplace","./tabId","./dialogs/import/dialogId"],function(t){var e=t("sunstone"),a=t("utils/notifier"),n=t("utils/locale"),s=(t("./datatable"),t("opennebula/marketplace")),i="Marketplace",r=t("./tabId"),o=t("./dialogs/import/dialogId"),l={"Marketplace.list":{type:"list",call:s.list,callback:function(t,a){e.getDataTable(r).updateView(t,a.appliances)}},"Marketplace.refresh":{type:"custom",call:function(){var t=$("#"+r);e.rightInfoVisible(t)?e.runAction(i+".show",e.rightInfoResourceId(t)):(e.getDataTable(r).waitingNodes(),e.runAction(i+".list",{force:!0}))}},"Marketplace.import":{type:"multiple",call:s.show,callback:function(t,s){return s.status&&"ready"!=s.status?void a.notifyError(n.tr("The appliance is not ready")):(e.getDialog(o).setParams({element:s}),e.getDialog(o).reset(),void e.getDialog(o).show())},elements:function(){return e.getDataTable(r).elements()},error:a.onError},"Marketplace.show":{type:"single",call:s.show,callback:function(t,a){e.rightInfoVisible($("#"+r))&&e.insertPanels(r,a)},error:a.onError}};return l}),define("hbs!tabs/marketplace-tab/dialogs/import/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<div id="'+o((s=null!=(s=e.dialogId||(null!=t?t.dialogId:t))?s:r,typeof s===i?s.call(t,{name:"dialogId",hash:{},data:n}):s))+'" class="reveal-modal medium" role="dialog" data-reveal >\n  <div class="row">\n    <h3 class="subheader">'+o((e.tr||t&&t.tr||r).call(t,"Import Appliance",{name:"tr",hash:{},data:n}))+'</h3>\n  </div>\n  <form data-abide="ajax" id="'+o((s=null!=(s=e.dialogId||(null!=t?t.dialogId:t))?s:r,typeof s===i?s.call(t,{name:"dialogId",hash:{},data:n}):s))+'Form">\n    <div id="market_import_dialog_content">\n    </div>\n    <div class="form_buttons row">\n      <button type="submit" class="button radius right">\n        '+o((e.tr||t&&t.tr||r).call(t,"Import",{name:"tr",hash:{},data:n}))+'\n      </button>\n    </div>\n    <a class="close-reveal-modal">&#215;</a>\n  </form>\n</div>'},useData:!0});return e.registerPartial("tabs/marketplace-tab/dialogs/import/html",a),a}),define("hbs!tabs/marketplace-tab/dialogs/import/content",["hbs","hbs/handlebars","templates/helpers/tr","templates/helpers/humanizeSize"],function(t,e){var a=e.template({1:function(t,e,a,n){var s,i=this.lambda,r=this.escapeExpression,o=e.helperMissing,l='<div class="row" id="market_import_file_'+r(i(n&&n.index,t))+'">\n  <div class="large-10 large-centered columns">\n    <div class="large-10 columns">\n      <label>\n        <i class="fa fa-fw fa-download"/>\n        &emsp;'+r(i(n&&n.index,t))+" - "+r((e.tr||t&&t.tr||o).call(t,"Image Name",{name:"tr",hash:{},data:n}))+'\n        <span class="right">'+r((e.humanizeSize||t&&t.humanizeSize||o).call(t,"B",null!=t?t.size:t,{name:"humanizeSize",hash:{},data:n}))+"</span>\n      </label>\n";return s=e["if"].call(t,null!=t?t.name:t,{name:"if",hash:{},fn:this.program(2,n),inverse:this.program(4,n),data:n}),null!=s&&(l+=s),l+'    </div>\n    <div class="large-2 columns market_image_result">\n    </div>\n  </div>\n  <div class="large-10 columns market_image_response">\n  </div>\n</div>\n'},2:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'      <input type="text" class="name" value="'+o((s=null!=(s=e.name||(null!=t?t.name:t))?s:r,typeof s===i?s.call(t,{name:"name",hash:{},data:n}):s))+'"/>\n'},4:function(t){var e,a=this.lambda,n=this.escapeExpression;return'      <input type="text" class="name" value="'+n(a(null!=(e=null!=t?t.element:t)?e.name:e,t))+'"/>\n'},6:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o='<br>\n<div class="row">\n  <div class="large-12 columns">\n    <p style="font-size:14px">'+r((e.tr||t&&t.tr||i).call(t,"The following template will be created in OpenNebula and the previous images will be referenced in the disks",{name:"tr",hash:{},data:n}))+" "+r((e.tr||t&&t.tr||i).call(t,"If you want to edit parameters of the template you can do it later in the templates tab",{name:"tr",hash:{},data:n}))+' </p>\n  </div>\n</div>\n<div class="row" id="market_import_file_template">\n  <div class="large-10 large-centered columns">\n    <div class="large-10 columns">\n      <label>\n        <i class="fa fa-fw fa-file-text-o"/>&emsp;'+r((e.tr||t&&t.tr||i).call(t,"Template Name",{name:"tr",hash:{},data:n}))+"\n      </label>\n";return s=e["if"].call(t,null!=t?t.NAME:t,{name:"if",hash:{},fn:this.program(7,n),inverse:this.program(4,n),data:n}),null!=s&&(o+=s),o+'    </div>\n    <div class="large-2 columns market_template_result">\n    </div>\n  </div>\n  <div class="large-10 columns market_template_response">\n  </div>\n</div>\n'},7:function(){return'      <input type="text" class="name" value="NAME"/>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o='<div class="row">\n  <div class="large-12 columns">\n    <p style="font-size:14px">'+r((e.tr||t&&t.tr||i).call(t,"The following images will be created in OpenNebula.",{name:"tr",hash:{},data:n}))+" "+r((e.tr||t&&t.tr||i).call(t,"If you want to edit parameters of the image you can do it later in the images tab",{name:"tr",hash:{},data:n}))+' </p>\n  </div>\n</div>\n<div class="row">\n  <div class="large-10 large-centered columns">\n    <div class="large-10 columns">\n      <label for="market_img_datastore">'+r((e.tr||t&&t.tr||i).call(t,"Select the datastore for the images",{name:"tr",hash:{},data:n}))+'\n      </label>\n      <div id="market_img_datastore" name="market_img_datastore">\n      </div>\n    </div>\n    <div class="large-2 columns">\n    </div>\n  </div>\n</div>\n';return s=e.each.call(t,null!=(s=null!=t?t.element:t)?s.files:s,{name:"each",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(o+=s),s=e["if"].call(t,null!=(s=null!=t?t.element:t)?s.opennebula_template:s,{name:"if",hash:{},fn:this.program(6,n),inverse:this.noop,data:n}),null!=s&&(o+=s),o},useData:!0});return e.registerPartial("tabs/marketplace-tab/dialogs/import/content",a),a}),define("tabs/marketplace-tab/dialogs/import",["require","utils/dialogs/dialog","hbs!./import/html","hbs!./import/content","sunstone","utils/notifier","utils/locale","utils/resource-select","opennebula/image","opennebula/template","./import/dialogId","../tabId"],function(t){function e(){this.dialogId=m,o.call(this)}function a(){return l({dialogId:this.dialogId})}function n(t){var e=this;$("#market_import_dialog_content",t).html(c({element:this.element}));var a=["TYPE","TYPE"],n=["1","2"];return p.insert("div#market_img_datastore",t,"Datastore",null,!1,null,a,n),t.off("invalid.fndtn.abide","#"+m+"Form"),t.off("valid.fndtn.abide","#"+m+"Form"),t.on("invalid.fndtn.abide","#"+m+"Form",function(t){"abide.fndtn"==t.namespace&&d.notifyError(u.tr("One or more required fields are missing or malformed."))}).on("valid.fndtn.abide","#"+m+"Form",function(a){if("abide.fndtn"==a.namespace){e.number_of_files=e.element.files.length,e.template_created=!1,e.images_information=[],$("input, button",t).attr("disabled","disabled"),$(".market_image_result:not(.success)",t).html('<span class="fa-stack fa-2x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa  fa-spinner fa-spin fa-stack-1x fa-inverse"></i></span>'),$(".market_template_result",t).html('<span class="fa-stack fa-2x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa  fa-spinner fa-spin fa-stack-1x fa-inverse"></i></span>');var n=$("#market_import_file_template",t);return $.each(e.element.files,function(a,s){var i=$("#market_import_file_"+a,i);$(".market_image_result:not(.success)",i).length>0&&(img_obj={image:{NAME:$("input.name",i).val(),PATH:e.element.links.download.href+"/"+a,TYPE:s.type,MD5:s.md5,SHA1:s.sha1,DRIVER:s.driver,DEV_PREFIX:s.dev_prefix,FROM_APP:e.element._id.$oid,FROM_APP_NAME:e.element.name,FROM_APP_FILE:a},ds_id:$("#market_img_datastore select",t).val()},h.create({timeout:!0,data:img_obj,success:function(a,n){return function(s,i){$(".market_image_result",n).addClass("success").html('<span class="fa-stack fa-2x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa  fa-check fa-stack-1x fa-inverse"></i></span>'),$(".market_image_response",n).html('<p style="font-size:12px" class="running-color">'+u.tr("Image created successfully")+" ID:"+i.IMAGE.ID+"</p>"),e.images_information[a]=i,e.try_to_create_template(t)}}(a,i),error:function(e,a){$(".market_template_result",n).html(""),$(".market_image_result",i).html('<span class="fa-stack fa-2x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa  fa-warning fa-stack-1x fa-inverse"></i></span>'),$(".market_image_response",i).html('<p style="font-size:12px" class="error-color">'+(a.error.message||u.tr("Cannot contact server: is it running and reachable?"))+"</p>"),$("input",n).removeAttr("disabled"),$("input",i).removeAttr("disabled"),$("button",t).removeAttr("disabled")}}))}),e.try_to_create_template(t),!1}}),t.foundation("reflow","abide"),!1}function s(){return!1}function i(t){this.element=t.element}function r(t){var e=this,a=$("#market_import_file_template",t),n=$(".market_image_result.success",t).length;if(n==this.number_of_files&&!e.template_created)if(e.template_created=!0,e.element.opennebula_template&&"CPU=1"!==e.element.opennebula_template){var s;try{s=JSON.parse(e.element.opennebula_template)}catch(i){return $(".market_template_result",a).html('<span class="fa-stack fa-2x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa  fa-warning fa-stack-1x fa-inverse"></i></span>'),$(".market_template_response",a).html('<p style="font-size:12px" class="error-color">'+(i.message||u.tr("Cannot contact server: is it running and reachable?"))+"</p>"),$("input",a).removeAttr("disabled"),$("button",t).removeAttr("disabled"),void(e.template_created=!1)}$.isEmptyObject(s.DISK)?s.DISK=[]:$.isArray(s.DISK)||(s.DISK=[s.DISK]),s.NAME=$("input",a).val(),s.CPU||(s.CPU="1"),s.MEMORY||(s.MEMORY="1024"),$.each(e.images_information,function(t,e){s.DISK[t]||(s.DISK[t]={}),s.DISK[t].IMAGE=e.IMAGE.NAME,s.DISK[t].IMAGE_UNAME=e.IMAGE.UNAME}),s.FROM_APP=e.element._id.$oid,s.FROM_APP_NAME=e.element.name,f.create({timeout:!0,data:{vmtemplate:s},success:function(e,n){$(".market_template_result",a).addClass("success").html('<span class="fa-stack fa-2x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa  fa-check fa-stack-1x fa-inverse"></i></span>'),$(".market_template_response",a).html('<p style="font-size:12px" class="running-color">'+u.tr("Template created successfully")+" ID:"+n.VMTEMPLATE.ID+"</p>"),$("button",t).hide()},error:function(n,s){$(".market_template_result",a).html('<span class="fa-stack fa-2x" style="color: #dfdfdf"><i class="fa fa-cloud fa-stack-2x"></i><i class="fa  fa-warning fa-stack-1x fa-inverse"></i></span>'),$(".market_template_response",a).html('<p style="font-size:12px" class="error-color">'+(s.error.message||u.tr("Cannot contact server: is it running and reachable?"))+"</p>"),$("input",a).removeAttr("disabled"),$("button",t).removeAttr("disabled"),e.template_created=!1}})}else $("button",t).hide()}{var o=t("utils/dialogs/dialog"),l=t("hbs!./import/html"),c=t("hbs!./import/content"),d=(t("sunstone"),t("utils/notifier")),u=t("utils/locale"),p=t("utils/resource-select"),h=t("opennebula/image"),f=t("opennebula/template"),m=t("./import/dialogId");t("../tabId")}return e.DIALOG_ID=m,e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=s,e.prototype.setup=n,e.prototype.setParams=i,e.prototype.try_to_create_template=r,e}),define("hbs!tabs/marketplace-tab/panels/info/html",["hbs","hbs/handlebars","templates/helpers/tr","templates/helpers/humanizeSize"],function(t,e){var a=e.template({1:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o=this.lambda;return'        <tr>\n          <td class="key_td">'+r((e.tr||t&&t.tr||i).call(t,"Status",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+r(o(null!=(s=null!=t?t.element:t)?s.status:s,t))+"</td>\n        </tr>\n"},3:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o=this.lambda;return'        <tr>\n          <td class="key_td">'+r((e.tr||t&&t.tr||i).call(t,"Tags",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+r(o(null!=(s=null!=t?t.element:t)?s.tags:s,t))+"</td>\n        </tr>\n"},5:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o=this.lambda;return'        <tr>\n          <td class="key_td">'+r((e.tr||t&&t.tr||i).call(t,"Catalog",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+r(o(null!=(s=null!=t?t.element:t)?s.catalog:s,t))+"</td>\n        </tr>\n"},7:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression;return'        <tr>\n          <td class="key_td">'+r((e.tr||t&&t.tr||i).call(t,"Size",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+r((e.humanizeSize||t&&t.humanizeSize||i).call(t,"B",null!=(s=null!=(s=null!=(s=null!=t?t.element:t)?s.files:s)?s[0]:s)?s.size:s,{name:"humanizeSize",hash:{},data:n}))+"</td>\n        </tr>\n"},9:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l="function",c='    <table class="dataTable">\n      <thead>\n        <tr>\n          <th colspan="2">'+o((e.tr||t&&t.tr||r).call(t,"Short Description",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class="value_td">';return i=null!=(i=e.short_description||(null!=t?t.short_description:t))?i:r,s=typeof i===l?i.call(t,{name:"short_description",hash:{},data:n}):i,null!=s&&(c+=s),c+"</td>\n        </tr>\n      </tbody>\n    </table>\n"},11:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'        <tr>\n          <td class="value_td">'+o((s=null!=(s=e.name||(null!=t?t.name:t))?s:r,typeof s===i?s.call(t,{name:"name",hash:{},data:n}):s))+'</td>\n          <td class="value_td">'+o((e.humanizeSize||t&&t.humanizeSize||r).call(t,"B",null!=t?t.size:t,{name:"humanizeSize",hash:{},data:n}))+"</td>\n        </tr>\n"},13:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'        <tr>\n          <td colspan="2" class="value_td">'+i((e.tr||t&&t.tr||s).call(t,"No Images defined",{name:"tr",hash:{},data:n}))+"</td>\n        </tr>\n"},15:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o=this.lambda;return'    <table class="dataTable">\n      <thead>\n        <tr>\n          <th colspan="2">'+r((e.tr||t&&t.tr||i).call(t,"OpenNebula Template",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class="value_td"><pre>'+r(o(null!=(s=null!=t?t.element:t)?s.opennebula_template:s,t))+"</pre></td>\n        </tr>\n      </tbody>\n    </table>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,c="function",d='<div class="row">\n  <div class="large-6 columns">\n    <table class="dataTable">\n      <thead>\n        <tr><th colspan="2">'+o((e.tr||t&&t.tr||r).call(t,"Information",{name:"tr",hash:{},data:n}))+'</th></tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"ID",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=(s=null!=t?t.element:t)?s._id:s)?s.$oid:s,t))+'</td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Name",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s.name:s,t))+'</td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"URL",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">\n            <a href="'+o((i=null!=(i=e.url||(null!=t?t.url:t))?i:r,typeof i===c?i.call(t,{name:"url",hash:{},data:n}):i))+'" target="_blank">'+o((e.tr||t&&t.tr||r).call(t,"link",{name:"tr",hash:{},data:n}))+'</a>\n          </td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Publisher",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s.publisher:s,t))+'</td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Downloads",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s.downloads:s,t))+"</td>\n        </tr>\n";return s=e["if"].call(t,null!=(s=null!=t?t.element:t)?s.status:s,{name:"if",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(d+=s),s=e["if"].call(t,null!=(s=null!=t?t.element:t)?s.tags:s,{name:"if",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(d+=s),s=e["if"].call(t,null!=(s=null!=t?t.element:t)?s.catalog:s,{name:"if",hash:{},fn:this.program(5,n),inverse:this.noop,data:n}),null!=s&&(d+=s),d+='        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"OS",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s["os-id"]:s,t))+" "+o(l(null!=(s=null!=t?t.element:t)?s["os-release"]:s,t))+'</td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Arch",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s["os-arch"]:s,t))+"</td>\n        </tr>\n",s=e["if"].call(t,null!=(s=null!=t?t.element:t)?s.files:s,{name:"if",hash:{},fn:this.program(7,n),inverse:this.noop,data:n}),null!=s&&(d+=s),d+='        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Hypervisor",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s.hypervisor:s,t))+'</td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Format",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=t?t.element:t)?s.format:s,t))+'</td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <div class="large-6 columns">\n',s=e["if"].call(t,null!=t?t.short_description:t,{name:"if",hash:{},fn:this.program(9,n),inverse:this.noop,data:n}),null!=s&&(d+=s),d+='    <table class="dataTable">\n      <thead>\n        <tr>\n          <th colspan="2">'+o((e.tr||t&&t.tr||r).call(t,"Description",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class="value_td">',i=null!=(i=e.description||(null!=t?t.description:t))?i:r,s=typeof i===c?i.call(t,{name:"description",hash:{},data:n}):i,null!=s&&(d+=s),d+='</td>\n        </tr>\n      </tbody>\n    </table>\n    <table class="dataTable">\n      <thead>\n        <tr>\n          <th colspan="2">'+o((e.tr||t&&t.tr||r).call(t,"Images",{name:"tr",hash:{},data:n}))+"</th>\n        </tr>\n      </thead>\n      <tbody>\n",s=e.each.call(t,null!=(s=null!=t?t.element:t)?s.files:s,{name:"each",hash:{},fn:this.program(11,n),inverse:this.program(13,n),data:n}),null!=s&&(d+=s),d+="      </tbody>\n    </table>\n",s=e["if"].call(t,null!=(s=null!=t?t.element:t)?s.opennebula_template:s,{name:"if",hash:{},fn:this.program(15,n),inverse:this.noop,data:n}),null!=s&&(d+=s),d+"  </div>\n</div>"},useData:!0});return e.registerPartial("tabs/marketplace-tab/panels/info/html",a),a}),define("tabs/marketplace-tab/panels/info/panelId",["require"],function(){return"marketplace_info_tab"}),define("tabs/marketplace-tab/panels/info",["require","hbs!./info/html","utils/locale","utils/humanize","utils/template-utils","utils/panel/template-table","./info/panelId"],function(t){function e(t){return this.title=i.tr("Info"),this.icon="fa-info-circle",this.element=t,this}function a(){var t=this.element.links.download.href;t=t.replace(/\/download$/,"");var e="";this.element.short_description&&(e=r.htmlDecode(this.element.short_description).replace(/\n/g,"<br/>"));
var a=r.htmlDecode(this.element.description).replace(/\n/g,"<br/>");return s({element:this.element,url:t,short_description:e,description:a})}function n(){return!1}var s=t("hbs!./info/html"),i=t("utils/locale"),r=(t("utils/humanize"),t("utils/template-utils")),o=(t("utils/panel/template-table"),t("./info/panelId"));return e.PANEL_ID=o,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/marketplace-tab",["require","utils/locale","./marketplace-tab/buttons","./marketplace-tab/actions","./marketplace-tab/datatable","./marketplace-tab/tabId","./marketplace-tab/dialogs/import","./marketplace-tab/panels/info"],function(t){var e=t("utils/locale"),a=t("./marketplace-tab/buttons"),n=t("./marketplace-tab/actions"),s=t("./marketplace-tab/datatable"),i=t("./marketplace-tab/tabId"),r="dataTableMarketplace",o=[t("./marketplace-tab/dialogs/import")],l=[t("./marketplace-tab/panels/info")],c=[],d={tabId:i,title:'<i class="fa fa-lg fa-fw fa-shopping-cart"></i>&emsp;'+e.tr("Marketplace"),listHeader:'<i class="fa fa-fw fa-shopping-cart"></i>&emsp;'+e.tr("OpenNebula Marketplace"),infoHeader:'<i class="fa fa-fw fa-shopping-cart"></i>&emsp;'+e.tr("Appliance"),subheader:"<span/> <small></small>&emsp;",resource:"Marketplace",content:'<div class="row marketplace_error_message" hidden>        <div class="small-6 columns small-centered text-center">            <div class="alert-box alert radius">'+e.tr("Cannot connect to OpenNebula Marketplace")+"</div>        </div>    </div>",buttons:a,actions:n,dataTable:new s(r,{actions:!0,info:!0,oneSelection:!0}),panels:l,formPanels:c,dialogs:o};return d}),define("tabs/oneflow-dashboard",["require"],function(){var t="oneflow-dashboard",e={tabId:t,title:'<i class="fa fa-lg fa-fw fa-cubes"></i>&emsp;OneFlow',no_content:!0};return e}),define("tabs/oneflow-services-tab/buttons",["require","utils/locale"],function(t){var e=t("utils/locale"),a={"Service.refresh":{type:"action",layout:"refresh",alwaysActive:!0},"Service.chown":{type:"confirm_with_select",text:e.tr("Change owner"),select:"User",tip:e.tr("Select the new owner")+":",layout:"user_select"},"Service.chgrp":{type:"confirm_with_select",text:e.tr("Change group"),select:"Group",tip:e.tr("Select the new group")+":",layout:"user_select"},"Service.shutdown":{type:"action",layout:"main",text:e.tr("Shutdown")},"Service.recover":{type:"action",layout:"main",text:e.tr("Recover")},"Service.delete":{type:"confirm",text:e.tr("Delete"),layout:"del",tip:e.tr("This will delete the selected services")}};return a}),define("tabs/oneflow-services-tab/dialogs/scale/dialogId",["require"],function(){return"scaleServiceRoleDialog"}),define("tabs/oneflow-services-tab/actions",["require","sunstone","utils/notifier","utils/locale","opennebula/service","opennebula/role","opennebula/vm","utils/common-actions","./tabId","./panels/roles/panelId","./dialogs/scale/dialogId"],function(t){function e(){var t=[],e=$("#datatable_service_roles","#"+d+" #"+p),a=$("tbody input.check_item:checked",e);return $.each(a,function(){t.push($(this).val())}),t}function a(){var t=[],e=$("table[id^=datatable_service_vms]","#"+d+" #"+p),a=$("tbody input.check_item:checked",e);return $.each(a,function(){t.push($(this).val())}),t}function n(){return s.runAction("Service.refresh")}var s=t("sunstone"),i=t("utils/notifier"),r=(t("utils/locale"),t("opennebula/service")),o=t("opennebula/role"),l=t("opennebula/vm"),c=t("utils/common-actions"),d=t("./tabId"),u="Service",p=t("./panels/roles/panelId"),h=t("./dialogs/scale/dialogId"),f=new c(r,u,d),m={"Service.show":f.show(),"Service.refresh":f.refresh(),"Service.delete":f["delete"](),"Service.chown":f.multipleAction("chown"),"Service.chgrp":f.multipleAction("chgrp"),"Service.chmod":f.singleAction("chmod"),"Service.list":{type:"list",call:r.list,callback:function(t,e){$(".oneflow_services_error_message").hide(),s.getDataTable(d).updateView(t,e)},error:function(t,e){i.onError(t,e,$(".oneflow_services_error_message"))}},"Service.shutdown":{type:"multiple",call:r.shutdown,elements:function(){return s.getDataTable(d).elements()},error:i.onError,notify:!0},"Service.recover":{type:"multiple",call:r.recover,elements:function(){return s.getDataTable(d).elements()},error:i.onError,notify:!0},"Role.scale_dialog":{type:"custom",call:function(){selected=e(),0!=selected.lenght&&(s.getDialog(h).setParams({roleIds:selected}),s.getDialog(h).reset(),s.getDialog(h).show())}},"Role.update":{type:"multiple",call:o.update,callback:function(){s.getDialog(h).hide(),n()},elements:e,error:i.onError,notify:!0},"Role.hold":{type:"multiple",call:o.hold,callback:n,elements:e,error:i.onError,notify:!0},"Role.release":{type:"multiple",call:o.release,callback:n,elements:e,error:i.onError,notify:!0},"Role.suspend":{type:"multiple",call:o.suspend,callback:n,elements:e,error:i.onError,notify:!0},"Role.resume":{type:"multiple",call:o.resume,callback:n,elements:e,error:i.onError,notify:!0},"Role.stop":{type:"multiple",call:o.stop,callback:n,elements:e,error:i.onError,notify:!0},"Role.reboot_hard":{type:"multiple",call:o.reboot_hard,callback:n,elements:e,error:i.onError,notify:!0},"Role.delete_recreate":{type:"multiple",call:o.delete_recreate,callback:n,elements:e,error:i.onError,notify:!0},"Role.reboot":{type:"multiple",call:o.reboot,callback:n,elements:e,error:i.onError,notify:!0},"Role.poweroff":{type:"multiple",call:o.poweroff,callback:n,elements:e,error:i.onError,notify:!0},"Role.poweroff_hard":{type:"multiple",call:o.poweroff_hard,callback:n,elements:e,error:i.onError,notify:!0},"Role.undeploy":{type:"multiple",call:o.undeploy,callback:n,elements:e,error:i.onError,notify:!0},"Role.undeploy_hard":{type:"multiple",call:o.undeploy_hard,callback:n,elements:e,error:i.onError,notify:!0},"Role.snapshot_create":{type:"single",call:o.snapshot_create,callback:n,error:i.onError,notify:!0},"Role.shutdown":{type:"multiple",call:o.shutdown,callback:n,elements:e,error:i.onError,notify:!0},"Role.shutdown_hard":{type:"multiple",call:o.cancel,callback:n,elements:e,error:i.onError,notify:!0},"Role.delete":{type:"multiple",call:o.del,callback:n,elements:e,error:i.onError,notify:!0},"Role.recover":{type:"multiple",call:o.recover,callback:n,elements:e,error:i.onError,notify:!0},"RoleVM.deploy":{type:"multiple",call:l.deploy,callback:n,elements:a,error:i.onError,notify:!0},"RoleVM.migrate":{type:"multiple",call:l.migrate,callback:n,elements:a,error:i.onError,notify:!0},"RoleVM.migrate_live":{type:"multiple",call:l.livemigrate,callback:n,elements:a,error:i.onError,notify:!0},"RoleVM.hold":{type:"multiple",call:l.hold,callback:n,elements:a,error:i.onError,notify:!0},"RoleVM.release":{type:"multiple",call:l.release,callback:n,elements:a,error:i.onError,notify:!0},"RoleVM.suspend":{type:"multiple",call:l.suspend,callback:n,elements:a,error:i.onError,notify:!0},"RoleVM.resume":{type:"multiple",call:l.resume,callback:n,elements:a,error:i.onError,notify:!0},"RoleVM.stop":{type:"multiple",call:l.stop,callback:n,elements:a,error:i.onError,notify:!0},"RoleVM.reboot_hard":{type:"multiple",call:l.reset,callback:n,elements:a,error:i.onError,notify:!0},"RoleVM.delete_recreate":{type:"multiple",call:l.resubmit,callback:n,elements:a,error:i.onError,notify:!0},"RoleVM.reboot":{type:"multiple",call:l.reboot,callback:n,elements:a,error:i.onError,notify:!0},"RoleVM.poweroff":{type:"multiple",call:l.poweroff,callback:n,elements:a,error:i.onError,notify:!0},"RoleVM.poweroff_hard":{type:"multiple",call:l.poweroff_hard,callback:n,elements:a,error:i.onError,notify:!0},"RoleVM.undeploy":{type:"multiple",call:l.undeploy,callback:n,elements:a,error:i.onError,notify:!0},"RoleVM.undeploy_hard":{type:"multiple",call:l.undeploy_hard,callback:n,elements:a,error:i.onError,notify:!0},"RoleVM.shutdown":{type:"multiple",call:l.shutdown,callback:n,elements:a,error:i.onError,notify:!0},"RoleVM.shutdown_hard":{type:"multiple",call:l.cancel,callback:n,elements:a,error:i.onError,notify:!0},"RoleVM.delete":{type:"multiple",call:l.del,callback:n,elements:a,error:i.onError,notify:!0},"RoleVM.recover":{type:"multiple",call:l.recover,callback:n,elements:a,error:i.onError,notify:!0},"RoleVM.resched":{type:"multiple",call:l.resched,callback:n,elements:a,error:i.onError,notify:!0},"RoleVM.unresched":{type:"multiple",call:l.unresched,callback:n,elements:a,error:i.onError,notify:!0},"RoleVM.chown":{type:"multiple",call:l.chown,callback:n,elements:a,error:i.onError,notify:!0},"RoleVM.chgrp":{type:"multiple",call:l.chgrp,callback:n,elements:a,error:i.onError,notify:!0}};return m}),define("tabs/oneflow-services-tab/datatable",["require","utils/tab-datatable","sunstone-config","utils/locale","opennebula/service","./tabId"],function(t){function e(t,e){this.conf=e||{},this.tabId=c,this.dataTableId=t,this.resource=o,this.xmlRoot=l,this.dataTableOptions={bAutoWidth:!1,bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:["check"]},{sWidth:"35px",aTargets:[0]},{bVisible:!0,aTargets:s.tabTableColumns(c)},{bVisible:!1,aTargets:["_all"]}]},this.columns=[i.tr("ID"),i.tr("Owner"),i.tr("Group"),i.tr("Name"),i.tr("State")],this.selectOptions={id_index:1,name_index:4,select_resource:i.tr("Please select a Service from the list"),you_selected:i.tr("You selected the following Service:"),select_resource_multiple:i.tr("Please select one or more Services from the list"),you_selected_multiple:i.tr("You selected the following Services:")},n.call(this)}function a(t){var e=t[l];return['<input class="check_item" type="checkbox" id="'+o.toLowerCase()+"_"+e.ID+'" name="selected_items" value="'+e.ID+'"/>',e.ID,e.UNAME,e.GNAME,e.NAME,r.state(e.TEMPLATE.BODY.state)]}var n=t("utils/tab-datatable"),s=t("sunstone-config"),i=t("utils/locale"),r=t("opennebula/service"),o="Service",l="DOCUMENT",c=t("./tabId");return e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.elementArray=a,e}),define("hbs!tabs/oneflow-services-tab/dialogs/scale/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<div id="'+o((s=null!=(s=e.dialogId||(null!=t?t.dialogId:t))?s:r,typeof s===i?s.call(t,{name:"dialogId",hash:{},data:n}):s))+'" class="reveal-modal" role="dialog" data-reveal >\n  <div class="row">\n    <h3 class="subheader">'+o((e.tr||t&&t.tr||r).call(t,"Scale",{name:"tr",hash:{},data:n}))+'</h3>\n  </div>\n  <form data-abide="ajax" id="'+o((s=null!=(s=e.dialogId||(null!=t?t.dialogId:t))?s:r,typeof s===i?s.call(t,{name:"dialogId",hash:{},data:n}):s))+'Form">\n    <div class="row">\n      <div class="large-12 columns">\n        <label for="cardinality">'+o((e.tr||t&&t.tr||r).call(t,"Cardinality",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Number of VMs to instantiate with this role",{name:"tr",hash:{},data:n}))+'</span>\n        </label>\n        <input type="text" name="cardinality" id="cardinality"/>\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-12 columns">\n        <input type="checkbox" name="force" id="force"/>\n        <label class="inline" for="force">'+o((e.tr||t&&t.tr||r).call(t,"Force",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Force the new cardinality even if it is outside the limits",{name:"tr",hash:{},data:n}))+'</span>\n        </label>\n      </div>\n    </div>\n    <div class="form_buttons row">\n      <button type="submit" class="button radius right">\n        '+o((e.tr||t&&t.tr||r).call(t,"Scale",{name:"tr",hash:{},data:n}))+'\n      </button>\n    </div>\n    <a class="close-reveal-modal">&#215;</a>\n  </form>\n</div>'},useData:!0});return e.registerPartial("tabs/oneflow-services-tab/dialogs/scale/html",a),a}),define("tabs/oneflow-services-tab/dialogs/scale",["require","utils/dialogs/dialog","hbs!./scale/html","sunstone","utils/notifier","utils/locale","utils/tips","./scale/dialogId","../tabId"],function(t){function e(){this.dialogId=p,r.call(this)}function a(){return o({dialogId:this.dialogId})}function n(){}function s(t){var e=this;return t.off("invalid.fndtn.abide","#"+p+"Form"),t.off("valid.fndtn.abide","#"+p+"Form"),t.on("invalid.fndtn.abide","#"+p+"Form",function(t){"abide.fndtn"==t.namespace&&c.notifyError(d.tr("One or more required fields are missing or malformed."))}).on("valid.fndtn.abide","#"+p+"Form",function(a){if("abide.fndtn"==a.namespace){var n=!1;$("#force",t).is(":checked")&&(n=!0);var s={force:n,cardinality:$("#cardinality",t).val()};return l.runAction("Role.update",e.roleIds,s),!1}}),t.foundation("reflow","abide"),u.setup(t),!1}function i(t){this.roleIds=t.roleIds}{var r=t("utils/dialogs/dialog"),o=t("hbs!./scale/html"),l=t("sunstone"),c=t("utils/notifier"),d=t("utils/locale"),u=t("utils/tips"),p=t("./scale/dialogId");t("../tabId")}return e.DIALOG_ID=p,e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=n,e.prototype.setup=s,e.prototype.setParams=i,e}),define("hbs!tabs/oneflow-services-tab/panels/info/html",["hbs","hbs/handlebars","templates/helpers/tr","templates/helpers/valOrDefault"],function(t,e){var a=e.template({1:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return"            "+i((e.tr||t&&t.tr||s).call(t,"yes",{name:"tr",hash:{},data:n}))+"\n"},3:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return"            "+i((e.tr||t&&t.tr||s).call(t,"no",{name:"tr",hash:{},data:n}))+"\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,c="function",d='<div class="row">\n  <div class="large-6 columns">\n    <table class="dataTable extended_table">\n      <thead>\n        <tr>\n          <th colspan="2">'+o((e.tr||t&&t.tr||r).call(t,"Information",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"ID",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td" colspan="2">'+o(l(null!=(s=null!=t?t.element:t)?s.ID:s,t))+'</td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Name",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td" colspan="2">'+o(l(null!=(s=null!=t?t.element:t)?s.NAME:s,t))+'</td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Strategy",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=(s=null!=(s=null!=t?t.element:t)?s.TEMPLATE:s)?s.BODY:s)?s.deployment:s,t))+'</td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Shutdown action",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">\n            '+o((e.valOrDefault||t&&t.valOrDefault||r).call(t,null!=(s=null!=(s=null!=(s=null!=t?t.element:t)?s.TEMPLATE:s)?s.BODY:s)?s.shutdown_action:s,"-",{name:"valOrDefault",hash:{},data:n}))+'\n          </td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"State",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o((i=null!=(i=e.stateStr||(null!=t?t.stateStr:t))?i:r,typeof i===c?i.call(t,{name:"stateStr",hash:{},data:n}):i))+'</td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Ready Status Gate",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">\n';return s=e["if"].call(t,null!=(s=null!=(s=null!=(s=null!=t?t.element:t)?s.TEMPLATE:s)?s.BODY:s)?s.ready_status_gate:s,{name:"if",hash:{},fn:this.program(1,n),inverse:this.program(3,n),data:n}),null!=s&&(d+=s),d+='          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <div class="large-6 columns">',i=null!=(i=e.permissionsTableHTML||(null!=t?t.permissionsTableHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"permissionsTableHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+"</div>\n</div>"},useData:!0});return e.registerPartial("tabs/oneflow-services-tab/panels/info/html",a),a}),define("tabs/oneflow-services-tab/panels/info/panelId",["require"],function(){return"service_info_tab"}),define("tabs/oneflow-services-tab/panels/info",["require","utils/locale","utils/panel/permissions-table","opennebula/service","hbs!./info/html","../tabId","./info/panelId"],function(t){function e(t){return this.title=s.tr("Info"),this.icon="fa-info-circle",this.element=t[d],this}function a(){var t=i.html(l,u,this.element);return o({element:this.element,permissionsTableHTML:t,stateStr:r.state(this.element.TEMPLATE.BODY.state)})}function n(t){i.setup(l,u,this.element,t)}var s=t("utils/locale"),i=t("utils/panel/permissions-table"),r=t("opennebula/service"),o=t("hbs!./info/html"),l=t("../tabId"),c=t("./info/panelId"),d="DOCUMENT",u="Service";return e.PANEL_ID=c,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/oneflow-services-tab/panels/roles/roles-buttons",["require","utils/locale"],function(t){var e=t("utils/locale"),a={"Role.scale_dialog":{type:"action",text:e.tr("Scale"),layout:"create"},"Role.hold":{type:"action",text:e.tr("Hold"),tip:e.tr("This will hold selected pending VMs from being deployed"),layout:"vmsplanification_buttons"},"Role.release":{type:"action",text:e.tr("Release"),layout:"vmsplanification_buttons",tip:e.tr("This will release held machines")},"Role.suspend":{type:"action",text:e.tr("Suspend"),layout:"vmspause_buttons",tip:e.tr("This will suspend selected machines")},"Role.resume":{type:"action",text:'<i class="fa fa-play"/>',layout:"vmsplay_buttons",tip:e.tr("This will resume selected VMs")},"Role.stop":{type:"action",text:e.tr("Stop"),layout:"vmsstop_buttons",tip:e.tr("This will stop selected VMs")},"Role.reboot":{type:"action",text:e.tr("Reboot"),layout:"vmsrepeat_buttons",tip:e.tr("This will send a reboot action to running VMs")},"Role.reboot_hard":{type:"action",text:e.tr("Reboot")+' <span class="label secondary radius">hard</span>',layout:"vmsrepeat_buttons",tip:e.tr("This will perform a hard reboot on selected VMs")},"Role.poweroff":{type:"action",text:e.tr("Power Off"),layout:"vmspause_buttons",tip:e.tr("This will send a power off signal to running VMs. They can be resumed later.")},"Role.poweroff_hard":{type:"action",text:e.tr("Power Off")+' <span class="label secondary radius">hard</span>',layout:"vmspause_buttons",tip:e.tr("This will send a forced power off signal to running VMs. They can be resumed later.")},"Role.undeploy":{type:"action",text:e.tr("Undeploy"),layout:"vmsstop_buttons",tip:e.tr("Shuts down the given VM. The VM is saved in the system Datastore.")},"Role.undeploy_hard":{type:"action",text:e.tr("Undeploy")+' <span class="label secondary radius">hard</span>',layout:"vmsstop_buttons",tip:e.tr("Shuts down the given VM. The VM is saved in the system Datastore.")},"Role.shutdown":{type:"action",text:e.tr("Shutdown"),layout:"vmsdelete_buttons",tip:e.tr("This will initiate the shutdown process in the selected VMs")},"Role.shutdown_hard":{type:"action",text:e.tr("Shutdown")+' <span class="label secondary radius">hard</span>',layout:"vmsdelete_buttons",tip:e.tr("This will initiate the shutdown-hard (forced) process in the selected VMs")},"Role.delete":{type:"action",text:e.tr("Delete"),layout:"vmsdelete_buttons",tip:e.tr("This will delete the selected VMs from the database")},"Role.delete_recreate":{type:"action",text:e.tr("Delete")+' <span class="label secondary radius">recreate</span>',layout:"vmsrepeat_buttons",tip:e.tr("This will delete and recreate VMs to PENDING state")}};return a}),define("tabs/oneflow-services-tab/panels/roles/roles-vm-buttons",["require","utils/locale","tabs/vms-tab/buttons"],function(t){var e=(t("utils/locale"),t("tabs/vms-tab/buttons")),a={"RoleVM.hold":e["VM.hold"],"RoleVM.release":e["VM.release"],"RoleVM.suspend":e["VM.suspend"],"RoleVM.resume":e["VM.resume"],"RoleVM.stop":e["VM.stop"],"RoleVM.reboot":e["VM.reboot"],"RoleVM.reboot_hard":e["VM.reboot_hard"],"RoleVM.poweroff":e["VM.poweroff"],"RoleVM.poweroff_hard":e["VM.poweroff_hard"],"RoleVM.undeploy":e["VM.undeploy"],"RoleVM.undeploy_hard":e["VM.undeploy_hard"],"RoleVM.shutdown":e["VM.shutdown"],"RoleVM.shutdown_hard":e["VM.shutdown_hard"],"RoleVM.delete":e["VM.delete"],"RoleVM.delete_recreate":e["VM.delete_recreate"],"RoleVM.resched":e["VM.resched"],"RoleVM.unresched":e["VM.unresched"]};return a}),define("utils/dom-datatable",["require","utils/tab-datatable","sunstone-config","utils/locale"],function(t){function e(t,e){this.conf=e||{},this.dataTableId=t,this.dataTableOptions=e.dataTableOptions||{bAutoWidth:!1,bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:["check"]}]},a.call(this)}{var a=t("utils/tab-datatable");t("sunstone-config"),t("utils/locale")}return e.prototype=Object.create(a.prototype),e.prototype.constructor=e,e}),define("hbs!tabs/oneflow-services-tab/panels/roles/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({1:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'    <div id="role_actions">\n      <div class="columns large-4 medium-6 right">\n        <div class="row">\n          <div class="small-6 columns">\n            <label for="batch_action_period">'+i((e.tr||t&&t.tr||s).call(t,"Period",{name:"tr",hash:{},data:n}))+':\n              <span class="tip">'+i((e.tr||t&&t.tr||s).call(t,"Seconds between each group of actions",{name:"tr",hash:{},data:n}))+'</span>\n            </label>\n            <input type="text" id="batch_action_period" name="batch_action_period"/>\n          </div>\n          <div class="small-6 columns">\n            <label for="batch_action_number">'+i((e.tr||t&&t.tr||s).call(t,"Number",{name:"tr",hash:{},data:n}))+':\n              <span class="tip">'+i((e.tr||t&&t.tr||s).call(t,"Number of VMs to apply the action to each period",{name:"tr",hash:{},data:n}))+'</span>\n            </label>\n            <input type="text" id="batch_action_number" name="batch_action_number"/>\n          </div>\n        </div>\n      </div>\n      <div class="action_blocks columns large-12">\n      </div>\n    </div>\n'},3:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return"            <th>"+i((e.tr||t&&t.tr||s).call(t,"State",{name:"tr",hash:{},data:n}))+"</th>\n"},5:function(t,e,a,n,s){var i,r,o="function",l=e.helperMissing,c=this.escapeExpression,d=this.lambda,u='          <tr>\n            <td class="hidden">\n              <input class="check_item" type="checkbox" id="role_'+c((r=null!=(r=e.name||(null!=t?t.name:t))?r:l,typeof r===o?r.call(t,{name:"name",hash:{},data:n}):r))+'" name="selected_items" value="'+c(d(null!=(i=null!=s[1]?s[1].element:s[1])?i.ID:i,t))+"/role/"+c((r=null!=(r=e.name||(null!=t?t.name:t))?r:l,typeof r===o?r.call(t,{name:"name",hash:{},data:n}):r))+'"/>\n            </td>\n            <td>'+c((r=null!=(r=e.name||(null!=t?t.name:t))?r:l,typeof r===o?r.call(t,{name:"name",hash:{},data:n}):r))+"</td>\n";return i=e["if"].call(t,null!=s[1]?s[1].servicePanel:s[1],{name:"if",hash:{},fn:this.program(6,n,s),inverse:this.noop,data:n}),null!=i&&(u+=i),u+"            <td>"+c((r=null!=(r=e.cardinality||(null!=t?t.cardinality:t))?r:l,typeof r===o?r.call(t,{name:"cardinality",hash:{},data:n}):r))+"</td>\n            <td>"+c((r=null!=(r=e.vm_template||(null!=t?t.vm_template:t))?r:l,typeof r===o?r.call(t,{name:"vm_template",hash:{},data:n}):r))+"</td>\n            <td>"+c((r=null!=(r=e.parents||(null!=t?t.parents:t))?r:l,typeof r===o?r.call(t,{name:"parents",hash:{},data:n}):r))+"</td>\n          </tr>\n"},6:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return"            <td>"+o((s=null!=(s=e.state||(null!=t?t.state:t))?s:r,typeof s===i?s.call(t,{name:"state",hash:{},data:n}):s))+"</td>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n,s){var i,r,o="function",l=e.helperMissing,c=this.escapeExpression,d='<form class="custom" id="roles_form" action="">\n  <div class="row">\n';return i=e["if"].call(t,null!=t?t.servicePanel:t,{name:"if",hash:{},fn:this.program(1,n,s),inverse:this.noop,data:n}),null!=i&&(d+=i),d+='    <div id="roles_info" class="columns large-12">\n      <table id="datatable_roles_'+c((r=null!=(r=e.panelId||(null!=t?t.panelId:t))?r:l,typeof r===o?r.call(t,{name:"panelId",hash:{},data:n}):r))+'" class="dataTable twelve">\n        <thead>\n          <tr>\n            <th class="check hidden">\n              <input type="checkbox" class="check_all" value=""></input>\n            </th>\n            <th>'+c((e.tr||t&&t.tr||l).call(t,"Name",{name:"tr",hash:{},data:n}))+"</th>\n",i=e["if"].call(t,null!=t?t.servicePanel:t,{name:"if",hash:{},fn:this.program(3,n,s),inverse:this.noop,data:n}),null!=i&&(d+=i),d+="            <th>"+c((e.tr||t&&t.tr||l).call(t,"Cardinality",{name:"tr",hash:{},data:n}))+"</th>\n            <th>"+c((e.tr||t&&t.tr||l).call(t,"VM Template",{name:"tr",hash:{},data:n}))+"</th>\n            <th>"+c((e.tr||t&&t.tr||l).call(t,"Parents",{name:"tr",hash:{},data:n}))+"</th>\n          </tr>\n        </thead>\n        <tbody>\n",i=e.each.call(t,null!=t?t.roleList:t,{name:"each",hash:{},fn:this.program(5,n,s),inverse:this.noop,data:n}),null!=i&&(d+=i),d+'        </tbody>\n      </table>\n    </div>\n    <div id="roles_extended_info" class="columns twelve">\n      <div class="text-center">\n        <span class="fa-stack fa-5x" style="color: #dfdfdf">\n          <i class="fa fa-cloud fa-stack-2x"></i>\n          <i class="fa fa-info-circle fa-stack-1x fa-inverse"></i>\n        </span>\n        <br>\n        <br>\n        <span style="font-size: 18px; color: #999">\n          '+c((e.tr||t&&t.tr||l).call(t,"Select a role in the table for more information",{name:"tr",hash:{},data:n}))+"\n        </span>\n      </div>\n    </div>\n  </div>\n</form>"},useData:!0,useDepths:!0});return e.registerPartial("tabs/oneflow-services-tab/panels/roles/html",a),a}),define("hbs!tabs/oneflow-services-tab/panels/roles/roleInfo",["hbs","hbs/handlebars","templates/helpers/tr","templates/helpers/valOrDefault"],function(t,e){var a=e.template({1:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l="function",c=this.lambda,d="  <fieldset>\n    <legend>"+o((e.tr||t&&t.tr||r).call(t,"Virtual Machines",{name:"tr",hash:{},data:n}))+'</legend>\n    <div id="role_vms_actions">\n      <div class="action_blocks large-12 columns">\n      </div>\n    </div>\n    <div class="large-12 columns">\n      <br>\n      <table id="datatable_vms_'+o((i=null!=(i=e.panelId||(null!=t?t.panelId:t))?i:r,typeof i===l?i.call(t,{name:"panelId",hash:{},data:n}):i))+"_"+o(c(null!=(s=null!=t?t.role:t)?s.name:s,t))+'" class="dataTable twelve ">\n        <thead>\n          <tr>\n            <th></th>\n            <th></th>\n            <th class="check">\n              <input type="checkbox" class="check_all" value=""></input>\n            </th>\n';return s=e.each.call(t,null!=t?t.vmsTableColumns:t,{name:"each",hash:{},fn:this.program(2,n),inverse:this.noop,data:n}),null!=s&&(d+=s),d+="          </tr>\n        </thead>\n        <tbody>\n",s=e.each.call(t,null!=t?t.vms:t,{name:"each",hash:{},fn:this.program(4,n),inverse:this.noop,data:n}),null!=s&&(d+=s),d+"        </tbody>\n      </table>\n    </div>\n  </fieldset>\n"},2:function(t){var e=this.lambda,a=this.escapeExpression;return"            <th>"+a(e(t,t))+"</th>\n"},4:function(t,e,a,n){var s,i="          <tr>\n";return s=e.each.call(t,t,{name:"each",hash:{},fn:this.program(5,n),inverse:this.noop,data:n}),null!=s&&(i+=s),i+"          </tr>\n"},5:function(t){var e,a=this.lambda,n="            <td>";return e=a(t,t),null!=e&&(n+=e),n+"</td>\n"},7:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o='    <table class="dataTable extended_table policies_table">\n      <thead style="background:#dfdfdf">\n        <tr>\n          <th colspan="7">'+r((e.tr||t&&t.tr||i).call(t,"Elasticity policies",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <thead>\n        <tr>\n          <th class="has-tip" data-tooltip title="'+r((e.tr||t&&t.tr||i).call(t,"Type of adjustment.",{name:"tr",hash:{},data:n}))+"<br><br>\n            "+r((e.tr||t&&t.tr||i).call(t,"CHANGE: Add/substract the given number of VMs.",{name:"tr",hash:{},data:n}))+"<br>\n            "+r((e.tr||t&&t.tr||i).call(t,"CARDINALITY: Set the cardinality to the given number.",{name:"tr",hash:{},data:n}))+"<br>\n            "+r((e.tr||t&&t.tr||i).call(t,"PERCENTAGE_CHANGE: Add/substract the given percentage to the current cardinality.",{name:"tr",hash:{},data:n}))+'\n            " style="width:14%">'+r((e.tr||t&&t.tr||i).call(t,"Type",{name:"tr",hash:{},data:n}))+'\n          </th>\n          <th class="has-tip" data-tooltip title="'+r((e.tr||t&&t.tr||i).call(t,"Positive or negative adjustment. Its meaning depends on 'type'",{name:"tr",hash:{},data:n}))+"<br><br>\n            "+r((e.tr||t&&t.tr||i).call(t,"CHANGE: -2, will substract 2 VMs from the role",{name:"tr",hash:{},data:n}))+"<br>\n            "+r((e.tr||t&&t.tr||i).call(t,"CARDINALITY: 8, will set carditanilty to 8",{name:"tr",hash:{},data:n}))+"<br>\n            "+r((e.tr||t&&t.tr||i).call(t,"PERCENTAGE_CHANGE: 20, will increment cardinality by 20%",{name:"tr",hash:{},data:n}))+'" style="width:12%">'+r((e.tr||t&&t.tr||i).call(t,"Adjust",{name:"tr",hash:{},data:n}))+'\n          </th>\n          <th class="has-tip" data-tooltip title="'+r((e.tr||t&&t.tr||i).call(t,"Optional parameter for PERCENTAGE_CHANGE adjustment type.",{name:"tr",hash:{},data:n}))+"<br>\n            "+r((e.tr||t&&t.tr||i).call(t," If present, the policy will change the cardinality by at least the number of VMs set in this attribute.",{name:"tr",hash:{},data:n}))+'" style="width:9%">'+r((e.tr||t&&t.tr||i).call(t,"Min",{name:"tr",hash:{},data:n}))+'\n          </th>\n          <th class="has-tip" data-tooltip title="'+r((e.tr||t&&t.tr||i).call(t,"Expression to trigger the elasticity",{name:"tr",hash:{},data:n}))+"<br><br>\n            "+r((e.tr||t&&t.tr||i).call(t,"Example: ATT < 20",{name:"tr",hash:{},data:n}))+'" style="width:30%">'+r((e.tr||t&&t.tr||i).call(t,"Expression",{name:"tr",hash:{},data:n}))+'\n          </th>\n          <th class="has-tip" data-tooltip title="'+r((e.tr||t&&t.tr||i).call(t,"Number of periods that the expression must be true before the elasticity is triggered",{name:"tr",hash:{},data:n}))+'" style="width:8%">#\n          </th>\n          <th class="has-tip" data-tooltip title="'+r((e.tr||t&&t.tr||i).call(t,"Duration, in seconds, of each period in '# Periods'",{name:"tr",hash:{},data:n}))+'" style="width:9%">'+r((e.tr||t&&t.tr||i).call(t,"Period",{name:"tr",hash:{},data:n}))+'\n          </th>\n          <th class="has-tip" data-tooltip title="'+r((e.tr||t&&t.tr||i).call(t,"Cooldown period duration after a scale operation, in seconds",{name:"tr",hash:{},data:n}))+'" style="width:15%">'+r((e.tr||t&&t.tr||i).call(t,"Cooldown",{name:"tr",hash:{},data:n}))+'\n          </th>\n          <th style="width:3%"></th>\n        </tr>\n      </thead>\n      <tbody>\n';return s=e.each.call(t,null!=(s=null!=t?t.role:t)?s.elasticity_policies:s,{name:"each",hash:{},fn:this.program(8,n),inverse:this.noop,data:n}),null!=s&&(o+=s),o+"      </tbody>\n    </table>\n"},8:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c="        <tr>\n          <td>"+l((i=null!=(i=e.type||(null!=t?t.type:t))?i:o,typeof i===r?i.call(t,{name:"type",hash:{},data:n}):i))+"</td>\n          <td>"+l((i=null!=(i=e.adjust||(null!=t?t.adjust:t))?i:o,typeof i===r?i.call(t,{name:"adjust",hash:{},data:n}):i))+"</td>\n          <td>"+l((e.valOrDefault||t&&t.valOrDefault||o).call(t,null!=t?t.min_adjust_step:t,"-",{name:"valOrDefault",hash:{},data:n}))+"</td>\n          <td>"+l((e.valOrDefault||t&&t.valOrDefault||o).call(t,null!=t?t.expression_evaluated:t,null!=t?t.expression:t,{name:"valOrDefault",hash:{},data:n}))+"</td>\n          <td>\n";return s=e["if"].call(t,null!=t?t.period_number:t,{name:"if",hash:{},fn:this.program(9,n),inverse:this.program(14,n),data:n}),null!=s&&(c+=s),c+"          </td>\n          <td>"+l((e.valOrDefault||t&&t.valOrDefault||o).call(t,null!=t?t.period:t,"-",{name:"valOrDefault",hash:{},data:n}))+"</td>\n          <td>"+l((e.valOrDefault||t&&t.valOrDefault||o).call(t,null!=t?t.cooldown:t,"-",{name:"valOrDefault",hash:{},data:n}))+"</td>\n        </tr>\n"
},9:function(t,e,a,n){var s,i="";return s=e["if"].call(t,null!=t?t.servicePanel:t,{name:"if",hash:{},fn:this.program(10,n),inverse:this.program(12,n),data:n}),null!=s&&(i+=s),i},10:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o="function";return"            "+r((e.valOrDefault||t&&t.valOrDefault||i).call(t,null!=t?t.true_evals:t,"0",{name:"valOrDefault",hash:{},data:n}))+"/"+r((s=null!=(s=e.period_number||(null!=t?t.period_number:t))?s:i,typeof s===o?s.call(t,{name:"period_number",hash:{},data:n}):s))+"\n"},12:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return"            "+o((s=null!=(s=e.period_number||(null!=t?t.period_number:t))?s:r,typeof s===i?s.call(t,{name:"period_number",hash:{},data:n}):s))+"\n"},14:function(){return"            -\n"},16:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o='    <table class="dataTable extended_table policies_table">\n      <thead style="background:#dfdfdf">\n        <tr>\n          <th colspan="5">'+r((e.tr||t&&t.tr||i).call(t,"Scheduled policies",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <thead>\n        <tr>\n          <th class="has-tip" data-tooltip title="'+r((e.tr||t&&t.tr||i).call(t,"Type of adjustment.",{name:"tr",hash:{},data:n}))+"<br><br>\n            "+r((e.tr||t&&t.tr||i).call(t,"CHANGE: Add/substract the given number of VMs.",{name:"tr",hash:{},data:n}))+"<br>\n            "+r((e.tr||t&&t.tr||i).call(t,"CARDINALITY: Set the cardinality to the given number.",{name:"tr",hash:{},data:n}))+"<br>\n            "+r((e.tr||t&&t.tr||i).call(t,"PERCENTAGE_CHANGE: Add/substract the given percentage to the current cardinality.",{name:"tr",hash:{},data:n}))+'" style="width:14%">'+r((e.tr||t&&t.tr||i).call(t,"Type",{name:"tr",hash:{},data:n}))+'\n          </th>\n          <th class="has-tip" data-tooltip title="'+r((e.tr||t&&t.tr||i).call(t,"Positive or negative adjustment. Its meaning depends on 'type'",{name:"tr",hash:{},data:n}))+"<br><br>\n            "+r((e.tr||t&&t.tr||i).call(t,"CHANGE: -2, will substract 2 VMs from the role",{name:"tr",hash:{},data:n}))+"<br>\n            "+r((e.tr||t&&t.tr||i).call(t,"CARDINALITY: 8, will set carditanilty to 8",{name:"tr",hash:{},data:n}))+"<br>\n            "+r((e.tr||t&&t.tr||i).call(t,"PERCENTAGE_CHANGE: 20, will increment cardinality by 20%",{name:"tr",hash:{},data:n}))+'" style="width:12%">'+r((e.tr||t&&t.tr||i).call(t,"Adjust",{name:"tr",hash:{},data:n}))+'\n          </th>\n          <th class="has-tip" data-tooltip title="'+r((e.tr||t&&t.tr||i).call(t,"Optional parameter for PERCENTAGE_CHANGE adjustment type. If present, the policy will change the cardinality by at least the number of VMs set in this attribute.",{name:"tr",hash:{},data:n}))+'" style="width:9%">'+r((e.tr||t&&t.tr||i).call(t,"Min",{name:"tr",hash:{},data:n}))+'\n          </th>\n          <th class="has-tip" data-tooltip title="'+r((e.tr||t&&t.tr||i).call(t,"Recurrence: Time for recurring adjustements. Time is specified with the Unix cron syntax",{name:"tr",hash:{},data:n}))+"<br><br>\n            "+r((e.tr||t&&t.tr||i).call(t,"Start time: Exact time for the adjustement",{name:"tr",hash:{},data:n}))+'" style="width:28%">'+r((e.tr||t&&t.tr||i).call(t,"Time format",{name:"tr",hash:{},data:n}))+'\n          </th>\n          <th class="has-tip" data-tooltip title="'+r((e.tr||t&&t.tr||i).call(t,"Time expression depends on the the time formar selected",{name:"tr",hash:{},data:n}))+"<br><br>\n            "+r((e.tr||t&&t.tr||i).call(t,"Recurrence: Time for recurring adjustements. Time is specified with the Unix cron syntax",{name:"tr",hash:{},data:n}))+"<br>\n            "+r((e.tr||t&&t.tr||i).call(t,"Start time: Exact time for the adjustement",{name:"tr",hash:{},data:n}))+'" style="width:33%">'+r((e.tr||t&&t.tr||i).call(t,"Time expression",{name:"tr",hash:{},data:n}))+'\n          </th>\n          <th style="width:3%"></th>\n        </tr>\n      </thead>\n      <tbody>\n';return s=e.each.call(t,null!=(s=null!=t?t.role:t)?s.scheduled_policies:s,{name:"each",hash:{},fn:this.program(17,n),inverse:this.noop,data:n}),null!=s&&(o+=s),o+"      </tbody>\n    </table>\n"},17:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c="        <tr>\n          <td>"+l((i=null!=(i=e.type||(null!=t?t.type:t))?i:o,typeof i===r?i.call(t,{name:"type",hash:{},data:n}):i))+"</td>\n          <td>"+l((i=null!=(i=e.adjust||(null!=t?t.adjust:t))?i:o,typeof i===r?i.call(t,{name:"adjust",hash:{},data:n}):i))+"</td>\n          <td>"+l((e.valOrDefault||t&&t.valOrDefault||o).call(t,null!=t?t.min_adjust_step:t,"-",{name:"valOrDefault",hash:{},data:n}))+"</td>\n";return s=e["if"].call(t,null!=t?t.start_time:t,{name:"if",hash:{},fn:this.program(18,n),inverse:this.program(20,n),data:n}),null!=s&&(c+=s),c+"        </tr>\n"},18:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o="function";return"          <td>"+r((e.tr||t&&t.tr||i).call(t,"Start time",{name:"tr",hash:{},data:n}))+"</td>\n          <td>"+r((s=null!=(s=e.start_time||(null!=t?t.start_time:t))?s:i,typeof s===o?s.call(t,{name:"start_time",hash:{},data:n}):s))+"</td>\n"},20:function(t,e,a,n){var s,i="";return s=e["if"].call(t,null!=t?t.recurrence:t,{name:"if",hash:{},fn:this.program(21,n),inverse:this.noop,data:n}),null!=s&&(i+=s),i},21:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o="function";return"          <td>"+r((e.tr||t&&t.tr||i).call(t,"Recurrence",{name:"tr",hash:{},data:n}))+"</td>\n          <td>"+r((s=null!=(s=e.recurrence||(null!=t?t.recurrence:t))?s:i,typeof s===o?s.call(t,{name:"recurrence",hash:{},data:n}):s))+"</td>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o=this.lambda,l="<form>\n  <h4>"+r((e.tr||t&&t.tr||i).call(t,"Role",{name:"tr",hash:{},data:n}))+" - "+r(o(null!=(s=null!=t?t.role:t)?s.name:s,t))+"</h4>\n  <div class='large-12 columns'>\n    <table class='dataTable extended_table policies_table'>\n      <thead>\n        <tr>\n          <th colspan='8'>"+r((e.tr||t&&t.tr||i).call(t,"Information",{name:"tr",hash:{},data:n}))+"</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class='key_td'>"+r((e.tr||t&&t.tr||i).call(t,"Shutdown action",{name:"tr",hash:{},data:n}))+"</td>\n          <td class='value_td'>"+r((e.valOrDefault||t&&t.valOrDefault||i).call(t,null!=(s=null!=t?t.role:t)?s.shutdown_action:s,"-",{name:"valOrDefault",hash:{},data:n}))+"</td>\n          <td class='key_td'>"+r((e.tr||t&&t.tr||i).call(t,"Cooldown",{name:"tr",hash:{},data:n}))+"</td>\n          <td class='value_td'>"+r((e.valOrDefault||t&&t.valOrDefault||i).call(t,null!=(s=null!=t?t.role:t)?s.cooldown:s,"-",{name:"valOrDefault",hash:{},data:n}))+"</td>\n          <td class='key_td'>"+r((e.tr||t&&t.tr||i).call(t,"Min VMs",{name:"tr",hash:{},data:n}))+"</td>\n          <td class='value_td'>"+r((e.valOrDefault||t&&t.valOrDefault||i).call(t,null!=(s=null!=t?t.role:t)?s.min_vms:s,"-",{name:"valOrDefault",hash:{},data:n}))+"</td>\n          <td class='key_td'>"+r((e.tr||t&&t.tr||i).call(t,"Max VMs",{name:"tr",hash:{},data:n}))+"</td>\n          <td class='value_td'>"+r((e.valOrDefault||t&&t.valOrDefault||i).call(t,null!=(s=null!=t?t.role:t)?s.max_vms:s,"-",{name:"valOrDefault",hash:{},data:n}))+"</td>\n        </tr>\n      </tbody>\n    </table>\n    <br>\n  </div>\n";return s=e["if"].call(t,null!=t?t.servicePanel:t,{name:"if",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(l+=s),l+="  <div class='large-12 columns'>\n    <br>\n",s=e["if"].call(t,null!=(s=null!=t?t.role:t)?s.elasticity_policies:s,{name:"if",hash:{},fn:this.program(7,n),inverse:this.noop,data:n}),null!=s&&(l+=s),l+="    <br>\n",s=e["if"].call(t,null!=(s=null!=t?t.role:t)?s.scheduled_policies:s,{name:"if",hash:{},fn:this.program(16,n),inverse:this.noop,data:n}),null!=s&&(l+=s),l+"  </div>\n</form>"},useData:!0});return e.registerPartial("tabs/oneflow-services-tab/panels/roles/roleInfo",a),a}),define("tabs/oneflow-services-tab/panels/roles",["require","utils/locale","utils/tips","opennebula/role","./roles/roles-buttons","./roles/roles-vm-buttons","sunstone","utils/dom-datatable","tabs/vms-tab/utils/datatable-common","sunstone-config","tabs/vms-tab/tabId","hbs!./roles/html","hbs!./roles/roleInfo","../tabId","./roles/panelId"],function(t){function e(t){return this.title=r.tr("Roles"),this.icon="fa-wrench",this.element=t[g],this.selected_row_role_id=void 0,this.servicePanel=!0,this.panelId=v,this}function a(){var t=[],e=this.element.TEMPLATE.BODY.roles;return e&&e.length&&$.each(e,function(){t.push({name:this.name,state:l.state(this.state),cardinality:this.cardinality,vm_template:this.vm_template,parents:this.parents?this.parents.join(", "):"-"})}),_({element:this.element,panelId:this.panelId,servicePanel:this.servicePanel,roleList:t})}function n(t){var e=this;o.setup(t),e.last_selected_row_role=void 0;var a=this.element.TEMPLATE.BODY.roles;a&&a.length&&(this.servicerolesDataTable=new p("datatable_roles_"+this.panelId,{actions:!0,info:!1,oneSelection:!0,customTabContext:$("#role_actions",t),customTrListener:function(a,n){var s=a.dataTable.fnGetData(n),i=($(s[0]).val(),a.dataTable.fnGetPosition(n));$("#roles_extended_info",t).html(e.roleHTML(i)),e.roleSetup($("#roles_extended_info",t),i);var r=$(".check_item",n);r.is(":checked")||r.trigger("click")}}),this.servicerolesDataTable.initialize(),u.insertButtonsInTab("oneflow-services","service_roles_tab",c,$("#role_actions",t)))}function s(t){var e=this,a=this.element.TEMPLATE.BODY.roles[t],n=[];return a.nodes&&$.each(a.nodes,function(){var t=this.vm_info,a=[];a.push(this.scale_up?"<i class='fa fa-arrow-up'/>":this.disposed?"<i class='fa fa-arrow-down'/>":""),a.push(e.element.TEMPLATE.BODY.ready_status_gate?"YES"==t.VM.USER_TEMPLATE.READY?'<span data-tooltip class="has-tip" title="'+tr("The VM is ready")+'"><i class="fa fa-check"/></span>':'<span data-tooltip class="has-tip" title="'+tr("Waiting for the VM to be ready")+'"><i class="fa fa-clock-o"/></span>':""),n.push(t?a.concat(h.elementArray(t)):a.concat(h.emptyElementArray(this.deploy_id)))}),b({role:a,servicePanel:this.servicePanel,panelId:this.panelId,vmsTableColumns:h.columns,vms:n})}function i(t,e){if(this.servicePanel){var a=this.element.TEMPLATE.BODY.roles[e],n=[0,1].concat(f.tabTableColumns(m).map(function(t){return t+2}));this.serviceroleVMsDataTable=new p("datatable_vms_"+this.panelId+"_"+a.name,{actions:!0,info:!1,customTabContext:$("#role_vms_actions",t),dataTableOptions:{bAutoWidth:!1,bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:[0,1,"check"]},{bVisible:!0,aTargets:n},{bVisible:!1,aTargets:["_all"]}]}}),this.serviceroleVMsDataTable.initialize(),u.insertButtonsInTab("oneflow-services","service_roles_tab",d,$("div#role_vms_actions",t))}o.setup(t)}var r=t("utils/locale"),o=t("utils/tips"),l=t("opennebula/role"),c=t("./roles/roles-buttons"),d=t("./roles/roles-vm-buttons"),u=t("sunstone"),p=t("utils/dom-datatable"),h=t("tabs/vms-tab/utils/datatable-common"),f=t("sunstone-config"),m=t("tabs/vms-tab/tabId"),_=t("hbs!./roles/html"),b=t("hbs!./roles/roleInfo"),v=(t("../tabId"),t("./roles/panelId")),g="DOCUMENT";return e.PANEL_ID=v,e.prototype.html=a,e.prototype.setup=n,e.prototype.roleHTML=s,e.prototype.roleSetup=i,e}),define("tabs/oneflow-services-tab/panels/log/panelId",["require"],function(){return"service_log_tab"}),define("tabs/oneflow-services-tab/panels/log",["require","utils/locale","utils/humanize","../tabId","./log/panelId"],function(t){function e(t){return this.title=s.tr("Log"),this.icon="fa-file-text",this.element=t[o],this}function a(){var t=this.element.TEMPLATE.BODY.log,e="";if(t){e+='<div class="row"><div class="large-12 columns log-tab">';for(var a=0;a<t.length;a++){var n=i.prettyTime(t[a].timestamp)+" ["+t[a].severity+"] "+t[a].message+"<br>";"E"==t[a].severity&&(n='<span class="vm_log_error">'+n+"</span>"),e+=n}e+="</div></div>"}return e}function n(){}var s=t("utils/locale"),i=t("utils/humanize"),r=(t("../tabId"),t("./log/panelId")),o="DOCUMENT";return e.PANEL_ID=r,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/oneflow-services-tab",["require","utils/locale","./oneflow-services-tab/buttons","./oneflow-services-tab/actions","./oneflow-services-tab/datatable","./oneflow-services-tab/tabId","./oneflow-services-tab/dialogs/scale","./oneflow-services-tab/panels/info","./oneflow-services-tab/panels/roles","./oneflow-services-tab/panels/log"],function(t){var e=t("utils/locale"),a=t("./oneflow-services-tab/buttons"),n=t("./oneflow-services-tab/actions"),s=t("./oneflow-services-tab/datatable"),i=t("./oneflow-services-tab/tabId"),r="dataTableService",o="Service",l=[t("./oneflow-services-tab/dialogs/scale")],c=[t("./oneflow-services-tab/panels/info"),t("./oneflow-services-tab/panels/roles"),t("./oneflow-services-tab/panels/log")],d=[],u={tabId:i,title:e.tr("Services"),tabClass:"subTab",parentTab:"oneflow-dashboard",listHeader:'<i class="fa fa-fw fa-cubes"></i>&emsp;'+e.tr("OneFlow - Services"),infoHeader:'<i class="fa fa-fw fa-cubes"></i>&emsp;'+e.tr("OneFlow - Service"),subheader:"",content:'<div class="row oneflow_services_error_message" hidden>        <div class="small-6 columns small-centered text-center">            <div class="alert-box alert radius">'+e.tr("Cannot connect to OneFlow server")+"</div>        </div>    </div>",resource:o,buttons:a,actions:n,dataTable:new s(r,{actions:!0,info:!0}),panels:c,formPanels:d,dialogs:l};return u}),define("tabs/oneflow-templates-tab/buttons",["require","utils/locale"],function(t){var e=t("utils/locale"),a={"ServiceTemplate.refresh":{type:"action",layout:"refresh",alwaysActive:!0},"ServiceTemplate.create_dialog":{type:"create_dialog",layout:"create"},"ServiceTemplate.instantiate_dialog":{type:"action",layout:"main",text:e.tr("Instantiate")},"ServiceTemplate.update_dialog":{type:"action",layout:"main",text:e.tr("Update")},"ServiceTemplate.chown":{type:"confirm_with_select",text:e.tr("Change owner"),select:"User",layout:"user_select",tip:e.tr("Select the new owner")+":"},"ServiceTemplate.chgrp":{type:"confirm_with_select",text:e.tr("Change group"),select:"Group",layout:"user_select",tip:e.tr("Select the new group")+":"},"ServiceTemplate.delete":{type:"confirm",text:e.tr("Delete"),layout:"del",tip:e.tr("This will delete the selected templates")}};return a}),define("tabs/oneflow-templates-tab/tabId",["require"],function(){return"oneflow-templates"}),define("tabs/oneflow-templates-tab/form-panels/create/formPanelId",["require"],function(){return"createServiceTemplateForm"}),define("tabs/oneflow-templates-tab/form-panels/instantiate/formPanelId",["require"],function(){return"instantiateServiceTemplateForm"}),define("tabs/oneflow-templates-tab/actions",["require","sunstone","utils/notifier","utils/locale","opennebula/servicetemplate","utils/common-actions","opennebula/action","./tabId","./form-panels/create/formPanelId","./form-panels/instantiate/formPanelId"],function(t){var e=t("sunstone"),a=t("utils/notifier"),n=t("utils/locale"),s=t("opennebula/servicetemplate"),i=t("utils/common-actions"),r=t("opennebula/action"),o=t("./tabId"),l=t("./form-panels/create/formPanelId"),c=t("./form-panels/instantiate/formPanelId"),d="DOCUMENT",u="ServiceTemplate",p=new i(s,u,o),h={"ServiceTemplate.show":p.show(),"ServiceTemplate.refresh":p.refresh(),"ServiceTemplate.delete":p["delete"](),"ServiceTemplate.chown":p.multipleAction("chown"),"ServiceTemplate.chgrp":p.multipleAction("chgrp"),"ServiceTemplate.chmod":p.singleAction("chmod"),"ServiceTemplate.list":{type:"list",call:s.list,callback:function(t,a){$(".oneflow_templates_error_message").hide(),e.getDataTable(o).updateView(t,a)},error:function(t,e){a.onError(t,e,$(".oneflow_templates_error_message"))}},"ServiceTemplate.create":{type:"create",call:s.create,callback:function(t,a){e.resetFormPanel(o,l),e.hideFormPanel(o),e.getDataTable(o).addElement(t,a)},error:function(t,n){e.hideFormPanelLoading(o),a.onError(t,n)}},"ServiceTemplate.create_dialog":{type:"custom",call:function(){e.showFormPanel(o,l,"create")}},"ServiceTemplate.update_dialog":{type:"custom",call:function(){var t=e.getDataTable(o).elements();if(1!=t.length)return a.notifyMessage("Please select one (and just one) template to update."),!1;var n=""+t[0];e.runAction(u+".show_to_update",n)}},"ServiceTemplate.show_to_update":{type:"single",call:s.show,callback:function(t,a){e.showFormPanel(o,l,"update",function(t,e){t.fill(e,a[d])})},error:a.onError},"ServiceTemplate.update":{type:"single",call:s.update,callback:function(){e.hideFormPanel(o),a.notifyMessage(n.tr("ServiceTemplate updated correctly"))},error:function(t,n){e.hideFormPanelLoading(o),a.onError(t,n)}},"ServiceTemplate.instantiate":{type:"multiple",call:s.instantiate,callback:function(){e.hideFormPanel(o),r.clear_cache("SERVICE")},elements:function(){return e.getDataTable(o).elements()},error:function(t,n){e.hideFormPanelLoading(o),a.onError(t,n)},notify:!0},"ServiceTemplate.instantiate_dialog":{type:"custom",call:function(){var t=e.getDataTable(o).elements();return 1!=t.length?(a.notifyMessage("Please select one (and just one) template to instantiate."),!1):(e.resetFormPanel(o,c),void e.showFormPanel(o,c,"instantiate"))}}};return h}),define("tabs/oneflow-templates-tab/datatable",["require","utils/tab-datatable","sunstone-config","utils/locale","./tabId"],function(t){function e(t,e){this.conf=e||{},this.tabId=l,this.dataTableId=t,this.resource=r,this.xmlRoot=o,this.dataTableOptions={bAutoWidth:!1,bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:["check"]},{sWidth:"35px",aTargets:[0]},{bVisible:!0,aTargets:s.tabTableColumns(l)},{bVisible:!1,aTargets:["_all"]}]},this.columns=[i.tr("ID"),i.tr("Owner"),i.tr("Group"),i.tr("Name")],this.selectOptions={id_index:1,name_index:4,select_resource:i.tr("Please select a Template from the list"),you_selected:i.tr("You selected the following Template:"),select_resource_multiple:i.tr("Please select one or more Templates from the list"),you_selected_multiple:i.tr("You selected the following Templates:")},n.call(this)}function a(t){var e=t[o];return['<input class="check_item" type="checkbox" id="'+r.toLowerCase()+"_"+e.ID+'" name="selected_items" value="'+e.ID+'"/>',e.ID,e.UNAME,e.GNAME,e.NAME]}var n=t("utils/tab-datatable"),s=t("sunstone-config"),i=t("utils/locale"),r="ServiceTemplate",o="DOCUMENT",l=t("./tabId");return e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.elementArray=a,e}),define("hbs!tabs/oneflow-templates-tab/panels/info/html",["hbs","hbs/handlebars","templates/helpers/tr","templates/helpers/valOrDefault"],function(t,e){var a=e.template({1:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return"            "+i((e.tr||t&&t.tr||s).call(t,"yes",{name:"tr",hash:{},data:n}))+"\n"},3:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return"            "+i((e.tr||t&&t.tr||s).call(t,"no",{name:"tr",hash:{},data:n}))+"\n"},5:function(t,e,a,n){var s,i=e.helperMissing,r=this.escapeExpression,o='    <table id="info_template_table" class="dataTable extended_table">\n      <thead>\n        <tr>\n          <th colspan="2">'+r((e.tr||t&&t.tr||i).call(t,"Network Configuration",{name:"tr",hash:{},data:n}))+"</th>\n        </tr>\n      </thead>\n";return s=e.each.call(t,null!=t?t.customAttrs:t,{name:"each",hash:{},fn:this.program(6,n),inverse:this.noop,data:n}),null!=s&&(o+=s),o+"    </table>\n"},6:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'      <tr>\n        <td class="key_td">'+o((s=null!=(s=e.name||(null!=t?t.name:t))?s:r,typeof s===i?s.call(t,{name:"name",hash:{},data:n}):s))+'</td>\n        <td class="value_td">'+o((s=null!=(s=e.description||(null!=t?t.description:t))?s:r,typeof s===i?s.call(t,{name:"description",hash:{},data:n}):s))+'</td>\n      </tr>\n      <tr>\n        <td class="key_td"></td>\n        <td class="value_td">'+o((e.tr||t&&t.tr||r).call(t,"Roles",{name:"tr",hash:{},data:n}))+": "+o((s=null!=(s=e.roles||(null!=t?t.roles:t))?s:r,typeof s===i?s.call(t,{name:"roles",hash:{},data:n}):s))+"</td>\n      </tr>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l=this.lambda,c="function",d='<div class="row">\n  <div class="large-6 columns">\n    <table class="dataTable extended_table">\n      <thead>\n        <tr>\n          <th colspan="2">'+o((e.tr||t&&t.tr||r).call(t,"Information",{name:"tr",hash:{},data:n}))+'</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"ID",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td" colspan="2">'+o(l(null!=(s=null!=t?t.element:t)?s.ID:s,t))+'</td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Name",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td" colspan="2">'+o(l(null!=(s=null!=t?t.element:t)?s.NAME:s,t))+'</td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Description",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td" colspan="2">'+o(l(null!=(s=null!=(s=null!=(s=null!=t?t.element:t)?s.TEMPLATE:s)?s.BODY:s)?s.description:s,t))+'</td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Strategy",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">'+o(l(null!=(s=null!=(s=null!=(s=null!=t?t.element:t)?s.TEMPLATE:s)?s.BODY:s)?s.deployment:s,t))+'</td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Shutdown action",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">\n            '+o((e.valOrDefault||t&&t.valOrDefault||r).call(t,null!=(s=null!=(s=null!=(s=null!=t?t.element:t)?s.TEMPLATE:s)?s.BODY:s)?s.shutdown_action:s,"-",{name:"valOrDefault",hash:{},data:n}))+'\n          </td>\n        </tr>\n        <tr>\n          <td class="key_td">'+o((e.tr||t&&t.tr||r).call(t,"Ready Status Gate",{name:"tr",hash:{},data:n}))+'</td>\n          <td class="value_td">\n';return s=e["if"].call(t,null!=(s=null!=(s=null!=(s=null!=t?t.element:t)?s.TEMPLATE:s)?s.BODY:s)?s.ready_status_gate:s,{name:"if",hash:{},fn:this.program(1,n),inverse:this.program(3,n),data:n}),null!=s&&(d+=s),d+="          </td>\n        </tr>\n      </tbody>\n    </table>\n",s=e["if"].call(t,null!=t?t.customAttrs:t,{name:"if",hash:{},fn:this.program(5,n),inverse:this.noop,data:n}),null!=s&&(d+=s),d+='  </div>\n  <div class="large-6 columns">',i=null!=(i=e.permissionsTableHTML||(null!=t?t.permissionsTableHTML:t))?i:r,s=typeof i===c?i.call(t,{name:"permissionsTableHTML",hash:{},data:n}):i,null!=s&&(d+=s),d+"</div>\n</div>"},useData:!0});return e.registerPartial("tabs/oneflow-templates-tab/panels/info/html",a),a}),define("tabs/oneflow-templates-tab/panels/info/panelId",["require"],function(){return"service_template_info_tab"}),define("tabs/oneflow-templates-tab/panels/info",["require","utils/locale","utils/panel/permissions-table","utils/template-utils","hbs!./info/html","../tabId","./info/panelId"],function(t){function e(t){return this.title=s.tr("Info"),this.icon="fa-info-circle",this.element=t[d],this}function a(){var t=this,e=i.html(l,u,this.element),a=[];return $.isEmptyObject(this.element.TEMPLATE.BODY.custom_attrs)||$.each(this.element.TEMPLATE.BODY.custom_attrs,function(e,n){var s=n.split("|"),i=[];switch(s[1]){case"vnet_id":$.each(t.element.TEMPLATE.BODY.roles,function(t,a){if(a.vm_template_contents){var n=new RegExp("\\$"+r.htmlDecode(e)+"\\b");null!=n.exec(a.vm_template_contents)&&i.push(a.name)}})}a.push({name:e,mandatory:s[0],type:s[1],description:s[2],roles:i.join(", ")})}),o({element:this.element,permissionsTableHTML:e,customAttrs:a})}function n(t){i.setup(l,u,this.element,t)}var s=t("utils/locale"),i=t("utils/panel/permissions-table"),r=t("utils/template-utils"),o=t("hbs!./info/html"),l=t("../tabId"),c=t("./info/panelId"),d="DOCUMENT",u="ServiceTemplate";return e.PANEL_ID=c,e.prototype.html=a,e.prototype.setup=n,e}),define("tabs/oneflow-templates-tab/panels/roles/panelId",["require"],function(){return"service_template_roles_tab"}),define("tabs/oneflow-templates-tab/panels/roles",["require","tabs/oneflow-services-tab/panels/roles","./roles/panelId"],function(t){function e(t){return a.call(this,t),this.servicePanel=!1,this.panelId=n,this}var a=t("tabs/oneflow-services-tab/panels/roles"),n=t("./roles/panelId");return e.PANEL_ID=n,e.prototype=Object.create(a.prototype),e.prototype.constructor=e,e}),define("hbs!tabs/oneflow-templates-tab/utils/role-tab/html",["hbs","hbs/handlebars","templates/helpers/tr","templates/helpers/advancedSection"],function(t,e){var a=e.template({1:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'    <div class="row">\n      <div class="large-4 columns">\n        <label for="min_vms">'+i((e.tr||t&&t.tr||s).call(t,"Min VMs",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">'+i((e.tr||t&&t.tr||s).call(t,"Minimum number of VMs for elasticity adjustments",{name:"tr",hash:{},data:n}))+'</span>\n        </label>\n        <input type="text" id="min_vms" name="min_vms" value="" />\n      </div>\n      <div class="large-4 columns">\n        <label for="max_vms">'+i((e.tr||t&&t.tr||s).call(t,"Max VMs",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">'+i((e.tr||t&&t.tr||s).call(t,"Maximum number of VMs for elasticity adjustments",{name:"tr",hash:{},data:n}))+'</span>\n        </label>\n        <input type="text" id="max_vms" name="max_vms" value="" />\n      </div>\n      <div class="service_template_param service_role large-4 columns">\n        <label for="cooldown">'+i((e.tr||t&&t.tr||s).call(t,"Cooldown",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">'+i((e.tr||t&&t.tr||s).call(t,"Cooldown time after an elasticity operation (secs)",{name:"tr",hash:{},data:n}))+'</span>\n        </label>\n        <input type="text" id="cooldown" name="cooldown" value="" />\n      </div>\n    </div>\n    <div class="row">\n      <div class="large-12 columns">\n        <table id="elasticity_policies_table" class="policies_table dataTable">\n          <thead style="background:#dfdfdf">\n            <tr>\n              <th colspan="8" style="font-size: 16px !important">\n                '+i((e.tr||t&&t.tr||s).call(t,"Elasticity policies",{name:"tr",hash:{},data:n}))+'\n              </th>\n            </tr>\n          </thead>\n          <thead>\n            <tr>\n              <th class="has-tip" data-tooltip title="'+i((e.tr||t&&t.tr||s).call(t,"Type of adjustment.",{name:"tr",hash:{},data:n}))+"<br><br>\n                "+i((e.tr||t&&t.tr||s).call(t,"CHANGE: Add/substract the given number of VMs.",{name:"tr",hash:{},data:n}))+"<br>\n                "+i((e.tr||t&&t.tr||s).call(t,"CARDINALITY: Set the cardinality to the given number.",{name:"tr",hash:{},data:n}))+"<br>\n                "+i((e.tr||t&&t.tr||s).call(t,"PERCENTAGE_CHANGE: Add/substract the given percentage to the current cardinality.",{name:"tr",hash:{},data:n}))+'\n                " style="width:14%">'+i((e.tr||t&&t.tr||s).call(t,"Type",{name:"tr",hash:{},data:n}))+'\n              </th>\n              <th class="has-tip" data-tooltip title="'+i((e.tr||t&&t.tr||s).call(t,"Positive or negative adjustment. Its meaning depends on 'type'",{name:"tr",hash:{},data:n}))+"<br><br>\n                "+i((e.tr||t&&t.tr||s).call(t,"CHANGE: -2, will substract 2 VMs from the role",{name:"tr",hash:{},data:n}))+"<br>\n                "+i((e.tr||t&&t.tr||s).call(t,"CARDINALITY: 8, will set carditanilty to 8",{name:"tr",hash:{},data:n}))+"<br>\n                "+i((e.tr||t&&t.tr||s).call(t,"PERCENTAGE_CHANGE: 20, will increment cardinality by 20%",{name:"tr",hash:{},data:n}))+'" style="width:12%">'+i((e.tr||t&&t.tr||s).call(t,"Adjust",{name:"tr",hash:{},data:n}))+'\n              </th>\n              <th class="has-tip" data-tooltip title="'+i((e.tr||t&&t.tr||s).call(t,"Optional parameter for PERCENTAGE_CHANGE adjustment type.",{name:"tr",hash:{},data:n}))+"<br>\n                "+i((e.tr||t&&t.tr||s).call(t," If present, the policy will change the cardinality by at least the number of VMs set in this attribute.",{name:"tr",hash:{},data:n}))+'" style="width:9%">'+i((e.tr||t&&t.tr||s).call(t,"Min",{name:"tr",hash:{},data:n}))+'\n              </th>\n              <th class="has-tip" data-tooltip title="'+i((e.tr||t&&t.tr||s).call(t,"Expression to trigger the elasticity",{name:"tr",hash:{},data:n}))+"<br><br>\n                "+i((e.tr||t&&t.tr||s).call(t,"Example: ATT < 20",{name:"tr",hash:{},data:n}))+'" style="width:30%">'+i((e.tr||t&&t.tr||s).call(t,"Expression",{name:"tr",hash:{},data:n}))+'\n              </th>\n              <th class="has-tip" data-tooltip title="'+i((e.tr||t&&t.tr||s).call(t,"Number of periods that the expression must be true before the elasticity is triggered",{name:"tr",hash:{},data:n}))+'" style="width:8%">#\n              </th>\n              <th class="has-tip" data-tooltip title="'+i((e.tr||t&&t.tr||s).call(t,"Duration, in seconds, of each period in '# Periods'",{name:"tr",hash:{},data:n}))+'" style="width:9%">'+i((e.tr||t&&t.tr||s).call(t,"Period",{name:"tr",hash:{},data:n}))+'\n              </th>\n              <th class="has-tip" data-tooltip title="'+i((e.tr||t&&t.tr||s).call(t,"Cooldown period duration after a scale operation, in seconds",{name:"tr",hash:{},data:n}))+'" style="width:15%">'+i((e.tr||t&&t.tr||s).call(t,"Cooldown",{name:"tr",hash:{},data:n}))+'\n              </th>\n              <th style="width:3%"></th>\n            </tr>\n          </thead>\n          <tbody id="elasticity_policies_tbody">\n          </tbody>\n          <tfoot>\n            <tr>\n              <td colspan="8">\n                <a type="button" class="button small radius right" id="tf_btn_elas_policies"><i class="fa fa-plus"></i> '+i((e.tr||t&&t.tr||s).call(t,"Add another policy",{name:"tr",hash:{},data:n}))+'</a>\n              </td>\n            </tr>\n          </tfoot>\n        </table>\n      </div>\n    </div>\n    <br>\n    <div class="row">\n      <div class="large-12 columns">\n        <table id="scheduled_policies_table" class="policies_table dataTable">\n          <thead style="background:#dfdfdf">\n            <tr>\n              <th colspan="6" style="font-size: 16px !important">\n                '+i((e.tr||t&&t.tr||s).call(t,"Scheduled policies",{name:"tr",hash:{},data:n}))+'\n              </th>\n            </tr>\n          </thead>\n          <thead>\n            <tr>\n              <th class="has-tip" data-tooltip title="'+i((e.tr||t&&t.tr||s).call(t,"Type of adjustment.",{name:"tr",hash:{},data:n}))+"<br><br>\n                "+i((e.tr||t&&t.tr||s).call(t,"CHANGE: Add/substract the given number of VMs.",{name:"tr",hash:{},data:n}))+"<br>\n                "+i((e.tr||t&&t.tr||s).call(t,"CARDINALITY: Set the cardinality to the given number.",{name:"tr",hash:{},data:n}))+"<br>\n                "+i((e.tr||t&&t.tr||s).call(t,"PERCENTAGE_CHANGE: Add/substract the given percentage to the current cardinality.",{name:"tr",hash:{},data:n}))+'" style="width:14%">'+i((e.tr||t&&t.tr||s).call(t,"Type",{name:"tr",hash:{},data:n}))+'\n              </th>\n              <th class="has-tip" data-tooltip title="'+i((e.tr||t&&t.tr||s).call(t,"Positive or negative adjustment. Its meaning depends on 'type'",{name:"tr",hash:{},data:n}))+"<br><br>\n                "+i((e.tr||t&&t.tr||s).call(t,"CHANGE: -2, will substract 2 VMs from the role",{name:"tr",hash:{},data:n}))+"<br>\n                "+i((e.tr||t&&t.tr||s).call(t,"CARDINALITY: 8, will set carditanilty to 8",{name:"tr",hash:{},data:n}))+"<br>\n                "+i((e.tr||t&&t.tr||s).call(t,"PERCENTAGE_CHANGE: 20, will increment cardinality by 20%",{name:"tr",hash:{},data:n}))+'" style="width:12%">'+i((e.tr||t&&t.tr||s).call(t,"Adjust",{name:"tr",hash:{},data:n}))+'\n              </th>\n              <th class="has-tip" data-tooltip title="'+i((e.tr||t&&t.tr||s).call(t,"Optional parameter for PERCENTAGE_CHANGE adjustment type. If present, the policy will change the cardinality by at least the number of VMs set in this attribute.",{name:"tr",hash:{},data:n}))+'" style="width:9%">'+i((e.tr||t&&t.tr||s).call(t,"Min",{name:"tr",hash:{},data:n}))+'\n              </th>\n              <th class="has-tip" data-tooltip title="'+i((e.tr||t&&t.tr||s).call(t,"Recurrence: Time for recurring adjustements. Time is specified with the Unix cron syntax",{name:"tr",hash:{},data:n}))+"<br><br>\n                "+i((e.tr||t&&t.tr||s).call(t,"Start time: Exact time for the adjustement",{name:"tr",hash:{},data:n}))+'" style="width:28%">'+i((e.tr||t&&t.tr||s).call(t,"Time format",{name:"tr",hash:{},data:n}))+'\n              </th>\n              <th class="has-tip" data-tooltip title="'+i((e.tr||t&&t.tr||s).call(t,"Time expression depends on the the time formar selected",{name:"tr",hash:{},data:n}))+"<br><br>\n                "+i((e.tr||t&&t.tr||s).call(t,"Recurrence: Time for recurring adjustements. Time is specified with the Unix cron syntax",{name:"tr",hash:{},data:n}))+"<br>\n                "+i((e.tr||t&&t.tr||s).call(t,"Start time: Exact time for the adjustement",{name:"tr",hash:{},data:n}))+'" style="width:33%">'+i((e.tr||t&&t.tr||s).call(t,"Time expression",{name:"tr",hash:{},data:n}))+'\n              </th>\n              <th style="width:3%"></th>\n            </tr>\n          </thead>\n          <tbody id="scheduled_policies_tbody">\n          </tbody>\n          <tfoot>\n            <tr>\n              <td colspan="6">\n                <a type="button" class="button small radius right" id="tf_btn_sche_policies"><i class="fa fa-plus"></i> '+i((e.tr||t&&t.tr||s).call(t,"Add another policy",{name:"tr",hash:{},data:n}))+"</a>\n              </td>\n            </tr>\n          </tfoot>\n        </table>\n      </div>\n    </div>\n"
},3:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'    <div class="row">\n      <div class="service_template_param service_role large-6 columns">\n        <label for="shutdown_action_role">'+i((e.tr||t&&t.tr||s).call(t,"Shutdown action",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">'+i((e.tr||t&&t.tr||s).call(t,"VM shutdown action: 'shutdown' or 'shutdown-hard'. If it is not set, the one set for the Service will be used",{name:"tr",hash:{},data:n}))+'</span>\n        </label>\n        <select name="shutdown_action_role">\n          <option value=""></option>\n          <option value="shutdown">'+i((e.tr||t&&t.tr||s).call(t,"Shutdown",{name:"tr",hash:{},data:n}))+'</option>\n          <option value="shutdown-hard">'+i((e.tr||t&&t.tr||s).call(t,"Shutdown hard",{name:"tr",hash:{},data:n}))+'</option>\n        </select>\n      </div>\n      <div class="large-6 columns">\n      </div>\n    </div>\n    <div class="row">\n      <div class="service_template_param st_man large-12 columns">\n        <label  for="vm_template_contents">'+i((e.tr||t&&t.tr||s).call(t,"VM Template Content",{name:"tr",hash:{},data:n}))+'\n          <span class="tip">'+i((e.tr||t&&t.tr||s).call(t,"This information will be merged with the original Virtual Machine template. Configuration attributes and network interfaces will be replaced by those provided by the user when the template is instantiated",{name:"tr",hash:{},data:n}))+'</span>\n        </label>\n        <textarea type="text" class="vm_template_contents" name="vm_template_contents"/>\n      </div>\n    </div>\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=e.helperMissing,o=this.escapeExpression,l="function",c='<div class="row">\n  <div class="service_template_param service_role st_man large-6 columns">\n    <label for="name">'+o((e.tr||t&&t.tr||r).call(t,"Role Name",{name:"tr",hash:{},data:n}))+'\n      <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Name of the role",{name:"tr",hash:{},data:n}))+'</span>\n    </label>\n    <input type="text" id="role_name" name="name" required/>\n  </div>\n  <div class="service_template_param service_role large-2 columns end">\n    <label for="cardinality">'+o((e.tr||t&&t.tr||r).call(t,"VMs",{name:"tr",hash:{},data:n}))+'\n      <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Number of VMs to instantiate with this role",{name:"tr",hash:{},data:n}))+'</span>\n    </label>\n    <input type="text" id="cardinality" name="cardinality" value="1"/>\n  </div>\n</div>\n<div class="row">\n  <div class="service_template_param service_role small-12 columns">\n    <label for="vm_template">'+o((e.tr||t&&t.tr||r).call(t,"VM template",{name:"tr",hash:{},data:n}))+'\n      <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Template associated to this role",{name:"tr",hash:{},data:n}))+"</span>\n    </label>\n    ";return i=null!=(i=e.templatesTableHTML||(null!=t?t.templatesTableHTML:t))?i:r,s=typeof i===l?i.call(t,{name:"templatesTableHTML",hash:{},data:n}):i,null!=s&&(c+=s),c+='\n    <div id="vm_template">\n    </div>\n  </div>\n</div>\n<div class="row">\n  <div class="service_template_param service_role large-6 columns">\n    <table class="networks_role extended_table dataTable">\n      <thead>\n        <tr>\n          <th colspan="2">\n            <i class="fa fa-lg fa-fw fa-globe off-color"/>'+o((e.tr||t&&t.tr||r).call(t,"Network Interfaces",{name:"tr",hash:{},data:n}))+'\n          </th>\n        </tr>\n      </thead>\n      <tbody class="networks_role_body">\n      </tbody>\n    </table>\n  </div>\n  <div class="service_template_param service_role large-6 columns">\n    <table class="parent_roles extended_table dataTable">\n      <thead>\n        <tr>\n          <th colspan="2">\n            '+o((e.tr||t&&t.tr||r).call(t,"Parent roles",{name:"tr",hash:{},data:n}))+'\n          </th>\n        </tr>\n      </thead>\n      <tbody class="parent_roles_body">\n      </tbody>\n    </table>\n  </div>\n</div>\n<br>\n<div class="row">\n  <div class="large-12 columns elasticity_accordion">\n',s=(e.advancedSection||t&&t.advancedSection||r).call(t,(e.tr||t&&t.tr||r).call(t,"Role Elasticity",{name:"tr",hash:{},data:n}),{name:"advancedSection",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+='  </div>\n</div>\n<br>\n<div class="row">\n  <div class="large-12 columns advanced_role_accordion">\n',s=(e.advancedSection||t&&t.advancedSection||r).call(t,(e.tr||t&&t.tr||r).call(t,"Advanced Role Parameters",{name:"tr",hash:{},data:n}),{name:"advancedSection",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+"  </div>\n</div>"},useData:!0});return e.registerPartial("tabs/oneflow-templates-tab/utils/role-tab/html",a),a}),define("hbs!tabs/oneflow-templates-tab/utils/role-tab/elasticity-row",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<tr>\n  <td>\n    <select id="type" name="type">\n      <option value=""></option>\n      <option value="CHANGE">'+i((e.tr||t&&t.tr||s).call(t,"Change",{name:"tr",hash:{},data:n}))+'</option>\n      <option value="CARDINALITY">'+i((e.tr||t&&t.tr||s).call(t,"Cardinality",{name:"tr",hash:{},data:n}))+'</option>\n      <option value="PERCENTAGE_CHANGE">'+i((e.tr||t&&t.tr||s).call(t,"Percentage",{name:"tr",hash:{},data:n}))+'</option>\n    </select>\n  </td>\n  <td>\n    <input type="text" id="adjust" name="adjust"/>\n  </td>\n  <td id="min_adjust_step_td">\n  </td>\n  <td>\n    <input type="text" id="expression" name="expression"/>\n  </td>\n  <td>\n    <input type="text" id="period_number" name="period_number"/>\n  </td>\n  <td>\n    <input type="text" id="period" name="period"/>\n  </td>\n  <td>\n    <input type="text" id="cooldown" name="cooldown"/>\n  </td>\n  <td>\n    <a href="#"><i class="fa fa-times-circle remove-tab"></i></a>\n  </td>\n</tr>'},useData:!0});return e.registerPartial("tabs/oneflow-templates-tab/utils/role-tab/elasticity-row",a),a}),define("hbs!tabs/oneflow-templates-tab/utils/role-tab/sche-row",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'<tr>\n  <td>\n    <select id="type" name="type">\n      <option value=""></option>\n      <option value="CHANGE">'+i((e.tr||t&&t.tr||s).call(t,"Change",{name:"tr",hash:{},data:n}))+'</option>\n      <option value="CARDINALITY">'+i((e.tr||t&&t.tr||s).call(t,"Cardinality",{name:"tr",hash:{},data:n}))+'</option>\n      <option value="PERCENTAGE_CHANGE">'+i((e.tr||t&&t.tr||s).call(t,"Percentage",{name:"tr",hash:{},data:n}))+'</option>\n    </select>\n  </td>\n  <td>\n    <input type="text" id="adjust" name="adjust"/>\n  </td>\n  <td id="min_adjust_step_td">\n  </td>\n  <td>\n    <select id="time_format" name="time_format">\n      <option value="start_time">'+i((e.tr||t&&t.tr||s).call(t,"Start time",{name:"tr",hash:{},data:n}))+'</option>\n      <option value="recurrence">'+i((e.tr||t&&t.tr||s).call(t,"Recurrence",{name:"tr",hash:{},data:n}))+'</option>\n    </select>\n  </td>\n  <td>\n    <input type="text" id="time" name="time"/>\n  </td>\n  <td>\n    <a href="#"><i class="fa fa-times-circle remove-tab"></i></a>\n  </td>\n</tr>'},useData:!0});return e.registerPartial("tabs/oneflow-templates-tab/utils/role-tab/sche-row",a),a}),define("tabs/oneflow-templates-tab/utils/role-tab",["require","utils/locale","utils/tips","tabs/templates-tab/datatable","utils/template-utils","hbs!./role-tab/html","hbs!./role-tab/elasticity-row","hbs!./role-tab/sche-row"],function(t){function a(t){return this.html_role_id=t,this}function n(){var t={info:!1,select:!0};return this.templatesTable=new d("roleTabTemplates"+this.html_role_id,t),p({templatesTableHTML:this.templatesTable.dataTableHTML})}function s(t){var e=this;c.setup(t),this.templatesTable.initialize(),this.templatesTable.idInput().attr("required",""),t.on("change","#role_name",function(){$("#"+e.html_role_id+" #role_name_text").html($(this).val())}),t.on("change","select#type",function(){var t=$(this).closest("tr");"PERCENTAGE_CHANGE"==$(this).val()?$("#min_adjust_step_td",t).html('<input type="text" id="min_adjust_step" name="min_adjust_step"/>'):$("#min_adjust_step_td",t).empty()}),$("#tf_btn_elas_policies",t).bind("click",function(){$(h({})).appendTo($("#elasticity_policies_tbody",t))}),t.on("click","#elasticity_policies_table i.remove-tab",function(){var t=$(this).closest("tr");t.remove()}),$("#tf_btn_sche_policies",t).bind("click",function(){$(f({})).appendTo($("#scheduled_policies_tbody",t))}),t.on("click","#scheduled_policies_table i.remove-tab",function(){var t=$(this).closest("tr");t.remove()}),$("#tf_btn_elas_policies",t).trigger("click"),$("#tf_btn_sche_policies",t).trigger("click"),t.on("change",".service_network_checkbox",function(){var e="";$(".service_network_checkbox:checked",t).each(function(){e+='NIC=[NETWORK_ID="$'+$(this).val()+'"]\n'}),$(".vm_template_contents",t).val(e)})}function i(){this.templatesTable.refreshResourceTableSelect()}function r(t){var e={};e.name=$('input[name="name"]',t).val(),e.cardinality=$('input[name="cardinality"]',t).val(),e.vm_template=this.templatesTable.retrieveResourceTableSelect(),e.shutdown_action=$('select[name="shutdown_action_role"]',t).val(),e.parents=[],e.vm_template_contents=$(".vm_template_contents",t).val(),$(".parent_roles_body input.check_item:checked",t).each(function(){e.parents.push($(this).val())});var a=$('select[name="shutdown_action_role"]',t).val();a&&(e.shutdown_action=a);var n=$('input[name="min_vms"]',t).val();n&&(e.min_vms=n);var s=$('input[name="max_vms"]',t).val();s&&(e.max_vms=s);var i=$('input[name="cooldown"]',t).val();return i&&(e.cooldown=i),e=l(e),e.elasticity_policies=[],$("#elasticity_policies_tbody tr",t).each(function(){if($("#type",this).val()){var t={};t.type=$("#type",this).val(),t.adjust=$("#adjust",this).val(),t.min_adjust_step=$("#min_adjust_step",this).val(),t.expression=$("#expression",this).val(),t.period_number=$("#period_number",this).val(),t.period=$("#period",this).val(),t.cooldown=$("#cooldown",this).val(),e.elasticity_policies.push(l(t))}}),e.scheduled_policies=[],$("#scheduled_policies_tbody tr",t).each(function(){if($("#type",this).val()){var t={};t.type=$("#type",this).val(),t.adjust=$("#adjust",this).val(),t.min_adjust_step=$("#min_adjust_step",this).val();var a=$("#time_format",this).val();t[a]=$("#time",this).val(),e.scheduled_policies.push(l(t))}}),e}function o(t,e,a){$("#role_name",t).val(u.htmlDecode(e.name)),$("#role_name",t).change(),$("#cardinality",t).val(u.htmlDecode(e.cardinality)),this.templatesTable.selectResourceTableSelect({ids:e.vm_template}),e.vm_template_contents&&($(a).each(function(){var a=new RegExp("\\$"+this+"\\b");null!=a.exec(e.vm_template_contents)&&$(".service_network_checkbox[value='"+this+"']",t).attr("checked",!0).change()}),$(".vm_template_contents",t).val(u.htmlDecode(e.vm_template_contents))),$("select[name='shutdown_action_role']",t).val(e.shutdown_action),$("#min_vms",t).val(u.htmlDecode(e.min_vms)),$("#max_vms",t).val(u.htmlDecode(e.max_vms)),$("#cooldown",t).val(u.htmlDecode(e.cooldown)),(e.elasticity_policies.length>0||e.scheduled_policies.length>0)&&$("div.elasticity_accordion a.accordion_advanced_toggle",t).trigger("click"),$("#elasticity_policies_table i.remove-tab",t).trigger("click"),$("#scheduled_policies_table i.remove-tab",t).trigger("click"),e.elasticity_policies&&$.each(e.elasticity_policies,function(){$("#tf_btn_elas_policies",t).click();var e=$("#elasticity_policies_tbody tr",t).last();$("#type",e).val(u.htmlDecode(this.type)),$("#type",e).change(),$("#adjust",e).val(u.htmlDecode(this.adjust)),$("#min_adjust_step",e).val(u.htmlDecode(this.min_adjust_step||"")),$("#expression",e).val(u.htmlDecode(this.expression)),$("#period_number",e).val(u.htmlDecode(this.period_number||"")),$("#period",e).val(u.htmlDecode(this.period||"")),$("#cooldown",e).val(u.htmlDecode(this.cooldown||""))}),e.scheduled_policies&&$.each(e.scheduled_policies,function(){$("#tf_btn_sche_policies",t).click();var e=$("#scheduled_policies_tbody tr",t).last();$("#type",e).val(u.htmlDecode(this.type)),$("#type",e).change(),$("#adjust",e).val(u.htmlDecode(this.adjust)),$("#min_adjust_step",e).val(u.htmlDecode(this.min_adjust_step||"")),this.start_time?($("#time_format",e).val("start_time"),$("#time",e).val(u.htmlDecode(this.start_time))):this.recurrence&&($("#time_format",e).val("recurrence"),$("#time",e).val(u.htmlDecode(this.recurrence)))})}function l(t){for(var a in t){var n=!1,s=t[a];if(s instanceof Array)0==s.length?n=!0:s.length>0&&(s=jQuery.grep(s,function(t){var a=0;for(e in t)a+=1;return 0==a?!1:!0}),0==s.length&&(n=!0));else if(s instanceof Object){var i=0;for(e in s)i+=1;0==i&&(n=!0)}else s=String(s),0==s.length&&(n=!0);n&&delete t[a]}return t}var c=(t("utils/locale"),t("utils/tips")),d=t("tabs/templates-tab/datatable"),u=t("utils/template-utils"),p=t("hbs!./role-tab/html"),h=t("hbs!./role-tab/elasticity-row"),f=t("hbs!./role-tab/sche-row");return a.prototype={html:n,setup:s,onShow:i,retrieve:r,fill:o},a.prototype.constructor=a,a}),define("hbs!tabs/oneflow-templates-tab/form-panels/create/wizard",["hbs","hbs/handlebars","templates/helpers/tr","templates/helpers/advancedSection"],function(t,e){var a=e.template({1:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'    <div class="row">\n      <div class="large-12 columns">\n        <table class="service_networks policies_table dataTable">\n          <thead>\n            <tr>\n              <th style="width:30%">'+i((e.tr||t&&t.tr||s).call(t,"Name",{name:"tr",hash:{},data:n}))+'</th>\n              <th style="width:70%">'+i((e.tr||t&&t.tr||s).call(t,"Description",{name:"tr",hash:{},data:n}))+'</th>\n              <th style="width:3%"></th>\n            </tr>\n          </thead>\n          <tbody>\n          </tbody>\n          <tfoot>\n            <tr>\n              <td colspan="3">\n                <a type="button" class="add_service_network button small large-12 secondary radius"><i class="fa fa-plus"></i>'+i((e.tr||t&&t.tr||s).call(t,"Add another Network",{name:"tr",hash:{},data:n}))+"</a>\n              </td>\n            </tr>\n          </tfoot>\n        </table>\n      </div>\n    </div>\n"},3:function(t,e,a,n){var s=e.helperMissing,i=this.escapeExpression;return'  <div class="row">\n    <div class="service_template_param st_man large-6 columns">\n      <label for="deployment">\n        '+i((e.tr||t&&t.tr||s).call(t,"Strategy",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">'+i((e.tr||t&&t.tr||s).call(t,"Straight strategy will instantiate each role in order: parents role will be deployed before their children. None strategy will instantiate the roles regardless of their relationships.",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n      <select name="deployment">\n        <option value="straight">'+i((e.tr||t&&t.tr||s).call(t,"Straight",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="none">'+i((e.tr||t&&t.tr||s).call(t,"None",{name:"tr",hash:{},data:n}))+'</option>\n      </select>\n    </div>\n    <div class="service_template_param st_man large-6 columns">\n      <label for="shutdown_action_service">\n        '+i((e.tr||t&&t.tr||s).call(t,"Shutdown action",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">'+i((e.tr||t&&t.tr||s).call(t,"VM shutdown action: 'shutdown' or 'shutdown-hard'.",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n      <select name="shutdown_action_service">\n        <option value=""></option>\n        <option value="shutdown">'+i((e.tr||t&&t.tr||s).call(t,"Shutdown",{name:"tr",hash:{},data:n}))+'</option>\n        <option value="shutdown-hard">'+i((e.tr||t&&t.tr||s).call(t,"Shutdown hard",{name:"tr",hash:{},data:n}))+'</option>\n      </select>\n    </div>\n  </div>\n  <div class="row">\n    <div class="service_template_param st_man large-6 columns">\n      <input type="checkbox" name="ready_status_gate" id="ready_status_gate"/>\n      <label for="ready_status_gate">\n        '+i((e.tr||t&&t.tr||s).call(t,"Wait for VMs to report that they are READY",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">'+i((e.tr||t&&t.tr||s).call(t,"Before deploying any child roles, wait for all VMs of the parent roles to report via OneGate that they are READY=YES",{name:"tr",hash:{},data:n}))+"</span>\n      </label>\n    </div>\n  </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r="function",o=e.helperMissing,l=this.escapeExpression,c='<form data-abide="ajax" id="'+l((i=null!=(i=e.formPanelId||(null!=t?t.formPanelId:t))?i:o,typeof i===r?i.call(t,{name:"formPanelId",hash:{},data:n}):i))+'Wizard" class="custom creation">\n  <div class="row">\n    <div class="service_template_param st_man large-6 columns">\n      <label for="service_name">\n        '+l((e.tr||t&&t.tr||o).call(t,"Name",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Name for this template",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n      <input type="text" id="service_name" name="service_name" required/>\n    </div>\n    <div class="service_template_param st_man large-6 columns">\n    </div>\n  </div>\n  <div class="row">\n    <div class="service_template_param st_man large-12 columns">\n      <label  for="description">\n        '+l((e.tr||t&&t.tr||o).call(t,"Description",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">'+l((e.tr||t&&t.tr||o).call(t,"Description of the service",{name:"tr",hash:{},data:n}))+'</span>\n      </label>\n      <textarea type="text" id="description" name="description"/>\n    </div>\n  </div>\n  <br>\n  <div id="network_configuration">\n';return s=(e.advancedSection||t&&t.advancedSection||o).call(t,(e.tr||t&&t.tr||o).call(t,"Network Configuration",{name:"tr",hash:{},data:n}),{name:"advancedSection",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+="  </div>\n  <br>\n",s=(e.advancedSection||t&&t.advancedSection||o).call(t,(e.tr||t&&t.tr||o).call(t,"Advanced Service Parameters",{name:"tr",hash:{},data:n}),{name:"advancedSection",hash:{},fn:this.program(3,n),inverse:this.noop,data:n}),null!=s&&(c+=s),c+'  <br>\n  <div class="row">\n    <div class="large-12 columns">\n      <h4>'+l((e.tr||t&&t.tr||o).call(t,"Roles",{name:"tr",hash:{},data:n}))+'</h4>\n    </div>\n  </div>\n  <br>\n  <div class="row">\n    <div id="new_role" class="bordered-tabs large-12 columns">\n      <dl class="tabs" id="roles_tabs" data-tab>\n        <a class="button small right radius" id="tf_btn_roles">\n          <span class="fa fa-plus"></span>'+l((e.tr||t&&t.tr||o).call(t,"Add another role",{name:"tr",hash:{},data:n}))+'\n        </a>\n      </dl>\n      <div class="tabs-content" id="roles_tabs_content">\n      </div>\n    </div>\n  </div>\n</form>'},useData:!0});return e.registerPartial("tabs/oneflow-templates-tab/form-panels/create/wizard",a),a}),define("hbs!tabs/oneflow-templates-tab/form-panels/create/advanced",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<form data-abide="ajax" id="'+o((s=null!=(s=e.formPanelId||(null!=t?t.formPanelId:t))?s:r,typeof s===i?s.call(t,{name:"formPanelId",hash:{},data:n}):s))+'Advanced" class="custom creation">\n  <div class="row">\n    <div class="large-12 columns">\n      <p>'+o((e.tr||t&&t.tr||r).call(t,"Write the Service template here",{name:"tr",hash:{},data:n}))+'</p>\n    </div>\n  </div>\n  <div class="row">\n    <div class="large-12 columns">\n      <textarea id="template" rows="15" required></textarea>\n    </div>\n  </div>\n</form>'},useData:!0});return e.registerPartial("tabs/oneflow-templates-tab/form-panels/create/advanced",a),a}),define("tabs/oneflow-templates-tab/form-panels/create",["require","foundation.tab","utils/form-panels/form-panel","sunstone","utils/locale","utils/tips","tabs/oneflow-templates-tab/utils/role-tab","utils/template-utils","hbs!./create/wizard","hbs!./create/advanced","./create/formPanelId","../tabId"],function(t){function e(){this.formPanelId=y,this.tabId=w,this.actions={create:{title:f.tr("Create Service Template"),buttonText:f.tr("Create"),resetButton:!0},update:{title:f.tr("Update Service Template"),buttonText:f.tr("Update"),resetButton:!1}},p.call(this)}function a(){return v({formPanelId:this.formPanelId})}function n(){return g({formPanelId:this.formPanelId})}function s(t){this.roleTabObjects={};var e=this,a=0;return $(".add_service_network",t).on("click",function(){$(".service_networks tbody").append('<tr>          <td>            <input class="service_network_name" type="text" pattern="[\\w]+"/>            <small class="error">'+f.tr("Only word characters are allowed")+'</small>          </td>          <td>            <textarea class="service_network_description"/>          </td>          <td>            <a href="#"><i class="fa fa-times-circle remove-tab"></i></a>          </td>        </tr>')}),$(".add_service_network",t).trigger("click"),t.on("change",".service_network_name",function(){c(t)}),t.on("click",".service_networks i.remove-tab",function(){var e=$(this).closest("tr");e.remove(),c(t)}),$("#tf_btn_roles",t).bind("click",function(){return e.addRoleTab(a,t),a++,t.foundation(),!1}),$("#roles_tabs",t).on("click","i.remove-tab",function(){var t=$(this).parent().attr("href"),a=$(this).closest("dd"),n=$(this).closest("dl"),s=$(t),i=s.attr("role_id");return a.remove(),s.remove(),"active"==a.attr("class")&&$("a",n.children("dd").last()).click(),delete e.roleTabObjects[i],!1}),$("#roles_tabs",t).on("click","a",function(){var e="#"+this.id+"Tab",a="";$(e+" .parent_roles").hide();var n=!1;$("#roles_tabs_content #role_name",t).each(function(){$(this).val()&&$(this).val()!=$(e+" #role_name",t).val()&&(n=!0,a+="<tr>            <td style='width:10%'>              <input class='check_item' type='checkbox' value='"+$(this).val()+"' id='"+$(this).val()+"'/>            </td>            <td>"+$(this).val()+"</td>          </tr>")}),n&&$(e+" .parent_roles",t).show();var s=[];$(e+" .parent_roles_body input:checked",t).each(function(){s.push($(this).val())}),$(e+" .parent_roles_body",t).html(a),$.each(s,function(){$(e+" .parent_roles_body #"+this,t).attr("checked",!0)})}),$("#tf_btn_roles",t).trigger("click"),$(document).foundation("reflow","tab"),m.setup(t),!1}function i(t){var e=this,a=$('input[name="service_name"]',t).val(),n=$("#description",t).val(),s=$('select[name="deployment"]',t).val(),i=$('select[name="shutdown_action_service"]',t).val(),r=$('input[name="ready_status_gate"]',t).prop("checked"),o={};$(".service_networks tbody tr").each(function(){if($(".service_network_name",$(this)).val()){var t=$(".service_network_name",$(this)).val(),e="vnet_id",a=$(".service_network_description",$(this)).val();o[t]="M|"+e+"|"+a}});var l=[];$(".role_content",t).each(function(){var t=$(this).attr("role_id");l.push(e.roleTabObjects[t].retrieve($(this)))});var c={name:a,deployment:s,description:n,roles:l};return $.isEmptyObject(o)||(c.custom_attrs=o),i&&(c.shutdown_action=i),c.ready_status_gate=r,"create"==this.action?(h.runAction("ServiceTemplate.create",c),!1):"update"==this.action?(h.runAction("ServiceTemplate.update",this.resourceId,JSON.stringify(c)),!1):void 0}function r(t){var e=$("textarea#template",t).val();return"create"==this.action?(h.runAction("ServiceTemplate.create",JSON.parse(e)),!1):"update"==this.action?(h.runAction("ServiceTemplate.update",this.resourceId,e),!1):void 0}function o(t){var e=this;$(".role_content",t).each(function(){var t=$(this).attr("role_id");e.roleTabObjects[t].onShow()})}function l(t,e){var a=this;if("update"==this.action){this.resourceId=e.ID,$("#template",t).val(b.htmlDecode(JSON.stringify(e.TEMPLATE.BODY,null,"  "))),$("#service_name",t).attr("disabled","disabled"),$("#service_name",t).val(b.htmlDecode(e.NAME)),$("#description",t).val(b.htmlDecode(e.TEMPLATE.BODY.description)),$('select[name="deployment"]',t).val(e.TEMPLATE.BODY.deployment),$("select[name='shutdown_action_service']",t).val(e.TEMPLATE.BODY.shutdown_action),$("input[name='ready_status_gate']",t).prop("checked",e.TEMPLATE.BODY.ready_status_gate||!1),$(".service_networks i.remove-tab",t).trigger("click"),$.isEmptyObject(e.TEMPLATE.BODY.custom_attrs)||($("div#network_configuration a.accordion_advanced_toggle",t).trigger("click"),$.each(e.TEMPLATE.BODY.custom_attrs,function(e,a){var n=a.split("|"),s={name:e,mandatory:n[0],type:n[1],description:n[2]};switch(n[1]){case"vnet_id":$(".add_service_network",t).trigger("click");var i=$(".service_networks tbody tr",t).last();$(".service_network_name",i).val(b.htmlDecode(s.name)).change(),$(".service_network_description",i).val(b.htmlDecode(s.description))}})),$("#roles_tabs i.remove-tab",t).trigger("click");var n=[];$(".service_networks .service_network_name",t).each(function(){$(this).val()&&n.push($(this).val())});var s=[];$.each(e.TEMPLATE.BODY.roles,function(e,i){s.push(i.name),$("#tf_btn_roles",t).click();var r=$(".role_content",t).last(),o=$(r).attr("role_id");a.roleTabObjects[o].fill(r,i,n)}),$.each(e.TEMPLATE.BODY.roles,function(e,a){var n=$(".role_content",t)[e],i="";$.each(s,function(){this!=a.name&&(i+="<tr>              <td style='width:10%'>                <input class='check_item' type='checkbox' value='"+this+"' id='"+this+"'/>              </td>              <td>"+this+"</td>            </tr>")}),$(".parent_roles_body",n).html(i),a.parents&&$.each(a.parents,function(){$(".parent_roles_body #"+this,n).attr("checked",!0)})})}}function c(t){$("#roles_tabs_content .role_content",t).each(function(){var e=this;d(t,e)})}function d(t){$("#roles_tabs_content .role_content",t).each(function(){var e=this,a=[];$(".service_network_checkbox:checked",e).each(function(){a.push($(this).val())}),$(".networks_role",e).hide();var n=!1,s=$(e).attr("id"),i="";$(".service_networks .service_network_name",t).each(function(){$(this).val()&&(n=!0,i+="<tr>            <td style='width:10%'>              <input class='service_network_checkbox check_item' type='checkbox' value='"+$(this).val()+"' id='"+s+"_"+$(this).val()+"'/>            </td>            <td>              <label for='"+s+"_"+$(this).val()+"'>"+$(this).val()+"</label>            </td>          </tr>")}),$(".networks_role_body",e).html(i),n&&$(".networks_role",e).show(),$(".vm_template_contents",e).val(""),$.each(a,function(){$(".service_network_checkbox[value='"+this+"']",e).attr("checked",!0).change()})})}function u(t,e){var a="role"+t,n=new _(a);this.roleTabObjects[t]=n;var s=$('<div id="'+a+'Tab" class="content role_content wizard_internal_tab" role_id="'+t+'">'+n.html()+"</div>").appendTo($("#roles_tabs_content",e));d(e,s);var i=$("<dd>      <a class='text-center' id='"+a+"' href='#"+a+"Tab'>        <span>          <i class='off-color fa fa-cube fa-3x'/>          <br>          <span id='role_name_text'>"+f.tr("Role ")+t+"</span>        </span>        <i class='fa fa-times-circle remove-tab'></i>      </a>    </dd>").appendTo($("dl#roles_tabs",e));$("a",i).trigger("click"),n.setup(s),n.onShow()}t("foundation.tab");var p=t("utils/form-panels/form-panel"),h=t("sunstone"),f=t("utils/locale"),m=t("utils/tips"),_=t("tabs/oneflow-templates-tab/utils/role-tab"),b=t("utils/template-utils"),v=t("hbs!./create/wizard"),g=t("hbs!./create/advanced"),y=t("./create/formPanelId"),w=t("../tabId");return e.FORM_PANEL_ID=y,e.prototype=Object.create(p.prototype),e.prototype.constructor=e,e.prototype.htmlWizard=a,e.prototype.htmlAdvanced=n,e.prototype.submitWizard=i,e.prototype.submitAdvanced=r,e.prototype.onShow=o,e.prototype.fill=l,e.prototype.setup=s,e.prototype.addRoleTab=u,e}),define("hbs!tabs/oneflow-templates-tab/form-panels/instantiate/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<form data-abide="ajax" id="'+o((s=null!=(s=e.formPanelId||(null!=t?t.formPanelId:t))?s:r,typeof s===i?s.call(t,{name:"formPanelId",hash:{},data:n}):s))+'Wizard" class="custom creation">\n  <div class="row">\n    <div class="large-6 columns">\n      <label for="service_name">'+o((e.tr||t&&t.tr||r).call(t,"Service Name",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Defaults to template name when emtpy. You can use the wildcard &#37;i. When creating several Services, &#37;i will be replaced with a different number starting from 0 in each of them",{name:"tr",hash:{},data:n}))+'.</span>\n      </label>\n      <input type="text" name="service_name" id="service_name" />\n    </div>\n    <div class="large-6 columns">\n      <label for="service_n_times">'+o((e.tr||t&&t.tr||r).call(t,"Number of instances",{name:"tr",hash:{},data:n}))+'\n        <span class="tip">'+o((e.tr||t&&t.tr||r).call(t,"Number of Services that will be created using this template",{name:"tr",hash:{},data:n}))+'.</span>\n      </label>\n      <input type="text" name="service_n_times" id="service_n_times" value="1">\n    </div>\n  </div>\n  <div id="instantiate_service_user_inputs">\n    <i class="fa fa-spinner fa-spin"></i>\n  </div>\n  <div class="row" id="instantiate_service_role_user_inputs">\n  </div>\n</form>'},useData:!0});return e.registerPartial("tabs/oneflow-templates-tab/form-panels/instantiate/html",a),a}),define("tabs/oneflow-templates-tab/form-panels/instantiate",["require","foundation.tab","utils/form-panels/form-panel","sunstone","utils/locale","utils/tips","opennebula/servicetemplate","opennebula/template","utils/notifier","utils/wizard-fields","utils/template-utils","utils/user-inputs","hbs!./instantiate/html","./instantiate/formPanelId","../tabId"],function(t){function e(){this.formPanelId=v,this.tabId=g,this.actions={instantiate:{title:c.tr("Instantiate Service Template"),buttonText:c.tr("Instantiate"),resetButton:!1}},o.call(this)}function a(){return b({formPanelId:this.formPanelId})}function n(t){return d.setup(t),!1}function s(t){var e=this;l.disableFormPanelSubmit(g);var a=l.getDataTable(g).elements(),n=""+a[0];this.service_template_json={},u.show({data:{id:n},timeout:!0,success:function(a,n){e.service_template_json=n,$("#instantiate_service_user_inputs",t).empty(),_.serviceTemplateInsert($("#instantiate_service_user_inputs",t),n),n_roles=n.DOCUMENT.TEMPLATE.BODY.roles.length,n_roles_done=0,$.each(n.DOCUMENT.TEMPLATE.BODY.roles,function(e,a){var n="user_input_role_"+e;$("#instantiate_service_role_user_inputs",t).append('<div id="'+n+'" class="large-6 columns">            </div>'),p.show({data:{id:a.vm_template},timeout:!0,success:function(e,s){$("#"+n,t).empty(),_.vmTemplateInsert($("#"+n,t),s,{text_header:c.tr("Role")+" "+a.name}),n_roles_done+=1,n_roles_done==n_roles&&l.enableFormPanelSubmit(g)},error:function(e,a,n){h.onError(e,a,n),$("#instantiate_vm_user_inputs",t).empty()}})})},error:function(e,a,n){h.onError(e,a,n),$("#instantiate_service_user_inputs",t).empty()}})}function i(t){var e,a=this,n=$("#service_name",t).val(),s=$("#service_n_times",t).val(),i=1;if($("#TEMPLATE_ID",t).val())e=$("#TEMPLATE_ID",t).val();else{var r=l.getDataTable(g).elements();e=""+r[0]}s.length&&(i=parseInt(s,10));var o="";i>1&&(o=i+" times");var c={merge_template:{}},d=f.retrieve($("#instantiate_service_user_inputs",t));if(c.merge_template.custom_attrs_values=d,c.merge_template.roles=[],$.each(a.service_template_json.DOCUMENT.TEMPLATE.BODY.roles,function(e,a){var n="user_input_role_"+e;d={},$.extend(d,f.retrieve($("#"+n,t))),$.each(a.elasticity_policies,function(t,e){e.expression=m.htmlDecode(e.expression)}),a.user_inputs_values=d,c.merge_template.roles.push(a)}),n.length)if(-1==n.indexOf("%i")){c.merge_template.name=n;for(var u=0;i>u;u++)l.runAction("ServiceTemplate.instantiate",[e],c)}else for(var u=0;i>u;u++)c.merge_template.name=n.replace(/%i/gi,u),l.runAction("ServiceTemplate.instantiate",[e],c);
else for(var u=0;i>u;u++)l.runAction("ServiceTemplate.instantiate",[e],c);return!1}function r(){}t("foundation.tab");var o=t("utils/form-panels/form-panel"),l=t("sunstone"),c=t("utils/locale"),d=t("utils/tips"),u=t("opennebula/servicetemplate"),p=t("opennebula/template"),h=t("utils/notifier"),f=t("utils/wizard-fields"),m=t("utils/template-utils"),_=t("utils/user-inputs"),b=t("hbs!./instantiate/html"),v=t("./instantiate/formPanelId"),g=t("../tabId");return e.FORM_PANEL_ID=v,e.prototype=Object.create(o.prototype),e.prototype.constructor=e,e.prototype.htmlWizard=a,e.prototype.submitWizard=i,e.prototype.onShow=s,e.prototype.fill=r,e.prototype.setup=n,e}),define("tabs/oneflow-templates-tab",["require","utils/locale","./oneflow-templates-tab/buttons","./oneflow-templates-tab/actions","./oneflow-templates-tab/datatable","./oneflow-templates-tab/tabId","./oneflow-templates-tab/panels/info","./oneflow-templates-tab/panels/roles","./oneflow-templates-tab/form-panels/create","./oneflow-templates-tab/form-panels/instantiate"],function(t){var e=t("utils/locale"),a=t("./oneflow-templates-tab/buttons"),n=t("./oneflow-templates-tab/actions"),s=t("./oneflow-templates-tab/datatable"),i=t("./oneflow-templates-tab/tabId"),r="dataTableServiceTemplates",o="ServiceTemplate",l=[],c=[t("./oneflow-templates-tab/panels/info"),t("./oneflow-templates-tab/panels/roles")],d=[t("./oneflow-templates-tab/form-panels/create"),t("./oneflow-templates-tab/form-panels/instantiate")],u={tabId:i,title:e.tr("Templates"),tabClass:"subTab",parentTab:"oneflow-dashboard",listHeader:'<i class="fa fa-fw fa-file-o"></i>&emsp;'+e.tr("OneFlow - Templates"),infoHeader:'<i class="fa fa-fw fa-file-o"></i>&emsp;'+e.tr("OneFlow - Template"),subheader:"",content:'<div class="row oneflow_templates_error_message" hidden>        <div class="small-6 columns small-centered text-center">            <div class="alert-box alert radius">'+e.tr("Cannot connect to OneFlow server")+"</div>        </div>    </div>",resource:o,buttons:a,actions:n,dataTable:new s(r,{actions:!0,info:!0}),panels:c,formPanels:d,dialogs:l};return u}),define("tabs/support-tab/buttons",["require","utils/locale"],function(t){var e=t("utils/locale"),a={"Support.refresh":{type:"action",layout:"refresh",text:'<i class="fa fa-refresh fa fa-lg">',alwaysActive:!0},"Support.upload":{type:"action",layout:"main",text:'<i class="fa fa-cloud-upload" style="color: rgb(111, 111, 111)"/> '+e.tr("Upload a file"),custom_classes:"only-right-info"},"Support.signout":{type:"action",layout:"main",text:'<i class="fa fa-sign-out fa fa-lg">',tip:"Sign out of Commercial Support",alwaysActive:!0},"Support.create_dialog":{type:"create_dialog",layout:"create",text:"Submit a Request"}};return a}),define("tabs/support-tab/tabId",["require"],function(){return"support-tab"}),define("tabs/support-tab/utils/common",["require","sunstone","../tabId"],function(t){function e(){$(".support_info").hide(),$("#"+r.getDataTable(o).dataTableId+"Container","#"+o).hide(),$(".support_connect").show(),$(".actions_row","#"+o).hide()}function a(){$(".support_info").show(),$(".support_connect").hide(),$(".actions_row","#"+o).show(),$("#"+r.getDataTable(o).dataTableId+"Container","#"+o).show()}function n(){r.runAction("Support.list"),i=setInterval(function(){r.runAction("Support.list")},r.TOP_INTERVAL)}function s(){clearInterval(i)}var i,r=t("sunstone"),o=t("../tabId");return{showSupportConnect:e,showSupportList:a,startIntervalRefresh:n,stopIntervalRefresh:s}}),define("tabs/support-tab/form-panels/create/formPanelId",["require"],function(){return"createSupportRequestForm"}),define("tabs/support-tab/dialogs/upload/dialogId",["require"],function(){return"uploadSupportRequestDialog"}),define("tabs/support-tab/actions",["require","sunstone","utils/notifier","opennebula/support","./utils/common","./tabId","./form-panels/create/formPanelId","./dialogs/upload/dialogId"],function(t){var e=t("sunstone"),a=t("utils/notifier"),n=t("opennebula/support"),s=t("./utils/common"),i="Support",r=t("./tabId"),o=t("./form-panels/create/formPanelId"),l=t("./dialogs/upload/dialogId"),c={"Support.list":{type:"list",call:n.list,callback:function(t,a,n){s.showSupportList(),$(".support_open_value").text(n.open_requests),$(".support_pending_value").text(n.pending_requests);var i=[];n.REQUEST_POOL.REQUEST&&(i=n.REQUEST_POOL.REQUEST),e.getDataTable(r).updateView(t,i)},error:function(t,e){"401"==e.error.http_status&&s.stopIntervalRefresh(),s.showSupportConnect()}},"Support.refresh":{type:"custom",call:function(){var t=$("#"+r);e.rightInfoVisible(t)?e.runAction(i+".show",e.rightInfoResourceId(t)):(e.getDataTable(r).waitingNodes(),e.runAction(i+".list",{force:!0}))},error:function(){s.showSupportConnect()}},"Support.show":{type:"single",call:n.show,callback:function(t,a){e.rightInfoVisible($("#"+r))&&e.insertPanels(r,a)},error:function(){s.showSupportConnect()}},"Support.create":{type:"create",call:n.create,callback:function(){e.resetFormPanel(r,o),e.hideFormPanel(r),e.runAction("Support.refresh")},error:function(t,n){"403"==n.error.http_status?(e.hideFormPanelLoading(r),a.notifyError(n.error.message)):(e.hideFormPanel(r),s.showSupportConnect())}},"Support.create_dialog":{type:"custom",call:function(){e.showFormPanel(r,o,"create")}},"Support.update":{type:"single",call:n.update,callback:function(){e.runAction("Support.refresh"),a.notifyMessage("Comment added correctly")},error:function(){e.runAction("Support.refresh"),a.notifyError("Comment failed to be added")}},"Support.signout":{type:"single",call:function(){$.ajax({url:"support/credentials",type:"DELETE",dataType:"text",success:function(){s.showSupportConnect(),e.runAction("Support.refresh")},error:function(t){a.notifyError("401"==t.status?"Support credentials are incorrect":t.responseText)}})}},"Support.upload":{type:"single",call:function(){var t=e.getDataTable(r).elements(),a=""+t[0];e.getDialog(l).setParams({requestId:a}),e.getDialog(l).reset(),e.getDialog(l).show()}}};return c}),define("tabs/support-tab/datatable",["require","utils/tab-datatable","sunstone-config","utils/locale","./tabId"],function(t){function e(t,e){this.conf=e||{},this.tabId=o,this.dataTableId=t,this.resource=i,this.xmlRoot=r,this.dataTableOptions={bAutoWidth:!1,bSortClasses:!1,bDeferRender:!0,aoColumnDefs:[{bSortable:!1,aTargets:["check"]},{sWidth:"35px",aTargets:[0]},{bVisible:!0,aTargets:s.tabTableColumns(o)},{bVisible:!1,aTargets:["_all"]}]},this.columns=["ID","Subject","Requested","Status"],n.call(this)}function a(t){return['<input class="check_item" type="checkbox" id="'+i.toLowerCase()+"_"+t.id+'" name="selected_items" value="'+t.id+'"/>',t.id,t.subject,t.created_at,t.status]}var n=t("utils/tab-datatable"),s=t("sunstone-config"),i=(t("utils/locale"),"Support"),r="REQUEST",o=t("./tabId");return e.prototype=Object.create(n.prototype),e.prototype.constructor=e,e.prototype.elementArray=a,e}),define("hbs!tabs/support-tab/title",["hbs","hbs/handlebars"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<span class="support_title"><i class="fa fa-lg fa-fw fa-support"></i> Support</span>\n<br>\n<div class="support_info" style="display: none;">\n  <span class="support_open">Open</span><span class="label secondary right support_open_value">-</span>\n  <br>\n  <span class="support_pending">Pending</span><span class="label right support_pending_value">-</span>\n  <br>\n  <button class="button tiny success radius support_button">Submit a Request</button>\n</div>\n<div class="support_connect" style="display: none;">\n  <span class="">Not connected</span>\n  <br>\n  <button class="button tiny success radius support_connect_button">Sign in</button>\n</div>'},useData:!0});return e.registerPartial("tabs/support-tab/title",a),a}),define("hbs!tabs/support-tab/subheader",["hbs","hbs/handlebars"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(){return'<div class="row text-left support_connect">\n  <div class="large-6 columns" style="font-">\n    <p>The Support Subscription provides expert integration and production support on supported platforms and include:</p>\n    <ul class="fa-ul" style="font-size: 14px;">\n      <li><i class="fa-li fa fa-check"></i>Problem diagnosis, resolution and bug fixing</li>\n      <li><i class="fa-li fa fa-check"></i>Solving unexpected problems when using, installing or configuring the software</li>\n      <li><i class="fa-li fa fa-check"></i>Guidance about tuning for optimal and scalable performance in your environment</li>\n      <li><i class="fa-li fa fa-check"></i>Answering how to questions related to standard and intended product usage</li>\n      <li><i class="fa-li fa fa-check"></i>Offering hints about how to go around missing features</li>\n      <li><i class="fa-li fa fa-check"></i>Answering questions about product adaptation and integration</li>\n    </ul>\n    <p>For more info on support subcriptions, <a href="http://opennebula.systems/support/" target="_blank">click here</a></p>\n  </div>\n  <div class="large-6 columns" style="padding: 0px 50px;">\n    <fieldset>\n      <legend>Commercial Support</legend>\n      <form id="support_credentials_form">\n        <div class="large-12 columns">\n          <label for="support_email">Email</label>\n          <input id="support_email" type="text"></input>\n        </div>\n        <div class="large-12 columns">\n          <label for="support_password">Password</label>\n          <input id="support_password" type="password"></input>\n        </div>\n        <div class="large-12 columns">\n          <button class="button right radius success submit_support_credentials_button" type="submit">Sign in</button>\n        </div>\n        <div class="large-12 columns text-center">\n          <p>or</p>\n        </div>\n        <div class="large-12 columns">\n          <a  href="http://opennebula.systems/buy/" target="_blank" class="button large-12 radius" style="color: #fff !important">Get an account</a>\n        </div>\n      </form>\n    </fieldset>\n  </div>\n</div>\n<div class="row">\n  <div class="large-12 columns text-left">\n    <h3 class="subheader"><i class="fa fa-fw fa-info-circle"></i> Additional Help Resources</h3>\n  </div>\n</div>\n<br>\n<div class="row">\n  <div class="large-6 columns">\n    <a href="http://docs.opennebula.org/4.12/" target="_blank">\n      <span class="fa-stack fa-2x" style="color: #cfcfcf;">\n       <i class="fa fa-circle fa-stack-2x"></i>\n       <i class="fa fa-book fa-stack-1x fa-inverse"></i>\n     </span>\n     <br>\n     Documentation\n   </a>\n </div>\n <div class="large-6 columns">\n  <a href="http://opennebula.org/support/community/" target="_blank">\n    <span class="fa-stack fa-2x" style="color: #cfcfcf;">\n     <i class="fa fa-circle fa-stack-2x"></i>\n     <i class="fa fa-comments fa-stack-1x fa-inverse"></i>\n   </span>\n   <br>\n   Community\n </a>\n</div>\n</div>\n<br>\n<p class="text-center" style="font-size: 14px; color: #999;">This tab can be disabled in the sunstone views configuration files</p>'},useData:!0});return e.registerPartial("tabs/support-tab/subheader",a),a}),define("hbs!tabs/support-tab/dialogs/upload/html",["hbs","hbs/handlebars"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<div id="'+o((s=null!=(s=e.dialogId||(null!=t?t.dialogId:t))?s:r,typeof s===i?s.call(t,{name:"dialogId",hash:{},data:n}):s))+'" class="reveal-modal" role="dialog" data-reveal >\n  <div class="row">\n    <h3 class="subheader">Upload File</h3>\n  </div>\n  <form id="'+o((s=null!=(s=e.dialogId||(null!=t?t.dialogId:t))?s:r,typeof s===i?s.call(t,{name:"dialogId",hash:{},data:n}):s))+'Form">\n    <div class="row">\n      <div id="support_file-uploader" class="large-12 columns text-center">\n        <label id="support_file-uploader-label" for="support_file-uploader-input"></label>\n        <input id="support_file-uploader-input" type="file"/>\n      </div>\n    </div>\n    <div class="form_buttons row">\n      <button class="button right radius success upload_support_file_form_button" type="submit" disabled>\n        Upload\n      </button>\n    </div>\n    <a class="close-reveal-modal">&#215;</a>\n  </form>\n</div>'},useData:!0});return e.registerPartial("tabs/support-tab/dialogs/upload/html",a),a}),define("tabs/support-tab/dialogs/upload",["require","utils/dialogs/dialog","hbs!./upload/html","resumable","sunstone","utils/notifier","opennebula/error","utils/browser-info","./upload/dialogId","../tabId"],function(t){function e(){this.dialogId=h,r.call(this)}function a(){return o({dialogId:this.dialogId})}function n(t){this.requestId=t.requestId}function s(t){var e=this,a=$("#"+f);if(p.getInternetExplorerVersion()>-1)$(".upload_support_file_form_button",t).text("Uploading files through IE is not supported"),$(".upload_support_file_form_button",t).attr("disabled","disabled");else{var n=new l({target:"upload_chunk",chunkSize:10485760,maxFiles:1,testChunks:!1,query:{csrftoken:""}});n.assignBrowse($("#support_file-uploader-input",t));var s="",i=!1;n.on("fileAdded",function(e){$(".upload_support_file_form_button",t).removeAttr("disabled"),s=e.fileName,i=s,$("#support_file-uploader-input",t).hide(),$("#support_file-uploader-label",t).html(e.fileName)}),n.on("uploadStart",function(){$(".upload_support_file_form_button",t).attr("disabled","disabled"),$(".support_upload_progress_bars",a).append('<div id="'+s+'progressBar" class="row" style="margin-bottom:10px">            <div id="'+s+'-info" class="large-2 columns dataTables_info">              Uploading...            </div>            <div class="large-10 columns">              <div id="upload_progress_container" class="progress nine radius" style="height:25px !important">                <span class="meter" style="width:0%"></span>              </div>              <div class="progress-text" style="margin-left:15px">'+s+"</div>            </div>          </div>")}),n.on("progress",function(){$("span.meter",$('div[id="'+s+'progressBar"]',a)).css("width",100*n.progress()+"%")}),n.on("fileSuccess",function(t){$('div[id="'+s+'-info"]',a).text("Registering in OpenNebula"),$.ajax({url:"support/request/"+e.requestId+"/upload",type:"POST",data:{csrftoken:"",file:s,tempfile:t.uniqueIdentifier},success:function(){d.notifyMessage("File uploaded correctly"),$('div[id="'+s+'progressBar"]',a).remove(),c.runAction("Support.refresh"),c.getDialog(h).hide()},error:function(t){d.onError({},u(t)),$('div[id="'+s+'progressBar"]',a).remove()}})}),$("#"+h+"Form",t).on("submit",function(){return n.upload(),c.getDialog(h).hide(),!1})}}function i(){return!1}var r=t("utils/dialogs/dialog"),o=t("hbs!./upload/html"),l=t("resumable"),c=t("sunstone"),d=t("utils/notifier"),u=t("opennebula/error"),p=t("utils/browser-info"),h=t("./upload/dialogId"),f=t("../tabId");return e.DIALOG_ID=h,e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=i,e.prototype.setup=s,e.prototype.setParams=n,e}),define("templates/helpers/htmlDecode",["require","hbs/handlebars","utils/template-utils"],function(t){var e=t("hbs/handlebars"),a=t("utils/template-utils"),n=function(t){return a.htmlDecode(t)};return e.registerHelper("htmlDecode",n),n}),define("hbs!tabs/support-tab/panels/info/html",["hbs","hbs/handlebars","templates/helpers/htmlDecode","templates/helpers/advancedSection"],function(t,e){var a=e.template({1:function(t,e,a,n){var s,i=e.helperMissing,r="";return s=(e.advancedSection||t&&t.advancedSection||i).call(t,null!=t?t.title:t,{name:"advancedSection",hash:{},fn:this.program(2,n),inverse:this.noop,data:n}),null!=s&&(r+=s),r},2:function(t,e,a,n){var s,i=e.helperMissing,r='  <div class="row">\n    <div class="large-12 columns comment" style="font-size: 14px !important;">\n      ';return s=(e.htmlDecode||t&&t.htmlDecode||i).call(t,null!=t?t.html_body:t,{name:"htmlDecode",hash:{},data:n}),null!=s&&(r+=s),r+"\n    </div>\n  </div>\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i,r=this.lambda,o=this.escapeExpression,l=e.helperMissing,c="function",d='<div class="row">\n  <div class="large-6 columns">\n    <h5>'+o(r(null!=(s=null!=t?t.element:t)?s.subject:s,t))+'</h5>\n    <p class="subheader" style="font-size: 14px;">\n      ';return s=(e.htmlDecode||t&&t.htmlDecode||l).call(t,null!=(s=null!=t?t.element:t)?s.html_description:s,{name:"htmlDecode",hash:{},data:n}),null!=s&&(d+=s),d+='\n    </p>\n  </div>\n  <div class="large-6 columns">\n    <table id="info_marketplace_table" class="dataTable">\n      <thead>\n        <tr>\n          <th colspan="2">Information</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr>\n          <td class="key_td">Requested</td>\n          <td class="value_td">'+o(r(null!=(s=null!=t?t.element:t)?s.created_at:s,t))+'</td>\n        </tr>\n        <tr>\n          <td class="key_td">Status</td>\n          <td class="value_td">'+o(r(null!=(s=null!=t?t.element:t)?s.status:s,t))+'</td>\n        </tr>\n        <tr>\n          <td colspan="2"><span class="large-12 label secondary radius">'+o((i=null!=(i=e.message||(null!=t?t.message:t))?i:l,typeof i===c?i.call(t,{name:"message",hash:{},data:n}):i))+"</span></td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>\n<br>\n",s=e.each.call(t,null!=t?t.comments:t,{name:"each",hash:{},fn:this.program(1,n),inverse:this.noop,data:n}),null!=s&&(d+=s),d+'<div class="row">\n  <div class="large-12 columns support_upload_progress_bars">\n  </div>\n</div>\n<form id="submit_support_comment">\n  <div class="row">\n    <div class="large-12 columns">\n      <textarea class="comment" placeholder="Add a comment to this request" rows="4"/>\n    </div>\n  </div>\n  <div class="row">\n    <div class="large-12 columns">\n      <input id="solved" type="checkbox">\n      <label for="solved">Please consider this request resolved</label>\n      <button class="button right radius success" type="submit">Submit</button>\n    </div>\n  </div>\n</form>\n'},useData:!0});return e.registerPartial("tabs/support-tab/panels/info/html",a),a}),define("tabs/support-tab/panels/info/panelId",["require"],function(){return"support_info_tab"}),define("tabs/support-tab/panels/info",["require","utils/locale","sunstone","hbs!./info/html","../tabId","./info/panelId"],function(t){function e(t){return this.title="Info",this.icon="fa-info-circle",this.element=t[o],this}function a(){var t;"open"==this.element.status?t="This request is currently being processed by our staff":"pending"==this.element.status&&(t="This request is awaiting your response");var e=[];return this.element.comments&&$.each(this.element.comments,function(t,a){var n=21231023==a.author_id?"OpenNebula Support Team":"Me";e.push({title:'<span style="width: 100%;">'+n+' <span style="color: #999;"> - '+a.created_at+"</span></span>",html_body:a.html_body})}),i({element:this.element,message:t,comments:e})}function n(t){var e=this;return $("#submit_support_comment").on("submit",function(){$("button[type=submit]",t).attr("disabled","disabled"),$("button[type=submit]",t).html('<i class="fa fa-spinner fa-spin"></i>');var a=e.element.id,n={comment:{value:$(".comment",this).val()},solved:$("#solved:checked",this).length>0?!0:!1};return s.runAction("Support.update",a,n),!1}),$(".accordion_advanced_toggle",t).trigger("click"),$("dl.right-info-tabs",t).hide(),!1}var s=(t("utils/locale"),t("sunstone")),i=t("hbs!./info/html"),r=(t("../tabId"),t("./info/panelId")),o="REQUEST";return e.PANEL_ID=r,e.prototype.html=a,e.prototype.setup=n,e}),define("hbs!tabs/support-tab/form-panels/create/wizard",["hbs","hbs/handlebars"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<form data-abide="ajax" id="'+o((s=null!=(s=e.formPanelId||(null!=t?t.formPanelId:t))?s:r,typeof s===i?s.call(t,{name:"formPanelId",hash:{},data:n}):s))+'Wizard" class="custom creation">\n  <div class="row">\n    <div class="large-12 columns">\n      <label for="subject">Subject</label>\n      <input id="subject" type="text" required></input>\n    </div>\n  </div>\n  <div class="row">\n    <div class="medium-6 columns">\n      <label for="opennebula_version">OpenNebula Version</label>\n      <input id="opennebula_version" type="text" required></input>\n    </div>\n  </div>\n  <div class="row">\n    <div class="large-12 columns">\n      <label for="description">Description</label>\n      <textarea id="description" rows="5" placeholder="Please enter the details of your request. A member of our support staff will respond as soon as possible." required></textarea>\n    </div>\n  </div>\n  <div class="row">\n    <div class="large-12 columns">\n      <label for="severity">Subject</label>\n      <select id="severity" name="severity">\n        <option value="severity_1">Severity 1. Product Error: Catastrophic problem in running production systems</option>\n        <option value="severity_2">Severity 2. Product Error: High-impact problem in running production systems</option>\n        <option value="severity_3">Severity 3. Product Error: Low impact problem on a running production system </option>\n        <option value="severity_4" selected>Severity 4. Usage, Design, Configuration, or Integration Question</option>\n      </select>\n    </div>\n  </div>\n</form>'},useData:!0});return e.registerPartial("tabs/support-tab/form-panels/create/wizard",a),a}),define("tabs/support-tab/form-panels/create",["require","foundation.tab","utils/form-panels/form-panel","sunstone","hbs!./create/wizard","./create/formPanelId","../tabId"],function(t){function e(){this.formPanelId=c,this.tabId=d,this.actions={create:{title:"Submit a Request",buttonText:"Submit",resetButton:!0}},r.call(this)}function a(){return l({formPanelId:this.formPanelId})}function n(){}function s(){return!1}function i(t){var e={subject:$("#subject",t).val(),description:$("#description",t).val(),opennebula_version:$("#opennebula_version",t).val(),severity:$("#severity",t).val()};return o.runAction("Support.create",e),!1}t("foundation.tab");var r=t("utils/form-panels/form-panel"),o=t("sunstone"),l=t("hbs!./create/wizard"),c=t("./create/formPanelId"),d=t("../tabId");return e.FORM_PANEL_ID=c,e.prototype=Object.create(r.prototype),e.prototype.constructor=e,e.prototype.htmlWizard=a,e.prototype.submitWizard=i,e.prototype.onShow=n,e.prototype.setup=s,e}),define("tabs/support-tab",["require","./support-tab/buttons","./support-tab/actions","./support-tab/datatable","utils/notifier","./support-tab/utils/common","sunstone","hbs!./support-tab/title","hbs!./support-tab/subheader","./support-tab/tabId","./support-tab/dialogs/upload","./support-tab/panels/info","./support-tab/form-panels/create"],function(t){function e(t){r.showSupportConnect(),r.startIntervalRefresh(),$(".support_button").on("click",function(){return $("#li_support-tab > a").trigger("click"),$(".create_dialog_button","#support-tab").trigger("click"),!1}),$("#support_credentials_form",t).on("submit",function(){$(".submit_support_credentials_button",t).attr("disabled","disabled"),$(".submit_support_credentials_button",t).html('<i class="fa fa-spinner fa-spin"></i>');var e={email:$("#support_email",this).val(),password:$("#support_password",this).val()};return $.ajax({url:"support/credentials",type:"POST",dataType:"text",data:JSON.stringify(e),success:function(){$(".submit_support_credentials_button",t).removeAttr("disabled"),$(".submit_support_credentials_button",t).html("Sign in"),o.runAction("Support.refresh"),r.showSupportList(),r.startIntervalRefresh()},error:function(e){i.notifyError("401"==e.status?"Support credentials are incorrect":e.responseText),$(".submit_support_credentials_button",t).removeAttr("disabled"),$(".submit_support_credentials_button",t).html("Sign in")}}),!1})}var a=t("./support-tab/buttons"),n=t("./support-tab/actions"),s=t("./support-tab/datatable"),i=t("utils/notifier"),r=t("./support-tab/utils/common"),o=t("sunstone"),l=t("hbs!./support-tab/title"),c=t("hbs!./support-tab/subheader"),d=t("./support-tab/tabId"),u="dataTableSupport",p=[t("./support-tab/dialogs/upload")],h=[t("./support-tab/panels/info")],f=[t("./support-tab/form-panels/create")],m={tabId:d,resource:"Support",title:l(),listHeader:'<i class="fa fa-fw fa-support"></i> Commercial Support Requests',infoHeader:'<i class="fa fa-fw fa-support"></i> Commercial Support Request',subheader:c(),buttons:a,actions:n,dataTable:new s(u,{actions:!0,info:!0,oneSelection:!0}),panels:h,formPanels:f,dialogs:p,setup:e};return m}),define("hbs!utils/dialogs/confirm/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<div id="'+o((s=null!=(s=e.dialogId||(null!=t?t.dialogId:t))?s:r,typeof s===i?s.call(t,{name:"dialogId",hash:{},data:n}):s))+'" class="reveal-modal" data-reveal>\n  <div class="row">\n    <h3 class="subheader">\n      '+o((e.tr||t&&t.tr||r).call(t,"Confirm",{name:"tr",hash:{},data:n}))+'\n      <br>\n      &emsp;\n      <small class="confirm_action"></small>\n    </h3>\n  </div>\n  <form action="">\n    <div id="confirm_tip">'+o((e.tr||t&&t.tr||r).call(t,"You have to confirm this action.",{name:"tr",hash:{},data:n}))+'</div>\n    <br />\n    <div id="question">'+o((e.tr||t&&t.tr||r).call(t,"Do you want to proceed?",{name:"tr",hash:{},data:n}))+'</div>\n    <br />\n    <div class="form_buttons">\n      <button id="confirm_proceed" class="action_button radius button right" value="">'+o((e.tr||t&&t.tr||r).call(t,"OK",{name:"tr",hash:{},data:n}))+'</button>\n    </div>\n    <a class="close-reveal-modal">&#215;</a>\n  </form>\n</div>'},useData:!0});return e.registerPartial("utils/dialogs/confirm/html",a),a}),define("utils/dialogs/confirm",["require","utils/dialogs/dialog","hbs!./confirm/html","sunstone","utils/locale","./confirm/dialogId"],function(t){function e(){this.dialogId=c,i.call(this)}function a(){return r({dialogId:this.dialogId})}function n(){return!1}function s(t){var e=t.data("buttonAction"),a=t.data("buttonTab"),n=o.getButton(a,e),s=l.tr("You have to confirm this action");n.tip&&(s=n.tip),$("#confirm_proceed",t).val(e),$("#confirm_tip",t).text(s);var i=o.getAction(e),r=i.elements();if(r){var c=e.split(".");$(".confirm_action",t).html(c[1]+" "+c[0]+": "+r.join(", "))}return!1}var i=t("utils/dialogs/dialog"),r=t("hbs!./confirm/html"),o=t("sunstone"),l=t("utils/locale"),c=t("./confirm/dialogId");return e.DIALOG_ID=c,e.prototype=Object.create(i.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=s,e.prototype.setup=n,e}),define("hbs!utils/dialogs/confirm-with-select/html",["hbs","hbs/handlebars","templates/helpers/tr"],function(t,e){var a=e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(t,e,a,n){var s,i="function",r=e.helperMissing,o=this.escapeExpression;return'<div id="'+o((s=null!=(s=e.dialogId||(null!=t?t.dialogId:t))?s:r,typeof s===i?s.call(t,{name:"dialogId",hash:{},data:n}):s))+'" class="reveal-modal" data-reveal>\n  <div class="row">\n    <h3 class="subheader">\n      '+o((e.tr||t&&t.tr||r).call(t,"Confirm",{name:"tr",hash:{},data:n}))+'\n      <br>\n      &emsp;\n      <small class="confirm_action"></small>\n    </h3>\n  </div>\n  <form action="">\n    <div class="row">\n      <div id="confirm_with_select_tip">'+o((e.tr||t&&t.tr||r).call(t,"You need to select something.",{name:"tr",hash:{},data:n}))+'</div>\n    </div>\n    <br />\n    <div class="row">\n      <div class="large-12 columns" id="confirm_select"></div>\n    </div>\n    <br />\n    <br />\n    <div class="form_buttons">\n      <button id="confirm_with_select_proceed" class="action_button radius button right" value="">'+o((e.tr||t&&t.tr||r).call(t,"OK",{name:"tr",hash:{},data:n}))+'</button>\n    </div>\n    <a class="close-reveal-modal">&#215;</a>\n  </form>\n</div>'},useData:!0});return e.registerPartial("utils/dialogs/confirm-with-select/html",a),a}),define("utils/dialogs/confirm-with-select",["require","utils/dialogs/dialog","hbs!./confirm-with-select/html","sunstone","utils/locale","utils/notifier","utils/resource-select","./confirm-with-select/dialogId"],function(t){function e(){this.dialogId=u,i.call(this)}function a(){return r({dialogId:this.dialogId})}function n(t){return $("#confirm_with_select_proceed",t).click(function(){var e=t.data("buttonAction"),a=o.getAction(e),n=$(".resource_list_select",t).val();if(!n.length)return c.notifyError("You must select a value"),!1;if(!a)return c.notifyError("Action "+a+" not defined."),!1;var s;switch(a.type){case"multiple":s=o.runAction(e,a.elements(),n);break;default:s=o.runAction(e,n)}return s||t.foundation("reveal","close"),!1}),!1}function s(t){var e=t.data("buttonAction"),a=t.data("buttonTab"),n=o.getButton(a,e),s=l.tr("You have to confirm this action");n.tip&&(s=n.tip),n.custom_select?$("div#confirm_select",t).html(n.custom_select):d.insert("#confirm_select",t,n.select,null,!0),$("#confirm_with_select_tip",t).text(s);var i=o.getAction(e),r=i.elements();if(r){var c=e.split(".");$(".confirm_action",t).html(c[1]+" "+c[0]+": "+r.join(", "))}return!1}var i=t("utils/dialogs/dialog"),r=t("hbs!./confirm-with-select/html"),o=t("sunstone"),l=t("utils/locale"),c=t("utils/notifier"),d=t("utils/resource-select"),u=t("./confirm-with-select/dialogId");return e.DIALOG_ID=u,e.prototype=Object.create(i.prototype),e.prototype.constructor=e,e.prototype.html=a,e.prototype.onShow=s,e.prototype.setup=n,e}),define("app",["require","jquery","tabs/dashboard-tab/tabId","tabs/settings-tab/tabId","tabs/provision-tab/tabId","sunstone","sunstone-config","opennebula","utils/notifier","tabs/provision-tab","tabs/users-tab","tabs/settings-tab","tabs/dashboard-tab","tabs/system-tab","tabs/users-tab","tabs/groups-tab","tabs/vdcs-tab","tabs/acls-tab","tabs/vresources-tab","tabs/vms-tab","tabs/templates-tab","tabs/images-tab","tabs/files-tab","tabs/infra-tab","tabs/clusters-tab","tabs/hosts-tab","tabs/datastores-tab","tabs/vnets-tab","tabs/secgroups-tab","tabs/zones-tab","tabs/marketplace-tab","tabs/oneflow-dashboard","tabs/oneflow-services-tab","tabs/oneflow-templates-tab","tabs/settings-tab","tabs/support-tab","utils/dialogs/confirm","utils/dialogs/confirm-with-select"],function(t){function e(){$(document).on("click",".accordion_advanced > a",function(){return $(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active"),$(this).closest(".accordion_advanced").children(".content").toggle(),!1})}function a(){function t(){c.Zone.list({timeout:!0,success:function(t,e){$(".zone-ul").empty(),$.each(e,function(){$(".zone-ul").append('<li><a id="'+this.ZONE.NAME+'" class="zone-choice">'+this.ZONE.NAME+"</a></li>")})},error:d.onError})}var e='<a href="#" data-dropdown="drop1" class="button small radius secondary dropdown" id="logout">      <i class="fa fa-user fa-lg fa-fw header-icon"></i> '+config.display_name+'</a>      <ul id="drop1" data-dropdown-content class="f-dropdown">        <li><a href="#" class="configuration"><i class="fa fa-cog"></i> Settings</a></li>        <li><a href="#" class="logout"><i class="fa fa-power-off"></i> Sign Out</a></li>      </ul>    <a href="#" data-dropdown="drop2" class="button small radius secondary dropdown" id="zonelector">      <i class="fa fa-home fa-lg fa-fw header-icon"></i> '+config.zone_name+'</a>      <ul id="drop2" data-dropdown-content class="zone-ul f-dropdown"></ul>';$(".user-zone-info").html(e),$("#zonelector").on("click",function(){t()}),$("a.zone-choice").on("click",function(){$.ajax({url:"config",type:"GET",headers:{ZONE_NAME:this.id},dataType:"json",success:function(){window.location.href="."},error:function(t){d.onError(null,c.Error(t))}})}),$(".user-zone-info").foundation("reflow","dropdown"),$("a.logout",$(".user-zone-info ")).click(function(){return c.Auth.logout({success:function(){window.location.href="login"},error:d.onError}),!1}),$(".user-zone-info a.configuration").click(function(){$(document).foundation("dropdown","closeall"),o.showTab(i)
})}t("jquery");var n,s=t("tabs/dashboard-tab/tabId"),i=t("tabs/settings-tab/tabId"),r=t("tabs/provision-tab/tabId"),o=t("sunstone"),l=t("sunstone-config"),c=t("opennebula"),d=t("utils/notifier");n=l.isTabEnabled(r)?[t("tabs/provision-tab"),t("tabs/users-tab"),t("tabs/settings-tab")]:[t("tabs/dashboard-tab"),t("tabs/system-tab"),t("tabs/users-tab"),t("tabs/groups-tab"),t("tabs/vdcs-tab"),t("tabs/acls-tab"),t("tabs/vresources-tab"),t("tabs/vms-tab"),t("tabs/templates-tab"),t("tabs/images-tab"),t("tabs/files-tab"),t("tabs/infra-tab"),t("tabs/clusters-tab"),t("tabs/hosts-tab"),t("tabs/datastores-tab"),t("tabs/vnets-tab"),t("tabs/secgroups-tab"),t("tabs/zones-tab"),t("tabs/marketplace-tab"),t("tabs/oneflow-dashboard"),t("tabs/oneflow-services-tab"),t("tabs/oneflow-templates-tab"),t("tabs/settings-tab"),t("tabs/support-tab")];var u=[t("utils/dialogs/confirm"),t("utils/dialogs/confirm-with-select")];o.addDialogs(u),$.each(n,function(t,e){o.addMainTab(e)}),$(document).ready(function(){o.insertTabs(),e(),a(),l.isTabEnabled(r)?(o.showTab(r),$("#loading").hide()):l.isTabEnabled(s)&&(o.showTab(s),$("#loading").hide())})}),require.config({paths:{jquery:"../bower_components/jquery/dist/jquery.min",datatables:"../bower_components/datatables/media/js/jquery.dataTables.min","foundation-datatables":"../bower_components/foundation-datatables/integration/foundation/dataTables.foundation.min",jgrowl:"../bower_components/jgrowl/jquery.jgrowl.min","foundation.core":"../bower_components/foundation/js/foundation/foundation","foundation.abide":"../bower_components/foundation/js/foundation/foundation.abide","foundation.accordion":"../bower_components/foundation/js/foundation/foundation.accordion","foundation.alert":"../bower_components/foundation/js/foundation/foundation.alert","foundation.clearing":"../bower_components/foundation/js/foundation/foundation.clearing","foundation.dropdown":"../bower_components/foundation/js/foundation/foundation.dropdown","foundation.equalizer":"../bower_components/foundation/js/foundation/foundation.equalizer","foundation.interchange":"../bower_components/foundation/js/foundation/foundation.interchange","foundation.joyride":"../bower_components/foundation/js/foundation/foundation.joyride","foundation.magellan":"../bower_components/foundation/js/foundation/foundation.magellan","foundation.offcanvas":"../bower_components/foundation/js/foundation/foundation.offcanvas","foundation.orbit":"../bower_components/foundation/js/foundation/foundation.orbit","foundation.reveal":"../bower_components/foundation/js/foundation/foundation.reveal","foundation.slider":"../bower_components/foundation/js/foundation/foundation.slider","foundation.tab":"../bower_components/foundation/js/foundation/foundation.tab","foundation.tooltip":"../bower_components/foundation/js/foundation/foundation.tooltip","foundation.topbar":"../bower_components/foundation/js/foundation/foundation.topbar",hbs:"../bower_components/require-handlebars-plugin/hbs","jquery.cookie":"../bower_components/foundation/js/vendor/jquery.cookie",fastclick:"../bower_components/foundation/js/vendor/fastclick",modernizr:"../bower_components/foundation/js/vendor/modernizr",placeholder:"../bower_components/foundation/js/vendor/placeholder",resumable:"../bower_components/resumablejs/resumable",flot:"../bower_components/flot/jquery.flot","flot.stack":"../bower_components/flot/jquery.flot.stack","flot.resize":"../bower_components/flot/jquery.flot.resize","flot.time":"../bower_components/flot/jquery.flot.time","flot.tooltip":"../bower_components/flot.tooltip/js/jquery.flot.tooltip.min",nouislider:"../vendor/4.0/nouislider/jquery.nouislider.min","vnc-util":"../bower_components/no-vnc/include/util","vnc-webutil":"../bower_components/no-vnc/include/webutil","vnc-base64":"../bower_components/no-vnc/include/base64","vnc-websock":"../bower_components/no-vnc/include/websock","vnc-des":"../bower_components/no-vnc/include/des","vnc-keysymdef":"../bower_components/no-vnc/include/keysymdef","vnc-keyboard":"../bower_components/no-vnc/include/keyboard","vnc-input":"../bower_components/no-vnc/include/input","vnc-display":"../bower_components/no-vnc/include/display","vnc-jsunzip":"../bower_components/no-vnc/include/jsunzip","vnc-rfb":"../bower_components/no-vnc/include/rfb","vnc-keysym":"../bower_components/no-vnc/include/keysym","spice-main":"../bower_components/spice-html5/main","spice-spicearraybuffer":"../bower_components/spice-html5/spicearraybuffer","spice-enums":"../bower_components/spice-html5/enums","spice-atKeynames":"../bower_components/spice-html5/atKeynames","spice-utils":"../bower_components/spice-html5/utils","spice-png":"../bower_components/spice-html5/png","spice-lz":"../bower_components/spice-html5/lz","spice-quic":"../bower_components/spice-html5/quic","spice-bitmap":"../bower_components/spice-html5/bitmap","spice-spicedataview":"../bower_components/spice-html5/spicedataview","spice-spicetype":"../bower_components/spice-html5/spicetype","spice-spicemsg":"../bower_components/spice-html5/spicemsg","spice-wire":"../bower_components/spice-html5/wire","spice-spiceconn":"../bower_components/spice-html5/spiceconn","spice-display":"../bower_components/spice-html5/display","spice-inputs":"../bower_components/spice-html5/inputs","spice-webm":"../bower_components/spice-html5/webm","spice-playback":"../bower_components/spice-html5/playback","spice-simulatecursor":"../bower_components/spice-html5/simulatecursor","spice-cursor":"../bower_components/spice-html5/cursor","spice-jsbn":"../bower_components/spice-html5/thirdparty/jsbn","spice-rsa":"../bower_components/spice-html5/thirdparty/rsa","spice-prng4":"../bower_components/spice-html5/thirdparty/prng4","spice-rng":"../bower_components/spice-html5/thirdparty/rng","spice-sha1":"../bower_components/spice-html5/thirdparty/sha1","spice-ticket":"../bower_components/spice-html5/ticket","spice-resize":"../bower_components/spice-html5/resize","spice-filexfer":"../bower_components/spice-html5/filexfer"},shim:{jquery:{exports:"$"},jgrowl:{deps:["jquery"]},"foundation-datatables":{deps:["jquery","datatables"]},"foundation.core":{deps:["jquery","modernizr"],exports:"Foundation"},"foundation.abide":{deps:["foundation.core"]},"foundation.accordion":{deps:["foundation.core"]},"foundation.alert":{deps:["foundation.core"]},"foundation.clearing":{deps:["foundation.core"]},"foundation.dropdown":{deps:["foundation.core"]},"foundation.equalizer":{deps:["foundation.core"]},"foundation.interchange":{deps:["foundation.core"]},"foundation.joyride":{deps:["foundation.core","jquery.cookie"]},"foundation.magellan":{deps:["foundation.core"]},"foundation.offcanvas":{deps:["foundation.core"]},"foundation.orbit":{deps:["foundation.core"]},"foundation.reveal":{deps:["foundation.core"]},"foundation.slider":{deps:["foundation.core"]},"foundation.tab":{deps:["foundation.core"]},"foundation.tooltip":{deps:["foundation.core"]},"foundation.topbar":{deps:["foundation.core"]},"jquery.cookie":{deps:["jquery"]},fastclick:{exports:"FastClick"},modernizr:{exports:"Modernizr"},placeholder:{exports:"Placeholders"},flot:{deps:["jquery"]},"flot.stack":{deps:["flot"]},"flot.resize":{deps:["flot"]},"flot.time":{deps:["flot"]},"flot.tooltip":{deps:["flot"]},nouislider:{deps:["jquery"]},"vnc-util":{exports:"Util"},"vnc-webutil":{deps:["vnc-util"]},"vnc-base64":{deps:["vnc-util"]},"vnc-websock":{deps:["vnc-util"]},"vnc-des":{deps:["vnc-util"]},"vnc-keysymdef":{deps:["vnc-util"]},"vnc-keyboard":{deps:["vnc-util"]},"vnc-input":{deps:["vnc-util"]},"vnc-display":{deps:["vnc-util"]},"vnc-jsunzip":{deps:["vnc-util"]},"vnc-rfb":{deps:["vnc-util"]},"vnc-keysym":{deps:["vnc-util"]},"spice-main":{exports:"SpiceMainConn",deps:["spice-spiceconn","spice-spicearraybuffer","spice-enums","spice-atKeynames","spice-utils","spice-png","spice-lz","spice-quic","spice-bitmap","spice-spicedataview","spice-spicetype","spice-spicemsg","spice-wire","spice-display","spice-inputs","spice-webm","spice-playback","spice-simulatecursor","spice-cursor","spice-jsbn","spice-rsa","spice-prng4","spice-rng","spice-sha1","spice-ticket","spice-resize","spice-filexfer"]},"spice-display":{deps:["spice-spiceconn"]},"spice-inputs":{deps:["spice-spiceconn"]},"spice-playback":{deps:["spice-spiceconn"]},"spice-cursor":{deps:["spice-spiceconn"]}}}),require(["app"],function(){}),define("main",function(){});
//# sourceMappingURL=main.js
//# sourceMappingURL=main.js.map